import{g as q_,r as k_,R as hV,a as yn,j as Ir}from"./index-BvPoo7vy.js";/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Z5="180",Z2={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},J2={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},H_=0,Vd=1,W_=2,fV=3,j_=0,Q6=1,e6=2,xa=3,Wa=0,Fi=1,Ur=2,ja=0,aa=1,Ec=2,wc=3,Rc=4,gc=5,Us=100,YA=101,QA=102,X_=103,Y_=104,yl=200,$A=201,KA=202,ZA=203,x5=204,b5=205,JA=206,ep=207,tp=208,np=209,ip=210,MC=211,EC=212,wC=213,RC=214,S5=0,T5=1,M5=2,P1=3,E5=4,w5=5,R5=6,C5=7,J5=0,Q_=1,$_=2,oa=0,K_=1,Z_=2,J_=3,rp=4,CC=5,ex=6,tx=7,uv="attached",NC="detached",$6=300,Eo=301,Zo=302,Fu=303,Vu=304,D1=306,B1=1e3,Ra=1001,L1=1002,Xi=1003,K6=1004,dV=1004,O0=1005,AV=1005,Qi=1006,Bu=1007,pV=1007,Fs=1008,PC=1008,Ar=1009,Lu=1010,Iu=1011,Xo=1012,rs=1013,zi=1014,or=1015,$r=1016,Z6=1017,J6=1018,Xa=1020,e7=35902,t7=35899,sp=1021,e8=1022,nr=1023,Ya=1026,Qa=1027,a3=1028,Hu=1029,Sl=1030,o3=1031,DC=1032,l3=1033,b1=33776,S1=33777,T1=33778,M1=33779,N5=35840,P5=35841,D5=35842,B5=35843,Cc=36196,Nc=37492,Pc=37496,Dc=37808,Bc=37809,Lc=37810,Ic=37811,Uc=37812,Oc=37813,Fc=37814,Vc=37815,zc=37816,Gc=37817,qc=37818,kc=37819,Hc=37820,Wc=37821,jc=36492,zd=36494,Gd=36495,Xc=36283,Yc=36284,Qc=36285,$c=36286,BC=2200,LC=2201,IC=2202,m6=2300,qd=2301,vd=2302,oc=2400,lc=2401,g6=2402,ap=2500,nx=2501,UC=0,OC=1,cv=2,FC=3200,VC=3201,mV=3202,gV=3203,Bl=0,ix=1,Ea="",Qr="srgb",Ll="srgb-linear",Kc="linear",Ht="srgb",zC=0,Su=7680,GC=7681,qC=7682,kC=7683,HC=34055,WC=34056,jC=5386,XC=512,YC=513,QC=514,$C=515,KC=516,ZC=517,JC=518,kd=519,op=512,n7=513,lp=514,i7=515,up=516,cp=517,hp=518,fp=519,L5=35044,uc=35048,yV=35040,vV=35045,_V=35049,xV=35041,bV=35046,SV=35050,TV=35042,MV="100",hv="300 es",Vs=2e3,Jo=2001,cc={COMPUTE:"compute",RENDER:"render"},EV={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},wV={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let No=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const Ks=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let gT=1234567;const yc=Math.PI/180,Zc=180/Math.PI;function Mo(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Ks[i&255]+Ks[i>>8&255]+Ks[i>>16&255]+Ks[i>>24&255]+"-"+Ks[e&255]+Ks[e>>8&255]+"-"+Ks[e>>16&15|64]+Ks[e>>24&255]+"-"+Ks[t&63|128]+Ks[t>>8&255]+"-"+Ks[t>>16&255]+Ks[t>>24&255]+Ks[n&255]+Ks[n>>8&255]+Ks[n>>16&255]+Ks[n>>24&255]).toLowerCase()}function In(i,e,t){return Math.max(e,Math.min(t,i))}function rx(i,e){return(i%e+e)%e}function RV(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function CV(i,e,t){return i!==e?(t-i)/(e-i):0}function t6(i,e,t){return(1-t)*i+t*e}function NV(i,e,t,n){return t6(i,e,1-Math.exp(-t*n))}function PV(i,e=1){return e-Math.abs(rx(i,e*2)-e)}function DV(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function BV(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function LV(i,e){return i+Math.floor(Math.random()*(e-i+1))}function IV(i,e){return i+Math.random()*(e-i)}function UV(i){return i*(.5-Math.random())}function OV(i){i!==void 0&&(gT=i);let e=gT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function FV(i){return i*yc}function VV(i){return i*Zc}function zV(i){return(i&i-1)===0&&i!==0}function GV(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function qV(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function kV(i,e,t,n,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+n)/2),c=a((e+n)/2),p=s((e-n)/2),y=a((e-n)/2),_=s((n-e)/2),b=a((n-e)/2);switch(r){case"XYX":i.set(o*c,l*p,l*y,o*u);break;case"YZY":i.set(l*y,o*c,l*p,o*u);break;case"ZXZ":i.set(l*p,l*y,o*c,o*u);break;case"XZX":i.set(o*c,l*b,l*_,o*u);break;case"YXY":i.set(l*_,o*c,l*b,o*u);break;case"ZYZ":i.set(l*b,l*_,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function wa(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Zn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const dp={DEG2RAD:yc,RAD2DEG:Zc,generateUUID:Mo,clamp:In,euclideanModulo:rx,mapLinear:RV,inverseLerp:CV,lerp:t6,damp:NV,pingpong:PV,smoothstep:DV,smootherstep:BV,randInt:LV,randFloat:IV,randFloatSpread:UV,seededRandom:OV,degToRad:FV,radToDeg:VV,isPowerOfTwo:zV,ceilPowerOfTwo:GV,floorPowerOfTwo:qV,setQuaternionFromProperEuler:kV,normalize:Zn,denormalize:wa};class He{constructor(e=0,t=0){He.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=In(this.x,e.x,t.x),this.y=In(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=In(this.x,e,t),this.y=In(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(In(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(In(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Gs{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,o){let l=n[r+0],u=n[r+1],c=n[r+2],p=n[r+3];const y=s[a+0],_=s[a+1],b=s[a+2],w=s[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=p;return}if(o===1){e[t+0]=y,e[t+1]=_,e[t+2]=b,e[t+3]=w;return}if(p!==w||l!==y||u!==_||c!==b){let E=1-o;const M=l*y+u*_+c*b+p*w,P=M>=0?1:-1,D=1-M*M;if(D>Number.EPSILON){const U=Math.sqrt(D),O=Math.atan2(U,M*P);E=Math.sin(E*O)/U,o=Math.sin(o*O)/U}const B=o*P;if(l=l*E+y*B,u=u*E+_*B,c=c*E+b*B,p=p*E+w*B,E===1-o){const U=1/Math.sqrt(l*l+u*u+c*c+p*p);l*=U,u*=U,c*=U,p*=U}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=p}static multiplyQuaternionsFlat(e,t,n,r,s,a){const o=n[r],l=n[r+1],u=n[r+2],c=n[r+3],p=s[a],y=s[a+1],_=s[a+2],b=s[a+3];return e[t]=o*b+c*p+l*_-u*y,e[t+1]=l*b+c*y+u*p-o*_,e[t+2]=u*b+c*_+o*y-l*p,e[t+3]=c*b-o*p-l*y-u*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(n/2),c=o(r/2),p=o(s/2),y=l(n/2),_=l(r/2),b=l(s/2);switch(a){case"XYZ":this._x=y*c*p+u*_*b,this._y=u*_*p-y*c*b,this._z=u*c*b+y*_*p,this._w=u*c*p-y*_*b;break;case"YXZ":this._x=y*c*p+u*_*b,this._y=u*_*p-y*c*b,this._z=u*c*b-y*_*p,this._w=u*c*p+y*_*b;break;case"ZXY":this._x=y*c*p-u*_*b,this._y=u*_*p+y*c*b,this._z=u*c*b+y*_*p,this._w=u*c*p-y*_*b;break;case"ZYX":this._x=y*c*p-u*_*b,this._y=u*_*p+y*c*b,this._z=u*c*b-y*_*p,this._w=u*c*p+y*_*b;break;case"YZX":this._x=y*c*p+u*_*b,this._y=u*_*p+y*c*b,this._z=u*c*b-y*_*p,this._w=u*c*p-y*_*b;break;case"XZY":this._x=y*c*p-u*_*b,this._y=u*_*p-y*c*b,this._z=u*c*b+y*_*p,this._w=u*c*p+y*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],p=t[10],y=n+o+p;if(y>0){const _=.5/Math.sqrt(y+1);this._w=.25/_,this._x=(c-l)*_,this._y=(s-u)*_,this._z=(a-r)*_}else if(n>o&&n>p){const _=2*Math.sqrt(1+n-o-p);this._w=(c-l)/_,this._x=.25*_,this._y=(r+a)/_,this._z=(s+u)/_}else if(o>p){const _=2*Math.sqrt(1+o-n-p);this._w=(s-u)/_,this._x=(r+a)/_,this._y=.25*_,this._z=(l+c)/_}else{const _=2*Math.sqrt(1+p-n-o);this._w=(a-r)/_,this._x=(s+u)/_,this._y=(l+c)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(In(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+a*o+r*u-s*l,this._y=r*c+a*l+s*o-n*u,this._z=s*c+a*u+n*l-r*o,this._w=a*c-n*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const _=1-t;return this._w=_*a+t*this._w,this._x=_*n+t*this._x,this._y=_*r+t*this._y,this._z=_*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),p=Math.sin((1-t)*c)/u,y=Math.sin(t*c)/u;return this._w=a*p+this._w*y,this._x=n*p+this._x*y,this._y=r*p+this._y*y,this._z=s*p+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class te{constructor(e=0,t=0,n=0){te.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(yT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(yT.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*r-o*n),c=2*(o*t-s*r),p=2*(s*n-a*t);return this.x=t+l*u+a*p-o*c,this.y=n+l*c+o*u-s*p,this.z=r+l*p+s*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=In(this.x,e.x,t.x),this.y=In(this.y,e.y,t.y),this.z=In(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=In(this.x,e,t),this.y=In(this.y,e,t),this.z=In(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(In(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-n*l,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ng.copy(this).projectOnVector(e),this.sub(ng)}reflect(e){return this.sub(ng.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(In(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ng=new te,yT=new Gs;class Vn{constructor(e,t,n,r,s,a,o,l,u){Vn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,u)}set(e,t,n,r,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=n,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[3],l=n[6],u=n[1],c=n[4],p=n[7],y=n[2],_=n[5],b=n[8],w=r[0],E=r[3],M=r[6],P=r[1],D=r[4],B=r[7],U=r[2],O=r[5],z=r[8];return s[0]=a*w+o*P+l*U,s[3]=a*E+o*D+l*O,s[6]=a*M+o*B+l*z,s[1]=u*w+c*P+p*U,s[4]=u*E+c*D+p*O,s[7]=u*M+c*B+p*z,s[2]=y*w+_*P+b*U,s[5]=y*E+_*D+b*O,s[8]=y*M+_*B+b*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-n*s*c+n*o*l+r*s*u-r*a*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],p=c*a-o*u,y=o*l-c*s,_=u*s-a*l,b=t*p+n*y+r*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/b;return e[0]=p*w,e[1]=(r*u-c*n)*w,e[2]=(o*n-r*a)*w,e[3]=y*w,e[4]=(c*t-r*l)*w,e[5]=(r*s-o*t)*w,e[6]=_*w,e[7]=(n*l-u*t)*w,e[8]=(a*t-n*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(n*l,n*u,-n*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(ig.makeScale(e,t)),this}rotate(e){return this.premultiply(ig.makeRotation(-e)),this}translate(e,t){return this.premultiply(ig.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ig=new Vn;function sx(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const HV={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function s5(i,e){return new HV[i](e)}function y6(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function ax(){const i=y6("canvas");return i.style.display="block",i}const vT={};function la(i){i in vT||(vT[i]=!0,console.warn(i))}function WV(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}const _T=new Vn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),xT=new Vn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function jV(){const i={enabled:!0,workingColorSpace:Ll,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===Ht&&(r.r=E1(r.r),r.g=E1(r.g),r.b=E1(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===Ht&&(r.r=A5(r.r),r.g=A5(r.g),r.b=A5(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ea?Kc:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return la("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return la("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Ll]:{primaries:e,whitePoint:n,transfer:Kc,toXYZ:_T,fromXYZ:xT,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Qr},outputColorSpaceConfig:{drawingBufferColorSpace:Qr}},[Qr]:{primaries:e,whitePoint:n,transfer:Ht,toXYZ:_T,fromXYZ:xT,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Qr}}}),i}const gn=jV();function E1(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function A5(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let p4;class eN{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{p4===void 0&&(p4=y6("canvas")),p4.width=e.width,p4.height=e.height;const r=p4.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=p4}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=y6("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=E1(s[a]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(E1(t[n]/255)*255):t[n]=E1(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let XV=0;class Pu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:XV++}),this.uuid=Mo(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(rg(r[a].image)):s.push(rg(r[a]))}else s=rg(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function rg(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?eN.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let YV=0;const sg=new te;class mr extends No{constructor(e=mr.DEFAULT_IMAGE,t=mr.DEFAULT_MAPPING,n=Ra,r=Ra,s=Qi,a=Fs,o=nr,l=Ar,u=mr.DEFAULT_ANISOTROPY,c=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:YV++}),this.uuid=Mo(),this.name="",this.source=new Pu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new He(0,0),this.repeat=new He(1,1),this.center=new He(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(sg).x}get height(){return this.source.getSize(sg).y}get depth(){return this.source.getSize(sg).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==$6)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case B1:e.x=e.x-Math.floor(e.x);break;case Ra:e.x=e.x<0?0:1;break;case L1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case B1:e.y=e.y-Math.floor(e.y);break;case Ra:e.y=e.y<0?0:1;break;case L1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}mr.DEFAULT_IMAGE=null;mr.DEFAULT_MAPPING=$6;mr.DEFAULT_ANISOTROPY=1;class an{constructor(e=0,t=0,n=0,r=1){an.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,u=l[0],c=l[4],p=l[8],y=l[1],_=l[5],b=l[9],w=l[2],E=l[6],M=l[10];if(Math.abs(c-y)<.01&&Math.abs(p-w)<.01&&Math.abs(b-E)<.01){if(Math.abs(c+y)<.1&&Math.abs(p+w)<.1&&Math.abs(b+E)<.1&&Math.abs(u+_+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(u+1)/2,B=(_+1)/2,U=(M+1)/2,O=(c+y)/4,z=(p+w)/4,q=(b+E)/4;return D>B&&D>U?D<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(D),r=O/n,s=z/n):B>U?B<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(B),n=O/r,s=q/r):U<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),n=z/s,r=q/s),this.set(n,r,s,t),this}let P=Math.sqrt((E-b)*(E-b)+(p-w)*(p-w)+(y-c)*(y-c));return Math.abs(P)<.001&&(P=1),this.x=(E-b)/P,this.y=(p-w)/P,this.z=(y-c)/P,this.w=Math.acos((u+_+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=In(this.x,e.x,t.x),this.y=In(this.y,e.y,t.y),this.z=In(this.z,e.z,t.z),this.w=In(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=In(this.x,e,t),this.y=In(this.y,e,t),this.z=In(this.z,e,t),this.w=In(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(In(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class W0 extends No{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Qi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t);const r={width:e,height:t,depth:n.depth},s=new mr(r);this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Qi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Pu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Il extends W0{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class r7 extends mr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Xi,this.minFilter=Xi,this.wrapR=Ra,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class QV extends Il{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new r7(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class Ap extends mr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=Xi,this.minFilter=Xi,this.wrapR=Ra,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $V extends Il{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ap(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ss{constructor(e=new te(1/0,1/0,1/0),t=new te(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(E0.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(E0.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=E0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,E0):E0.fromBufferAttribute(s,a),E0.applyMatrix4(e.matrixWorld),this.expandByPoint(E0);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Lf.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Lf.copy(n.boundingBox)),Lf.applyMatrix4(e.matrixWorld),this.union(Lf)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,E0),E0.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(oh),If.subVectors(this.max,oh),m4.subVectors(e.a,oh),g4.subVectors(e.b,oh),y4.subVectors(e.c,oh),hu.subVectors(g4,m4),fu.subVectors(y4,g4),R2.subVectors(m4,y4);let t=[0,-hu.z,hu.y,0,-fu.z,fu.y,0,-R2.z,R2.y,hu.z,0,-hu.x,fu.z,0,-fu.x,R2.z,0,-R2.x,-hu.y,hu.x,0,-fu.y,fu.x,0,-R2.y,R2.x,0];return!ag(t,m4,g4,y4,If)||(t=[1,0,0,0,1,0,0,0,1],!ag(t,m4,g4,y4,If))?!1:(Uf.crossVectors(hu,fu),t=[Uf.x,Uf.y,Uf.z],ag(t,m4,g4,y4,If))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,E0).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(E0).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(a1[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),a1[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),a1[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),a1[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),a1[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),a1[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),a1[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),a1[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(a1),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const a1=[new te,new te,new te,new te,new te,new te,new te,new te],E0=new te,Lf=new ss,m4=new te,g4=new te,y4=new te,hu=new te,fu=new te,R2=new te,oh=new te,If=new te,Uf=new te,C2=new te;function ag(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){C2.fromArray(i,s);const o=r.x*Math.abs(C2.x)+r.y*Math.abs(C2.y)+r.z*Math.abs(C2.z),l=e.dot(C2),u=t.dot(C2),c=n.dot(C2);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const KV=new ss,lh=new te,og=new te;class Kr{constructor(e=new te,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):KV.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;lh.subVectors(e,this.center);const t=lh.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(lh,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(og.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(lh.copy(e.center).add(og)),this.expandByPoint(lh.copy(e.center).sub(og))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const o1=new te,lg=new te,Of=new te,du=new te,ug=new te,Ff=new te,cg=new te;class u3{constructor(e=new te,t=new te(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,o1)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=o1.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(o1.copy(this.origin).addScaledVector(this.direction,t),o1.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){lg.copy(e).add(t).multiplyScalar(.5),Of.copy(t).sub(e).normalize(),du.copy(this.origin).sub(lg);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Of),o=du.dot(this.direction),l=-du.dot(Of),u=du.lengthSq(),c=Math.abs(1-a*a);let p,y,_,b;if(c>0)if(p=a*l-o,y=a*o-l,b=s*c,p>=0)if(y>=-b)if(y<=b){const w=1/c;p*=w,y*=w,_=p*(p+a*y+2*o)+y*(a*p+y+2*l)+u}else y=s,p=Math.max(0,-(a*y+o)),_=-p*p+y*(y+2*l)+u;else y=-s,p=Math.max(0,-(a*y+o)),_=-p*p+y*(y+2*l)+u;else y<=-b?(p=Math.max(0,-(-a*s+o)),y=p>0?-s:Math.min(Math.max(-s,-l),s),_=-p*p+y*(y+2*l)+u):y<=b?(p=0,y=Math.min(Math.max(-s,-l),s),_=y*(y+2*l)+u):(p=Math.max(0,-(a*s+o)),y=p>0?s:Math.min(Math.max(-s,-l),s),_=-p*p+y*(y+2*l)+u);else y=a>0?-s:s,p=Math.max(0,-(a*y+o)),_=-p*p+y*(y+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(lg).addScaledVector(Of,y),_}intersectSphere(e,t){o1.subVectors(e.center,this.origin);const n=o1.dot(this.direction),r=o1.dot(o1)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=n-a,l=n+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,p=1/this.direction.z,y=this.origin;return u>=0?(n=(e.min.x-y.x)*u,r=(e.max.x-y.x)*u):(n=(e.max.x-y.x)*u,r=(e.min.x-y.x)*u),c>=0?(s=(e.min.y-y.y)*c,a=(e.max.y-y.y)*c):(s=(e.max.y-y.y)*c,a=(e.min.y-y.y)*c),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),p>=0?(o=(e.min.z-y.z)*p,l=(e.max.z-y.z)*p):(o=(e.max.z-y.z)*p,l=(e.min.z-y.z)*p),n>l||o>r)||((o>n||n!==n)&&(n=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,o1)!==null}intersectTriangle(e,t,n,r,s){ug.subVectors(t,e),Ff.subVectors(n,e),cg.crossVectors(ug,Ff);let a=this.direction.dot(cg),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;du.subVectors(this.origin,e);const l=o*this.direction.dot(Ff.crossVectors(du,Ff));if(l<0)return null;const u=o*this.direction.dot(ug.cross(du));if(u<0||l+u>a)return null;const c=-o*du.dot(cg);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class $t{constructor(e,t,n,r,s,a,o,l,u,c,p,y,_,b,w,E){$t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,a,o,l,u,c,p,y,_,b,w,E)}set(e,t,n,r,s,a,o,l,u,c,p,y,_,b,w,E){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=r,M[1]=s,M[5]=a,M[9]=o,M[13]=l,M[2]=u,M[6]=c,M[10]=p,M[14]=y,M[3]=_,M[7]=b,M[11]=w,M[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new $t().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/v4.setFromMatrixColumn(e,0).length(),s=1/v4.setFromMatrixColumn(e,1).length(),a=1/v4.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const y=a*c,_=a*p,b=o*c,w=o*p;t[0]=l*c,t[4]=-l*p,t[8]=u,t[1]=_+b*u,t[5]=y-w*u,t[9]=-o*l,t[2]=w-y*u,t[6]=b+_*u,t[10]=a*l}else if(e.order==="YXZ"){const y=l*c,_=l*p,b=u*c,w=u*p;t[0]=y+w*o,t[4]=b*o-_,t[8]=a*u,t[1]=a*p,t[5]=a*c,t[9]=-o,t[2]=_*o-b,t[6]=w+y*o,t[10]=a*l}else if(e.order==="ZXY"){const y=l*c,_=l*p,b=u*c,w=u*p;t[0]=y-w*o,t[4]=-a*p,t[8]=b+_*o,t[1]=_+b*o,t[5]=a*c,t[9]=w-y*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const y=a*c,_=a*p,b=o*c,w=o*p;t[0]=l*c,t[4]=b*u-_,t[8]=y*u+w,t[1]=l*p,t[5]=w*u+y,t[9]=_*u-b,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const y=a*l,_=a*u,b=o*l,w=o*u;t[0]=l*c,t[4]=w-y*p,t[8]=b*p+_,t[1]=p,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=_*p+b,t[10]=y-w*p}else if(e.order==="XZY"){const y=a*l,_=a*u,b=o*l,w=o*u;t[0]=l*c,t[4]=-p,t[8]=u*c,t[1]=y*p+w,t[5]=a*c,t[9]=_*p-b,t[2]=b*p-_,t[6]=o*c,t[10]=w*p+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ZV,e,JV)}lookAt(e,t,n){const r=this.elements;return po.subVectors(e,t),po.lengthSq()===0&&(po.z=1),po.normalize(),Au.crossVectors(n,po),Au.lengthSq()===0&&(Math.abs(n.z)===1?po.x+=1e-4:po.z+=1e-4,po.normalize(),Au.crossVectors(n,po)),Au.normalize(),Vf.crossVectors(po,Au),r[0]=Au.x,r[4]=Vf.x,r[8]=po.x,r[1]=Au.y,r[5]=Vf.y,r[9]=po.y,r[2]=Au.z,r[6]=Vf.z,r[10]=po.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],o=n[4],l=n[8],u=n[12],c=n[1],p=n[5],y=n[9],_=n[13],b=n[2],w=n[6],E=n[10],M=n[14],P=n[3],D=n[7],B=n[11],U=n[15],O=r[0],z=r[4],q=r[8],F=r[12],G=r[1],j=r[5],$=r[9],K=r[13],ie=r[2],ee=r[6],X=r[10],re=r[14],se=r[3],Ae=r[7],Se=r[11],Ce=r[15];return s[0]=a*O+o*G+l*ie+u*se,s[4]=a*z+o*j+l*ee+u*Ae,s[8]=a*q+o*$+l*X+u*Se,s[12]=a*F+o*K+l*re+u*Ce,s[1]=c*O+p*G+y*ie+_*se,s[5]=c*z+p*j+y*ee+_*Ae,s[9]=c*q+p*$+y*X+_*Se,s[13]=c*F+p*K+y*re+_*Ce,s[2]=b*O+w*G+E*ie+M*se,s[6]=b*z+w*j+E*ee+M*Ae,s[10]=b*q+w*$+E*X+M*Se,s[14]=b*F+w*K+E*re+M*Ce,s[3]=P*O+D*G+B*ie+U*se,s[7]=P*z+D*j+B*ee+U*Ae,s[11]=P*q+D*$+B*X+U*Se,s[15]=P*F+D*K+B*re+U*Ce,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],p=e[6],y=e[10],_=e[14],b=e[3],w=e[7],E=e[11],M=e[15];return b*(+s*l*p-r*u*p-s*o*y+n*u*y+r*o*_-n*l*_)+w*(+t*l*_-t*u*y+s*a*y-r*a*_+r*u*c-s*l*c)+E*(+t*u*p-t*o*_-s*a*p+n*a*_+s*o*c-n*u*c)+M*(-r*o*c-t*l*p+t*o*y+r*a*p-n*a*y+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],p=e[9],y=e[10],_=e[11],b=e[12],w=e[13],E=e[14],M=e[15],P=p*E*u-w*y*u+w*l*_-o*E*_-p*l*M+o*y*M,D=b*y*u-c*E*u-b*l*_+a*E*_+c*l*M-a*y*M,B=c*w*u-b*p*u+b*o*_-a*w*_-c*o*M+a*p*M,U=b*p*l-c*w*l-b*o*y+a*w*y+c*o*E-a*p*E,O=t*P+n*D+r*B+s*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/O;return e[0]=P*z,e[1]=(w*y*s-p*E*s-w*r*_+n*E*_+p*r*M-n*y*M)*z,e[2]=(o*E*s-w*l*s+w*r*u-n*E*u-o*r*M+n*l*M)*z,e[3]=(p*l*s-o*y*s-p*r*u+n*y*u+o*r*_-n*l*_)*z,e[4]=D*z,e[5]=(c*E*s-b*y*s+b*r*_-t*E*_-c*r*M+t*y*M)*z,e[6]=(b*l*s-a*E*s-b*r*u+t*E*u+a*r*M-t*l*M)*z,e[7]=(a*y*s-c*l*s+c*r*u-t*y*u-a*r*_+t*l*_)*z,e[8]=B*z,e[9]=(b*p*s-c*w*s-b*n*_+t*w*_+c*n*M-t*p*M)*z,e[10]=(a*w*s-b*o*s+b*n*u-t*w*u-a*n*M+t*o*M)*z,e[11]=(c*o*s-a*p*s-c*n*u+t*p*u+a*n*_-t*o*_)*z,e[12]=U*z,e[13]=(c*w*r-b*p*r+b*n*y-t*w*y-c*n*E+t*p*E)*z,e[14]=(b*o*r-a*w*r-b*n*l+t*w*l+a*n*E-t*o*E)*z,e[15]=(a*p*r-c*o*r+c*n*l-t*p*l-a*n*y+t*o*y)*z,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+n,u*o-r*l,u*l+r*o,0,u*o+r*l,c*o+n,c*l-r*a,0,u*l-r*o,c*l+r*a,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,p=o+o,y=s*u,_=s*c,b=s*p,w=a*c,E=a*p,M=o*p,P=l*u,D=l*c,B=l*p,U=n.x,O=n.y,z=n.z;return r[0]=(1-(w+M))*U,r[1]=(_+B)*U,r[2]=(b-D)*U,r[3]=0,r[4]=(_-B)*O,r[5]=(1-(y+M))*O,r[6]=(E+P)*O,r[7]=0,r[8]=(b+D)*z,r[9]=(E-P)*z,r[10]=(1-(y+w))*z,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=v4.set(r[0],r[1],r[2]).length();const a=v4.set(r[4],r[5],r[6]).length(),o=v4.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],w0.copy(this);const u=1/s,c=1/a,p=1/o;return w0.elements[0]*=u,w0.elements[1]*=u,w0.elements[2]*=u,w0.elements[4]*=c,w0.elements[5]*=c,w0.elements[6]*=c,w0.elements[8]*=p,w0.elements[9]*=p,w0.elements[10]*=p,t.setFromRotationMatrix(w0),n.x=s,n.y=a,n.z=o,this}makePerspective(e,t,n,r,s,a,o=Vs,l=!1){const u=this.elements,c=2*s/(t-e),p=2*s/(n-r),y=(t+e)/(t-e),_=(n+r)/(n-r);let b,w;if(l)b=s/(a-s),w=a*s/(a-s);else if(o===Vs)b=-(a+s)/(a-s),w=-2*a*s/(a-s);else if(o===Jo)b=-a/(a-s),w=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=y,u[12]=0,u[1]=0,u[5]=p,u[9]=_,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=w,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,s,a,o=Vs,l=!1){const u=this.elements,c=2/(t-e),p=2/(n-r),y=-(t+e)/(t-e),_=-(n+r)/(n-r);let b,w;if(l)b=1/(a-s),w=a/(a-s);else if(o===Vs)b=-2/(a-s),w=-(a+s)/(a-s);else if(o===Jo)b=-1/(a-s),w=-s/(a-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return u[0]=c,u[4]=0,u[8]=0,u[12]=y,u[1]=0,u[5]=p,u[9]=0,u[13]=_,u[2]=0,u[6]=0,u[10]=b,u[14]=w,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const v4=new te,w0=new $t,ZV=new te(0,0,0),JV=new te(1,1,1),Au=new te,Vf=new te,po=new te,bT=new $t,ST=new Gs;class bs{constructor(e=0,t=0,n=0,r=bs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],u=r[5],c=r[9],p=r[2],y=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(In(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,_),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(y,u),this._z=0);break;case"YXZ":this._x=Math.asin(-In(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(In(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-In(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(y,_),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(In(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(o,_));break;case"XZY":this._z=Math.asin(-In(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(y,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return bT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(bT,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ST.setFromEuler(this),this.setFromQuaternion(ST,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}bs.DEFAULT_ORDER="XYZ";class I5{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ez=0;const TT=new te,_4=new Gs,l1=new $t,zf=new te,uh=new te,tz=new te,nz=new Gs,MT=new te(1,0,0),ET=new te(0,1,0),wT=new te(0,0,1),RT={type:"added"},iz={type:"removed"},x4={type:"childadded",child:null},hg={type:"childremoved",child:null};class yi extends No{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ez++}),this.uuid=Mo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yi.DEFAULT_UP.clone();const e=new te,t=new bs,n=new Gs,r=new te(1,1,1);function s(){n.setFromEuler(t,!1)}function a(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new $t},normalMatrix:{value:new Vn}}),this.matrix=new $t,this.matrixWorld=new $t,this.matrixAutoUpdate=yi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new I5,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _4.setFromAxisAngle(e,t),this.quaternion.multiply(_4),this}rotateOnWorldAxis(e,t){return _4.setFromAxisAngle(e,t),this.quaternion.premultiply(_4),this}rotateX(e){return this.rotateOnAxis(MT,e)}rotateY(e){return this.rotateOnAxis(ET,e)}rotateZ(e){return this.rotateOnAxis(wT,e)}translateOnAxis(e,t){return TT.copy(e).applyQuaternion(this.quaternion),this.position.add(TT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(MT,e)}translateY(e){return this.translateOnAxis(ET,e)}translateZ(e){return this.translateOnAxis(wT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(l1.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?zf.copy(e):zf.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),uh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?l1.lookAt(uh,zf,this.up):l1.lookAt(zf,uh,this.up),this.quaternion.setFromRotationMatrix(l1),r&&(l1.extractRotation(r.matrixWorld),_4.setFromRotationMatrix(l1),this.quaternion.premultiply(_4.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(RT),x4.child=e,this.dispatchEvent(x4),x4.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(iz),hg.child=e,this.dispatchEvent(hg),hg.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),l1.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),l1.multiply(e.parent.matrixWorld)),e.applyMatrix4(l1),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(RT),x4.child=e,this.dispatchEvent(x4),x4.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const a=this.children[n].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uh,e,tz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(uh,nz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(o=>({...o,boundingBox:o.boundingBox?o.boundingBox.toJSON():void 0,boundingSphere:o.boundingSphere?o.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(o=>({...o})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const p=l[u];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),p=a(e.shapes),y=a(e.skeletons),_=a(e.animations),b=a(e.nodes);o.length>0&&(n.geometries=o),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),p.length>0&&(n.shapes=p),y.length>0&&(n.skeletons=y),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=r,n;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}yi.DEFAULT_UP=new te(0,1,0);yi.DEFAULT_MATRIX_AUTO_UPDATE=!0;yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const R0=new te,u1=new te,fg=new te,c1=new te,b4=new te,S4=new te,CT=new te,dg=new te,Ag=new te,pg=new te,mg=new an,gg=new an,yg=new an;class za{constructor(e=new te,t=new te,n=new te){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),R0.subVectors(e,t),r.cross(R0);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){R0.subVectors(r,t),u1.subVectors(n,t),fg.subVectors(e,t);const a=R0.dot(R0),o=R0.dot(u1),l=R0.dot(fg),u=u1.dot(u1),c=u1.dot(fg),p=a*u-o*o;if(p===0)return s.set(0,0,0),null;const y=1/p,_=(u*l-o*c)*y,b=(a*c-o*l)*y;return s.set(1-_-b,b,_)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,c1)===null?!1:c1.x>=0&&c1.y>=0&&c1.x+c1.y<=1}static getInterpolation(e,t,n,r,s,a,o,l){return this.getBarycoord(e,t,n,r,c1)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,c1.x),l.addScaledVector(a,c1.y),l.addScaledVector(o,c1.z),l)}static getInterpolatedAttribute(e,t,n,r,s,a){return mg.setScalar(0),gg.setScalar(0),yg.setScalar(0),mg.fromBufferAttribute(e,t),gg.fromBufferAttribute(e,n),yg.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(mg,s.x),a.addScaledVector(gg,s.y),a.addScaledVector(yg,s.z),a}static isFrontFacing(e,t,n,r){return R0.subVectors(n,t),u1.subVectors(e,t),R0.cross(u1).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return R0.subVectors(this.c,this.b),u1.subVectors(this.a,this.b),R0.cross(u1).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return za.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return za.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return za.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return za.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return za.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,o;b4.subVectors(r,n),S4.subVectors(s,n),dg.subVectors(e,n);const l=b4.dot(dg),u=S4.dot(dg);if(l<=0&&u<=0)return t.copy(n);Ag.subVectors(e,r);const c=b4.dot(Ag),p=S4.dot(Ag);if(c>=0&&p<=c)return t.copy(r);const y=l*p-c*u;if(y<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(n).addScaledVector(b4,a);pg.subVectors(e,s);const _=b4.dot(pg),b=S4.dot(pg);if(b>=0&&_<=b)return t.copy(s);const w=_*u-l*b;if(w<=0&&u>=0&&b<=0)return o=u/(u-b),t.copy(n).addScaledVector(S4,o);const E=c*b-_*p;if(E<=0&&p-c>=0&&_-b>=0)return CT.subVectors(s,r),o=(p-c)/(p-c+(_-b)),t.copy(r).addScaledVector(CT,o);const M=1/(E+w+y);return a=w*M,o=y*M,t.copy(n).addScaledVector(b4,a).addScaledVector(S4,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const tN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pu={h:0,s:0,l:0},Gf={h:0,s:0,l:0};function vg(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Dt=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Qr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=gn.workingColorSpace){return this.r=e,this.g=t,this.b=n,gn.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=gn.workingColorSpace){if(e=rx(e,1),t=In(t,0,1),n=In(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=vg(a,s,e+1/3),this.g=vg(a,s,e),this.b=vg(a,s,e-1/3)}return gn.colorSpaceToWorking(this,r),this}setStyle(e,t=Qr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Qr){const n=tN[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=E1(e.r),this.g=E1(e.g),this.b=E1(e.b),this}copyLinearToSRGB(e){return this.r=A5(e.r),this.g=A5(e.g),this.b=A5(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qr){return gn.workingToColorSpace(Zs.copy(this),e),Math.round(In(Zs.r*255,0,255))*65536+Math.round(In(Zs.g*255,0,255))*256+Math.round(In(Zs.b*255,0,255))}getHexString(e=Qr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=gn.workingColorSpace){gn.workingToColorSpace(Zs.copy(this),t);const n=Zs.r,r=Zs.g,s=Zs.b,a=Math.max(n,r,s),o=Math.min(n,r,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const p=a-o;switch(u=c<=.5?p/(a+o):p/(2-a-o),a){case n:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-n)/p+2;break;case s:l=(n-r)/p+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=gn.workingColorSpace){return gn.workingToColorSpace(Zs.copy(this),t),e.r=Zs.r,e.g=Zs.g,e.b=Zs.b,e}getStyle(e=Qr){gn.workingToColorSpace(Zs.copy(this),e);const t=Zs.r,n=Zs.g,r=Zs.b;return e!==Qr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(pu),this.setHSL(pu.h+e,pu.s+t,pu.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(pu),e.getHSL(Gf);const n=t6(pu.h,Gf.h,t),r=t6(pu.s,Gf.s,t),s=t6(pu.l,Gf.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Zs=new Dt;Dt.NAMES=tN;let rz=0;class Ss extends No{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rz++}),this.uuid=Mo(),this.name="",this.type="Material",this.blending=aa,this.side=Wa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=x5,this.blendDst=b5,this.blendEquation=Us,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Dt(0,0,0),this.blendAlpha=0,this.depthFunc=P1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kd,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Su,this.stencilZFail=Su,this.stencilZPass=Su,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==aa&&(n.blending=this.blending),this.side!==Wa&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==x5&&(n.blendSrc=this.blendSrc),this.blendDst!==b5&&(n.blendDst=this.blendDst),this.blendEquation!==Us&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==P1&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==kd&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Su&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Su&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Su&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Os extends Ss{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=J5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const v1=sz();function sz(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;(u&8388608)===0;)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function Ua(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=In(i,-65504,65504),v1.floatView[0]=i;const e=v1.uint32View[0],t=e>>23&511;return v1.baseTable[t]+((e&8388607)>>v1.shiftTable[t])}function qh(i){const e=i>>10;return v1.uint32View[0]=v1.mantissaTable[v1.offsetTable[e]+(i&1023)]+v1.exponentTable[e],v1.floatView[0]}class az{static toHalfFloat(e){return Ua(e)}static fromHalfFloat(e){return qh(e)}}const Xr=new te,qf=new He;let oz=0;class li{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:oz++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=L5,this.updateRanges=[],this.gpuType=or,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)qf.fromBufferAttribute(this,t),qf.applyMatrix3(e),this.setXY(t,qf.x,qf.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix3(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix4(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.applyNormalMatrix(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Xr.fromBufferAttribute(this,t),Xr.transformDirection(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=wa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Zn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=wa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=wa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=wa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=wa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),r=Zn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),r=Zn(r,this.array),s=Zn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==L5&&(e.usage=this.usage),e}}class lz extends li{constructor(e,t,n){super(new Int8Array(e),t,n)}}class uz extends li{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class cz extends li{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class hz extends li{constructor(e,t,n){super(new Int16Array(e),t,n)}}class pp extends li{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class fz extends li{constructor(e,t,n){super(new Int32Array(e),t,n)}}class mp extends li{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ox extends li{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=qh(this.array[e*this.itemSize]);return this.normalized&&(t=wa(t,this.array)),t}setX(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize]=Ua(t),this}getY(e){let t=qh(this.array[e*this.itemSize+1]);return this.normalized&&(t=wa(t,this.array)),t}setY(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+1]=Ua(t),this}getZ(e){let t=qh(this.array[e*this.itemSize+2]);return this.normalized&&(t=wa(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+2]=Ua(t),this}getW(e){let t=qh(this.array[e*this.itemSize+3]);return this.normalized&&(t=wa(t,this.array)),t}setW(e,t){return this.normalized&&(t=Zn(t,this.array)),this.array[e*this.itemSize+3]=Ua(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array)),this.array[e+0]=Ua(t),this.array[e+1]=Ua(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),r=Zn(r,this.array)),this.array[e+0]=Ua(t),this.array[e+1]=Ua(n),this.array[e+2]=Ua(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),r=Zn(r,this.array),s=Zn(s,this.array)),this.array[e+0]=Ua(t),this.array[e+1]=Ua(n),this.array[e+2]=Ua(r),this.array[e+3]=Ua(s),this}}class Yt extends li{constructor(e,t,n){super(new Float32Array(e),t,n)}}let dz=0;const ko=new $t,_g=new yi,T4=new te,mo=new ss,ch=new ss,ys=new te;class Tn extends No{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dz++}),this.uuid=Mo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(sx(e)?mp:pp)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Vn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ko.makeRotationFromQuaternion(e),this.applyMatrix4(ko),this}rotateX(e){return ko.makeRotationX(e),this.applyMatrix4(ko),this}rotateY(e){return ko.makeRotationY(e),this.applyMatrix4(ko),this}rotateZ(e){return ko.makeRotationZ(e),this.applyMatrix4(ko),this}translate(e,t,n){return ko.makeTranslation(e,t,n),this.applyMatrix4(ko),this}scale(e,t,n){return ko.makeScale(e,t,n),this.applyMatrix4(ko),this}lookAt(e){return _g.lookAt(e),_g.updateMatrix(),this.applyMatrix4(_g.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(T4).negate(),this.translate(T4.x,T4.y,T4.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];n.push(a.x,a.y,a.z||0)}this.setAttribute("position",new Yt(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ss);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];mo.setFromBufferAttribute(s),this.morphTargetsRelative?(ys.addVectors(this.boundingBox.min,mo.min),this.boundingBox.expandByPoint(ys),ys.addVectors(this.boundingBox.max,mo.max),this.boundingBox.expandByPoint(ys)):(this.boundingBox.expandByPoint(mo.min),this.boundingBox.expandByPoint(mo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new te,1/0);return}if(e){const n=this.boundingSphere.center;if(mo.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];ch.setFromBufferAttribute(o),this.morphTargetsRelative?(ys.addVectors(mo.min,ch.min),mo.expandByPoint(ys),ys.addVectors(mo.max,ch.max),mo.expandByPoint(ys)):(mo.expandByPoint(ch.min),mo.expandByPoint(ch.max))}mo.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)ys.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ys));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)ys.fromBufferAttribute(o,u),l&&(T4.fromBufferAttribute(e,u),ys.add(T4)),r=Math.max(r,n.distanceToSquared(ys))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new li(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let q=0;q<n.count;q++)o[q]=new te,l[q]=new te;const u=new te,c=new te,p=new te,y=new He,_=new He,b=new He,w=new te,E=new te;function M(q,F,G){u.fromBufferAttribute(n,q),c.fromBufferAttribute(n,F),p.fromBufferAttribute(n,G),y.fromBufferAttribute(s,q),_.fromBufferAttribute(s,F),b.fromBufferAttribute(s,G),c.sub(u),p.sub(u),_.sub(y),b.sub(y);const j=1/(_.x*b.y-b.x*_.y);isFinite(j)&&(w.copy(c).multiplyScalar(b.y).addScaledVector(p,-_.y).multiplyScalar(j),E.copy(p).multiplyScalar(_.x).addScaledVector(c,-b.x).multiplyScalar(j),o[q].add(w),o[F].add(w),o[G].add(w),l[q].add(E),l[F].add(E),l[G].add(E))}let P=this.groups;P.length===0&&(P=[{start:0,count:e.count}]);for(let q=0,F=P.length;q<F;++q){const G=P[q],j=G.start,$=G.count;for(let K=j,ie=j+$;K<ie;K+=3)M(e.getX(K+0),e.getX(K+1),e.getX(K+2))}const D=new te,B=new te,U=new te,O=new te;function z(q){U.fromBufferAttribute(r,q),O.copy(U);const F=o[q];D.copy(F),D.sub(U.multiplyScalar(U.dot(F))).normalize(),B.crossVectors(O,F);const j=B.dot(l[q])<0?-1:1;a.setXYZW(q,D.x,D.y,D.z,j)}for(let q=0,F=P.length;q<F;++q){const G=P[q],j=G.start,$=G.count;for(let K=j,ie=j+$;K<ie;K+=3)z(e.getX(K+0)),z(e.getX(K+1)),z(e.getX(K+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new li(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let y=0,_=n.count;y<_;y++)n.setXYZ(y,0,0,0);const r=new te,s=new te,a=new te,o=new te,l=new te,u=new te,c=new te,p=new te;if(e)for(let y=0,_=e.count;y<_;y+=3){const b=e.getX(y+0),w=e.getX(y+1),E=e.getX(y+2);r.fromBufferAttribute(t,b),s.fromBufferAttribute(t,w),a.fromBufferAttribute(t,E),c.subVectors(a,s),p.subVectors(r,s),c.cross(p),o.fromBufferAttribute(n,b),l.fromBufferAttribute(n,w),u.fromBufferAttribute(n,E),o.add(c),l.add(c),u.add(c),n.setXYZ(b,o.x,o.y,o.z),n.setXYZ(w,l.x,l.y,l.z),n.setXYZ(E,u.x,u.y,u.z)}else for(let y=0,_=t.count;y<_;y+=3)r.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),a.fromBufferAttribute(t,y+2),c.subVectors(a,s),p.subVectors(r,s),c.cross(p),n.setXYZ(y+0,c.x,c.y,c.z),n.setXYZ(y+1,c.x,c.y,c.z),n.setXYZ(y+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ys.fromBufferAttribute(e,t),ys.normalize(),e.setXYZ(t,ys.x,ys.y,ys.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,p=o.normalized,y=new u.constructor(l.length*c);let _=0,b=0;for(let w=0,E=l.length;w<E;w++){o.isInterleavedBufferAttribute?_=l[w]*o.data.stride+o.offset:_=l[w]*c;for(let M=0;M<c;M++)y[b++]=u[_++]}return new li(y,c,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tn,n=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,n);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,p=u.length;c<p;c++){const y=u[c],_=e(y,n);l.push(_)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let p=0,y=u.length;p<y;p++){const _=u[p];c.push(_.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere=o.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],p=s[u];for(let y=0,_=p.length;y<_;y++)c.push(p[y].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const p=a[u];this.addGroup(p.start,p.count,p.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const NT=new $t,N2=new u3,kf=new Kr,PT=new te,Hf=new te,Wf=new te,jf=new te,xg=new te,Xf=new te,DT=new te,Yf=new te;class Jn extends yi{constructor(e=new Tn,t=new Os){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){Xf.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=o[l],p=s[l];c!==0&&(xg.fromBufferAttribute(p,e),a?Xf.addScaledVector(xg,c):Xf.addScaledVector(xg.sub(t),c))}t.add(Xf)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),kf.copy(n.boundingSphere),kf.applyMatrix4(s),N2.copy(e.ray).recast(e.near),!(kf.containsPoint(N2.origin)===!1&&(N2.intersectSphere(kf,PT)===null||N2.origin.distanceToSquared(PT)>(e.far-e.near)**2))&&(NT.copy(s).invert(),N2.copy(e.ray).applyMatrix4(NT),!(n.boundingBox!==null&&N2.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,N2)))}_computeIntersections(e,t,n){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,p=s.attributes.normal,y=s.groups,_=s.drawRange;if(o!==null)if(Array.isArray(a))for(let b=0,w=y.length;b<w;b++){const E=y[b],M=a[E.materialIndex],P=Math.max(E.start,_.start),D=Math.min(o.count,Math.min(E.start+E.count,_.start+_.count));for(let B=P,U=D;B<U;B+=3){const O=o.getX(B),z=o.getX(B+1),q=o.getX(B+2);r=Qf(this,M,e,n,u,c,p,O,z,q),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const b=Math.max(0,_.start),w=Math.min(o.count,_.start+_.count);for(let E=b,M=w;E<M;E+=3){const P=o.getX(E),D=o.getX(E+1),B=o.getX(E+2);r=Qf(this,a,e,n,u,c,p,P,D,B),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let b=0,w=y.length;b<w;b++){const E=y[b],M=a[E.materialIndex],P=Math.max(E.start,_.start),D=Math.min(l.count,Math.min(E.start+E.count,_.start+_.count));for(let B=P,U=D;B<U;B+=3){const O=B,z=B+1,q=B+2;r=Qf(this,M,e,n,u,c,p,O,z,q),r&&(r.faceIndex=Math.floor(B/3),r.face.materialIndex=E.materialIndex,t.push(r))}}else{const b=Math.max(0,_.start),w=Math.min(l.count,_.start+_.count);for(let E=b,M=w;E<M;E+=3){const P=E,D=E+1,B=E+2;r=Qf(this,a,e,n,u,c,p,P,D,B),r&&(r.faceIndex=Math.floor(E/3),t.push(r))}}}}function Az(i,e,t,n,r,s,a,o){let l;if(e.side===Fi?l=n.intersectTriangle(a,s,r,!0,o):l=n.intersectTriangle(r,s,a,e.side===Wa,o),l===null)return null;Yf.copy(o),Yf.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(Yf);return u<t.near||u>t.far?null:{distance:u,point:Yf.clone(),object:i}}function Qf(i,e,t,n,r,s,a,o,l,u){i.getVertexPosition(o,Hf),i.getVertexPosition(l,Wf),i.getVertexPosition(u,jf);const c=Az(i,e,t,n,Hf,Wf,jf,DT);if(c){const p=new te;za.getBarycoord(DT,Hf,Wf,jf,p),r&&(c.uv=za.getInterpolatedAttribute(r,o,l,u,p,new He)),s&&(c.uv1=za.getInterpolatedAttribute(s,o,l,u,p,new He)),a&&(c.normal=za.getInterpolatedAttribute(a,o,l,u,p,new te),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const y={a:o,b:l,c:u,normal:new te,materialIndex:0};za.getNormal(Hf,Wf,jf,y.normal),c.face=y,c.barycoord=p}return c}class ql extends Tn{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],p=[];let y=0,_=0;b("z","y","x",-1,-1,n,t,e,a,s,0),b("z","y","x",1,-1,n,t,-e,a,s,1),b("x","z","y",1,1,e,n,t,r,a,2),b("x","z","y",1,-1,e,n,-t,r,a,3),b("x","y","z",1,-1,e,t,n,r,s,4),b("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Yt(u,3)),this.setAttribute("normal",new Yt(c,3)),this.setAttribute("uv",new Yt(p,2));function b(w,E,M,P,D,B,U,O,z,q,F){const G=B/z,j=U/q,$=B/2,K=U/2,ie=O/2,ee=z+1,X=q+1;let re=0,se=0;const Ae=new te;for(let Se=0;Se<X;Se++){const Ce=Se*j-K;for(let Ye=0;Ye<ee;Ye++){const it=Ye*G-$;Ae[w]=it*P,Ae[E]=Ce*D,Ae[M]=ie,u.push(Ae.x,Ae.y,Ae.z),Ae[w]=0,Ae[E]=0,Ae[M]=O>0?1:-1,c.push(Ae.x,Ae.y,Ae.z),p.push(Ye/z),p.push(1-Se/q),re+=1}}for(let Se=0;Se<q;Se++)for(let Ce=0;Ce<z;Ce++){const Ye=y+Ce+ee*Se,it=y+Ce+ee*(Se+1),pt=y+(Ce+1)+ee*(Se+1),yt=y+(Ce+1)+ee*Se;l.push(Ye,it,yt),l.push(it,pt,yt),se+=6}o.addGroup(_,se,F),_+=se,y+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ql(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function U5(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function va(i){const e={};for(let t=0;t<i.length;t++){const n=U5(i[t]);for(const r in n)e[r]=n[r]}return e}function pz(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function nN(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:gn.workingColorSpace}const gp={clone:U5,merge:va};var mz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Na extends Ss{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mz,this.fragmentShader=gz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=U5(e.uniforms),this.uniformsGroups=pz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class c3 extends yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new $t,this.projectionMatrix=new $t,this.projectionMatrixInverse=new $t,this.coordinateSystem=Vs,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const mu=new te,BT=new He,LT=new He;class ar extends c3{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Zc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(yc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Zc*2*Math.atan(Math.tan(yc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){mu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(mu.x,mu.y).multiplyScalar(-e/mu.z),mu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(mu.x,mu.y).multiplyScalar(-e/mu.z)}getViewSize(e,t){return this.getViewBounds(e,BT,LT),t.subVectors(LT,BT)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(yc*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*n/u,r*=a.width/l,n*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const M4=-90,E4=1;class lx extends yi{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ar(M4,E4,e,t);r.layers=this.layers,this.add(r);const s=new ar(M4,E4,e,t);s.layers=this.layers,this.add(s);const a=new ar(M4,E4,e,t);a.layers=this.layers,this.add(a);const o=new ar(M4,E4,e,t);o.layers=this.layers,this.add(o);const l=new ar(M4,E4,e,t);l.layers=this.layers,this.add(l);const u=new ar(M4,E4,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,a,o,l]=t;for(const u of t)this.remove(u);if(e===Vs)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Jo)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,u,c]=this.children,p=e.getRenderTarget(),y=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=w,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(p,y,_),e.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class Wu extends mr{constructor(e=[],t=Eo,n,r,s,a,o,l,u,c){super(e,t,n,r,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ux extends Il{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Wu(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ql(5,5,5),s=new Na({name:"CubemapFromEquirect",uniforms:U5(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Fi,blending:ja});s.uniforms.tEquirect.value=t;const a=new Jn(r,s),o=t.minFilter;return t.minFilter===Fs&&(t.minFilter=Qi),new lx(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}let sa=class extends yi{constructor(){super(),this.isGroup=!0,this.type="Group"}};const yz={type:"move"};class n6{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const w of e.hand.values()){const E=t.getJointPose(w,n),M=this._getHandJoint(u,w);E!==null&&(M.matrix.fromArray(E.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=E.radius),M.visible=E!==null}const c=u.joints["index-finger-tip"],p=u.joints["thumb-tip"],y=c.position.distanceTo(p.position),_=.02,b=.005;u.inputState.pinching&&y>_+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&y<=_-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(yz)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new sa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class yp{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Dt(e),this.density=t}clone(){return new yp(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class s7{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Dt(e),this.near=t,this.far=n}clone(){return new s7(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class h3 extends yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new bs,this.environmentIntensity=1,this.environmentRotation=new bs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class t8{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=L5,this.updateRanges=[],this.version=0,this.uuid=Mo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Mo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ga=new te;class Ca{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ga.fromBufferAttribute(this,t),ga.applyMatrix4(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ga.fromBufferAttribute(this,t),ga.applyNormalMatrix(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ga.fromBufferAttribute(this,t),ga.transformDirection(e),this.setXYZ(t,ga.x,ga.y,ga.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=wa(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Zn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Zn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=wa(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=wa(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=wa(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=wa(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),r=Zn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Zn(t,this.array),n=Zn(n,this.array),r=Zn(r,this.array),s=Zn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new li(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ca(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class vp extends Ss{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let w4;const hh=new te,R4=new te,C4=new te,N4=new He,fh=new He,iN=new $t,$f=new te,dh=new te,Kf=new te,IT=new He,bg=new He,UT=new He;class rN extends yi{constructor(e=new vp){if(super(),this.isSprite=!0,this.type="Sprite",w4===void 0){w4=new Tn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new t8(t,5);w4.setIndex([0,1,2,0,2,3]),w4.setAttribute("position",new Ca(n,3,0,!1)),w4.setAttribute("uv",new Ca(n,2,3,!1))}this.geometry=w4,this.material=e,this.center=new He(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),R4.setFromMatrixScale(this.matrixWorld),iN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),C4.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&R4.multiplyScalar(-C4.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const a=this.center;Zf($f.set(-.5,-.5,0),C4,a,R4,r,s),Zf(dh.set(.5,-.5,0),C4,a,R4,r,s),Zf(Kf.set(.5,.5,0),C4,a,R4,r,s),IT.set(0,0),bg.set(1,0),UT.set(1,1);let o=e.ray.intersectTriangle($f,dh,Kf,!1,hh);if(o===null&&(Zf(dh.set(-.5,.5,0),C4,a,R4,r,s),bg.set(0,1),o=e.ray.intersectTriangle($f,Kf,dh,!1,hh),o===null))return;const l=e.ray.origin.distanceTo(hh);l<e.near||l>e.far||t.push({distance:l,point:hh.clone(),uv:za.getInterpolation(hh,$f,dh,Kf,IT,bg,UT,new He),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Zf(i,e,t,n,r,s){N4.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(fh.x=s*N4.x-r*N4.y,fh.y=r*N4.x+s*N4.y):fh.copy(N4),i.copy(e),i.x+=fh.x,i.y+=fh.y,i.applyMatrix4(iN)}const Jf=new te,OT=new te;class sN extends yi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Jf.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Jf);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Jf.setFromMatrixPosition(e.matrixWorld),OT.setFromMatrixPosition(this.matrixWorld);const n=Jf.distanceTo(OT)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),n>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const FT=new te,VT=new an,zT=new an,vz=new te,GT=new $t,e9=new te,Sg=new Kr,qT=new $t,Tg=new u3;class aN extends Jn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=uv,this.bindMatrix=new $t,this.bindMatrixInverse=new $t,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ss),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,e9),this.boundingBox.expandByPoint(e9)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Kr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,e9),this.boundingSphere.expandByPoint(e9)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Sg.copy(this.boundingSphere),Sg.applyMatrix4(r),e.ray.intersectsSphere(Sg)!==!1&&(qT.copy(r).invert(),Tg.copy(e.ray).applyMatrix4(qT),!(this.boundingBox!==null&&Tg.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Tg)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===uv?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===NC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;VT.fromBufferAttribute(r.attributes.skinIndex,e),zT.fromBufferAttribute(r.attributes.skinWeight,e),FT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=zT.getComponent(s);if(a!==0){const o=VT.getComponent(s);GT.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(vz.copy(FT).applyMatrix4(GT),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class cx extends yi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class G0 extends mr{constructor(e=null,t=1,n=1,r,s,a,o,l,u=Xi,c=Xi,p,y){super(null,a,o,l,u,c,r,s,p,y),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kT=new $t,_z=new $t;class _p{constructor(e=[],t=[]){this.uuid=Mo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new $t)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new $t;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:_z;kT.multiplyMatrices(o,t[s]),kT.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new _p(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new G0(t,e,e,nr,or);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new cx),this.bones.push(a),this.boneInverses.push(new $t().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class $a extends li{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const P4=new $t,HT=new $t,t9=[],WT=new ss,xz=new $t,Ah=new Jn,ph=new Kr;class oN extends Jn{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new $a(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,xz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ss),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,P4),WT.copy(e.boundingBox).applyMatrix4(P4),this.boundingBox.union(WT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Kr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,P4),ph.copy(e.boundingSphere).applyMatrix4(P4),this.boundingSphere.union(ph)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,a=e*s+1;for(let o=0;o<n.length;o++)n[o]=r[a+o]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Ah.geometry=this.geometry,Ah.material=this.material,Ah.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ph.copy(this.boundingSphere),ph.applyMatrix4(n),e.ray.intersectsSphere(ph)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,P4),HT.multiplyMatrices(n,P4),Ah.matrixWorld=HT,Ah.raycast(e,t9);for(let a=0,o=t9.length;a<o;a++){const l=t9[a];l.instanceId=s,l.object=this,t.push(l)}t9.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new $a(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new G0(new Float32Array(r*this.count),r,this.count,a3,or));const s=this.morphTexture.source.data.data;let a=0;for(let u=0;u<n.length;u++)a+=n[u];const o=this.geometry.morphTargetsRelative?1:1-a,l=r*e;s[l]=o,s.set(n,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Mg=new te,bz=new te,Sz=new Vn;class I0{constructor(e=new te(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Mg.subVectors(n,t).cross(bz.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Mg),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Sz.getNormalMatrix(e),r=this.coplanarPoint(Mg).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const P2=new Kr,Tz=new He(.5,.5),n9=new te;class ju{constructor(e=new I0,t=new I0,n=new I0,r=new I0,s=new I0,a=new I0){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Vs,n=!1){const r=this.planes,s=e.elements,a=s[0],o=s[1],l=s[2],u=s[3],c=s[4],p=s[5],y=s[6],_=s[7],b=s[8],w=s[9],E=s[10],M=s[11],P=s[12],D=s[13],B=s[14],U=s[15];if(r[0].setComponents(u-a,_-c,M-b,U-P).normalize(),r[1].setComponents(u+a,_+c,M+b,U+P).normalize(),r[2].setComponents(u+o,_+p,M+w,U+D).normalize(),r[3].setComponents(u-o,_-p,M-w,U-D).normalize(),n)r[4].setComponents(l,y,E,B).normalize(),r[5].setComponents(u-l,_-y,M-E,U-B).normalize();else if(r[4].setComponents(u-l,_-y,M-E,U-B).normalize(),t===Vs)r[5].setComponents(u+l,_+y,M+E,U+B).normalize();else if(t===Jo)r[5].setComponents(l,y,E,B).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),P2.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),P2.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(P2)}intersectsSprite(e){P2.center.set(0,0,0);const t=Tz.distanceTo(e.center);return P2.radius=.7071067811865476+t,P2.applyMatrix4(e.matrixWorld),this.intersectsSphere(P2)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(n9.x=r.normal.x>0?e.max.x:e.min.x,n9.y=r.normal.y>0?e.max.y:e.min.y,n9.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(n9)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ll=new $t,ul=new ju;class a7{constructor(){this.coordinateSystem=Vs}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ll.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ul.setFromProjectionMatrix(ll,r.coordinateSystem,r.reversedDepth),ul.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ll.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ul.setFromProjectionMatrix(ll,r.coordinateSystem,r.reversedDepth),ul.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ll.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ul.setFromProjectionMatrix(ll,r.coordinateSystem,r.reversedDepth),ul.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ll.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ul.setFromProjectionMatrix(ll,r.coordinateSystem,r.reversedDepth),ul.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(ll.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),ul.setFromProjectionMatrix(ll,r.coordinateSystem,r.reversedDepth),ul.containsPoint(e))return!0}return!1}clone(){return new a7}}function Eg(i,e){return i-e}function Mz(i,e){return i.z-e.z}function Ez(i,e){return e.z-i.z}class wz{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const o=s[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}const Ia=new $t,Rz=new Dt(1,1,1),jT=new ju,Cz=new a7,i9=new ss,D2=new Kr,mh=new te,XT=new te,Nz=new te,wg=new wz,Js=new Jn,r9=[];function Pz(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let a=0;a<n;a++)e.setComponent(s+t,a,i.getComponent(s,a))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function B2(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class lN extends Jn{constructor(e,t,n=t*2,r){super(new Tn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new G0(t,e,e,nr,or);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new G0(t,e,e,Hu,zi);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new G0(t,e,e,nr,or);n.colorSpace=gn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:o,itemSize:l,normalized:u}=a,c=new o.constructor(n*l),p=new li(c,l,u);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new li(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ss);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Ia),this.getBoundingBoxAt(s,i9).applyMatrix4(Ia),e.union(i9)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Ia),this.getBoundingSphereAt(s,D2).applyMatrix4(Ia),e.union(D2)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Eg),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Ia.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(Rz.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?a.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Eg),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=o.vertexStart,u=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const p=t.getAttribute(c),y=n.getAttribute(c);Pz(p,y,l);const _=p.itemSize;for(let b=p.count,w=u;b<w;b++){const E=l+b;for(let M=0;M<_;M++)y.setComponent(E,M,0)}y.needsUpdate=!0,y.addUpdateRange(l*_,u*_)}if(r){const c=o.indexStart,p=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let y=0;y<a.count;y++)s.setX(c+y,l+a.getX(y));for(let y=a.count,_=p;y<_;y++)s.setX(c+y,l);s.needsUpdate=!0,s.addUpdateRange(c,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,t.boundingBox!==null&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,t.boundingSphere!==null&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((a,o)=>o).sort((a,o)=>n[a].vertexStart-n[o].vertexStart),s=this.geometry;for(let a=0,o=n.length;a<o;a++){const l=r[a],u=n[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:p,reservedIndexCount:y}=u,_=s.index,b=_.array,w=e-p;for(let E=c;E<c+y;E++)b[E]=b[E]+w;_.array.copyWithin(t,c,c+y),_.addUpdateRange(t,y),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:p}=u,y=s.attributes;for(const _ in y){const b=y[_],{array:w,itemSize:E}=b;w.copyWithin(e*E,c*E,(c+p)*E),b.addUpdateRange(e*E,p*E)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new ss,a=n.index,o=n.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let c=l;a&&(c=a.getX(c)),s.expandByPoint(mh.fromBufferAttribute(o,c))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Kr;this.getBoundingBoxAt(e,i9),i9.getCenter(s.center);const a=n.index,o=n.attributes.position;let l=0;for(let u=r.start,c=r.start+r.count;u<c;u++){let p=u;a&&(p=a.getX(p)),mh.fromBufferAttribute(o,p),l=Math.max(l,s.center.distanceToSquared(mh))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Eg);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);B2(this._multiDrawCounts,r),B2(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,l=this._colorsTexture;a.dispose(),this._initIndirectTexture(),B2(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),B2(o.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),B2(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(o=>o.active);if(Math.max(...n.map(o=>o.vertexStart+o.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Tn,this._initializeGeometry(s));const a=this.geometry;s.index&&B2(s.index.array,a.index.array);for(const o in s.attributes)B2(s.attributes[o].array,a.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Js.material=this.material,Js.geometry.index=a.index,Js.geometry.attributes=a.attributes,Js.geometry.boundingBox===null&&(Js.geometry.boundingBox=new ss),Js.geometry.boundingSphere===null&&(Js.geometry.boundingSphere=new Kr);for(let o=0,l=n.length;o<l;o++){if(!n[o].visible||!n[o].active)continue;const u=n[o].geometryIndex,c=r[u];Js.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(o,Js.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Js.geometry.boundingBox),this.getBoundingSphereAt(u,Js.geometry.boundingSphere),Js.raycast(e,r9);for(let p=0,y=r9.length;p<y;p++){const _=r9[p];_.object=this,_.batchId=o,t.push(_)}r9.length=0}Js.material=null,Js.geometry.index=null,Js.geometry.attributes={},Js.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=a===null?1:a.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,p=this._geometryInfo,y=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,w=n.isArrayCamera?Cz:jT;y&&!n.isArrayCamera&&(Ia.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),jT.setFromProjectionMatrix(Ia,n.coordinateSystem,n.reversedDepth));let E=0;if(this.sortObjects){Ia.copy(this.matrixWorld).invert(),mh.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Ia),XT.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Ia);for(let D=0,B=l.length;D<B;D++)if(l[D].visible&&l[D].active){const U=l[D].geometryIndex;this.getMatrixAt(D,Ia),this.getBoundingSphereAt(U,D2).applyMatrix4(Ia);let O=!1;if(y&&(O=!w.intersectsSphere(D2,n)),!O){const z=p[U],q=Nz.subVectors(D2.center,mh).dot(XT);wg.push(z.start,z.count,q,D)}}const M=wg.list,P=this.customSort;P===null?M.sort(s.transparent?Ez:Mz):P.call(this,M,n);for(let D=0,B=M.length;D<B;D++){const U=M[D];u[E]=U.start*o,c[E]=U.count,b[E]=U.index,E++}wg.reset()}else for(let M=0,P=l.length;M<P;M++)if(l[M].visible&&l[M].active){const D=l[M].geometryIndex;let B=!1;if(y&&(this.getMatrixAt(M,Ia),this.getBoundingSphereAt(D,D2).applyMatrix4(Ia),B=!w.intersectsSphere(D2,n)),!B){const U=p[D];u[E]=U.start*o,c[E]=U.count,b[E]=M,E++}}_.needsUpdate=!0,this._multiDrawCount=E,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class ls extends Ss{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Dt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Hd=new te,Wd=new te,YT=new $t,gh=new u3,s9=new Kr,Rg=new te,QT=new te;class k0 extends yi{constructor(e=new Tn,t=new ls){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Hd.fromBufferAttribute(t,r-1),Wd.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Hd.distanceTo(Wd);e.setAttribute("lineDistance",new Yt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),s9.copy(n.boundingSphere),s9.applyMatrix4(r),s9.radius+=s,e.ray.intersectsSphere(s9)===!1)return;YT.copy(r).invert(),gh.copy(e.ray).applyMatrix4(YT);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=this.isLineSegments?2:1,c=n.index,y=n.attributes.position;if(c!==null){const _=Math.max(0,a.start),b=Math.min(c.count,a.start+a.count);for(let w=_,E=b-1;w<E;w+=u){const M=c.getX(w),P=c.getX(w+1),D=a9(this,e,gh,l,M,P,w);D&&t.push(D)}if(this.isLineLoop){const w=c.getX(b-1),E=c.getX(_),M=a9(this,e,gh,l,w,E,b-1);M&&t.push(M)}}else{const _=Math.max(0,a.start),b=Math.min(y.count,a.start+a.count);for(let w=_,E=b-1;w<E;w+=u){const M=a9(this,e,gh,l,w,w+1,w);M&&t.push(M)}if(this.isLineLoop){const w=a9(this,e,gh,l,b-1,_,b-1);w&&t.push(w)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function a9(i,e,t,n,r,s,a){const o=i.geometry.attributes.position;if(Hd.fromBufferAttribute(o,r),Wd.fromBufferAttribute(o,s),t.distanceSqToSegment(Hd,Wd,Rg,QT)>n)return;Rg.applyMatrix4(i.matrixWorld);const u=e.ray.origin.distanceTo(Rg);if(!(u<e.near||u>e.far))return{distance:u,point:QT.clone().applyMatrix4(i.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:i}}const $T=new te,KT=new te;class s0 extends k0{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)$T.fromBufferAttribute(t,r),KT.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+$T.distanceTo(KT);e.setAttribute("lineDistance",new Yt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class uN extends k0{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class o7 extends Ss{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Dt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ZT=new $t,fv=new u3,o9=new Kr,l9=new te;class hx extends yi{constructor(e=new Tn,t=new o7){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),o9.copy(n.boundingSphere),o9.applyMatrix4(r),o9.radius+=s,e.ray.intersectsSphere(o9)===!1)return;ZT.copy(r).invert(),fv.copy(e.ray).applyMatrix4(ZT);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=n.index,p=n.attributes.position;if(u!==null){const y=Math.max(0,a.start),_=Math.min(u.count,a.start+a.count);for(let b=y,w=_;b<w;b++){const E=u.getX(b);l9.fromBufferAttribute(p,E),JT(l9,E,l,r,e,t,this)}}else{const y=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count);for(let b=y,w=_;b<w;b++)l9.fromBufferAttribute(p,b),JT(l9,b,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function JT(i,e,t,n,r,s,a){const o=fv.distanceSqToPoint(i);if(o<t){const l=new te;fv.closestPointToPoint(i,l),l.applyMatrix4(n);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class cN extends mr{constructor(e,t,n,r,s=Qi,a=Qi,o,l,u){super(e,t,n,r,s,a,o,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const c=this;function p(){c.needsUpdate=!0,c._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(p))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class Dz extends cN{constructor(e,t,n,r,s,a,o,l){super({},e,t,n,r,s,a,o,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class fx extends mr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Xi,this.minFilter=Xi,this.generateMipmaps=!1,this.needsUpdate=!0}}class xp extends mr{constructor(e,t,n,r,s,a,o,l,u,c,p,y){super(null,a,o,l,u,c,r,s,p,y),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Bz extends xp{constructor(e,t,n,r,s,a){super(e,t,n,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ra,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Lz extends xp{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Eo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Iz extends mr{constructor(e,t,n,r,s,a,o,l,u){super(e,t,n,r,s,a,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ka extends mr{constructor(e,t,n=zi,r,s,a,o=Xi,l=Xi,u,c=Ya,p=1){if(c!==Ya&&c!==Qa)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const y={width:e,height:t,depth:p};super(y,r,s,a,o,l,c,n,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Pu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class dx extends mr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class bp extends Tn{constructor(e=1,t=1,n=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const a=[],o=[],l=[],u=[],c=t/2,p=Math.PI/2*e,y=t,_=2*p+y,b=n*2+s,w=r+1,E=new te,M=new te;for(let P=0;P<=b;P++){let D=0,B=0,U=0,O=0;if(P<=n){const F=P/n,G=F*Math.PI/2;B=-c-e*Math.cos(G),U=e*Math.sin(G),O=-e*Math.cos(G),D=F*p}else if(P<=n+s){const F=(P-n)/s;B=-c+F*t,U=e,O=0,D=p+F*y}else{const F=(P-n-s)/n,G=F*Math.PI/2;B=c+e*Math.sin(G),U=e*Math.cos(G),O=e*Math.sin(G),D=p+y+F*p}const z=Math.max(0,Math.min(1,D/_));let q=0;P===0?q=.5/r:P===b&&(q=-.5/r);for(let F=0;F<=r;F++){const G=F/r,j=G*Math.PI*2,$=Math.sin(j),K=Math.cos(j);M.x=-U*K,M.y=B,M.z=U*$,o.push(M.x,M.y,M.z),E.set(-U*K,O,U*$),E.normalize(),l.push(E.x,E.y,E.z),u.push(G+q,z)}if(P>0){const F=(P-1)*w;for(let G=0;G<r;G++){const j=F+G,$=F+G+1,K=P*w+G,ie=P*w+G+1;a.push(j,$,K),a.push($,ie,K)}}}this.setIndex(a),this.setAttribute("position",new Yt(o,3)),this.setAttribute("normal",new Yt(l,3)),this.setAttribute("uv",new Yt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bp(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class n8 extends Tn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],u=new te,c=new He;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let p=0,y=3;p<=t;p++,y+=3){const _=n+p/t*r;u.x=e*Math.cos(_),u.y=e*Math.sin(_),a.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(a[y]/e+1)/2,c.y=(a[y+1]/e+1)/2,l.push(c.x,c.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Yt(a,3)),this.setAttribute("normal",new Yt(o,3)),this.setAttribute("uv",new Yt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n8(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class f3 extends Tn{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],p=[],y=[],_=[];let b=0;const w=[],E=n/2;let M=0;P(),a===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(c),this.setAttribute("position",new Yt(p,3)),this.setAttribute("normal",new Yt(y,3)),this.setAttribute("uv",new Yt(_,2));function P(){const B=new te,U=new te;let O=0;const z=(t-e)/n;for(let q=0;q<=s;q++){const F=[],G=q/s,j=G*(t-e)+e;for(let $=0;$<=r;$++){const K=$/r,ie=K*l+o,ee=Math.sin(ie),X=Math.cos(ie);U.x=j*ee,U.y=-G*n+E,U.z=j*X,p.push(U.x,U.y,U.z),B.set(ee,z,X).normalize(),y.push(B.x,B.y,B.z),_.push(K,1-G),F.push(b++)}w.push(F)}for(let q=0;q<r;q++)for(let F=0;F<s;F++){const G=w[F][q],j=w[F+1][q],$=w[F+1][q+1],K=w[F][q+1];(e>0||F!==0)&&(c.push(G,j,K),O+=3),(t>0||F!==s-1)&&(c.push(j,$,K),O+=3)}u.addGroup(M,O,0),M+=O}function D(B){const U=b,O=new He,z=new te;let q=0;const F=B===!0?e:t,G=B===!0?1:-1;for(let $=1;$<=r;$++)p.push(0,E*G,0),y.push(0,G,0),_.push(.5,.5),b++;const j=b;for(let $=0;$<=r;$++){const ie=$/r*l+o,ee=Math.cos(ie),X=Math.sin(ie);z.x=F*X,z.y=E*G,z.z=F*ee,p.push(z.x,z.y,z.z),y.push(0,G,0),O.x=ee*.5+.5,O.y=X*.5*G+.5,_.push(O.x,O.y),b++}for(let $=0;$<r;$++){const K=U+$,ie=j+$;B===!0?c.push(ie,ie+1,K):c.push(ie+1,ie,K),q+=3}u.addGroup(M,q,B===!0?1:2),M+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f3(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class l7 extends f3{constructor(e=1,t=1,n=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,n,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new l7(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xu extends Tn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],a=[];o(r),u(n),c(),this.setAttribute("position",new Yt(s,3)),this.setAttribute("normal",new Yt(s.slice(),3)),this.setAttribute("uv",new Yt(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(P){const D=new te,B=new te,U=new te;for(let O=0;O<t.length;O+=3)_(t[O+0],D),_(t[O+1],B),_(t[O+2],U),l(D,B,U,P)}function l(P,D,B,U){const O=U+1,z=[];for(let q=0;q<=O;q++){z[q]=[];const F=P.clone().lerp(B,q/O),G=D.clone().lerp(B,q/O),j=O-q;for(let $=0;$<=j;$++)$===0&&q===O?z[q][$]=F:z[q][$]=F.clone().lerp(G,$/j)}for(let q=0;q<O;q++)for(let F=0;F<2*(O-q)-1;F++){const G=Math.floor(F/2);F%2===0?(y(z[q][G+1]),y(z[q+1][G]),y(z[q][G])):(y(z[q][G+1]),y(z[q+1][G+1]),y(z[q+1][G]))}}function u(P){const D=new te;for(let B=0;B<s.length;B+=3)D.x=s[B+0],D.y=s[B+1],D.z=s[B+2],D.normalize().multiplyScalar(P),s[B+0]=D.x,s[B+1]=D.y,s[B+2]=D.z}function c(){const P=new te;for(let D=0;D<s.length;D+=3){P.x=s[D+0],P.y=s[D+1],P.z=s[D+2];const B=E(P)/2/Math.PI+.5,U=M(P)/Math.PI+.5;a.push(B,1-U)}b(),p()}function p(){for(let P=0;P<a.length;P+=6){const D=a[P+0],B=a[P+2],U=a[P+4],O=Math.max(D,B,U),z=Math.min(D,B,U);O>.9&&z<.1&&(D<.2&&(a[P+0]+=1),B<.2&&(a[P+2]+=1),U<.2&&(a[P+4]+=1))}}function y(P){s.push(P.x,P.y,P.z)}function _(P,D){const B=P*3;D.x=e[B+0],D.y=e[B+1],D.z=e[B+2]}function b(){const P=new te,D=new te,B=new te,U=new te,O=new He,z=new He,q=new He;for(let F=0,G=0;F<s.length;F+=9,G+=6){P.set(s[F+0],s[F+1],s[F+2]),D.set(s[F+3],s[F+4],s[F+5]),B.set(s[F+6],s[F+7],s[F+8]),O.set(a[G+0],a[G+1]),z.set(a[G+2],a[G+3]),q.set(a[G+4],a[G+5]),U.copy(P).add(D).add(B).divideScalar(3);const j=E(U);w(O,G+0,P,j),w(z,G+2,D,j),w(q,G+4,B,j)}}function w(P,D,B,U){U<0&&P.x===1&&(a[D]=P.x-1),B.x===0&&B.z===0&&(a[D]=U/2/Math.PI+.5)}function E(P){return Math.atan2(P.z,-P.x)}function M(P){return Math.atan2(-P.y,Math.sqrt(P.x*P.x+P.z*P.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xu(e.vertices,e.indices,e.radius,e.details)}}class Sp extends Xu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sp(e.radius,e.detail)}}const u9=new te,c9=new te,Cg=new te,h9=new za;class hN extends Tn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(yc*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],c=["a","b","c"],p=new Array(3),y={},_=[];for(let b=0;b<l;b+=3){a?(u[0]=a.getX(b),u[1]=a.getX(b+1),u[2]=a.getX(b+2)):(u[0]=b,u[1]=b+1,u[2]=b+2);const{a:w,b:E,c:M}=h9;if(w.fromBufferAttribute(o,u[0]),E.fromBufferAttribute(o,u[1]),M.fromBufferAttribute(o,u[2]),h9.getNormal(Cg),p[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,p[1]=`${Math.round(E.x*r)},${Math.round(E.y*r)},${Math.round(E.z*r)}`,p[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let P=0;P<3;P++){const D=(P+1)%3,B=p[P],U=p[D],O=h9[c[P]],z=h9[c[D]],q=`${B}_${U}`,F=`${U}_${B}`;F in y&&y[F]?(Cg.dot(y[F].normal)<=s&&(_.push(O.x,O.y,O.z),_.push(z.x,z.y,z.z)),y[F]=null):q in y||(y[q]={index0:u[P],index1:u[D],normal:Cg.clone()})}}for(const b in y)if(y[b]){const{index0:w,index1:E}=y[b];u9.fromBufferAttribute(o,w),c9.fromBufferAttribute(o,E),_.push(u9.x,u9.y,u9.z),_.push(c9.x,c9.y,c9.z)}this.setAttribute("position",new Yt(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class a0{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let a;t?a=t:a=e*n[s-1];let o=0,l=s-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=n[r]-a,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,n[r]===a)return r/(s-1);const c=n[r],y=n[r+1]-c,_=(a-c)/y;return(r+_)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new He:new te);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new te,r=[],s=[],a=[],o=new te,l=new $t;for(let _=0;_<=e;_++){const b=_/e;r[_]=this.getTangentAt(b,new te)}s[0]=new te,a[0]=new te;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),p=Math.abs(r[0].y),y=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),p<=u&&(u=p,n.set(0,1,0)),y<=u&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),a[_]=a[_-1].clone(),o.crossVectors(r[_-1],r[_]),o.length()>Number.EPSILON){o.normalize();const b=Math.acos(In(r[_-1].dot(r[_]),-1,1));s[_].applyMatrix4(l.makeRotationAxis(o,b))}a[_].crossVectors(r[_],s[_])}if(t===!0){let _=Math.acos(In(s[0].dot(s[e]),-1,1));_/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(_=-_);for(let b=1;b<=e;b++)s[b].applyMatrix4(l.makeRotationAxis(r[b],_*b)),a[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Tp extends a0{constructor(e=0,t=0,n=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t=new He){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),p=Math.sin(this.aRotation),y=l-this.aX,_=u-this.aY;l=y*c-_*p+this.aX,u=y*p+_*c+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class fN extends Tp{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Ax(){let i=0,e=0,t=0,n=0;function r(s,a,o,l){i=s,e=o,t=-3*s+3*a-2*o-l,n=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){r(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,p){let y=(a-s)/u-(o-s)/(u+c)+(o-a)/c,_=(o-a)/c-(l-a)/(c+p)+(l-o)/p;y*=c,_*=c,r(a,o,y,_)},calc:function(s){const a=s*s,o=a*s;return i+e*s+t*a+n*o}}}const f9=new te,Ng=new Ax,Pg=new Ax,Dg=new Ax;class dN extends a0{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new te){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,c;this.closed||o>0?u=r[(o-1)%s]:(f9.subVectors(r[0],r[1]).add(r[0]),u=f9);const p=r[o%s],y=r[(o+1)%s];if(this.closed||o+2<s?c=r[(o+2)%s]:(f9.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=f9),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(u.distanceToSquared(p),_),w=Math.pow(p.distanceToSquared(y),_),E=Math.pow(y.distanceToSquared(c),_);w<1e-4&&(w=1),b<1e-4&&(b=w),E<1e-4&&(E=w),Ng.initNonuniformCatmullRom(u.x,p.x,y.x,c.x,b,w,E),Pg.initNonuniformCatmullRom(u.y,p.y,y.y,c.y,b,w,E),Dg.initNonuniformCatmullRom(u.z,p.z,y.z,c.z,b,w,E)}else this.curveType==="catmullrom"&&(Ng.initCatmullRom(u.x,p.x,y.x,c.x,this.tension),Pg.initCatmullRom(u.y,p.y,y.y,c.y,this.tension),Dg.initCatmullRom(u.z,p.z,y.z,c.z,this.tension));return n.set(Ng.calc(l),Pg.calc(l),Dg.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new te().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eM(i,e,t,n,r){const s=(n-e)*.5,a=(r-t)*.5,o=i*i,l=i*o;return(2*t-2*n+s+a)*l+(-3*t+3*n-2*s-a)*o+s*i+t}function Uz(i,e){const t=1-i;return t*t*e}function Oz(i,e){return 2*(1-i)*i*e}function Fz(i,e){return i*i*e}function i6(i,e,t,n){return Uz(i,e)+Oz(i,t)+Fz(i,n)}function Vz(i,e){const t=1-i;return t*t*t*e}function zz(i,e){const t=1-i;return 3*t*t*i*e}function Gz(i,e){return 3*(1-i)*i*i*e}function qz(i,e){return i*i*i*e}function r6(i,e,t,n,r){return Vz(i,e)+zz(i,t)+Gz(i,n)+qz(i,r)}class px extends a0{constructor(e=new He,t=new He,n=new He,r=new He){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new He){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(r6(e,r.x,s.x,a.x,o.x),r6(e,r.y,s.y,a.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mx extends a0{constructor(e=new te,t=new te,n=new te,r=new te){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new te){const n=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return n.set(r6(e,r.x,s.x,a.x,o.x),r6(e,r.y,s.y,a.y,o.y),r6(e,r.z,s.z,a.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class gx extends a0{constructor(e=new He,t=new He){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new He){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new He){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AN extends a0{constructor(e=new te,t=new te){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new te){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new te){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class yx extends a0{constructor(e=new He,t=new He,n=new He){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new He){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(i6(e,r.x,s.x,a.x),i6(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vx extends a0{constructor(e=new te,t=new te,n=new te){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new te){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(i6(e,r.x,s.x,a.x),i6(e,r.y,s.y,a.y),i6(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _x extends a0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new He){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],p=r[a>r.length-3?r.length-1:a+2];return n.set(eM(o,l.x,u.x,c.x,p.x),eM(o,l.y,u.y,c.y,p.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new He().fromArray(r))}return this}}var jd=Object.freeze({__proto__:null,ArcCurve:fN,CatmullRomCurve3:dN,CubicBezierCurve:px,CubicBezierCurve3:mx,EllipseCurve:Tp,LineCurve:gx,LineCurve3:AN,QuadraticBezierCurve:yx,QuadraticBezierCurve3:vx,SplineCurve:_x});class pN extends a0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jd[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,o=this.curves[s],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new jd[r.type]().fromJSON(r))}return this}}let Xd=class extends pN{constructor(e){super(),this.type="Path",this.currentPoint=new He,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new gx(this.currentPoint.clone(),new He(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new yx(this.currentPoint.clone(),new He(e,t),new He(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const o=new px(this.currentPoint.clone(),new He(e,t),new He(n,r),new He(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new _x(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,s,a,o,l),this}absellipse(e,t,n,r,s,a,o,l){const u=new Tp(e,t,n,r,s,a,o,l);if(this.curves.length>0){const p=u.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class vc extends Xd{constructor(e){super(e),this.uuid=Mo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new Xd().fromJSON(r))}return this}}function kz(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=mN(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u;if(n&&(s=Yz(i,e,s,t)),i.length>80*t){o=1/0,l=1/0;let c=-1/0,p=-1/0;for(let y=t;y<r;y+=t){const _=i[y],b=i[y+1];_<o&&(o=_),b<l&&(l=b),_>c&&(c=_),b>p&&(p=b)}u=Math.max(c-o,p-l),u=u!==0?32767/u:0}return v6(s,a,t,o,l,u,0),a}function mN(i,e,t,n,r){let s;if(r===sG(i,e,t,n)>0)for(let a=e;a<t;a+=n)s=tM(a/n|0,i[a],i[a+1],s);else for(let a=t-n;a>=e;a-=n)s=tM(a/n|0,i[a],i[a+1],s);return s&&O5(s,s.next)&&(x6(s),s=s.next),s}function Jc(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(O5(t,t.next)||Sr(t.prev,t,t.next)===0)){if(x6(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function v6(i,e,t,n,r,s,a){if(!i)return;!a&&s&&Jz(i,n,r,s);let o=i;for(;i.prev!==i.next;){const l=i.prev,u=i.next;if(s?Wz(i,n,r,s):Hz(i)){e.push(l.i,i.i,u.i),x6(i),i=u.next,o=u.next;continue}if(i=u,i===o){a?a===1?(i=jz(Jc(i),e),v6(i,e,t,n,r,s,2)):a===2&&Xz(i,e,t,n,r,s):v6(Jc(i),e,t,n,r,s,1);break}}}function Hz(i){const e=i.prev,t=i,n=i.next;if(Sr(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,l=t.y,u=n.y,c=Math.min(r,s,a),p=Math.min(o,l,u),y=Math.max(r,s,a),_=Math.max(o,l,u);let b=n.next;for(;b!==e;){if(b.x>=c&&b.x<=y&&b.y>=p&&b.y<=_&&kh(r,o,s,l,a,u,b.x,b.y)&&Sr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function Wz(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Sr(r,s,a)>=0)return!1;const o=r.x,l=s.x,u=a.x,c=r.y,p=s.y,y=a.y,_=Math.min(o,l,u),b=Math.min(c,p,y),w=Math.max(o,l,u),E=Math.max(c,p,y),M=dv(_,b,e,t,n),P=dv(w,E,e,t,n);let D=i.prevZ,B=i.nextZ;for(;D&&D.z>=M&&B&&B.z<=P;){if(D.x>=_&&D.x<=w&&D.y>=b&&D.y<=E&&D!==r&&D!==a&&kh(o,c,l,p,u,y,D.x,D.y)&&Sr(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=_&&B.x<=w&&B.y>=b&&B.y<=E&&B!==r&&B!==a&&kh(o,c,l,p,u,y,B.x,B.y)&&Sr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=M;){if(D.x>=_&&D.x<=w&&D.y>=b&&D.y<=E&&D!==r&&D!==a&&kh(o,c,l,p,u,y,D.x,D.y)&&Sr(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=P;){if(B.x>=_&&B.x<=w&&B.y>=b&&B.y<=E&&B!==r&&B!==a&&kh(o,c,l,p,u,y,B.x,B.y)&&Sr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function jz(i,e){let t=i;do{const n=t.prev,r=t.next.next;!O5(n,r)&&yN(n,t,t.next,r)&&_6(n,r)&&_6(r,n)&&(e.push(n.i,t.i,r.i),x6(t),x6(t.next),t=i=r),t=t.next}while(t!==i);return Jc(t)}function Xz(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&nG(a,o)){let l=vN(a,o);a=Jc(a,a.next),l=Jc(l,l.next),v6(a,e,t,n,r,s,0),v6(l,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function Yz(i,e,t,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,l=s<a-1?e[s+1]*n:i.length,u=mN(i,o,l,n,!1);u===u.next&&(u.steiner=!0),r.push(tG(u))}r.sort(Qz);for(let s=0;s<r.length;s++)t=$z(r[s],t);return t}function Qz(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function $z(i,e){const t=Kz(i,e);if(!t)return e;const n=vN(t,i);return Jc(n,n.next),Jc(t,t.next)}function Kz(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,a;if(O5(i,t))return t;do{if(O5(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=n&&p>s&&(s=p,a=t.x<t.next.x?t:t.next,p===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,u=a.y;let c=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&gN(r<u?n:s,r,l,u,r<u?s:n,r,t.x,t.y)){const p=Math.abs(r-t.y)/(n-t.x);_6(t,i)&&(p<c||p===c&&(t.x>a.x||t.x===a.x&&Zz(a,t)))&&(a=t,c=p)}t=t.next}while(t!==o);return a}function Zz(i,e){return Sr(i.prev,i,e.prev)<0&&Sr(e.next,i,i.next)<0}function Jz(i,e,t,n){let r=i;do r.z===0&&(r.z=dv(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,eG(r)}function eG(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let u=0;u<t&&(o++,a=a.nextZ,!!a);u++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=a}s.nextZ=null,t*=2}while(e>1);return i}function dv(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function tG(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function gN(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function kh(i,e,t,n,r,s,a,o){return!(i===a&&e===o)&&gN(i,e,t,n,r,s,a,o)}function nG(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!iG(i,e)&&(_6(i,e)&&_6(e,i)&&rG(i,e)&&(Sr(i.prev,i,e.prev)||Sr(i,e.prev,e))||O5(i,e)&&Sr(i.prev,i,i.next)>0&&Sr(e.prev,e,e.next)>0)}function Sr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function O5(i,e){return i.x===e.x&&i.y===e.y}function yN(i,e,t,n){const r=A9(Sr(i,e,t)),s=A9(Sr(i,e,n)),a=A9(Sr(t,n,i)),o=A9(Sr(t,n,e));return!!(r!==s&&a!==o||r===0&&d9(i,t,e)||s===0&&d9(i,n,e)||a===0&&d9(t,i,n)||o===0&&d9(t,e,n))}function d9(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function A9(i){return i>0?1:i<0?-1:0}function iG(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&yN(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function _6(i,e){return Sr(i.prev,i,i.next)<0?Sr(i,e,i.next)>=0&&Sr(i,i.prev,e)>=0:Sr(i,e,i.prev)<0||Sr(i,i.next,e)<0}function rG(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function vN(i,e){const t=Av(i.i,i.x,i.y),n=Av(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function tM(i,e,t,n){const r=Av(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function x6(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Av(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sG(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}class aG{static triangulate(e,t,n=2){return kz(e,t,n)}}class F0{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return F0.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];nM(e),iM(n,e);let a=e.length;t.forEach(nM);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,iM(n,t[l]);const o=aG.triangulate(n,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function nM(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function iM(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class u7 extends Tn{constructor(e=new vc([new He(.5,.5),new He(-.5,.5),new He(-.5,-.5),new He(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new Yt(r,3)),this.setAttribute("uv",new Yt(s,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:_-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,P=t.UVGenerator!==void 0?t.UVGenerator:oG;let D,B=!1,U,O,z,q;M&&(D=M.getSpacedPoints(c),B=!0,y=!1,U=M.computeFrenetFrames(c,!1),O=new te,z=new te,q=new te),y||(E=0,_=0,b=0,w=0);const F=o.extractPoints(u);let G=F.shape;const j=F.holes;if(!F0.isClockWise(G)){G=G.reverse();for(let Je=0,et=j.length;Je<et;Je++){const tt=j[Je];F0.isClockWise(tt)&&(j[Je]=tt.reverse())}}function K(Je){const tt=10000000000000001e-36;let ke=Je[0];for(let xt=1;xt<=Je.length;xt++){const ft=xt%Je.length,wt=Je[ft],cn=wt.x-ke.x,Sn=wt.y-ke.y,de=cn*cn+Sn*Sn,J=Math.max(Math.abs(wt.x),Math.abs(wt.y),Math.abs(ke.x),Math.abs(ke.y)),Le=tt*J*J;if(de<=Le){Je.splice(ft,1),xt--;continue}ke=wt}}K(G),j.forEach(K);const ie=j.length,ee=G;for(let Je=0;Je<ie;Je++){const et=j[Je];G=G.concat(et)}function X(Je,et,tt){return et||console.error("THREE.ExtrudeGeometry: vec does not exist"),Je.clone().addScaledVector(et,tt)}const re=G.length;function se(Je,et,tt){let ke,xt,ft;const wt=Je.x-et.x,cn=Je.y-et.y,Sn=tt.x-Je.x,de=tt.y-Je.y,J=wt*wt+cn*cn,Le=wt*de-cn*Sn;if(Math.abs(Le)>Number.EPSILON){const We=Math.sqrt(J),ht=Math.sqrt(Sn*Sn+de*de),Qe=et.x-cn/We,nn=et.y+wt/We,Ct=tt.x-de/ht,Zt=tt.y+Sn/ht,en=((Ct-Qe)*de-(Zt-nn)*Sn)/(wt*de-cn*Sn);ke=Qe+wt*en-Je.x,xt=nn+cn*en-Je.y;const At=ke*ke+xt*xt;if(At<=2)return new He(ke,xt);ft=Math.sqrt(At/2)}else{let We=!1;wt>Number.EPSILON?Sn>Number.EPSILON&&(We=!0):wt<-Number.EPSILON?Sn<-Number.EPSILON&&(We=!0):Math.sign(cn)===Math.sign(de)&&(We=!0),We?(ke=-cn,xt=wt,ft=Math.sqrt(J)):(ke=wt,xt=cn,ft=Math.sqrt(J/2))}return new He(ke/ft,xt/ft)}const Ae=[];for(let Je=0,et=ee.length,tt=et-1,ke=Je+1;Je<et;Je++,tt++,ke++)tt===et&&(tt=0),ke===et&&(ke=0),Ae[Je]=se(ee[Je],ee[tt],ee[ke]);const Se=[];let Ce,Ye=Ae.concat();for(let Je=0,et=ie;Je<et;Je++){const tt=j[Je];Ce=[];for(let ke=0,xt=tt.length,ft=xt-1,wt=ke+1;ke<xt;ke++,ft++,wt++)ft===xt&&(ft=0),wt===xt&&(wt=0),Ce[ke]=se(tt[ke],tt[ft],tt[wt]);Se.push(Ce),Ye=Ye.concat(Ce)}let it;if(E===0)it=F0.triangulateShape(ee,j);else{const Je=[],et=[];for(let tt=0;tt<E;tt++){const ke=tt/E,xt=_*Math.cos(ke*Math.PI/2),ft=b*Math.sin(ke*Math.PI/2)+w;for(let wt=0,cn=ee.length;wt<cn;wt++){const Sn=X(ee[wt],Ae[wt],ft);Ft(Sn.x,Sn.y,-xt),ke===0&&Je.push(Sn)}for(let wt=0,cn=ie;wt<cn;wt++){const Sn=j[wt];Ce=Se[wt];const de=[];for(let J=0,Le=Sn.length;J<Le;J++){const We=X(Sn[J],Ce[J],ft);Ft(We.x,We.y,-xt),ke===0&&de.push(We)}ke===0&&et.push(de)}}it=F0.triangulateShape(Je,et)}const pt=it.length,yt=b+w;for(let Je=0;Je<re;Je++){const et=y?X(G[Je],Ye[Je],yt):G[Je];B?(z.copy(U.normals[0]).multiplyScalar(et.x),O.copy(U.binormals[0]).multiplyScalar(et.y),q.copy(D[0]).add(z).add(O),Ft(q.x,q.y,q.z)):Ft(et.x,et.y,0)}for(let Je=1;Je<=c;Je++)for(let et=0;et<re;et++){const tt=y?X(G[et],Ye[et],yt):G[et];B?(z.copy(U.normals[Je]).multiplyScalar(tt.x),O.copy(U.binormals[Je]).multiplyScalar(tt.y),q.copy(D[Je]).add(z).add(O),Ft(q.x,q.y,q.z)):Ft(tt.x,tt.y,p/c*Je)}for(let Je=E-1;Je>=0;Je--){const et=Je/E,tt=_*Math.cos(et*Math.PI/2),ke=b*Math.sin(et*Math.PI/2)+w;for(let xt=0,ft=ee.length;xt<ft;xt++){const wt=X(ee[xt],Ae[xt],ke);Ft(wt.x,wt.y,p+tt)}for(let xt=0,ft=j.length;xt<ft;xt++){const wt=j[xt];Ce=Se[xt];for(let cn=0,Sn=wt.length;cn<Sn;cn++){const de=X(wt[cn],Ce[cn],ke);B?Ft(de.x,de.y+D[c-1].y,D[c-1].x+tt):Ft(de.x,de.y,p+tt)}}}Oe(),Xe();function Oe(){const Je=r.length/3;if(y){let et=0,tt=re*et;for(let ke=0;ke<pt;ke++){const xt=it[ke];Pt(xt[2]+tt,xt[1]+tt,xt[0]+tt)}et=c+E*2,tt=re*et;for(let ke=0;ke<pt;ke++){const xt=it[ke];Pt(xt[0]+tt,xt[1]+tt,xt[2]+tt)}}else{for(let et=0;et<pt;et++){const tt=it[et];Pt(tt[2],tt[1],tt[0])}for(let et=0;et<pt;et++){const tt=it[et];Pt(tt[0]+re*c,tt[1]+re*c,tt[2]+re*c)}}n.addGroup(Je,r.length/3-Je,0)}function Xe(){const Je=r.length/3;let et=0;Tt(ee,et),et+=ee.length;for(let tt=0,ke=j.length;tt<ke;tt++){const xt=j[tt];Tt(xt,et),et+=xt.length}n.addGroup(Je,r.length/3-Je,1)}function Tt(Je,et){let tt=Je.length;for(;--tt>=0;){const ke=tt;let xt=tt-1;xt<0&&(xt=Je.length-1);for(let ft=0,wt=c+E*2;ft<wt;ft++){const cn=re*ft,Sn=re*(ft+1),de=et+ke+cn,J=et+xt+cn,Le=et+xt+Sn,We=et+ke+Sn;ln(de,J,Le,We)}}}function Ft(Je,et,tt){l.push(Je),l.push(et),l.push(tt)}function Pt(Je,et,tt){Dn(Je),Dn(et),Dn(tt);const ke=r.length/3,xt=P.generateTopUV(n,r,ke-3,ke-2,ke-1);pe(xt[0]),pe(xt[1]),pe(xt[2])}function ln(Je,et,tt,ke){Dn(Je),Dn(et),Dn(ke),Dn(et),Dn(tt),Dn(ke);const xt=r.length/3,ft=P.generateSideWallUV(n,r,xt-6,xt-3,xt-2,xt-1);pe(ft[0]),pe(ft[1]),pe(ft[3]),pe(ft[1]),pe(ft[2]),pe(ft[3])}function Dn(Je){r.push(l[Je*3+0]),r.push(l[Je*3+1]),r.push(l[Je*3+2])}function pe(Je){s.push(Je.x),s.push(Je.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return lG(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];n.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new jd[r.type]().fromJSON(r)),new u7(n,e.options)}}const oG={generateTopUV:function(i,e,t,n,r){const s=e[t*3],a=e[t*3+1],o=e[n*3],l=e[n*3+1],u=e[r*3],c=e[r*3+1];return[new He(s,a),new He(o,l),new He(u,c)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[n*3],c=e[n*3+1],p=e[n*3+2],y=e[r*3],_=e[r*3+1],b=e[r*3+2],w=e[s*3],E=e[s*3+1],M=e[s*3+2];return Math.abs(o-c)<Math.abs(a-u)?[new He(a,1-l),new He(u,1-p),new He(y,1-b),new He(w,1-M)]:[new He(o,1-l),new He(c,1-p),new He(_,1-b),new He(E,1-M)]}};function lG(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Mp extends Xu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Mp(e.radius,e.detail)}}class Ep extends Tn{constructor(e=[new He(0,-.5),new He(.5,0),new He(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=In(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],u=[],c=1/t,p=new te,y=new He,_=new te,b=new te,w=new te;let E=0,M=0;for(let P=0;P<=e.length-1;P++)switch(P){case 0:E=e[P+1].x-e[P].x,M=e[P+1].y-e[P].y,_.x=M*1,_.y=-E,_.z=M*0,w.copy(_),_.normalize(),l.push(_.x,_.y,_.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:E=e[P+1].x-e[P].x,M=e[P+1].y-e[P].y,_.x=M*1,_.y=-E,_.z=M*0,b.copy(_),_.x+=w.x,_.y+=w.y,_.z+=w.z,_.normalize(),l.push(_.x,_.y,_.z),w.copy(b)}for(let P=0;P<=t;P++){const D=n+P*c*r,B=Math.sin(D),U=Math.cos(D);for(let O=0;O<=e.length-1;O++){p.x=e[O].x*B,p.y=e[O].y,p.z=e[O].x*U,a.push(p.x,p.y,p.z),y.x=P/t,y.y=O/(e.length-1),o.push(y.x,y.y);const z=l[3*O+0]*B,q=l[3*O+1],F=l[3*O+0]*U;u.push(z,q,F)}}for(let P=0;P<t;P++)for(let D=0;D<e.length-1;D++){const B=D+P*e.length,U=B,O=B+e.length,z=B+e.length+1,q=B+1;s.push(U,O,q),s.push(z,q,O)}this.setIndex(s),this.setAttribute("position",new Yt(a,3)),this.setAttribute("uv",new Yt(o,2)),this.setAttribute("normal",new Yt(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ep(e.points,e.segments,e.phiStart,e.phiLength)}}class c7 extends Xu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new c7(e.radius,e.detail)}}class d3 extends Tn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(n),l=Math.floor(r),u=o+1,c=l+1,p=e/o,y=t/l,_=[],b=[],w=[],E=[];for(let M=0;M<c;M++){const P=M*y-a;for(let D=0;D<u;D++){const B=D*p-s;b.push(B,-P,0),w.push(0,0,1),E.push(D/o),E.push(1-M/l)}}for(let M=0;M<l;M++)for(let P=0;P<o;P++){const D=P+u*M,B=P+u*(M+1),U=P+1+u*(M+1),O=P+1+u*M;_.push(D,B,O),_.push(B,U,O)}this.setIndex(_),this.setAttribute("position",new Yt(b,3)),this.setAttribute("normal",new Yt(w,3)),this.setAttribute("uv",new Yt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new d3(e.width,e.height,e.widthSegments,e.heightSegments)}}class wp extends Tn{constructor(e=.5,t=1,n=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const o=[],l=[],u=[],c=[];let p=e;const y=(t-e)/r,_=new te,b=new He;for(let w=0;w<=r;w++){for(let E=0;E<=n;E++){const M=s+E/n*a;_.x=p*Math.cos(M),_.y=p*Math.sin(M),l.push(_.x,_.y,_.z),u.push(0,0,1),b.x=(_.x/t+1)/2,b.y=(_.y/t+1)/2,c.push(b.x,b.y)}p+=y}for(let w=0;w<r;w++){const E=w*(n+1);for(let M=0;M<n;M++){const P=M+E,D=P,B=P+n+1,U=P+n+2,O=P+1;o.push(D,B,O),o.push(B,U,O)}}this.setIndex(o),this.setAttribute("position",new Yt(l,3)),this.setAttribute("normal",new Yt(u,3)),this.setAttribute("uv",new Yt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wp(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Rp extends Tn{constructor(e=new vc([new He(0,.5),new He(-.5,-.5),new He(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(n),this.setAttribute("position",new Yt(r,3)),this.setAttribute("normal",new Yt(s,3)),this.setAttribute("uv",new Yt(a,2));function u(c){const p=r.length/3,y=c.extractPoints(t);let _=y.shape;const b=y.holes;F0.isClockWise(_)===!1&&(_=_.reverse());for(let E=0,M=b.length;E<M;E++){const P=b[E];F0.isClockWise(P)===!0&&(b[E]=P.reverse())}const w=F0.triangulateShape(_,b);for(let E=0,M=b.length;E<M;E++){const P=b[E];_=_.concat(P)}for(let E=0,M=_.length;E<M;E++){const P=_[E];r.push(P.x,P.y,0),s.push(0,0,1),a.push(P.x,P.y)}for(let E=0,M=w.length;E<M;E++){const P=w[E],D=P[0]+p,B=P[1]+p,U=P[2]+p;n.push(D,B,U),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return uG(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];n.push(a)}return new Rp(n,e.curveSegments)}}function uG(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class o0 extends Tn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(a+o,Math.PI);let u=0;const c=[],p=new te,y=new te,_=[],b=[],w=[],E=[];for(let M=0;M<=n;M++){const P=[],D=M/n;let B=0;M===0&&a===0?B=.5/t:M===n&&l===Math.PI&&(B=-.5/t);for(let U=0;U<=t;U++){const O=U/t;p.x=-e*Math.cos(r+O*s)*Math.sin(a+D*o),p.y=e*Math.cos(a+D*o),p.z=e*Math.sin(r+O*s)*Math.sin(a+D*o),b.push(p.x,p.y,p.z),y.copy(p).normalize(),w.push(y.x,y.y,y.z),E.push(O+B,1-D),P.push(u++)}c.push(P)}for(let M=0;M<n;M++)for(let P=0;P<t;P++){const D=c[M][P+1],B=c[M][P],U=c[M+1][P],O=c[M+1][P+1];(M!==0||a>0)&&_.push(D,B,O),(M!==n-1||l<Math.PI)&&_.push(B,U,O)}this.setIndex(_),this.setAttribute("position",new Yt(b,3)),this.setAttribute("normal",new Yt(w,3)),this.setAttribute("uv",new Yt(E,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new o0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Cp extends Xu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cp(e.radius,e.detail)}}class Np extends Tn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],u=[],c=new te,p=new te,y=new te;for(let _=0;_<=n;_++)for(let b=0;b<=r;b++){const w=b/r*s,E=_/n*Math.PI*2;p.x=(e+t*Math.cos(E))*Math.cos(w),p.y=(e+t*Math.cos(E))*Math.sin(w),p.z=t*Math.sin(E),o.push(p.x,p.y,p.z),c.x=e*Math.cos(w),c.y=e*Math.sin(w),y.subVectors(p,c).normalize(),l.push(y.x,y.y,y.z),u.push(b/r),u.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=r;b++){const w=(r+1)*_+b-1,E=(r+1)*(_-1)+b-1,M=(r+1)*(_-1)+b,P=(r+1)*_+b;a.push(w,E,P),a.push(E,M,P)}this.setIndex(a),this.setAttribute("position",new Yt(o,3)),this.setAttribute("normal",new Yt(l,3)),this.setAttribute("uv",new Yt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Np(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Pp extends Tn{constructor(e=1,t=.4,n=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],l=[],u=[],c=[],p=new te,y=new te,_=new te,b=new te,w=new te,E=new te,M=new te;for(let D=0;D<=n;++D){const B=D/n*s*Math.PI*2;P(B,s,a,e,_),P(B+.01,s,a,e,b),E.subVectors(b,_),M.addVectors(b,_),w.crossVectors(E,M),M.crossVectors(w,E),w.normalize(),M.normalize();for(let U=0;U<=r;++U){const O=U/r*Math.PI*2,z=-t*Math.cos(O),q=t*Math.sin(O);p.x=_.x+(z*M.x+q*w.x),p.y=_.y+(z*M.y+q*w.y),p.z=_.z+(z*M.z+q*w.z),l.push(p.x,p.y,p.z),y.subVectors(p,_).normalize(),u.push(y.x,y.y,y.z),c.push(D/n),c.push(U/r)}}for(let D=1;D<=n;D++)for(let B=1;B<=r;B++){const U=(r+1)*(D-1)+(B-1),O=(r+1)*D+(B-1),z=(r+1)*D+B,q=(r+1)*(D-1)+B;o.push(U,O,q),o.push(O,z,q)}this.setIndex(o),this.setAttribute("position",new Yt(l,3)),this.setAttribute("normal",new Yt(u,3)),this.setAttribute("uv",new Yt(c,2));function P(D,B,U,O,z){const q=Math.cos(D),F=Math.sin(D),G=U/B*D,j=Math.cos(G);z.x=O*(2+j)*.5*q,z.y=O*(2+j)*F*.5,z.z=O*Math.sin(G)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class h7 extends Tn{constructor(e=new vx(new te(-1,-1,0),new te(-1,1,0),new te(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new te,l=new te,u=new He;let c=new te;const p=[],y=[],_=[],b=[];w(),this.setIndex(b),this.setAttribute("position",new Yt(p,3)),this.setAttribute("normal",new Yt(y,3)),this.setAttribute("uv",new Yt(_,2));function w(){for(let D=0;D<t;D++)E(D);E(s===!1?t:0),P(),M()}function E(D){c=e.getPointAt(D/t,c);const B=a.normals[D],U=a.binormals[D];for(let O=0;O<=r;O++){const z=O/r*Math.PI*2,q=Math.sin(z),F=-Math.cos(z);l.x=F*B.x+q*U.x,l.y=F*B.y+q*U.y,l.z=F*B.z+q*U.z,l.normalize(),y.push(l.x,l.y,l.z),o.x=c.x+n*l.x,o.y=c.y+n*l.y,o.z=c.z+n*l.z,p.push(o.x,o.y,o.z)}}function M(){for(let D=1;D<=t;D++)for(let B=1;B<=r;B++){const U=(r+1)*(D-1)+(B-1),O=(r+1)*D+(B-1),z=(r+1)*D+B,q=(r+1)*(D-1)+B;b.push(U,O,q),b.push(O,z,q)}}function P(){for(let D=0;D<=t;D++)for(let B=0;B<=r;B++)u.x=D/t,u.y=B/r,_.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new h7(new jd[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class xx extends Tn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new te,s=new te;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const p=l[u],y=p.start,_=p.count;for(let b=y,w=y+_;b<w;b+=3)for(let E=0;E<3;E++){const M=o.getX(b+E),P=o.getX(b+(E+1)%3);r.fromBufferAttribute(a,M),s.fromBufferAttribute(a,P),rM(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,p=3*o+(u+1)%3;r.fromBufferAttribute(a,c),s.fromBufferAttribute(a,p),rM(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Yt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function rM(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var sM=Object.freeze({__proto__:null,BoxGeometry:ql,CapsuleGeometry:bp,CircleGeometry:n8,ConeGeometry:l7,CylinderGeometry:f3,DodecahedronGeometry:Sp,EdgesGeometry:hN,ExtrudeGeometry:u7,IcosahedronGeometry:Mp,LatheGeometry:Ep,OctahedronGeometry:c7,PlaneGeometry:d3,PolyhedronGeometry:Xu,RingGeometry:wp,ShapeGeometry:Rp,SphereGeometry:o0,TetrahedronGeometry:Cp,TorusGeometry:Np,TorusKnotGeometry:Pp,TubeGeometry:h7,WireframeGeometry:xx});class bx extends Ss{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Dt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _N extends Na{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Dp extends Ss{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Dt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bl,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sx extends Dp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new He(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return In(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Dt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Dt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Dt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Bp extends Ss{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Dt(16777215),this.specular=new Dt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bl,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=J5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tx extends Ss{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Dt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bl,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Mx extends Ss{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bl,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class j0 extends Ss{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Dt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Dt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bl,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new bs,this.combine=J5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ex extends Ss{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=FC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wx extends Ss{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Rx extends Ss{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Dt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bl,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Cx extends ls{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function hc(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function xN(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function bN(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function pv(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,a=0;a!==n;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=i[o+l]}return r}function Nx(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let a=s[n];if(a!==void 0)if(Array.isArray(a))do a=s[n],a!==void 0&&(e.push(s.time),t.push(...a)),s=i[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[n],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do a=s[n],a!==void 0&&(e.push(s.time),t.push(a)),s=i[r++];while(s!==void 0)}function cG(i,e,t,n,r=30){const s=i.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),p=[],y=[];for(let _=0;_<u.times.length;++_){const b=u.times[_]*r;if(!(b<t||b>=n)){p.push(u.times[_]);for(let w=0;w<c;++w)y.push(u.values[_*c+w])}}p.length!==0&&(u.times=hc(p,u.times.constructor),u.values=hc(y,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function hG(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=i.tracks.find(function(M){return M.name===o.name&&M.ValueTypeName===l});if(u===void 0)continue;let c=0;const p=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=p/3);let y=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=_/3);const b=o.times.length-1;let w;if(s<=o.times[0]){const M=c,P=p-c;w=o.values.slice(M,P)}else if(s>=o.times[b]){const M=b*p+c,P=M+p-c;w=o.values.slice(M,P)}else{const M=o.createInterpolant(),P=c,D=p-c;M.evaluate(s),w=M.resultBuffer.slice(P,D)}l==="quaternion"&&new Gs().fromArray(w).normalize().conjugate().toArray(w);const E=u.times.length;for(let M=0;M<E;++M){const P=M*_+y;if(l==="quaternion")Gs.multiplyQuaternionsFlat(u.values,P,w,0,u.values,P);else{const D=_-y*2;for(let B=0;B<D;++B)u.values[P+B]-=w[B]}}}return i.blendMode=nx,i}class fG{static convertArray(e,t){return hc(e,t)}static isTypedArray(e){return xN(e)}static getKeyframeOrder(e){return bN(e)}static sortedArray(e,t,n){return pv(e,t,n)}static flattenJSON(e,t,n,r){Nx(e,t,n,r)}static subclip(e,t,n,r,s=30){return cG(e,t,n,r,s)}static makeClipAdditive(e,t=0,n=e,r=30){return hG(e,t,n,r)}}class f7{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(s=r,r=t[++n],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(n=2,s=o);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}a=n,n=0;break n}break e}for(;n<a;){const o=n+a>>>1;e<t[o]?a=o:n=o+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class SN extends f7{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:oc,endingEnd:oc}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case lc:s=e,o=2*t-n;break;case g6:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=n}if(l===void 0)switch(this.getSettings_().endingEnd){case lc:a=e,l=2*n-t;break;case g6:a=1,l=n+r[1]-r[0];break;default:a=e-1,l=t}const u=(n-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-n),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,p=this._offsetNext,y=this._weightPrev,_=this._weightNext,b=(n-t)/(r-t),w=b*b,E=w*b,M=-y*E+2*y*w-y*b,P=(1+y)*E+(-1.5-2*y)*w+(-.5+y)*b+1,D=(-1-_)*E+(1.5+_)*w+.5*b,B=_*E-_*w;for(let U=0;U!==o;++U)s[U]=M*a[c+U]+P*a[u+U]+D*a[l+U]+B*a[p+U];return s}}class Px extends f7{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(n-t)/(r-t),p=1-c;for(let y=0;y!==o;++y)s[y]=a[u+y]*p+a[l+y]*c;return s}}class TN extends f7{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class l0{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=hc(t,this.TimeBufferType),this.values=hc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:hc(e.times,Array),values:hc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new TN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Px(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new SN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case m6:t=this.InterpolantFactoryMethodDiscrete;break;case qd:t=this.InterpolantFactoryMethodLinear;break;case vd:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return m6;case this.InterpolantFactoryMethodLinear:return qd;case this.InterpolantFactoryMethodSmooth:return vd}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;a!==-1&&n[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=n.slice(s,a),this.values=this.values.slice(s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=n[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&xN(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===vd,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(r)l=!0;else{const p=o*n,y=p-n,_=p+n;for(let b=0;b!==n;++b){const w=t[p+b];if(w!==t[y+b]||w!==t[_+b]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const p=o*n,y=a*n;for(let _=0;_!==n;++_)t[y+_]=t[p+_]}++a}}if(s>0){e[a]=e[s];for(let o=s*n,l=a*n,u=0;u!==n;++u)t[l+u]=t[o+u];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}l0.prototype.ValueTypeName="";l0.prototype.TimeBufferType=Float32Array;l0.prototype.ValueBufferType=Float32Array;l0.prototype.DefaultInterpolation=qd;class A3 extends l0{constructor(e,t,n){super(e,t,n)}}A3.prototype.ValueTypeName="bool";A3.prototype.ValueBufferType=Array;A3.prototype.DefaultInterpolation=m6;A3.prototype.InterpolantFactoryMethodLinear=void 0;A3.prototype.InterpolantFactoryMethodSmooth=void 0;class Dx extends l0{constructor(e,t,n,r){super(e,t,n,r)}}Dx.prototype.ValueTypeName="color";class b6 extends l0{constructor(e,t,n,r){super(e,t,n,r)}}b6.prototype.ValueTypeName="number";class MN extends f7{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(r-t);let u=e*o;for(let c=u+o;u!==c;u+=4)Gs.slerpFlat(s,0,a,u-o,a,u,l);return s}}class d7 extends l0{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new MN(this.times,this.values,this.getValueSize(),e)}}d7.prototype.ValueTypeName="quaternion";d7.prototype.InterpolantFactoryMethodSmooth=void 0;class p3 extends l0{constructor(e,t,n){super(e,t,n)}}p3.prototype.ValueTypeName="string";p3.prototype.ValueBufferType=Array;p3.prototype.DefaultInterpolation=m6;p3.prototype.InterpolantFactoryMethodLinear=void 0;p3.prototype.InterpolantFactoryMethodSmooth=void 0;class S6 extends l0{constructor(e,t,n,r){super(e,t,n,r)}}S6.prototype.ValueTypeName="vector";class T6{constructor(e="",t=-1,n=[],r=ap){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Mo(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(AG(n[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,a=n.length;s!==a;++s)t.push(l0.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],u=[];l.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const c=bN(l);l=pv(l,1,c),u=pv(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),a.push(new b6(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(s);if(c&&c.length>1){const p=c[1];let y=r[p];y||(r[p]=y=[]),y.push(u)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(p,y,_,b,w){if(_.length!==0){const E=[],M=[];Nx(_,E,M,b),E.length!==0&&w.push(new p(y,E,M))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let p=0;p<u.length;p++){const y=u[p].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const _={};let b;for(b=0;b<y.length;b++)if(y[b].morphTargets)for(let w=0;w<y[b].morphTargets.length;w++)_[y[b].morphTargets[w]]=-1;for(const w in _){const E=[],M=[];for(let P=0;P!==y[b].morphTargets.length;++P){const D=y[b];E.push(D.time),M.push(D.morphTarget===w?1:0)}r.push(new b6(".morphTargetInfluence["+w+"]",E,M))}l=_.length*a}else{const _=".bones["+t[p].name+"]";n(S6,_+".position",y,"pos",r),n(d7,_+".quaternion",y,"rot",r),n(S6,_+".scale",y,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function dG(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return b6;case"vector":case"vector2":case"vector3":case"vector4":return S6;case"color":return Dx;case"quaternion":return d7;case"bool":case"boolean":return A3;case"string":return p3}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function AG(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=dG(i.type);if(i.times===void 0){const t=[],n=[];Nx(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Tl={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Bx{constructor(e,t,n){const r=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(c){o++,s===!1&&r.onStart!==void 0&&r.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,p){return u.push(c,p),this},this.removeHandler=function(c){const p=u.indexOf(c);return p!==-1&&u.splice(p,2),this},this.getHandler=function(c){for(let p=0,y=u.length;p<y;p+=2){const _=u[p],b=u[p+1];if(_.global&&(_.lastIndex=0),_.test(c))return b}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const EN=new Bx;class to{constructor(e){this.manager=e!==void 0?e:EN,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}to.DEFAULT_MATERIAL_NAME="__DEFAULT";const h1={};class pG extends Error{constructor(e,t){super(e),this.response=t}}class I1 extends to{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Tl.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(h1[e]!==void 0){h1[e].push({onLoad:t,onProgress:n,onError:r});return}h1[e]=[],h1[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=h1[e],p=u.body.getReader(),y=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),_=y?parseInt(y):0,b=_!==0;let w=0;const E=new ReadableStream({start(M){P();function P(){p.read().then(({done:D,value:B})=>{if(D)M.close();else{w+=B.byteLength;const U=new ProgressEvent("progress",{lengthComputable:b,loaded:w,total:_});for(let O=0,z=c.length;O<z;O++){const q=c[O];q.onProgress&&q.onProgress(U)}M.enqueue(B),P()}},D=>{M.error(D)})}}});return new Response(E)}else throw new pG(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o==="")return u.text();{const p=/charset="?([^;"\s]*)"?/i.exec(o),y=p&&p[1]?p[1].toLowerCase():void 0,_=new TextDecoder(y);return u.arrayBuffer().then(b=>_.decode(b))}}}).then(u=>{Tl.add(`file:${e}`,u);const c=h1[e];delete h1[e];for(let p=0,y=c.length;p<y;p++){const _=c[p];_.onLoad&&_.onLoad(u)}}).catch(u=>{const c=h1[e];if(c===void 0)throw this.manager.itemError(e),u;delete h1[e];for(let p=0,y=c.length;p<y;p++){const _=c[p];_.onError&&_.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class mG extends to{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new I1(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=T6.parse(e[n]);t.push(r)}return t}}class gG extends to{constructor(e){super(e)}load(e,t,n,r){const s=this,a=[],o=new xp,l=new I1(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(p){l.load(e[p],function(y){const _=s.parse(y,!0);a[p]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},u+=1,u===6&&(_.mipmapCount===1&&(o.minFilter=Qi),o.image=a,o.format=_.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(Array.isArray(e))for(let p=0,y=e.length;p<y;++p)c(p);else l.load(e,function(p){const y=s.parse(p,!0);if(y.isCubemap){const _=y.mipmaps.length/y.mipmapCount;for(let b=0;b<_;b++){a[b]={mipmaps:[]};for(let w=0;w<y.mipmapCount;w++)a[b].mipmaps.push(y.mipmaps[b*y.mipmapCount+w]),a[b].format=y.format,a[b].width=y.width,a[b].height=y.height}o.image=a}else o.image.width=y.width,o.image.height=y.height,o.mipmaps=y.mipmaps;y.mipmapCount===1&&(o.minFilter=Qi),o.format=y.format,o.needsUpdate=!0,t&&t(o)},n,r);return o}}const D4=new WeakMap;class M6 extends to{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Tl.get(`image:${e}`);if(a!==void 0){if(a.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0);else{let p=D4.get(a);p===void 0&&(p=[],D4.set(a,p)),p.push({onLoad:t,onError:r})}return a}const o=y6("img");function l(){c(),t&&t(this);const p=D4.get(this)||[];for(let y=0;y<p.length;y++){const _=p[y];_.onLoad&&_.onLoad(this)}D4.delete(this),s.manager.itemEnd(e)}function u(p){c(),r&&r(p),Tl.remove(`image:${e}`);const y=D4.get(this)||[];for(let _=0;_<y.length;_++){const b=y[_];b.onError&&b.onError(p)}D4.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),Tl.add(`image:${e}`,o),s.manager.itemStart(e),o.src=e,o}}class yG extends to{constructor(e){super(e)}load(e,t,n,r){const s=new Wu;s.colorSpace=Qr;const a=new M6(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(u){a.load(e[u],function(c){s.images[u]=c,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class vG extends to{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new G0,o=new I1(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(r!==void 0)r(c);else{console.error(c);return}}u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:Ra,a.wrapT=u.wrapT!==void 0?u.wrapT:Ra,a.magFilter=u.magFilter!==void 0?u.magFilter:Qi,a.minFilter=u.minFilter!==void 0?u.minFilter:Qi,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(a.colorSpace=u.colorSpace),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Fs),u.mipmapCount===1&&(a.minFilter=Qi),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u)},n,r),a}}class Lx extends to{constructor(e){super(e)}load(e,t,n,r){const s=new mr,a=new M6(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class Yu extends yi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Dt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Ix extends Yu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Dt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Bg=new $t,aM=new te,oM=new te;class Ux{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new He(512,512),this.mapType=Ar,this.map=null,this.mapPass=null,this.matrix=new $t,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ju,this._frameExtents=new He(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;aM.setFromMatrixPosition(e.matrixWorld),t.position.copy(aM),oM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(oM),t.updateMatrixWorld(),Bg.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Bg,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Bg)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class _G extends Ux{constructor(){super(new ar(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Zc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class A7 extends Yu{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.target=new yi,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new _G}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lM=new $t,yh=new te,Lg=new te;class xG extends Ux{constructor(){super(new ar(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new He(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),yh.setFromMatrixPosition(e.matrixWorld),n.position.copy(yh),Lg.copy(n.position),Lg.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Lg),n.updateMatrixWorld(),r.makeTranslation(-yh.x,-yh.y,-yh.z),lM.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lM,n.coordinateSystem,n.reversedDepth)}}class Ox extends Yu{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new xG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Ml extends c3{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class bG extends Ux{constructor(){super(new Ml(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Fx extends Yu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.target=new yi,this.shadow=new bG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Vx extends Yu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class zx extends Yu{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class wN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new te)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],1.092548*(n*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(n*s)),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*n),t.addScaledVector(a[4],2*.429043*n*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class Gx extends Yu{constructor(e=new wN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Lp extends to{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,a=new I1(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Dt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=n(a.value);break;case"c":r.uniforms[s].value=new Dt().setHex(a.value);break;case"v2":r.uniforms[s].value=new He().fromArray(a.value);break;case"v3":r.uniforms[s].value=new te().fromArray(a.value);break;case"v4":r.uniforms[s].value=new an().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Vn().fromArray(a.value);break;case"m4":r.uniforms[s].value=new $t().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new He().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new He().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Lp.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:bx,SpriteMaterial:vp,RawShaderMaterial:_N,ShaderMaterial:Na,PointsMaterial:o7,MeshPhysicalMaterial:Sx,MeshStandardMaterial:Dp,MeshPhongMaterial:Bp,MeshToonMaterial:Tx,MeshNormalMaterial:Mx,MeshLambertMaterial:j0,MeshDepthMaterial:Ex,MeshDistanceMaterial:wx,MeshBasicMaterial:Os,MeshMatcapMaterial:Rx,LineDashedMaterial:Cx,LineBasicMaterial:ls,Material:Ss};return new t[e]}}class mv{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class qx extends Tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class RN extends to{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new I1(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(_,b){if(t[b]!==void 0)return t[b];const E=_.interleavedBuffers[b],M=s(_,E.buffer),P=s5(E.type,M),D=new t8(P,E.stride);return D.uuid=E.uuid,t[b]=D,D}function s(_,b){if(n[b]!==void 0)return n[b];const E=_.arrayBuffers[b],M=new Uint32Array(E).buffer;return n[b]=M,M}const a=e.isInstancedBufferGeometry?new qx:new Tn,o=e.data.index;if(o!==void 0){const _=s5(o.type,o.array);a.setIndex(new li(_,1))}const l=e.data.attributes;for(const _ in l){const b=l[_];let w;if(b.isInterleavedBufferAttribute){const E=r(e.data,b.data);w=new Ca(E,b.itemSize,b.offset,b.normalized)}else{const E=s5(b.type,b.array),M=b.isInstancedBufferAttribute?$a:li;w=new M(E,b.itemSize,b.normalized)}b.name!==void 0&&(w.name=b.name),b.usage!==void 0&&w.setUsage(b.usage),a.setAttribute(_,w)}const u=e.data.morphAttributes;if(u)for(const _ in u){const b=u[_],w=[];for(let E=0,M=b.length;E<M;E++){const P=b[E];let D;if(P.isInterleavedBufferAttribute){const B=r(e.data,P.data);D=new Ca(B,P.itemSize,P.offset,P.normalized)}else{const B=s5(P.type,P.array);D=new li(B,P.itemSize,P.normalized)}P.name!==void 0&&(D.name=P.name),w.push(D)}a.morphAttributes[_]=w}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let _=0,b=p.length;_!==b;++_){const w=p[_];a.addGroup(w.start,w.count,w.materialIndex)}const y=e.data.boundingSphere;return y!==void 0&&(a.boundingSphere=new Kr().fromJSON(y)),e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class SG extends to{constructor(e){super(e)}load(e,t,n,r){const s=this,a=this.path===""?mv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new I1(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?mv.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new I1(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let p=!1;for(const y in a)if(a[y].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new vc().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new _p().fromJSON(e[s],r);n[o.uuid]=o}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new RN;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in sM?o=sM[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),l.userData!==void 0&&(o.userData=l.userData),n[l.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new Lp;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=T6.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function a(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return a(c)}else return l.data?{data:s5(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Bx(t);s=new M6(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const p=e[u],y=p.url;if(Array.isArray(y)){const _=[];for(let b=0,w=y.length;b<w;b++){const E=y[b],M=o(E);M!==null&&(M instanceof HTMLImageElement?_.push(M):_.push(new G0(M.data,M.width,M.height)))}r[p.uuid]=new Pu(_)}else{const _=o(p.url);r[p.uuid]=new Pu(_)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:s5(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new M6(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const c=[];for(let p=0,y=u.length;p<y;p++){const _=u[p],b=await s(_);b!==null&&(b instanceof HTMLImageElement?c.push(b):c.push(new G0(b.data,b.width,b.height)))}n[l.uuid]=new Pu(c)}else{const c=await s(l.url);n[l.uuid]=new Pu(c)}}}return n}parseTextures(e,t){function n(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let c;Array.isArray(u)?(c=new Wu,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new G0:c=new mr,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=n(o.mapping,TG)),o.channel!==void 0&&(c.channel=o.channel),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=n(o.wrap[0],uM),c.wrapT=n(o.wrap[1],uM)),o.format!==void 0&&(c.format=o.format),o.internalFormat!==void 0&&(c.internalFormat=o.internalFormat),o.type!==void 0&&(c.type=o.type),o.colorSpace!==void 0&&(c.colorSpace=o.colorSpace),o.minFilter!==void 0&&(c.minFilter=n(o.minFilter,cM)),o.magFilter!==void 0&&(c.magFilter=n(o.magFilter,cM)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(c.compareFunction=o.compareFunction),o.userData!==void 0&&(c.userData=o.userData),r[o.uuid]=c}return r}parseObject(e,t,n,r,s){let a;function o(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function l(y){if(y!==void 0){if(Array.isArray(y)){const _=[];for(let b=0,w=y.length;b<w;b++){const E=y[b];n[E]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",E),_.push(n[E])}return _}return n[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),n[y]}}function u(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let c,p;switch(e.type){case"Scene":a=new h3,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Dt(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new s7(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new yp(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new ar(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Ml(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Vx(e.color,e.intensity);break;case"DirectionalLight":a=new Fx(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Ox(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new zx(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new A7(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new Ix(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Gx().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),p=l(e.material),a=new aN(c,p),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),p=l(e.material),a=new Jn(c,p);break;case"InstancedMesh":c=o(e.geometry),p=l(e.material);const y=e.count,_=e.instanceMatrix,b=e.instanceColor;a=new oN(c,p,y),a.instanceMatrix=new $a(new Float32Array(_.array),16),b!==void 0&&(a.instanceColor=new $a(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":c=o(e.geometry),p=l(e.material),a=new lN(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),a.geometry=c,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(w=>{let E=null,M=null;return w.boundingBox!==void 0&&(E=new ss().fromJSON(w.boundingBox)),w.boundingSphere!==void 0&&(M=new Kr().fromJSON(w.boundingSphere)),{...w,boundingBox:E,boundingSphere:M}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=u(e.matricesTexture.uuid),a._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new Kr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(a.boundingBox=new ss().fromJSON(e.boundingBox));break;case"LOD":a=new sN;break;case"Line":a=new k0(o(e.geometry),l(e.material));break;case"LineLoop":a=new uN(o(e.geometry),l(e.material));break;case"LineSegments":a=new s0(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new hx(o(e.geometry),l(e.material));break;case"Sprite":a=new rN(l(e.material));break;case"Group":a=new sa;break;case"Bone":a=new cx;break;default:a=new yi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let _=0;_<y.length;_++)a.add(this.parseObject(y[_],t,n,r,s))}if(e.animations!==void 0){const y=e.animations;for(let _=0;_<y.length;_++){const b=y[_];a.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const y=e.levels;for(let _=0;_<y.length;_++){const b=y[_],w=a.getObjectByProperty("uuid",b.object);w!==void 0&&a.addLevel(w,b.distance,b.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new yi}})}}const TG={UVMapping:$6,CubeReflectionMapping:Eo,CubeRefractionMapping:Zo,EquirectangularReflectionMapping:Fu,EquirectangularRefractionMapping:Vu,CubeUVReflectionMapping:D1},uM={RepeatWrapping:B1,ClampToEdgeWrapping:Ra,MirroredRepeatWrapping:L1},cM={NearestFilter:Xi,NearestMipmapNearestFilter:K6,NearestMipmapLinearFilter:O0,LinearFilter:Qi,LinearMipmapNearestFilter:Bu,LinearMipmapLinearFilter:Fs},Ig=new WeakMap;class MG extends to{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Tl.get(`image-bitmap:${e}`);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(u=>{if(Ig.has(a)===!0)r&&r(Ig.get(a)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(u),s.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,o.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,o).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Tl.add(`image-bitmap:${e}`,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Ig.set(l,u),Tl.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Tl.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let p9;class kx{static getContext(){return p9===void 0&&(p9=new(window.AudioContext||window.webkitAudioContext)),p9}static setContext(e){p9=e}}class EG extends to{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new I1(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{const u=l.slice(0);kx.getContext().decodeAudioData(u,function(p){t(p)}).catch(o)}catch(u){o(u)}},n,r);function o(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const hM=new $t,fM=new $t,L2=new $t;class wG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ar,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ar,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,L2.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(yc*t.fov*.5)/t.zoom;let o,l;fM.elements[12]=-r,hM.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,L2.elements[0]=2*t.near/(l-o),L2.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(L2),o=-a*t.aspect-s,l=a*t.aspect-s,L2.elements[0]=2*t.near/(l-o),L2.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(L2)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(hM)}}class Hx extends ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Wx{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const I2=new te,Ug=new Gs,RG=new te,U2=new te,O2=new te;class CG extends yi{constructor(){super(),this.type="AudioListener",this.context=kx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Wx}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(I2,Ug,RG),U2.set(0,0,-1).applyQuaternion(Ug),O2.set(0,1,0).applyQuaternion(Ug),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(I2.x,n),t.positionY.linearRampToValueAtTime(I2.y,n),t.positionZ.linearRampToValueAtTime(I2.z,n),t.forwardX.linearRampToValueAtTime(U2.x,n),t.forwardY.linearRampToValueAtTime(U2.y,n),t.forwardZ.linearRampToValueAtTime(U2.z,n),t.upX.linearRampToValueAtTime(O2.x,n),t.upY.linearRampToValueAtTime(O2.y,n),t.upZ.linearRampToValueAtTime(O2.z,n)}else t.setPosition(I2.x,I2.y,I2.z),t.setOrientation(U2.x,U2.y,U2.z,O2.x,O2.y,O2.z)}}class CN extends yi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const F2=new te,dM=new Gs,NG=new te,V2=new te;class PG extends CN{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(F2,dM,NG),V2.set(0,0,1).applyQuaternion(dM);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(F2.x,n),t.positionY.linearRampToValueAtTime(F2.y,n),t.positionZ.linearRampToValueAtTime(F2.z,n),t.orientationX.linearRampToValueAtTime(V2.x,n),t.orientationY.linearRampToValueAtTime(V2.y,n),t.orientationZ.linearRampToValueAtTime(V2.z,n)}else t.setPosition(F2.x,F2.y,F2.z),t.setOrientation(V2.x,V2.y,V2.z)}}class DG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class NN{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)n[s+o]=n[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(n,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,a=r;s!==a;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){Gs.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const a=this._workIndex*s;Gs.multiplyQuaternionsFlat(e,a,e,t,e,n),Gs.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[n+a]*r}}}const jx="\\[\\]\\.:\\/",BG=new RegExp("["+jx+"]","g"),Xx="[^"+jx+"]",LG="[^"+jx.replace("\\.","")+"]",IG=/((?:WC+[\/:])*)/.source.replace("WC",Xx),UG=/(WCOD+)?/.source.replace("WCOD",LG),OG=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xx),FG=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xx),VG=new RegExp("^"+IG+UG+OG+FG+"$"),zG=["material","materials","bones","map"];class GG{constructor(e,t,n){const r=n||Si.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Si{constructor(e,t,n){this.path=t,this.parsedPath=n||Si.parseTrackName(t),this.node=Si.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Si.Composite(e,t,n):new Si(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(BG,"")}static parseTrackName(e){const t=VG.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);zG.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=n(o.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Si.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?o=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Si.Composite=GG;Si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Si.prototype.GetterByBindingType=[Si.prototype._getValue_direct,Si.prototype._getValue_array,Si.prototype._getValue_arrayElement,Si.prototype._getValue_toArray];Si.prototype.SetterByBindingTypeAndVersioning=[[Si.prototype._setValue_direct,Si.prototype._setValue_direct_setNeedsUpdate,Si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_array,Si.prototype._setValue_array_setNeedsUpdate,Si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_arrayElement,Si.prototype._setValue_arrayElement_setNeedsUpdate,Si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_fromArray,Si.prototype._setValue_fromArray_setNeedsUpdate,Si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class qG{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Mo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,u=this.nCachedObjects_;for(let c=0,p=arguments.length;c!==p;++c){const y=arguments[c],_=y.uuid;let b=t[_];if(b===void 0){b=l++,t[_]=b,e.push(y);for(let w=0,E=a;w!==E;++w)s[w].push(new Si(y,n[w],r[w]))}else if(b<u){o=e[b];const w=--u,E=e[w];t[E.uuid]=b,e[b]=E,t[_]=w,e[w]=y;for(let M=0,P=a;M!==P;++M){const D=s[M],B=D[w];let U=D[b];D[b]=B,U===void 0&&(U=new Si(y,n[M],r[M])),D[w]=U}}else e[b]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const p=s++,y=e[p];t[y.uuid]=c,e[c]=y,t[u]=p,e[p]=l;for(let _=0,b=r;_!==b;++_){const w=n[_],E=w[p],M=w[c];w[c]=E,w[p]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],c=u.uuid,p=t[c];if(p!==void 0)if(delete t[c],p<s){const y=--s,_=e[y],b=--a,w=e[b];t[_.uuid]=p,e[p]=_,t[w.uuid]=y,e[y]=w,e.pop();for(let E=0,M=r;E!==M;++E){const P=n[E],D=P[y],B=P[b];P[p]=D,P[y]=B,P.pop()}}else{const y=--a,_=e[y];y>0&&(t[_.uuid]=p),e[p]=_,e.pop();for(let b=0,w=r;b!==w;++b){const E=n[b];E[p]=E[y],E.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,p=new Array(u);r=s.length,n[e]=r,a.push(e),o.push(t),s.push(p);for(let y=c,_=l.length;y!==_;++y){const b=l[y];p[y]=new Si(b,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],u=e[o];t[u]=n,a[n]=l,a.pop(),s[n]=s[o],s.pop(),r[n]=r[o],r.pop()}}}class PN{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:oc,endingEnd:oc};for(let u=0;u!==a;++u){const c=s[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+n,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case nx:for(let c=0,p=l.length;c!==p;++c)l[c].evaluate(a),u[c].accumulateAdditive(o);break;case ap:default:for(let c=0,p=l.length;c!==p;++c)l[c].evaluate(a),u[c].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const a=n===IC;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(n===BC){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=lc,r.endingEnd=lc):(e?r.endingStart=this.zeroSlopeAtStart?lc:oc:r.endingStart=g6,t?r.endingEnd=this.zeroSlopeAtEnd?lc:oc:r.endingEnd=g6)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=n,this}}const kG=new Float32Array(1);class HG extends No{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let p=0;p!==s;++p){const y=r[p],_=y.name;let b=c[_];if(b!==void 0)++b.referenceCount,a[p]=b;else{if(b=a[p],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,_));continue}const w=t&&t._propertyBindings[p].binding.parsedPath;b=new NN(Si.create(n,_,w),y.ValueTypeName,y.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,_),a[p]=b}o[p].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const p=o.actionByRoot,y=(e._localRoot||this._root).uuid;delete p[y],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Px(new Float32Array(2),new Float32Array(2),1,kG),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?T6.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(n===void 0&&(a!==null?n=a.blendMode:n=ap),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===n)return p;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const c=new PN(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,s),c}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?T6.findByName(n,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const c=u._cacheIndex,p=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,p._cacheIndex=c,t[c]=p,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const a in n){const o=n[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class WG extends W0{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new Ap(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}let jG=class DN{constructor(e){this.value=e}clone(){return new DN(this.value.clone===void 0?this.value:this.value.clone())}},XG=0,YG=class extends No{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:XG++}),this.name="",this.usage=L5,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}};class E6 extends t8{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class QG{constructor(e,t,n,r,s,a=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.normalized=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const AM=new $t;class BN{constructor(e,t,n=0,r=1/0){this.ray=new u3(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new I5,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return AM.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(AM),this}intersectObject(e,t=!0,n=[]){return gv(e,this,n,t),n.sort(pM),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)gv(e[r],this,n,t);return n.sort(pM),n}}function pM(i,e){return i.distance-e.distance}function gv(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let a=0,o=s.length;a<o;a++)gv(s[a],e,t,!0)}}class $G{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=KG.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function KG(){this._document.hidden===!1&&this.reset()}class yv{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=In(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(In(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ZG{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class p7{constructor(e,t,n,r){p7.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const mM=new He;class JG{constructor(e=new He(1/0,1/0),t=new He(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=mM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,mM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const gM=new te,m9=new te,B4=new te,L4=new te,Og=new te,eq=new te,tq=new te;class LN{constructor(e=new te,t=new te){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){gM.subVectors(e,this.start),m9.subVectors(this.end,this.start);const n=m9.dot(m9);let s=m9.dot(gM)/n;return t&&(s=In(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=eq,n=tq){const r=10000000000000001e-32;let s,a;const o=this.start,l=e.start,u=this.end,c=e.end;B4.subVectors(u,o),L4.subVectors(c,l),Og.subVectors(o,l);const p=B4.dot(B4),y=L4.dot(L4),_=L4.dot(Og);if(p<=r&&y<=r)return t.copy(o),n.copy(l),t.sub(n),t.dot(t);if(p<=r)s=0,a=_/y,a=In(a,0,1);else{const b=B4.dot(Og);if(y<=r)a=0,s=In(-b/p,0,1);else{const w=B4.dot(L4),E=p*y-w*w;E!==0?s=In((w*_-b*y)/E,0,1):s=0,a=(w*s+_)/y,a<0?(a=0,s=In(-b/p,0,1)):a>1&&(a=1,s=In((w-b)/p,0,1))}}return t.copy(o).add(B4.multiplyScalar(s)),n.copy(l).add(L4.multiplyScalar(a)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const yM=new te;class nq extends yi{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Tn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const u=a/l*Math.PI*2,c=o/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Yt(r,3));const s=new ls({fog:!1,toneMapped:!1});this.cone=new s0(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),yM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(yM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gu=new te,g9=new $t,Fg=new $t;class iq extends s0{constructor(e){const t=IN(e),n=new Tn,r=[],s=[];for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Yt(r,3)),n.setAttribute("color",new Yt(s,3));const a=new ls({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,a),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const o=new Dt(255),l=new Dt(65280);this.setColors(o,l)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Fg.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(g9.multiplyMatrices(Fg,o.matrixWorld),gu.setFromMatrixPosition(g9),r.setXYZ(a,gu.x,gu.y,gu.z),g9.multiplyMatrices(Fg,o.parent.matrixWorld),gu.setFromMatrixPosition(g9),r.setXYZ(a+1,gu.x,gu.y,gu.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function IN(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...IN(i.children[t]));return e}class rq extends Jn{constructor(e,t,n){const r=new o0(t,4,2),s=new Os({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const sq=new te,vM=new Dt,_M=new Dt;class aq extends yi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new c7(t);r.rotateY(Math.PI*.5),this.material=new Os({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new li(a,3)),this.add(new Jn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");vM.copy(this.light.color),_M.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?vM:_M;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(sq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class oq extends s0{constructor(e=10,t=10,n=4473924,r=8947848){n=new Dt(n),r=new Dt(r);const s=t/2,a=e/t,o=e/2,l=[],u=[];for(let y=0,_=0,b=-o;y<=t;y++,b+=a){l.push(-o,0,b,o,0,b),l.push(b,0,-o,b,0,o);const w=y===s?n:r;w.toArray(u,_),_+=3,w.toArray(u,_),_+=3,w.toArray(u,_),_+=3,w.toArray(u,_),_+=3}const c=new Tn;c.setAttribute("position",new Yt(l,3)),c.setAttribute("color",new Yt(u,3));const p=new ls({vertexColors:!0,toneMapped:!1});super(c,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class lq extends s0{constructor(e=10,t=16,n=8,r=64,s=4473924,a=8947848){s=new Dt(s),a=new Dt(a);const o=[],l=[];if(t>1)for(let p=0;p<t;p++){const y=p/t*(Math.PI*2),_=Math.sin(y)*e,b=Math.cos(y)*e;o.push(0,0,0),o.push(_,0,b);const w=p&1?s:a;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let p=0;p<n;p++){const y=p&1?s:a,_=e-e/n*p;for(let b=0;b<r;b++){let w=b/r*(Math.PI*2),E=Math.sin(w)*_,M=Math.cos(w)*_;o.push(E,0,M),l.push(y.r,y.g,y.b),w=(b+1)/r*(Math.PI*2),E=Math.sin(w)*_,M=Math.cos(w)*_,o.push(E,0,M),l.push(y.r,y.g,y.b)}}const u=new Tn;u.setAttribute("position",new Yt(o,3)),u.setAttribute("color",new Yt(l,3));const c=new ls({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xM=new te,y9=new te,bM=new te;class uq extends yi{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Tn;r.setAttribute("position",new Yt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ls({fog:!1,toneMapped:!1});this.lightPlane=new k0(r,s),this.add(this.lightPlane),r=new Tn,r.setAttribute("position",new Yt([0,0,0,0,0,1],3)),this.targetLine=new k0(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xM.setFromMatrixPosition(this.light.matrixWorld),y9.setFromMatrixPosition(this.light.target.matrixWorld),bM.subVectors(y9,xM),this.lightPlane.lookAt(y9),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(y9),this.targetLine.scale.z=bM.length()}}const v9=new te,Pr=new c3;class cq extends s0{constructor(e){const t=new Tn,n=new ls({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(b,w){l(b),l(w)}function l(b){r.push(0,0,0),s.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(r.length/3-1)}t.setAttribute("position",new Yt(r,3)),t.setAttribute("color",new Yt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Dt(16755200),c=new Dt(16711680),p=new Dt(43775),y=new Dt(16777215),_=new Dt(3355443);this.setColors(u,c,p,y,_)}setColors(e,t,n,r,s){const o=this.geometry.getAttribute("color");return o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;let s,a;if(Pr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,a=0;else if(this.camera.coordinateSystem===Vs)s=-1,a=1;else if(this.camera.coordinateSystem===Jo)s=0,a=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Gr("c",t,e,Pr,0,0,s),Gr("t",t,e,Pr,0,0,a),Gr("n1",t,e,Pr,-n,-r,s),Gr("n2",t,e,Pr,n,-r,s),Gr("n3",t,e,Pr,-n,r,s),Gr("n4",t,e,Pr,n,r,s),Gr("f1",t,e,Pr,-n,-r,a),Gr("f2",t,e,Pr,n,-r,a),Gr("f3",t,e,Pr,-n,r,a),Gr("f4",t,e,Pr,n,r,a),Gr("u1",t,e,Pr,n*.7,r*1.1,s),Gr("u2",t,e,Pr,-n*.7,r*1.1,s),Gr("u3",t,e,Pr,0,r*2,s),Gr("cf1",t,e,Pr,-n,0,a),Gr("cf2",t,e,Pr,n,0,a),Gr("cf3",t,e,Pr,0,-r,a),Gr("cf4",t,e,Pr,0,r,a),Gr("cn1",t,e,Pr,-n,0,s),Gr("cn2",t,e,Pr,n,0,s),Gr("cn3",t,e,Pr,0,-r,s),Gr("cn4",t,e,Pr,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Gr(i,e,t,n,r,s,a){v9.set(r,s,a).unproject(n);const o=e[i];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],v9.x,v9.y,v9.z)}}const _9=new ss;class hq extends s0{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Tn;s.setIndex(new li(n,1)),s.setAttribute("position",new li(r,3)),super(s,new ls({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_9.setFromObject(this.object),_9.isEmpty())return;const e=_9.min,t=_9.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class fq extends s0{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tn;s.setIndex(new li(n,1)),s.setAttribute("position",new Yt(r,3)),super(s,new ls({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class dq extends k0{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Tn;a.setAttribute("position",new Yt(s,3)),a.computeBoundingSphere(),super(a,new ls({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tn;l.setAttribute("position",new Yt(o,3)),l.computeBoundingSphere(),this.add(new Jn(l,new Os({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const SM=new te;let x9,Vg;class Aq extends yi{constructor(e=new te(0,0,1),t=new te(0,0,0),n=1,r=16776960,s=n*.2,a=s*.2){super(),this.type="ArrowHelper",x9===void 0&&(x9=new Tn,x9.setAttribute("position",new Yt([0,0,0,0,1,0],3)),Vg=new l7(.5,1,5,1),Vg.translate(0,-.5,0)),this.position.copy(t),this.line=new k0(x9,new ls({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Jn(Vg,new Os({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{SM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(SM,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class pq extends s0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Tn;r.setAttribute("position",new Yt(t,3)),r.setAttribute("color",new Yt(n,3));const s=new ls({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new Dt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class UN{constructor(){this.type="ShapePath",this.color=new Dt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Xd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const P=[];for(let D=0,B=M.length;D<B;D++){const U=M[D],O=new vc;O.curves=U.curves,P.push(O)}return P}function n(M,P){const D=P.length;let B=!1;for(let U=D-1,O=0;O<D;U=O++){let z=P[U],q=P[O],F=q.x-z.x,G=q.y-z.y;if(Math.abs(G)>Number.EPSILON){if(G<0&&(z=P[O],F=-F,q=P[U],G=-G),M.y<z.y||M.y>q.y)continue;if(M.y===z.y){if(M.x===z.x)return!0}else{const j=G*(M.x-z.x)-F*(M.y-z.y);if(j===0)return!0;if(j<0)continue;B=!B}}else{if(M.y!==z.y)continue;if(q.x<=M.x&&M.x<=z.x||z.x<=M.x&&M.x<=q.x)return!0}}return B}const r=F0.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const u=[];if(s.length===1)return o=s[0],l=new vc,l.curves=o.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const p=[],y=[];let _=[],b=0,w;y[b]=void 0,_[b]=[];for(let M=0,P=s.length;M<P;M++)o=s[M],w=o.getPoints(),a=r(w),a=e?!a:a,a?(!c&&y[b]&&b++,y[b]={s:new vc,p:w},y[b].s.curves=o.curves,c&&b++,_[b]=[]):_[b].push({h:o,p:w[0]});if(!y[0])return t(s);if(y.length>1){let M=!1,P=0;for(let D=0,B=y.length;D<B;D++)p[D]=[];for(let D=0,B=y.length;D<B;D++){const U=_[D];for(let O=0;O<U.length;O++){const z=U[O];let q=!0;for(let F=0;F<y.length;F++)n(z.p,y[F].p)&&(D!==F&&P++,q?(q=!1,p[F].push(z)):M=!0);q&&p[D].push(z)}}P>0&&M===!1&&(_=p)}let E;for(let M=0,P=y.length;M<P;M++){l=y[M].s,u.push(l),E=_[M];for(let D=0,B=E.length;D<B;D++)l.holes.push(E[D].h)}return u}}class mq extends No{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function gq(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function yq(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function vq(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function Yd(i,e,t,n){const r=_q(n);switch(t){case sp:return i*e;case a3:return i*e/r.components*r.byteLength;case Hu:return i*e/r.components*r.byteLength;case Sl:return i*e*2/r.components*r.byteLength;case o3:return i*e*2/r.components*r.byteLength;case e8:return i*e*3/r.components*r.byteLength;case nr:return i*e*4/r.components*r.byteLength;case l3:return i*e*4/r.components*r.byteLength;case b1:case S1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case T1:case M1:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case P5:case B5:return Math.max(i,16)*Math.max(e,8)/4;case N5:case D5:return Math.max(i,8)*Math.max(e,8)/2;case Cc:case Nc:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case Pc:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Dc:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case Bc:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case Lc:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case Ic:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case Uc:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case Oc:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case Fc:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case Vc:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case zc:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case Gc:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case qc:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case kc:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Hc:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Wc:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case jc:case zd:case Gd:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Xc:case Yc:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Qc:case $c:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function _q(i){switch(i){case Ar:case Lu:return{byteLength:1,components:1};case Xo:case Iu:case $r:return{byteLength:2,components:1};case Z6:case J6:return{byteLength:2,components:4};case zi:case rs:case or:return{byteLength:4,components:1};case e7:case t7:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class xq{static contain(e,t){return gq(e,t)}static cover(e,t){return yq(e,t)}static fill(e){return vq(e)}static getByteLength(e,t,n,r){return Yd(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Z5}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Z5);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function ON(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function bq(i){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,p=u.byteLength,y=i.createBuffer();i.bindBuffer(l,y),i.bufferData(l,u,c),o.onUploadCallback();let _;if(u instanceof Float32Array)_=i.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)_=i.HALF_FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)_=i.SHORT;else if(u instanceof Uint32Array)_=i.UNSIGNED_INT;else if(u instanceof Int32Array)_=i.INT;else if(u instanceof Int8Array)_=i.BYTE;else if(u instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:y,type:_,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:p}}function n(o,l,u){const c=l.array,p=l.updateRanges;if(i.bindBuffer(u,o),p.length===0)i.bufferSubData(u,0,c);else{p.sort((_,b)=>_.start-b.start);let y=0;for(let _=1;_<p.length;_++){const b=p[y],w=p[_];w.start<=b.start+b.count+1?b.count=Math.max(b.count,w.start+w.count-b.start):(++y,p[y]=w)}p.length=y+1;for(let _=0,b=p.length;_<b;_++){const w=p[_];i.bufferSubData(u,w.start*c.BYTES_PER_ELEMENT,c,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(i.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,o,l),u.version=o.version}}return{get:r,remove:s,update:a}}var Sq=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Tq=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Mq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Eq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wq=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Rq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Nq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Pq=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Dq=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Bq=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Lq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Iq=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Uq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Oq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Fq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Vq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,zq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Gq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,qq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,kq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Hq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Wq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Xq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Yq=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Qq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$q=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Kq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Zq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Jq="gl_FragColor = linearToOutputTexel( gl_FragColor );",ek=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,tk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,nk=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ik=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rk=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,sk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,ak=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,ok=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,lk=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,uk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,ck=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,hk=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fk=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dk=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Ak=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,mk=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gk=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vk=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,_k=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,xk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,bk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Sk=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Tk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Mk=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Ek=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wk=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Rk=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Ck=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Nk=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Pk=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Dk=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bk=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Lk=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ik=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Uk=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Ok=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Fk=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Vk=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,zk=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Gk=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,qk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kk=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Hk=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Wk=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jk=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Xk=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Yk=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Qk=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$k=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Kk=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Zk=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Jk=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,sH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,aH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,cH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,hH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,fH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,AH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mH=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,vH=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_H=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,xH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const bH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MH=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wH=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CH=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,NH=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,PH=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,DH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,BH=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LH=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,IH=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UH=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,OH=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FH=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VH=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zH=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,GH=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qH=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kH=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,HH=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WH=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jH=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,XH=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YH=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QH=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$H=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,KH=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZH=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JH=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Xn={alphahash_fragment:Sq,alphahash_pars_fragment:Tq,alphamap_fragment:Mq,alphamap_pars_fragment:Eq,alphatest_fragment:wq,alphatest_pars_fragment:Rq,aomap_fragment:Cq,aomap_pars_fragment:Nq,batching_pars_vertex:Pq,batching_vertex:Dq,begin_vertex:Bq,beginnormal_vertex:Lq,bsdfs:Iq,iridescence_fragment:Uq,bumpmap_pars_fragment:Oq,clipping_planes_fragment:Fq,clipping_planes_pars_fragment:Vq,clipping_planes_pars_vertex:zq,clipping_planes_vertex:Gq,color_fragment:qq,color_pars_fragment:kq,color_pars_vertex:Hq,color_vertex:Wq,common:jq,cube_uv_reflection_fragment:Xq,defaultnormal_vertex:Yq,displacementmap_pars_vertex:Qq,displacementmap_vertex:$q,emissivemap_fragment:Kq,emissivemap_pars_fragment:Zq,colorspace_fragment:Jq,colorspace_pars_fragment:ek,envmap_fragment:tk,envmap_common_pars_fragment:nk,envmap_pars_fragment:ik,envmap_pars_vertex:rk,envmap_physical_pars_fragment:pk,envmap_vertex:sk,fog_vertex:ak,fog_pars_vertex:ok,fog_fragment:lk,fog_pars_fragment:uk,gradientmap_pars_fragment:ck,lightmap_pars_fragment:hk,lights_lambert_fragment:fk,lights_lambert_pars_fragment:dk,lights_pars_begin:Ak,lights_toon_fragment:mk,lights_toon_pars_fragment:gk,lights_phong_fragment:yk,lights_phong_pars_fragment:vk,lights_physical_fragment:_k,lights_physical_pars_fragment:xk,lights_fragment_begin:bk,lights_fragment_maps:Sk,lights_fragment_end:Tk,logdepthbuf_fragment:Mk,logdepthbuf_pars_fragment:Ek,logdepthbuf_pars_vertex:wk,logdepthbuf_vertex:Rk,map_fragment:Ck,map_pars_fragment:Nk,map_particle_fragment:Pk,map_particle_pars_fragment:Dk,metalnessmap_fragment:Bk,metalnessmap_pars_fragment:Lk,morphinstance_vertex:Ik,morphcolor_vertex:Uk,morphnormal_vertex:Ok,morphtarget_pars_vertex:Fk,morphtarget_vertex:Vk,normal_fragment_begin:zk,normal_fragment_maps:Gk,normal_pars_fragment:qk,normal_pars_vertex:kk,normal_vertex:Hk,normalmap_pars_fragment:Wk,clearcoat_normal_fragment_begin:jk,clearcoat_normal_fragment_maps:Xk,clearcoat_pars_fragment:Yk,iridescence_pars_fragment:Qk,opaque_fragment:$k,packing:Kk,premultiplied_alpha_fragment:Zk,project_vertex:Jk,dithering_fragment:eH,dithering_pars_fragment:tH,roughnessmap_fragment:nH,roughnessmap_pars_fragment:iH,shadowmap_pars_fragment:rH,shadowmap_pars_vertex:sH,shadowmap_vertex:aH,shadowmask_pars_fragment:oH,skinbase_vertex:lH,skinning_pars_vertex:uH,skinning_vertex:cH,skinnormal_vertex:hH,specularmap_fragment:fH,specularmap_pars_fragment:dH,tonemapping_fragment:AH,tonemapping_pars_fragment:pH,transmission_fragment:mH,transmission_pars_fragment:gH,uv_pars_fragment:yH,uv_pars_vertex:vH,uv_vertex:_H,worldpos_vertex:xH,background_vert:bH,background_frag:SH,backgroundCube_vert:TH,backgroundCube_frag:MH,cube_vert:EH,cube_frag:wH,depth_vert:RH,depth_frag:CH,distanceRGBA_vert:NH,distanceRGBA_frag:PH,equirect_vert:DH,equirect_frag:BH,linedashed_vert:LH,linedashed_frag:IH,meshbasic_vert:UH,meshbasic_frag:OH,meshlambert_vert:FH,meshlambert_frag:VH,meshmatcap_vert:zH,meshmatcap_frag:GH,meshnormal_vert:qH,meshnormal_frag:kH,meshphong_vert:HH,meshphong_frag:WH,meshphysical_vert:jH,meshphysical_frag:XH,meshtoon_vert:YH,meshtoon_frag:QH,points_vert:$H,points_frag:KH,shadow_vert:ZH,shadow_frag:JH,sprite_vert:eW,sprite_frag:tW},Vt={common:{diffuse:{value:new Dt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vn},alphaMap:{value:null},alphaMapTransform:{value:new Vn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vn}},envmap:{envMap:{value:null},envMapRotation:{value:new Vn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vn},normalScale:{value:new He(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Dt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Dt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vn},alphaTest:{value:0},uvTransform:{value:new Vn}},sprite:{diffuse:{value:new Dt(16777215)},opacity:{value:1},center:{value:new He(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vn},alphaMap:{value:null},alphaMapTransform:{value:new Vn},alphaTest:{value:0}}},ba={basic:{uniforms:va([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.fog]),vertexShader:Xn.meshbasic_vert,fragmentShader:Xn.meshbasic_frag},lambert:{uniforms:va([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Xn.meshlambert_vert,fragmentShader:Xn.meshlambert_frag},phong:{uniforms:va([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Dt(0)},specular:{value:new Dt(1118481)},shininess:{value:30}}]),vertexShader:Xn.meshphong_vert,fragmentShader:Xn.meshphong_frag},standard:{uniforms:va([Vt.common,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.roughnessmap,Vt.metalnessmap,Vt.fog,Vt.lights,{emissive:{value:new Dt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag},toon:{uniforms:va([Vt.common,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.gradientmap,Vt.fog,Vt.lights,{emissive:{value:new Dt(0)}}]),vertexShader:Xn.meshtoon_vert,fragmentShader:Xn.meshtoon_frag},matcap:{uniforms:va([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,{matcap:{value:null}}]),vertexShader:Xn.meshmatcap_vert,fragmentShader:Xn.meshmatcap_frag},points:{uniforms:va([Vt.points,Vt.fog]),vertexShader:Xn.points_vert,fragmentShader:Xn.points_frag},dashed:{uniforms:va([Vt.common,Vt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Xn.linedashed_vert,fragmentShader:Xn.linedashed_frag},depth:{uniforms:va([Vt.common,Vt.displacementmap]),vertexShader:Xn.depth_vert,fragmentShader:Xn.depth_frag},normal:{uniforms:va([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,{opacity:{value:1}}]),vertexShader:Xn.meshnormal_vert,fragmentShader:Xn.meshnormal_frag},sprite:{uniforms:va([Vt.sprite,Vt.fog]),vertexShader:Xn.sprite_vert,fragmentShader:Xn.sprite_frag},background:{uniforms:{uvTransform:{value:new Vn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Xn.background_vert,fragmentShader:Xn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vn}},vertexShader:Xn.backgroundCube_vert,fragmentShader:Xn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Xn.cube_vert,fragmentShader:Xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Xn.equirect_vert,fragmentShader:Xn.equirect_frag},distanceRGBA:{uniforms:va([Vt.common,Vt.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Xn.distanceRGBA_vert,fragmentShader:Xn.distanceRGBA_frag},shadow:{uniforms:va([Vt.lights,Vt.fog,{color:{value:new Dt(0)},opacity:{value:1}}]),vertexShader:Xn.shadow_vert,fragmentShader:Xn.shadow_frag}};ba.physical={uniforms:va([ba.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vn},clearcoatNormalScale:{value:new He(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vn},sheen:{value:0},sheenColor:{value:new Dt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vn},transmissionSamplerSize:{value:new He},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vn},attenuationDistance:{value:0},attenuationColor:{value:new Dt(0)},specularColor:{value:new Dt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vn},anisotropyVector:{value:new He},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vn}}]),vertexShader:Xn.meshphysical_vert,fragmentShader:Xn.meshphysical_frag};const b9={r:0,b:0,g:0},z2=new bs,nW=new $t;function iW(i,e,t,n,r,s,a){const o=new Dt(0);let l=s===!0?0:1,u,c,p=null,y=0,_=null;function b(D){let B=D.isScene===!0?D.background:null;return B&&B.isTexture&&(B=(D.backgroundBlurriness>0?t:e).get(B)),B}function w(D){let B=!1;const U=b(D);U===null?M(o,l):U&&U.isColor&&(M(U,1),B=!0);const O=i.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,a):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,a),(i.autoClear||B)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function E(D,B){const U=b(B);U&&(U.isCubeTexture||U.mapping===D1)?(c===void 0&&(c=new Jn(new ql(1,1,1),new Na({name:"BackgroundCubeMaterial",uniforms:U5(ba.backgroundCube.uniforms),vertexShader:ba.backgroundCube.vertexShader,fragmentShader:ba.backgroundCube.fragmentShader,side:Fi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(O,z,q){this.matrixWorld.copyPosition(q.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),z2.copy(B.backgroundRotation),z2.x*=-1,z2.y*=-1,z2.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(z2.y*=-1,z2.z*=-1),c.material.uniforms.envMap.value=U,c.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=B.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(nW.makeRotationFromEuler(z2)),c.material.toneMapped=gn.getTransfer(U.colorSpace)!==Ht,(p!==U||y!==U.version||_!==i.toneMapping)&&(c.material.needsUpdate=!0,p=U,y=U.version,_=i.toneMapping),c.layers.enableAll(),D.unshift(c,c.geometry,c.material,0,0,null)):U&&U.isTexture&&(u===void 0&&(u=new Jn(new d3(2,2),new Na({name:"BackgroundMaterial",uniforms:U5(ba.background.uniforms),vertexShader:ba.background.vertexShader,fragmentShader:ba.background.fragmentShader,side:Wa,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=U,u.material.uniforms.backgroundIntensity.value=B.backgroundIntensity,u.material.toneMapped=gn.getTransfer(U.colorSpace)!==Ht,U.matrixAutoUpdate===!0&&U.updateMatrix(),u.material.uniforms.uvTransform.value.copy(U.matrix),(p!==U||y!==U.version||_!==i.toneMapping)&&(u.material.needsUpdate=!0,p=U,y=U.version,_=i.toneMapping),u.layers.enableAll(),D.unshift(u,u.geometry,u.material,0,0,null))}function M(D,B){D.getRGB(b9,nN(i)),n.buffers.color.setClear(b9.r,b9.g,b9.b,B,a)}function P(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return o},setClearColor:function(D,B=1){o.set(D),l=B,M(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(D){l=D,M(o,l)},render:w,addToRenderList:E,dispose:P}}function rW(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=y(null);let s=r,a=!1;function o(G,j,$,K,ie){let ee=!1;const X=p(K,$,j);s!==X&&(s=X,u(s.object)),ee=_(G,K,$,ie),ee&&b(G,K,$,ie),ie!==null&&e.update(ie,i.ELEMENT_ARRAY_BUFFER),(ee||a)&&(a=!1,B(G,j,$,K),ie!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ie).buffer))}function l(){return i.createVertexArray()}function u(G){return i.bindVertexArray(G)}function c(G){return i.deleteVertexArray(G)}function p(G,j,$){const K=$.wireframe===!0;let ie=n[G.id];ie===void 0&&(ie={},n[G.id]=ie);let ee=ie[j.id];ee===void 0&&(ee={},ie[j.id]=ee);let X=ee[K];return X===void 0&&(X=y(l()),ee[K]=X),X}function y(G){const j=[],$=[],K=[];for(let ie=0;ie<t;ie++)j[ie]=0,$[ie]=0,K[ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:$,attributeDivisors:K,object:G,attributes:{},index:null}}function _(G,j,$,K){const ie=s.attributes,ee=j.attributes;let X=0;const re=$.getAttributes();for(const se in re)if(re[se].location>=0){const Se=ie[se];let Ce=ee[se];if(Ce===void 0&&(se==="instanceMatrix"&&G.instanceMatrix&&(Ce=G.instanceMatrix),se==="instanceColor"&&G.instanceColor&&(Ce=G.instanceColor)),Se===void 0||Se.attribute!==Ce||Ce&&Se.data!==Ce.data)return!0;X++}return s.attributesNum!==X||s.index!==K}function b(G,j,$,K){const ie={},ee=j.attributes;let X=0;const re=$.getAttributes();for(const se in re)if(re[se].location>=0){let Se=ee[se];Se===void 0&&(se==="instanceMatrix"&&G.instanceMatrix&&(Se=G.instanceMatrix),se==="instanceColor"&&G.instanceColor&&(Se=G.instanceColor));const Ce={};Ce.attribute=Se,Se&&Se.data&&(Ce.data=Se.data),ie[se]=Ce,X++}s.attributes=ie,s.attributesNum=X,s.index=K}function w(){const G=s.newAttributes;for(let j=0,$=G.length;j<$;j++)G[j]=0}function E(G){M(G,0)}function M(G,j){const $=s.newAttributes,K=s.enabledAttributes,ie=s.attributeDivisors;$[G]=1,K[G]===0&&(i.enableVertexAttribArray(G),K[G]=1),ie[G]!==j&&(i.vertexAttribDivisor(G,j),ie[G]=j)}function P(){const G=s.newAttributes,j=s.enabledAttributes;for(let $=0,K=j.length;$<K;$++)j[$]!==G[$]&&(i.disableVertexAttribArray($),j[$]=0)}function D(G,j,$,K,ie,ee,X){X===!0?i.vertexAttribIPointer(G,j,$,ie,ee):i.vertexAttribPointer(G,j,$,K,ie,ee)}function B(G,j,$,K){w();const ie=K.attributes,ee=$.getAttributes(),X=j.defaultAttributeValues;for(const re in ee){const se=ee[re];if(se.location>=0){let Ae=ie[re];if(Ae===void 0&&(re==="instanceMatrix"&&G.instanceMatrix&&(Ae=G.instanceMatrix),re==="instanceColor"&&G.instanceColor&&(Ae=G.instanceColor)),Ae!==void 0){const Se=Ae.normalized,Ce=Ae.itemSize,Ye=e.get(Ae);if(Ye===void 0)continue;const it=Ye.buffer,pt=Ye.type,yt=Ye.bytesPerElement,Oe=pt===i.INT||pt===i.UNSIGNED_INT||Ae.gpuType===rs;if(Ae.isInterleavedBufferAttribute){const Xe=Ae.data,Tt=Xe.stride,Ft=Ae.offset;if(Xe.isInstancedInterleavedBuffer){for(let Pt=0;Pt<se.locationSize;Pt++)M(se.location+Pt,Xe.meshPerAttribute);G.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Xe.meshPerAttribute*Xe.count)}else for(let Pt=0;Pt<se.locationSize;Pt++)E(se.location+Pt);i.bindBuffer(i.ARRAY_BUFFER,it);for(let Pt=0;Pt<se.locationSize;Pt++)D(se.location+Pt,Ce/se.locationSize,pt,Se,Tt*yt,(Ft+Ce/se.locationSize*Pt)*yt,Oe)}else{if(Ae.isInstancedBufferAttribute){for(let Xe=0;Xe<se.locationSize;Xe++)M(se.location+Xe,Ae.meshPerAttribute);G.isInstancedMesh!==!0&&K._maxInstanceCount===void 0&&(K._maxInstanceCount=Ae.meshPerAttribute*Ae.count)}else for(let Xe=0;Xe<se.locationSize;Xe++)E(se.location+Xe);i.bindBuffer(i.ARRAY_BUFFER,it);for(let Xe=0;Xe<se.locationSize;Xe++)D(se.location+Xe,Ce/se.locationSize,pt,Se,Ce*yt,Ce/se.locationSize*Xe*yt,Oe)}}else if(X!==void 0){const Se=X[re];if(Se!==void 0)switch(Se.length){case 2:i.vertexAttrib2fv(se.location,Se);break;case 3:i.vertexAttrib3fv(se.location,Se);break;case 4:i.vertexAttrib4fv(se.location,Se);break;default:i.vertexAttrib1fv(se.location,Se)}}}}P()}function U(){q();for(const G in n){const j=n[G];for(const $ in j){const K=j[$];for(const ie in K)c(K[ie].object),delete K[ie];delete j[$]}delete n[G]}}function O(G){if(n[G.id]===void 0)return;const j=n[G.id];for(const $ in j){const K=j[$];for(const ie in K)c(K[ie].object),delete K[ie];delete j[$]}delete n[G.id]}function z(G){for(const j in n){const $=n[j];if($[G.id]===void 0)continue;const K=$[G.id];for(const ie in K)c(K[ie].object),delete K[ie];delete $[G.id]}}function q(){F(),a=!0,s!==r&&(s=r,u(s.object))}function F(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:q,resetDefaultState:F,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:z,initAttributes:w,enableAttribute:E,disableUnusedAttributes:P}}function sW(i,e,t){let n;function r(u){n=u}function s(u,c){i.drawArrays(n,u,c),t.update(c,n,1)}function a(u,c,p){p!==0&&(i.drawArraysInstanced(n,u,c,p),t.update(c,n,p))}function o(u,c,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,c,0,p);let _=0;for(let b=0;b<p;b++)_+=c[b];t.update(_,n,1)}function l(u,c,p,y){if(p===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<u.length;b++)a(u[b],c[b],y[b]);else{_.multiDrawArraysInstancedWEBGL(n,u,0,c,0,y,0,p);let b=0;for(let w=0;w<p;w++)b+=c[w]*y[w];t.update(b,n,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function aW(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(z){return!(z!==nr&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(z){const q=z===$r&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==Ar&&n.convert(z)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==or&&!q)}function l(z){if(z==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const p=t.logarithmicDepthBuffer===!0,y=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=i.getParameter(i.MAX_TEXTURE_SIZE),E=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),P=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),D=i.getParameter(i.MAX_VARYING_VECTORS),B=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),U=b>0,O=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:p,reversedDepthBuffer:y,maxTextures:_,maxVertexTextures:b,maxTextureSize:w,maxCubemapSize:E,maxAttributes:M,maxVertexUniforms:P,maxVaryings:D,maxFragmentUniforms:B,vertexTextures:U,maxSamples:O}}function oW(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new I0,o=new Vn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,y){const _=p.length!==0||y||n!==0||r;return r=y,n=p.length,_},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,y){t=c(p,y,0)},this.setState=function(p,y,_){const b=p.clippingPlanes,w=p.clipIntersection,E=p.clipShadows,M=i.get(p);if(!r||b===null||b.length===0||s&&!E)s?c(null):u();else{const P=s?0:n,D=P*4;let B=M.clippingState||null;l.value=B,B=c(b,y,D,_);for(let U=0;U!==D;++U)B[U]=t[U];M.clippingState=B,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=P}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(p,y,_,b){const w=p!==null?p.length:0;let E=null;if(w!==0){if(E=l.value,b!==!0||E===null){const M=_+w*4,P=y.matrixWorldInverse;o.getNormalMatrix(P),(E===null||E.length<M)&&(E=new Float32Array(M));for(let D=0,B=_;D!==w;++D,B+=4)a.copy(p[D]).applyMatrix4(P,o),a.normal.toArray(E,B),E[B+3]=a.constant}l.value=E,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,E}}function lW(i){let e=new WeakMap;function t(a,o){return o===Fu?a.mapping=Eo:o===Vu&&(a.mapping=Zo),a}function n(a){if(a&&a.isTexture){const o=a.mapping;if(o===Fu||o===Vu)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new ux(l.height);return u.fromEquirectangularTexture(i,a),e.set(a,u),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const a5=4,TM=[.125,.215,.35,.446,.526,.582],ic=20,zg=new Ml,MM=new Dt;let Gg=null,qg=0,kg=0,Hg=!1;const ec=(1+Math.sqrt(5))/2,I4=1/ec,EM=[new te(-ec,I4,0),new te(ec,I4,0),new te(-I4,0,ec),new te(I4,0,ec),new te(0,ec,-I4),new te(0,ec,I4),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)],uW=new te;let vv=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:a=256,position:o=uW}=s;Gg=this._renderer.getRenderTarget(),qg=this._renderer.getActiveCubeFace(),kg=this._renderer.getActiveMipmapLevel(),Hg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,r,l,o),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=CM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=RM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Gg,qg,kg),this._renderer.xr.enabled=Hg,e.scissorTest=!1,S9(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Eo||e.mapping===Zo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Gg=this._renderer.getRenderTarget(),qg=this._renderer.getActiveCubeFace(),kg=this._renderer.getActiveMipmapLevel(),Hg=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Qi,minFilter:Qi,generateMipmaps:!1,type:$r,format:nr,colorSpace:Ll,depthBuffer:!1},r=wM(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=wM(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=cW(s)),this._blurMaterial=hW(s,e,t)}return r}_compileMaterial(e){const t=new Jn(this._lodPlanes[0],e);this._renderer.compile(t,zg)}_sceneToCubeUV(e,t,n,r,s){const l=new ar(90,1,t,n),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],p=this._renderer,y=p.autoClear,_=p.toneMapping;p.getClearColor(MM),p.toneMapping=oa,p.autoClear=!1,p.state.buffers.depth.getReversed()&&(p.setRenderTarget(r),p.clearDepth(),p.setRenderTarget(null));const w=new Os({name:"PMREM.Background",side:Fi,depthWrite:!1,depthTest:!1}),E=new Jn(new ql,w);let M=!1;const P=e.background;P?P.isColor&&(w.color.copy(P),e.background=null,M=!0):(w.color.copy(MM),M=!0);for(let D=0;D<6;D++){const B=D%3;B===0?(l.up.set(0,u[D],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+c[D],s.y,s.z)):B===1?(l.up.set(0,0,u[D]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+c[D],s.z)):(l.up.set(0,u[D],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+c[D]));const U=this._cubeSize;S9(r,B*U,D>2?U:0,U,U),p.setRenderTarget(r),M&&p.render(E,l),p.render(e,l)}E.geometry.dispose(),E.material.dispose(),p.toneMapping=_,p.autoClear=y,e.background=P}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Eo||e.mapping===Zo;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=CM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=RM());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Jn(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;S9(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(a,zg)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=EM[(r-s-1)%EM.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,p=new Jn(this._lodPlanes[r],u),y=u.uniforms,_=this._sizeLods[n]-1,b=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*ic-1),w=s/b,E=isFinite(s)?1+Math.floor(c*w):ic;E>ic&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${ic}`);const M=[];let P=0;for(let z=0;z<ic;++z){const q=z/w,F=Math.exp(-q*q/2);M.push(F),z===0?P+=F:z<E&&(P+=2*F)}for(let z=0;z<M.length;z++)M[z]=M[z]/P;y.envMap.value=e.texture,y.samples.value=E,y.weights.value=M,y.latitudinal.value=a==="latitudinal",o&&(y.poleAxis.value=o);const{_lodMax:D}=this;y.dTheta.value=b,y.mipInt.value=D-n;const B=this._sizeLods[r],U=3*B*(r>D-a5?r-D+a5:0),O=4*(this._cubeSize-B);S9(t,U,O,3*B,2*B),l.setRenderTarget(t),l.render(p,zg)}};function cW(i){const e=[],t=[],n=[];let r=i;const s=i-a5+1+TM.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>i-a5?l=TM[a-i+a5-1]:a===0&&(l=0),n.push(l);const u=1/(o-2),c=-u,p=1+u,y=[c,c,p,c,p,p,c,c,p,p,c,p],_=6,b=6,w=3,E=2,M=1,P=new Float32Array(w*b*_),D=new Float32Array(E*b*_),B=new Float32Array(M*b*_);for(let O=0;O<_;O++){const z=O%3*2/3-1,q=O>2?0:-1,F=[z,q,0,z+2/3,q,0,z+2/3,q+1,0,z,q,0,z+2/3,q+1,0,z,q+1,0];P.set(F,w*b*O),D.set(y,E*b*O);const G=[O,O,O,O,O,O];B.set(G,M*b*O)}const U=new Tn;U.setAttribute("position",new li(P,w)),U.setAttribute("uv",new li(D,E)),U.setAttribute("faceIndex",new li(B,M)),e.push(U),r>a5&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function wM(i,e,t){const n=new Il(i,e,t);return n.texture.mapping=D1,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function S9(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function hW(i,e,t){const n=new Float32Array(ic),r=new te(0,1,0);return new Na({name:"SphericalGaussianBlur",defines:{n:ic,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Yx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function RM(){return new Na({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Yx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function CM(){return new Na({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Yx(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function Yx(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fW(i){let e=new WeakMap,t=null;function n(o){if(o&&o.isTexture){const l=o.mapping,u=l===Fu||l===Vu,c=l===Eo||l===Zo;if(u||c){let p=e.get(o);const y=p!==void 0?p.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==y)return t===null&&(t=new vv(i)),p=u?t.fromEquirectangular(o,p):t.fromCubemap(o,p),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),p.texture;if(p!==void 0)return p.texture;{const _=o.image;return u&&_&&_.height>0||c&&_&&r(_)?(t===null&&(t=new vv(i)),p=u?t.fromEquirectangular(o):t.fromCubemap(o),p.texture.pmremVersion=o.pmremVersion,e.set(o,p),o.addEventListener("dispose",s),p.texture):null}}}return o}function r(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:a}}function dW(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&la("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function AW(i,e,t,n){const r={},s=new WeakMap;function a(p){const y=p.target;y.index!==null&&e.remove(y.index);for(const b in y.attributes)e.remove(y.attributes[b]);y.removeEventListener("dispose",a),delete r[y.id];const _=s.get(y);_&&(e.remove(_),s.delete(y)),n.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function o(p,y){return r[y.id]===!0||(y.addEventListener("dispose",a),r[y.id]=!0,t.memory.geometries++),y}function l(p){const y=p.attributes;for(const _ in y)e.update(y[_],i.ARRAY_BUFFER)}function u(p){const y=[],_=p.index,b=p.attributes.position;let w=0;if(_!==null){const P=_.array;w=_.version;for(let D=0,B=P.length;D<B;D+=3){const U=P[D+0],O=P[D+1],z=P[D+2];y.push(U,O,O,z,z,U)}}else if(b!==void 0){const P=b.array;w=b.version;for(let D=0,B=P.length/3-1;D<B;D+=3){const U=D+0,O=D+1,z=D+2;y.push(U,O,O,z,z,U)}}else return;const E=new(sx(y)?mp:pp)(y,1);E.version=w;const M=s.get(p);M&&e.remove(M),s.set(p,E)}function c(p){const y=s.get(p);if(y){const _=p.index;_!==null&&y.version<_.version&&u(p)}else u(p);return s.get(p)}return{get:o,update:l,getWireframeAttribute:c}}function pW(i,e,t){let n;function r(y){n=y}let s,a;function o(y){s=y.type,a=y.bytesPerElement}function l(y,_){i.drawElements(n,_,s,y*a),t.update(_,n,1)}function u(y,_,b){b!==0&&(i.drawElementsInstanced(n,_,s,y*a,b),t.update(_,n,b))}function c(y,_,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,s,y,0,b);let E=0;for(let M=0;M<b;M++)E+=_[M];t.update(E,n,1)}function p(y,_,b,w){if(b===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let M=0;M<y.length;M++)u(y[M]/a,_[M],w[M]);else{E.multiDrawElementsInstancedWEBGL(n,_,0,s,y,0,w,0,b);let M=0;for(let P=0;P<b;P++)M+=_[P]*w[P];t.update(M,n,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=p}function mW(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,a,o){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=o*(s/3);break;case i.LINES:t.lines+=o*(s/2);break;case i.LINE_STRIP:t.lines+=o*(s-1);break;case i.LINE_LOOP:t.lines+=o*s;break;case i.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function gW(i,e,t){const n=new WeakMap,r=new an;function s(a,o,l){const u=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,p=c!==void 0?c.length:0;let y=n.get(o);if(y===void 0||y.count!==p){let F=function(){z.dispose(),n.delete(o),o.removeEventListener("dispose",F)};y!==void 0&&y.texture.dispose();const _=o.morphAttributes.position!==void 0,b=o.morphAttributes.normal!==void 0,w=o.morphAttributes.color!==void 0,E=o.morphAttributes.position||[],M=o.morphAttributes.normal||[],P=o.morphAttributes.color||[];let D=0;_===!0&&(D=1),b===!0&&(D=2),w===!0&&(D=3);let B=o.attributes.position.count*D,U=1;B>e.maxTextureSize&&(U=Math.ceil(B/e.maxTextureSize),B=e.maxTextureSize);const O=new Float32Array(B*U*4*p),z=new r7(O,B,U,p);z.type=or,z.needsUpdate=!0;const q=D*4;for(let G=0;G<p;G++){const j=E[G],$=M[G],K=P[G],ie=B*U*4*G;for(let ee=0;ee<j.count;ee++){const X=ee*q;_===!0&&(r.fromBufferAttribute(j,ee),O[ie+X+0]=r.x,O[ie+X+1]=r.y,O[ie+X+2]=r.z,O[ie+X+3]=0),b===!0&&(r.fromBufferAttribute($,ee),O[ie+X+4]=r.x,O[ie+X+5]=r.y,O[ie+X+6]=r.z,O[ie+X+7]=0),w===!0&&(r.fromBufferAttribute(K,ee),O[ie+X+8]=r.x,O[ie+X+9]=r.y,O[ie+X+10]=r.z,O[ie+X+11]=K.itemSize===4?r.w:1)}}y={count:p,texture:z,size:new He(B,U)},n.set(o,y),o.addEventListener("dispose",F)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",a.morphTexture,t);else{let _=0;for(let w=0;w<u.length;w++)_+=u[w];const b=o.morphTargetsRelative?1:1-_;l.getUniforms().setValue(i,"morphTargetBaseInfluence",b),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",y.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",y.size)}return{update:s}}function yW(i,e,t,n){let r=new WeakMap;function s(l){const u=n.render.frame,c=l.geometry,p=e.get(l,c);if(r.get(p)!==u&&(e.update(p),r.set(p,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const y=l.skeleton;r.get(y)!==u&&(y.update(),r.set(y,u))}return p}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const FN=new mr,NM=new Ka(1,1),VN=new r7,zN=new Ap,GN=new Wu,PM=[],DM=[],BM=new Float32Array(16),LM=new Float32Array(9),IM=new Float32Array(4);function i8(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=PM[r];if(s===void 0&&(s=new Float32Array(r),PM[r]=s),e!==0){n.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,i[a].toArray(s,o)}return s}function as(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function os(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Ip(i,e){let t=DM[e];t===void 0&&(t=new Int32Array(e),DM[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function vW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function _W(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2fv(this.addr,e),os(t,e)}}function xW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(as(t,e))return;i.uniform3fv(this.addr,e),os(t,e)}}function bW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4fv(this.addr,e),os(t,e)}}function SW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),os(t,e)}else{if(as(t,n))return;IM.set(n),i.uniformMatrix2fv(this.addr,!1,IM),os(t,n)}}function TW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),os(t,e)}else{if(as(t,n))return;LM.set(n),i.uniformMatrix3fv(this.addr,!1,LM),os(t,n)}}function MW(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(as(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),os(t,e)}else{if(as(t,n))return;BM.set(n),i.uniformMatrix4fv(this.addr,!1,BM),os(t,n)}}function EW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function wW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2iv(this.addr,e),os(t,e)}}function RW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(as(t,e))return;i.uniform3iv(this.addr,e),os(t,e)}}function CW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4iv(this.addr,e),os(t,e)}}function NW(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function PW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(as(t,e))return;i.uniform2uiv(this.addr,e),os(t,e)}}function DW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(as(t,e))return;i.uniform3uiv(this.addr,e),os(t,e)}}function BW(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(as(t,e))return;i.uniform4uiv(this.addr,e),os(t,e)}}function LW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(NM.compareFunction=i7,s=NM):s=FN,t.setTexture2D(e||s,r)}function IW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||zN,r)}function UW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||GN,r)}function OW(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||VN,r)}function FW(i){switch(i){case 5126:return vW;case 35664:return _W;case 35665:return xW;case 35666:return bW;case 35674:return SW;case 35675:return TW;case 35676:return MW;case 5124:case 35670:return EW;case 35667:case 35671:return wW;case 35668:case 35672:return RW;case 35669:case 35673:return CW;case 5125:return NW;case 36294:return PW;case 36295:return DW;case 36296:return BW;case 35678:case 36198:case 36298:case 36306:case 35682:return LW;case 35679:case 36299:case 36307:return IW;case 35680:case 36300:case 36308:case 36293:return UW;case 36289:case 36303:case 36311:case 36292:return OW}}function VW(i,e){i.uniform1fv(this.addr,e)}function zW(i,e){const t=i8(e,this.size,2);i.uniform2fv(this.addr,t)}function GW(i,e){const t=i8(e,this.size,3);i.uniform3fv(this.addr,t)}function qW(i,e){const t=i8(e,this.size,4);i.uniform4fv(this.addr,t)}function kW(i,e){const t=i8(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function HW(i,e){const t=i8(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function WW(i,e){const t=i8(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function jW(i,e){i.uniform1iv(this.addr,e)}function XW(i,e){i.uniform2iv(this.addr,e)}function YW(i,e){i.uniform3iv(this.addr,e)}function QW(i,e){i.uniform4iv(this.addr,e)}function $W(i,e){i.uniform1uiv(this.addr,e)}function KW(i,e){i.uniform2uiv(this.addr,e)}function ZW(i,e){i.uniform3uiv(this.addr,e)}function JW(i,e){i.uniform4uiv(this.addr,e)}function ej(i,e,t){const n=this.cache,r=e.length,s=Ip(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||FN,s[a])}function tj(i,e,t){const n=this.cache,r=e.length,s=Ip(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||zN,s[a])}function nj(i,e,t){const n=this.cache,r=e.length,s=Ip(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||GN,s[a])}function ij(i,e,t){const n=this.cache,r=e.length,s=Ip(t,r);as(n,s)||(i.uniform1iv(this.addr,s),os(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||VN,s[a])}function rj(i){switch(i){case 5126:return VW;case 35664:return zW;case 35665:return GW;case 35666:return qW;case 35674:return kW;case 35675:return HW;case 35676:return WW;case 5124:case 35670:return jW;case 35667:case 35671:return XW;case 35668:case 35672:return YW;case 35669:case 35673:return QW;case 5125:return $W;case 36294:return KW;case 36295:return ZW;case 36296:return JW;case 35678:case 36198:case 36298:case 36306:case 35682:return ej;case 35679:case 36299:case 36307:return tj;case 35680:case 36300:case 36308:case 36293:return nj;case 36289:case 36303:case 36311:case 36292:return ij}}class sj{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=FW(t.type)}}class aj{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=rj(t.type)}}class oj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],n)}}}const Wg=/(\w+)(\])?(\[|\.)?/g;function UM(i,e){i.seq.push(e),i.map[e.id]=e}function lj(i,e,t){const n=i.name,r=n.length;for(Wg.lastIndex=0;;){const s=Wg.exec(n),a=Wg.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){UM(t,u===void 0?new sj(o,i,e):new aj(o,i,e));break}else{let p=t.map[o];p===void 0&&(p=new oj(o),UM(t,p)),t=p}}}class _d{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);lj(s,a,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=n[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function OM(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const uj=37297;let cj=0;function hj(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;n.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return n.join(`
`)}const FM=new Vn;function fj(i){gn._getMatrix(FM,gn.workingColorSpace,i);const e=`mat3( ${FM.elements.map(t=>t.toFixed(4))} )`;switch(gn.getTransfer(i)){case Kc:return[e,"LinearTransferOETF"];case Ht:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function VM(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=(i.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const o=parseInt(a[1]);return t.toUpperCase()+`

`+s+`

`+hj(i.getShaderSource(e),o)}else return s}function dj(i,e){const t=fj(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Aj(i,e){let t;switch(e){case K_:t="Linear";break;case Z_:t="Reinhard";break;case J_:t="Cineon";break;case rp:t="ACESFilmic";break;case ex:t="AgX";break;case tx:t="Neutral";break;case CC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const T9=new te;function pj(){gn.getLuminanceCoefficients(T9);const i=T9.x.toFixed(4),e=T9.y.toFixed(4),t=T9.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function mj(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Hh).join(`
`)}function gj(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function yj(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let o=1;s.type===i.FLOAT_MAT2&&(o=2),s.type===i.FLOAT_MAT3&&(o=3),s.type===i.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:o}}return t}function Hh(i){return i!==""}function zM(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function GM(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const vj=/^[ \t]*#include +<([\w\d./]+)>/gm;function _v(i){return i.replace(vj,xj)}const _j=new Map;function xj(i,e){let t=Xn[e];if(t===void 0){const n=_j.get(e);if(n!==void 0)t=Xn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return _v(t)}const bj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qM(i){return i.replace(bj,Sj)}function Sj(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function kM(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Tj(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Q6?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===e6?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===xa&&(e="SHADOWMAP_TYPE_VSM"),e}function Mj(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Eo:case Zo:e="ENVMAP_TYPE_CUBE";break;case D1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Ej(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Zo:e="ENVMAP_MODE_REFRACTION";break}return e}function wj(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case J5:e="ENVMAP_BLENDING_MULTIPLY";break;case Q_:e="ENVMAP_BLENDING_MIX";break;case $_:e="ENVMAP_BLENDING_ADD";break}return e}function Rj(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function Cj(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Tj(t),u=Mj(t),c=Ej(t),p=wj(t),y=Rj(t),_=mj(t),b=gj(s),w=r.createProgram();let E,M,P=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Hh).join(`
`),E.length>0&&(E+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Hh).join(`
`),M.length>0&&(M+=`
`)):(E=[kM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Hh).join(`
`),M=[kM(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+p:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==oa?"#define TONE_MAPPING":"",t.toneMapping!==oa?Xn.tonemapping_pars_fragment:"",t.toneMapping!==oa?Aj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Xn.colorspace_pars_fragment,dj("linearToOutputTexel",t.outputColorSpace),pj(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Hh).join(`
`)),a=_v(a),a=zM(a,t),a=GM(a,t),o=_v(o),o=zM(o,t),o=GM(o,t),a=qM(a),o=qM(o),t.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,E=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,M=["#define varying in",t.glslVersion===hv?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===hv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const D=P+E+a,B=P+M+o,U=OM(r,r.VERTEX_SHADER,D),O=OM(r,r.FRAGMENT_SHADER,B);r.attachShader(w,U),r.attachShader(w,O),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function z(j){if(i.debug.checkShaderErrors){const $=r.getProgramInfoLog(w)||"",K=r.getShaderInfoLog(U)||"",ie=r.getShaderInfoLog(O)||"",ee=$.trim(),X=K.trim(),re=ie.trim();let se=!0,Ae=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(se=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,w,U,O);else{const Se=VM(r,U,"vertex"),Ce=VM(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+ee+`
`+Se+`
`+Ce)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(X===""||re==="")&&(Ae=!1);Ae&&(j.diagnostics={runnable:se,programLog:ee,vertexShader:{log:X,prefix:E},fragmentShader:{log:re,prefix:M}})}r.deleteShader(U),r.deleteShader(O),q=new _d(r,w),F=yj(r,w)}let q;this.getUniforms=function(){return q===void 0&&z(this),q};let F;this.getAttributes=function(){return F===void 0&&z(this),F};let G=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return G===!1&&(G=r.getProgramParameter(w,uj)),G},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=cj++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=U,this.fragmentShader=O,this}let Nj=0;class Pj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new Dj(e),t.set(e,n)),n}}class Dj{constructor(e){this.id=Nj++,this.code=e,this.usedTimes=0}}function Bj(i,e,t,n,r,s,a){const o=new I5,l=new Pj,u=new Set,c=[],p=r.logarithmicDepthBuffer,y=r.vertexTextures;let _=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(F){return u.add(F),F===0?"uv":`uv${F}`}function E(F,G,j,$,K){const ie=$.fog,ee=K.geometry,X=F.isMeshStandardMaterial?$.environment:null,re=(F.isMeshStandardMaterial?t:e).get(F.envMap||X),se=re&&re.mapping===D1?re.image.height:null,Ae=b[F.type];F.precision!==null&&(_=r.getMaxPrecision(F.precision),_!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",_,"instead."));const Se=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Ce=Se!==void 0?Se.length:0;let Ye=0;ee.morphAttributes.position!==void 0&&(Ye=1),ee.morphAttributes.normal!==void 0&&(Ye=2),ee.morphAttributes.color!==void 0&&(Ye=3);let it,pt,yt,Oe;if(Ae){const Hn=ba[Ae];it=Hn.vertexShader,pt=Hn.fragmentShader}else it=F.vertexShader,pt=F.fragmentShader,l.update(F),yt=l.getVertexShaderID(F),Oe=l.getFragmentShaderID(F);const Xe=i.getRenderTarget(),Tt=i.state.buffers.depth.getReversed(),Ft=K.isInstancedMesh===!0,Pt=K.isBatchedMesh===!0,ln=!!F.map,Dn=!!F.matcap,pe=!!re,Je=!!F.aoMap,et=!!F.lightMap,tt=!!F.bumpMap,ke=!!F.normalMap,xt=!!F.displacementMap,ft=!!F.emissiveMap,wt=!!F.metalnessMap,cn=!!F.roughnessMap,Sn=F.anisotropy>0,de=F.clearcoat>0,J=F.dispersion>0,Le=F.iridescence>0,We=F.sheen>0,ht=F.transmission>0,Qe=Sn&&!!F.anisotropyMap,nn=de&&!!F.clearcoatMap,Ct=de&&!!F.clearcoatNormalMap,Zt=de&&!!F.clearcoatRoughnessMap,en=Le&&!!F.iridescenceMap,At=Le&&!!F.iridescenceThicknessMap,Lt=We&&!!F.sheenColorMap,dn=We&&!!F.sheenRoughnessMap,ge=!!F.specularMap,Ue=!!F.specularColorMap,Mt=!!F.specularIntensityMap,le=ht&&!!F.transmissionMap,ut=ht&&!!F.thicknessMap,bt=!!F.gradientMap,Gt=!!F.alphaMap,vt=F.alphaTest>0,at=!!F.alphaHash,qt=!!F.extensions;let hn=oa;F.toneMapped&&(Xe===null||Xe.isXRRenderTarget===!0)&&(hn=i.toneMapping);const ei={shaderID:Ae,shaderType:F.type,shaderName:F.name,vertexShader:it,fragmentShader:pt,defines:F.defines,customVertexShaderID:yt,customFragmentShaderID:Oe,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:_,batching:Pt,batchingColor:Pt&&K._colorsTexture!==null,instancing:Ft,instancingColor:Ft&&K.instanceColor!==null,instancingMorph:Ft&&K.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:Xe===null?i.outputColorSpace:Xe.isXRRenderTarget===!0?Xe.texture.colorSpace:Ll,alphaToCoverage:!!F.alphaToCoverage,map:ln,matcap:Dn,envMap:pe,envMapMode:pe&&re.mapping,envMapCubeUVHeight:se,aoMap:Je,lightMap:et,bumpMap:tt,normalMap:ke,displacementMap:y&&xt,emissiveMap:ft,normalMapObjectSpace:ke&&F.normalMapType===ix,normalMapTangentSpace:ke&&F.normalMapType===Bl,metalnessMap:wt,roughnessMap:cn,anisotropy:Sn,anisotropyMap:Qe,clearcoat:de,clearcoatMap:nn,clearcoatNormalMap:Ct,clearcoatRoughnessMap:Zt,dispersion:J,iridescence:Le,iridescenceMap:en,iridescenceThicknessMap:At,sheen:We,sheenColorMap:Lt,sheenRoughnessMap:dn,specularMap:ge,specularColorMap:Ue,specularIntensityMap:Mt,transmission:ht,transmissionMap:le,thicknessMap:ut,gradientMap:bt,opaque:F.transparent===!1&&F.blending===aa&&F.alphaToCoverage===!1,alphaMap:Gt,alphaTest:vt,alphaHash:at,combine:F.combine,mapUv:ln&&w(F.map.channel),aoMapUv:Je&&w(F.aoMap.channel),lightMapUv:et&&w(F.lightMap.channel),bumpMapUv:tt&&w(F.bumpMap.channel),normalMapUv:ke&&w(F.normalMap.channel),displacementMapUv:xt&&w(F.displacementMap.channel),emissiveMapUv:ft&&w(F.emissiveMap.channel),metalnessMapUv:wt&&w(F.metalnessMap.channel),roughnessMapUv:cn&&w(F.roughnessMap.channel),anisotropyMapUv:Qe&&w(F.anisotropyMap.channel),clearcoatMapUv:nn&&w(F.clearcoatMap.channel),clearcoatNormalMapUv:Ct&&w(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Zt&&w(F.clearcoatRoughnessMap.channel),iridescenceMapUv:en&&w(F.iridescenceMap.channel),iridescenceThicknessMapUv:At&&w(F.iridescenceThicknessMap.channel),sheenColorMapUv:Lt&&w(F.sheenColorMap.channel),sheenRoughnessMapUv:dn&&w(F.sheenRoughnessMap.channel),specularMapUv:ge&&w(F.specularMap.channel),specularColorMapUv:Ue&&w(F.specularColorMap.channel),specularIntensityMapUv:Mt&&w(F.specularIntensityMap.channel),transmissionMapUv:le&&w(F.transmissionMap.channel),thicknessMapUv:ut&&w(F.thicknessMap.channel),alphaMapUv:Gt&&w(F.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(ke||Sn),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:K.isPoints===!0&&!!ee.attributes.uv&&(ln||Gt),fog:!!ie,useFog:F.fog===!0,fogExp2:!!ie&&ie.isFogExp2,flatShading:F.flatShading===!0&&F.wireframe===!1,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:p,reversedDepthBuffer:Tt,skinning:K.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Ce,morphTextureStride:Ye,numDirLights:G.directional.length,numPointLights:G.point.length,numSpotLights:G.spot.length,numSpotLightMaps:G.spotLightMap.length,numRectAreaLights:G.rectArea.length,numHemiLights:G.hemi.length,numDirLightShadows:G.directionalShadowMap.length,numPointLightShadows:G.pointShadowMap.length,numSpotLightShadows:G.spotShadowMap.length,numSpotLightShadowsWithMaps:G.numSpotLightShadowsWithMaps,numLightProbes:G.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:F.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:hn,decodeVideoTexture:ln&&F.map.isVideoTexture===!0&&gn.getTransfer(F.map.colorSpace)===Ht,decodeVideoTextureEmissive:ft&&F.emissiveMap.isVideoTexture===!0&&gn.getTransfer(F.emissiveMap.colorSpace)===Ht,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Ur,flipSided:F.side===Fi,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionClipCullDistance:qt&&F.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qt&&F.extensions.multiDraw===!0||Pt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return ei.vertexUv1s=u.has(1),ei.vertexUv2s=u.has(2),ei.vertexUv3s=u.has(3),u.clear(),ei}function M(F){const G=[];if(F.shaderID?G.push(F.shaderID):(G.push(F.customVertexShaderID),G.push(F.customFragmentShaderID)),F.defines!==void 0)for(const j in F.defines)G.push(j),G.push(F.defines[j]);return F.isRawShaderMaterial===!1&&(P(G,F),D(G,F),G.push(i.outputColorSpace)),G.push(F.customProgramCacheKey),G.join()}function P(F,G){F.push(G.precision),F.push(G.outputColorSpace),F.push(G.envMapMode),F.push(G.envMapCubeUVHeight),F.push(G.mapUv),F.push(G.alphaMapUv),F.push(G.lightMapUv),F.push(G.aoMapUv),F.push(G.bumpMapUv),F.push(G.normalMapUv),F.push(G.displacementMapUv),F.push(G.emissiveMapUv),F.push(G.metalnessMapUv),F.push(G.roughnessMapUv),F.push(G.anisotropyMapUv),F.push(G.clearcoatMapUv),F.push(G.clearcoatNormalMapUv),F.push(G.clearcoatRoughnessMapUv),F.push(G.iridescenceMapUv),F.push(G.iridescenceThicknessMapUv),F.push(G.sheenColorMapUv),F.push(G.sheenRoughnessMapUv),F.push(G.specularMapUv),F.push(G.specularColorMapUv),F.push(G.specularIntensityMapUv),F.push(G.transmissionMapUv),F.push(G.thicknessMapUv),F.push(G.combine),F.push(G.fogExp2),F.push(G.sizeAttenuation),F.push(G.morphTargetsCount),F.push(G.morphAttributeCount),F.push(G.numDirLights),F.push(G.numPointLights),F.push(G.numSpotLights),F.push(G.numSpotLightMaps),F.push(G.numHemiLights),F.push(G.numRectAreaLights),F.push(G.numDirLightShadows),F.push(G.numPointLightShadows),F.push(G.numSpotLightShadows),F.push(G.numSpotLightShadowsWithMaps),F.push(G.numLightProbes),F.push(G.shadowMapType),F.push(G.toneMapping),F.push(G.numClippingPlanes),F.push(G.numClipIntersection),F.push(G.depthPacking)}function D(F,G){o.disableAll(),G.supportsVertexTextures&&o.enable(0),G.instancing&&o.enable(1),G.instancingColor&&o.enable(2),G.instancingMorph&&o.enable(3),G.matcap&&o.enable(4),G.envMap&&o.enable(5),G.normalMapObjectSpace&&o.enable(6),G.normalMapTangentSpace&&o.enable(7),G.clearcoat&&o.enable(8),G.iridescence&&o.enable(9),G.alphaTest&&o.enable(10),G.vertexColors&&o.enable(11),G.vertexAlphas&&o.enable(12),G.vertexUv1s&&o.enable(13),G.vertexUv2s&&o.enable(14),G.vertexUv3s&&o.enable(15),G.vertexTangents&&o.enable(16),G.anisotropy&&o.enable(17),G.alphaHash&&o.enable(18),G.batching&&o.enable(19),G.dispersion&&o.enable(20),G.batchingColor&&o.enable(21),G.gradientMap&&o.enable(22),F.push(o.mask),o.disableAll(),G.fog&&o.enable(0),G.useFog&&o.enable(1),G.flatShading&&o.enable(2),G.logarithmicDepthBuffer&&o.enable(3),G.reversedDepthBuffer&&o.enable(4),G.skinning&&o.enable(5),G.morphTargets&&o.enable(6),G.morphNormals&&o.enable(7),G.morphColors&&o.enable(8),G.premultipliedAlpha&&o.enable(9),G.shadowMapEnabled&&o.enable(10),G.doubleSided&&o.enable(11),G.flipSided&&o.enable(12),G.useDepthPacking&&o.enable(13),G.dithering&&o.enable(14),G.transmission&&o.enable(15),G.sheen&&o.enable(16),G.opaque&&o.enable(17),G.pointsUvs&&o.enable(18),G.decodeVideoTexture&&o.enable(19),G.decodeVideoTextureEmissive&&o.enable(20),G.alphaToCoverage&&o.enable(21),F.push(o.mask)}function B(F){const G=b[F.type];let j;if(G){const $=ba[G];j=gp.clone($.uniforms)}else j=F.uniforms;return j}function U(F,G){let j;for(let $=0,K=c.length;$<K;$++){const ie=c[$];if(ie.cacheKey===G){j=ie,++j.usedTimes;break}}return j===void 0&&(j=new Cj(i,G,F,s),c.push(j)),j}function O(F){if(--F.usedTimes===0){const G=c.indexOf(F);c[G]=c[c.length-1],c.pop(),F.destroy()}}function z(F){l.remove(F)}function q(){l.dispose()}return{getParameters:E,getProgramCacheKey:M,getUniforms:B,acquireProgram:U,releaseProgram:O,releaseShaderCache:z,programs:c,dispose:q}}function Lj(){let i=new WeakMap;function e(a){return i.has(a)}function t(a){let o=i.get(a);return o===void 0&&(o={},i.set(a,o)),o}function n(a){i.delete(a)}function r(a,o,l){i.get(a)[o]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function Ij(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function HM(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function WM(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function a(p,y,_,b,w,E){let M=i[e];return M===void 0?(M={id:p.id,object:p,geometry:y,material:_,groupOrder:b,renderOrder:p.renderOrder,z:w,group:E},i[e]=M):(M.id=p.id,M.object=p,M.geometry=y,M.material=_,M.groupOrder=b,M.renderOrder=p.renderOrder,M.z=w,M.group=E),e++,M}function o(p,y,_,b,w,E){const M=a(p,y,_,b,w,E);_.transmission>0?n.push(M):_.transparent===!0?r.push(M):t.push(M)}function l(p,y,_,b,w,E){const M=a(p,y,_,b,w,E);_.transmission>0?n.unshift(M):_.transparent===!0?r.unshift(M):t.unshift(M)}function u(p,y){t.length>1&&t.sort(p||Ij),n.length>1&&n.sort(y||HM),r.length>1&&r.sort(y||HM)}function c(){for(let p=e,y=i.length;p<y;p++){const _=i[p];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:o,unshift:l,finish:c,sort:u}}function Uj(){let i=new WeakMap;function e(n,r){const s=i.get(n);let a;return s===void 0?(a=new WM,i.set(n,[a])):r>=s.length?(a=new WM,s.push(a)):a=s[r],a}function t(){i=new WeakMap}return{get:e,dispose:t}}function Oj(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new te,color:new Dt};break;case"SpotLight":t={position:new te,direction:new te,color:new Dt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new te,color:new Dt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new te,skyColor:new Dt,groundColor:new Dt};break;case"RectAreaLight":t={color:new Dt,position:new te,halfWidth:new te,halfHeight:new te};break}return i[e.id]=t,t}}}function Fj(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let Vj=0;function zj(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Gj(i){const e=new Oj,t=Fj(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new te);const r=new te,s=new $t,a=new $t;function o(u){let c=0,p=0,y=0;for(let F=0;F<9;F++)n.probe[F].set(0,0,0);let _=0,b=0,w=0,E=0,M=0,P=0,D=0,B=0,U=0,O=0,z=0;u.sort(zj);for(let F=0,G=u.length;F<G;F++){const j=u[F],$=j.color,K=j.intensity,ie=j.distance,ee=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)c+=$.r*K,p+=$.g*K,y+=$.b*K;else if(j.isLightProbe){for(let X=0;X<9;X++)n.probe[X].addScaledVector(j.sh.coefficients[X],K);z++}else if(j.isDirectionalLight){const X=e.get(j);if(X.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const re=j.shadow,se=t.get(j);se.shadowIntensity=re.intensity,se.shadowBias=re.bias,se.shadowNormalBias=re.normalBias,se.shadowRadius=re.radius,se.shadowMapSize=re.mapSize,n.directionalShadow[_]=se,n.directionalShadowMap[_]=ee,n.directionalShadowMatrix[_]=j.shadow.matrix,P++}n.directional[_]=X,_++}else if(j.isSpotLight){const X=e.get(j);X.position.setFromMatrixPosition(j.matrixWorld),X.color.copy($).multiplyScalar(K),X.distance=ie,X.coneCos=Math.cos(j.angle),X.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),X.decay=j.decay,n.spot[w]=X;const re=j.shadow;if(j.map&&(n.spotLightMap[U]=j.map,U++,re.updateMatrices(j),j.castShadow&&O++),n.spotLightMatrix[w]=re.matrix,j.castShadow){const se=t.get(j);se.shadowIntensity=re.intensity,se.shadowBias=re.bias,se.shadowNormalBias=re.normalBias,se.shadowRadius=re.radius,se.shadowMapSize=re.mapSize,n.spotShadow[w]=se,n.spotShadowMap[w]=ee,B++}w++}else if(j.isRectAreaLight){const X=e.get(j);X.color.copy($).multiplyScalar(K),X.halfWidth.set(j.width*.5,0,0),X.halfHeight.set(0,j.height*.5,0),n.rectArea[E]=X,E++}else if(j.isPointLight){const X=e.get(j);if(X.color.copy(j.color).multiplyScalar(j.intensity),X.distance=j.distance,X.decay=j.decay,j.castShadow){const re=j.shadow,se=t.get(j);se.shadowIntensity=re.intensity,se.shadowBias=re.bias,se.shadowNormalBias=re.normalBias,se.shadowRadius=re.radius,se.shadowMapSize=re.mapSize,se.shadowCameraNear=re.camera.near,se.shadowCameraFar=re.camera.far,n.pointShadow[b]=se,n.pointShadowMap[b]=ee,n.pointShadowMatrix[b]=j.shadow.matrix,D++}n.point[b]=X,b++}else if(j.isHemisphereLight){const X=e.get(j);X.skyColor.copy(j.color).multiplyScalar(K),X.groundColor.copy(j.groundColor).multiplyScalar(K),n.hemi[M]=X,M++}}E>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Vt.LTC_FLOAT_1,n.rectAreaLTC2=Vt.LTC_FLOAT_2):(n.rectAreaLTC1=Vt.LTC_HALF_1,n.rectAreaLTC2=Vt.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=p,n.ambient[2]=y;const q=n.hash;(q.directionalLength!==_||q.pointLength!==b||q.spotLength!==w||q.rectAreaLength!==E||q.hemiLength!==M||q.numDirectionalShadows!==P||q.numPointShadows!==D||q.numSpotShadows!==B||q.numSpotMaps!==U||q.numLightProbes!==z)&&(n.directional.length=_,n.spot.length=w,n.rectArea.length=E,n.point.length=b,n.hemi.length=M,n.directionalShadow.length=P,n.directionalShadowMap.length=P,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=B,n.spotShadowMap.length=B,n.directionalShadowMatrix.length=P,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=B+U-O,n.spotLightMap.length=U,n.numSpotLightShadowsWithMaps=O,n.numLightProbes=z,q.directionalLength=_,q.pointLength=b,q.spotLength=w,q.rectAreaLength=E,q.hemiLength=M,q.numDirectionalShadows=P,q.numPointShadows=D,q.numSpotShadows=B,q.numSpotMaps=U,q.numLightProbes=z,n.version=Vj++)}function l(u,c){let p=0,y=0,_=0,b=0,w=0;const E=c.matrixWorldInverse;for(let M=0,P=u.length;M<P;M++){const D=u[M];if(D.isDirectionalLight){const B=n.directional[p];B.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(E),p++}else if(D.isSpotLight){const B=n.spot[_];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),B.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),B.direction.sub(r),B.direction.transformDirection(E),_++}else if(D.isRectAreaLight){const B=n.rectArea[b];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),a.identity(),s.copy(D.matrixWorld),s.premultiply(E),a.extractRotation(s),B.halfWidth.set(D.width*.5,0,0),B.halfHeight.set(0,D.height*.5,0),B.halfWidth.applyMatrix4(a),B.halfHeight.applyMatrix4(a),b++}else if(D.isPointLight){const B=n.point[y];B.position.setFromMatrixPosition(D.matrixWorld),B.position.applyMatrix4(E),y++}else if(D.isHemisphereLight){const B=n.hemi[w];B.direction.setFromMatrixPosition(D.matrixWorld),B.direction.transformDirection(E),w++}}}return{setup:o,setupView:l,state:n}}function jM(i){const e=new Gj(i),t=[],n=[];function r(c){u.camera=c,t.length=0,n.length=0}function s(c){t.push(c)}function a(c){n.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function qj(i){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new jM(i),e.set(r,[o])):s>=a.length?(o=new jM(i),a.push(o)):o=a[s],o}function n(){e=new WeakMap}return{get:t,dispose:n}}const kj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Hj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Wj(i,e,t){let n=new ju;const r=new He,s=new He,a=new an,o=new Ex({depthPacking:VC}),l=new wx,u={},c=t.maxTextureSize,p={[Wa]:Fi,[Fi]:Wa,[Ur]:Ur},y=new Na({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new He},radius:{value:4}},vertexShader:kj,fragmentShader:Hj}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new Tn;b.setAttribute("position",new li(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Jn(b,y),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Q6;let M=this.type;this.render=function(O,z,q){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||O.length===0)return;const F=i.getRenderTarget(),G=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),$=i.state;$.setBlending(ja),$.buffers.depth.getReversed()===!0?$.buffers.color.setClear(0,0,0,0):$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const K=M!==xa&&this.type===xa,ie=M===xa&&this.type!==xa;for(let ee=0,X=O.length;ee<X;ee++){const re=O[ee],se=re.shadow;if(se===void 0){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(se.autoUpdate===!1&&se.needsUpdate===!1)continue;r.copy(se.mapSize);const Ae=se.getFrameExtents();if(r.multiply(Ae),s.copy(se.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/Ae.x),r.x=s.x*Ae.x,se.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/Ae.y),r.y=s.y*Ae.y,se.mapSize.y=s.y)),se.map===null||K===!0||ie===!0){const Ce=this.type!==xa?{minFilter:Xi,magFilter:Xi}:{};se.map!==null&&se.map.dispose(),se.map=new Il(r.x,r.y,Ce),se.map.texture.name=re.name+".shadowMap",se.camera.updateProjectionMatrix()}i.setRenderTarget(se.map),i.clear();const Se=se.getViewportCount();for(let Ce=0;Ce<Se;Ce++){const Ye=se.getViewport(Ce);a.set(s.x*Ye.x,s.y*Ye.y,s.x*Ye.z,s.y*Ye.w),$.viewport(a),se.updateMatrices(re,Ce),n=se.getFrustum(),B(z,q,se.camera,re,this.type)}se.isPointLightShadow!==!0&&this.type===xa&&P(se,q),se.needsUpdate=!1}M=this.type,E.needsUpdate=!1,i.setRenderTarget(F,G,j)};function P(O,z){const q=e.update(w);y.defines.VSM_SAMPLES!==O.blurSamples&&(y.defines.VSM_SAMPLES=O.blurSamples,_.defines.VSM_SAMPLES=O.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Il(r.x,r.y)),y.uniforms.shadow_pass.value=O.map.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,i.setRenderTarget(O.mapPass),i.clear(),i.renderBufferDirect(z,null,q,y,w,null),_.uniforms.shadow_pass.value=O.mapPass.texture,_.uniforms.resolution.value=O.mapSize,_.uniforms.radius.value=O.radius,i.setRenderTarget(O.map),i.clear(),i.renderBufferDirect(z,null,q,_,w,null)}function D(O,z,q,F){let G=null;const j=q.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(j!==void 0)G=j;else if(G=q.isPointLight===!0?l:o,i.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const $=G.uuid,K=z.uuid;let ie=u[$];ie===void 0&&(ie={},u[$]=ie);let ee=ie[K];ee===void 0&&(ee=G.clone(),ie[K]=ee,z.addEventListener("dispose",U)),G=ee}if(G.visible=z.visible,G.wireframe=z.wireframe,F===xa?G.side=z.shadowSide!==null?z.shadowSide:z.side:G.side=z.shadowSide!==null?z.shadowSide:p[z.side],G.alphaMap=z.alphaMap,G.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,G.map=z.map,G.clipShadows=z.clipShadows,G.clippingPlanes=z.clippingPlanes,G.clipIntersection=z.clipIntersection,G.displacementMap=z.displacementMap,G.displacementScale=z.displacementScale,G.displacementBias=z.displacementBias,G.wireframeLinewidth=z.wireframeLinewidth,G.linewidth=z.linewidth,q.isPointLight===!0&&G.isMeshDistanceMaterial===!0){const $=i.properties.get(G);$.light=q}return G}function B(O,z,q,F,G){if(O.visible===!1)return;if(O.layers.test(z.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&G===xa)&&(!O.frustumCulled||n.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(q.matrixWorldInverse,O.matrixWorld);const K=e.update(O),ie=O.material;if(Array.isArray(ie)){const ee=K.groups;for(let X=0,re=ee.length;X<re;X++){const se=ee[X],Ae=ie[se.materialIndex];if(Ae&&Ae.visible){const Se=D(O,Ae,F,G);O.onBeforeShadow(i,O,z,q,K,Se,se),i.renderBufferDirect(q,null,K,Se,O,se),O.onAfterShadow(i,O,z,q,K,Se,se)}}}else if(ie.visible){const ee=D(O,ie,F,G);O.onBeforeShadow(i,O,z,q,K,ee,null),i.renderBufferDirect(q,null,K,ee,O,null),O.onAfterShadow(i,O,z,q,K,ee,null)}}const $=O.children;for(let K=0,ie=$.length;K<ie;K++)B($[K],z,q,F,G)}function U(O){O.target.removeEventListener("dispose",U);for(const q in u){const F=u[q],G=O.target.uuid;G in F&&(F[G].dispose(),delete F[G])}}}const jj={[S5]:T5,[M5]:R5,[E5]:C5,[P1]:w5,[T5]:S5,[R5]:M5,[C5]:E5,[w5]:P1};function Xj(i,e){function t(){let le=!1;const ut=new an;let bt=null;const Gt=new an(0,0,0,0);return{setMask:function(vt){bt!==vt&&!le&&(i.colorMask(vt,vt,vt,vt),bt=vt)},setLocked:function(vt){le=vt},setClear:function(vt,at,qt,hn,ei){ei===!0&&(vt*=hn,at*=hn,qt*=hn),ut.set(vt,at,qt,hn),Gt.equals(ut)===!1&&(i.clearColor(vt,at,qt,hn),Gt.copy(ut))},reset:function(){le=!1,bt=null,Gt.set(-1,0,0,0)}}}function n(){let le=!1,ut=!1,bt=null,Gt=null,vt=null;return{setReversed:function(at){if(ut!==at){const qt=e.get("EXT_clip_control");at?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT),ut=at;const hn=vt;vt=null,this.setClear(hn)}},getReversed:function(){return ut},setTest:function(at){at?Xe(i.DEPTH_TEST):Tt(i.DEPTH_TEST)},setMask:function(at){bt!==at&&!le&&(i.depthMask(at),bt=at)},setFunc:function(at){if(ut&&(at=jj[at]),Gt!==at){switch(at){case S5:i.depthFunc(i.NEVER);break;case T5:i.depthFunc(i.ALWAYS);break;case M5:i.depthFunc(i.LESS);break;case P1:i.depthFunc(i.LEQUAL);break;case E5:i.depthFunc(i.EQUAL);break;case w5:i.depthFunc(i.GEQUAL);break;case R5:i.depthFunc(i.GREATER);break;case C5:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Gt=at}},setLocked:function(at){le=at},setClear:function(at){vt!==at&&(ut&&(at=1-at),i.clearDepth(at),vt=at)},reset:function(){le=!1,bt=null,Gt=null,vt=null,ut=!1}}}function r(){let le=!1,ut=null,bt=null,Gt=null,vt=null,at=null,qt=null,hn=null,ei=null;return{setTest:function(Hn){le||(Hn?Xe(i.STENCIL_TEST):Tt(i.STENCIL_TEST))},setMask:function(Hn){ut!==Hn&&!le&&(i.stencilMask(Hn),ut=Hn)},setFunc:function(Hn,Er,ur){(bt!==Hn||Gt!==Er||vt!==ur)&&(i.stencilFunc(Hn,Er,ur),bt=Hn,Gt=Er,vt=ur)},setOp:function(Hn,Er,ur){(at!==Hn||qt!==Er||hn!==ur)&&(i.stencilOp(Hn,Er,ur),at=Hn,qt=Er,hn=ur)},setLocked:function(Hn){le=Hn},setClear:function(Hn){ei!==Hn&&(i.clearStencil(Hn),ei=Hn)},reset:function(){le=!1,ut=null,bt=null,Gt=null,vt=null,at=null,qt=null,hn=null,ei=null}}}const s=new t,a=new n,o=new r,l=new WeakMap,u=new WeakMap;let c={},p={},y=new WeakMap,_=[],b=null,w=!1,E=null,M=null,P=null,D=null,B=null,U=null,O=null,z=new Dt(0,0,0),q=0,F=!1,G=null,j=null,$=null,K=null,ie=null;const ee=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let X=!1,re=0;const se=i.getParameter(i.VERSION);se.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec(se)[1]),X=re>=1):se.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec(se)[1]),X=re>=2);let Ae=null,Se={};const Ce=i.getParameter(i.SCISSOR_BOX),Ye=i.getParameter(i.VIEWPORT),it=new an().fromArray(Ce),pt=new an().fromArray(Ye);function yt(le,ut,bt,Gt){const vt=new Uint8Array(4),at=i.createTexture();i.bindTexture(le,at),i.texParameteri(le,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(le,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let qt=0;qt<bt;qt++)le===i.TEXTURE_3D||le===i.TEXTURE_2D_ARRAY?i.texImage3D(ut,0,i.RGBA,1,1,Gt,0,i.RGBA,i.UNSIGNED_BYTE,vt):i.texImage2D(ut+qt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,vt);return at}const Oe={};Oe[i.TEXTURE_2D]=yt(i.TEXTURE_2D,i.TEXTURE_2D,1),Oe[i.TEXTURE_CUBE_MAP]=yt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Oe[i.TEXTURE_2D_ARRAY]=yt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Oe[i.TEXTURE_3D]=yt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),Xe(i.DEPTH_TEST),a.setFunc(P1),tt(!1),ke(Vd),Xe(i.CULL_FACE),Je(ja);function Xe(le){c[le]!==!0&&(i.enable(le),c[le]=!0)}function Tt(le){c[le]!==!1&&(i.disable(le),c[le]=!1)}function Ft(le,ut){return p[le]!==ut?(i.bindFramebuffer(le,ut),p[le]=ut,le===i.DRAW_FRAMEBUFFER&&(p[i.FRAMEBUFFER]=ut),le===i.FRAMEBUFFER&&(p[i.DRAW_FRAMEBUFFER]=ut),!0):!1}function Pt(le,ut){let bt=_,Gt=!1;if(le){bt=y.get(ut),bt===void 0&&(bt=[],y.set(ut,bt));const vt=le.textures;if(bt.length!==vt.length||bt[0]!==i.COLOR_ATTACHMENT0){for(let at=0,qt=vt.length;at<qt;at++)bt[at]=i.COLOR_ATTACHMENT0+at;bt.length=vt.length,Gt=!0}}else bt[0]!==i.BACK&&(bt[0]=i.BACK,Gt=!0);Gt&&i.drawBuffers(bt)}function ln(le){return b!==le?(i.useProgram(le),b=le,!0):!1}const Dn={[Us]:i.FUNC_ADD,[YA]:i.FUNC_SUBTRACT,[QA]:i.FUNC_REVERSE_SUBTRACT};Dn[X_]=i.MIN,Dn[Y_]=i.MAX;const pe={[yl]:i.ZERO,[$A]:i.ONE,[KA]:i.SRC_COLOR,[x5]:i.SRC_ALPHA,[ip]:i.SRC_ALPHA_SATURATE,[tp]:i.DST_COLOR,[JA]:i.DST_ALPHA,[ZA]:i.ONE_MINUS_SRC_COLOR,[b5]:i.ONE_MINUS_SRC_ALPHA,[np]:i.ONE_MINUS_DST_COLOR,[ep]:i.ONE_MINUS_DST_ALPHA,[MC]:i.CONSTANT_COLOR,[EC]:i.ONE_MINUS_CONSTANT_COLOR,[wC]:i.CONSTANT_ALPHA,[RC]:i.ONE_MINUS_CONSTANT_ALPHA};function Je(le,ut,bt,Gt,vt,at,qt,hn,ei,Hn){if(le===ja){w===!0&&(Tt(i.BLEND),w=!1);return}if(w===!1&&(Xe(i.BLEND),w=!0),le!==gc){if(le!==E||Hn!==F){if((M!==Us||B!==Us)&&(i.blendEquation(i.FUNC_ADD),M=Us,B=Us),Hn)switch(le){case aa:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Ec:i.blendFunc(i.ONE,i.ONE);break;case wc:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case Rc:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case aa:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Ec:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case wc:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Rc:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}P=null,D=null,U=null,O=null,z.set(0,0,0),q=0,E=le,F=Hn}return}vt=vt||ut,at=at||bt,qt=qt||Gt,(ut!==M||vt!==B)&&(i.blendEquationSeparate(Dn[ut],Dn[vt]),M=ut,B=vt),(bt!==P||Gt!==D||at!==U||qt!==O)&&(i.blendFuncSeparate(pe[bt],pe[Gt],pe[at],pe[qt]),P=bt,D=Gt,U=at,O=qt),(hn.equals(z)===!1||ei!==q)&&(i.blendColor(hn.r,hn.g,hn.b,ei),z.copy(hn),q=ei),E=le,F=!1}function et(le,ut){le.side===Ur?Tt(i.CULL_FACE):Xe(i.CULL_FACE);let bt=le.side===Fi;ut&&(bt=!bt),tt(bt),le.blending===aa&&le.transparent===!1?Je(ja):Je(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.blendColor,le.blendAlpha,le.premultipliedAlpha),a.setFunc(le.depthFunc),a.setTest(le.depthTest),a.setMask(le.depthWrite),s.setMask(le.colorWrite);const Gt=le.stencilWrite;o.setTest(Gt),Gt&&(o.setMask(le.stencilWriteMask),o.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),o.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),ft(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?Xe(i.SAMPLE_ALPHA_TO_COVERAGE):Tt(i.SAMPLE_ALPHA_TO_COVERAGE)}function tt(le){G!==le&&(le?i.frontFace(i.CW):i.frontFace(i.CCW),G=le)}function ke(le){le!==H_?(Xe(i.CULL_FACE),le!==j&&(le===Vd?i.cullFace(i.BACK):le===W_?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Tt(i.CULL_FACE),j=le}function xt(le){le!==$&&(X&&i.lineWidth(le),$=le)}function ft(le,ut,bt){le?(Xe(i.POLYGON_OFFSET_FILL),(K!==ut||ie!==bt)&&(i.polygonOffset(ut,bt),K=ut,ie=bt)):Tt(i.POLYGON_OFFSET_FILL)}function wt(le){le?Xe(i.SCISSOR_TEST):Tt(i.SCISSOR_TEST)}function cn(le){le===void 0&&(le=i.TEXTURE0+ee-1),Ae!==le&&(i.activeTexture(le),Ae=le)}function Sn(le,ut,bt){bt===void 0&&(Ae===null?bt=i.TEXTURE0+ee-1:bt=Ae);let Gt=Se[bt];Gt===void 0&&(Gt={type:void 0,texture:void 0},Se[bt]=Gt),(Gt.type!==le||Gt.texture!==ut)&&(Ae!==bt&&(i.activeTexture(bt),Ae=bt),i.bindTexture(le,ut||Oe[le]),Gt.type=le,Gt.texture=ut)}function de(){const le=Se[Ae];le!==void 0&&le.type!==void 0&&(i.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function J(){try{i.compressedTexImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Le(){try{i.compressedTexImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function We(){try{i.texSubImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ht(){try{i.texSubImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Qe(){try{i.compressedTexSubImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function nn(){try{i.compressedTexSubImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ct(){try{i.texStorage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Zt(){try{i.texStorage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function en(){try{i.texImage2D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function At(){try{i.texImage3D(...arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Lt(le){it.equals(le)===!1&&(i.scissor(le.x,le.y,le.z,le.w),it.copy(le))}function dn(le){pt.equals(le)===!1&&(i.viewport(le.x,le.y,le.z,le.w),pt.copy(le))}function ge(le,ut){let bt=u.get(ut);bt===void 0&&(bt=new WeakMap,u.set(ut,bt));let Gt=bt.get(le);Gt===void 0&&(Gt=i.getUniformBlockIndex(ut,le.name),bt.set(le,Gt))}function Ue(le,ut){const Gt=u.get(ut).get(le);l.get(ut)!==Gt&&(i.uniformBlockBinding(ut,Gt,le.__bindingPointIndex),l.set(ut,Gt))}function Mt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),a.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},Ae=null,Se={},p={},y=new WeakMap,_=[],b=null,w=!1,E=null,M=null,P=null,D=null,B=null,U=null,O=null,z=new Dt(0,0,0),q=0,F=!1,G=null,j=null,$=null,K=null,ie=null,it.set(0,0,i.canvas.width,i.canvas.height),pt.set(0,0,i.canvas.width,i.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:Xe,disable:Tt,bindFramebuffer:Ft,drawBuffers:Pt,useProgram:ln,setBlending:Je,setMaterial:et,setFlipSided:tt,setCullFace:ke,setLineWidth:xt,setPolygonOffset:ft,setScissorTest:wt,activeTexture:cn,bindTexture:Sn,unbindTexture:de,compressedTexImage2D:J,compressedTexImage3D:Le,texImage2D:en,texImage3D:At,updateUBOMapping:ge,uniformBlockBinding:Ue,texStorage2D:Ct,texStorage3D:Zt,texSubImage2D:We,texSubImage3D:ht,compressedTexSubImage2D:Qe,compressedTexSubImage3D:nn,scissor:Lt,viewport:dn,reset:Mt}}function Yj(i,e,t,n,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new He,c=new WeakMap;let p;const y=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(de,J){return _?new OffscreenCanvas(de,J):y6("canvas")}function w(de,J,Le){let We=1;const ht=Sn(de);if((ht.width>Le||ht.height>Le)&&(We=Le/Math.max(ht.width,ht.height)),We<1)if(typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&de instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&de instanceof ImageBitmap||typeof VideoFrame<"u"&&de instanceof VideoFrame){const Qe=Math.floor(We*ht.width),nn=Math.floor(We*ht.height);p===void 0&&(p=b(Qe,nn));const Ct=J?b(Qe,nn):p;return Ct.width=Qe,Ct.height=nn,Ct.getContext("2d").drawImage(de,0,0,Qe,nn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ht.width+"x"+ht.height+") to ("+Qe+"x"+nn+")."),Ct}else return"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ht.width+"x"+ht.height+")."),de;return de}function E(de){return de.generateMipmaps}function M(de){i.generateMipmap(de)}function P(de){return de.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:de.isWebGL3DRenderTarget?i.TEXTURE_3D:de.isWebGLArrayRenderTarget||de.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function D(de,J,Le,We,ht=!1){if(de!==null){if(i[de]!==void 0)return i[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let Qe=J;if(J===i.RED&&(Le===i.FLOAT&&(Qe=i.R32F),Le===i.HALF_FLOAT&&(Qe=i.R16F),Le===i.UNSIGNED_BYTE&&(Qe=i.R8)),J===i.RED_INTEGER&&(Le===i.UNSIGNED_BYTE&&(Qe=i.R8UI),Le===i.UNSIGNED_SHORT&&(Qe=i.R16UI),Le===i.UNSIGNED_INT&&(Qe=i.R32UI),Le===i.BYTE&&(Qe=i.R8I),Le===i.SHORT&&(Qe=i.R16I),Le===i.INT&&(Qe=i.R32I)),J===i.RG&&(Le===i.FLOAT&&(Qe=i.RG32F),Le===i.HALF_FLOAT&&(Qe=i.RG16F),Le===i.UNSIGNED_BYTE&&(Qe=i.RG8)),J===i.RG_INTEGER&&(Le===i.UNSIGNED_BYTE&&(Qe=i.RG8UI),Le===i.UNSIGNED_SHORT&&(Qe=i.RG16UI),Le===i.UNSIGNED_INT&&(Qe=i.RG32UI),Le===i.BYTE&&(Qe=i.RG8I),Le===i.SHORT&&(Qe=i.RG16I),Le===i.INT&&(Qe=i.RG32I)),J===i.RGB_INTEGER&&(Le===i.UNSIGNED_BYTE&&(Qe=i.RGB8UI),Le===i.UNSIGNED_SHORT&&(Qe=i.RGB16UI),Le===i.UNSIGNED_INT&&(Qe=i.RGB32UI),Le===i.BYTE&&(Qe=i.RGB8I),Le===i.SHORT&&(Qe=i.RGB16I),Le===i.INT&&(Qe=i.RGB32I)),J===i.RGBA_INTEGER&&(Le===i.UNSIGNED_BYTE&&(Qe=i.RGBA8UI),Le===i.UNSIGNED_SHORT&&(Qe=i.RGBA16UI),Le===i.UNSIGNED_INT&&(Qe=i.RGBA32UI),Le===i.BYTE&&(Qe=i.RGBA8I),Le===i.SHORT&&(Qe=i.RGBA16I),Le===i.INT&&(Qe=i.RGBA32I)),J===i.RGB&&(Le===i.UNSIGNED_INT_5_9_9_9_REV&&(Qe=i.RGB9_E5),Le===i.UNSIGNED_INT_10F_11F_11F_REV&&(Qe=i.R11F_G11F_B10F)),J===i.RGBA){const nn=ht?Kc:gn.getTransfer(We);Le===i.FLOAT&&(Qe=i.RGBA32F),Le===i.HALF_FLOAT&&(Qe=i.RGBA16F),Le===i.UNSIGNED_BYTE&&(Qe=nn===Ht?i.SRGB8_ALPHA8:i.RGBA8),Le===i.UNSIGNED_SHORT_4_4_4_4&&(Qe=i.RGBA4),Le===i.UNSIGNED_SHORT_5_5_5_1&&(Qe=i.RGB5_A1)}return(Qe===i.R16F||Qe===i.R32F||Qe===i.RG16F||Qe===i.RG32F||Qe===i.RGBA16F||Qe===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Qe}function B(de,J){let Le;return de?J===null||J===zi||J===Xa?Le=i.DEPTH24_STENCIL8:J===or?Le=i.DEPTH32F_STENCIL8:J===Xo&&(Le=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):J===null||J===zi||J===Xa?Le=i.DEPTH_COMPONENT24:J===or?Le=i.DEPTH_COMPONENT32F:J===Xo&&(Le=i.DEPTH_COMPONENT16),Le}function U(de,J){return E(de)===!0||de.isFramebufferTexture&&de.minFilter!==Xi&&de.minFilter!==Qi?Math.log2(Math.max(J.width,J.height))+1:de.mipmaps!==void 0&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?J.mipmaps.length:1}function O(de){const J=de.target;J.removeEventListener("dispose",O),q(J),J.isVideoTexture&&c.delete(J)}function z(de){const J=de.target;J.removeEventListener("dispose",z),G(J)}function q(de){const J=n.get(de);if(J.__webglInit===void 0)return;const Le=de.source,We=y.get(Le);if(We){const ht=We[J.__cacheKey];ht.usedTimes--,ht.usedTimes===0&&F(de),Object.keys(We).length===0&&y.delete(Le)}n.remove(de)}function F(de){const J=n.get(de);i.deleteTexture(J.__webglTexture);const Le=de.source,We=y.get(Le);delete We[J.__cacheKey],a.memory.textures--}function G(de){const J=n.get(de);if(de.depthTexture&&(de.depthTexture.dispose(),n.remove(de.depthTexture)),de.isWebGLCubeRenderTarget)for(let We=0;We<6;We++){if(Array.isArray(J.__webglFramebuffer[We]))for(let ht=0;ht<J.__webglFramebuffer[We].length;ht++)i.deleteFramebuffer(J.__webglFramebuffer[We][ht]);else i.deleteFramebuffer(J.__webglFramebuffer[We]);J.__webglDepthbuffer&&i.deleteRenderbuffer(J.__webglDepthbuffer[We])}else{if(Array.isArray(J.__webglFramebuffer))for(let We=0;We<J.__webglFramebuffer.length;We++)i.deleteFramebuffer(J.__webglFramebuffer[We]);else i.deleteFramebuffer(J.__webglFramebuffer);if(J.__webglDepthbuffer&&i.deleteRenderbuffer(J.__webglDepthbuffer),J.__webglMultisampledFramebuffer&&i.deleteFramebuffer(J.__webglMultisampledFramebuffer),J.__webglColorRenderbuffer)for(let We=0;We<J.__webglColorRenderbuffer.length;We++)J.__webglColorRenderbuffer[We]&&i.deleteRenderbuffer(J.__webglColorRenderbuffer[We]);J.__webglDepthRenderbuffer&&i.deleteRenderbuffer(J.__webglDepthRenderbuffer)}const Le=de.textures;for(let We=0,ht=Le.length;We<ht;We++){const Qe=n.get(Le[We]);Qe.__webglTexture&&(i.deleteTexture(Qe.__webglTexture),a.memory.textures--),n.remove(Le[We])}n.remove(de)}let j=0;function $(){j=0}function K(){const de=j;return de>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+r.maxTextures),j+=1,de}function ie(de){const J=[];return J.push(de.wrapS),J.push(de.wrapT),J.push(de.wrapR||0),J.push(de.magFilter),J.push(de.minFilter),J.push(de.anisotropy),J.push(de.internalFormat),J.push(de.format),J.push(de.type),J.push(de.generateMipmaps),J.push(de.premultiplyAlpha),J.push(de.flipY),J.push(de.unpackAlignment),J.push(de.colorSpace),J.join()}function ee(de,J){const Le=n.get(de);if(de.isVideoTexture&&wt(de),de.isRenderTargetTexture===!1&&de.isExternalTexture!==!0&&de.version>0&&Le.__version!==de.version){const We=de.image;if(We===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(We.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(Le,de,J);return}}else de.isExternalTexture&&(Le.__webglTexture=de.sourceTexture?de.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,Le.__webglTexture,i.TEXTURE0+J)}function X(de,J){const Le=n.get(de);if(de.isRenderTargetTexture===!1&&de.version>0&&Le.__version!==de.version){Oe(Le,de,J);return}t.bindTexture(i.TEXTURE_2D_ARRAY,Le.__webglTexture,i.TEXTURE0+J)}function re(de,J){const Le=n.get(de);if(de.isRenderTargetTexture===!1&&de.version>0&&Le.__version!==de.version){Oe(Le,de,J);return}t.bindTexture(i.TEXTURE_3D,Le.__webglTexture,i.TEXTURE0+J)}function se(de,J){const Le=n.get(de);if(de.version>0&&Le.__version!==de.version){Xe(Le,de,J);return}t.bindTexture(i.TEXTURE_CUBE_MAP,Le.__webglTexture,i.TEXTURE0+J)}const Ae={[B1]:i.REPEAT,[Ra]:i.CLAMP_TO_EDGE,[L1]:i.MIRRORED_REPEAT},Se={[Xi]:i.NEAREST,[K6]:i.NEAREST_MIPMAP_NEAREST,[O0]:i.NEAREST_MIPMAP_LINEAR,[Qi]:i.LINEAR,[Bu]:i.LINEAR_MIPMAP_NEAREST,[Fs]:i.LINEAR_MIPMAP_LINEAR},Ce={[op]:i.NEVER,[fp]:i.ALWAYS,[n7]:i.LESS,[i7]:i.LEQUAL,[lp]:i.EQUAL,[hp]:i.GEQUAL,[up]:i.GREATER,[cp]:i.NOTEQUAL};function Ye(de,J){if(J.type===or&&e.has("OES_texture_float_linear")===!1&&(J.magFilter===Qi||J.magFilter===Bu||J.magFilter===O0||J.magFilter===Fs||J.minFilter===Qi||J.minFilter===Bu||J.minFilter===O0||J.minFilter===Fs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(de,i.TEXTURE_WRAP_S,Ae[J.wrapS]),i.texParameteri(de,i.TEXTURE_WRAP_T,Ae[J.wrapT]),(de===i.TEXTURE_3D||de===i.TEXTURE_2D_ARRAY)&&i.texParameteri(de,i.TEXTURE_WRAP_R,Ae[J.wrapR]),i.texParameteri(de,i.TEXTURE_MAG_FILTER,Se[J.magFilter]),i.texParameteri(de,i.TEXTURE_MIN_FILTER,Se[J.minFilter]),J.compareFunction&&(i.texParameteri(de,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(de,i.TEXTURE_COMPARE_FUNC,Ce[J.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(J.magFilter===Xi||J.minFilter!==O0&&J.minFilter!==Fs||J.type===or&&e.has("OES_texture_float_linear")===!1)return;if(J.anisotropy>1||n.get(J).__currentAnisotropy){const Le=e.get("EXT_texture_filter_anisotropic");i.texParameterf(de,Le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(J.anisotropy,r.getMaxAnisotropy())),n.get(J).__currentAnisotropy=J.anisotropy}}}function it(de,J){let Le=!1;de.__webglInit===void 0&&(de.__webglInit=!0,J.addEventListener("dispose",O));const We=J.source;let ht=y.get(We);ht===void 0&&(ht={},y.set(We,ht));const Qe=ie(J);if(Qe!==de.__cacheKey){ht[Qe]===void 0&&(ht[Qe]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Le=!0),ht[Qe].usedTimes++;const nn=ht[de.__cacheKey];nn!==void 0&&(ht[de.__cacheKey].usedTimes--,nn.usedTimes===0&&F(J)),de.__cacheKey=Qe,de.__webglTexture=ht[Qe].texture}return Le}function pt(de,J,Le){return Math.floor(Math.floor(de/Le)/J)}function yt(de,J,Le,We){const Qe=de.updateRanges;if(Qe.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,J.width,J.height,Le,We,J.data);else{Qe.sort((At,Lt)=>At.start-Lt.start);let nn=0;for(let At=1;At<Qe.length;At++){const Lt=Qe[nn],dn=Qe[At],ge=Lt.start+Lt.count,Ue=pt(dn.start,J.width,4),Mt=pt(Lt.start,J.width,4);dn.start<=ge+1&&Ue===Mt&&pt(dn.start+dn.count-1,J.width,4)===Ue?Lt.count=Math.max(Lt.count,dn.start+dn.count-Lt.start):(++nn,Qe[nn]=dn)}Qe.length=nn+1;const Ct=i.getParameter(i.UNPACK_ROW_LENGTH),Zt=i.getParameter(i.UNPACK_SKIP_PIXELS),en=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,J.width);for(let At=0,Lt=Qe.length;At<Lt;At++){const dn=Qe[At],ge=Math.floor(dn.start/4),Ue=Math.ceil(dn.count/4),Mt=ge%J.width,le=Math.floor(ge/J.width),ut=Ue,bt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,Mt),i.pixelStorei(i.UNPACK_SKIP_ROWS,le),t.texSubImage2D(i.TEXTURE_2D,0,Mt,le,ut,bt,Le,We,J.data)}de.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,Ct),i.pixelStorei(i.UNPACK_SKIP_PIXELS,Zt),i.pixelStorei(i.UNPACK_SKIP_ROWS,en)}}function Oe(de,J,Le){let We=i.TEXTURE_2D;(J.isDataArrayTexture||J.isCompressedArrayTexture)&&(We=i.TEXTURE_2D_ARRAY),J.isData3DTexture&&(We=i.TEXTURE_3D);const ht=it(de,J),Qe=J.source;t.bindTexture(We,de.__webglTexture,i.TEXTURE0+Le);const nn=n.get(Qe);if(Qe.version!==nn.__version||ht===!0){t.activeTexture(i.TEXTURE0+Le);const Ct=gn.getPrimaries(gn.workingColorSpace),Zt=J.colorSpace===Ea?null:gn.getPrimaries(J.colorSpace),en=J.colorSpace===Ea||Ct===Zt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,J.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,J.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,en);let At=w(J.image,!1,r.maxTextureSize);At=cn(J,At);const Lt=s.convert(J.format,J.colorSpace),dn=s.convert(J.type);let ge=D(J.internalFormat,Lt,dn,J.colorSpace,J.isVideoTexture);Ye(We,J);let Ue;const Mt=J.mipmaps,le=J.isVideoTexture!==!0,ut=nn.__version===void 0||ht===!0,bt=Qe.dataReady,Gt=U(J,At);if(J.isDepthTexture)ge=B(J.format===Qa,J.type),ut&&(le?t.texStorage2D(i.TEXTURE_2D,1,ge,At.width,At.height):t.texImage2D(i.TEXTURE_2D,0,ge,At.width,At.height,0,Lt,dn,null));else if(J.isDataTexture)if(Mt.length>0){le&&ut&&t.texStorage2D(i.TEXTURE_2D,Gt,ge,Mt[0].width,Mt[0].height);for(let vt=0,at=Mt.length;vt<at;vt++)Ue=Mt[vt],le?bt&&t.texSubImage2D(i.TEXTURE_2D,vt,0,0,Ue.width,Ue.height,Lt,dn,Ue.data):t.texImage2D(i.TEXTURE_2D,vt,ge,Ue.width,Ue.height,0,Lt,dn,Ue.data);J.generateMipmaps=!1}else le?(ut&&t.texStorage2D(i.TEXTURE_2D,Gt,ge,At.width,At.height),bt&&yt(J,At,Lt,dn)):t.texImage2D(i.TEXTURE_2D,0,ge,At.width,At.height,0,Lt,dn,At.data);else if(J.isCompressedTexture)if(J.isCompressedArrayTexture){le&&ut&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Gt,ge,Mt[0].width,Mt[0].height,At.depth);for(let vt=0,at=Mt.length;vt<at;vt++)if(Ue=Mt[vt],J.format!==nr)if(Lt!==null)if(le){if(bt)if(J.layerUpdates.size>0){const qt=Yd(Ue.width,Ue.height,J.format,J.type);for(const hn of J.layerUpdates){const ei=Ue.data.subarray(hn*qt/Ue.data.BYTES_PER_ELEMENT,(hn+1)*qt/Ue.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,vt,0,0,hn,Ue.width,Ue.height,1,Lt,ei)}J.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,vt,0,0,0,Ue.width,Ue.height,At.depth,Lt,Ue.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,vt,ge,Ue.width,Ue.height,At.depth,0,Ue.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else le?bt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,vt,0,0,0,Ue.width,Ue.height,At.depth,Lt,dn,Ue.data):t.texImage3D(i.TEXTURE_2D_ARRAY,vt,ge,Ue.width,Ue.height,At.depth,0,Lt,dn,Ue.data)}else{le&&ut&&t.texStorage2D(i.TEXTURE_2D,Gt,ge,Mt[0].width,Mt[0].height);for(let vt=0,at=Mt.length;vt<at;vt++)Ue=Mt[vt],J.format!==nr?Lt!==null?le?bt&&t.compressedTexSubImage2D(i.TEXTURE_2D,vt,0,0,Ue.width,Ue.height,Lt,Ue.data):t.compressedTexImage2D(i.TEXTURE_2D,vt,ge,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):le?bt&&t.texSubImage2D(i.TEXTURE_2D,vt,0,0,Ue.width,Ue.height,Lt,dn,Ue.data):t.texImage2D(i.TEXTURE_2D,vt,ge,Ue.width,Ue.height,0,Lt,dn,Ue.data)}else if(J.isDataArrayTexture)if(le){if(ut&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Gt,ge,At.width,At.height,At.depth),bt)if(J.layerUpdates.size>0){const vt=Yd(At.width,At.height,J.format,J.type);for(const at of J.layerUpdates){const qt=At.data.subarray(at*vt/At.data.BYTES_PER_ELEMENT,(at+1)*vt/At.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,at,At.width,At.height,1,Lt,dn,qt)}J.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,At.width,At.height,At.depth,Lt,dn,At.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ge,At.width,At.height,At.depth,0,Lt,dn,At.data);else if(J.isData3DTexture)le?(ut&&t.texStorage3D(i.TEXTURE_3D,Gt,ge,At.width,At.height,At.depth),bt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,At.width,At.height,At.depth,Lt,dn,At.data)):t.texImage3D(i.TEXTURE_3D,0,ge,At.width,At.height,At.depth,0,Lt,dn,At.data);else if(J.isFramebufferTexture){if(ut)if(le)t.texStorage2D(i.TEXTURE_2D,Gt,ge,At.width,At.height);else{let vt=At.width,at=At.height;for(let qt=0;qt<Gt;qt++)t.texImage2D(i.TEXTURE_2D,qt,ge,vt,at,0,Lt,dn,null),vt>>=1,at>>=1}}else if(Mt.length>0){if(le&&ut){const vt=Sn(Mt[0]);t.texStorage2D(i.TEXTURE_2D,Gt,ge,vt.width,vt.height)}for(let vt=0,at=Mt.length;vt<at;vt++)Ue=Mt[vt],le?bt&&t.texSubImage2D(i.TEXTURE_2D,vt,0,0,Lt,dn,Ue):t.texImage2D(i.TEXTURE_2D,vt,ge,Lt,dn,Ue);J.generateMipmaps=!1}else if(le){if(ut){const vt=Sn(At);t.texStorage2D(i.TEXTURE_2D,Gt,ge,vt.width,vt.height)}bt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Lt,dn,At)}else t.texImage2D(i.TEXTURE_2D,0,ge,Lt,dn,At);E(J)&&M(We),nn.__version=Qe.version,J.onUpdate&&J.onUpdate(J)}de.__version=J.version}function Xe(de,J,Le){if(J.image.length!==6)return;const We=it(de,J),ht=J.source;t.bindTexture(i.TEXTURE_CUBE_MAP,de.__webglTexture,i.TEXTURE0+Le);const Qe=n.get(ht);if(ht.version!==Qe.__version||We===!0){t.activeTexture(i.TEXTURE0+Le);const nn=gn.getPrimaries(gn.workingColorSpace),Ct=J.colorSpace===Ea?null:gn.getPrimaries(J.colorSpace),Zt=J.colorSpace===Ea||nn===Ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,J.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,J.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Zt);const en=J.isCompressedTexture||J.image[0].isCompressedTexture,At=J.image[0]&&J.image[0].isDataTexture,Lt=[];for(let at=0;at<6;at++)!en&&!At?Lt[at]=w(J.image[at],!0,r.maxCubemapSize):Lt[at]=At?J.image[at].image:J.image[at],Lt[at]=cn(J,Lt[at]);const dn=Lt[0],ge=s.convert(J.format,J.colorSpace),Ue=s.convert(J.type),Mt=D(J.internalFormat,ge,Ue,J.colorSpace),le=J.isVideoTexture!==!0,ut=Qe.__version===void 0||We===!0,bt=ht.dataReady;let Gt=U(J,dn);Ye(i.TEXTURE_CUBE_MAP,J);let vt;if(en){le&&ut&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Gt,Mt,dn.width,dn.height);for(let at=0;at<6;at++){vt=Lt[at].mipmaps;for(let qt=0;qt<vt.length;qt++){const hn=vt[qt];J.format!==nr?ge!==null?le?bt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt,0,0,hn.width,hn.height,ge,hn.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt,Mt,hn.width,hn.height,0,hn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):le?bt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt,0,0,hn.width,hn.height,ge,Ue,hn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt,Mt,hn.width,hn.height,0,ge,Ue,hn.data)}}}else{if(vt=J.mipmaps,le&&ut){vt.length>0&&Gt++;const at=Sn(Lt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Gt,Mt,at.width,at.height)}for(let at=0;at<6;at++)if(At){le?bt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,Lt[at].width,Lt[at].height,ge,Ue,Lt[at].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Mt,Lt[at].width,Lt[at].height,0,ge,Ue,Lt[at].data);for(let qt=0;qt<vt.length;qt++){const ei=vt[qt].image[at].image;le?bt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt+1,0,0,ei.width,ei.height,ge,Ue,ei.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt+1,Mt,ei.width,ei.height,0,ge,Ue,ei.data)}}else{le?bt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,0,0,ge,Ue,Lt[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0,Mt,ge,Ue,Lt[at]);for(let qt=0;qt<vt.length;qt++){const hn=vt[qt];le?bt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt+1,0,0,ge,Ue,hn.image[at]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+at,qt+1,Mt,ge,Ue,hn.image[at])}}}E(J)&&M(i.TEXTURE_CUBE_MAP),Qe.__version=ht.version,J.onUpdate&&J.onUpdate(J)}de.__version=J.version}function Tt(de,J,Le,We,ht,Qe){const nn=s.convert(Le.format,Le.colorSpace),Ct=s.convert(Le.type),Zt=D(Le.internalFormat,nn,Ct,Le.colorSpace),en=n.get(J),At=n.get(Le);if(At.__renderTarget=J,!en.__hasExternalTextures){const Lt=Math.max(1,J.width>>Qe),dn=Math.max(1,J.height>>Qe);ht===i.TEXTURE_3D||ht===i.TEXTURE_2D_ARRAY?t.texImage3D(ht,Qe,Zt,Lt,dn,J.depth,0,nn,Ct,null):t.texImage2D(ht,Qe,Zt,Lt,dn,0,nn,Ct,null)}t.bindFramebuffer(i.FRAMEBUFFER,de),ft(J)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,We,ht,At.__webglTexture,0,xt(J)):(ht===i.TEXTURE_2D||ht>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ht<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,We,ht,At.__webglTexture,Qe),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ft(de,J,Le){if(i.bindRenderbuffer(i.RENDERBUFFER,de),J.depthBuffer){const We=J.depthTexture,ht=We&&We.isDepthTexture?We.type:null,Qe=B(J.stencilBuffer,ht),nn=J.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ct=xt(J);ft(J)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ct,Qe,J.width,J.height):Le?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ct,Qe,J.width,J.height):i.renderbufferStorage(i.RENDERBUFFER,Qe,J.width,J.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,nn,i.RENDERBUFFER,de)}else{const We=J.textures;for(let ht=0;ht<We.length;ht++){const Qe=We[ht],nn=s.convert(Qe.format,Qe.colorSpace),Ct=s.convert(Qe.type),Zt=D(Qe.internalFormat,nn,Ct,Qe.colorSpace),en=xt(J);Le&&ft(J)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,en,Zt,J.width,J.height):ft(J)?o.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,en,Zt,J.width,J.height):i.renderbufferStorage(i.RENDERBUFFER,Zt,J.width,J.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Pt(de,J){if(J&&J.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,de),!(J.depthTexture&&J.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const We=n.get(J.depthTexture);We.__renderTarget=J,(!We.__webglTexture||J.depthTexture.image.width!==J.width||J.depthTexture.image.height!==J.height)&&(J.depthTexture.image.width=J.width,J.depthTexture.image.height=J.height,J.depthTexture.needsUpdate=!0),ee(J.depthTexture,0);const ht=We.__webglTexture,Qe=xt(J);if(J.depthTexture.format===Ya)ft(J)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ht,0,Qe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ht,0);else if(J.depthTexture.format===Qa)ft(J)?o.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ht,0,Qe):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ht,0);else throw new Error("Unknown depthTexture format")}function ln(de){const J=n.get(de),Le=de.isWebGLCubeRenderTarget===!0;if(J.__boundDepthTexture!==de.depthTexture){const We=de.depthTexture;if(J.__depthDisposeCallback&&J.__depthDisposeCallback(),We){const ht=()=>{delete J.__boundDepthTexture,delete J.__depthDisposeCallback,We.removeEventListener("dispose",ht)};We.addEventListener("dispose",ht),J.__depthDisposeCallback=ht}J.__boundDepthTexture=We}if(de.depthTexture&&!J.__autoAllocateDepthBuffer){if(Le)throw new Error("target.depthTexture not supported in Cube render targets");const We=de.texture.mipmaps;We&&We.length>0?Pt(J.__webglFramebuffer[0],de):Pt(J.__webglFramebuffer,de)}else if(Le){J.__webglDepthbuffer=[];for(let We=0;We<6;We++)if(t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer[We]),J.__webglDepthbuffer[We]===void 0)J.__webglDepthbuffer[We]=i.createRenderbuffer(),Ft(J.__webglDepthbuffer[We],de,!1);else{const ht=de.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Qe=J.__webglDepthbuffer[We];i.bindRenderbuffer(i.RENDERBUFFER,Qe),i.framebufferRenderbuffer(i.FRAMEBUFFER,ht,i.RENDERBUFFER,Qe)}}else{const We=de.texture.mipmaps;if(We&&We.length>0?t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,J.__webglFramebuffer),J.__webglDepthbuffer===void 0)J.__webglDepthbuffer=i.createRenderbuffer(),Ft(J.__webglDepthbuffer,de,!1);else{const ht=de.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Qe=J.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Qe),i.framebufferRenderbuffer(i.FRAMEBUFFER,ht,i.RENDERBUFFER,Qe)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Dn(de,J,Le){const We=n.get(de);J!==void 0&&Tt(We.__webglFramebuffer,de,de.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),Le!==void 0&&ln(de)}function pe(de){const J=de.texture,Le=n.get(de),We=n.get(J);de.addEventListener("dispose",z);const ht=de.textures,Qe=de.isWebGLCubeRenderTarget===!0,nn=ht.length>1;if(nn||(We.__webglTexture===void 0&&(We.__webglTexture=i.createTexture()),We.__version=J.version,a.memory.textures++),Qe){Le.__webglFramebuffer=[];for(let Ct=0;Ct<6;Ct++)if(J.mipmaps&&J.mipmaps.length>0){Le.__webglFramebuffer[Ct]=[];for(let Zt=0;Zt<J.mipmaps.length;Zt++)Le.__webglFramebuffer[Ct][Zt]=i.createFramebuffer()}else Le.__webglFramebuffer[Ct]=i.createFramebuffer()}else{if(J.mipmaps&&J.mipmaps.length>0){Le.__webglFramebuffer=[];for(let Ct=0;Ct<J.mipmaps.length;Ct++)Le.__webglFramebuffer[Ct]=i.createFramebuffer()}else Le.__webglFramebuffer=i.createFramebuffer();if(nn)for(let Ct=0,Zt=ht.length;Ct<Zt;Ct++){const en=n.get(ht[Ct]);en.__webglTexture===void 0&&(en.__webglTexture=i.createTexture(),a.memory.textures++)}if(de.samples>0&&ft(de)===!1){Le.__webglMultisampledFramebuffer=i.createFramebuffer(),Le.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Le.__webglMultisampledFramebuffer);for(let Ct=0;Ct<ht.length;Ct++){const Zt=ht[Ct];Le.__webglColorRenderbuffer[Ct]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Le.__webglColorRenderbuffer[Ct]);const en=s.convert(Zt.format,Zt.colorSpace),At=s.convert(Zt.type),Lt=D(Zt.internalFormat,en,At,Zt.colorSpace,de.isXRRenderTarget===!0),dn=xt(de);i.renderbufferStorageMultisample(i.RENDERBUFFER,dn,Lt,de.width,de.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ct,i.RENDERBUFFER,Le.__webglColorRenderbuffer[Ct])}i.bindRenderbuffer(i.RENDERBUFFER,null),de.depthBuffer&&(Le.__webglDepthRenderbuffer=i.createRenderbuffer(),Ft(Le.__webglDepthRenderbuffer,de,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Qe){t.bindTexture(i.TEXTURE_CUBE_MAP,We.__webglTexture),Ye(i.TEXTURE_CUBE_MAP,J);for(let Ct=0;Ct<6;Ct++)if(J.mipmaps&&J.mipmaps.length>0)for(let Zt=0;Zt<J.mipmaps.length;Zt++)Tt(Le.__webglFramebuffer[Ct][Zt],de,J,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,Zt);else Tt(Le.__webglFramebuffer[Ct],de,J,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0);E(J)&&M(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(nn){for(let Ct=0,Zt=ht.length;Ct<Zt;Ct++){const en=ht[Ct],At=n.get(en);let Lt=i.TEXTURE_2D;(de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(Lt=de.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Lt,At.__webglTexture),Ye(Lt,en),Tt(Le.__webglFramebuffer,de,en,i.COLOR_ATTACHMENT0+Ct,Lt,0),E(en)&&M(Lt)}t.unbindTexture()}else{let Ct=i.TEXTURE_2D;if((de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(Ct=de.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Ct,We.__webglTexture),Ye(Ct,J),J.mipmaps&&J.mipmaps.length>0)for(let Zt=0;Zt<J.mipmaps.length;Zt++)Tt(Le.__webglFramebuffer[Zt],de,J,i.COLOR_ATTACHMENT0,Ct,Zt);else Tt(Le.__webglFramebuffer,de,J,i.COLOR_ATTACHMENT0,Ct,0);E(J)&&M(Ct),t.unbindTexture()}de.depthBuffer&&ln(de)}function Je(de){const J=de.textures;for(let Le=0,We=J.length;Le<We;Le++){const ht=J[Le];if(E(ht)){const Qe=P(de),nn=n.get(ht).__webglTexture;t.bindTexture(Qe,nn),M(Qe),t.unbindTexture()}}}const et=[],tt=[];function ke(de){if(de.samples>0){if(ft(de)===!1){const J=de.textures,Le=de.width,We=de.height;let ht=i.COLOR_BUFFER_BIT;const Qe=de.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,nn=n.get(de),Ct=J.length>1;if(Ct)for(let en=0;en<J.length;en++)t.bindFramebuffer(i.FRAMEBUFFER,nn.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+en,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,nn.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+en,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,nn.__webglMultisampledFramebuffer);const Zt=de.texture.mipmaps;Zt&&Zt.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,nn.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,nn.__webglFramebuffer);for(let en=0;en<J.length;en++){if(de.resolveDepthBuffer&&(de.depthBuffer&&(ht|=i.DEPTH_BUFFER_BIT),de.stencilBuffer&&de.resolveStencilBuffer&&(ht|=i.STENCIL_BUFFER_BIT)),Ct){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,nn.__webglColorRenderbuffer[en]);const At=n.get(J[en]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,At,0)}i.blitFramebuffer(0,0,Le,We,0,0,Le,We,ht,i.NEAREST),l===!0&&(et.length=0,tt.length=0,et.push(i.COLOR_ATTACHMENT0+en),de.depthBuffer&&de.resolveDepthBuffer===!1&&(et.push(Qe),tt.push(Qe),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,tt)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,et))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ct)for(let en=0;en<J.length;en++){t.bindFramebuffer(i.FRAMEBUFFER,nn.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+en,i.RENDERBUFFER,nn.__webglColorRenderbuffer[en]);const At=n.get(J[en]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,nn.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+en,i.TEXTURE_2D,At,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,nn.__webglMultisampledFramebuffer)}else if(de.depthBuffer&&de.resolveDepthBuffer===!1&&l){const J=de.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[J])}}}function xt(de){return Math.min(r.maxSamples,de.samples)}function ft(de){const J=n.get(de);return de.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&J.__useRenderToTexture!==!1}function wt(de){const J=a.render.frame;c.get(de)!==J&&(c.set(de,J),de.update())}function cn(de,J){const Le=de.colorSpace,We=de.format,ht=de.type;return de.isCompressedTexture===!0||de.isVideoTexture===!0||Le!==Ll&&Le!==Ea&&(gn.getTransfer(Le)===Ht?(We!==nr||ht!==Ar)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Le)),J}function Sn(de){return typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement?(u.width=de.naturalWidth||de.width,u.height=de.naturalHeight||de.height):typeof VideoFrame<"u"&&de instanceof VideoFrame?(u.width=de.displayWidth,u.height=de.displayHeight):(u.width=de.width,u.height=de.height),u}this.allocateTextureUnit=K,this.resetTextureUnits=$,this.setTexture2D=ee,this.setTexture2DArray=X,this.setTexture3D=re,this.setTextureCube=se,this.rebindTextures=Dn,this.setupRenderTarget=pe,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=ln,this.setupFrameBufferTexture=Tt,this.useMultisampledRTT=ft}function qN(i,e){function t(n,r=Ea){let s;const a=gn.getTransfer(r);if(n===Ar)return i.UNSIGNED_BYTE;if(n===Z6)return i.UNSIGNED_SHORT_4_4_4_4;if(n===J6)return i.UNSIGNED_SHORT_5_5_5_1;if(n===e7)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===t7)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===Lu)return i.BYTE;if(n===Iu)return i.SHORT;if(n===Xo)return i.UNSIGNED_SHORT;if(n===rs)return i.INT;if(n===zi)return i.UNSIGNED_INT;if(n===or)return i.FLOAT;if(n===$r)return i.HALF_FLOAT;if(n===sp)return i.ALPHA;if(n===e8)return i.RGB;if(n===nr)return i.RGBA;if(n===Ya)return i.DEPTH_COMPONENT;if(n===Qa)return i.DEPTH_STENCIL;if(n===a3)return i.RED;if(n===Hu)return i.RED_INTEGER;if(n===Sl)return i.RG;if(n===o3)return i.RG_INTEGER;if(n===l3)return i.RGBA_INTEGER;if(n===b1||n===S1||n===T1||n===M1)if(a===Ht)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===b1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===S1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===T1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===M1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===b1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===S1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===T1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===M1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===N5||n===P5||n===D5||n===B5)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===N5)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===P5)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===D5)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===B5)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===Cc||n===Nc||n===Pc)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===Cc||n===Nc)return a===Ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Pc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Dc||n===Bc||n===Lc||n===Ic||n===Uc||n===Oc||n===Fc||n===Vc||n===zc||n===Gc||n===qc||n===kc||n===Hc||n===Wc)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===Dc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Bc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Lc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Ic)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Uc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Oc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Fc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Vc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===zc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Gc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===qc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===kc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Hc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Wc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===jc||n===zd||n===Gd)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===jc)return a===Ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===zd)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Gd)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Xc||n===Yc||n===Qc||n===$c)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===Xc)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Yc)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Qc)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===$c)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Xa?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const Qj=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,$j=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Kj{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new dx(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new Na({vertexShader:Qj,fragmentShader:$j,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Jn(new d3(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Zj extends No{constructor(e,t){super();const n=this;let r=null,s=1,a=null,o="local-floor",l=1,u=null,c=null,p=null,y=null,_=null,b=null;const w=typeof XRWebGLBinding<"u",E=new Kj,M={},P=t.getContextAttributes();let D=null,B=null;const U=[],O=[],z=new He;let q=null;const F=new ar;F.viewport=new an;const G=new ar;G.viewport=new an;const j=[F,G],$=new Hx;let K=null,ie=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Oe){let Xe=U[Oe];return Xe===void 0&&(Xe=new n6,U[Oe]=Xe),Xe.getTargetRaySpace()},this.getControllerGrip=function(Oe){let Xe=U[Oe];return Xe===void 0&&(Xe=new n6,U[Oe]=Xe),Xe.getGripSpace()},this.getHand=function(Oe){let Xe=U[Oe];return Xe===void 0&&(Xe=new n6,U[Oe]=Xe),Xe.getHandSpace()};function ee(Oe){const Xe=O.indexOf(Oe.inputSource);if(Xe===-1)return;const Tt=U[Xe];Tt!==void 0&&(Tt.update(Oe.inputSource,Oe.frame,u||a),Tt.dispatchEvent({type:Oe.type,data:Oe.inputSource}))}function X(){r.removeEventListener("select",ee),r.removeEventListener("selectstart",ee),r.removeEventListener("selectend",ee),r.removeEventListener("squeeze",ee),r.removeEventListener("squeezestart",ee),r.removeEventListener("squeezeend",ee),r.removeEventListener("end",X),r.removeEventListener("inputsourceschange",re);for(let Oe=0;Oe<U.length;Oe++){const Xe=O[Oe];Xe!==null&&(O[Oe]=null,U[Oe].disconnect(Xe))}K=null,ie=null,E.reset();for(const Oe in M)delete M[Oe];e.setRenderTarget(D),_=null,y=null,p=null,r=null,B=null,yt.stop(),n.isPresenting=!1,e.setPixelRatio(q),e.setSize(z.width,z.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Oe){s=Oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Oe){o=Oe,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(Oe){u=Oe},this.getBaseLayer=function(){return y!==null?y:_},this.getBinding=function(){return p===null&&w&&(p=new XRWebGLBinding(r,t)),p},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(Oe){if(r=Oe,r!==null){if(D=e.getRenderTarget(),r.addEventListener("select",ee),r.addEventListener("selectstart",ee),r.addEventListener("selectend",ee),r.addEventListener("squeeze",ee),r.addEventListener("squeezestart",ee),r.addEventListener("squeezeend",ee),r.addEventListener("end",X),r.addEventListener("inputsourceschange",re),P.xrCompatible!==!0&&await t.makeXRCompatible(),q=e.getPixelRatio(),e.getSize(z),w&&"createProjectionLayer"in XRWebGLBinding.prototype){let Tt=null,Ft=null,Pt=null;P.depth&&(Pt=P.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Tt=P.stencil?Qa:Ya,Ft=P.stencil?Xa:zi);const ln={colorFormat:t.RGBA8,depthFormat:Pt,scaleFactor:s};p=this.getBinding(),y=p.createProjectionLayer(ln),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),B=new Il(y.textureWidth,y.textureHeight,{format:nr,type:Ar,depthTexture:new Ka(y.textureWidth,y.textureHeight,Ft,void 0,void 0,void 0,void 0,void 0,void 0,Tt),stencilBuffer:P.stencil,colorSpace:e.outputColorSpace,samples:P.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Tt={antialias:P.antialias,alpha:!0,depth:P.depth,stencil:P.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(r,t,Tt),r.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),B=new Il(_.framebufferWidth,_.framebufferHeight,{format:nr,type:Ar,colorSpace:e.outputColorSpace,stencilBuffer:P.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}B.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await r.requestReferenceSpace(o),yt.setContext(r),yt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return E.getDepthTexture()};function re(Oe){for(let Xe=0;Xe<Oe.removed.length;Xe++){const Tt=Oe.removed[Xe],Ft=O.indexOf(Tt);Ft>=0&&(O[Ft]=null,U[Ft].disconnect(Tt))}for(let Xe=0;Xe<Oe.added.length;Xe++){const Tt=Oe.added[Xe];let Ft=O.indexOf(Tt);if(Ft===-1){for(let ln=0;ln<U.length;ln++)if(ln>=O.length){O.push(Tt),Ft=ln;break}else if(O[ln]===null){O[ln]=Tt,Ft=ln;break}if(Ft===-1)break}const Pt=U[Ft];Pt&&Pt.connect(Tt)}}const se=new te,Ae=new te;function Se(Oe,Xe,Tt){se.setFromMatrixPosition(Xe.matrixWorld),Ae.setFromMatrixPosition(Tt.matrixWorld);const Ft=se.distanceTo(Ae),Pt=Xe.projectionMatrix.elements,ln=Tt.projectionMatrix.elements,Dn=Pt[14]/(Pt[10]-1),pe=Pt[14]/(Pt[10]+1),Je=(Pt[9]+1)/Pt[5],et=(Pt[9]-1)/Pt[5],tt=(Pt[8]-1)/Pt[0],ke=(ln[8]+1)/ln[0],xt=Dn*tt,ft=Dn*ke,wt=Ft/(-tt+ke),cn=wt*-tt;if(Xe.matrixWorld.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.translateX(cn),Oe.translateZ(wt),Oe.matrixWorld.compose(Oe.position,Oe.quaternion,Oe.scale),Oe.matrixWorldInverse.copy(Oe.matrixWorld).invert(),Pt[10]===-1)Oe.projectionMatrix.copy(Xe.projectionMatrix),Oe.projectionMatrixInverse.copy(Xe.projectionMatrixInverse);else{const Sn=Dn+wt,de=pe+wt,J=xt-cn,Le=ft+(Ft-cn),We=Je*pe/de*Sn,ht=et*pe/de*Sn;Oe.projectionMatrix.makePerspective(J,Le,We,ht,Sn,de),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert()}}function Ce(Oe,Xe){Xe===null?Oe.matrixWorld.copy(Oe.matrix):Oe.matrixWorld.multiplyMatrices(Xe.matrixWorld,Oe.matrix),Oe.matrixWorldInverse.copy(Oe.matrixWorld).invert()}this.updateCamera=function(Oe){if(r===null)return;let Xe=Oe.near,Tt=Oe.far;E.texture!==null&&(E.depthNear>0&&(Xe=E.depthNear),E.depthFar>0&&(Tt=E.depthFar)),$.near=G.near=F.near=Xe,$.far=G.far=F.far=Tt,(K!==$.near||ie!==$.far)&&(r.updateRenderState({depthNear:$.near,depthFar:$.far}),K=$.near,ie=$.far),$.layers.mask=Oe.layers.mask|6,F.layers.mask=$.layers.mask&3,G.layers.mask=$.layers.mask&5;const Ft=Oe.parent,Pt=$.cameras;Ce($,Ft);for(let ln=0;ln<Pt.length;ln++)Ce(Pt[ln],Ft);Pt.length===2?Se($,F,G):$.projectionMatrix.copy(F.projectionMatrix),Ye(Oe,$,Ft)};function Ye(Oe,Xe,Tt){Tt===null?Oe.matrix.copy(Xe.matrixWorld):(Oe.matrix.copy(Tt.matrixWorld),Oe.matrix.invert(),Oe.matrix.multiply(Xe.matrixWorld)),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.updateMatrixWorld(!0),Oe.projectionMatrix.copy(Xe.projectionMatrix),Oe.projectionMatrixInverse.copy(Xe.projectionMatrixInverse),Oe.isPerspectiveCamera&&(Oe.fov=Zc*2*Math.atan(1/Oe.projectionMatrix.elements[5]),Oe.zoom=1)}this.getCamera=function(){return $},this.getFoveation=function(){if(!(y===null&&_===null))return l},this.setFoveation=function(Oe){l=Oe,y!==null&&(y.fixedFoveation=Oe),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=Oe)},this.hasDepthSensing=function(){return E.texture!==null},this.getDepthSensingMesh=function(){return E.getMesh($)},this.getCameraTexture=function(Oe){return M[Oe]};let it=null;function pt(Oe,Xe){if(c=Xe.getViewerPose(u||a),b=Xe,c!==null){const Tt=c.views;_!==null&&(e.setRenderTargetFramebuffer(B,_.framebuffer),e.setRenderTarget(B));let Ft=!1;Tt.length!==$.cameras.length&&($.cameras.length=0,Ft=!0);for(let pe=0;pe<Tt.length;pe++){const Je=Tt[pe];let et=null;if(_!==null)et=_.getViewport(Je);else{const ke=p.getViewSubImage(y,Je);et=ke.viewport,pe===0&&(e.setRenderTargetTextures(B,ke.colorTexture,ke.depthStencilTexture),e.setRenderTarget(B))}let tt=j[pe];tt===void 0&&(tt=new ar,tt.layers.enable(pe),tt.viewport=new an,j[pe]=tt),tt.matrix.fromArray(Je.transform.matrix),tt.matrix.decompose(tt.position,tt.quaternion,tt.scale),tt.projectionMatrix.fromArray(Je.projectionMatrix),tt.projectionMatrixInverse.copy(tt.projectionMatrix).invert(),tt.viewport.set(et.x,et.y,et.width,et.height),pe===0&&($.matrix.copy(tt.matrix),$.matrix.decompose($.position,$.quaternion,$.scale)),Ft===!0&&$.cameras.push(tt)}const Pt=r.enabledFeatures;if(Pt&&Pt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&w){p=n.getBinding();const pe=p.getDepthInformation(Tt[0]);pe&&pe.isValid&&pe.texture&&E.init(pe,r.renderState)}if(Pt&&Pt.includes("camera-access")&&w){e.state.unbindTexture(),p=n.getBinding();for(let pe=0;pe<Tt.length;pe++){const Je=Tt[pe].camera;if(Je){let et=M[Je];et||(et=new dx,M[Je]=et);const tt=p.getCameraImage(Je);et.sourceTexture=tt}}}}for(let Tt=0;Tt<U.length;Tt++){const Ft=O[Tt],Pt=U[Tt];Ft!==null&&Pt!==void 0&&Pt.update(Ft,Xe,u||a)}it&&it(Oe,Xe),Xe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Xe}),b=null}const yt=new ON;yt.setAnimationLoop(pt),this.setAnimationLoop=function(Oe){it=Oe},this.dispose=function(){}}}const G2=new bs,Jj=new $t;function eX(i,e){function t(E,M){E.matrixAutoUpdate===!0&&E.updateMatrix(),M.value.copy(E.matrix)}function n(E,M){M.color.getRGB(E.fogColor.value,nN(i)),M.isFog?(E.fogNear.value=M.near,E.fogFar.value=M.far):M.isFogExp2&&(E.fogDensity.value=M.density)}function r(E,M,P,D,B){M.isMeshBasicMaterial||M.isMeshLambertMaterial?s(E,M):M.isMeshToonMaterial?(s(E,M),p(E,M)):M.isMeshPhongMaterial?(s(E,M),c(E,M)):M.isMeshStandardMaterial?(s(E,M),y(E,M),M.isMeshPhysicalMaterial&&_(E,M,B)):M.isMeshMatcapMaterial?(s(E,M),b(E,M)):M.isMeshDepthMaterial?s(E,M):M.isMeshDistanceMaterial?(s(E,M),w(E,M)):M.isMeshNormalMaterial?s(E,M):M.isLineBasicMaterial?(a(E,M),M.isLineDashedMaterial&&o(E,M)):M.isPointsMaterial?l(E,M,P,D):M.isSpriteMaterial?u(E,M):M.isShadowMaterial?(E.color.value.copy(M.color),E.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function s(E,M){E.opacity.value=M.opacity,M.color&&E.diffuse.value.copy(M.color),M.emissive&&E.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(E.map.value=M.map,t(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.bumpMap&&(E.bumpMap.value=M.bumpMap,t(M.bumpMap,E.bumpMapTransform),E.bumpScale.value=M.bumpScale,M.side===Fi&&(E.bumpScale.value*=-1)),M.normalMap&&(E.normalMap.value=M.normalMap,t(M.normalMap,E.normalMapTransform),E.normalScale.value.copy(M.normalScale),M.side===Fi&&E.normalScale.value.negate()),M.displacementMap&&(E.displacementMap.value=M.displacementMap,t(M.displacementMap,E.displacementMapTransform),E.displacementScale.value=M.displacementScale,E.displacementBias.value=M.displacementBias),M.emissiveMap&&(E.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,E.emissiveMapTransform)),M.specularMap&&(E.specularMap.value=M.specularMap,t(M.specularMap,E.specularMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest);const P=e.get(M),D=P.envMap,B=P.envMapRotation;D&&(E.envMap.value=D,G2.copy(B),G2.x*=-1,G2.y*=-1,G2.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(G2.y*=-1,G2.z*=-1),E.envMapRotation.value.setFromMatrix4(Jj.makeRotationFromEuler(G2)),E.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,E.reflectivity.value=M.reflectivity,E.ior.value=M.ior,E.refractionRatio.value=M.refractionRatio),M.lightMap&&(E.lightMap.value=M.lightMap,E.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,E.lightMapTransform)),M.aoMap&&(E.aoMap.value=M.aoMap,E.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,E.aoMapTransform))}function a(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,M.map&&(E.map.value=M.map,t(M.map,E.mapTransform))}function o(E,M){E.dashSize.value=M.dashSize,E.totalSize.value=M.dashSize+M.gapSize,E.scale.value=M.scale}function l(E,M,P,D){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.size.value=M.size*P,E.scale.value=D*.5,M.map&&(E.map.value=M.map,t(M.map,E.uvTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function u(E,M){E.diffuse.value.copy(M.color),E.opacity.value=M.opacity,E.rotation.value=M.rotation,M.map&&(E.map.value=M.map,t(M.map,E.mapTransform)),M.alphaMap&&(E.alphaMap.value=M.alphaMap,t(M.alphaMap,E.alphaMapTransform)),M.alphaTest>0&&(E.alphaTest.value=M.alphaTest)}function c(E,M){E.specular.value.copy(M.specular),E.shininess.value=Math.max(M.shininess,1e-4)}function p(E,M){M.gradientMap&&(E.gradientMap.value=M.gradientMap)}function y(E,M){E.metalness.value=M.metalness,M.metalnessMap&&(E.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,E.metalnessMapTransform)),E.roughness.value=M.roughness,M.roughnessMap&&(E.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,E.roughnessMapTransform)),M.envMap&&(E.envMapIntensity.value=M.envMapIntensity)}function _(E,M,P){E.ior.value=M.ior,M.sheen>0&&(E.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),E.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(E.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,E.sheenColorMapTransform)),M.sheenRoughnessMap&&(E.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,E.sheenRoughnessMapTransform))),M.clearcoat>0&&(E.clearcoat.value=M.clearcoat,E.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(E.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,E.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(E.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,E.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(E.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,E.clearcoatNormalMapTransform),E.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Fi&&E.clearcoatNormalScale.value.negate())),M.dispersion>0&&(E.dispersion.value=M.dispersion),M.iridescence>0&&(E.iridescence.value=M.iridescence,E.iridescenceIOR.value=M.iridescenceIOR,E.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],E.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(E.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,E.iridescenceMapTransform)),M.iridescenceThicknessMap&&(E.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,E.iridescenceThicknessMapTransform))),M.transmission>0&&(E.transmission.value=M.transmission,E.transmissionSamplerMap.value=P.texture,E.transmissionSamplerSize.value.set(P.width,P.height),M.transmissionMap&&(E.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,E.transmissionMapTransform)),E.thickness.value=M.thickness,M.thicknessMap&&(E.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,E.thicknessMapTransform)),E.attenuationDistance.value=M.attenuationDistance,E.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(E.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(E.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,E.anisotropyMapTransform))),E.specularIntensity.value=M.specularIntensity,E.specularColor.value.copy(M.specularColor),M.specularColorMap&&(E.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,E.specularColorMapTransform)),M.specularIntensityMap&&(E.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,E.specularIntensityMapTransform))}function b(E,M){M.matcap&&(E.matcap.value=M.matcap)}function w(E,M){const P=e.get(M).light;E.referencePosition.value.setFromMatrixPosition(P.matrixWorld),E.nearDistance.value=P.shadow.camera.near,E.farDistance.value=P.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function tX(i,e,t,n){let r={},s={},a=[];const o=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(P,D){const B=D.program;n.uniformBlockBinding(P,B)}function u(P,D){let B=r[P.id];B===void 0&&(b(P),B=c(P),r[P.id]=B,P.addEventListener("dispose",E));const U=D.program;n.updateUBOMapping(P,U);const O=e.render.frame;s[P.id]!==O&&(y(P),s[P.id]=O)}function c(P){const D=p();P.__bindingPointIndex=D;const B=i.createBuffer(),U=P.__size,O=P.usage;return i.bindBuffer(i.UNIFORM_BUFFER,B),i.bufferData(i.UNIFORM_BUFFER,U,O),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,D,B),B}function p(){for(let P=0;P<o;P++)if(a.indexOf(P)===-1)return a.push(P),P;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(P){const D=r[P.id],B=P.uniforms,U=P.__cache;i.bindBuffer(i.UNIFORM_BUFFER,D);for(let O=0,z=B.length;O<z;O++){const q=Array.isArray(B[O])?B[O]:[B[O]];for(let F=0,G=q.length;F<G;F++){const j=q[F];if(_(j,O,F,U)===!0){const $=j.__offset,K=Array.isArray(j.value)?j.value:[j.value];let ie=0;for(let ee=0;ee<K.length;ee++){const X=K[ee],re=w(X);typeof X=="number"||typeof X=="boolean"?(j.__data[0]=X,i.bufferSubData(i.UNIFORM_BUFFER,$+ie,j.__data)):X.isMatrix3?(j.__data[0]=X.elements[0],j.__data[1]=X.elements[1],j.__data[2]=X.elements[2],j.__data[3]=0,j.__data[4]=X.elements[3],j.__data[5]=X.elements[4],j.__data[6]=X.elements[5],j.__data[7]=0,j.__data[8]=X.elements[6],j.__data[9]=X.elements[7],j.__data[10]=X.elements[8],j.__data[11]=0):(X.toArray(j.__data,ie),ie+=re.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,$,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(P,D,B,U){const O=P.value,z=D+"_"+B;if(U[z]===void 0)return typeof O=="number"||typeof O=="boolean"?U[z]=O:U[z]=O.clone(),!0;{const q=U[z];if(typeof O=="number"||typeof O=="boolean"){if(q!==O)return U[z]=O,!0}else if(q.equals(O)===!1)return q.copy(O),!0}return!1}function b(P){const D=P.uniforms;let B=0;const U=16;for(let z=0,q=D.length;z<q;z++){const F=Array.isArray(D[z])?D[z]:[D[z]];for(let G=0,j=F.length;G<j;G++){const $=F[G],K=Array.isArray($.value)?$.value:[$.value];for(let ie=0,ee=K.length;ie<ee;ie++){const X=K[ie],re=w(X),se=B%U,Ae=se%re.boundary,Se=se+Ae;B+=Ae,Se!==0&&U-Se<re.storage&&(B+=U-Se),$.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=B,B+=re.storage}}}const O=B%U;return O>0&&(B+=U-O),P.__size=B,P.__cache={},this}function w(P){const D={boundary:0,storage:0};return typeof P=="number"||typeof P=="boolean"?(D.boundary=4,D.storage=4):P.isVector2?(D.boundary=8,D.storage=8):P.isVector3||P.isColor?(D.boundary=16,D.storage=12):P.isVector4?(D.boundary=16,D.storage=16):P.isMatrix3?(D.boundary=48,D.storage=48):P.isMatrix4?(D.boundary=64,D.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),D}function E(P){const D=P.target;D.removeEventListener("dispose",E);const B=a.indexOf(D.__bindingPointIndex);a.splice(B,1),i.deleteBuffer(r[D.id]),delete r[D.id],delete s[D.id]}function M(){for(const P in r)i.deleteBuffer(r[P]);a=[],r={},s={}}return{bind:l,update:u,dispose:M}}class kN{constructor(e={}){const{canvas:t=ax(),context:n=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:p=!1,reversedDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=a;const b=new Uint32Array(4),w=new Int32Array(4);let E=null,M=null;const P=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=oa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const B=this;let U=!1;this._outputColorSpace=Qr;let O=0,z=0,q=null,F=-1,G=null;const j=new an,$=new an;let K=null;const ie=new Dt(0);let ee=0,X=t.width,re=t.height,se=1,Ae=null,Se=null;const Ce=new an(0,0,X,re),Ye=new an(0,0,X,re);let it=!1;const pt=new ju;let yt=!1,Oe=!1;const Xe=new $t,Tt=new te,Ft=new an,Pt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ln=!1;function Dn(){return q===null?se:1}let pe=n;function Je(ae,Ee){return t.getContext(ae,Ee)}try{const ae={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Z5}`),t.addEventListener("webglcontextlost",bt,!1),t.addEventListener("webglcontextrestored",Gt,!1),t.addEventListener("webglcontextcreationerror",vt,!1),pe===null){const Ee="webgl2";if(pe=Je(Ee,ae),pe===null)throw Je(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let et,tt,ke,xt,ft,wt,cn,Sn,de,J,Le,We,ht,Qe,nn,Ct,Zt,en,At,Lt,dn,ge,Ue,Mt;function le(){et=new dW(pe),et.init(),ge=new qN(pe,et),tt=new aW(pe,et,e,ge),ke=new Xj(pe,et),tt.reversedDepthBuffer&&y&&ke.buffers.depth.setReversed(!0),xt=new mW(pe),ft=new Lj,wt=new Yj(pe,et,ke,ft,tt,ge,xt),cn=new lW(B),Sn=new fW(B),de=new bq(pe),Ue=new rW(pe,de),J=new AW(pe,de,xt,Ue),Le=new yW(pe,J,de,xt),At=new gW(pe,tt,wt),Ct=new oW(ft),We=new Bj(B,cn,Sn,et,tt,Ue,Ct),ht=new eX(B,ft),Qe=new Uj,nn=new qj(et),en=new iW(B,cn,Sn,ke,Le,_,l),Zt=new Wj(B,Le,tt),Mt=new tX(pe,xt,tt,ke),Lt=new sW(pe,et,xt),dn=new pW(pe,et,xt),xt.programs=We.programs,B.capabilities=tt,B.extensions=et,B.properties=ft,B.renderLists=Qe,B.shadowMap=Zt,B.state=ke,B.info=xt}le();const ut=new Zj(B,pe);this.xr=ut,this.getContext=function(){return pe},this.getContextAttributes=function(){return pe.getContextAttributes()},this.forceContextLoss=function(){const ae=et.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=et.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return se},this.setPixelRatio=function(ae){ae!==void 0&&(se=ae,this.setSize(X,re,!1))},this.getSize=function(ae){return ae.set(X,re)},this.setSize=function(ae,Ee,Pe=!0){if(ut.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}X=ae,re=Ee,t.width=Math.floor(ae*se),t.height=Math.floor(Ee*se),Pe===!0&&(t.style.width=ae+"px",t.style.height=Ee+"px"),this.setViewport(0,0,ae,Ee)},this.getDrawingBufferSize=function(ae){return ae.set(X*se,re*se).floor()},this.setDrawingBufferSize=function(ae,Ee,Pe){X=ae,re=Ee,se=Pe,t.width=Math.floor(ae*Pe),t.height=Math.floor(Ee*Pe),this.setViewport(0,0,ae,Ee)},this.getCurrentViewport=function(ae){return ae.copy(j)},this.getViewport=function(ae){return ae.copy(Ce)},this.setViewport=function(ae,Ee,Pe,Ge){ae.isVector4?Ce.set(ae.x,ae.y,ae.z,ae.w):Ce.set(ae,Ee,Pe,Ge),ke.viewport(j.copy(Ce).multiplyScalar(se).round())},this.getScissor=function(ae){return ae.copy(Ye)},this.setScissor=function(ae,Ee,Pe,Ge){ae.isVector4?Ye.set(ae.x,ae.y,ae.z,ae.w):Ye.set(ae,Ee,Pe,Ge),ke.scissor($.copy(Ye).multiplyScalar(se).round())},this.getScissorTest=function(){return it},this.setScissorTest=function(ae){ke.setScissorTest(it=ae)},this.setOpaqueSort=function(ae){Ae=ae},this.setTransparentSort=function(ae){Se=ae},this.getClearColor=function(ae){return ae.copy(en.getClearColor())},this.setClearColor=function(){en.setClearColor(...arguments)},this.getClearAlpha=function(){return en.getClearAlpha()},this.setClearAlpha=function(){en.setClearAlpha(...arguments)},this.clear=function(ae=!0,Ee=!0,Pe=!0){let Ge=0;if(ae){let we=!1;if(q!==null){const _t=q.texture.format;we=_t===l3||_t===o3||_t===Hu}if(we){const _t=q.texture.type,Ut=_t===Ar||_t===zi||_t===Xo||_t===Xa||_t===Z6||_t===J6,kt=en.getClearColor(),ot=en.getClearAlpha(),Z=kt.r,gt=kt.g,mn=kt.b;Ut?(b[0]=Z,b[1]=gt,b[2]=mn,b[3]=ot,pe.clearBufferuiv(pe.COLOR,0,b)):(w[0]=Z,w[1]=gt,w[2]=mn,w[3]=ot,pe.clearBufferiv(pe.COLOR,0,w))}else Ge|=pe.COLOR_BUFFER_BIT}Ee&&(Ge|=pe.DEPTH_BUFFER_BIT),Pe&&(Ge|=pe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),pe.clear(Ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",bt,!1),t.removeEventListener("webglcontextrestored",Gt,!1),t.removeEventListener("webglcontextcreationerror",vt,!1),en.dispose(),Qe.dispose(),nn.dispose(),ft.dispose(),cn.dispose(),Sn.dispose(),Le.dispose(),Ue.dispose(),Mt.dispose(),We.dispose(),ut.dispose(),ut.removeEventListener("sessionstart",ur),ut.removeEventListener("sessionend",Ve),nt.stop()};function bt(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function Gt(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const ae=xt.autoReset,Ee=Zt.enabled,Pe=Zt.autoUpdate,Ge=Zt.needsUpdate,we=Zt.type;le(),xt.autoReset=ae,Zt.enabled=Ee,Zt.autoUpdate=Pe,Zt.needsUpdate=Ge,Zt.type=we}function vt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function at(ae){const Ee=ae.target;Ee.removeEventListener("dispose",at),qt(Ee)}function qt(ae){hn(ae),ft.remove(ae)}function hn(ae){const Ee=ft.get(ae).programs;Ee!==void 0&&(Ee.forEach(function(Pe){We.releaseProgram(Pe)}),ae.isShaderMaterial&&We.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,Ee,Pe,Ge,we,_t){Ee===null&&(Ee=Pt);const Ut=we.isMesh&&we.matrixWorld.determinant()<0,kt=ri(ae,Ee,Pe,Ge,we);ke.setMaterial(Ge,Ut);let ot=Pe.index,Z=1;if(Ge.wireframe===!0){if(ot=J.getWireframeAttribute(Pe),ot===void 0)return;Z=2}const gt=Pe.drawRange,mn=Pe.attributes.position;let ti=gt.start*Z,bi=(gt.start+gt.count)*Z;_t!==null&&(ti=Math.max(ti,_t.start*Z),bi=Math.min(bi,(_t.start+_t.count)*Z)),ot!==null?(ti=Math.max(ti,0),bi=Math.min(bi,ot.count)):mn!=null&&(ti=Math.max(ti,0),bi=Math.min(bi,mn.count));const Ki=bi-ti;if(Ki<0||Ki===1/0)return;Ue.setup(we,Ge,kt,Pe,ot);let Bi,Y=Lt;if(ot!==null&&(Bi=de.get(ot),Y=dn,Y.setIndex(Bi)),we.isMesh)Ge.wireframe===!0?(ke.setLineWidth(Ge.wireframeLinewidth*Dn()),Y.setMode(pe.LINES)):Y.setMode(pe.TRIANGLES);else if(we.isLine){let xn=Ge.linewidth;xn===void 0&&(xn=1),ke.setLineWidth(xn*Dn()),we.isLineSegments?Y.setMode(pe.LINES):we.isLineLoop?Y.setMode(pe.LINE_LOOP):Y.setMode(pe.LINE_STRIP)}else we.isPoints?Y.setMode(pe.POINTS):we.isSprite&&Y.setMode(pe.TRIANGLES);if(we.isBatchedMesh)if(we._multiDrawInstances!==null)la("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Y.renderMultiDrawInstances(we._multiDrawStarts,we._multiDrawCounts,we._multiDrawCount,we._multiDrawInstances);else if(et.get("WEBGL_multi_draw"))Y.renderMultiDraw(we._multiDrawStarts,we._multiDrawCounts,we._multiDrawCount);else{const xn=we._multiDrawStarts,Zi=we._multiDrawCounts,di=we._multiDrawCount,hs=ot?de.get(ot).bytesPerElement:1,h0=ft.get(Ge).currentProgram.getUniforms();for(let Jr=0;Jr<di;Jr++)h0.setValue(pe,"_gl_DrawID",Jr),Y.render(xn[Jr]/hs,Zi[Jr])}else if(we.isInstancedMesh)Y.renderInstances(ti,Ki,we.count);else if(Pe.isInstancedBufferGeometry){const xn=Pe._maxInstanceCount!==void 0?Pe._maxInstanceCount:1/0,Zi=Math.min(Pe.instanceCount,xn);Y.renderInstances(ti,Ki,Zi)}else Y.render(ti,Ki)};function ei(ae,Ee,Pe){ae.transparent===!0&&ae.side===Ur&&ae.forceSinglePass===!1?(ae.side=Fi,ae.needsUpdate=!0,ii(ae,Ee,Pe),ae.side=Wa,ae.needsUpdate=!0,ii(ae,Ee,Pe),ae.side=Ur):ii(ae,Ee,Pe)}this.compile=function(ae,Ee,Pe=null){Pe===null&&(Pe=ae),M=nn.get(Pe),M.init(Ee),D.push(M),Pe.traverseVisible(function(we){we.isLight&&we.layers.test(Ee.layers)&&(M.pushLight(we),we.castShadow&&M.pushShadow(we))}),ae!==Pe&&ae.traverseVisible(function(we){we.isLight&&we.layers.test(Ee.layers)&&(M.pushLight(we),we.castShadow&&M.pushShadow(we))}),M.setupLights();const Ge=new Set;return ae.traverse(function(we){if(!(we.isMesh||we.isPoints||we.isLine||we.isSprite))return;const _t=we.material;if(_t)if(Array.isArray(_t))for(let Ut=0;Ut<_t.length;Ut++){const kt=_t[Ut];ei(kt,Pe,we),Ge.add(kt)}else ei(_t,Pe,we),Ge.add(_t)}),M=D.pop(),Ge},this.compileAsync=function(ae,Ee,Pe=null){const Ge=this.compile(ae,Ee,Pe);return new Promise(we=>{function _t(){if(Ge.forEach(function(Ut){ft.get(Ut).currentProgram.isReady()&&Ge.delete(Ut)}),Ge.size===0){we(ae);return}setTimeout(_t,10)}et.get("KHR_parallel_shader_compile")!==null?_t():setTimeout(_t,10)})};let Hn=null;function Er(ae){Hn&&Hn(ae)}function ur(){nt.stop()}function Ve(){nt.start()}const nt=new ON;nt.setAnimationLoop(Er),typeof self<"u"&&nt.setContext(self),this.setAnimationLoop=function(ae){Hn=ae,ut.setAnimationLoop(ae),ae===null?nt.stop():nt.start()},ut.addEventListener("sessionstart",ur),ut.addEventListener("sessionend",Ve),this.render=function(ae,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),ut.enabled===!0&&ut.isPresenting===!0&&(ut.cameraAutoUpdate===!0&&ut.updateCamera(Ee),Ee=ut.getCamera()),ae.isScene===!0&&ae.onBeforeRender(B,ae,Ee,q),M=nn.get(ae,D.length),M.init(Ee),D.push(M),Xe.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),pt.setFromProjectionMatrix(Xe,Vs,Ee.reversedDepth),Oe=this.localClippingEnabled,yt=Ct.init(this.clippingPlanes,Oe),E=Qe.get(ae,P.length),E.init(),P.push(E),ut.enabled===!0&&ut.isPresenting===!0){const _t=B.xr.getDepthSensingMesh();_t!==null&&It(_t,Ee,-1/0,B.sortObjects)}It(ae,Ee,0,B.sortObjects),E.finish(),B.sortObjects===!0&&E.sort(Ae,Se),ln=ut.enabled===!1||ut.isPresenting===!1||ut.hasDepthSensing()===!1,ln&&en.addToRenderList(E,ae),this.info.render.frame++,yt===!0&&Ct.beginShadows();const Pe=M.state.shadowsArray;Zt.render(Pe,ae,Ee),yt===!0&&Ct.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ge=E.opaque,we=E.transmissive;if(M.setupLights(),Ee.isArrayCamera){const _t=Ee.cameras;if(we.length>0)for(let Ut=0,kt=_t.length;Ut<kt;Ut++){const ot=_t[Ut];f(Ge,we,ae,ot)}ln&&en.render(ae);for(let Ut=0,kt=_t.length;Ut<kt;Ut++){const ot=_t[Ut];rt(E,ae,ot,ot.viewport)}}else we.length>0&&f(Ge,we,ae,Ee),ln&&en.render(ae),rt(E,ae,Ee);q!==null&&z===0&&(wt.updateMultisampleRenderTarget(q),wt.updateRenderTargetMipmap(q)),ae.isScene===!0&&ae.onAfterRender(B,ae,Ee),Ue.resetDefaultState(),F=-1,G=null,D.pop(),D.length>0?(M=D[D.length-1],yt===!0&&Ct.setGlobalState(B.clippingPlanes,M.state.camera)):M=null,P.pop(),P.length>0?E=P[P.length-1]:E=null};function It(ae,Ee,Pe,Ge){if(ae.visible===!1)return;if(ae.layers.test(Ee.layers)){if(ae.isGroup)Pe=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(Ee);else if(ae.isLight)M.pushLight(ae),ae.castShadow&&M.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||pt.intersectsSprite(ae)){Ge&&Ft.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(Xe);const Ut=Le.update(ae),kt=ae.material;kt.visible&&E.push(ae,Ut,kt,Pe,Ft.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||pt.intersectsObject(ae))){const Ut=Le.update(ae),kt=ae.material;if(Ge&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),Ft.copy(ae.boundingSphere.center)):(Ut.boundingSphere===null&&Ut.computeBoundingSphere(),Ft.copy(Ut.boundingSphere.center)),Ft.applyMatrix4(ae.matrixWorld).applyMatrix4(Xe)),Array.isArray(kt)){const ot=Ut.groups;for(let Z=0,gt=ot.length;Z<gt;Z++){const mn=ot[Z],ti=kt[mn.materialIndex];ti&&ti.visible&&E.push(ae,Ut,ti,Pe,Ft.z,mn)}}else kt.visible&&E.push(ae,Ut,kt,Pe,Ft.z,null)}}const _t=ae.children;for(let Ut=0,kt=_t.length;Ut<kt;Ut++)It(_t[Ut],Ee,Pe,Ge)}function rt(ae,Ee,Pe,Ge){const we=ae.opaque,_t=ae.transmissive,Ut=ae.transparent;M.setupLightsView(Pe),yt===!0&&Ct.setGlobalState(B.clippingPlanes,Pe),Ge&&ke.viewport(j.copy(Ge)),we.length>0&&Q(we,Ee,Pe),_t.length>0&&Q(_t,Ee,Pe),Ut.length>0&&Q(Ut,Ee,Pe),ke.buffers.depth.setTest(!0),ke.buffers.depth.setMask(!0),ke.buffers.color.setMask(!0),ke.setPolygonOffset(!1)}function f(ae,Ee,Pe,Ge){if((Pe.isScene===!0?Pe.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[Ge.id]===void 0&&(M.state.transmissionRenderTarget[Ge.id]=new Il(1,1,{generateMipmaps:!0,type:et.has("EXT_color_buffer_half_float")||et.has("EXT_color_buffer_float")?$r:Ar,minFilter:Fs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:gn.workingColorSpace}));const _t=M.state.transmissionRenderTarget[Ge.id],Ut=Ge.viewport||j;_t.setSize(Ut.z*B.transmissionResolutionScale,Ut.w*B.transmissionResolutionScale);const kt=B.getRenderTarget(),ot=B.getActiveCubeFace(),Z=B.getActiveMipmapLevel();B.setRenderTarget(_t),B.getClearColor(ie),ee=B.getClearAlpha(),ee<1&&B.setClearColor(16777215,.5),B.clear(),ln&&en.render(Pe);const gt=B.toneMapping;B.toneMapping=oa;const mn=Ge.viewport;if(Ge.viewport!==void 0&&(Ge.viewport=void 0),M.setupLightsView(Ge),yt===!0&&Ct.setGlobalState(B.clippingPlanes,Ge),Q(ae,Pe,Ge),wt.updateMultisampleRenderTarget(_t),wt.updateRenderTargetMipmap(_t),et.has("WEBGL_multisampled_render_to_texture")===!1){let ti=!1;for(let bi=0,Ki=Ee.length;bi<Ki;bi++){const Bi=Ee[bi],Y=Bi.object,xn=Bi.geometry,Zi=Bi.material,di=Bi.group;if(Zi.side===Ur&&Y.layers.test(Ge.layers)){const hs=Zi.side;Zi.side=Fi,Zi.needsUpdate=!0,Gn(Y,Pe,Ge,xn,Zi,di),Zi.side=hs,Zi.needsUpdate=!0,ti=!0}}ti===!0&&(wt.updateMultisampleRenderTarget(_t),wt.updateRenderTargetMipmap(_t))}B.setRenderTarget(kt,ot,Z),B.setClearColor(ie,ee),mn!==void 0&&(Ge.viewport=mn),B.toneMapping=gt}function Q(ae,Ee,Pe){const Ge=Ee.isScene===!0?Ee.overrideMaterial:null;for(let we=0,_t=ae.length;we<_t;we++){const Ut=ae[we],kt=Ut.object,ot=Ut.geometry,Z=Ut.group;let gt=Ut.material;gt.allowOverride===!0&&Ge!==null&&(gt=Ge),kt.layers.test(Pe.layers)&&Gn(kt,Ee,Pe,ot,gt,Z)}}function Gn(ae,Ee,Pe,Ge,we,_t){ae.onBeforeRender(B,Ee,Pe,Ge,we,_t),ae.modelViewMatrix.multiplyMatrices(Pe.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),we.onBeforeRender(B,Ee,Pe,Ge,ae,_t),we.transparent===!0&&we.side===Ur&&we.forceSinglePass===!1?(we.side=Fi,we.needsUpdate=!0,B.renderBufferDirect(Pe,Ee,Ge,we,ae,_t),we.side=Wa,we.needsUpdate=!0,B.renderBufferDirect(Pe,Ee,Ge,we,ae,_t),we.side=Ur):B.renderBufferDirect(Pe,Ee,Ge,we,ae,_t),ae.onAfterRender(B,Ee,Pe,Ge,we,_t)}function ii(ae,Ee,Pe){Ee.isScene!==!0&&(Ee=Pt);const Ge=ft.get(ae),we=M.state.lights,_t=M.state.shadowsArray,Ut=we.state.version,kt=We.getParameters(ae,we.state,_t,Ee,Pe),ot=We.getProgramCacheKey(kt);let Z=Ge.programs;Ge.environment=ae.isMeshStandardMaterial?Ee.environment:null,Ge.fog=Ee.fog,Ge.envMap=(ae.isMeshStandardMaterial?Sn:cn).get(ae.envMap||Ge.environment),Ge.envMapRotation=Ge.environment!==null&&ae.envMap===null?Ee.environmentRotation:ae.envMapRotation,Z===void 0&&(ae.addEventListener("dispose",at),Z=new Map,Ge.programs=Z);let gt=Z.get(ot);if(gt!==void 0){if(Ge.currentProgram===gt&&Ge.lightsStateVersion===Ut)return Bn(ae,kt),gt}else kt.uniforms=We.getUniforms(ae),ae.onBeforeCompile(kt,B),gt=We.acquireProgram(kt,ot),Z.set(ot,gt),Ge.uniforms=kt.uniforms;const mn=Ge.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(mn.clippingPlanes=Ct.uniform),Bn(ae,kt),Ge.needsLights=fi(ae),Ge.lightsStateVersion=Ut,Ge.needsLights&&(mn.ambientLightColor.value=we.state.ambient,mn.lightProbe.value=we.state.probe,mn.directionalLights.value=we.state.directional,mn.directionalLightShadows.value=we.state.directionalShadow,mn.spotLights.value=we.state.spot,mn.spotLightShadows.value=we.state.spotShadow,mn.rectAreaLights.value=we.state.rectArea,mn.ltc_1.value=we.state.rectAreaLTC1,mn.ltc_2.value=we.state.rectAreaLTC2,mn.pointLights.value=we.state.point,mn.pointLightShadows.value=we.state.pointShadow,mn.hemisphereLights.value=we.state.hemi,mn.directionalShadowMap.value=we.state.directionalShadowMap,mn.directionalShadowMatrix.value=we.state.directionalShadowMatrix,mn.spotShadowMap.value=we.state.spotShadowMap,mn.spotLightMatrix.value=we.state.spotLightMatrix,mn.spotLightMap.value=we.state.spotLightMap,mn.pointShadowMap.value=we.state.pointShadowMap,mn.pointShadowMatrix.value=we.state.pointShadowMatrix),Ge.currentProgram=gt,Ge.uniformsList=null,gt}function $n(ae){if(ae.uniformsList===null){const Ee=ae.currentProgram.getUniforms();ae.uniformsList=_d.seqWithValue(Ee.seq,ae.uniforms)}return ae.uniformsList}function Bn(ae,Ee){const Pe=ft.get(ae);Pe.outputColorSpace=Ee.outputColorSpace,Pe.batching=Ee.batching,Pe.batchingColor=Ee.batchingColor,Pe.instancing=Ee.instancing,Pe.instancingColor=Ee.instancingColor,Pe.instancingMorph=Ee.instancingMorph,Pe.skinning=Ee.skinning,Pe.morphTargets=Ee.morphTargets,Pe.morphNormals=Ee.morphNormals,Pe.morphColors=Ee.morphColors,Pe.morphTargetsCount=Ee.morphTargetsCount,Pe.numClippingPlanes=Ee.numClippingPlanes,Pe.numIntersection=Ee.numClipIntersection,Pe.vertexAlphas=Ee.vertexAlphas,Pe.vertexTangents=Ee.vertexTangents,Pe.toneMapping=Ee.toneMapping}function ri(ae,Ee,Pe,Ge,we){Ee.isScene!==!0&&(Ee=Pt),wt.resetTextureUnits();const _t=Ee.fog,Ut=Ge.isMeshStandardMaterial?Ee.environment:null,kt=q===null?B.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:Ll,ot=(Ge.isMeshStandardMaterial?Sn:cn).get(Ge.envMap||Ut),Z=Ge.vertexColors===!0&&!!Pe.attributes.color&&Pe.attributes.color.itemSize===4,gt=!!Pe.attributes.tangent&&(!!Ge.normalMap||Ge.anisotropy>0),mn=!!Pe.morphAttributes.position,ti=!!Pe.morphAttributes.normal,bi=!!Pe.morphAttributes.color;let Ki=oa;Ge.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(Ki=B.toneMapping);const Bi=Pe.morphAttributes.position||Pe.morphAttributes.normal||Pe.morphAttributes.color,Y=Bi!==void 0?Bi.length:0,xn=ft.get(Ge),Zi=M.state.lights;if(yt===!0&&(Oe===!0||ae!==G)){const Ai=ae===G&&Ge.id===F;Ct.setState(Ge,ae,Ai)}let di=!1;Ge.version===xn.__version?(xn.needsLights&&xn.lightsStateVersion!==Zi.state.version||xn.outputColorSpace!==kt||we.isBatchedMesh&&xn.batching===!1||!we.isBatchedMesh&&xn.batching===!0||we.isBatchedMesh&&xn.batchingColor===!0&&we.colorTexture===null||we.isBatchedMesh&&xn.batchingColor===!1&&we.colorTexture!==null||we.isInstancedMesh&&xn.instancing===!1||!we.isInstancedMesh&&xn.instancing===!0||we.isSkinnedMesh&&xn.skinning===!1||!we.isSkinnedMesh&&xn.skinning===!0||we.isInstancedMesh&&xn.instancingColor===!0&&we.instanceColor===null||we.isInstancedMesh&&xn.instancingColor===!1&&we.instanceColor!==null||we.isInstancedMesh&&xn.instancingMorph===!0&&we.morphTexture===null||we.isInstancedMesh&&xn.instancingMorph===!1&&we.morphTexture!==null||xn.envMap!==ot||Ge.fog===!0&&xn.fog!==_t||xn.numClippingPlanes!==void 0&&(xn.numClippingPlanes!==Ct.numPlanes||xn.numIntersection!==Ct.numIntersection)||xn.vertexAlphas!==Z||xn.vertexTangents!==gt||xn.morphTargets!==mn||xn.morphNormals!==ti||xn.morphColors!==bi||xn.toneMapping!==Ki||xn.morphTargetsCount!==Y)&&(di=!0):(di=!0,xn.__version=Ge.version);let hs=xn.currentProgram;di===!0&&(hs=ii(Ge,Ee,we));let h0=!1,Jr=!1,f0=!1;const Vi=hs.getUniforms(),fs=xn.uniforms;if(ke.useProgram(hs.program)&&(h0=!0,Jr=!0,f0=!0),Ge.id!==F&&(F=Ge.id,Jr=!0),h0||G!==ae){ke.buffers.depth.getReversed()&&ae.reversedDepth!==!0&&(ae._reversedDepth=!0,ae.updateProjectionMatrix()),Vi.setValue(pe,"projectionMatrix",ae.projectionMatrix),Vi.setValue(pe,"viewMatrix",ae.matrixWorldInverse);const ds=Vi.map.cameraPosition;ds!==void 0&&ds.setValue(pe,Tt.setFromMatrixPosition(ae.matrixWorld)),tt.logarithmicDepthBuffer&&Vi.setValue(pe,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(Ge.isMeshPhongMaterial||Ge.isMeshToonMaterial||Ge.isMeshLambertMaterial||Ge.isMeshBasicMaterial||Ge.isMeshStandardMaterial||Ge.isShaderMaterial)&&Vi.setValue(pe,"isOrthographic",ae.isOrthographicCamera===!0),G!==ae&&(G=ae,Jr=!0,f0=!0)}if(we.isSkinnedMesh){Vi.setOptional(pe,we,"bindMatrix"),Vi.setOptional(pe,we,"bindMatrixInverse");const Ai=we.skeleton;Ai&&(Ai.boneTexture===null&&Ai.computeBoneTexture(),Vi.setValue(pe,"boneTexture",Ai.boneTexture,wt))}we.isBatchedMesh&&(Vi.setOptional(pe,we,"batchingTexture"),Vi.setValue(pe,"batchingTexture",we._matricesTexture,wt),Vi.setOptional(pe,we,"batchingIdTexture"),Vi.setValue(pe,"batchingIdTexture",we._indirectTexture,wt),Vi.setOptional(pe,we,"batchingColorTexture"),we._colorsTexture!==null&&Vi.setValue(pe,"batchingColorTexture",we._colorsTexture,wt));const ir=Pe.morphAttributes;if((ir.position!==void 0||ir.normal!==void 0||ir.color!==void 0)&&At.update(we,Pe,hs),(Jr||xn.receiveShadow!==we.receiveShadow)&&(xn.receiveShadow=we.receiveShadow,Vi.setValue(pe,"receiveShadow",we.receiveShadow)),Ge.isMeshGouraudMaterial&&Ge.envMap!==null&&(fs.envMap.value=ot,fs.flipEnvMap.value=ot.isCubeTexture&&ot.isRenderTargetTexture===!1?-1:1),Ge.isMeshStandardMaterial&&Ge.envMap===null&&Ee.environment!==null&&(fs.envMapIntensity.value=Ee.environmentIntensity),Jr&&(Vi.setValue(pe,"toneMappingExposure",B.toneMappingExposure),xn.needsLights&&io(fs,f0),_t&&Ge.fog===!0&&ht.refreshFogUniforms(fs,_t),ht.refreshMaterialUniforms(fs,Ge,se,re,M.state.transmissionRenderTarget[ae.id]),_d.upload(pe,$n(xn),fs,wt)),Ge.isShaderMaterial&&Ge.uniformsNeedUpdate===!0&&(_d.upload(pe,$n(xn),fs,wt),Ge.uniformsNeedUpdate=!1),Ge.isSpriteMaterial&&Vi.setValue(pe,"center",we.center),Vi.setValue(pe,"modelViewMatrix",we.modelViewMatrix),Vi.setValue(pe,"normalMatrix",we.normalMatrix),Vi.setValue(pe,"modelMatrix",we.matrixWorld),Ge.isShaderMaterial||Ge.isRawShaderMaterial){const Ai=Ge.uniformsGroups;for(let ds=0,jl=Ai.length;ds<jl;ds++){const js=Ai[ds];Mt.update(js,hs),Mt.bind(js,hs)}}return hs}function io(ae,Ee){ae.ambientLightColor.needsUpdate=Ee,ae.lightProbe.needsUpdate=Ee,ae.directionalLights.needsUpdate=Ee,ae.directionalLightShadows.needsUpdate=Ee,ae.pointLights.needsUpdate=Ee,ae.pointLightShadows.needsUpdate=Ee,ae.spotLights.needsUpdate=Ee,ae.spotLightShadows.needsUpdate=Ee,ae.rectAreaLights.needsUpdate=Ee,ae.hemisphereLights.needsUpdate=Ee}function fi(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return z},this.getRenderTarget=function(){return q},this.setRenderTargetTextures=function(ae,Ee,Pe){const Ge=ft.get(ae);Ge.__autoAllocateDepthBuffer=ae.resolveDepthBuffer===!1,Ge.__autoAllocateDepthBuffer===!1&&(Ge.__useRenderToTexture=!1),ft.get(ae.texture).__webglTexture=Ee,ft.get(ae.depthTexture).__webglTexture=Ge.__autoAllocateDepthBuffer?void 0:Pe,Ge.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ae,Ee){const Pe=ft.get(ae);Pe.__webglFramebuffer=Ee,Pe.__useDefaultFramebuffer=Ee===void 0};const Wn=pe.createFramebuffer();this.setRenderTarget=function(ae,Ee=0,Pe=0){q=ae,O=Ee,z=Pe;let Ge=!0,we=null,_t=!1,Ut=!1;if(ae){const ot=ft.get(ae);if(ot.__useDefaultFramebuffer!==void 0)ke.bindFramebuffer(pe.FRAMEBUFFER,null),Ge=!1;else if(ot.__webglFramebuffer===void 0)wt.setupRenderTarget(ae);else if(ot.__hasExternalTextures)wt.rebindTextures(ae,ft.get(ae.texture).__webglTexture,ft.get(ae.depthTexture).__webglTexture);else if(ae.depthBuffer){const mn=ae.depthTexture;if(ot.__boundDepthTexture!==mn){if(mn!==null&&ft.has(mn)&&(ae.width!==mn.image.width||ae.height!==mn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");wt.setupDepthRenderbuffer(ae)}}const Z=ae.texture;(Z.isData3DTexture||Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(Ut=!0);const gt=ft.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(gt[Ee])?we=gt[Ee][Pe]:we=gt[Ee],_t=!0):ae.samples>0&&wt.useMultisampledRTT(ae)===!1?we=ft.get(ae).__webglMultisampledFramebuffer:Array.isArray(gt)?we=gt[Pe]:we=gt,j.copy(ae.viewport),$.copy(ae.scissor),K=ae.scissorTest}else j.copy(Ce).multiplyScalar(se).floor(),$.copy(Ye).multiplyScalar(se).floor(),K=it;if(Pe!==0&&(we=Wn),ke.bindFramebuffer(pe.FRAMEBUFFER,we)&&Ge&&ke.drawBuffers(ae,we),ke.viewport(j),ke.scissor($),ke.setScissorTest(K),_t){const ot=ft.get(ae.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,ot.__webglTexture,Pe)}else if(Ut){const ot=Ee;for(let Z=0;Z<ae.textures.length;Z++){const gt=ft.get(ae.textures[Z]);pe.framebufferTextureLayer(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0+Z,gt.__webglTexture,Pe,ot)}}else if(ae!==null&&Pe!==0){const ot=ft.get(ae.texture);pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,ot.__webglTexture,Pe)}F=-1},this.readRenderTargetPixels=function(ae,Ee,Pe,Ge,we,_t,Ut,kt=0){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=ft.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&Ut!==void 0&&(ot=ot[Ut]),ot){ke.bindFramebuffer(pe.FRAMEBUFFER,ot);try{const Z=ae.textures[kt],gt=Z.format,mn=Z.type;if(!tt.textureFormatReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!tt.textureTypeReadable(mn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=ae.width-Ge&&Pe>=0&&Pe<=ae.height-we&&(ae.textures.length>1&&pe.readBuffer(pe.COLOR_ATTACHMENT0+kt),pe.readPixels(Ee,Pe,Ge,we,ge.convert(gt),ge.convert(mn),_t))}finally{const Z=q!==null?ft.get(q).__webglFramebuffer:null;ke.bindFramebuffer(pe.FRAMEBUFFER,Z)}}},this.readRenderTargetPixelsAsync=async function(ae,Ee,Pe,Ge,we,_t,Ut,kt=0){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=ft.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&Ut!==void 0&&(ot=ot[Ut]),ot)if(Ee>=0&&Ee<=ae.width-Ge&&Pe>=0&&Pe<=ae.height-we){ke.bindFramebuffer(pe.FRAMEBUFFER,ot);const Z=ae.textures[kt],gt=Z.format,mn=Z.type;if(!tt.textureFormatReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!tt.textureTypeReadable(mn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ti=pe.createBuffer();pe.bindBuffer(pe.PIXEL_PACK_BUFFER,ti),pe.bufferData(pe.PIXEL_PACK_BUFFER,_t.byteLength,pe.STREAM_READ),ae.textures.length>1&&pe.readBuffer(pe.COLOR_ATTACHMENT0+kt),pe.readPixels(Ee,Pe,Ge,we,ge.convert(gt),ge.convert(mn),0);const bi=q!==null?ft.get(q).__webglFramebuffer:null;ke.bindFramebuffer(pe.FRAMEBUFFER,bi);const Ki=pe.fenceSync(pe.SYNC_GPU_COMMANDS_COMPLETE,0);return pe.flush(),await WV(pe,Ki,4),pe.bindBuffer(pe.PIXEL_PACK_BUFFER,ti),pe.getBufferSubData(pe.PIXEL_PACK_BUFFER,0,_t),pe.deleteBuffer(ti),pe.deleteSync(Ki),_t}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ae,Ee=null,Pe=0){const Ge=Math.pow(2,-Pe),we=Math.floor(ae.image.width*Ge),_t=Math.floor(ae.image.height*Ge),Ut=Ee!==null?Ee.x:0,kt=Ee!==null?Ee.y:0;wt.setTexture2D(ae,0),pe.copyTexSubImage2D(pe.TEXTURE_2D,Pe,0,0,Ut,kt,we,_t),ke.unbindTexture()};const cs=pe.createFramebuffer(),X0=pe.createFramebuffer();this.copyTextureToTexture=function(ae,Ee,Pe=null,Ge=null,we=0,_t=null){_t===null&&(we!==0?(la("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_t=we,we=0):_t=0);let Ut,kt,ot,Z,gt,mn,ti,bi,Ki;const Bi=ae.isCompressedTexture?ae.mipmaps[_t]:ae.image;if(Pe!==null)Ut=Pe.max.x-Pe.min.x,kt=Pe.max.y-Pe.min.y,ot=Pe.isBox3?Pe.max.z-Pe.min.z:1,Z=Pe.min.x,gt=Pe.min.y,mn=Pe.isBox3?Pe.min.z:0;else{const ir=Math.pow(2,-we);Ut=Math.floor(Bi.width*ir),kt=Math.floor(Bi.height*ir),ae.isDataArrayTexture?ot=Bi.depth:ae.isData3DTexture?ot=Math.floor(Bi.depth*ir):ot=1,Z=0,gt=0,mn=0}Ge!==null?(ti=Ge.x,bi=Ge.y,Ki=Ge.z):(ti=0,bi=0,Ki=0);const Y=ge.convert(Ee.format),xn=ge.convert(Ee.type);let Zi;Ee.isData3DTexture?(wt.setTexture3D(Ee,0),Zi=pe.TEXTURE_3D):Ee.isDataArrayTexture||Ee.isCompressedArrayTexture?(wt.setTexture2DArray(Ee,0),Zi=pe.TEXTURE_2D_ARRAY):(wt.setTexture2D(Ee,0),Zi=pe.TEXTURE_2D),pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,Ee.flipY),pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ee.premultiplyAlpha),pe.pixelStorei(pe.UNPACK_ALIGNMENT,Ee.unpackAlignment);const di=pe.getParameter(pe.UNPACK_ROW_LENGTH),hs=pe.getParameter(pe.UNPACK_IMAGE_HEIGHT),h0=pe.getParameter(pe.UNPACK_SKIP_PIXELS),Jr=pe.getParameter(pe.UNPACK_SKIP_ROWS),f0=pe.getParameter(pe.UNPACK_SKIP_IMAGES);pe.pixelStorei(pe.UNPACK_ROW_LENGTH,Bi.width),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,Bi.height),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,Z),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,gt),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,mn);const Vi=ae.isDataArrayTexture||ae.isData3DTexture,fs=Ee.isDataArrayTexture||Ee.isData3DTexture;if(ae.isDepthTexture){const ir=ft.get(ae),Ai=ft.get(Ee),ds=ft.get(ir.__renderTarget),jl=ft.get(Ai.__renderTarget);ke.bindFramebuffer(pe.READ_FRAMEBUFFER,ds.__webglFramebuffer),ke.bindFramebuffer(pe.DRAW_FRAMEBUFFER,jl.__webglFramebuffer);for(let js=0;js<ot;js++)Vi&&(pe.framebufferTextureLayer(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,ft.get(ae).__webglTexture,we,mn+js),pe.framebufferTextureLayer(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,ft.get(Ee).__webglTexture,_t,Ki+js)),pe.blitFramebuffer(Z,gt,Ut,kt,ti,bi,Ut,kt,pe.DEPTH_BUFFER_BIT,pe.NEAREST);ke.bindFramebuffer(pe.READ_FRAMEBUFFER,null),ke.bindFramebuffer(pe.DRAW_FRAMEBUFFER,null)}else if(we!==0||ae.isRenderTargetTexture||ft.has(ae)){const ir=ft.get(ae),Ai=ft.get(Ee);ke.bindFramebuffer(pe.READ_FRAMEBUFFER,cs),ke.bindFramebuffer(pe.DRAW_FRAMEBUFFER,X0);for(let ds=0;ds<ot;ds++)Vi?pe.framebufferTextureLayer(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,ir.__webglTexture,we,mn+ds):pe.framebufferTexture2D(pe.READ_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,ir.__webglTexture,we),fs?pe.framebufferTextureLayer(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,Ai.__webglTexture,_t,Ki+ds):pe.framebufferTexture2D(pe.DRAW_FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,Ai.__webglTexture,_t),we!==0?pe.blitFramebuffer(Z,gt,Ut,kt,ti,bi,Ut,kt,pe.COLOR_BUFFER_BIT,pe.NEAREST):fs?pe.copyTexSubImage3D(Zi,_t,ti,bi,Ki+ds,Z,gt,Ut,kt):pe.copyTexSubImage2D(Zi,_t,ti,bi,Z,gt,Ut,kt);ke.bindFramebuffer(pe.READ_FRAMEBUFFER,null),ke.bindFramebuffer(pe.DRAW_FRAMEBUFFER,null)}else fs?ae.isDataTexture||ae.isData3DTexture?pe.texSubImage3D(Zi,_t,ti,bi,Ki,Ut,kt,ot,Y,xn,Bi.data):Ee.isCompressedArrayTexture?pe.compressedTexSubImage3D(Zi,_t,ti,bi,Ki,Ut,kt,ot,Y,Bi.data):pe.texSubImage3D(Zi,_t,ti,bi,Ki,Ut,kt,ot,Y,xn,Bi):ae.isDataTexture?pe.texSubImage2D(pe.TEXTURE_2D,_t,ti,bi,Ut,kt,Y,xn,Bi.data):ae.isCompressedTexture?pe.compressedTexSubImage2D(pe.TEXTURE_2D,_t,ti,bi,Bi.width,Bi.height,Y,Bi.data):pe.texSubImage2D(pe.TEXTURE_2D,_t,ti,bi,Ut,kt,Y,xn,Bi);pe.pixelStorei(pe.UNPACK_ROW_LENGTH,di),pe.pixelStorei(pe.UNPACK_IMAGE_HEIGHT,hs),pe.pixelStorei(pe.UNPACK_SKIP_PIXELS,h0),pe.pixelStorei(pe.UNPACK_SKIP_ROWS,Jr),pe.pixelStorei(pe.UNPACK_SKIP_IMAGES,f0),_t===0&&Ee.generateMipmaps&&pe.generateMipmap(Zi),ke.unbindTexture()},this.initRenderTarget=function(ae){ft.get(ae).__webglFramebuffer===void 0&&wt.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?wt.setTextureCube(ae,0):ae.isData3DTexture?wt.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?wt.setTexture2DArray(ae,0):wt.setTexture2D(ae,0),ke.unbindTexture()},this.resetState=function(){O=0,z=0,q=null,ke.reset(),Ue.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Vs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=gn._getDrawingBufferColorSpace(e),t.unpackColorSpace=gn._getUnpackColorSpace()}}const nX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:rp,AddEquation:Us,AddOperation:$_,AdditiveAnimationBlendMode:nx,AdditiveBlending:Ec,AgXToneMapping:ex,AlphaFormat:sp,AlwaysCompare:fp,AlwaysDepth:T5,AlwaysStencilFunc:kd,AmbientLight:Vx,AnimationAction:PN,AnimationClip:T6,AnimationLoader:mG,AnimationMixer:HG,AnimationObjectGroup:qG,AnimationUtils:fG,ArcCurve:fN,ArrayCamera:Hx,ArrowHelper:Aq,AttachedBindMode:uv,Audio:CN,AudioAnalyser:DG,AudioContext:kx,AudioListener:CG,AudioLoader:EG,AxesHelper:pq,BackSide:Fi,BasicDepthPacking:FC,BasicShadowMap:j_,BatchedMesh:lN,Bone:cx,BooleanKeyframeTrack:A3,Box2:JG,Box3:ss,Box3Helper:fq,BoxGeometry:ql,BoxHelper:hq,BufferAttribute:li,BufferGeometry:Tn,BufferGeometryLoader:RN,ByteType:Lu,Cache:Tl,Camera:c3,CameraHelper:cq,CanvasTexture:Iz,CapsuleGeometry:bp,CatmullRomCurve3:dN,CineonToneMapping:J_,CircleGeometry:n8,ClampToEdgeWrapping:Ra,Clock:Wx,Color:Dt,ColorKeyframeTrack:Dx,ColorManagement:gn,CompressedArrayTexture:Bz,CompressedCubeTexture:Lz,CompressedTexture:xp,CompressedTextureLoader:gG,ConeGeometry:l7,ConstantAlphaFactor:wC,ConstantColorFactor:MC,Controls:mq,CubeCamera:lx,CubeReflectionMapping:Eo,CubeRefractionMapping:Zo,CubeTexture:Wu,CubeTextureLoader:yG,CubeUVReflectionMapping:D1,CubicBezierCurve:px,CubicBezierCurve3:mx,CubicInterpolant:SN,CullFaceBack:Vd,CullFaceFront:W_,CullFaceFrontBack:fV,CullFaceNone:H_,Curve:a0,CurvePath:pN,CustomBlending:gc,CustomToneMapping:CC,CylinderGeometry:f3,Cylindrical:ZG,Data3DTexture:Ap,DataArrayTexture:r7,DataTexture:G0,DataTextureLoader:vG,DataUtils:az,DecrementStencilOp:kC,DecrementWrapStencilOp:WC,DefaultLoadingManager:EN,DepthFormat:Ya,DepthStencilFormat:Qa,DepthTexture:Ka,DetachedBindMode:NC,DirectionalLight:Fx,DirectionalLightHelper:uq,DiscreteInterpolant:TN,DodecahedronGeometry:Sp,DoubleSide:Ur,DstAlphaFactor:JA,DstColorFactor:tp,DynamicCopyUsage:SV,DynamicDrawUsage:uc,DynamicReadUsage:_V,EdgesGeometry:hN,EllipseCurve:Tp,EqualCompare:lp,EqualDepth:E5,EqualStencilFunc:QC,EquirectangularReflectionMapping:Fu,EquirectangularRefractionMapping:Vu,Euler:bs,EventDispatcher:No,ExternalTexture:dx,ExtrudeGeometry:u7,FileLoader:I1,Float16BufferAttribute:ox,Float32BufferAttribute:Yt,FloatType:or,Fog:s7,FogExp2:yp,FramebufferTexture:fx,FrontSide:Wa,Frustum:ju,FrustumArray:a7,GLBufferAttribute:QG,GLSL1:MV,GLSL3:hv,GreaterCompare:up,GreaterDepth:R5,GreaterEqualCompare:hp,GreaterEqualDepth:w5,GreaterEqualStencilFunc:JC,GreaterStencilFunc:KC,GridHelper:oq,Group:sa,HalfFloatType:$r,HemisphereLight:Ix,HemisphereLightHelper:aq,IcosahedronGeometry:Mp,ImageBitmapLoader:MG,ImageLoader:M6,ImageUtils:eN,IncrementStencilOp:qC,IncrementWrapStencilOp:HC,InstancedBufferAttribute:$a,InstancedBufferGeometry:qx,InstancedInterleavedBuffer:E6,InstancedMesh:oN,Int16BufferAttribute:hz,Int32BufferAttribute:fz,Int8BufferAttribute:lz,IntType:rs,InterleavedBuffer:t8,InterleavedBufferAttribute:Ca,Interpolant:f7,InterpolateDiscrete:m6,InterpolateLinear:qd,InterpolateSmooth:vd,InterpolationSamplingMode:wV,InterpolationSamplingType:EV,InvertStencilOp:jC,KeepStencilOp:Su,KeyframeTrack:l0,LOD:sN,LatheGeometry:Ep,Layers:I5,LessCompare:n7,LessDepth:M5,LessEqualCompare:i7,LessEqualDepth:P1,LessEqualStencilFunc:$C,LessStencilFunc:YC,Light:Yu,LightProbe:Gx,Line:k0,Line3:LN,LineBasicMaterial:ls,LineCurve:gx,LineCurve3:AN,LineDashedMaterial:Cx,LineLoop:uN,LineSegments:s0,LinearFilter:Qi,LinearInterpolant:Px,LinearMipMapLinearFilter:PC,LinearMipMapNearestFilter:pV,LinearMipmapLinearFilter:Fs,LinearMipmapNearestFilter:Bu,LinearSRGBColorSpace:Ll,LinearToneMapping:K_,LinearTransfer:Kc,Loader:to,LoaderUtils:mv,LoadingManager:Bx,LoopOnce:BC,LoopPingPong:IC,LoopRepeat:LC,MOUSE:Z2,Material:Ss,MaterialLoader:Lp,MathUtils:dp,Matrix2:p7,Matrix3:Vn,Matrix4:$t,MaxEquation:Y_,Mesh:Jn,MeshBasicMaterial:Os,MeshDepthMaterial:Ex,MeshDistanceMaterial:wx,MeshLambertMaterial:j0,MeshMatcapMaterial:Rx,MeshNormalMaterial:Mx,MeshPhongMaterial:Bp,MeshPhysicalMaterial:Sx,MeshStandardMaterial:Dp,MeshToonMaterial:Tx,MinEquation:X_,MirroredRepeatWrapping:L1,MixOperation:Q_,MultiplyBlending:Rc,MultiplyOperation:J5,NearestFilter:Xi,NearestMipMapLinearFilter:AV,NearestMipMapNearestFilter:dV,NearestMipmapLinearFilter:O0,NearestMipmapNearestFilter:K6,NeutralToneMapping:tx,NeverCompare:op,NeverDepth:S5,NeverStencilFunc:XC,NoBlending:ja,NoColorSpace:Ea,NoToneMapping:oa,NormalAnimationBlendMode:ap,NormalBlending:aa,NotEqualCompare:cp,NotEqualDepth:C5,NotEqualStencilFunc:ZC,NumberKeyframeTrack:b6,Object3D:yi,ObjectLoader:SG,ObjectSpaceNormalMap:ix,OctahedronGeometry:c7,OneFactor:$A,OneMinusConstantAlphaFactor:RC,OneMinusConstantColorFactor:EC,OneMinusDstAlphaFactor:ep,OneMinusDstColorFactor:np,OneMinusSrcAlphaFactor:b5,OneMinusSrcColorFactor:ZA,OrthographicCamera:Ml,PCFShadowMap:Q6,PCFSoftShadowMap:e6,PMREMGenerator:vv,Path:Xd,PerspectiveCamera:ar,Plane:I0,PlaneGeometry:d3,PlaneHelper:dq,PointLight:Ox,PointLightHelper:rq,Points:hx,PointsMaterial:o7,PolarGridHelper:lq,PolyhedronGeometry:Xu,PositionalAudio:PG,PropertyBinding:Si,PropertyMixer:NN,QuadraticBezierCurve:yx,QuadraticBezierCurve3:vx,Quaternion:Gs,QuaternionKeyframeTrack:d7,QuaternionLinearInterpolant:MN,RED_GREEN_RGTC2_Format:Qc,RED_RGTC1_Format:Xc,REVISION:Z5,RGBADepthPacking:VC,RGBAFormat:nr,RGBAIntegerFormat:l3,RGBA_ASTC_10x10_Format:kc,RGBA_ASTC_10x5_Format:zc,RGBA_ASTC_10x6_Format:Gc,RGBA_ASTC_10x8_Format:qc,RGBA_ASTC_12x10_Format:Hc,RGBA_ASTC_12x12_Format:Wc,RGBA_ASTC_4x4_Format:Dc,RGBA_ASTC_5x4_Format:Bc,RGBA_ASTC_5x5_Format:Lc,RGBA_ASTC_6x5_Format:Ic,RGBA_ASTC_6x6_Format:Uc,RGBA_ASTC_8x5_Format:Oc,RGBA_ASTC_8x6_Format:Fc,RGBA_ASTC_8x8_Format:Vc,RGBA_BPTC_Format:jc,RGBA_ETC2_EAC_Format:Pc,RGBA_PVRTC_2BPPV1_Format:B5,RGBA_PVRTC_4BPPV1_Format:D5,RGBA_S3TC_DXT1_Format:S1,RGBA_S3TC_DXT3_Format:T1,RGBA_S3TC_DXT5_Format:M1,RGBDepthPacking:mV,RGBFormat:e8,RGBIntegerFormat:DC,RGB_BPTC_SIGNED_Format:zd,RGB_BPTC_UNSIGNED_Format:Gd,RGB_ETC1_Format:Cc,RGB_ETC2_Format:Nc,RGB_PVRTC_2BPPV1_Format:P5,RGB_PVRTC_4BPPV1_Format:N5,RGB_S3TC_DXT1_Format:b1,RGDepthPacking:gV,RGFormat:Sl,RGIntegerFormat:o3,RawShaderMaterial:_N,Ray:u3,Raycaster:BN,RectAreaLight:zx,RedFormat:a3,RedIntegerFormat:Hu,ReinhardToneMapping:Z_,RenderTarget:W0,RenderTarget3D:WG,RepeatWrapping:B1,ReplaceStencilOp:GC,ReverseSubtractEquation:QA,RingGeometry:wp,SIGNED_RED_GREEN_RGTC2_Format:$c,SIGNED_RED_RGTC1_Format:Yc,SRGBColorSpace:Qr,SRGBTransfer:Ht,Scene:h3,ShaderChunk:Xn,ShaderLib:ba,ShaderMaterial:Na,ShadowMaterial:bx,Shape:vc,ShapeGeometry:Rp,ShapePath:UN,ShapeUtils:F0,ShortType:Iu,Skeleton:_p,SkeletonHelper:iq,SkinnedMesh:aN,Source:Pu,Sphere:Kr,SphereGeometry:o0,Spherical:yv,SphericalHarmonics3:wN,SplineCurve:_x,SpotLight:A7,SpotLightHelper:nq,Sprite:rN,SpriteMaterial:vp,SrcAlphaFactor:x5,SrcAlphaSaturateFactor:ip,SrcColorFactor:KA,StaticCopyUsage:bV,StaticDrawUsage:L5,StaticReadUsage:vV,StereoCamera:wG,StreamCopyUsage:TV,StreamDrawUsage:yV,StreamReadUsage:xV,StringKeyframeTrack:p3,SubtractEquation:YA,SubtractiveBlending:wc,TOUCH:J2,TangentSpaceNormalMap:Bl,TetrahedronGeometry:Cp,Texture:mr,TextureLoader:Lx,TextureUtils:xq,Timer:$G,TimestampQuery:cc,TorusGeometry:Np,TorusKnotGeometry:Pp,Triangle:za,TriangleFanDrawMode:cv,TriangleStripDrawMode:OC,TrianglesDrawMode:UC,TubeGeometry:h7,UVMapping:$6,Uint16BufferAttribute:pp,Uint32BufferAttribute:mp,Uint8BufferAttribute:uz,Uint8ClampedBufferAttribute:cz,Uniform:jG,UniformsGroup:YG,UniformsLib:Vt,UniformsUtils:gp,UnsignedByteType:Ar,UnsignedInt101111Type:t7,UnsignedInt248Type:Xa,UnsignedInt5999Type:e7,UnsignedIntType:zi,UnsignedShort4444Type:Z6,UnsignedShort5551Type:J6,UnsignedShortType:Xo,VSMShadowMap:xa,Vector2:He,Vector3:te,Vector4:an,VectorKeyframeTrack:S6,VideoFrameTexture:Dz,VideoTexture:cN,WebGL3DRenderTarget:$V,WebGLArrayRenderTarget:QV,WebGLCoordinateSystem:Vs,WebGLCubeRenderTarget:ux,WebGLRenderTarget:Il,WebGLRenderer:kN,WebGLUtils:qN,WebGPUCoordinateSystem:Jo,WebXRController:n6,WireframeGeometry:xx,WrapAroundEnding:g6,ZeroCurvatureEnding:oc,ZeroFactor:yl,ZeroSlopeEnding:lc,ZeroStencilOp:zC,createCanvasElement:ax},Symbol.toStringTag,{value:"Module"}));function xv(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var iX=typeof global=="object"&&global&&global.Object===Object&&global,rX=typeof self=="object"&&self&&self.Object===Object&&self,HN=iX||rX||Function("return this")(),jg=function(){return HN.Date.now()},sX=/\s/;function aX(i){for(var e=i.length;e--&&sX.test(i.charAt(e)););return e}var oX=/^\s+/;function lX(i){return i&&i.slice(0,aX(i)+1).replace(oX,"")}var Qd=HN.Symbol,WN=Object.prototype,uX=WN.hasOwnProperty,cX=WN.toString,vh=Qd?Qd.toStringTag:void 0;function hX(i){var e=uX.call(i,vh),t=i[vh];try{i[vh]=void 0;var n=!0}catch{}var r=cX.call(i);return n&&(e?i[vh]=t:delete i[vh]),r}var fX=Object.prototype,dX=fX.toString;function AX(i){return dX.call(i)}var pX="[object Null]",mX="[object Undefined]",XM=Qd?Qd.toStringTag:void 0;function gX(i){return i==null?i===void 0?mX:pX:XM&&XM in Object(i)?hX(i):AX(i)}function yX(i){return i!=null&&typeof i=="object"}var vX="[object Symbol]";function _X(i){return typeof i=="symbol"||yX(i)&&gX(i)==vX}var YM=NaN,xX=/^[-+]0x[0-9a-f]+$/i,bX=/^0b[01]+$/i,SX=/^0o[0-7]+$/i,TX=parseInt;function QM(i){if(typeof i=="number")return i;if(_X(i))return YM;if(xv(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=xv(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=lX(i);var t=bX.test(i);return t||SX.test(i)?TX(i.slice(2),t?2:8):xX.test(i)?YM:+i}var MX="Expected a function",EX=Math.max,wX=Math.min;function RX(i,e,t){var n,r,s,a,o,l,u=0,c=!1,p=!1,y=!0;if(typeof i!="function")throw new TypeError(MX);e=QM(e)||0,xv(t)&&(c=!!t.leading,p="maxWait"in t,s=p?EX(QM(t.maxWait)||0,e):s,y="trailing"in t?!!t.trailing:y);function _(O){var z=n,q=r;return n=r=void 0,u=O,a=i.apply(q,z),a}function b(O){return u=O,o=setTimeout(M,e),c?_(O):a}function w(O){var z=O-l,q=O-u,F=e-z;return p?wX(F,s-q):F}function E(O){var z=O-l,q=O-u;return l===void 0||z>=e||z<0||p&&q>=s}function M(){var O=jg();if(E(O))return P(O);o=setTimeout(M,w(O))}function P(O){return o=void 0,y&&n?_(O):(n=r=void 0,a)}function D(){o!==void 0&&clearTimeout(o),u=0,n=l=r=o=void 0}function B(){return o===void 0?a:P(jg())}function U(){var O=jg(),z=E(O);if(n=arguments,r=this,l=O,z){if(o===void 0)return b(l);if(p)return clearTimeout(o),o=setTimeout(M,e),_(l)}return o===void 0&&(o=setTimeout(M,e)),a}return U.cancel=D,U.flush=B,U}function $M(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function CX(i){if(Array.isArray(i))return i}function NX(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function PX(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function DX(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function BX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LX(i,e){return CX(i)||DX(i,e)||IX(i,e)||BX()}function IX(i,e){if(i){if(typeof i=="string")return $M(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$M(i,e):void 0}}var UX=PX(function i(e,t){var n=t.default,r=n===void 0?null:n,s=t.triggerUpdate,a=s===void 0?!0:s,o=t.onChange,l=o===void 0?function(u,c){}:o;NX(this,i),this.name=e,this.defaultVal=r,this.triggerUpdate=a,this.onChange=l});function ha(i){var e=i.stateInit,t=e===void 0?function(){return{}}:e,n=i.props,r=n===void 0?{}:n,s=i.methods,a=s===void 0?{}:s,o=i.aliases,l=o===void 0?{}:o,u=i.init,c=u===void 0?function(){}:u,p=i.update,y=p===void 0?function(){}:p,_=Object.keys(r).map(function(b){return new UX(b,r[b])});return function b(){for(var w=arguments.length,E=new Array(w),M=0;M<w;M++)E[M]=arguments[M];var P=!!(this instanceof b&&this.constructor),D=P?E.shift():void 0,B=E[0],U=B===void 0?{}:B,O=Object.assign({},t instanceof Function?t(U):t,{initialised:!1}),z={};function q(j){return F(j,U),G(),q}var F=function($,K){c.call(q,$,O,K),O.initialised=!0},G=RX(function(){O.initialised&&(y.call(q,O,z),z={})},1);return _.forEach(function(j){q[j.name]=$(j);function $(K){var ie=K.name,ee=K.triggerUpdate,X=ee===void 0?!1:ee,re=K.onChange,se=re===void 0?function(Ce,Ye){}:re,Ae=K.defaultVal,Se=Ae===void 0?null:Ae;return function(Ce){var Ye=O[ie];if(!arguments.length)return Ye;var it=Ce===void 0?Se:Ce;return O[ie]=it,se.call(q,it,O,Ye),!z.hasOwnProperty(ie)&&(z[ie]=Ye),X&&G(),q}}}),Object.keys(a).forEach(function(j){q[j]=function(){for(var $,K=arguments.length,ie=new Array(K),ee=0;ee<K;ee++)ie[ee]=arguments[ee];return($=a[j]).call.apply($,[q,O].concat(ie))}}),Object.entries(l).forEach(function(j){var $=LX(j,2),K=$[0],ie=$[1];return q[K]=q[ie]}),q.resetProps=function(){return _.forEach(function(j){q[j.name](j.defaultVal)}),q},q.resetProps(),O._rerender=G,P&&D&&q(D),q}}var qs=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-qs.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?qs.Bounce.In(i*2)*.5:qs.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),Wh=function(){return performance.now()},jN=(function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){e===void 0&&(e=Wh()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],a=!t;s&&s.update(e,a)===!1&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i})(),bv={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=bv.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i}}},XN=(function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i})(),Sv=new jN,wo=(function(){function i(e,t){t===void 0&&(t=Sv),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=qs.Linear.None,this._interpolationFunction=bv.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=XN.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=Wh()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var a in n){var o=e[a],l=Array.isArray(o),u=l?"array":typeof o,c=!l&&Array.isArray(n[a]);if(!(u==="undefined"||u==="function")){if(c){var p=n[a];if(p.length===0)continue;for(var y=[o],_=0,b=p.length;_<b;_+=1){var w=this._handleRelativeValue(o,p[_]);if(isNaN(w)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}y.push(w)}c&&(n[a]=y)}if((u==="object"||l)&&o&&!c){t[a]=l?[]:{};var E=o;for(var M in E)t[a][M]=E[M];r[a]=l?[]:{};var p=n[a];if(!this._isDynamic){var P={};for(var M in p)P[M]=p[M];n[a]=p=P}this._setupProperties(E,t[a],p,r[a],s)}else(typeof t[a]>"u"||s)&&(t[a]=o),l||(t[a]*=1),c?r[a]=n[a].slice().reverse():r[a]=t[a]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=Wh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=Wh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=Sv),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=qs.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=bv.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,r;if(e===void 0&&(e=Wh()),t===void 0&&(t=!0),this._isPaused)return!0;var s,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>a)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=e-this._startTime,l=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(n._duration===0||o>u)return 1;var E=Math.trunc(o/l),M=o-E*l,P=Math.min(M/n._duration,1);return P===0&&o===n._duration?1:P},p=c(),y=this._easingFunction(p);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,y),this._onUpdateCallback&&this._onUpdateCallback(this._object,p),this._duration===0||o>=this._duration)if(this._repeat>0){var _=Math.min(Math.trunc((o-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=_);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*_,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var b=0,w=this._chainedTweens.length;b<w;b++)this._chainedTweens[b].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var a=t[s]||0,o=n[s],l=Array.isArray(e[s]),u=Array.isArray(o),c=!l&&u;c?e[s]=this._interpolationFunction(o,r):typeof o=="object"&&o?this._updateProperties(e[s],a,o,r):(o=this._handleRelativeValue(a,o),typeof o=="number"&&(e[s]=a+(o-a)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i})();XN.nextId;var Ul=Sv;Ul.getAll.bind(Ul);Ul.removeAll.bind(Ul);Ul.add.bind(Ul);Ul.remove.bind(Ul);Ul.update.bind(Ul);function OX(i){const e=+this._x.call(null,i),t=+this._y.call(null,i),n=+this._z.call(null,i);return YN(this.cover(e,t,n),e,t,n,i)}function YN(i,e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n))return i;var s,a=i._root,o={data:r},l=i._x0,u=i._y0,c=i._z0,p=i._x1,y=i._y1,_=i._z1,b,w,E,M,P,D,B,U,O,z,q;if(!a)return i._root=o,i;for(;a.length;)if((B=e>=(b=(l+p)/2))?l=b:p=b,(U=t>=(w=(u+y)/2))?u=w:y=w,(O=n>=(E=(c+_)/2))?c=E:_=E,s=a,!(a=a[z=O<<2|U<<1|B]))return s[z]=o,i;if(M=+i._x.call(null,a.data),P=+i._y.call(null,a.data),D=+i._z.call(null,a.data),e===M&&t===P&&n===D)return o.next=a,s?s[z]=o:i._root=o,i;do s=s?s[z]=new Array(8):i._root=new Array(8),(B=e>=(b=(l+p)/2))?l=b:p=b,(U=t>=(w=(u+y)/2))?u=w:y=w,(O=n>=(E=(c+_)/2))?c=E:_=E;while((z=O<<2|U<<1|B)===(q=(D>=E)<<2|(P>=w)<<1|M>=b));return s[q]=a,s[z]=o,i}function FX(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e),n=new Float64Array(e),r=new Float64Array(e);let s=1/0,a=1/0,o=1/0,l=-1/0,u=-1/0,c=-1/0;for(let p=0,y,_,b,w;p<e;++p)isNaN(_=+this._x.call(null,y=i[p]))||isNaN(b=+this._y.call(null,y))||isNaN(w=+this._z.call(null,y))||(t[p]=_,n[p]=b,r[p]=w,_<s&&(s=_),_>l&&(l=_),b<a&&(a=b),b>u&&(u=b),w<o&&(o=w),w>c&&(c=w));if(s>l||a>u||o>c)return this;this.cover(s,a,o).cover(l,u,c);for(let p=0;p<e;++p)YN(this,t[p],n[p],r[p],i[p]);return this}function VX(i,e,t){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,s=this._z0,a=this._x1,o=this._y1,l=this._z1;if(isNaN(n))a=(n=Math.floor(i))+1,o=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var u=a-n||1,c=this._root,p,y;n>i||i>=a||r>e||e>=o||s>t||t>=l;)switch(y=(t<s)<<2|(e<r)<<1|i<n,p=new Array(8),p[y]=c,c=p,u*=2,y){case 0:a=n+u,o=r+u,l=s+u;break;case 1:n=a-u,o=r+u,l=s+u;break;case 2:a=n+u,r=o-u,l=s+u;break;case 3:n=a-u,r=o-u,l=s+u;break;case 4:a=n+u,o=r+u,s=l-u;break;case 5:n=a-u,o=r+u,s=l-u;break;case 6:a=n+u,r=o-u,s=l-u;break;case 7:n=a-u,r=o-u,s=l-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this}function zX(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function GX(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function er(i,e,t,n,r,s,a){this.node=i,this.x0=e,this.y0=t,this.z0=n,this.x1=r,this.y1=s,this.z1=a}function qX(i,e,t,n){var r,s=this._x0,a=this._y0,o=this._z0,l,u,c,p,y,_,b=this._x1,w=this._y1,E=this._z1,M=[],P=this._root,D,B;for(P&&M.push(new er(P,s,a,o,b,w,E)),n==null?n=1/0:(s=i-n,a=e-n,o=t-n,b=i+n,w=e+n,E=t+n,n*=n);D=M.pop();)if(!(!(P=D.node)||(l=D.x0)>b||(u=D.y0)>w||(c=D.z0)>E||(p=D.x1)<s||(y=D.y1)<a||(_=D.z1)<o))if(P.length){var U=(l+p)/2,O=(u+y)/2,z=(c+_)/2;M.push(new er(P[7],U,O,z,p,y,_),new er(P[6],l,O,z,U,y,_),new er(P[5],U,u,z,p,O,_),new er(P[4],l,u,z,U,O,_),new er(P[3],U,O,c,p,y,z),new er(P[2],l,O,c,U,y,z),new er(P[1],U,u,c,p,O,z),new er(P[0],l,u,c,U,O,z)),(B=(t>=z)<<2|(e>=O)<<1|i>=U)&&(D=M[M.length-1],M[M.length-1]=M[M.length-1-B],M[M.length-1-B]=D)}else{var q=i-+this._x.call(null,P.data),F=e-+this._y.call(null,P.data),G=t-+this._z.call(null,P.data),j=q*q+F*F+G*G;if(j<n){var $=Math.sqrt(n=j);s=i-$,a=e-$,o=t-$,b=i+$,w=e+$,E=t+$,r=P.data}}return r}const kX=(i,e,t,n,r,s)=>Math.sqrt((i-n)**2+(e-r)**2+(t-s)**2);function HX(i,e,t,n){const r=[],s=i-n,a=e-n,o=t-n,l=i+n,u=e+n,c=t+n;return this.visit((p,y,_,b,w,E,M)=>{if(!p.length)do{const P=p.data;kX(i,e,t,this._x(P),this._y(P),this._z(P))<=n&&r.push(P)}while(p=p.next);return y>l||_>u||b>c||w<s||E<a||M<o}),r}function WX(i){if(isNaN(y=+this._x.call(null,i))||isNaN(_=+this._y.call(null,i))||isNaN(b=+this._z.call(null,i)))return this;var e,t=this._root,n,r,s,a=this._x0,o=this._y0,l=this._z0,u=this._x1,c=this._y1,p=this._z1,y,_,b,w,E,M,P,D,B,U,O;if(!t)return this;if(t.length)for(;;){if((P=y>=(w=(a+u)/2))?a=w:u=w,(D=_>=(E=(o+c)/2))?o=E:c=E,(B=b>=(M=(l+p)/2))?l=M:p=M,e=t,!(t=t[U=B<<2|D<<1|P]))return this;if(!t.length)break;(e[U+1&7]||e[U+2&7]||e[U+3&7]||e[U+4&7]||e[U+5&7]||e[U+6&7]||e[U+7&7])&&(n=e,O=U)}for(;t.data!==i;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[U]=s:delete e[U],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[O]=t:this._root=t),this):(this._root=s,this)}function jX(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function XX(){return this._root}function YX(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function QX(i){var e=[],t,n=this._root,r,s,a,o,l,u,c;for(n&&e.push(new er(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!i(n=t.node,s=t.x0,a=t.y0,o=t.z0,l=t.x1,u=t.y1,c=t.z1)&&n.length){var p=(s+l)/2,y=(a+u)/2,_=(o+c)/2;(r=n[7])&&e.push(new er(r,p,y,_,l,u,c)),(r=n[6])&&e.push(new er(r,s,y,_,p,u,c)),(r=n[5])&&e.push(new er(r,p,a,_,l,y,c)),(r=n[4])&&e.push(new er(r,s,a,_,p,y,c)),(r=n[3])&&e.push(new er(r,p,y,o,l,u,_)),(r=n[2])&&e.push(new er(r,s,y,o,p,u,_)),(r=n[1])&&e.push(new er(r,p,a,o,l,y,_)),(r=n[0])&&e.push(new er(r,s,a,o,p,y,_))}return this}function $X(i){var e=[],t=[],n;for(this._root&&e.push(new er(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var r=n.node;if(r.length){var s,a=n.x0,o=n.y0,l=n.z0,u=n.x1,c=n.y1,p=n.z1,y=(a+u)/2,_=(o+c)/2,b=(l+p)/2;(s=r[0])&&e.push(new er(s,a,o,l,y,_,b)),(s=r[1])&&e.push(new er(s,y,o,l,u,_,b)),(s=r[2])&&e.push(new er(s,a,_,l,y,c,b)),(s=r[3])&&e.push(new er(s,y,_,l,u,c,b)),(s=r[4])&&e.push(new er(s,a,o,b,y,_,p)),(s=r[5])&&e.push(new er(s,y,o,b,u,_,p)),(s=r[6])&&e.push(new er(s,a,_,b,y,c,p)),(s=r[7])&&e.push(new er(s,y,_,b,u,c,p))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function KX(i){return i[0]}function ZX(i){return arguments.length?(this._x=i,this):this._x}function JX(i){return i[1]}function eY(i){return arguments.length?(this._y=i,this):this._y}function tY(i){return i[2]}function nY(i){return arguments.length?(this._z=i,this):this._z}function QN(i,e,t,n){var r=new Qx(e??KX,t??JX,n??tY,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function Qx(i,e,t,n,r,s,a,o,l){this._x=i,this._y=e,this._z=t,this._x0=n,this._y0=r,this._z0=s,this._x1=a,this._y1=o,this._z1=l,this._root=void 0}function KM(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var ks=QN.prototype=Qx.prototype;ks.copy=function(){var i=new Qx(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=KM(e),i;for(t=[{source:e,target:i._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(n=e.source[r])&&(n.length?t.push({source:n,target:e.target[r]=new Array(8)}):e.target[r]=KM(n));return i};ks.add=OX;ks.addAll=FX;ks.cover=VX;ks.data=zX;ks.extent=GX;ks.find=qX;ks.findAllWithinRadius=HX;ks.remove=WX;ks.removeAll=jX;ks.root=XX;ks.size=YX;ks.visit=QX;ks.visitAfter=$X;ks.x=ZX;ks.y=eY;ks.z=nY;function xd(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function iY(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function $N(i){let e,t,n;i.length!==2?(e=xd,t=(o,l)=>xd(i(o),l),n=(o,l)=>i(o)-l):(e=i===xd||i===iY?i:rY,t=i,n=i);function r(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const p=u+c>>>1;t(o[p],l)<0?u=p+1:c=p}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const p=u+c>>>1;t(o[p],l)<=0?u=p+1:c=p}while(u<c)}return u}function a(o,l,u=0,c=o.length){const p=r(o,l,u,c-1);return p>u&&n(o[p-1],l)>-n(o[p],l)?p-1:p}return{left:r,center:a,right:s}}function rY(){return 0}function sY(i){return i===null?NaN:+i}const aY=$N(xd),KN=aY.right;$N(sY).center;function $d(i,e){let t,n;if(e===void 0)for(const r of i)r!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)));else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class w1{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],a=e+s,o=Math.abs(e)<Math.abs(s)?e-(a-s):s-(a-e);o&&(t[n++]=o),e=a}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,a=0;if(t>0){for(a=e[--t];t>0&&(n=a,r=e[--t],a=n+r,s=r-(a-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=a+r,r==n-a&&(a=n))}return a}}const oY=Math.sqrt(50),lY=Math.sqrt(10),uY=Math.sqrt(2);function Kd(i,e,t){const n=(e-i)/Math.max(0,t),r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r),a=s>=oY?10:s>=lY?5:s>=uY?2:1;let o,l,u;return r<0?(u=Math.pow(10,-r)/a,o=Math.round(i*u),l=Math.round(e*u),o/u<i&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*a,o=Math.round(i/u),l=Math.round(e/u),o*u<i&&++o,l*u>e&&--l),l<o&&.5<=t&&t<2?Kd(i,e,t*2):[o,l,u]}function cY(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[r,s,a]=n?Kd(e,i,t):Kd(i,e,t);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(n)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(r+u)/-a;else for(let u=0;u<o;++u)l[u]=(r+u)*a;return l}function Tv(i,e,t){return e=+e,i=+i,t=+t,Kd(i,e,t)[2]}function hY(i,e,t){e=+e,i=+i,t=+t;const n=e<i,r=n?Tv(e,i,t):Tv(i,e,t);return(n?-1:1)*(r<0?1/-r:r)}function fY(i,e){let t;for(const n of i)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function dY(i,e){let t=0,n=0;if(e===void 0)for(let r of i)r!=null&&(r=+r)>=r&&(++t,n+=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*AY(i){for(const e of i)yield*e}function w6(i){return Array.from(AY(i))}function o5(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}function pY(i,e){let t=0;for(let n of i)(n=+n)&&(t+=n);return t}function ZN(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function $x(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function JN(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function m7(){}var R6=.7,Zd=1/R6,p5="\\s*([+-]?\\d+)\\s*",C6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",El="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mY=/^#([0-9a-f]{3,8})$/,gY=new RegExp(`^rgb\\(${p5},${p5},${p5}\\)$`),yY=new RegExp(`^rgb\\(${El},${El},${El}\\)$`),vY=new RegExp(`^rgba\\(${p5},${p5},${p5},${C6}\\)$`),_Y=new RegExp(`^rgba\\(${El},${El},${El},${C6}\\)$`),xY=new RegExp(`^hsl\\(${C6},${El},${El}\\)$`),bY=new RegExp(`^hsla\\(${C6},${El},${El},${C6}\\)$`),ZM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$x(m7,e3,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:JM,formatHex:JM,formatHex8:SY,formatHsl:TY,formatRgb:eE,toString:eE});function JM(){return this.rgb().formatHex()}function SY(){return this.rgb().formatHex8()}function TY(){return eP(this).formatHsl()}function eE(){return this.rgb().formatRgb()}function e3(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=mY.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?tE(e):t===3?new Ga(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?M9(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?M9(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gY.exec(i))?new Ga(e[1],e[2],e[3],1):(e=yY.exec(i))?new Ga(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vY.exec(i))?M9(e[1],e[2],e[3],e[4]):(e=_Y.exec(i))?M9(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xY.exec(i))?rE(e[1],e[2]/100,e[3]/100,1):(e=bY.exec(i))?rE(e[1],e[2]/100,e[3]/100,e[4]):ZM.hasOwnProperty(i)?tE(ZM[i]):i==="transparent"?new Ga(NaN,NaN,NaN,0):null}function tE(i){return new Ga(i>>16&255,i>>8&255,i&255,1)}function M9(i,e,t,n){return n<=0&&(i=e=t=NaN),new Ga(i,e,t,n)}function MY(i){return i instanceof m7||(i=e3(i)),i?(i=i.rgb(),new Ga(i.r,i.g,i.b,i.opacity)):new Ga}function Mv(i,e,t,n){return arguments.length===1?MY(i):new Ga(i,e,t,n??1)}function Ga(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}$x(Ga,Mv,JN(m7,{brighter(i){return i=i==null?Zd:Math.pow(Zd,i),new Ga(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?R6:Math.pow(R6,i),new Ga(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new Ga(_c(this.r),_c(this.g),_c(this.b),Jd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nE,formatHex:nE,formatHex8:EY,formatRgb:iE,toString:iE}));function nE(){return`#${fc(this.r)}${fc(this.g)}${fc(this.b)}`}function EY(){return`#${fc(this.r)}${fc(this.g)}${fc(this.b)}${fc((isNaN(this.opacity)?1:this.opacity)*255)}`}function iE(){const i=Jd(this.opacity);return`${i===1?"rgb(":"rgba("}${_c(this.r)}, ${_c(this.g)}, ${_c(this.b)}${i===1?")":`, ${i})`}`}function Jd(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function _c(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function fc(i){return i=_c(i),(i<16?"0":"")+i.toString(16)}function rE(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new U0(i,e,t,n)}function eP(i){if(i instanceof U0)return new U0(i.h,i.s,i.l,i.opacity);if(i instanceof m7||(i=e3(i)),!i)return new U0;if(i instanceof U0)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),a=NaN,o=s-r,l=(s+r)/2;return o?(e===s?a=(t-n)/o+(t<n)*6:t===s?a=(n-e)/o+2:a=(e-t)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new U0(a,o,l,i.opacity)}function wY(i,e,t,n){return arguments.length===1?eP(i):new U0(i,e,t,n??1)}function U0(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}$x(U0,wY,JN(m7,{brighter(i){return i=i==null?Zd:Math.pow(Zd,i),new U0(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?R6:Math.pow(R6,i),new U0(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new Ga(Xg(i>=240?i-240:i+120,r,n),Xg(i,r,n),Xg(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new U0(sE(this.h),E9(this.s),E9(this.l),Jd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=Jd(this.opacity);return`${i===1?"hsl(":"hsla("}${sE(this.h)}, ${E9(this.s)*100}%, ${E9(this.l)*100}%${i===1?")":`, ${i})`}`}}));function sE(i){return i=(i||0)%360,i<0?i+360:i}function E9(i){return Math.max(0,Math.min(1,i||0))}function Xg(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const Kx=i=>()=>i;function RY(i,e){return function(t){return i+t*e}}function CY(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function NY(i){return(i=+i)==1?tP:function(e,t){return t-e?CY(e,t,i):Kx(isNaN(e)?t:e)}}function tP(i,e){var t=e-i;return t?RY(i,t):Kx(isNaN(i)?e:i)}const aE=(function i(e){var t=NY(e);function n(r,s){var a=t((r=Mv(r)).r,(s=Mv(s)).r),o=t(r.g,s.g),l=t(r.b,s.b),u=tP(r.opacity,s.opacity);return function(c){return r.r=a(c),r.g=o(c),r.b=l(c),r.opacity=u(c),r+""}}return n.gamma=i,n})(1);function nP(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),r;return function(s){for(r=0;r<t;++r)n[r]=i[r]*(1-s)+e[r]*s;return n}}function iP(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function PY(i,e){return(iP(e)?nP:rP)(i,e)}function rP(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,r=new Array(n),s=new Array(t),a;for(a=0;a<n;++a)r[a]=Zx(i[a],e[a]);for(;a<t;++a)s[a]=e[a];return function(o){for(a=0;a<n;++a)s[a]=r[a](o);return s}}function DY(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function N6(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function BY(i,e){var t={},n={},r;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in i?t[r]=Zx(i[r],e[r]):n[r]=e[r];return function(s){for(r in t)n[r]=t[r](s);return n}}var Ev=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yg=new RegExp(Ev.source,"g");function LY(i){return function(){return i}}function IY(i){return function(e){return i(e)+""}}function UY(i,e){var t=Ev.lastIndex=Yg.lastIndex=0,n,r,s,a=-1,o=[],l=[];for(i=i+"",e=e+"";(n=Ev.exec(i))&&(r=Yg.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),o[a]?o[a]+=s:o[++a]=s),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:N6(n,r)})),t=Yg.lastIndex;return t<e.length&&(s=e.slice(t),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?IY(l[0].x):LY(e):(e=l.length,function(u){for(var c=0,p;c<e;++c)o[(p=l[c]).i]=p.x(u);return o.join("")})}function Zx(i,e){var t=typeof e,n;return e==null||t==="boolean"?Kx(e):(t==="number"?N6:t==="string"?(n=e3(e))?(e=n,aE):UY:e instanceof e3?aE:e instanceof Date?DY:iP(e)?nP:Array.isArray(e)?rP:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?BY:N6)(i,e)}function OY(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function FY(i){return function(){return i}}function VY(i){return+i}var oE=[0,1];function l5(i){return i}function wv(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:FY(isNaN(e)?NaN:.5)}function zY(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function GY(i,e,t){var n=i[0],r=i[1],s=e[0],a=e[1];return r<n?(n=wv(r,n),s=t(a,s)):(n=wv(n,r),s=t(s,a)),function(o){return s(n(o))}}function qY(i,e,t){var n=Math.min(i.length,e.length)-1,r=new Array(n),s=new Array(n),a=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++a<n;)r[a]=wv(i[a],i[a+1]),s[a]=t(e[a],e[a+1]);return function(o){var l=KN(i,o,1,n)-1;return s[l](r[l](o))}}function kY(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function HY(){var i=oE,e=oE,t=Zx,n,r,s,a=l5,o,l,u;function c(){var y=Math.min(i.length,e.length);return a!==l5&&(a=zY(i[0],i[y-1])),o=y>2?qY:GY,l=u=null,p}function p(y){return y==null||isNaN(y=+y)?s:(l||(l=o(i.map(n),e,t)))(n(a(y)))}return p.invert=function(y){return a(r((u||(u=o(e,i.map(n),N6)))(y)))},p.domain=function(y){return arguments.length?(i=Array.from(y,VY),c()):i.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),c()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),t=OY,c()},p.clamp=function(y){return arguments.length?(a=y?!0:l5,c()):a!==l5},p.interpolate=function(y){return arguments.length?(t=y,c()):t},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,_){return n=y,r=_,c()}}function WY(){return HY()(l5,l5)}function jY(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function eA(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function F5(i){return i=eA(Math.abs(i)),i?i[1]:NaN}function XY(i,e){return function(t,n){for(var r=t.length,s=[],a=0,o=i[0],l=0;r>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(t.substring(r-=o,r+o)),!((l+=o+1)>n));)o=i[a=(a+1)%i.length];return s.reverse().join(e)}}function YY(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var QY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tA(i){if(!(e=QY.exec(i)))throw new Error("invalid format: "+i);var e;return new Jx({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tA.prototype=Jx.prototype;function Jx(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Jx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $Y(i){e:for(var e=i.length,t=1,n=-1,r;t<e;++t)switch(i[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var sP;function KY(i,e){var t=eA(i,e);if(!t)return i+"";var n=t[0],r=t[1],s=r-(sP=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=n.length;return s===a?n:s>a?n+new Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+eA(i,Math.max(0,e+s-1))[0]}function lE(i,e){var t=eA(i,e);if(!t)return i+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const uE={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:jY,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>lE(i*100,e),r:lE,s:KY,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function cE(i){return i}var hE=Array.prototype.map,fE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ZY(i){var e=i.grouping===void 0||i.thousands===void 0?cE:XY(hE.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?cE:YY(hE.call(i.numerals,String)),a=i.percent===void 0?"%":i.percent+"",o=i.minus===void 0?"−":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function u(p){p=tA(p);var y=p.fill,_=p.align,b=p.sign,w=p.symbol,E=p.zero,M=p.width,P=p.comma,D=p.precision,B=p.trim,U=p.type;U==="n"?(P=!0,U="g"):uE[U]||(D===void 0&&(D=12),B=!0,U="g"),(E||y==="0"&&_==="=")&&(E=!0,y="0",_="=");var O=w==="$"?t:w==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",z=w==="$"?n:/[%p]/.test(U)?a:"",q=uE[U],F=/[defgprs%]/.test(U);D=D===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function G(j){var $=O,K=z,ie,ee,X;if(U==="c")K=q(j)+K,j="";else{j=+j;var re=j<0||1/j<0;if(j=isNaN(j)?l:q(Math.abs(j),D),B&&(j=$Y(j)),re&&+j==0&&b!=="+"&&(re=!1),$=(re?b==="("?b:o:b==="-"||b==="("?"":b)+$,K=(U==="s"?fE[8+sP/3]:"")+K+(re&&b==="("?")":""),F){for(ie=-1,ee=j.length;++ie<ee;)if(X=j.charCodeAt(ie),48>X||X>57){K=(X===46?r+j.slice(ie+1):j.slice(ie))+K,j=j.slice(0,ie);break}}}P&&!E&&(j=e(j,1/0));var se=$.length+j.length+K.length,Ae=se<M?new Array(M-se+1).join(y):"";switch(P&&E&&(j=e(Ae+j,Ae.length?M-K.length:1/0),Ae=""),_){case"<":j=$+j+K+Ae;break;case"=":j=$+Ae+j+K;break;case"^":j=Ae.slice(0,se=Ae.length>>1)+$+j+K+Ae.slice(se);break;default:j=Ae+$+j+K;break}return s(j)}return G.toString=function(){return p+""},G}function c(p,y){var _=u((p=tA(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(F5(y)/3)))*3,w=Math.pow(10,-b),E=fE[8+b/3];return function(M){return _(w*M)+E}}return{format:u,formatPrefix:c}}var w9,aP,oP;JY({thousands:",",grouping:[3],currency:["$",""]});function JY(i){return w9=ZY(i),aP=w9.format,oP=w9.formatPrefix,w9}function eQ(i){return Math.max(0,-F5(Math.abs(i)))}function tQ(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(F5(e)/3)))*3-F5(Math.abs(i)))}function nQ(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,F5(e)-F5(i))+1}function iQ(i,e,t,n){var r=hY(i,e,t),s;switch(n=tA(n??",f"),n.type){case"s":{var a=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=tQ(r,a))&&(n.precision=s),oP(n,a)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=nQ(r,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=eQ(r))&&(n.precision=s-(n.type==="%")*2);break}}return aP(n)}function lP(i){var e=i.domain;return i.ticks=function(t){var n=e();return cY(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var r=e();return iQ(r[0],r[r.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),r=0,s=n.length-1,a=n[r],o=n[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=r,r=s,s=u);c-- >0;){if(u=Tv(a,o,t),u===l)return n[r]=a,n[s]=o,e(n);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return i},i}function U1(){var i=WY();return i.copy=function(){return kY(i,U1())},ZN.apply(i,arguments),lP(i)}function uP(){var i=0,e=1,t=1,n=[.5],r=[0,1],s;function a(l){return l!=null&&l<=l?r[KN(n,l,0,t)]:s}function o(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return a}return a.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,o()):[i,e]},a.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,o()):r.slice()},a.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[i,n[0]]:u>=t?[n[t-1],e]:[n[u-1],n[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return n.slice()},a.copy=function(){return uP().domain([i,e]).range(r).unknown(s)},ZN.apply(lP(a),arguments)}var hi=1e-6,nA=1e-12,Ti=Math.PI,qa=Ti/2,iA=Ti/4,Ro=Ti*2,Lr=180/Ti,Yn=Ti/180,$i=Math.abs,eb=Math.atan,e0=Math.atan2,Qn=Math.cos,R9=Math.ceil,rQ=Math.exp,Rv=Math.hypot,sQ=Math.log,zn=Math.sin,aQ=Math.sign||function(i){return i>0?1:i<0?-1:0},O1=Math.sqrt,oQ=Math.tan;function lQ(i){return i>1?0:i<-1?Ti:Math.acos(i)}function F1(i){return i>1?qa:i<-1?-qa:Math.asin(i)}function dE(i){return(i=zn(i/2))*i}function ia(){}function rA(i,e){i&&pE.hasOwnProperty(i.type)&&pE[i.type](i,e)}var AE={Feature:function(i,e){rA(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)rA(t[n].geometry,e)}},pE={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){Cv(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)Cv(t[n],e,0)},Polygon:function(i,e){mE(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)mE(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)rA(t[n],e)}};function Cv(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function mE(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)Cv(i[t],e,1);e.polygonEnd()}function Up(i,e){i&&AE.hasOwnProperty(i.type)?AE[i.type](i,e):rA(i,e)}var sA=new w1,gE=new w1,cP,hP,Nv,Pv,Dv,V1={point:ia,lineStart:ia,lineEnd:ia,polygonStart:function(){sA=new w1,V1.lineStart=uQ,V1.lineEnd=cQ},polygonEnd:function(){var i=+sA;gE.add(i<0?Ro+i:i),this.lineStart=this.lineEnd=this.point=ia},sphere:function(){gE.add(Ro)}};function uQ(){V1.point=hQ}function cQ(){fP(cP,hP)}function hQ(i,e){V1.point=fP,cP=i,hP=e,i*=Yn,e*=Yn,Nv=i,Pv=Qn(e=e/2+iA),Dv=zn(e)}function fP(i,e){i*=Yn,e*=Yn,e=e/2+iA;var t=i-Nv,n=t>=0?1:-1,r=n*t,s=Qn(e),a=zn(e),o=Dv*a,l=Pv*s+o*Qn(r),u=o*n*zn(r);sA.add(e0(u,l)),Nv=i,Pv=s,Dv=a}function aA(i){return[e0(i[1],i[0]),F1(i[2])]}function t3(i){var e=i[0],t=i[1],n=Qn(t);return[n*Qn(e),n*zn(e),zn(t)]}function C9(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function V5(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function Qg(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function N9(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function oA(i){var e=O1(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var xr,Va,Dr,So,tc,dP,AP,m5,s6,Tu,z1,m1={point:Bv,lineStart:yE,lineEnd:vE,polygonStart:function(){m1.point=mP,m1.lineStart=fQ,m1.lineEnd=dQ,s6=new w1,V1.polygonStart()},polygonEnd:function(){V1.polygonEnd(),m1.point=Bv,m1.lineStart=yE,m1.lineEnd=vE,sA<0?(xr=-(Dr=180),Va=-(So=90)):s6>hi?So=90:s6<-hi&&(Va=-90),z1[0]=xr,z1[1]=Dr},sphere:function(){xr=-(Dr=180),Va=-(So=90)}};function Bv(i,e){Tu.push(z1=[xr=i,Dr=i]),e<Va&&(Va=e),e>So&&(So=e)}function pP(i,e){var t=t3([i*Yn,e*Yn]);if(m5){var n=V5(m5,t),r=[n[1],-n[0],0],s=V5(r,n);oA(s),s=aA(s);var a=i-tc,o=a>0?1:-1,l=s[0]*Lr*o,u,c=$i(a)>180;c^(o*tc<l&&l<o*i)?(u=s[1]*Lr,u>So&&(So=u)):(l=(l+360)%360-180,c^(o*tc<l&&l<o*i)?(u=-s[1]*Lr,u<Va&&(Va=u)):(e<Va&&(Va=e),e>So&&(So=e))),c?i<tc?_o(xr,i)>_o(xr,Dr)&&(Dr=i):_o(i,Dr)>_o(xr,Dr)&&(xr=i):Dr>=xr?(i<xr&&(xr=i),i>Dr&&(Dr=i)):i>tc?_o(xr,i)>_o(xr,Dr)&&(Dr=i):_o(i,Dr)>_o(xr,Dr)&&(xr=i)}else Tu.push(z1=[xr=i,Dr=i]);e<Va&&(Va=e),e>So&&(So=e),m5=t,tc=i}function yE(){m1.point=pP}function vE(){z1[0]=xr,z1[1]=Dr,m1.point=Bv,m5=null}function mP(i,e){if(m5){var t=i-tc;s6.add($i(t)>180?t+(t>0?360:-360):t)}else dP=i,AP=e;V1.point(i,e),pP(i,e)}function fQ(){V1.lineStart()}function dQ(){mP(dP,AP),V1.lineEnd(),$i(s6)>hi&&(xr=-(Dr=180)),z1[0]=xr,z1[1]=Dr,m5=null}function _o(i,e){return(e-=i)<0?e+360:e}function AQ(i,e){return i[0]-e[0]}function _E(i,e){return i[0]<=i[1]?i[0]<=e&&e<=i[1]:e<i[0]||i[1]<e}function gP(i){var e,t,n,r,s,a,o;if(So=Dr=-(xr=Va=1/0),Tu=[],Up(i,m1),t=Tu.length){for(Tu.sort(AQ),e=1,n=Tu[0],s=[n];e<t;++e)r=Tu[e],_E(n,r[0])||_E(n,r[1])?(_o(n[0],r[1])>_o(n[0],n[1])&&(n[1]=r[1]),_o(r[0],n[1])>_o(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(a=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=r,++e)r=s[e],(o=_o(n[1],r[0]))>a&&(a=o,xr=r[0],Dr=n[1])}return Tu=z1=null,xr===1/0||Va===1/0?[[NaN,NaN],[NaN,NaN]]:[[xr,Va],[Dr,So]]}var jh,lA,uA,cA,hA,fA,dA,AA,Lv,Iv,Uv,yP,vP,Sa,Ta,Ma,V0={sphere:ia,point:tb,lineStart:xE,lineEnd:bE,polygonStart:function(){V0.lineStart=gQ,V0.lineEnd=yQ},polygonEnd:function(){V0.lineStart=xE,V0.lineEnd=bE}};function tb(i,e){i*=Yn,e*=Yn;var t=Qn(e);g7(t*Qn(i),t*zn(i),zn(e))}function g7(i,e,t){++jh,uA+=(i-uA)/jh,cA+=(e-cA)/jh,hA+=(t-hA)/jh}function xE(){V0.point=pQ}function pQ(i,e){i*=Yn,e*=Yn;var t=Qn(e);Sa=t*Qn(i),Ta=t*zn(i),Ma=zn(e),V0.point=mQ,g7(Sa,Ta,Ma)}function mQ(i,e){i*=Yn,e*=Yn;var t=Qn(e),n=t*Qn(i),r=t*zn(i),s=zn(e),a=e0(O1((a=Ta*s-Ma*r)*a+(a=Ma*n-Sa*s)*a+(a=Sa*r-Ta*n)*a),Sa*n+Ta*r+Ma*s);lA+=a,fA+=a*(Sa+(Sa=n)),dA+=a*(Ta+(Ta=r)),AA+=a*(Ma+(Ma=s)),g7(Sa,Ta,Ma)}function bE(){V0.point=tb}function gQ(){V0.point=vQ}function yQ(){_P(yP,vP),V0.point=tb}function vQ(i,e){yP=i,vP=e,i*=Yn,e*=Yn,V0.point=_P;var t=Qn(e);Sa=t*Qn(i),Ta=t*zn(i),Ma=zn(e),g7(Sa,Ta,Ma)}function _P(i,e){i*=Yn,e*=Yn;var t=Qn(e),n=t*Qn(i),r=t*zn(i),s=zn(e),a=Ta*s-Ma*r,o=Ma*n-Sa*s,l=Sa*r-Ta*n,u=Rv(a,o,l),c=F1(u),p=u&&-c/u;Lv.add(p*a),Iv.add(p*o),Uv.add(p*l),lA+=c,fA+=c*(Sa+(Sa=n)),dA+=c*(Ta+(Ta=r)),AA+=c*(Ma+(Ma=s)),g7(Sa,Ta,Ma)}function SE(i){jh=lA=uA=cA=hA=fA=dA=AA=0,Lv=new w1,Iv=new w1,Uv=new w1,Up(i,V0);var e=+Lv,t=+Iv,n=+Uv,r=Rv(e,t,n);return r<nA&&(e=fA,t=dA,n=AA,lA<hi&&(e=uA,t=cA,n=hA),r=Rv(e,t,n),r<nA)?[NaN,NaN]:[e0(t,e)*Lr,F1(n/r)*Lr]}function Ov(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function Fv(i,e){return $i(i)>Ti&&(i-=Math.round(i/Ro)*Ro),[i,e]}Fv.invert=Fv;function xP(i,e,t){return(i%=Ro)?e||t?Ov(ME(i),EE(e,t)):ME(i):e||t?EE(e,t):Fv}function TE(i){return function(e,t){return e+=i,$i(e)>Ti&&(e-=Math.round(e/Ro)*Ro),[e,t]}}function ME(i){var e=TE(i);return e.invert=TE(-i),e}function EE(i,e){var t=Qn(i),n=zn(i),r=Qn(e),s=zn(e);function a(o,l){var u=Qn(l),c=Qn(o)*u,p=zn(o)*u,y=zn(l),_=y*t+c*n;return[e0(p*r-_*s,c*t-y*n),F1(_*r+p*s)]}return a.invert=function(o,l){var u=Qn(l),c=Qn(o)*u,p=zn(o)*u,y=zn(l),_=y*r-p*s;return[e0(p*r+y*s,c*t+_*n),F1(_*t-c*n)]},a}function _Q(i){i=xP(i[0]*Yn,i[1]*Yn,i.length>2?i[2]*Yn:0);function e(t){return t=i(t[0]*Yn,t[1]*Yn),t[0]*=Lr,t[1]*=Lr,t}return e.invert=function(t){return t=i.invert(t[0]*Yn,t[1]*Yn),t[0]*=Lr,t[1]*=Lr,t},e}function xQ(i,e,t,n,r,s){if(t){var a=Qn(e),o=zn(e),l=n*t;r==null?(r=e+n*Ro,s=e-l/2):(r=wE(a,r),s=wE(a,s),(n>0?r<s:r>s)&&(r+=n*Ro));for(var u,c=r;n>0?c>s:c<s;c-=l)u=aA([a,-o*Qn(c),-o*zn(c)]),i.point(u[0],u[1])}}function wE(i,e){e=t3(e),e[0]-=i,oA(e);var t=lQ(-e[1]);return((-e[2]<0?-t:t)+Ro-hi)%Ro}function bP(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:ia,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function bd(i,e){return $i(i[0]-e[0])<hi&&$i(i[1]-e[1])<hi}function P9(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function SP(i,e,t,n,r){var s=[],a=[],o,l;if(i.forEach(function(b){if(!((w=b.length-1)<=0)){var w,E=b[0],M=b[w],P;if(bd(E,M)){if(!E[2]&&!M[2]){for(r.lineStart(),o=0;o<w;++o)r.point((E=b[o])[0],E[1]);r.lineEnd();return}M[0]+=2*hi}s.push(P=new P9(E,b,null,!0)),a.push(P.o=new P9(E,null,P,!1)),s.push(P=new P9(M,b,null,!1)),a.push(P.o=new P9(M,null,P,!0))}}),!!s.length){for(a.sort(e),RE(s),RE(a),o=0,l=a.length;o<l;++o)a[o].e=t=!t;for(var u=s[0],c,p;;){for(var y=u,_=!0;y.v;)if((y=y.n)===u)return;c=y.z,r.lineStart();do{if(y.v=y.o.v=!0,y.e){if(_)for(o=0,l=c.length;o<l;++o)r.point((p=c[o])[0],p[1]);else n(y.x,y.n.x,1,r);y=y.n}else{if(_)for(c=y.p.z,o=c.length-1;o>=0;--o)r.point((p=c[o])[0],p[1]);else n(y.x,y.p.x,-1,r);y=y.p}y=y.o,c=y.z,_=!_}while(!y.v);r.lineEnd()}}}function RE(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function $g(i){return $i(i[0])<=Ti?i[0]:aQ(i[0])*(($i(i[0])+Ti)%Ro-Ti)}function TP(i,e){var t=$g(e),n=e[1],r=zn(n),s=[zn(t),-Qn(t),0],a=0,o=0,l=new w1;r===1?n=qa+hi:r===-1&&(n=-qa-hi);for(var u=0,c=i.length;u<c;++u)if(y=(p=i[u]).length)for(var p,y,_=p[y-1],b=$g(_),w=_[1]/2+iA,E=zn(w),M=Qn(w),P=0;P<y;++P,b=B,E=O,M=z,_=D){var D=p[P],B=$g(D),U=D[1]/2+iA,O=zn(U),z=Qn(U),q=B-b,F=q>=0?1:-1,G=F*q,j=G>Ti,$=E*O;if(l.add(e0($*F*zn(G),M*z+$*Qn(G))),a+=j?q+F*Ro:q,j^b>=t^B>=t){var K=V5(t3(_),t3(D));oA(K);var ie=V5(s,K);oA(ie);var ee=(j^q>=0?-1:1)*F1(ie[2]);(n>ee||n===ee&&(K[0]||K[1]))&&(o+=j^q>=0?1:-1)}}return(a<-hi||a<hi&&l<-nA)^o&1}function MP(i,e,t,n){return function(r){var s=e(r),a=bP(),o=e(a),l=!1,u,c,p,y={point:_,lineStart:w,lineEnd:E,polygonStart:function(){y.point=M,y.lineStart=P,y.lineEnd=D,c=[],u=[]},polygonEnd:function(){y.point=_,y.lineStart=w,y.lineEnd=E,c=w6(c);var B=TP(u,n);c.length?(l||(r.polygonStart(),l=!0),SP(c,SQ,B,t,r)):B&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function _(B,U){i(B,U)&&r.point(B,U)}function b(B,U){s.point(B,U)}function w(){y.point=b,s.lineStart()}function E(){y.point=_,s.lineEnd()}function M(B,U){p.push([B,U]),o.point(B,U)}function P(){o.lineStart(),p=[]}function D(){M(p[0][0],p[0][1]),o.lineEnd();var B=o.clean(),U=a.result(),O,z=U.length,q,F,G;if(p.pop(),u.push(p),p=null,!!z){if(B&1){if(F=U[0],(q=F.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),O=0;O<q;++O)r.point((G=F[O])[0],G[1]);r.lineEnd()}return}z>1&&B&2&&U.push(U.pop().concat(U.shift())),c.push(U.filter(bQ))}}return y}}function bQ(i){return i.length>1}function SQ(i,e){return((i=i.x)[0]<0?i[1]-qa-hi:qa-i[1])-((e=e.x)[0]<0?e[1]-qa-hi:qa-e[1])}const CE=MP(function(){return!0},TQ,EQ,[-Ti,-qa]);function TQ(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,a){var o=s>0?Ti:-Ti,l=$i(s-e);$i(l-Ti)<hi?(i.point(e,t=(t+a)/2>0?qa:-qa),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),i.point(s,t),r=0):n!==o&&l>=Ti&&($i(e-n)<hi&&(e-=n*hi),$i(s-o)<hi&&(s-=o*hi),t=MQ(e,t,s,a),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(o,t),r=0),i.point(e=s,t=a),n=o},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function MQ(i,e,t,n){var r,s,a=zn(i-t);return $i(a)>hi?eb((zn(e)*(s=Qn(n))*zn(t)-zn(n)*(r=Qn(e))*zn(i))/(r*s*a)):(e+n)/2}function EQ(i,e,t,n){var r;if(i==null)r=t*qa,n.point(-Ti,r),n.point(0,r),n.point(Ti,r),n.point(Ti,0),n.point(Ti,-r),n.point(0,-r),n.point(-Ti,-r),n.point(-Ti,0),n.point(-Ti,r);else if($i(i[0]-e[0])>hi){var s=i[0]<e[0]?Ti:-Ti;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function wQ(i){var e=Qn(i),t=2*Yn,n=e>0,r=$i(e)>hi;function s(c,p,y,_){xQ(_,i,t,y,c,p)}function a(c,p){return Qn(c)*Qn(p)>e}function o(c){var p,y,_,b,w;return{lineStart:function(){b=_=!1,w=1},point:function(E,M){var P=[E,M],D,B=a(E,M),U=n?B?0:u(E,M):B?u(E+(E<0?Ti:-Ti),M):0;if(!p&&(b=_=B)&&c.lineStart(),B!==_&&(D=l(p,P),(!D||bd(p,D)||bd(P,D))&&(P[2]=1)),B!==_)w=0,B?(c.lineStart(),D=l(P,p),c.point(D[0],D[1])):(D=l(p,P),c.point(D[0],D[1],2),c.lineEnd()),p=D;else if(r&&p&&n^B){var O;!(U&y)&&(O=l(P,p,!0))&&(w=0,n?(c.lineStart(),c.point(O[0][0],O[0][1]),c.point(O[1][0],O[1][1]),c.lineEnd()):(c.point(O[1][0],O[1][1]),c.lineEnd(),c.lineStart(),c.point(O[0][0],O[0][1],3)))}B&&(!p||!bd(p,P))&&c.point(P[0],P[1]),p=P,_=B,y=U},lineEnd:function(){_&&c.lineEnd(),p=null},clean:function(){return w|(b&&_)<<1}}}function l(c,p,y){var _=t3(c),b=t3(p),w=[1,0,0],E=V5(_,b),M=C9(E,E),P=E[0],D=M-P*P;if(!D)return!y&&c;var B=e*M/D,U=-e*P/D,O=V5(w,E),z=N9(w,B),q=N9(E,U);Qg(z,q);var F=O,G=C9(z,F),j=C9(F,F),$=G*G-j*(C9(z,z)-1);if(!($<0)){var K=O1($),ie=N9(F,(-G-K)/j);if(Qg(ie,z),ie=aA(ie),!y)return ie;var ee=c[0],X=p[0],re=c[1],se=p[1],Ae;X<ee&&(Ae=ee,ee=X,X=Ae);var Se=X-ee,Ce=$i(Se-Ti)<hi,Ye=Ce||Se<hi;if(!Ce&&se<re&&(Ae=re,re=se,se=Ae),Ye?Ce?re+se>0^ie[1]<($i(ie[0]-ee)<hi?re:se):re<=ie[1]&&ie[1]<=se:Se>Ti^(ee<=ie[0]&&ie[0]<=X)){var it=N9(F,(-G+K)/j);return Qg(it,z),[ie,aA(it)]}}}function u(c,p){var y=n?i:Ti-i,_=0;return c<-y?_|=1:c>y&&(_|=2),p<-y?_|=4:p>y&&(_|=8),_}return MP(a,o,s,n?[0,-i]:[-Ti,i-Ti])}function RQ(i,e,t,n,r,s){var a=i[0],o=i[1],l=e[0],u=e[1],c=0,p=1,y=l-a,_=u-o,b;if(b=t-a,!(!y&&b>0)){if(b/=y,y<0){if(b<c)return;b<p&&(p=b)}else if(y>0){if(b>p)return;b>c&&(c=b)}if(b=r-a,!(!y&&b<0)){if(b/=y,y<0){if(b>p)return;b>c&&(c=b)}else if(y>0){if(b<c)return;b<p&&(p=b)}if(b=n-o,!(!_&&b>0)){if(b/=_,_<0){if(b<c)return;b<p&&(p=b)}else if(_>0){if(b>p)return;b>c&&(c=b)}if(b=s-o,!(!_&&b<0)){if(b/=_,_<0){if(b>p)return;b>c&&(c=b)}else if(_>0){if(b<c)return;b<p&&(p=b)}return c>0&&(i[0]=a+c*y,i[1]=o+c*_),p<1&&(e[0]=a+p*y,e[1]=o+p*_),!0}}}}}var Xh=1e9,D9=-Xh;function CQ(i,e,t,n){function r(u,c){return i<=u&&u<=t&&e<=c&&c<=n}function s(u,c,p,y){var _=0,b=0;if(u==null||(_=a(u,p))!==(b=a(c,p))||l(u,c)<0^p>0)do y.point(_===0||_===3?i:t,_>1?n:e);while((_=(_+p+4)%4)!==b);else y.point(c[0],c[1])}function a(u,c){return $i(u[0]-i)<hi?c>0?0:3:$i(u[0]-t)<hi?c>0?2:1:$i(u[1]-e)<hi?c>0?1:0:c>0?3:2}function o(u,c){return l(u.x,c.x)}function l(u,c){var p=a(u,1),y=a(c,1);return p!==y?p-y:p===0?c[1]-u[1]:p===1?u[0]-c[0]:p===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,p=bP(),y,_,b,w,E,M,P,D,B,U,O,z={point:q,lineStart:$,lineEnd:K,polygonStart:G,polygonEnd:j};function q(ee,X){r(ee,X)&&c.point(ee,X)}function F(){for(var ee=0,X=0,re=_.length;X<re;++X)for(var se=_[X],Ae=1,Se=se.length,Ce=se[0],Ye,it,pt=Ce[0],yt=Ce[1];Ae<Se;++Ae)Ye=pt,it=yt,Ce=se[Ae],pt=Ce[0],yt=Ce[1],it<=n?yt>n&&(pt-Ye)*(n-it)>(yt-it)*(i-Ye)&&++ee:yt<=n&&(pt-Ye)*(n-it)<(yt-it)*(i-Ye)&&--ee;return ee}function G(){c=p,y=[],_=[],O=!0}function j(){var ee=F(),X=O&&ee,re=(y=w6(y)).length;(X||re)&&(u.polygonStart(),X&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),re&&SP(y,o,ee,s,u),u.polygonEnd()),c=u,y=_=b=null}function $(){z.point=ie,_&&_.push(b=[]),U=!0,B=!1,P=D=NaN}function K(){y&&(ie(w,E),M&&B&&p.rejoin(),y.push(p.result())),z.point=q,B&&c.lineEnd()}function ie(ee,X){var re=r(ee,X);if(_&&b.push([ee,X]),U)w=ee,E=X,M=re,U=!1,re&&(c.lineStart(),c.point(ee,X));else if(re&&B)c.point(ee,X);else{var se=[P=Math.max(D9,Math.min(Xh,P)),D=Math.max(D9,Math.min(Xh,D))],Ae=[ee=Math.max(D9,Math.min(Xh,ee)),X=Math.max(D9,Math.min(Xh,X))];RQ(se,Ae,i,e,t,n)?(B||(c.lineStart(),c.point(se[0],se[1])),c.point(Ae[0],Ae[1]),re||c.lineEnd(),O=!1):re&&(c.lineStart(),c.point(ee,X),O=!1)}P=ee,D=X,B=re}return z}}var Vv,zv,Sd,Td,z5={sphere:ia,point:ia,lineStart:NQ,lineEnd:ia,polygonStart:ia,polygonEnd:ia};function NQ(){z5.point=DQ,z5.lineEnd=PQ}function PQ(){z5.point=z5.lineEnd=ia}function DQ(i,e){i*=Yn,e*=Yn,zv=i,Sd=zn(e),Td=Qn(e),z5.point=BQ}function BQ(i,e){i*=Yn,e*=Yn;var t=zn(e),n=Qn(e),r=$i(i-zv),s=Qn(r),a=zn(r),o=n*a,l=Td*t-Sd*n*s,u=Sd*t+Td*n*s;Vv.add(e0(O1(o*o+l*l),u)),zv=i,Sd=t,Td=n}function LQ(i){return Vv=new w1,Up(i,z5),+Vv}var Gv=[null,null],IQ={type:"LineString",coordinates:Gv};function zu(i,e){return Gv[0]=i,Gv[1]=e,LQ(IQ)}var NE={Feature:function(i,e){return pA(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)if(pA(t[n].geometry,e))return!0;return!1}},PE={Sphere:function(){return!0},Point:function(i,e){return DE(i.coordinates,e)},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(DE(t[n],e))return!0;return!1},LineString:function(i,e){return BE(i.coordinates,e)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(BE(t[n],e))return!0;return!1},Polygon:function(i,e){return LE(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(LE(t[n],e))return!0;return!1},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)if(pA(t[n],e))return!0;return!1}};function pA(i,e){return i&&PE.hasOwnProperty(i.type)?PE[i.type](i,e):!1}function DE(i,e){return zu(i,e)===0}function BE(i,e){for(var t,n,r,s=0,a=i.length;s<a;s++){if(n=zu(i[s],e),n===0||s>0&&(r=zu(i[s],i[s-1]),r>0&&t<=r&&n<=r&&(t+n-r)*(1-Math.pow((t-n)/r,2))<nA*r))return!0;t=n}return!1}function LE(i,e){return!!TP(i.map(UQ),EP(e))}function UQ(i){return i=i.map(EP),i.pop(),i}function EP(i){return[i[0]*Yn,i[1]*Yn]}function OQ(i,e){return(i&&NE.hasOwnProperty(i.type)?NE[i.type]:pA)(i,e)}function IE(i,e,t){var n=o5(i,e-hi,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function UE(i,e,t){var n=o5(i,e-hi,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function FQ(){var i,e,t,n,r,s,a,o,l=10,u=l,c=90,p=360,y,_,b,w,E=2.5;function M(){return{type:"MultiLineString",coordinates:P()}}function P(){return o5(R9(n/c)*c,t,c).map(b).concat(o5(R9(o/p)*p,a,p).map(w)).concat(o5(R9(e/l)*l,i,l).filter(function(D){return $i(D%c)>hi}).map(y)).concat(o5(R9(s/u)*u,r,u).filter(function(D){return $i(D%p)>hi}).map(_))}return M.lines=function(){return P().map(function(D){return{type:"LineString",coordinates:D}})},M.outline=function(){return{type:"Polygon",coordinates:[b(n).concat(w(a).slice(1),b(t).reverse().slice(1),w(o).reverse().slice(1))]}},M.extent=function(D){return arguments.length?M.extentMajor(D).extentMinor(D):M.extentMinor()},M.extentMajor=function(D){return arguments.length?(n=+D[0][0],t=+D[1][0],o=+D[0][1],a=+D[1][1],n>t&&(D=n,n=t,t=D),o>a&&(D=o,o=a,a=D),M.precision(E)):[[n,o],[t,a]]},M.extentMinor=function(D){return arguments.length?(e=+D[0][0],i=+D[1][0],s=+D[0][1],r=+D[1][1],e>i&&(D=e,e=i,i=D),s>r&&(D=s,s=r,r=D),M.precision(E)):[[e,s],[i,r]]},M.step=function(D){return arguments.length?M.stepMajor(D).stepMinor(D):M.stepMinor()},M.stepMajor=function(D){return arguments.length?(c=+D[0],p=+D[1],M):[c,p]},M.stepMinor=function(D){return arguments.length?(l=+D[0],u=+D[1],M):[l,u]},M.precision=function(D){return arguments.length?(E=+D,y=IE(s,r,90),_=UE(e,i,E),b=IE(o,a,90),w=UE(n,t,E),M):E},M.extentMajor([[-180,-90+hi],[180,90-hi]]).extentMinor([[-180,-80-hi],[180,80+hi]])}function VQ(){return FQ()()}function nb(i,e){var t=i[0]*Yn,n=i[1]*Yn,r=e[0]*Yn,s=e[1]*Yn,a=Qn(n),o=zn(n),l=Qn(s),u=zn(s),c=a*Qn(t),p=a*zn(t),y=l*Qn(r),_=l*zn(r),b=2*F1(O1(dE(s-n)+a*l*dE(r-t))),w=zn(b),E=b?function(M){var P=zn(M*=b)/w,D=zn(b-M)/w,B=D*c+P*y,U=D*p+P*_,O=D*o+P*u;return[e0(U,B)*Lr,e0(O,O1(B*B+U*U))*Lr]}:function(){return[t*Lr,n*Lr]};return E.distance=b,E}const OE=i=>i;var G5=1/0,mA=G5,P6=-G5,gA=P6,FE={point:zQ,lineStart:ia,lineEnd:ia,polygonStart:ia,polygonEnd:ia,result:function(){var i=[[G5,mA],[P6,gA]];return P6=gA=-(mA=G5=1/0),i}};function zQ(i,e){i<G5&&(G5=i),i>P6&&(P6=i),e<mA&&(mA=e),e>gA&&(gA=e)}function ib(i){return function(e){var t=new qv;for(var n in i)t[n]=i[n];return t.stream=e,t}}function qv(){}qv.prototype={constructor:qv,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function rb(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),Up(t,i.stream(FE)),e(FE.result()),n!=null&&i.clipExtent(n),i}function wP(i,e,t){return rb(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(s-a*(n[1][1]+n[0][1]))/2;i.scale(150*a).translate([o,l])},t)}function GQ(i,e,t){return wP(i,[[0,0],e],t)}function qQ(i,e,t){return rb(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),a=(r-s*(n[1][0]+n[0][0]))/2,o=-s*n[0][1];i.scale(150*s).translate([a,o])},t)}function kQ(i,e,t){return rb(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),a=-s*n[0][0],o=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([a,o])},t)}var VE=16,HQ=Qn(30*Yn);function zE(i,e){return+e?jQ(i,e):WQ(i)}function WQ(i){return ib({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function jQ(i,e){function t(n,r,s,a,o,l,u,c,p,y,_,b,w,E){var M=u-n,P=c-r,D=M*M+P*P;if(D>4*e&&w--){var B=a+y,U=o+_,O=l+b,z=O1(B*B+U*U+O*O),q=F1(O/=z),F=$i($i(O)-1)<hi||$i(s-p)<hi?(s+p)/2:e0(U,B),G=i(F,q),j=G[0],$=G[1],K=j-n,ie=$-r,ee=P*K-M*ie;(ee*ee/D>e||$i((M*K+P*ie)/D-.5)>.3||a*y+o*_+l*b<HQ)&&(t(n,r,s,a,o,l,j,$,F,B/=z,U/=z,O,w,E),E.point(j,$),t(j,$,F,B,U,O,u,c,p,y,_,b,w,E))}}return function(n){var r,s,a,o,l,u,c,p,y,_,b,w,E={point:M,lineStart:P,lineEnd:B,polygonStart:function(){n.polygonStart(),E.lineStart=U},polygonEnd:function(){n.polygonEnd(),E.lineStart=P}};function M(q,F){q=i(q,F),n.point(q[0],q[1])}function P(){p=NaN,E.point=D,n.lineStart()}function D(q,F){var G=t3([q,F]),j=i(q,F);t(p,y,c,_,b,w,p=j[0],y=j[1],c=q,_=G[0],b=G[1],w=G[2],VE,n),n.point(p,y)}function B(){E.point=M,n.lineEnd()}function U(){P(),E.point=O,E.lineEnd=z}function O(q,F){D(r=q,F),s=p,a=y,o=_,l=b,u=w,E.point=D}function z(){t(p,y,c,_,b,w,s,a,r,o,l,u,VE,n),E.lineEnd=B,B()}return E}}var XQ=ib({point:function(i,e){this.stream.point(i*Yn,e*Yn)}});function YQ(i){return ib({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function QQ(i,e,t,n,r){function s(a,o){return a*=n,o*=r,[e+i*a,t-i*o]}return s.invert=function(a,o){return[(a-e)/i*n,(t-o)/i*r]},s}function GE(i,e,t,n,r,s){if(!s)return QQ(i,e,t,n,r);var a=Qn(s),o=zn(s),l=a*i,u=o*i,c=a/i,p=o/i,y=(o*t-a*e)/i,_=(o*e+a*t)/i;function b(w,E){return w*=n,E*=r,[l*w-u*E+e,t-u*w-l*E]}return b.invert=function(w,E){return[n*(c*w-p*E+y),r*(_-p*w-c*E)]},b}function $Q(i){return KQ(function(){return i})()}function KQ(i){var e,t=150,n=480,r=250,s=0,a=0,o=0,l=0,u=0,c,p=0,y=1,_=1,b=null,w=CE,E=null,M,P,D,B=OE,U=.5,O,z,q,F,G;function j(ee){return q(ee[0]*Yn,ee[1]*Yn)}function $(ee){return ee=q.invert(ee[0],ee[1]),ee&&[ee[0]*Lr,ee[1]*Lr]}j.stream=function(ee){return F&&G===ee?F:F=XQ(YQ(c)(w(O(B(G=ee)))))},j.preclip=function(ee){return arguments.length?(w=ee,b=void 0,ie()):w},j.postclip=function(ee){return arguments.length?(B=ee,E=M=P=D=null,ie()):B},j.clipAngle=function(ee){return arguments.length?(w=+ee?wQ(b=ee*Yn):(b=null,CE),ie()):b*Lr},j.clipExtent=function(ee){return arguments.length?(B=ee==null?(E=M=P=D=null,OE):CQ(E=+ee[0][0],M=+ee[0][1],P=+ee[1][0],D=+ee[1][1]),ie()):E==null?null:[[E,M],[P,D]]},j.scale=function(ee){return arguments.length?(t=+ee,K()):t},j.translate=function(ee){return arguments.length?(n=+ee[0],r=+ee[1],K()):[n,r]},j.center=function(ee){return arguments.length?(s=ee[0]%360*Yn,a=ee[1]%360*Yn,K()):[s*Lr,a*Lr]},j.rotate=function(ee){return arguments.length?(o=ee[0]%360*Yn,l=ee[1]%360*Yn,u=ee.length>2?ee[2]%360*Yn:0,K()):[o*Lr,l*Lr,u*Lr]},j.angle=function(ee){return arguments.length?(p=ee%360*Yn,K()):p*Lr},j.reflectX=function(ee){return arguments.length?(y=ee?-1:1,K()):y<0},j.reflectY=function(ee){return arguments.length?(_=ee?-1:1,K()):_<0},j.precision=function(ee){return arguments.length?(O=zE(z,U=ee*ee),ie()):O1(U)},j.fitExtent=function(ee,X){return wP(j,ee,X)},j.fitSize=function(ee,X){return GQ(j,ee,X)},j.fitWidth=function(ee,X){return qQ(j,ee,X)},j.fitHeight=function(ee,X){return kQ(j,ee,X)};function K(){var ee=GE(t,0,0,y,_,p).apply(null,e(s,a)),X=GE(t,n-ee[0],r-ee[1],y,_,p);return c=xP(o,l,u),z=Ov(e,X),q=Ov(c,z),O=zE(z,U),ie()}function ie(){return F=G=null,j}return function(){return e=i.apply(this,arguments),j.invert=e.invert&&$,K()}}function ZQ(i){return function(e,t){var n=O1(e*e+t*t),r=i(n),s=zn(r),a=Qn(r);return[e0(e*s,n*a),F1(n&&t*s/n)]}}function sb(i,e){return[i,sQ(oQ((qa+e)/2))]}sb.invert=function(i,e){return[i,2*eb(rQ(e))-qa]};function RP(i,e){var t=Qn(e),n=1+Qn(i)*t;return[t*zn(i)/n,zn(e)/n]}RP.invert=ZQ(function(i){return 2*eb(i)});function JQ(){return $Q(RP).scale(250).clipAngle(142)}function kv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function e$(i){if(Array.isArray(i))return i}function t$(i){if(Array.isArray(i))return kv(i)}function a6(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function n$(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function i$(i,e,t){return e=yA(e),d$(i,NP()?Reflect.construct(e,[],yA(i).constructor):e.apply(i,t))}function CP(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function r$(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(i,e){return i.get(a6(i,e))}function yu(i,e,t){CP(i,e),e.set(i,t)}function vu(i,e,t){return i.set(a6(i,e),t),t}function s$(i,e){CP(i,e),e.add(i)}function a$(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,DP(n.key),n)}}function o$(i,e,t){return a$(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function U4(i,e,t){return(e=DP(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function yA(i){return yA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yA(i)}function l$(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Hv(i,e)}function NP(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NP=function(){return!!i})()}function u$(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function c$(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function h$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d$(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n$(i)}function Hv(i,e){return Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Hv(i,e)}function Md(i,e){return e$(i)||c$(i,e)||BP(i,e)||h$()}function PP(i){return t$(i)||u$(i)||BP(i)||f$()}function A$(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function DP(i){var e=A$(i,"string");return typeof e=="symbol"?e:e+""}function BP(i,e){if(i){if(typeof i=="string")return kv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?kv(i,e):void 0}}var LP=function(e){e instanceof Array?e.forEach(LP):(e.map&&e.map.dispose(),e.dispose())},IP=function(e){e.geometry&&e.geometry.dispose(),e.material&&LP(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(IP)},qE=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),IP(t)}};function UP(i,e,t){var n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return{x:t*Math.sin(n)*Math.cos(r),y:t*Math.cos(n),z:t*Math.sin(n)*Math.sin(r)}}function p$(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),a=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-a*180/Math.PI-(a<-Math.PI/2?360:0),r}}function q2(i){return i*Math.PI/180}var OP=function(e){return 1-(sb(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},Kg=function(e){return Math.max(0,Math.min(1,OP(e)))},kE=function(e){return .5-sb.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},m$=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=U1().domain([1,0]).range([t,n]).clamp(!0),s=U1().domain([Kg(t),Kg(n)]).range([1,0]).clamp(!0),a=function(p){return s(Kg(r(p)))},o=e.array,l=0,u=o.length;l<u;l+=2)o[l+1]=a(o[l+1]);e.needsUpdate=!0},HE=function(e,t,n,r){var s=Math.pow(2,e),a=Math.max(0,Math.min(s-1,Math.floor((n+180)*s/360))),o=(90-r)/180;t&&(o=Math.max(0,Math.min(1,OP(o))));var l=Math.floor(o*s);return[a,l]},Wv=function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,o=[],l=Math.pow(2,e),u=360/l,c=180/l,p=s===void 0?l-1:s,y=a===void 0?l-1:a,_=n,b=Math.min(l-1,p);_<=b;_++)for(var w=r,E=Math.min(l-1,y);w<=E;w++){var M=w,P=c;if(t){M=w===0?w:kE(w/l)*l;var D=w+1===l?w+1:kE((w+1)/l)*l;P=(D-M)*180/l}var B=-180+(_+.5)*u,U=90-(M*180/l+P/2),O=P;o.push({x:_,y:w,lng:B,lat:U,latLen:O})}return o},g$=6,y$=7,v$=3,_$=90,vl=new WeakMap,Eu=new WeakMap,Zg=new WeakMap,B9=new WeakMap,Ho=new WeakMap,vA=new WeakMap,g5=new WeakMap,k2=new WeakMap,L9=new WeakSet,x$=(function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.tileUrl,a=r.minLevel,o=a===void 0?0:a,l=r.maxLevel,u=l===void 0?17:l,c=r.mercatorProjection,p=c===void 0?!0:c;return r$(this,e),n=i$(this,e),s$(n,L9),yu(n,vl,void 0),yu(n,Eu,void 0),yu(n,Zg,void 0),yu(n,B9,void 0),yu(n,Ho,{}),yu(n,vA,void 0),yu(n,g5,void 0),yu(n,k2,void 0),U4(n,"minLevel",void 0),U4(n,"maxLevel",void 0),U4(n,"thresholds",PP(new Array(30)).map(function(y,_){return 8/Math.pow(2,_)})),U4(n,"curvatureResolution",5),U4(n,"tileMargin",0),U4(n,"clearTiles",function(){Object.values(ui(Ho,n)).forEach(function(y){y.forEach(function(_){_.obj&&(n.remove(_.obj),qE(_.obj),delete _.obj)})}),vu(Ho,n,{})}),vu(vl,n,t),n.tileUrl=s,vu(Eu,n,p),n.minLevel=o,n.maxLevel=u,n.level=0,n.add(vu(k2,n,new Jn(new o0(ui(vl,n)*.99,180,90),new Os({color:0})))),ui(k2,n).visible=!1,ui(k2,n).material.polygonOffset=!0,ui(k2,n).material.polygonOffsetUnits=3,ui(k2,n).material.polygonOffsetFactor=1,n}return l$(e,i),o$(e,[{key:"tileUrl",get:function(){return ui(Zg,this)},set:function(n){vu(Zg,this,n),this.updatePov(ui(g5,this))}},{key:"level",get:function(){return ui(B9,this)},set:function(n){var r=this;ui(Ho,this)[n]||a6(L9,this,b$).call(this,n);var s=ui(B9,this);if(vu(B9,this,n),!(n===s||s===void 0)){if(ui(k2,this).visible=n>0,ui(Ho,this)[n].forEach(function(o){return o.obj&&(o.obj.material.depthWrite=!0)}),s<n&&ui(Ho,this)[s].forEach(function(o){return o.obj&&(o.obj.material.depthWrite=!1)}),s>n)for(var a=n+1;a<=s;a++)ui(Ho,this)[a]&&ui(Ho,this)[a].forEach(function(o){o.obj&&(r.remove(o.obj),qE(o.obj),delete o.obj)});a6(L9,this,WE).call(this)}}},{key:"updatePov",value:function(n){var r=this;if(!(!n||!(n instanceof c3))){vu(g5,this,n);var s;if(vu(vA,this,function(c){if(!c.hullPnts){var p=360/Math.pow(2,r.level),y=c.lng,_=c.lat,b=c.latLen,w=y-p/2,E=y+p/2,M=_-b/2,P=_+b/2;c.hullPnts=[[_,y],[M,w],[P,w],[M,E],[P,E]].map(function(D){var B=Md(D,2),U=B[0],O=B[1];return UP(U,O,ui(vl,r))}).map(function(D){var B=D.x,U=D.y,O=D.z;return new te(B,U,O)})}return s||(s=new ju,n.updateMatrix(),n.updateMatrixWorld(),s.setFromProjectionMatrix(new $t().multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))),c.hullPnts.some(function(D){return s.containsPoint(D.clone().applyMatrix4(r.matrixWorld))})}),this.tileUrl){var a=n.position.clone(),o=a.distanceTo(this.getWorldPosition(new te)),l=(o-ui(vl,this))/ui(vl,this),u=this.thresholds.findIndex(function(c){return c&&c<=l});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,u<0?this.thresholds.length:u)),a6(L9,this,WE).call(this)}}}}])})(sa);function b$(i){var e=this;if(i>y$){ui(Ho,this)[i]=[];return}var t=ui(Ho,this)[i]=Wv(i,ui(Eu,this));t.forEach(function(n){return n.centroid=UP(n.lat,n.lng,ui(vl,e))}),t.octree=QN().x(function(n){return n.centroid.x}).y(function(n){return n.centroid.y}).z(function(n){return n.centroid.z}).addAll(t)}function WE(){var i=this;if(!(!this.tileUrl||this.level===void 0||!ui(Ho,this).hasOwnProperty(this.level))&&!(!ui(vA,this)&&this.level>g$)){var e=ui(Ho,this)[this.level];if(ui(g5,this)){var t=this.worldToLocal(ui(g5,this).position.clone());if(e.octree){var n,r=this.worldToLocal(ui(g5,this).position.clone()),s=(r.length()-ui(vl,this))*v$;e=(n=e.octree).findAllWithinRadius.apply(n,PP(r).concat([s]))}else{var a=p$(t),o=(a.r/ui(vl,this)-1)*_$,l=o/Math.cos(q2(a.lat)),u=[a.lng-l,a.lng+l],c=[a.lat+o,a.lat-o],p=HE(this.level,ui(Eu,this),u[0],c[0]),y=Md(p,2),_=y[0],b=y[1],w=HE(this.level,ui(Eu,this),u[1],c[1]),E=Md(w,2),M=E[0],P=E[1];!e.record&&(e.record={});var D=e.record;if(!D.hasOwnProperty("".concat(Math.round((_+M)/2),"_").concat(Math.round((b+P)/2))))e=Wv(this.level,ui(Eu,this),_,b,M,P).map(function(q){var F="".concat(q.x,"_").concat(q.y);return D.hasOwnProperty(F)?D[F]:(D[F]=q,e.push(q),q)});else{for(var B=[],U=_;U<=M;U++)for(var O=b;O<=P;O++){var z="".concat(U,"_").concat(O);D.hasOwnProperty(z)||(D[z]=Wv(this.level,ui(Eu,this),U,O,U,O)[0],e.push(D[z])),B.push(D[z])}e=B}}}e.filter(function(q){return!q.obj}).filter(ui(vA,this)||function(){return!0}).forEach(function(q){var F=q.x,G=q.y,j=q.lng,$=q.lat,K=q.latLen,ie=360/Math.pow(2,i.level);if(!q.obj){var ee=ie*(1-i.tileMargin),X=K*(1-i.tileMargin),re=q2(j),se=q2(-$),Ae=new Jn(new o0(ui(vl,i),Math.ceil(ee/i.curvatureResolution),Math.ceil(X/i.curvatureResolution),q2(90-ee/2)+re,q2(ee),q2(90-X/2)+se,q2(X)),new j0);if(ui(Eu,i)){var Se=[$+K/2,$-K/2].map(function(pt){return .5-pt/180}),Ce=Md(Se,2),Ye=Ce[0],it=Ce[1];m$(Ae.geometry.attributes.uv,Ye,it)}q.obj=Ae}q.loading||(q.loading=!0,new Lx().load(i.tileUrl(F,G,i.level),function(pt){var yt=q.obj;yt&&(pt.colorSpace=Qr,yt.material.map=pt,yt.material.color=null,yt.material.needsUpdate=!0,i.add(yt)),q.loading=!1}))})}}function S$(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=FP(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u;if(n&&(s=R$(i,e,s,t)),i.length>80*t){o=i[0],l=i[1];let c=o,p=l;for(let y=t;y<r;y+=t){const _=i[y],b=i[y+1];_<o&&(o=_),b<l&&(l=b),_>c&&(c=_),b>p&&(p=b)}u=Math.max(c-o,p-l),u=u!==0?32767/u:0}return D6(s,a,t,o,l,u,0),a}function FP(i,e,t,n,r){let s;if(r===V$(i,e,t,n)>0)for(let a=e;a<t;a+=n)s=jE(a/n|0,i[a],i[a+1],s);else for(let a=t-n;a>=e;a-=n)s=jE(a/n|0,i[a],i[a+1],s);return s&&q5(s,s.next)&&(L6(s),s=s.next),s}function n3(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(q5(t,t.next)||Tr(t.prev,t,t.next)===0)){if(L6(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function D6(i,e,t,n,r,s,a){if(!i)return;!a&&s&&B$(i,n,r,s);let o=i;for(;i.prev!==i.next;){const l=i.prev,u=i.next;if(s?M$(i,n,r,s):T$(i)){e.push(l.i,i.i,u.i),L6(i),i=u.next,o=u.next;continue}if(i=u,i===o){a?a===1?(i=E$(n3(i),e),D6(i,e,t,n,r,s,2)):a===2&&w$(i,e,t,n,r,s):D6(n3(i),e,t,n,r,s,1);break}}}function T$(i){const e=i.prev,t=i,n=i.next;if(Tr(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,o=e.y,l=t.y,u=n.y,c=Math.min(r,s,a),p=Math.min(o,l,u),y=Math.max(r,s,a),_=Math.max(o,l,u);let b=n.next;for(;b!==e;){if(b.x>=c&&b.x<=y&&b.y>=p&&b.y<=_&&Yh(r,o,s,l,a,u,b.x,b.y)&&Tr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function M$(i,e,t,n){const r=i.prev,s=i,a=i.next;if(Tr(r,s,a)>=0)return!1;const o=r.x,l=s.x,u=a.x,c=r.y,p=s.y,y=a.y,_=Math.min(o,l,u),b=Math.min(c,p,y),w=Math.max(o,l,u),E=Math.max(c,p,y),M=jv(_,b,e,t,n),P=jv(w,E,e,t,n);let D=i.prevZ,B=i.nextZ;for(;D&&D.z>=M&&B&&B.z<=P;){if(D.x>=_&&D.x<=w&&D.y>=b&&D.y<=E&&D!==r&&D!==a&&Yh(o,c,l,p,u,y,D.x,D.y)&&Tr(D.prev,D,D.next)>=0||(D=D.prevZ,B.x>=_&&B.x<=w&&B.y>=b&&B.y<=E&&B!==r&&B!==a&&Yh(o,c,l,p,u,y,B.x,B.y)&&Tr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;D&&D.z>=M;){if(D.x>=_&&D.x<=w&&D.y>=b&&D.y<=E&&D!==r&&D!==a&&Yh(o,c,l,p,u,y,D.x,D.y)&&Tr(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;B&&B.z<=P;){if(B.x>=_&&B.x<=w&&B.y>=b&&B.y<=E&&B!==r&&B!==a&&Yh(o,c,l,p,u,y,B.x,B.y)&&Tr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function E$(i,e){let t=i;do{const n=t.prev,r=t.next.next;!q5(n,r)&&zP(n,t,t.next,r)&&B6(n,r)&&B6(r,n)&&(e.push(n.i,t.i,r.i),L6(t),L6(t.next),t=i=r),t=t.next}while(t!==i);return n3(t)}function w$(i,e,t,n,r,s){let a=i;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&U$(a,o)){let l=GP(a,o);a=n3(a,a.next),l=n3(l,l.next),D6(a,e,t,n,r,s,0),D6(l,e,t,n,r,s,0);return}o=o.next}a=a.next}while(a!==i)}function R$(i,e,t,n){const r=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,l=s<a-1?e[s+1]*n:i.length,u=FP(i,o,l,n,!1);u===u.next&&(u.steiner=!0),r.push(I$(u))}r.sort(C$);for(let s=0;s<r.length;s++)t=N$(r[s],t);return t}function C$(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function N$(i,e){const t=P$(i,e);if(!t)return e;const n=GP(t,i);return n3(n,n.next),n3(t,t.next)}function P$(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,a;if(q5(i,t))return t;do{if(q5(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const p=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=n&&p>s&&(s=p,a=t.x<t.next.x?t:t.next,p===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,u=a.y;let c=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&VP(r<u?n:s,r,l,u,r<u?s:n,r,t.x,t.y)){const p=Math.abs(r-t.y)/(n-t.x);B6(t,i)&&(p<c||p===c&&(t.x>a.x||t.x===a.x&&D$(a,t)))&&(a=t,c=p)}t=t.next}while(t!==o);return a}function D$(i,e){return Tr(i.prev,i,e.prev)<0&&Tr(e.next,i,i.next)<0}function B$(i,e,t,n){let r=i;do r.z===0&&(r.z=jv(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,L$(r)}function L$(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let u=0;u<t&&(o++,a=a.nextZ,!!a);u++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(r=n,n=n.nextZ,o--):(r=a,a=a.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=a}s.nextZ=null,t*=2}while(e>1);return i}function jv(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function I$(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function VP(i,e,t,n,r,s,a,o){return(r-a)*(e-o)>=(i-a)*(s-o)&&(i-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(n-o)}function Yh(i,e,t,n,r,s,a,o){return!(i===a&&e===o)&&VP(i,e,t,n,r,s,a,o)}function U$(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!O$(i,e)&&(B6(i,e)&&B6(e,i)&&F$(i,e)&&(Tr(i.prev,i,e.prev)||Tr(i,e.prev,e))||q5(i,e)&&Tr(i.prev,i,i.next)>0&&Tr(e.prev,e,e.next)>0)}function Tr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function q5(i,e){return i.x===e.x&&i.y===e.y}function zP(i,e,t,n){const r=U9(Tr(i,e,t)),s=U9(Tr(i,e,n)),a=U9(Tr(t,n,i)),o=U9(Tr(t,n,e));return!!(r!==s&&a!==o||r===0&&I9(i,t,e)||s===0&&I9(i,n,e)||a===0&&I9(t,i,n)||o===0&&I9(t,e,n))}function I9(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function U9(i){return i>0?1:i<0?-1:0}function O$(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&zP(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function B6(i,e){return Tr(i.prev,i,i.next)<0?Tr(i,e,i.next)>=0&&Tr(i,i.prev,e)>=0:Tr(i,e,i.prev)<0||Tr(i,i.next,e)<0}function F$(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function GP(i,e){const t=Xv(i.i,i.x,i.y),n=Xv(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function jE(i,e,t,n){const r=Xv(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function L6(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Xv(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function V$(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}function _A(i){const e=[],t=[],n=i[0][0].length;let r=0,s=0;for(const a of i){for(const o of a)for(let l=0;l<n;l++)e.push(o[l]);s&&(r+=s,t.push(r)),s=a.length}return{vertices:e,holes:t,dimensions:n}}function Yv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function z$(i){if(Array.isArray(i))return i}function G$(i){if(Array.isArray(i))return Yv(i)}function q$(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function k$(i,e,t){return e=xA(e),Z$(i,qP()?Reflect.construct(e,[],xA(i).constructor):e.apply(i,t))}function H$(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function W$(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function j$(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=ab(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw s}}}}function xA(i){return xA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xA(i)}function X$(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Qv(i,e)}function qP(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qP=function(){return!!i})()}function Y$(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Q$(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function $$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function K$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q$(i)}function Qv(i,e){return Qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Qv(i,e)}function _h(i,e){return z$(i)||Q$(i,e)||ab(i,e)||$$()}function J$(i){return G$(i)||Y$(i)||ab(i)||K$()}function ab(i,e){if(i){if(typeof i=="string")return Yv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Yv(i,e):void 0}}var XE=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],r=null;return e.forEach(function(s){if(r){var a=zu(s,r)*180/Math.PI;if(a>t)for(var o=nb(r,s),l=r.length>2||s.length>2?N6(r[2]||0,s[2]||0):null,u=l?function(y){return[].concat(J$(o(y)),[l(y)])}:o,c=1/Math.ceil(a/t),p=c;p<1;)n.push(u(p)),p+=c}n.push(r=s)}),n},$v=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:Tn,Float32BufferAttribute:Yt},eK=new $v.BufferGeometry().setAttribute?"setAttribute":"addAttribute",kP=(function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;H$(this,e),n=k$(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:r,resolution:s};var a=({Point:c,MultiPoint:p,LineString:y,MultiLineString:_,Polygon:b,MultiPolygon:w}[t.type]||function(){return[]})(t.coordinates,r),o=[],l=[],u=0;a.forEach(function(E){var M=o.length;xh({indices:o,vertices:l},E),n.addGroup(M,o.length-M,u++)}),o.length&&n.setIndex(o),l.length&&n[eK]("position",new $v.Float32BufferAttribute(l,3));function c(E,M){var P=Jg(E[1],E[0],M+(E[2]||0)),D=[];return[{vertices:P,indices:D}]}function p(E,M){var P={vertices:[],indices:[]};return E.map(function(D){return c(D,M)}).forEach(function(D){var B=_h(D,1),U=B[0];xh(P,U)}),[P]}function y(E,M){for(var P=XE(E,s).map(function(q){var F=_h(q,3),G=F[0],j=F[1],$=F[2],K=$===void 0?0:$;return Jg(j,G,M+K)}),D=_A([P]),B=D.vertices,U=Math.round(B.length/3),O=[],z=1;z<U;z++)O.push(z-1,z);return[{vertices:B,indices:O}]}function _(E,M){var P={vertices:[],indices:[]};return E.map(function(D){return y(D,M)}).forEach(function(D){var B=_h(D,1),U=B[0];xh(P,U)}),[P]}function b(E,M){for(var P=E.map(function(ee){return XE(ee,s).map(function(X){var re=_h(X,3),se=re[0],Ae=re[1],Se=re[2],Ce=Se===void 0?0:Se;return Jg(Ae,se,M+Ce)})}),D=_A(P),B=D.vertices,U=D.holes,O=U[0]||1/0,z=B.slice(0,O*3),q=B.slice(O*3),F=new Set(U),G=Math.round(B.length/3),j=[],$=[],K=1;K<G;K++)F.has(K)||(K<O?j.push(K-1,K):$.push(K-1-O,K-O));var ie=[{indices:j,vertices:z}];return U.length&&ie.push({indices:$,vertices:q}),ie}function w(E,M){var P={vertices:[],indices:[]},D={vertices:[],indices:[]};E.map(function(U){return b(U,M)}).forEach(function(U){var O=_h(U,2),z=O[0],q=O[1];xh(P,z),q&&xh(D,q)});var B=[P];return D.vertices.length&&B.push(D),B}return n}return X$(e,i),W$(e)})($v.BufferGeometry);function xh(i,e){var t=Math.round(i.vertices.length/3);YE(i.vertices,e.vertices),YE(i.indices,e.indices.map(function(n){return n+t}))}function YE(i,e){var t=j$(e),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;i.push(r)}}catch(s){t.e(s)}finally{t.f()}}function Jg(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function tK(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(a){if(a.normalized||a.isInterleavedBufferAttribute){const o=new Float32Array(a.count*a.itemSize);for(let l=0,u=0;l<a.count;l++)o[u++]=a.getX(l),o[u++]=a.getY(l),a.itemSize>2&&(o[u++]=a.getZ(l));return o}return a.array instanceof Float32Array?a.array:new Float32Array(a.array)}const r=i.index?i.toNonIndexed():i,s=e.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(t)for(let a=3;a<s.length;a+=4)s[a]*=-1;return r.setAttribute("tangent",new li(s,4)),i!==r&&i.copy(r),i}function nK(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},a={},o=i[0].morphTargetsRelative,l=new Tn;let u=0;for(let c=0;c<i.length;++c){const p=i[c];let y=0;if(t!==(p.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const _ in p.attributes){if(!n.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+_+'" attribute exists among all geometries, or in none of them.'),null;s[_]===void 0&&(s[_]=[]),s[_].push(p.attributes[_]),y++}if(y!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==p.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const _ in p.morphAttributes){if(!r.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;a[_]===void 0&&(a[_]=[]),a[_].push(p.morphAttributes[_])}if(e){let _;if(t)_=p.index.count;else if(p.attributes.position!==void 0)_=p.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,_,c),u+=_}}if(t){let c=0;const p=[];for(let y=0;y<i.length;++y){const _=i[y].index;for(let b=0;b<_.count;++b)p.push(_.getX(b)+c);c+=i[y].attributes.position.count}l.setIndex(p)}for(const c in s){const p=Kv(s[c]);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,p)}for(const c in a){const p=a[c][0].length;if(p===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let y=0;y<p;++y){const _=[];for(let w=0;w<a[c].length;++w)_.push(a[c][w][y]);const b=Kv(_);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(b)}}return l}function Kv(i){let e,t,n,r=-1,s=0;for(let u=0;u<i.length;++u){const c=i[u];if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=c.normalized),n!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=c.gpuType),r!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=c.count*t}const a=new e(s),o=new li(a,t,n);let l=0;for(let u=0;u<i.length;++u){const c=i[u];if(c.isInterleavedBufferAttribute){const p=l/t;for(let y=0,_=c.count;y<_;y++)for(let b=0;b<t;b++){const w=c.getComponent(y,b);o.setComponent(y+p,b,w)}}else a.set(c.array,l);l+=c.count*t}return r!==void 0&&(o.gpuType=r),o}function iK(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?bA(i):i.isInstancedBufferAttribute?new $a().copy(i):new li().copy(i)}function rK(i){let e,t=0,n=0;for(let u=0,c=i.length;u<c;++u){const p=i[u];if(e===void 0&&(e=p.array.constructor),e!==p.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=p.array.length,n+=p.itemSize}const r=new t8(new e(t),n);let s=0;const a=[],o=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let u=0,c=i.length;u<c;u++){const p=i[u],y=p.itemSize,_=p.count,b=new Ca(r,y,s,p.normalized);a.push(b),s+=y;for(let w=0;w<_;w++)for(let E=0;E<y;E++)b[l[E]](w,p[o[E]](w))}return a}function bA(i){const e=i.data.array.constructor,t=i.count,n=i.itemSize,r=i.normalized,s=new e(t*n);let a;i.isInstancedInterleavedBufferAttribute?a=new $a(s,n,r,i.meshPerAttribute):a=new li(s,n,r);for(let o=0;o<t;o++)a.setX(o,i.getX(o)),n>=2&&a.setY(o,i.getY(o)),n>=3&&a.setZ(o,i.getZ(o)),n>=4&&a.setW(o,i.getW(o));return a}function sK(i){const e=i.attributes,t=i.morphTargets,n=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,bA(s)),e[r]=n.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,bA(s)),t[r]=n.get(s))}}function aK(i){let e=0;for(const n in i.attributes){const r=i.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function oK(i,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=i.getIndex(),r=i.getAttribute("position"),s=n?n.count:r.count;let a=0;const o=Object.keys(i.attributes),l={},u={},c=[],p=["getX","getY","getZ","getW"],y=["setX","setY","setZ","setW"];for(let P=0,D=o.length;P<D;P++){const B=o[P],U=i.attributes[B];l[B]=new U.constructor(new U.array.constructor(U.count*U.itemSize),U.itemSize,U.normalized);const O=i.morphAttributes[B];O&&(u[B]||(u[B]=[]),O.forEach((z,q)=>{const F=new z.array.constructor(z.count*z.itemSize);u[B][q]=new z.constructor(F,z.itemSize,z.normalized)}))}const _=e*.5,b=Math.log10(1/e),w=Math.pow(10,b),E=_*w;for(let P=0;P<s;P++){const D=n?n.getX(P):P;let B="";for(let U=0,O=o.length;U<O;U++){const z=o[U],q=i.getAttribute(z),F=q.itemSize;for(let G=0;G<F;G++)B+=`${~~(q[p[G]](D)*w+E)},`}if(B in t)c.push(t[B]);else{for(let U=0,O=o.length;U<O;U++){const z=o[U],q=i.getAttribute(z),F=i.morphAttributes[z],G=q.itemSize,j=l[z],$=u[z];for(let K=0;K<G;K++){const ie=p[K],ee=y[K];if(j[ee](a,q[ie](D)),F)for(let X=0,re=F.length;X<re;X++)$[X][ee](a,F[X][ie](D))}}t[B]=a,c.push(a),a++}}const M=i.clone();for(const P in i.attributes){const D=l[P];if(M.setAttribute(P,new D.constructor(D.array.slice(0,a*D.itemSize),D.itemSize,D.normalized)),P in u)for(let B=0;B<u[P].length;B++){const U=u[P][B];M.morphAttributes[P][B]=new U.constructor(U.array.slice(0,a*U.itemSize),U.itemSize,U.normalized)}}return M.setIndex(c),M}function lK(i,e){if(e===UC)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===cv||e===OC){let t=i.getIndex();if(t===null){const a=[],o=i.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);i.setIndex(a),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===cv)for(let a=1;a<=n;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function uK(i){const e=new te,t=new te,n=new te,r=new te,s=new te,a=new te,o=new te,l=new te,u=new te;function c(Ae,Se,Ce,Ye,it,pt,yt,Oe){e.fromBufferAttribute(Se,it),t.fromBufferAttribute(Se,pt),n.fromBufferAttribute(Se,yt);const Xe=Ae.morphTargetInfluences;if(Ce&&Xe){o.set(0,0,0),l.set(0,0,0),u.set(0,0,0);for(let Tt=0,Ft=Ce.length;Tt<Ft;Tt++){const Pt=Xe[Tt],ln=Ce[Tt];Pt!==0&&(r.fromBufferAttribute(ln,it),s.fromBufferAttribute(ln,pt),a.fromBufferAttribute(ln,yt),Ye?(o.addScaledVector(r,Pt),l.addScaledVector(s,Pt),u.addScaledVector(a,Pt)):(o.addScaledVector(r.sub(e),Pt),l.addScaledVector(s.sub(t),Pt),u.addScaledVector(a.sub(n),Pt)))}e.add(o),t.add(l),n.add(u)}Ae.isSkinnedMesh&&(Ae.applyBoneTransform(it,e),Ae.applyBoneTransform(pt,t),Ae.applyBoneTransform(yt,n)),Oe[it*3+0]=e.x,Oe[it*3+1]=e.y,Oe[it*3+2]=e.z,Oe[pt*3+0]=t.x,Oe[pt*3+1]=t.y,Oe[pt*3+2]=t.z,Oe[yt*3+0]=n.x,Oe[yt*3+1]=n.y,Oe[yt*3+2]=n.z}const p=i.geometry,y=i.material;let _,b,w;const E=p.index,M=p.attributes.position,P=p.morphAttributes.position,D=p.morphTargetsRelative,B=p.attributes.normal,U=p.morphAttributes.position,O=p.groups,z=p.drawRange;let q,F,G,j,$,K,ie;const ee=new Float32Array(M.count*M.itemSize),X=new Float32Array(B.count*B.itemSize);if(E!==null)if(Array.isArray(y))for(q=0,G=O.length;q<G;q++)for($=O[q],K=Math.max($.start,z.start),ie=Math.min($.start+$.count,z.start+z.count),F=K,j=ie;F<j;F+=3)_=E.getX(F),b=E.getX(F+1),w=E.getX(F+2),c(i,M,P,D,_,b,w,ee),c(i,B,U,D,_,b,w,X);else for(K=Math.max(0,z.start),ie=Math.min(E.count,z.start+z.count),q=K,G=ie;q<G;q+=3)_=E.getX(q),b=E.getX(q+1),w=E.getX(q+2),c(i,M,P,D,_,b,w,ee),c(i,B,U,D,_,b,w,X);else if(Array.isArray(y))for(q=0,G=O.length;q<G;q++)for($=O[q],K=Math.max($.start,z.start),ie=Math.min($.start+$.count,z.start+z.count),F=K,j=ie;F<j;F+=3)_=F,b=F+1,w=F+2,c(i,M,P,D,_,b,w,ee),c(i,B,U,D,_,b,w,X);else for(K=Math.max(0,z.start),ie=Math.min(M.count,z.start+z.count),q=K,G=ie;q<G;q+=3)_=q,b=q+1,w=q+2,c(i,M,P,D,_,b,w,ee),c(i,B,U,D,_,b,w,X);const re=new Yt(ee,3),se=new Yt(X,3);return{positionAttribute:M,normalAttribute:B,morphedPositionAttribute:re,morphedNormalAttribute:se}}function cK(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((a,o)=>a.materialIndex!==o.materialIndex?a.materialIndex-o.materialIndex:a.start-o.start),i.getIndex()===null){const a=i.getAttribute("position"),o=[];for(let l=0;l<a.count;l+=3)o.push(l,l+1,l+2);i.setIndex(o)}const t=i.getIndex(),n=[];for(let a=0;a<e.length;a++){const o=e[a],l=o.start,u=l+o.count;for(let c=l;c<u;c++)n.push(t.getX(c))}i.dispose(),i.setIndex(n);let r=0;for(let a=0;a<e.length;a++){const o=e[a];o.start=r,r+=o.count}let s=e[0];i.groups=[s];for(let a=1;a<e.length;a++){const o=e[a];s.materialIndex===o.materialIndex?s.count+=o.count:(s=o,i.groups.push(s))}return i}function hK(i,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,r=[new te,new te,new te],s=new te,a=new te,o=new te,l=new te;function u(w){const E=~~(w.x*n),M=~~(w.y*n),P=~~(w.z*n);return`${E},${M},${P}`}const c=i.index?i.toNonIndexed():i,p=c.attributes.position,y={};for(let w=0,E=p.count/3;w<E;w++){const M=3*w,P=r[0].fromBufferAttribute(p,M+0),D=r[1].fromBufferAttribute(p,M+1),B=r[2].fromBufferAttribute(p,M+2);s.subVectors(B,D),a.subVectors(P,D);const U=new te().crossVectors(s,a).normalize();for(let O=0;O<3;O++){const z=r[O],q=u(z);q in y||(y[q]=[]),y[q].push(U)}}const _=new Float32Array(p.count*3),b=new li(_,3,!1);for(let w=0,E=p.count/3;w<E;w++){const M=3*w,P=r[0].fromBufferAttribute(p,M+0),D=r[1].fromBufferAttribute(p,M+1),B=r[2].fromBufferAttribute(p,M+2);s.subVectors(B,D),a.subVectors(P,D),o.crossVectors(s,a).normalize();for(let U=0;U<3;U++){const O=r[U],z=u(O),q=y[z];l.set(0,0,0);for(let F=0,G=q.length;F<G;F++){const j=q[F];o.dot(j)>t&&l.add(j)}l.normalize(),b.setXYZ(M+U,l.x,l.y,l.z)}}return c.setAttribute("normal",b),c}const ob=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:tK,computeMorphedAttributes:uK,deepCloneAttribute:iK,deinterleaveAttribute:bA,deinterleaveGeometry:sK,estimateBytesUsed:aK,interleaveAttributes:rK,mergeAttributes:Kv,mergeGeometries:nK,mergeGroups:cK,mergeVertices:oK,toCreasedNormals:hK,toTrianglesDrawMode:lK},Symbol.toStringTag,{value:"Module"}));var dt=(function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}});function SA(i){"@babel/helpers - typeof";return SA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SA(i)}var fK=/^\s+/,dK=/\s+$/;function vn(i,e){if(i=i||"",e=e||{},i instanceof vn)return i;if(!(this instanceof vn))return new vn(i,e);var t=AK(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}vn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,s,a,o;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*a+.0722*o},setAlpha:function(e){return this._a=HP(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=$E(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=$E(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=QE(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=QE(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return KE(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return yK(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(vr(this._r,255)*100)+"%",g:Math.round(vr(this._g,255)*100)+"%",b:Math.round(vr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(vr(this._r,255)*100)+"%, "+Math.round(vr(this._g,255)*100)+"%, "+Math.round(vr(this._b,255)*100)+"%)":"rgba("+Math.round(vr(this._r,255)*100)+"%, "+Math.round(vr(this._g,255)*100)+"%, "+Math.round(vr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:NK[KE(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+ZE(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=vn(e);n="#"+ZE(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return vn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(bK,arguments)},brighten:function(){return this._applyModification(SK,arguments)},darken:function(){return this._applyModification(TK,arguments)},desaturate:function(){return this._applyModification(vK,arguments)},saturate:function(){return this._applyModification(_K,arguments)},greyscale:function(){return this._applyModification(xK,arguments)},spin:function(){return this._applyModification(MK,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(RK,arguments)},complement:function(){return this._applyCombination(EK,arguments)},monochromatic:function(){return this._applyCombination(CK,arguments)},splitcomplement:function(){return this._applyCombination(wK,arguments)},triad:function(){return this._applyCombination(JE,[3])},tetrad:function(){return this._applyCombination(JE,[4])}};vn.fromRatio=function(i,e){if(SA(i)=="object"){var t={};for(var n in i)i.hasOwnProperty(n)&&(n==="a"?t[n]=i[n]:t[n]=Qh(i[n]));i=t}return vn(i,e)};function AK(i){var e={r:0,g:0,b:0},t=1,n=null,r=null,s=null,a=!1,o=!1;return typeof i=="string"&&(i=LK(i)),SA(i)=="object"&&(f1(i.r)&&f1(i.g)&&f1(i.b)?(e=pK(i.r,i.g,i.b),a=!0,o=String(i.r).substr(-1)==="%"?"prgb":"rgb"):f1(i.h)&&f1(i.s)&&f1(i.v)?(n=Qh(i.s),r=Qh(i.v),e=gK(i.h,n,r),a=!0,o="hsv"):f1(i.h)&&f1(i.s)&&f1(i.l)&&(n=Qh(i.s),s=Qh(i.l),e=mK(i.h,n,s),a=!0,o="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=HP(t),{ok:a,format:i.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function pK(i,e,t){return{r:vr(i,255)*255,g:vr(e,255)*255,b:vr(t,255)*255}}function QE(i,e,t){i=vr(i,255),e=vr(e,255),t=vr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,a,o=(n+r)/2;if(n==r)s=a=0;else{var l=n-r;switch(a=o>.5?l/(2-n-r):l/(n+r),n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function mK(i,e,t){var n,r,s;i=vr(i,360),e=vr(e,100),t=vr(t,100);function a(u,c,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?u+(c-u)*6*p:p<1/2?c:p<2/3?u+(c-u)*(2/3-p)*6:u}if(e===0)n=r=s=t;else{var o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;n=a(l,o,i+1/3),r=a(l,o,i),s=a(l,o,i-1/3)}return{r:n*255,g:r*255,b:s*255}}function $E(i,e,t){i=vr(i,255),e=vr(e,255),t=vr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,a,o=n,l=n-r;if(a=n===0?0:l/n,n==r)s=0;else{switch(n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:a,v:o}}function gK(i,e,t){i=vr(i,360)*6,e=vr(e,100),t=vr(t,100);var n=Math.floor(i),r=i-n,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=n%6,u=[t,a,s,s,o,t][l],c=[o,t,t,a,s,s][l],p=[s,s,o,t,t,a][l];return{r:u*255,g:c*255,b:p*255}}function KE(i,e,t,n){var r=[z0(Math.round(i).toString(16)),z0(Math.round(e).toString(16)),z0(Math.round(t).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function yK(i,e,t,n,r){var s=[z0(Math.round(i).toString(16)),z0(Math.round(e).toString(16)),z0(Math.round(t).toString(16)),z0(WP(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function ZE(i,e,t,n){var r=[z0(WP(n)),z0(Math.round(i).toString(16)),z0(Math.round(e).toString(16)),z0(Math.round(t).toString(16))];return r.join("")}vn.equals=function(i,e){return!i||!e?!1:vn(i).toRgbString()==vn(e).toRgbString()};vn.random=function(){return vn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function vK(i,e){e=e===0?0:e||10;var t=vn(i).toHsl();return t.s-=e/100,t.s=Op(t.s),vn(t)}function _K(i,e){e=e===0?0:e||10;var t=vn(i).toHsl();return t.s+=e/100,t.s=Op(t.s),vn(t)}function xK(i){return vn(i).desaturate(100)}function bK(i,e){e=e===0?0:e||10;var t=vn(i).toHsl();return t.l+=e/100,t.l=Op(t.l),vn(t)}function SK(i,e){e=e===0?0:e||10;var t=vn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),vn(t)}function TK(i,e){e=e===0?0:e||10;var t=vn(i).toHsl();return t.l-=e/100,t.l=Op(t.l),vn(t)}function MK(i,e){var t=vn(i).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,vn(t)}function EK(i){var e=vn(i).toHsl();return e.h=(e.h+180)%360,vn(e)}function JE(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=vn(i).toHsl(),n=[vn(i)],r=360/e,s=1;s<e;s++)n.push(vn({h:(t.h+s*r)%360,s:t.s,l:t.l}));return n}function wK(i){var e=vn(i).toHsl(),t=e.h;return[vn(i),vn({h:(t+72)%360,s:e.s,l:e.l}),vn({h:(t+216)%360,s:e.s,l:e.l})]}function RK(i,e,t){e=e||6,t=t||30;var n=vn(i).toHsl(),r=360/t,s=[vn(i)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(vn(n));return s}function CK(i,e){e=e||6;for(var t=vn(i).toHsv(),n=t.h,r=t.s,s=t.v,a=[],o=1/e;e--;)a.push(vn({h:n,s:r,v:s})),s=(s+o)%1;return a}vn.mix=function(i,e,t){t=t===0?0:t||50;var n=vn(i).toRgb(),r=vn(e).toRgb(),s=t/100,a={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return vn(a)};vn.readability=function(i,e){var t=vn(i),n=vn(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};vn.isReadable=function(i,e,t){var n=vn.readability(i,e),r,s;switch(s=!1,r=IK(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};vn.mostReadable=function(i,e,t){var n=null,r=0,s,a,o,l;t=t||{},a=t.includeFallbackColors,o=t.level,l=t.size;for(var u=0;u<e.length;u++)s=vn.readability(i,e[u]),s>r&&(r=s,n=vn(e[u]));return vn.isReadable(i,n,{level:o,size:l})||!a?n:(t.includeFallbackColors=!1,vn.mostReadable(i,["#fff","#000"],t))};var Zv=vn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},NK=vn.hexNames=PK(Zv);function PK(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function HP(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function vr(i,e){DK(i)&&(i="100%");var t=BK(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function Op(i){return Math.min(1,Math.max(0,i))}function yo(i){return parseInt(i,16)}function DK(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function BK(i){return typeof i=="string"&&i.indexOf("%")!=-1}function z0(i){return i.length==1?"0"+i:""+i}function Qh(i){return i<=1&&(i=i*100+"%"),i}function WP(i){return Math.round(parseFloat(i)*255).toString(16)}function ew(i){return yo(i)/255}var B0=(function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function f1(i){return!!B0.CSS_UNIT.exec(i)}function LK(i){i=i.replace(fK,"").replace(dK,"").toLowerCase();var e=!1;if(Zv[i])i=Zv[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=B0.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=B0.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=B0.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=B0.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=B0.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=B0.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=B0.hex8.exec(i))?{r:yo(t[1]),g:yo(t[2]),b:yo(t[3]),a:ew(t[4]),format:e?"name":"hex8"}:(t=B0.hex6.exec(i))?{r:yo(t[1]),g:yo(t[2]),b:yo(t[3]),format:e?"name":"hex"}:(t=B0.hex4.exec(i))?{r:yo(t[1]+""+t[1]),g:yo(t[2]+""+t[2]),b:yo(t[3]+""+t[3]),a:ew(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=B0.hex3.exec(i))?{r:yo(t[1]+""+t[1]),g:yo(t[2]+""+t[2]),b:yo(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function IK(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function Jv(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function UK(i){if(Array.isArray(i))return i}function OK(i){if(Array.isArray(i))return Jv(i)}function jP(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function FK(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function VK(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ea(i,e){return i.get(jP(i,e))}function O4(i,e,t){FK(i,e),e.set(i,t)}function O9(i,e,t){return i.set(jP(i,e),t),t}function zK(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,QK(n.key),n)}}function GK(i,e,t){return e&&zK(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function qK(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function kK(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function HK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jK(i,e){return UK(i)||kK(i,e)||XP(i,e)||HK()}function XK(i){return OK(i)||qK(i)||XP(i)||WK()}function YK(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function QK(i){var e=YK(i,"string");return typeof e=="symbol"?e:e+""}function XP(i,e){if(i){if(typeof i=="string")return Jv(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Jv(i,e):void 0}}var F4=new WeakMap,bh=new WeakMap,V4=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,$K=(function(){function i(){VK(this,i),O4(this,F4,new Map),O4(this,bh,new Map),O4(this,V4,function(e){return e}),O4(this,ey,function(){return{}}),O4(this,ty,function(){}),O4(this,ny,function(){})}return GK(i,[{key:"getObj",value:function(t){return ea(F4,this).get(ea(V4,this).call(this,t))}},{key:"getData",value:function(t){return ea(bh,this).get(t)}},{key:"entries",value:function(){return XK(ea(bh,this).entries()).map(function(t){var n=jK(t,2),r=n[0],s=n[1];return[s,r]})}},{key:"id",value:function(t){return O9(V4,this,dt(t)),this}},{key:"onCreateObj",value:function(t){return O9(ey,this,t),this}},{key:"onUpdateObj",value:function(t){return O9(ty,this,t),this}},{key:"onRemoveObj",value:function(t){return O9(ny,this,t),this}},{key:"digest",value:function(t){var n=this;t.filter(function(s){return!ea(F4,n).has(ea(V4,n).call(n,s))}).forEach(function(s){var a=ea(ey,n).call(n,s);ea(F4,n).set(ea(V4,n).call(n,s),a),ea(bh,n).set(a,s)});var r=new Map(t.map(function(s){return[ea(V4,n).call(n,s),s]}));return ea(F4,this).forEach(function(s,a){r.has(a)?ea(ty,n).call(n,s,r.get(a)):(ea(ny,n).call(n,s,a),ea(F4,n).delete(a),ea(bh,n).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])})(),Ed={exports:{}},KK=Ed.exports,tw;function ZK(){return tw||(tw=1,(function(i,e){(function(t,n){i.exports=n()})(KK,function(){return(function(t){function n(s){if(r[s])return r[s].exports;var a=r[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)})([function(t,n,r){var s=r(1),a=(function(){function o(l,u,c){l===void 0&&(l=NaN),u===void 0&&(u=NaN),c===void 0&&(c=!1),this._minFPS=u,this._maxFPS=l,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,c||this.resume()}return o.prototype.updateOnce=function(l){l(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},o.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},o.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},o.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(o.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timeScale",{get:function(){return this._timeScale},set:function(l){this._timeScale!==l&&(this._timeScale=l)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),o.prototype.animateOnce=function(){var l=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return l.onFrame()})},o.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},o.prototype.update=function(l,u){u===void 0&&(u=!0),this._currentTick++,this._currentTime+=l,this._tickDeltaTime=l,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),u&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},o.prototype.getTimer=function(){return Date.now()},o})();Object.defineProperty(n,"__esModule",{value:!0}),n.default=a},function(t,n,r){(function(s,a){t.exports=a()})(this,function(){return(function(s){function a(l){if(o[l])return o[l].exports;var u=o[l]={exports:{},id:l,loaded:!1};return s[l].call(u.exports,u,u.exports,a),u.loaded=!0,u.exports}var o={};return a.m=s,a.c=o,a.p="",a(0)})([function(s,a){var o=(function(){function l(){this.functions=[]}return l.prototype.add=function(u){return this.functions.indexOf(u)===-1&&(this.functions.push(u),!0)},l.prototype.remove=function(u){var c=this.functions.indexOf(u);return c>-1&&(this.functions.splice(c,1),!0)},l.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},l.prototype.dispatch=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var p=this.functions.concat();p.forEach(function(y){y.apply(void 0,u)})},Object.defineProperty(l.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),l})();Object.defineProperty(a,"__esModule",{value:!0}),a.default=o}])})}])})})(Ed)),Ed.exports}var JK=ZK();const k5=q_(JK),R1=11102230246251565e-32,ta=134217729,eZ=(3+8*R1)*R1;function iy(i,e,t,n,r){let s,a,o,l,u=e[0],c=n[0],p=0,y=0;c>u==c>-u?(s=u,u=e[++p]):(s=c,c=n[++y]);let _=0;if(p<i&&y<t)for(c>u==c>-u?(a=u+s,o=s-(a-u),u=e[++p]):(a=c+s,o=s-(a-c),c=n[++y]),s=a,o!==0&&(r[_++]=o);p<i&&y<t;)c>u==c>-u?(a=s+u,l=a-s,o=s-(a-l)+(u-l),u=e[++p]):(a=s+c,l=a-s,o=s-(a-l)+(c-l),c=n[++y]),s=a,o!==0&&(r[_++]=o);for(;p<i;)a=s+u,l=a-s,o=s-(a-l)+(u-l),u=e[++p],s=a,o!==0&&(r[_++]=o);for(;y<t;)a=s+c,l=a-s,o=s-(a-l)+(c-l),c=n[++y],s=a,o!==0&&(r[_++]=o);return(s!==0||_===0)&&(r[_++]=s),_}function tZ(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function y7(i){return new Float64Array(i)}const nZ=(3+16*R1)*R1,iZ=(2+12*R1)*R1,rZ=(9+64*R1)*R1*R1,z4=y7(4),nw=y7(8),iw=y7(12),rw=y7(16),ya=y7(4);function sZ(i,e,t,n,r,s,a){let o,l,u,c,p,y,_,b,w,E,M,P,D,B,U,O,z,q;const F=i-r,G=t-r,j=e-s,$=n-s;B=F*$,y=ta*F,_=y-(y-F),b=F-_,y=ta*$,w=y-(y-$),E=$-w,U=b*E-(B-_*w-b*w-_*E),O=j*G,y=ta*j,_=y-(y-j),b=j-_,y=ta*G,w=y-(y-G),E=G-w,z=b*E-(O-_*w-b*w-_*E),M=U-z,p=U-M,z4[0]=U-(M+p)+(p-z),P=B+M,p=P-B,D=B-(P-p)+(M-p),M=D-O,p=D-M,z4[1]=D-(M+p)+(p-O),q=P+M,p=q-P,z4[2]=P-(q-p)+(M-p),z4[3]=q;let K=tZ(4,z4),ie=iZ*a;if(K>=ie||-K>=ie||(p=i-F,o=i-(F+p)+(p-r),p=t-G,u=t-(G+p)+(p-r),p=e-j,l=e-(j+p)+(p-s),p=n-$,c=n-($+p)+(p-s),o===0&&l===0&&u===0&&c===0)||(ie=rZ*a+eZ*Math.abs(K),K+=F*c+$*o-(j*u+G*l),K>=ie||-K>=ie))return K;B=o*$,y=ta*o,_=y-(y-o),b=o-_,y=ta*$,w=y-(y-$),E=$-w,U=b*E-(B-_*w-b*w-_*E),O=l*G,y=ta*l,_=y-(y-l),b=l-_,y=ta*G,w=y-(y-G),E=G-w,z=b*E-(O-_*w-b*w-_*E),M=U-z,p=U-M,ya[0]=U-(M+p)+(p-z),P=B+M,p=P-B,D=B-(P-p)+(M-p),M=D-O,p=D-M,ya[1]=D-(M+p)+(p-O),q=P+M,p=q-P,ya[2]=P-(q-p)+(M-p),ya[3]=q;const ee=iy(4,z4,4,ya,nw);B=F*c,y=ta*F,_=y-(y-F),b=F-_,y=ta*c,w=y-(y-c),E=c-w,U=b*E-(B-_*w-b*w-_*E),O=j*u,y=ta*j,_=y-(y-j),b=j-_,y=ta*u,w=y-(y-u),E=u-w,z=b*E-(O-_*w-b*w-_*E),M=U-z,p=U-M,ya[0]=U-(M+p)+(p-z),P=B+M,p=P-B,D=B-(P-p)+(M-p),M=D-O,p=D-M,ya[1]=D-(M+p)+(p-O),q=P+M,p=q-P,ya[2]=P-(q-p)+(M-p),ya[3]=q;const X=iy(ee,nw,4,ya,iw);B=o*c,y=ta*o,_=y-(y-o),b=o-_,y=ta*c,w=y-(y-c),E=c-w,U=b*E-(B-_*w-b*w-_*E),O=l*u,y=ta*l,_=y-(y-l),b=l-_,y=ta*u,w=y-(y-u),E=u-w,z=b*E-(O-_*w-b*w-_*E),M=U-z,p=U-M,ya[0]=U-(M+p)+(p-z),P=B+M,p=P-B,D=B-(P-p)+(M-p),M=D-O,p=D-M,ya[1]=D-(M+p)+(p-O),q=P+M,p=q-P,ya[2]=P-(q-p)+(M-p),ya[3]=q;const re=iy(X,iw,4,ya,rw);return rw[re-1]}function $h(i,e,t,n,r,s){const a=(e-s)*(t-r),o=(i-r)*(n-s),l=a-o,u=Math.abs(a+o);return Math.abs(l)>=nZ*u?l:-sZ(i,e,t,n,r,s,u)}const sw=Math.pow(2,-52),F9=new Uint32Array(512);class I6{static from(e,t=cZ,n=hZ){const r=e.length,s=new Float64Array(r*2);for(let a=0;a<r;a++){const o=e[a];s[2*a]=t(o),s[2*a+1]=n(o)}return new I6(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:s}=this,a=e.length>>1;let o=1/0,l=1/0,u=-1/0,c=-1/0;for(let F=0;F<a;F++){const G=e[2*F],j=e[2*F+1];G<o&&(o=G),j<l&&(l=j),G>u&&(u=G),j>c&&(c=j),this._ids[F]=F}const p=(o+u)/2,y=(l+c)/2;let _,b,w;for(let F=0,G=1/0;F<a;F++){const j=ry(p,y,e[2*F],e[2*F+1]);j<G&&(_=F,G=j)}const E=e[2*_],M=e[2*_+1];for(let F=0,G=1/0;F<a;F++){if(F===_)continue;const j=ry(E,M,e[2*F],e[2*F+1]);j<G&&j>0&&(b=F,G=j)}let P=e[2*b],D=e[2*b+1],B=1/0;for(let F=0;F<a;F++){if(F===_||F===b)continue;const G=lZ(E,M,P,D,e[2*F],e[2*F+1]);G<B&&(w=F,B=G)}let U=e[2*w],O=e[2*w+1];if(B===1/0){for(let j=0;j<a;j++)this._dists[j]=e[2*j]-e[0]||e[2*j+1]-e[1];u5(this._ids,this._dists,0,a-1);const F=new Uint32Array(a);let G=0;for(let j=0,$=-1/0;j<a;j++){const K=this._ids[j],ie=this._dists[K];ie>$&&(F[G++]=K,$=ie)}this.hull=F.subarray(0,G),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if($h(E,M,P,D,U,O)<0){const F=b,G=P,j=D;b=w,P=U,D=O,w=F,U=G,O=j}const z=uZ(E,M,P,D,U,O);this._cx=z.x,this._cy=z.y;for(let F=0;F<a;F++)this._dists[F]=ry(e[2*F],e[2*F+1],z.x,z.y);u5(this._ids,this._dists,0,a-1),this._hullStart=_;let q=3;n[_]=t[w]=b,n[b]=t[_]=w,n[w]=t[b]=_,r[_]=0,r[b]=1,r[w]=2,s.fill(-1),s[this._hashKey(E,M)]=_,s[this._hashKey(P,D)]=b,s[this._hashKey(U,O)]=w,this.trianglesLen=0,this._addTriangle(_,b,w,-1,-1,-1);for(let F=0,G,j;F<this._ids.length;F++){const $=this._ids[F],K=e[2*$],ie=e[2*$+1];if(F>0&&Math.abs(K-G)<=sw&&Math.abs(ie-j)<=sw||(G=K,j=ie,$===_||$===b||$===w))continue;let ee=0;for(let Se=0,Ce=this._hashKey(K,ie);Se<this._hashSize&&(ee=s[(Ce+Se)%this._hashSize],!(ee!==-1&&ee!==n[ee]));Se++);ee=t[ee];let X=ee,re;for(;re=n[X],$h(K,ie,e[2*X],e[2*X+1],e[2*re],e[2*re+1])>=0;)if(X=re,X===ee){X=-1;break}if(X===-1)continue;let se=this._addTriangle(X,$,n[X],-1,-1,r[X]);r[$]=this._legalize(se+2),r[X]=se,q++;let Ae=n[X];for(;re=n[Ae],$h(K,ie,e[2*Ae],e[2*Ae+1],e[2*re],e[2*re+1])<0;)se=this._addTriangle(Ae,$,re,r[$],-1,r[Ae]),r[$]=this._legalize(se+2),n[Ae]=Ae,q--,Ae=re;if(X===ee)for(;re=t[X],$h(K,ie,e[2*re],e[2*re+1],e[2*X],e[2*X+1])<0;)se=this._addTriangle(re,$,X,-1,r[X],r[re]),this._legalize(se+2),r[re]=se,n[X]=X,q--,X=re;this._hullStart=t[$]=X,n[X]=t[Ae]=$,n[$]=Ae,s[this._hashKey(K,ie)]=$,s[this._hashKey(e[2*X],e[2*X+1])]=X}this.hull=new Uint32Array(q);for(let F=0,G=this._hullStart;F<q;F++)this.hull[F]=G,G=n[G];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(aZ(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let s=0,a=0;for(;;){const o=n[e],l=e-e%3;if(a=l+(e+2)%3,o===-1){if(s===0)break;e=F9[--s];continue}const u=o-o%3,c=l+(e+1)%3,p=u+(o+2)%3,y=t[a],_=t[e],b=t[c],w=t[p];if(oZ(r[2*y],r[2*y+1],r[2*_],r[2*_+1],r[2*b],r[2*b+1],r[2*w],r[2*w+1])){t[e]=w,t[o]=y;const M=n[p];if(M===-1){let D=this._hullStart;do{if(this._hullTri[D]===p){this._hullTri[D]=e;break}D=this._hullPrev[D]}while(D!==this._hullStart)}this._link(e,M),this._link(o,n[a]),this._link(a,p);const P=u+(o+1)%3;s<F9.length&&(F9[s++]=P)}else{if(s===0)break;e=F9[--s]}}return a}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,s,a){const o=this.trianglesLen;return this._triangles[o]=e,this._triangles[o+1]=t,this._triangles[o+2]=n,this._link(o,r),this._link(o+1,s),this._link(o+2,a),this.trianglesLen+=3,o}}function aZ(i,e){const t=i/(Math.abs(i)+Math.abs(e));return(e>0?3-t:1+t)/4}function ry(i,e,t,n){const r=i-t,s=e-n;return r*r+s*s}function oZ(i,e,t,n,r,s,a,o){const l=i-a,u=e-o,c=t-a,p=n-o,y=r-a,_=s-o,b=l*l+u*u,w=c*c+p*p,E=y*y+_*_;return l*(p*E-w*_)-u*(c*E-w*y)+b*(c*_-p*y)<0}function lZ(i,e,t,n,r,s){const a=t-i,o=n-e,l=r-i,u=s-e,c=a*a+o*o,p=l*l+u*u,y=.5/(a*u-o*l),_=(u*c-o*p)*y,b=(a*p-l*c)*y;return _*_+b*b}function uZ(i,e,t,n,r,s){const a=t-i,o=n-e,l=r-i,u=s-e,c=a*a+o*o,p=l*l+u*u,y=.5/(a*u-o*l),_=i+(u*c-o*p)*y,b=e+(a*p-l*c)*y;return{x:_,y:b}}function u5(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const s=i[r],a=e[s];let o=r-1;for(;o>=t&&e[i[o]]>a;)i[o+1]=i[o--];i[o+1]=s}else{const r=t+n>>1;let s=t+1,a=n;Sh(i,r,s),e[i[t]]>e[i[n]]&&Sh(i,t,n),e[i[s]]>e[i[n]]&&Sh(i,s,n),e[i[t]]>e[i[s]]&&Sh(i,t,s);const o=i[s],l=e[o];for(;;){do s++;while(e[i[s]]<l);do a--;while(e[i[a]]>l);if(a<s)break;Sh(i,s,a)}i[t+1]=i[a],i[a]=o,n-s+1>=a-t?(u5(i,e,s,n),u5(i,e,t,a-1)):(u5(i,e,t,a-1),u5(i,e,s,n))}}function Sh(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function cZ(i){return i[0]}function hZ(i){return i[1]}function fZ(i,e){var t,n,r=0,s,a,o,l,u,c,p,y=i[0],_=i[1],b=e.length;for(t=0;t<b;t++){n=0;var w=e[t],E=w.length-1;if(c=w[0],c[0]!==w[E][0]&&c[1]!==w[E][1])throw new Error("First and last coordinates in a ring must be the same");for(a=c[0]-y,o=c[1]-_,n;n<E;n++){if(p=w[n+1],l=p[0]-y,u=p[1]-_,o===0&&u===0){if(l<=0&&a>=0||a<=0&&l>=0)return 0}else if(u>=0&&o<=0||u<=0&&o>=0){if(s=$h(a,l,o,u,0,0),s===0)return 0;(s>0&&u>0&&o<=0||s<0&&u<=0&&o>0)&&r++}c=p,o=u,a=l}}return r%2!==0}function dZ(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function AZ(i){return i.type==="Feature"?i.geometry:i}function pZ(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=dZ(i),r=AZ(e),s=r.type,a=e.bbox;let o=r.coordinates;if(a&&mZ(n,a)===!1)return!1;s==="Polygon"&&(o=[o]);let l=!1;for(var u=0;u<o.length;++u){const c=fZ(n,o[u]);if(c===0)return!t.ignoreBoundary;c&&(l=!0)}return l}function mZ(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}var gZ=pZ;const aw=1e-6;class dc{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const r=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>aw||Math.abs(this._y1-s)>aw)&&(this._+="L"+r+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class e_{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class yZ{constructor(e,[t,n,r,s]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let s,a;const o=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let w=0,E=0,M=n.length,P,D;w<M;w+=3,E+=2){const B=n[w]*2,U=n[w+1]*2,O=n[w+2]*2,z=e[B],q=e[B+1],F=e[U],G=e[U+1],j=e[O],$=e[O+1],K=F-z,ie=G-q,ee=j-z,X=$-q,re=(K*X-ie*ee)*2;if(Math.abs(re)<1e-9){if(s===void 0){s=a=0;for(const Ae of t)s+=e[Ae*2],a+=e[Ae*2+1];s/=t.length,a/=t.length}const se=1e9*Math.sign((s-z)*X-(a-q)*ee);P=(z+j)/2-se*X,D=(q+$)/2+se*ee}else{const se=1/re,Ae=K*K+ie*ie,Se=ee*ee+X*X;P=z+(X*Ae-ie*Se)*se,D=q+(K*Se-ee*Ae)*se}o[E]=P,o[E+1]=D}let l=t[t.length-1],u,c=l*4,p,y=e[2*l],_,b=e[2*l+1];r.fill(0);for(let w=0;w<t.length;++w)l=t[w],u=c,p=y,_=b,c=l*4,y=e[2*l],b=e[2*l+1],r[u+2]=r[c]=_-b,r[u+3]=r[c+1]=y-p}render(e){const t=e==null?e=new dc:void 0,{delaunay:{halfedges:n,inedges:r,hull:s},circumcenters:a,vectors:o}=this;if(s.length<=1)return null;for(let c=0,p=n.length;c<p;++c){const y=n[c];if(y<c)continue;const _=Math.floor(c/3)*2,b=Math.floor(y/3)*2,w=a[_],E=a[_+1],M=a[b],P=a[b+1];this._renderSegment(w,E,M,P,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const p=Math.floor(r[u]/3)*2,y=a[p],_=a[p+1],b=l*4,w=this._project(y,_,o[b+2],o[b+3]);w&&this._renderSegment(y,_,w[0],w[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new dc:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new dc:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let a=2;a<s;a+=2)(r[a]!==r[a-2]||r[a+1]!==r[a-1])&&t.lineTo(r[a],r[a+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new e_;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,s){let a;const o=this._regioncode(e,t),l=this._regioncode(n,r);o===0&&l===0?(s.moveTo(e,t),s.lineTo(n,r)):(a=this._clipSegment(e,t,n,r,o,l))&&(s.moveTo(a[0],a[1]),s.lineTo(a[2],a[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let s=0,a=t.length;s<a;s+=2)for(let o=0,l=r.length;o<l;o+=2)if(t[s]===r[o]&&t[s+1]===r[o+1]&&t[(s+2)%a]===r[(o+l-2)%l]&&t[(s+3)%a]===r[(o+l-1)%l]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:s}}=this,a=n[e];if(a===-1)return null;const o=[];let l=a;do{const u=Math.floor(l/3);if(o.push(t[u*2],t[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==a&&l!==-1);return o}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r=null,s,a,o=t[n-2],l=t[n-1],u,c=this._regioncode(o,l),p,y=0;for(let _=0;_<n;_+=2)if(s=o,a=l,o=t[_],l=t[_+1],u=c,c=this._regioncode(o,l),u===0&&c===0)p=y,y=0,r?r.push(o,l):r=[o,l];else{let b,w,E,M,P;if(u===0){if((b=this._clipSegment(s,a,o,l,u,c))===null)continue;[w,E,M,P]=b}else{if((b=this._clipSegment(o,l,s,a,c,u))===null)continue;[M,P,w,E]=b,p=y,y=this._edgecode(w,E),p&&y&&this._edge(e,p,y,r,r.length),r?r.push(w,E):r=[w,E]}p=y,y=this._edgecode(M,P),p&&y&&this._edge(e,p,y,r,r.length),r?r.push(M,P):r=[M,P]}if(r)p=y,y=this._edgecode(r[0],r[1]),p&&y&&this._edge(e,p,y,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,s,a){const o=s<a;for(o&&([e,t,n,r,s,a]=[n,r,e,t,a,s]);;){if(s===0&&a===0)return o?[n,r,e,t]:[e,t,n,r];if(s&a)return null;let l,u,c=s||a;c&8?(l=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):c&4?(l=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):c&2?(u=t+(r-t)*(this.xmax-e)/(n-e),l=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),l=this.xmin),s?(e=l,t=u,s=this._regioncode(e,t)):(n=l,r=u,a=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,s,a){let o=Array.from(t),l;if((l=this._project(o[0],o[1],n,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],s,a))&&o.push(l[0],l[1]),o=this._clipFinite(e,o))for(let u=0,c=o.length,p,y=this._edgecode(o[c-2],o[c-1]);u<c;u+=2)p=y,y=this._edgecode(o[u],o[u+1]),p&&y&&(u=this._edge(e,p,y,o,u),c=o.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(e,t,n,r,s){for(;t!==n;){let a,o;switch(t){case 5:t=4;continue;case 4:t=6,a=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,a=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,a=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,a=this.xmin,o=this.ymin;break}(r[s]!==a||r[s+1]!==o)&&this.contains(e,a,o)&&(r.splice(s,0,a,o),s+=2)}return s}_project(e,t,n,r){let s=1/0,a,o,l;if(r<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/r)<s&&(l=this.ymin,o=e+(s=a)*n)}else if(r>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/r)<s&&(l=this.ymax,o=e+(s=a)*n)}if(n>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/n)<s&&(o=this.xmax,l=t+(s=a)*r)}else if(n<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/n)<s&&(o=this.xmin,l=t+(s=a)*r)}return[o,l]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const vZ=2*Math.PI,G4=Math.pow;function _Z(i){return i[0]}function xZ(i){return i[1]}function bZ(i){const{triangles:e,coords:t}=i;for(let n=0;n<e.length;n+=3){const r=2*e[n],s=2*e[n+1],a=2*e[n+2];if((t[a]-t[r])*(t[s+1]-t[r+1])-(t[s]-t[r])*(t[a+1]-t[r+1])>1e-10)return!1}return!0}function SZ(i,e,t){return[i+Math.sin(i+e)*t,e+Math.cos(i-e)*t]}class lb{static from(e,t=_Z,n=xZ,r){return new lb("length"in e?TZ(e,t,n,r):Float64Array.from(MZ(e,t,n,r)))}constructor(e){this._delaunator=new I6(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&bZ(e)){this.collinear=Int32Array.from({length:t.length/2},(y,_)=>_).sort((y,_)=>t[2*y]-t[2*_]||t[2*y+1]-t[2*_+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[t[2*l],t[2*l+1],t[2*u],t[2*u+1]],p=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let y=0,_=t.length/2;y<_;++y){const b=SZ(t[2*y],t[2*y+1],p);t[2*y]=b[0],t[2*y+1]=b[1]}this._delaunator=new I6(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,u=n.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(n[l]===-1||a[c]===-1)&&(a[c]=l)}for(let l=0,u=r.length;l<u;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],a[r[0]]=1,r.length===2&&(a[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new yZ(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:s,triangles:a,collinear:o}=this;if(o){const p=o.indexOf(e);p>0&&(yield o[p-1]),p<o.length-1&&(yield o[p+1]);return}const l=t[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=a[u],u=u%3===2?u-2:u+1,a[u]!==e)return;if(u=s[u],u===-1){const p=n[(r[e]+1)%n.length];p!==c&&(yield p);return}}while(u!==l)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const r=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==r;)n=s;return s}_step(e,t,n){const{inedges:r,hull:s,_hullIndex:a,halfedges:o,triangles:l,points:u}=this;if(r[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,p=G4(t-u[e*2],2)+G4(n-u[e*2+1],2);const y=r[e];let _=y;do{let b=l[_];const w=G4(t-u[b*2],2)+G4(n-u[b*2+1],2);if(w<p&&(p=w,c=b),_=_%3===2?_-2:_+1,l[_]!==e)break;if(_=o[_],_===-1){if(_=s[(a[e]+1)%s.length],_!==b&&G4(t-u[_*2],2)+G4(n-u[_*2+1],2)<p)return _;break}}while(_!==y);return c}render(e){const t=e==null?e=new dc:void 0,{points:n,halfedges:r,triangles:s}=this;for(let a=0,o=r.length;a<o;++a){const l=r[a];if(l<a)continue;const u=s[a]*2,c=s[l]*2;e.moveTo(n[u],n[u+1]),e.lineTo(n[c],n[c+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new dc:void 0,{points:r}=this;for(let s=0,a=r.length;s<a;s+=2){const o=r[s],l=r[s+1];e.moveTo(o+t,l),e.arc(o,l,t,0,vZ)}return n&&n.value()}renderHull(e){const t=e==null?e=new dc:void 0,{hull:n,points:r}=this,s=n[0]*2,a=n.length;e.moveTo(r[s],r[s+1]);for(let o=1;o<a;++o){const l=2*n[o];e.lineTo(r[l],r[l+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new e_;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new dc:void 0,{points:r,triangles:s}=this,a=s[e*=3]*2,o=s[e+1]*2,l=s[e+2]*2;return t.moveTo(r[a],r[a+1]),t.lineTo(r[o],r[o+1]),t.lineTo(r[l],r[l+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new e_;return this.renderTriangle(e,t),t.value()}}function TZ(i,e,t,n){const r=i.length,s=new Float64Array(r*2);for(let a=0;a<r;++a){const o=i[a];s[a*2]=e.call(n,o,a,i),s[a*2+1]=t.call(n,o,a,i)}return s}function*MZ(i,e,t,n){let r=0;for(const s of i)yield e.call(n,s,r,i),yield t.call(n,s,r,i),++r}const ub=Math.PI,ow=ub/2,lw=180/ub,uw=ub/180,EZ=Math.atan2,cw=Math.cos,wZ=Math.max,RZ=Math.min,hw=Math.sin,CZ=Math.sign||function(i){return i>0?1:i<0?-1:0},YP=Math.sqrt;function NZ(i){return i>1?ow:i<-1?-ow:Math.asin(i)}function QP(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function xo(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function TA(i,e){return[i[0]+e[0],i[1]+e[1],i[2]+e[2]]}function MA(i){var e=YP(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return[i[0]/e,i[1]/e,i[2]/e]}function cb(i){return[EZ(i[1],i[0])*lw,NZ(wZ(-1,RZ(1,i[2])))*lw]}function wl(i){const e=i[0]*uw,t=i[1]*uw,n=cw(t);return[n*cw(e),n*hw(e),hw(t)]}function hb(i){return i=i.map(e=>wl(e)),QP(i[0],xo(i[2],i[1]))}function PZ(i){const e=BZ(i),t=IZ(e),n=LZ(t,i),r=OZ(t,i.length),s=DZ(r,i),a=UZ(t,i),{polygons:o,centers:l}=FZ(a,t,i),u=VZ(o),c=GZ(t,i),p=zZ(n,t);return{delaunay:e,edges:n,triangles:t,centers:l,neighbors:r,polygons:o,mesh:u,hull:c,urquhart:p,find:s}}function DZ(i,e){function t(n,r){let s=n[0]-r[0],a=n[1]-r[1],o=n[2]-r[2];return s*s+a*a+o*o}return function(r,s,a){a===void 0&&(a=0);let o,l,u=a;const c=wl([r,s]);do o=a,a=null,l=t(c,wl(e[o])),i[o].forEach(p=>{let y=t(c,wl(e[p]));if(y<l){l=y,a=p,u=p;return}});while(a!==null);return u}}function BZ(i){if(i.length<2)return{};let e=0;for(;isNaN(i[e][0]+i[e][1])&&e++<i.length;);const t=_Q(i[e]),n=JQ().translate([0,0]).scale(1).rotate(t.invert([180,0]));i=i.map(n);const r=[];let s=1;for(let p=0,y=i.length;p<y;p++){let _=i[p][0]**2+i[p][1]**2;!isFinite(_)||_>1e32?r.push(p):_>s&&(s=_)}const a=1e6*YP(s);r.forEach(p=>i[p]=[a,0]),i.push([0,a]),i.push([-a,0]),i.push([0,-a]);const o=lb.from(i);o.projection=n;const{triangles:l,halfedges:u,inedges:c}=o;for(let p=0,y=u.length;p<y;p++)if(u[p]<0){const _=p%3==2?p-2:p+1,b=p%3==0?p+2:p-1,w=u[_],E=u[b];u[w]=E,u[E]=w,u[_]=u[b]=-1,l[p]=l[_]=l[b]=e,c[l[w]]=w%3==0?w+2:w-1,c[l[E]]=E%3==0?E+2:E-1,p+=2-p%3}else l[p]>i.length-3-1&&(l[p]=e);return o}function LZ(i,e){const t=new Set;return e.length===2?[[0,1]]:(i.forEach(n=>{if(n[0]!==n[1]&&!(hb(n.map(r=>e[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,t.add($d([n[r],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function IZ(i){const{triangles:e}=i;if(!e)return[];const t=[];for(let n=0,r=e.length/3;n<r;n++){const s=e[3*n],a=e[3*n+1],o=e[3*n+2];s!==a&&a!==o&&t.push([s,o,a])}return t}function UZ(i,e){return i.map(t=>{const n=t.map(s=>e[s]).map(wl),r=TA(TA(xo(n[1],n[0]),xo(n[2],n[1])),xo(n[0],n[2]));return cb(MA(r))})}function OZ(i,e){const t=[];return i.forEach(n=>{for(let r=0;r<3;r++){const s=n[r],a=n[(r+1)%3];t[s]=t[s]||[],t[s].push(a)}}),i.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function FZ(i,e,t){const n=[],r=i.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:r};if(t.length===2){const o=wl(t[0]),l=wl(t[1]),u=MA(TA(o,l)),c=MA(xo(o,l)),p=xo(u,c),y=[u,xo(u,p),xo(xo(u,p),p),xo(xo(xo(u,p),p),p)].map(cb).map(a);return n.push(y),n.push(y.slice().reverse()),{polygons:n,centers:r}}}e.forEach((o,l)=>{for(let u=0;u<3;u++){const c=o[u],p=o[(u+1)%3],y=o[(u+2)%3];n[c]=n[c]||[],n[c].push([p,y,l,[c,p,y]])}});const s=n.map(o=>{const l=[o[0][2]];let u=o[0][1];for(let c=1;c<o.length;c++)for(let p=0;p<o.length;p++)if(o[p][0]==u){u=o[p][1],l.push(o[p][2]);break}if(l.length>2)return l;if(l.length==2){const c=fw(t[o[0][3][0]],t[o[0][3][1]],r[l[0]]),p=fw(t[o[0][3][2]],t[o[0][3][0]],r[l[0]]),y=a(c),_=a(p);return[l[0],_,l[1],y]}});function a(o){let l=-1;return r.slice(e.length,1/0).forEach((u,c)=>{u[0]===o[0]&&u[1]===o[1]&&(l=c+e.length)}),l<0&&(l=r.length,r.push(o)),l}return{polygons:s,centers:r}}function fw(i,e,t){i=wl(i),e=wl(e),t=wl(t);const n=CZ(QP(xo(e,i),t));return cb(MA(TA(i,e)).map(r=>n*r))}function VZ(i){const e=[];return i.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let r of t)r>n&&e.push([n,r]),n=r}),e}function zZ(i,e){return function(t){const n=new Map,r=new Map;return i.forEach((s,a)=>{const o=s.join("-");n.set(o,t[a]),r.set(o,!0)}),e.forEach(s=>{let a=0,o=-1;for(let l=0;l<3;l++){let u=$d([s[l],s[(l+1)%3]]).join("-");n.get(u)>a&&(a=n.get(u),o=u)}r.set(o,!1)}),i.map(s=>r.get(s.join("-")))}}function GZ(i,e){const t=new Set,n=[];i.map(o=>{if(!(hb(o.map(l=>e[l>e.length?0:l]))>1e-12))for(let l=0;l<3;l++){let u=[o[l],o[(l+1)%3]],c=`${u[0]}-${u[1]}`;t.has(c)?t.delete(c):t.add(`${u[1]}-${u[0]}`)}});const r=new Map;let s;if(t.forEach(o=>{o=o.split("-").map(Number),r.set(o[0],o[1]),s=o[0]}),s===void 0)return n;let a=s;do{n.push(a);let o=r.get(a);r.set(a,-1),a=o}while(a>-1&&a!==s);return n}function qZ(i){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(r=>[e._vx(r),e._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));e.points=n.map(r=>[r[0],r[1]]),e.valid=n.map(r=>r[2]),e.delaunay=PZ(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return SE(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return SE(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((r,s)=>n.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(a=>e.delaunay.centers[a])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,r)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[r],n)).filter(n=>hb(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>zu(e.points[s[0]],e.points[s[1]])),r=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,a)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[a],urquhart:!!r[a]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:r}=e.delaunay,s=[];for(const a of r)if(a)for(let o=a.length,l=a[o-1],u=a[0],c=0;c<o;l=u,u=a[++c])u>l&&s.push([n[l],n[u]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,r){if(e._found=e.delaunay.find(t,n,e._found),!r||zu([t,n],e.points[e._found])<r)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,r=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>r[s]),r[n[0]]]]}},i?e(i):e}function t_(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function kZ(i){if(Array.isArray(i))return i}function HZ(i){if(Array.isArray(i))return t_(i)}function WZ(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jZ(i,e,t){return e=EA(e),eJ(i,$P()?Reflect.construct(e,[],EA(i).constructor):e.apply(i,t))}function XZ(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function YZ(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function EA(i){return EA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},EA(i)}function QZ(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&n_(i,e)}function $P(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($P=function(){return!!i})()}function $Z(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function KZ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function ZZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eJ(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WZ(i)}function n_(i,e){return n_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},n_(i,e)}function _l(i,e){return kZ(i)||KZ(i,e)||KP(i,e)||ZZ()}function sy(i){return HZ(i)||$Z(i)||KP(i)||JZ()}function KP(i,e){if(i){if(typeof i=="string")return t_(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?t_(i,e):void 0}}function tJ(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,r=nJ(i,n),s=w6(r),a=iJ(i,n),o=[].concat(sy(s),sy(a)),l={type:"Polygon",coordinates:i},u=gP(l),c=_l(u,2),p=_l(c[0],2),y=p[0],_=p[1],b=_l(c[1],2),w=b[0],E=b[1],M=y>w||E>=89||_<=-89,P=[];if(M){var D=qZ(o).triangles(),B=new Map(o.map(function(re,se){var Ae=_l(re,2),Se=Ae[0],Ce=Ae[1];return["".concat(Se,"-").concat(Ce),se]}));D.features.forEach(function(re){var se,Ae=re.geometry.coordinates[0].slice(0,3).reverse(),Se=[];if(Ae.forEach(function(Ye){var it=_l(Ye,2),pt=it[0],yt=it[1],Oe="".concat(pt,"-").concat(yt);B.has(Oe)&&Se.push(B.get(Oe))}),Se.length===3){if(Se.some(function(Ye){return Ye<s.length})){var Ce=re.properties.circumcenter;if(!i_(Ce,l,M))return}(se=P).push.apply(se,Se)}})}else if(a.length)for(var F=I6.from(o),G=function(se){var Ae,Se=[2,1,0].map(function(it){return F.triangles[se+it]}),Ce=Se.map(function(it){return o[it]});if(Se.some(function(it){return it<s.length})){var Ye=[0,1].map(function(it){return dY(Ce,function(pt){return pt[it]})});if(!i_(Ye,l,M))return 1}(Ae=P).push.apply(Ae,sy(Se))},j=0,$=F.triangles.length;j<$;j+=3)G(j);else{var U=_A(r),O=U.vertices,z=U.holes,q=z===void 0?[]:z;P=S$(O,q,2)}var K=U1($d(o,function(re){return re[0]}),[0,1]),ie=U1($d(o,function(re){return re[1]}),[0,1]),ee=o.map(function(re){var se=_l(re,2),Ae=se[0],Se=se[1];return[K(Ae),ie(Se)]}),X={points:o,indices:P,uvs:ee};return{contour:r,triangles:X}}function nJ(i,e){return i.map(function(t){var n=[],r;return t.forEach(function(s){if(r){var a=zu(s,r)*180/Math.PI;if(a>e)for(var o=nb(r,s),l=1/Math.ceil(a/e),u=l;u<1;)n.push(o(u)),u+=l}n.push(r=s)}),n})}function iJ(i,e){var t={type:"Polygon",coordinates:i},n=gP(t),r=_l(n,2),s=_l(r[0],2),a=s[0],o=s[1],l=_l(r[1],2),u=l[0],c=l[1];if(Math.min(Math.abs(u-a),Math.abs(c-o))<e)return[];var p=a>u||c>=89||o<=-89;return rJ(e,{minLng:a,maxLng:u,minLat:o,maxLat:c}).filter(function(y){return i_(y,t,p)})}function rJ(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,r=e.minLat,s=e.maxLat,a=Math.round(Math.pow(360/i,2)/Math.PI),o=(1+Math.sqrt(5))/2,l=function(M){return M/o*360%360-180},u=function(M){return Math.acos(2*M/a-1)/Math.PI*180-90},c=function(M){return a*(Math.cos((M+90)*Math.PI/180)+1)/2},p=[s!==void 0?Math.ceil(c(s)):0,r!==void 0?Math.floor(c(r)):a-1],y=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(E){return E<=n}:n===void 0?function(E){return E>=t}:n>=t?function(E){return E>=t&&E<=n}:function(E){return E>=t||E<=n},_=[],b=p[0];b<=p[1];b++){var w=l(b);y(w)&&_.push([w,u(b)])}return _}function i_(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?OQ(e,i):gZ(i,e)}var wd=window.THREE?window.THREE:{BufferGeometry:Tn,Float32BufferAttribute:Yt},dw=new wd.BufferGeometry().setAttribute?"setAttribute":"addAttribute",fb=(function(i){function e(t,n,r,s,a,o,l){var u;XZ(this,e),u=jZ(this,e),u.type="ConicPolygonGeometry",u.parameters={polygonGeoJson:t,bottomHeight:n,topHeight:r,closedBottom:s,closedTop:a,includeSides:o,curvatureResolution:l},n=n||0,r=r||1,s=s!==void 0?s:!0,a=a!==void 0?a:!0,o=o!==void 0?o:!0,l=l||5;var c=tJ(t,{resolution:l}),p=c.contour,y=c.triangles,_=w6(y.uvs),b=[],w=[],E=[],M=0,P=function(z){var q=Math.round(b.length/3),F=E.length;b=b.concat(z.vertices),w=w.concat(z.uvs),E=E.concat(q?z.indices.map(function(G){return G+q}):z.indices),u.addGroup(F,E.length-F,M++)};o&&P(B()),s&&P(U(n,!1)),a&&P(U(r,!0)),u.setIndex(E),u[dw]("position",new wd.Float32BufferAttribute(b,3)),u[dw]("uv",new wd.Float32BufferAttribute(w,2)),u.computeVertexNormals();function D(O,z){var q=typeof z=="function"?z:function(){return z},F=O.map(function(G){return G.map(function(j){var $=_l(j,2),K=$[0],ie=$[1];return sJ(ie,K,q(K,ie))})});return _A(F)}function B(){for(var O=D(p,n),z=O.vertices,q=O.holes,F=D(p,r),G=F.vertices,j=w6([G,z]),$=Math.round(G.length/3),K=new Set(q),ie=0,ee=[],X=0;X<$;X++){var re=X+1;if(re===$)re=ie;else if(K.has(re)){var se=re;re=ie,ie=se}ee.push(X,X+$,re+$),ee.push(re+$,re,X)}for(var Ae=[],Se=1;Se>=0;Se--)for(var Ce=0;Ce<$;Ce+=1)Ae.push(Ce/($-1),Se);return{indices:ee,vertices:j,uvs:Ae}}function U(O){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:z?y.indices:y.indices.slice().reverse(),vertices:D([y.points],O).vertices,uvs:_}}return u}return QZ(e,i),YZ(e)})(wd.BufferGeometry);function sJ(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function r_(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function aJ(i){if(Array.isArray(i))return i}function oJ(i){if(Array.isArray(i))return r_(i)}function lJ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function uJ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function cJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fJ(i,e){if(i==null)return{};var t,n,r=dJ(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function dJ(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function AJ(i,e){return aJ(i)||uJ(i,e)||ZP(i,e)||cJ()}function pJ(i){return oJ(i)||lJ(i)||ZP(i)||hJ()}function mJ(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function gJ(i){var e=mJ(i,"string");return typeof e=="symbol"?e:e+""}function ZP(i,e){if(i){if(typeof i=="string")return r_(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r_(i,e):void 0}}var yJ=(function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(o){return{keyAccessor:o,isProp:!(o instanceof Function)}}),s=i.reduce(function(o,l){var u=o,c=l;return r.forEach(function(p,y){var _=p.keyAccessor,b=p.isProp,w;if(b){var E=c,M=E[_],P=fJ(E,[_].map(gJ));w=M,c=P}else w=_(c,y);y+1<r.length?(u.hasOwnProperty(w)||(u[w]={}),u=u[w]):t?(u.hasOwnProperty(w)||(u[w]=[]),u[w].push(c)):u[w]=c}),o},{});t instanceof Function&&(function o(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===r.length?Object.keys(l).forEach(function(c){return l[c]=t(l[c])}):Object.values(l).forEach(function(c){return o(c,u+1)})})(s);var a=s;return n&&(a=[],(function o(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===r.length?a.push({keys:u,vals:l}):Object.entries(l).forEach(function(c){var p=AJ(c,2),y=p[0],_=p[1];return o(_,[].concat(pJ(u),[y]))})})(s),e instanceof Array&&e.length===0&&a.length===1&&(a[0].keys=[])),a}),vi=(function(i){i=i||{};var e=typeof i<"u"?i:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r="";function s(Ve){return e.locateFile?e.locateFile(Ve,r):r+Ve}var a;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",a=function(nt,It,rt){var f=new XMLHttpRequest;f.open("GET",nt,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status==200||f.status==0&&f.response){It(f.response);return}var Gn=ge(nt);if(Gn){It(Gn.buffer);return}rt()},f.onerror=rt,f.send(null)};var o=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var u=0,c=function(Ve){u=Ve},p=function(){return u},y=8;function _(Ve,nt,It,rt){switch(It=It||"i8",It.charAt(It.length-1)==="*"&&(It="i32"),It){case"i1":$[Ve>>0]=nt;break;case"i8":$[Ve>>0]=nt;break;case"i16":ie[Ve>>1]=nt;break;case"i32":ee[Ve>>2]=nt;break;case"i64":Le=[nt>>>0,(J=nt,+pe(J)>=1?J>0?(tt(+et(J/4294967296),4294967295)|0)>>>0:~~+Je((J-+(~~J>>>0))/4294967296)>>>0:0)],ee[Ve>>2]=Le[0],ee[Ve+4>>2]=Le[1];break;case"float":X[Ve>>2]=nt;break;case"double":re[Ve>>3]=nt;break;default:ur("invalid type for setValue: "+It)}}function b(Ve,nt,It){switch(nt=nt||"i8",nt.charAt(nt.length-1)==="*"&&(nt="i32"),nt){case"i1":return $[Ve>>0];case"i8":return $[Ve>>0];case"i16":return ie[Ve>>1];case"i32":return ee[Ve>>2];case"i64":return ee[Ve>>2];case"float":return X[Ve>>2];case"double":return re[Ve>>3];default:ur("invalid type for getValue: "+nt)}return null}var w=!1;function E(Ve,nt){Ve||ur("Assertion failed: "+nt)}function M(Ve){var nt=e["_"+Ve];return E(nt,"Cannot call unknown function "+Ve+", make sure it is exported"),nt}function P(Ve,nt,It,rt,f){var Q={string:function(Wn){var cs=0;if(Wn!=null&&Wn!==0){var X0=(Wn.length<<2)+1;cs=bt(X0),q(Wn,cs,X0)}return cs},array:function(Wn){var cs=bt(Wn.length);return F(Wn,cs),cs}};function Gn(Wn){return nt==="string"?O(Wn):nt==="boolean"?!!Wn:Wn}var ii=M(Ve),$n=[],Bn=0;if(rt)for(var ri=0;ri<rt.length;ri++){var io=Q[It[ri]];io?(Bn===0&&(Bn=vt()),$n[ri]=io(rt[ri])):$n[ri]=rt[ri]}var fi=ii.apply(null,$n);return fi=Gn(fi),Bn!==0&&Gt(Bn),fi}function D(Ve,nt,It,rt){It=It||[];var f=It.every(function(Gn){return Gn==="number"}),Q=nt!=="string";return Q&&f&&!rt?M(Ve):function(){return P(Ve,nt,It,arguments)}}var B=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function U(Ve,nt,It){for(var rt=nt+It,f=nt;Ve[f]&&!(f>=rt);)++f;if(f-nt>16&&Ve.subarray&&B)return B.decode(Ve.subarray(nt,f));for(var Q="";nt<f;){var Gn=Ve[nt++];if(!(Gn&128)){Q+=String.fromCharCode(Gn);continue}var ii=Ve[nt++]&63;if((Gn&224)==192){Q+=String.fromCharCode((Gn&31)<<6|ii);continue}var $n=Ve[nt++]&63;if((Gn&240)==224?Gn=(Gn&15)<<12|ii<<6|$n:Gn=(Gn&7)<<18|ii<<12|$n<<6|Ve[nt++]&63,Gn<65536)Q+=String.fromCharCode(Gn);else{var Bn=Gn-65536;Q+=String.fromCharCode(55296|Bn>>10,56320|Bn&1023)}}return Q}function O(Ve,nt){return Ve?U(K,Ve,nt):""}function z(Ve,nt,It,rt){if(!(rt>0))return 0;for(var f=It,Q=It+rt-1,Gn=0;Gn<Ve.length;++Gn){var ii=Ve.charCodeAt(Gn);if(ii>=55296&&ii<=57343){var $n=Ve.charCodeAt(++Gn);ii=65536+((ii&1023)<<10)|$n&1023}if(ii<=127){if(It>=Q)break;nt[It++]=ii}else if(ii<=2047){if(It+1>=Q)break;nt[It++]=192|ii>>6,nt[It++]=128|ii&63}else if(ii<=65535){if(It+2>=Q)break;nt[It++]=224|ii>>12,nt[It++]=128|ii>>6&63,nt[It++]=128|ii&63}else{if(It+3>=Q)break;nt[It++]=240|ii>>18,nt[It++]=128|ii>>12&63,nt[It++]=128|ii>>6&63,nt[It++]=128|ii&63}}return nt[It]=0,It-f}function q(Ve,nt,It){return z(Ve,K,nt,It)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function F(Ve,nt){$.set(Ve,nt)}function G(Ve,nt){return Ve%nt>0&&(Ve+=nt-Ve%nt),Ve}var j,$,K,ie,ee,X,re;function se(Ve){j=Ve,e.HEAP8=$=new Int8Array(Ve),e.HEAP16=ie=new Int16Array(Ve),e.HEAP32=ee=new Int32Array(Ve),e.HEAPU8=K=new Uint8Array(Ve),e.HEAPU16=new Uint16Array(Ve),e.HEAPU32=new Uint32Array(Ve),e.HEAPF32=X=new Float32Array(Ve),e.HEAPF64=re=new Float64Array(Ve)}var Ae=5271520,Se=28608,Ce=e.TOTAL_MEMORY||33554432;e.buffer?j=e.buffer:j=new ArrayBuffer(Ce),Ce=j.byteLength,se(j),ee[Se>>2]=Ae;function Ye(Ve){for(;Ve.length>0;){var nt=Ve.shift();if(typeof nt=="function"){nt();continue}var It=nt.func;typeof It=="number"?nt.arg===void 0?e.dynCall_v(It):e.dynCall_vi(It,nt.arg):It(nt.arg===void 0?null:nt.arg)}}var it=[],pt=[],yt=[],Oe=[];function Xe(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)ln(e.preRun.shift());Ye(it)}function Tt(){Ye(pt)}function Ft(){Ye(yt)}function Pt(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Dn(e.postRun.shift());Ye(Oe)}function ln(Ve){it.unshift(Ve)}function Dn(Ve){Oe.unshift(Ve)}var pe=Math.abs,Je=Math.ceil,et=Math.floor,tt=Math.min,ke=0,xt=null;function ft(Ve){ke++,e.monitorRunDependencies&&e.monitorRunDependencies(ke)}function wt(Ve){if(ke--,e.monitorRunDependencies&&e.monitorRunDependencies(ke),ke==0&&xt){var nt=xt;xt=null,nt()}}e.preloadedImages={},e.preloadedAudios={};var cn=null,Sn="data:application/octet-stream;base64,";function de(Ve){return String.prototype.startsWith?Ve.startsWith(Sn):Ve.indexOf(Sn)===0}var J,Le;cn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var We=28624;function ht(Ve,nt,It,rt){ur("Assertion failed: "+O(Ve)+", at: "+[nt?O(nt):"unknown filename",It,rt?O(rt):"unknown function"])}function Qe(){return $.length}function nn(Ve,nt,It){K.set(K.subarray(nt,nt+It),Ve)}function Ct(Ve){return e.___errno_location&&(ee[e.___errno_location()>>2]=Ve),Ve}function Zt(Ve){ur("OOM")}function en(Ve){try{var nt=new ArrayBuffer(Ve);return nt.byteLength!=Ve?void 0:(new Int8Array(nt).set($),ut(nt),se(nt),1)}catch{}}function At(Ve){var nt=Qe(),It=16777216,rt=2147483648-It;if(Ve>rt)return!1;for(var f=16777216,Q=Math.max(nt,f);Q<Ve;)Q<=536870912?Q=G(2*Q,It):Q=Math.min(G((3*Q+2147483648)/4,It),rt);var Gn=en(Q);return!!Gn}var Lt=typeof atob=="function"?atob:function(Ve){var nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",It="",rt,f,Q,Gn,ii,$n,Bn,ri=0;Ve=Ve.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Gn=nt.indexOf(Ve.charAt(ri++)),ii=nt.indexOf(Ve.charAt(ri++)),$n=nt.indexOf(Ve.charAt(ri++)),Bn=nt.indexOf(Ve.charAt(ri++)),rt=Gn<<2|ii>>4,f=(ii&15)<<4|$n>>2,Q=($n&3)<<6|Bn,It=It+String.fromCharCode(rt),$n!==64&&(It=It+String.fromCharCode(f)),Bn!==64&&(It=It+String.fromCharCode(Q));while(ri<Ve.length);return It};function dn(Ve){try{for(var nt=Lt(Ve),It=new Uint8Array(nt.length),rt=0;rt<nt.length;++rt)It[rt]=nt.charCodeAt(rt);return It}catch{throw new Error("Converting base64 string to bytes failed.")}}function ge(Ve){if(de(Ve))return dn(Ve.slice(Sn.length))}var Ue={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Mt={b:c,c:p,d:ht,e:Ct,f:Qe,g:nn,h:At,i:Zt,o:We,p:Se},le=(function(Ve,nt,It){"almost asm";var rt=new Ve.Int8Array(It),f=new Ve.Int32Array(It);new Ve.Uint8Array(It),new Ve.Float32Array(It);var Q=new Ve.Float64Array(It),Gn=nt.o|0,ii=nt.p|0,$n=Ve.Math.floor,Bn=Ve.Math.abs,ri=Ve.Math.sqrt,io=Ve.Math.pow,fi=Ve.Math.cos,Wn=Ve.Math.sin,cs=Ve.Math.tan,X0=Ve.Math.acos,ae=Ve.Math.asin,Ee=Ve.Math.atan,Pe=Ve.Math.atan2,Ge=Ve.Math.ceil,we=Ve.Math.imul,_t=Ve.Math.min,Ut=Ve.Math.max,kt=Ve.Math.clz32,ot=nt.b,Z=nt.c,gt=nt.d,mn=nt.e,ti=nt.f,bi=nt.g,Ki=nt.h,Bi=nt.i,Y=28640;function xn(h){return rt=new Int8Array(h),f=new Int32Array(h),Q=new Float64Array(h),It=h,!0}function Zi(h){h=h|0;var d=0;return d=Y,Y=Y+h|0,Y=Y+15&-16,d|0}function di(){return Y|0}function hs(h){h=h|0,Y=h}function h0(h,d){h=h|0,Y=h}function Jr(h,d){h=h|0,d=d|0;var m=0,v=0,x=0;return(h|0)<0?(d=2,d|0):(h|0)>13780509?(d=so(15,d)|0,d|0):(m=((h|0)<0)<<31>>31,x=wr(h|0,m|0,3,0)|0,v=Z()|0,m=fn(h|0,m|0,1,0)|0,m=wr(x|0,v|0,m|0,Z()|0)|0,m=fn(m|0,Z()|0,1,0)|0,h=Z()|0,f[d>>2]=m,f[d+4>>2]=h,d=0,d|0)}function f0(h,d,m,v){return h=h|0,d=d|0,m=m|0,v=v|0,Vi(h,d,m,v,0)|0}function Vi(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0;if(L=Y,Y=Y+16|0,R=L,!(fs(h,d,m,v,x)|0))return v=0,Y=L,v|0;do if((m|0)>=0){if((m|0)>13780509){if(S=so(15,R)|0,S|0)break;C=R,R=f[C>>2]|0,C=f[C+4>>2]|0}else S=((m|0)<0)<<31>>31,V=wr(m|0,S|0,3,0)|0,C=Z()|0,S=fn(m|0,S|0,1,0)|0,S=wr(V|0,C|0,S|0,Z()|0)|0,S=fn(S|0,Z()|0,1,0)|0,C=Z()|0,f[R>>2]=S,f[R+4>>2]=C,R=S;if(Lo(v|0,0,R<<3|0)|0,x|0){Lo(x|0,0,R<<2|0)|0,S=ir(h,d,m,v,x,R,C,0)|0;break}S=Cs(R,4)|0,S?(V=ir(h,d,m,v,S,R,C,0)|0,An(S),S=V):S=13}else S=2;while(!1);return V=S,Y=L,V|0}function fs(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0;if(_e=Y,Y=Y+16|0,ce=_e,fe=_e+8|0,he=ce,f[he>>2]=h,f[he+4>>2]=d,(m|0)<0)return fe=2,Y=_e,fe|0;if(S=v,f[S>>2]=h,f[S+4>>2]=d,S=(x|0)!=0,S&&(f[x>>2]=0),Ci(h,d)|0)return fe=9,Y=_e,fe|0;f[fe>>2]=0;e:do if((m|0)>=1)if(S)for(W=1,V=0,ne=0,he=1,S=h;;){if(!(V|ne)){if(S=Ai(S,d,4,fe,ce)|0,S|0)break e;if(d=ce,S=f[d>>2]|0,d=f[d+4>>2]|0,Ci(S,d)|0){S=9;break e}}if(S=Ai(S,d,f[26800+(ne<<2)>>2]|0,fe,ce)|0,S|0)break e;if(d=ce,S=f[d>>2]|0,d=f[d+4>>2]|0,h=v+(W<<3)|0,f[h>>2]=S,f[h+4>>2]=d,f[x+(W<<2)>>2]=he,h=V+1|0,R=(h|0)==(he|0),C=ne+1|0,L=(C|0)==6,Ci(S,d)|0){S=9;break e}if(he=he+(L&R&1)|0,(he|0)>(m|0)){S=0;break}else W=W+1|0,V=R?0:h,ne=R?L?0:C:ne}else for(W=1,V=0,ne=0,he=1,S=h;;){if(!(V|ne)){if(S=Ai(S,d,4,fe,ce)|0,S|0)break e;if(d=ce,S=f[d>>2]|0,d=f[d+4>>2]|0,Ci(S,d)|0){S=9;break e}}if(S=Ai(S,d,f[26800+(ne<<2)>>2]|0,fe,ce)|0,S|0)break e;if(d=ce,S=f[d>>2]|0,d=f[d+4>>2]|0,h=v+(W<<3)|0,f[h>>2]=S,f[h+4>>2]=d,h=V+1|0,R=(h|0)==(he|0),C=ne+1|0,L=(C|0)==6,Ci(S,d)|0){S=9;break e}if(he=he+(L&R&1)|0,(he|0)>(m|0)){S=0;break}else W=W+1|0,V=R?0:h,ne=R?L?0:C:ne}else S=0;while(!1);return fe=S,Y=_e,fe|0}function ir(h,d,m,v,x,S,R,C){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,S=S|0,R=R|0,C=C|0;var L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0;if(_e=Y,Y=Y+16|0,ce=_e+8|0,fe=_e,L=b0(h|0,d|0,S|0,R|0)|0,W=Z()|0,ne=v+(L<<3)|0,Me=ne,Fe=f[Me>>2]|0,Me=f[Me+4>>2]|0,V=(Fe|0)==(h|0)&(Me|0)==(d|0),!((Fe|0)==0&(Me|0)==0|V))do L=fn(L|0,W|0,1,0)|0,L=iu(L|0,Z()|0,S|0,R|0)|0,W=Z()|0,ne=v+(L<<3)|0,Fe=ne,Me=f[Fe>>2]|0,Fe=f[Fe+4>>2]|0,V=(Me|0)==(h|0)&(Fe|0)==(d|0);while(!((Me|0)==0&(Fe|0)==0|V));if(L=x+(L<<2)|0,V&&(f[L>>2]|0)<=(C|0)||(Fe=ne,f[Fe>>2]=h,f[Fe+4>>2]=d,f[L>>2]=C,(C|0)>=(m|0)))return Fe=0,Y=_e,Fe|0;switch(V=C+1|0,f[ce>>2]=0,L=Ai(h,d,2,ce,fe)|0,L|0){case 9:{he=9;break}case 0:{L=fe,L=ir(f[L>>2]|0,f[L+4>>2]|0,m,v,x,S,R,V)|0,L||(he=9);break}}e:do if((he|0)==9){switch(f[ce>>2]=0,L=Ai(h,d,3,ce,fe)|0,L|0){case 9:break;case 0:{if(L=fe,L=ir(f[L>>2]|0,f[L+4>>2]|0,m,v,x,S,R,V)|0,L|0)break e;break}default:break e}switch(f[ce>>2]=0,L=Ai(h,d,1,ce,fe)|0,L|0){case 9:break;case 0:{if(L=fe,L=ir(f[L>>2]|0,f[L+4>>2]|0,m,v,x,S,R,V)|0,L|0)break e;break}default:break e}switch(f[ce>>2]=0,L=Ai(h,d,5,ce,fe)|0,L|0){case 9:break;case 0:{if(L=fe,L=ir(f[L>>2]|0,f[L+4>>2]|0,m,v,x,S,R,V)|0,L|0)break e;break}default:break e}switch(f[ce>>2]=0,L=Ai(h,d,4,ce,fe)|0,L|0){case 9:break;case 0:{if(L=fe,L=ir(f[L>>2]|0,f[L+4>>2]|0,m,v,x,S,R,V)|0,L|0)break e;break}default:break e}switch(f[ce>>2]=0,L=Ai(h,d,6,ce,fe)|0,L|0){case 9:break;case 0:{if(L=fe,L=ir(f[L>>2]|0,f[L+4>>2]|0,m,v,x,S,R,V)|0,L|0)break e;break}default:break e}return Fe=0,Y=_e,Fe|0}while(!1);return Fe=L,Y=_e,Fe|0}function Ai(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0;if(m>>>0>6)return x=1,x|0;if(ne=(f[v>>2]|0)%6|0,f[v>>2]=ne,(ne|0)>0){S=0;do m=Q0(m)|0,S=S+1|0;while((S|0)<(f[v>>2]|0))}if(ne=lt(h|0,d|0,45)|0,Z()|0,W=ne&127,W>>>0>121)return x=5,x|0;L=Xs(h,d)|0,S=lt(h|0,d|0,52)|0,Z()|0,S=S&15;e:do if(!S)V=8;else{for(;;){if(R=(15-S|0)*3|0,C=lt(h|0,d|0,R|0)|0,Z()|0,C=C&7,(C|0)==7){d=5;break}if(fe=(fa(S)|0)==0,S=S+-1|0,he=St(7,0,R|0)|0,d=d&~(Z()|0),ce=St(f[(fe?432:16)+(C*28|0)+(m<<2)>>2]|0,0,R|0)|0,R=Z()|0,m=f[(fe?640:224)+(C*28|0)+(m<<2)>>2]|0,h=ce|h&~he,d=R|d,!m){m=0;break e}if(!S){V=8;break e}}return d|0}while(!1);(V|0)==8&&(fe=f[848+(W*28|0)+(m<<2)>>2]|0,ce=St(fe|0,0,45)|0,h=ce|h,d=Z()|0|d&-1040385,m=f[4272+(W*28|0)+(m<<2)>>2]|0,(fe&127|0)==127&&(fe=St(f[848+(W*28|0)+20>>2]|0,0,45)|0,d=Z()|0|d&-1040385,m=f[4272+(W*28|0)+20>>2]|0,h=$0(fe|h,d)|0,d=Z()|0,f[v>>2]=(f[v>>2]|0)+1)),C=lt(h|0,d|0,45)|0,Z()|0,C=C&127;e:do if(ki(C)|0){t:do if((Xs(h,d)|0)==1){if((W|0)!=(C|0))if(S3(C,f[7696+(W*28|0)>>2]|0)|0){h=Do(h,d)|0,R=1,d=Z()|0;break}else gt(27795,26864,533,26872);switch(L|0){case 3:{h=$0(h,d)|0,d=Z()|0,f[v>>2]=(f[v>>2]|0)+1,R=0;break t}case 5:{h=Do(h,d)|0,d=Z()|0,f[v>>2]=(f[v>>2]|0)+5,R=0;break t}case 0:return fe=9,fe|0;default:return fe=1,fe|0}}else R=0;while(!1);if((m|0)>0){S=0;do h=N8(h,d)|0,d=Z()|0,S=S+1|0;while((S|0)!=(m|0))}if((W|0)!=(C|0)){if(!(b3(C)|0)){if((R|0)!=0|(Xs(h,d)|0)!=5)break;f[v>>2]=(f[v>>2]|0)+1;break}switch(ne&127){case 8:case 118:break e}(Xs(h,d)|0)!=3&&(f[v>>2]=(f[v>>2]|0)+1)}}else if((m|0)>0){S=0;do h=$0(h,d)|0,d=Z()|0,S=S+1|0;while((S|0)!=(m|0))}while(!1);return f[v>>2]=((f[v>>2]|0)+m|0)%6|0,fe=x,f[fe>>2]=h,f[fe+4>>2]=d,fe=0,fe|0}function ds(h,d,m,v){return h=h|0,d=d|0,m=m|0,v=v|0,jl(h,d,m,v)|0?(Lo(v|0,0,m*48|0)|0,v=js(h,d,m,v)|0,v|0):(v=0,v|0)}function jl(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0;if(fe=Y,Y=Y+16|0,he=fe,ce=fe+8|0,ne=he,f[ne>>2]=h,f[ne+4>>2]=d,(m|0)<0)return ce=2,Y=fe,ce|0;if(!m)return ce=v,f[ce>>2]=h,f[ce+4>>2]=d,ce=0,Y=fe,ce|0;f[ce>>2]=0;e:do if(Ci(h,d)|0)h=9;else{x=0,ne=h;do{if(h=Ai(ne,d,4,ce,he)|0,h|0)break e;if(d=he,ne=f[d>>2]|0,d=f[d+4>>2]|0,x=x+1|0,Ci(ne,d)|0){h=9;break e}}while((x|0)<(m|0));W=v,f[W>>2]=ne,f[W+4>>2]=d,W=m+-1|0,V=0,h=1;do{if(x=26800+(V<<2)|0,(V|0)==5)for(R=f[x>>2]|0,S=0,x=h;;){if(h=he,h=Ai(f[h>>2]|0,f[h+4>>2]|0,R,ce,he)|0,h|0)break e;if((S|0)!=(W|0))if(L=he,C=f[L>>2]|0,L=f[L+4>>2]|0,h=v+(x<<3)|0,f[h>>2]=C,f[h+4>>2]=L,!(Ci(C,L)|0))h=x+1|0;else{h=9;break e}else h=x;if(S=S+1|0,(S|0)>=(m|0))break;x=h}else for(R=he,L=f[x>>2]|0,C=0,x=h,S=f[R>>2]|0,R=f[R+4>>2]|0;;){if(h=Ai(S,R,L,ce,he)|0,h|0)break e;if(R=he,S=f[R>>2]|0,R=f[R+4>>2]|0,h=v+(x<<3)|0,f[h>>2]=S,f[h+4>>2]=R,h=x+1|0,Ci(S,R)|0){h=9;break e}if(C=C+1|0,(C|0)>=(m|0))break;x=h}V=V+1|0}while(V>>>0<6);h=he,h=(ne|0)==(f[h>>2]|0)&&(d|0)==(f[h+4>>2]|0)?0:9}while(!1);return ce=h,Y=fe,ce|0}function js(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0;if(ne=Y,Y=Y+16|0,R=ne,!m)return f[v>>2]=h,f[v+4>>2]=d,v=0,Y=ne,v|0;do if((m|0)>=0){if((m|0)>13780509){if(x=so(15,R)|0,x|0)break;S=R,x=f[S>>2]|0,S=f[S+4>>2]|0}else x=((m|0)<0)<<31>>31,W=wr(m|0,x|0,3,0)|0,S=Z()|0,x=fn(m|0,x|0,1,0)|0,x=wr(W|0,S|0,x|0,Z()|0)|0,x=fn(x|0,Z()|0,1,0)|0,S=Z()|0,W=R,f[W>>2]=x,f[W+4>>2]=S;if(V=Cs(x,8)|0,!V)x=13;else{if(W=Cs(x,4)|0,!W){An(V),x=13;break}if(x=ir(h,d,m,V,W,x,S,0)|0,x|0){An(V),An(W);break}if(d=f[R>>2]|0,R=f[R+4>>2]|0,(R|0)>0|(R|0)==0&d>>>0>0){x=0,C=0,L=0;do h=V+(C<<3)|0,S=f[h>>2]|0,h=f[h+4>>2]|0,!((S|0)==0&(h|0)==0)&&(f[W+(C<<2)>>2]|0)==(m|0)&&(he=v+(x<<3)|0,f[he>>2]=S,f[he+4>>2]=h,x=x+1|0),C=fn(C|0,L|0,1,0)|0,L=Z()|0;while((L|0)<(R|0)|(L|0)==(R|0)&C>>>0<d>>>0)}An(V),An(W),x=0}}else x=2;while(!1);return he=x,Y=ne,he|0}function _3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0;for(C=Y,Y=Y+16|0,S=C,R=C+8|0,x=(Ci(h,d)|0)==0,x=x?1:2;;){if(f[R>>2]=0,V=(Ai(h,d,x,R,S)|0)==0,L=S,V&((f[L>>2]|0)==(m|0)?(f[L+4>>2]|0)==(v|0):0)){h=4;break}if(x=x+1|0,x>>>0>=7){x=7,h=4;break}}return(h|0)==4?(Y=C,x|0):0}function x3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0;if(C=Y,Y=Y+48|0,x=C+16|0,S=C+8|0,R=C,m=eu(m)|0,m|0)return R=m,Y=C,R|0;if(V=h,L=f[V+4>>2]|0,m=S,f[m>>2]=f[V>>2],f[m+4>>2]=L,G8(S,x),m=g8(x,d,R)|0,!m){if(d=f[S>>2]|0,S=f[h+8>>2]|0,(S|0)>0){x=f[h+12>>2]|0,m=0;do d=(f[x+(m<<3)>>2]|0)+d|0,m=m+1|0;while((m|0)<(S|0))}m=R,x=f[m>>2]|0,m=f[m+4>>2]|0,S=((d|0)<0)<<31>>31,(m|0)<(S|0)|(m|0)==(S|0)&x>>>0<d>>>0?(m=R,f[m>>2]=d,f[m+4>>2]=S,m=S):d=x,L=fn(d|0,m|0,12,0)|0,V=Z()|0,m=R,f[m>>2]=L,f[m+4>>2]=V,m=v,f[m>>2]=L,f[m+4>>2]=V,m=0}return V=m,Y=C,V|0}function e2(h,d,m,v,x,S,R){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,S=S|0,R=R|0;var C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0,Cn=0,Nn=0,tn=0,Qt=0,ct=0,jn=0,Ni=0,pn=0,pi=0,Ns=0,df=0;if(Ni=Y,Y=Y+64|0,tn=Ni+48|0,Qt=Ni+32|0,ct=Ni+24|0,mt=Ni+8|0,sn=Ni,L=f[h>>2]|0,(L|0)<=0)return jn=0,Y=Ni,jn|0;for(Xt=h+4|0,Ln=tn+8|0,Cn=Qt+8|0,Nn=mt+8|0,C=0,Re=0;;){V=f[Xt>>2]|0,De=V+(Re<<4)|0,f[tn>>2]=f[De>>2],f[tn+4>>2]=f[De+4>>2],f[tn+8>>2]=f[De+8>>2],f[tn+12>>2]=f[De+12>>2],(Re|0)==(L+-1|0)?(f[Qt>>2]=f[V>>2],f[Qt+4>>2]=f[V+4>>2],f[Qt+8>>2]=f[V+8>>2],f[Qt+12>>2]=f[V+12>>2]):(De=V+(Re+1<<4)|0,f[Qt>>2]=f[De>>2],f[Qt+4>>2]=f[De+4>>2],f[Qt+8>>2]=f[De+8>>2],f[Qt+12>>2]=f[De+12>>2]),L=V7(tn,Qt,v,ct)|0;e:do if(L)V=0,C=L;else if(L=ct,V=f[L>>2]|0,L=f[L+4>>2]|0,(L|0)>0|(L|0)==0&V>>>0>0){Fe=0,De=0;t:for(;;){if(pi=1/(+(V>>>0)+4294967296*+(L|0)),df=+Q[tn>>3],L=Hr(V|0,L|0,Fe|0,De|0)|0,Ns=+(L>>>0)+4294967296*+(Z()|0),pn=+(Fe>>>0)+4294967296*+(De|0),Q[mt>>3]=pi*(df*Ns)+pi*(+Q[Qt>>3]*pn),Q[Nn>>3]=pi*(+Q[Ln>>3]*Ns)+pi*(+Q[Cn>>3]*pn),L=v0(mt,v,sn)|0,L|0){C=L;break}Me=sn,_e=f[Me>>2]|0,Me=f[Me+4>>2]|0,he=b0(_e|0,Me|0,d|0,m|0)|0,W=Z()|0,L=R+(he<<3)|0,ne=L,V=f[ne>>2]|0,ne=f[ne+4>>2]|0;n:do if((V|0)==0&(ne|0)==0)xe=L,jn=16;else for(ce=0,fe=0;;){if((ce|0)>(m|0)|(ce|0)==(m|0)&fe>>>0>d>>>0){C=1;break t}if((V|0)==(_e|0)&(ne|0)==(Me|0))break n;if(L=fn(he|0,W|0,1,0)|0,he=iu(L|0,Z()|0,d|0,m|0)|0,W=Z()|0,fe=fn(fe|0,ce|0,1,0)|0,ce=Z()|0,L=R+(he<<3)|0,ne=L,V=f[ne>>2]|0,ne=f[ne+4>>2]|0,(V|0)==0&(ne|0)==0){xe=L,jn=16;break}}while(!1);if((jn|0)==16&&(jn=0,!((_e|0)==0&(Me|0)==0))&&(fe=xe,f[fe>>2]=_e,f[fe+4>>2]=Me,fe=S+(f[x>>2]<<3)|0,f[fe>>2]=_e,f[fe+4>>2]=Me,fe=x,fe=fn(f[fe>>2]|0,f[fe+4>>2]|0,1,0)|0,_e=Z()|0,Me=x,f[Me>>2]=fe,f[Me+4>>2]=_e),Fe=fn(Fe|0,De|0,1,0)|0,De=Z()|0,L=ct,V=f[L>>2]|0,L=f[L+4>>2]|0,!((L|0)>(De|0)|(L|0)==(De|0)&V>>>0>Fe>>>0)){V=1;break e}}V=0}else V=1;while(!1);if(Re=Re+1|0,!V){jn=21;break}if(L=f[h>>2]|0,(Re|0)>=(L|0)){C=0,jn=21;break}}return(jn|0)==21?(Y=Ni,C|0):0}function B7(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0,Cn=0,Nn=0,tn=0,Qt=0,ct=0,jn=0,Ni=0,pn=0,pi=0,Ns=0;if(Ns=Y,Y=Y+112|0,jn=Ns+80|0,L=Ns+72|0,Ni=Ns,pn=Ns+56|0,x=eu(m)|0,x|0)return pi=x,Y=Ns,pi|0;if(V=h+8|0,pi=oo((f[V>>2]<<5)+32|0)|0,!pi)return pi=13,Y=Ns,pi|0;if(k3(h,pi),x=eu(m)|0,!x){if(Qt=h,ct=f[Qt+4>>2]|0,x=L,f[x>>2]=f[Qt>>2],f[x+4>>2]=ct,G8(L,jn),x=g8(jn,d,Ni)|0,x)Qt=0,ct=0;else{if(x=f[L>>2]|0,S=f[V>>2]|0,(S|0)>0){R=f[h+12>>2]|0,m=0;do x=(f[R+(m<<3)>>2]|0)+x|0,m=m+1|0;while((m|0)!=(S|0));m=x}else m=x;x=Ni,S=f[x>>2]|0,x=f[x+4>>2]|0,R=((m|0)<0)<<31>>31,(x|0)<(R|0)|(x|0)==(R|0)&S>>>0<m>>>0?(x=Ni,f[x>>2]=m,f[x+4>>2]=R,x=R):m=S,Qt=fn(m|0,x|0,12,0)|0,ct=Z()|0,x=Ni,f[x>>2]=Qt,f[x+4>>2]=ct,x=0}if(!x){if(m=Cs(Qt,8)|0,!m)return An(pi),pi=13,Y=Ns,pi|0;if(C=Cs(Qt,8)|0,!C)return An(pi),An(m),pi=13,Y=Ns,pi|0;Nn=jn,f[Nn>>2]=0,f[Nn+4>>2]=0,Nn=h,tn=f[Nn+4>>2]|0,x=L,f[x>>2]=f[Nn>>2],f[x+4>>2]=tn,x=e2(L,Qt,ct,d,jn,m,C)|0;e:do if(x)An(m),An(C),An(pi);else{t:do if((f[V>>2]|0)>0){for(R=h+12|0,S=0;x=e2((f[R>>2]|0)+(S<<3)|0,Qt,ct,d,jn,m,C)|0,S=S+1|0,!(x|0);)if((S|0)>=(f[V>>2]|0))break t;An(m),An(C),An(pi);break e}while(!1);(ct|0)>0|(ct|0)==0&Qt>>>0>0&&Lo(C|0,0,Qt<<3|0)|0,tn=jn,Nn=f[tn+4>>2]|0;t:do if((Nn|0)>0|(Nn|0)==0&(f[tn>>2]|0)>>>0>0){Xt=m,Ln=C,Cn=m,Nn=C,tn=m,x=m,xe=m,mt=C,sn=C,m=C;n:for(;;){for(Me=0,Fe=0,De=0,Re=0,S=0,R=0;;){C=Ni,L=C+56|0;do f[C>>2]=0,C=C+4|0;while((C|0)<(L|0));if(d=Xt+(Me<<3)|0,V=f[d>>2]|0,d=f[d+4>>2]|0,fs(V,d,1,Ni,0)|0){C=Ni,L=C+56|0;do f[C>>2]=0,C=C+4|0;while((C|0)<(L|0));C=Cs(7,4)|0,C|0&&(ir(V,d,1,Ni,C,7,0,0)|0,An(C))}for(_e=0;;){fe=Ni+(_e<<3)|0,ce=f[fe>>2]|0,fe=f[fe+4>>2]|0;i:do if((ce|0)==0&(fe|0)==0)C=S,L=R;else{if(W=b0(ce|0,fe|0,Qt|0,ct|0)|0,V=Z()|0,C=v+(W<<3)|0,d=C,L=f[d>>2]|0,d=f[d+4>>2]|0,!((L|0)==0&(d|0)==0)){ne=0,he=0;do{if((ne|0)>(ct|0)|(ne|0)==(ct|0)&he>>>0>Qt>>>0)break n;if((L|0)==(ce|0)&(d|0)==(fe|0)){C=S,L=R;break i}C=fn(W|0,V|0,1,0)|0,W=iu(C|0,Z()|0,Qt|0,ct|0)|0,V=Z()|0,he=fn(he|0,ne|0,1,0)|0,ne=Z()|0,C=v+(W<<3)|0,d=C,L=f[d>>2]|0,d=f[d+4>>2]|0}while(!((L|0)==0&(d|0)==0))}if((ce|0)==0&(fe|0)==0){C=S,L=R;break}K0(ce,fe,pn)|0,A2(h,pi,pn)|0&&(he=fn(S|0,R|0,1,0)|0,R=Z()|0,ne=C,f[ne>>2]=ce,f[ne+4>>2]=fe,S=Ln+(S<<3)|0,f[S>>2]=ce,f[S+4>>2]=fe,S=he),C=S,L=R}while(!1);if(_e=_e+1|0,_e>>>0>=7)break;S=C,R=L}if(Me=fn(Me|0,Fe|0,1,0)|0,Fe=Z()|0,De=fn(De|0,Re|0,1,0)|0,Re=Z()|0,R=jn,S=f[R>>2]|0,R=f[R+4>>2]|0,(Re|0)<(R|0)|(Re|0)==(R|0)&De>>>0<S>>>0)S=C,R=L;else break}if((R|0)>0|(R|0)==0&S>>>0>0){S=0,R=0;do Re=Xt+(S<<3)|0,f[Re>>2]=0,f[Re+4>>2]=0,S=fn(S|0,R|0,1,0)|0,R=Z()|0,Re=jn,De=f[Re+4>>2]|0;while((R|0)<(De|0)|((R|0)==(De|0)?S>>>0<(f[Re>>2]|0)>>>0:0))}if(Re=jn,f[Re>>2]=C,f[Re+4>>2]=L,(L|0)>0|(L|0)==0&C>>>0>0)_e=m,Me=sn,Fe=tn,De=mt,Re=Ln,m=xe,sn=x,mt=Cn,xe=_e,x=Me,tn=Nn,Nn=Fe,Cn=De,Ln=Xt,Xt=Re;else break t}An(Cn),An(Nn),An(pi),x=1;break e}else x=C;while(!1);An(pi),An(m),An(x),x=0}while(!1);return pi=x,Y=Ns,pi|0}}return An(pi),pi=x,Y=Ns,pi|0}function h8(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(W=Y,Y=Y+176|0,L=W,(d|0)<1)return X3(m,0,0),V=0,Y=W,V|0;for(C=h,C=lt(f[C>>2]|0,f[C+4>>2]|0,52)|0,Z()|0,X3(m,(d|0)>6?d:6,C&15),C=0;v=h+(C<<3)|0,v=Ql(f[v>>2]|0,f[v+4>>2]|0,L)|0,!(v|0);){if(v=f[L>>2]|0,(v|0)>0){R=0;do S=L+8+(R<<4)|0,R=R+1|0,v=L+8+(((R|0)%(v|0)|0)<<4)|0,x=hf(m,v,S)|0,x?p2(m,x)|0:Zl(m,S,v)|0,v=f[L>>2]|0;while((R|0)<(v|0))}if(C=C+1|0,(C|0)>=(d|0)){v=0,V=13;break}}return(V|0)==13?(Y=W,v|0):(x0(m),V=v,Y=W,V|0)}function L7(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0;if(S=Y,Y=Y+32|0,v=S,x=S+16|0,h=h8(h,d,x)|0,h|0)return m=h,Y=S,m|0;if(f[m>>2]=0,f[m+4>>2]=0,f[m+8>>2]=0,h=H8(x)|0,h|0)do{d=tf(m)|0;do z3(d,h)|0,R=h+16|0,f[v>>2]=f[R>>2],f[v+4>>2]=f[R+4>>2],f[v+8>>2]=f[R+8>>2],f[v+12>>2]=f[R+12>>2],p2(x,h)|0,h=W8(x,v)|0;while((h|0)!=0);h=H8(x)|0}while((h|0)!=0);return x0(x),h=U8(m)|0,h?(I8(m),R=h,Y=S,R|0):(R=0,Y=S,R|0)}function ki(h){return h=h|0,h>>>0>121?(h=0,h|0):(h=f[7696+(h*28|0)+16>>2]|0,h|0)}function b3(h){return h=h|0,(h|0)==4|(h|0)==117|0}function f8(h){return h=h|0,f[11120+((f[h>>2]|0)*216|0)+((f[h+4>>2]|0)*72|0)+((f[h+8>>2]|0)*24|0)+(f[h+12>>2]<<3)>>2]|0}function d8(h){return h=h|0,f[11120+((f[h>>2]|0)*216|0)+((f[h+4>>2]|0)*72|0)+((f[h+8>>2]|0)*24|0)+(f[h+12>>2]<<3)+4>>2]|0}function I7(h,d){h=h|0,d=d|0,h=7696+(h*28|0)|0,f[d>>2]=f[h>>2],f[d+4>>2]=f[h+4>>2],f[d+8>>2]=f[h+8>>2],f[d+12>>2]=f[h+12>>2]}function U7(h,d){h=h|0,d=d|0;var m=0,v=0;if(d>>>0>20)return d=-1,d|0;do if((f[11120+(d*216|0)>>2]|0)!=(h|0))if((f[11120+(d*216|0)+8>>2]|0)!=(h|0))if((f[11120+(d*216|0)+16>>2]|0)!=(h|0))if((f[11120+(d*216|0)+24>>2]|0)!=(h|0))if((f[11120+(d*216|0)+32>>2]|0)!=(h|0))if((f[11120+(d*216|0)+40>>2]|0)!=(h|0))if((f[11120+(d*216|0)+48>>2]|0)!=(h|0))if((f[11120+(d*216|0)+56>>2]|0)!=(h|0))if((f[11120+(d*216|0)+64>>2]|0)!=(h|0))if((f[11120+(d*216|0)+72>>2]|0)!=(h|0))if((f[11120+(d*216|0)+80>>2]|0)!=(h|0))if((f[11120+(d*216|0)+88>>2]|0)!=(h|0))if((f[11120+(d*216|0)+96>>2]|0)!=(h|0))if((f[11120+(d*216|0)+104>>2]|0)!=(h|0))if((f[11120+(d*216|0)+112>>2]|0)!=(h|0))if((f[11120+(d*216|0)+120>>2]|0)!=(h|0))if((f[11120+(d*216|0)+128>>2]|0)!=(h|0))if((f[11120+(d*216|0)+136>>2]|0)==(h|0))h=2,m=1,v=2;else{if((f[11120+(d*216|0)+144>>2]|0)==(h|0)){h=0,m=2,v=0;break}if((f[11120+(d*216|0)+152>>2]|0)==(h|0)){h=0,m=2,v=1;break}if((f[11120+(d*216|0)+160>>2]|0)==(h|0)){h=0,m=2,v=2;break}if((f[11120+(d*216|0)+168>>2]|0)==(h|0)){h=1,m=2,v=0;break}if((f[11120+(d*216|0)+176>>2]|0)==(h|0)){h=1,m=2,v=1;break}if((f[11120+(d*216|0)+184>>2]|0)==(h|0)){h=1,m=2,v=2;break}if((f[11120+(d*216|0)+192>>2]|0)==(h|0)){h=2,m=2,v=0;break}if((f[11120+(d*216|0)+200>>2]|0)==(h|0)){h=2,m=2,v=1;break}if((f[11120+(d*216|0)+208>>2]|0)==(h|0)){h=2,m=2,v=2;break}else h=-1;return h|0}else h=2,m=1,v=1;else h=2,m=1,v=0;else h=1,m=1,v=2;else h=1,m=1,v=1;else h=1,m=1,v=0;else h=0,m=1,v=2;else h=0,m=1,v=1;else h=0,m=1,v=0;else h=2,m=0,v=2;else h=2,m=0,v=1;else h=2,m=0,v=0;else h=1,m=0,v=2;else h=1,m=0,v=1;else h=1,m=0,v=0;else h=0,m=0,v=2;else h=0,m=0,v=1;else h=0,m=0,v=0;while(!1);return d=f[11120+(d*216|0)+(m*72|0)+(h*24|0)+(v<<3)+4>>2]|0,d|0}function S3(h,d){return h=h|0,d=d|0,(f[7696+(h*28|0)+20>>2]|0)==(d|0)?(d=1,d|0):(d=(f[7696+(h*28|0)+24>>2]|0)==(d|0),d|0)}function T3(h,d){return h=h|0,d=d|0,f[848+(h*28|0)+(d<<2)>>2]|0}function M3(h,d){return h=h|0,d=d|0,(f[848+(h*28|0)>>2]|0)==(d|0)?(d=0,d|0):(f[848+(h*28|0)+4>>2]|0)==(d|0)?(d=1,d|0):(f[848+(h*28|0)+8>>2]|0)==(d|0)?(d=2,d|0):(f[848+(h*28|0)+12>>2]|0)==(d|0)?(d=3,d|0):(f[848+(h*28|0)+16>>2]|0)==(d|0)?(d=4,d|0):(f[848+(h*28|0)+20>>2]|0)==(d|0)?(d=5,d|0):((f[848+(h*28|0)+24>>2]|0)==(d|0)?6:7)|0}function O7(){return 122}function A8(h){h=h|0;var d=0,m=0,v=0;d=0;do St(d|0,0,45)|0,v=Z()|0|134225919,m=h+(d<<3)|0,f[m>>2]=-1,f[m+4>>2]=v,d=d+1|0;while((d|0)!=122);return 0}function F7(h){h=h|0;var d=0,m=0,v=0;return v=+Q[h+16>>3],m=+Q[h+24>>3],d=v-m,+(v<m?d+6.283185307179586:d)}function p8(h){return h=h|0,+Q[h+16>>3]<+Q[h+24>>3]|0}function xm(h){return h=h|0,+(+Q[h>>3]-+Q[h+8>>3])}function m8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0;return m=+Q[d>>3],!(m>=+Q[h+8>>3])||!(m<=+Q[h>>3])?(d=0,d|0):(v=+Q[h+16>>3],m=+Q[h+24>>3],x=+Q[d+8>>3],d=x>=m,h=x<=v&1,v<m?d&&(h=1):d||(h=0),d=(h|0)!=0,d|0)}function E3(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;return+Q[h>>3]<+Q[d+8>>3]||+Q[h+8>>3]>+Q[d>>3]?(v=0,v|0):(S=+Q[h+16>>3],m=h+24|0,W=+Q[m>>3],R=S<W,v=d+16|0,V=+Q[v>>3],x=d+24|0,L=+Q[x>>3],C=V<L,d=W-V<L-S,h=R?C|d?1:2:0,d=C?R?1:d?2:1:0,S=+ws(S,h),S<+ws(+Q[x>>3],d)||(W=+ws(+Q[m>>3],h),W>+ws(+Q[v>>3],d))?(C=0,C|0):(C=1,C|0))}function t2(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0;S=+Q[h+16>>3],L=+Q[h+24>>3],h=S<L,C=+Q[d+16>>3],R=+Q[d+24>>3],x=C<R,d=L-C<R-S,f[m>>2]=h?x|d?1:2:0,f[v>>2]=x?h?1:d?2:1:0}function w3(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;return+Q[h>>3]<+Q[d>>3]||+Q[h+8>>3]>+Q[d+8>>3]?(v=0,v|0):(v=h+16|0,L=+Q[v>>3],S=+Q[h+24>>3],R=L<S,m=d+16|0,W=+Q[m>>3],x=d+24|0,V=+Q[x>>3],C=W<V,d=S-W<V-L,h=R?C|d?1:2:0,d=C?R?1:d?2:1:0,S=+ws(S,h),S<=+ws(+Q[x>>3],d)?(W=+ws(+Q[v>>3],h),C=W>=+ws(+Q[m>>3],d),C|0):(C=0,C|0))}function n2(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0;x=Y,Y=Y+176|0,v=x,f[v>>2]=4,C=+Q[d>>3],Q[v+8>>3]=C,S=+Q[d+16>>3],Q[v+16>>3]=S,Q[v+24>>3]=C,C=+Q[d+24>>3],Q[v+32>>3]=C,R=+Q[d+8>>3],Q[v+40>>3]=R,Q[v+48>>3]=C,Q[v+56>>3]=R,Q[v+64>>3]=S,d=v+72|0,m=d+96|0;do f[d>>2]=0,d=d+4|0;while((d|0)<(m|0));il(h|0,v|0,168)|0,Y=x}function g8(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0;fe=Y,Y=Y+288|0,W=fe+264|0,ne=fe+96|0,V=fe,C=V,L=C+96|0;do f[C>>2]=0,C=C+4|0;while((C|0)<(L|0));return d=F3(d,V)|0,d|0?(ce=d,Y=fe,ce|0):(L=V,V=f[L>>2]|0,L=f[L+4>>2]|0,K0(V,L,W)|0,Ql(V,L,ne)|0,R=+K1(W,ne+8|0),Q[W>>3]=+Q[h>>3],L=W+8|0,Q[L>>3]=+Q[h+16>>3],Q[ne>>3]=+Q[h+8>>3],V=ne+8|0,Q[V>>3]=+Q[h+24>>3],x=+K1(W,ne),Me=+Q[L>>3]-+Q[V>>3],S=+Bn(+Me),_e=+Q[W>>3]-+Q[ne>>3],v=+Bn(+_e),!(Me==0|_e==0)&&(Me=+ff(+S,+v),Me=+Ge(+(x*x/+m2(+(Me/+m2(+S,+v)),3)/(R*(R*2.59807621135)*.8))),Q[Gn>>3]=Me,he=~~Me>>>0,ce=+Bn(Me)>=1?Me>0?~~+_t(+$n(Me/4294967296),4294967295)>>>0:~~+Ge((Me-+(~~Me>>>0))/4294967296)>>>0:0,(f[Gn+4>>2]&2146435072|0)!=2146435072)?(ne=(he|0)==0&(ce|0)==0,d=m,f[d>>2]=ne?1:he,f[d+4>>2]=ne?0:ce,d=0):d=1,ce=d,Y=fe,ce|0)}function V7(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0;V=Y,Y=Y+288|0,R=V+264|0,C=V+96|0,L=V,x=L,S=x+96|0;do f[x>>2]=0,x=x+4|0;while((x|0)<(S|0));return m=F3(m,L)|0,m|0?(v=m,Y=V,v|0):(m=L,x=f[m>>2]|0,m=f[m+4>>2]|0,K0(x,m,R)|0,Ql(x,m,C)|0,W=+K1(R,C+8|0),W=+Ge(+(+K1(h,d)/(W*2))),Q[Gn>>3]=W,m=~~W>>>0,x=+Bn(W)>=1?W>0?~~+_t(+$n(W/4294967296),4294967295)>>>0:~~+Ge((W-+(~~W>>>0))/4294967296)>>>0:0,(f[Gn+4>>2]&2146435072|0)==2146435072?(v=1,Y=V,v|0):(L=(m|0)==0&(x|0)==0,f[v>>2]=L?1:m,f[v+4>>2]=L?0:x,v=0,Y=V,v|0))}function y8(h,d){h=h|0,d=+d;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;S=h+16|0,R=+Q[S>>3],m=h+24|0,x=+Q[m>>3],v=R-x,v=R<x?v+6.283185307179586:v,V=+Q[h>>3],C=h+8|0,L=+Q[C>>3],W=V-L,v=(v*d-v)*.5,d=(W*d-W)*.5,V=V+d,Q[h>>3]=V>1.5707963267948966?1.5707963267948966:V,d=L-d,Q[C>>3]=d<-1.5707963267948966?-1.5707963267948966:d,d=R+v,d=d>3.141592653589793?d+-6.283185307179586:d,Q[S>>3]=d<-3.141592653589793?d+6.283185307179586:d,d=x-v,d=d>3.141592653589793?d+-6.283185307179586:d,Q[m>>3]=d<-3.141592653589793?d+6.283185307179586:d}function z7(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0,f[h>>2]=d,f[h+4>>2]=m,f[h+8>>2]=v}function G7(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0;ne=d+8|0,f[ne>>2]=0,L=+Q[h>>3],R=+Bn(+L),V=+Q[h+8>>3],C=+Bn(+V)*1.1547005383792515,R=R+C*.5,m=~~R,h=~~C,R=R-+(m|0),C=C-+(h|0);do if(R<.5)if(R<.3333333333333333)if(f[d>>2]=m,C<(R+1)*.5){f[d+4>>2]=h;break}else{h=h+1|0,f[d+4>>2]=h;break}else if(he=1-R,h=(!(C<he)&1)+h|0,f[d+4>>2]=h,he<=C&C<R*2){m=m+1|0,f[d>>2]=m;break}else{f[d>>2]=m;break}else{if(!(R<.6666666666666666))if(m=m+1|0,f[d>>2]=m,C<R*.5){f[d+4>>2]=h;break}else{h=h+1|0,f[d+4>>2]=h;break}if(C<1-R){if(f[d+4>>2]=h,R*2+-1<C){f[d>>2]=m;break}}else h=h+1|0,f[d+4>>2]=h;m=m+1|0,f[d>>2]=m}while(!1);do if(L<0)if(h&1){W=(h+1|0)/2|0,W=Hr(m|0,((m|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,m=~~(+(m|0)-((+(W>>>0)+4294967296*+(Z()|0))*2+1)),f[d>>2]=m;break}else{W=(h|0)/2|0,W=Hr(m|0,((m|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,m=~~(+(m|0)-(+(W>>>0)+4294967296*+(Z()|0))*2),f[d>>2]=m;break}while(!1);W=d+4|0,V<0&&(m=m-((h<<1|1|0)/2|0)|0,f[d>>2]=m,h=0-h|0,f[W>>2]=h),v=h-m|0,(m|0)<0?(x=0-m|0,f[W>>2]=v,f[ne>>2]=x,f[d>>2]=0,h=v,m=0):x=0,(h|0)<0&&(m=m-h|0,f[d>>2]=m,x=x-h|0,f[ne>>2]=x,f[W>>2]=0,h=0),S=m-x|0,v=h-x|0,(x|0)<0&&(f[d>>2]=S,f[W>>2]=v,f[ne>>2]=0,h=v,m=S,x=0),v=(h|0)<(m|0)?h:m,v=(x|0)<(v|0)?x:v,!((v|0)<=0)&&(f[d>>2]=m-v,f[W>>2]=h-v,f[ne>>2]=x-v)}function yr(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0;d=f[h>>2]|0,R=h+4|0,m=f[R>>2]|0,(d|0)<0&&(m=m-d|0,f[R>>2]=m,S=h+8|0,f[S>>2]=(f[S>>2]|0)-d,f[h>>2]=0,d=0),(m|0)<0?(d=d-m|0,f[h>>2]=d,S=h+8|0,x=(f[S>>2]|0)-m|0,f[S>>2]=x,f[R>>2]=0,m=0):(x=h+8|0,S=x,x=f[x>>2]|0),(x|0)<0&&(d=d-x|0,f[h>>2]=d,m=m-x|0,f[R>>2]=m,f[S>>2]=0,x=0),v=(m|0)<(d|0)?m:d,v=(x|0)<(v|0)?x:v,!((v|0)<=0)&&(f[h>>2]=d-v,f[R>>2]=m-v,f[S>>2]=x-v)}function Po(h,d){h=h|0,d=d|0;var m=0,v=0;v=f[h+8>>2]|0,m=+((f[h+4>>2]|0)-v|0),Q[d>>3]=+((f[h>>2]|0)-v|0)-m*.5,Q[d+8>>3]=m*.8660254037844386}function As(h,d,m){h=h|0,d=d|0,m=m|0,f[m>>2]=(f[d>>2]|0)+(f[h>>2]|0),f[m+4>>2]=(f[d+4>>2]|0)+(f[h+4>>2]|0),f[m+8>>2]=(f[d+8>>2]|0)+(f[h+8>>2]|0)}function i2(h,d,m){h=h|0,d=d|0,m=m|0,f[m>>2]=(f[h>>2]|0)-(f[d>>2]|0),f[m+4>>2]=(f[h+4>>2]|0)-(f[d+4>>2]|0),f[m+8>>2]=(f[h+8>>2]|0)-(f[d+8>>2]|0)}function v8(h,d){h=h|0,d=d|0;var m=0,v=0;m=we(f[h>>2]|0,d)|0,f[h>>2]=m,m=h+4|0,v=we(f[m>>2]|0,d)|0,f[m>>2]=v,h=h+8|0,d=we(f[h>>2]|0,d)|0,f[h>>2]=d}function r2(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;R=f[h>>2]|0,C=(R|0)<0,v=(f[h+4>>2]|0)-(C?R:0)|0,S=(v|0)<0,x=(S?0-v|0:0)+((f[h+8>>2]|0)-(C?R:0))|0,m=(x|0)<0,h=m?0:x,d=(S?0:v)-(m?x:0)|0,x=(C?0:R)-(S?v:0)-(m?x:0)|0,m=(d|0)<(x|0)?d:x,m=(h|0)<(m|0)?h:m,v=(m|0)>0,h=h-(v?m:0)|0,d=d-(v?m:0)|0;e:do switch(x-(v?m:0)|0){case 0:switch(d|0){case 0:return C=(h|0)==0?0:(h|0)==1?1:7,C|0;case 1:return C=(h|0)==0?2:(h|0)==1?3:7,C|0;default:break e}case 1:switch(d|0){case 0:return C=(h|0)==0?4:(h|0)==1?5:7,C|0;case 1:{if(!h)h=6;else break e;return h|0}default:break e}}while(!1);return C=7,C|0}function bm(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0;if(L=h+8|0,R=f[L>>2]|0,C=(f[h>>2]|0)-R|0,V=h+4|0,R=(f[V>>2]|0)-R|0,C>>>0>715827881|R>>>0>715827881){if(v=(C|0)>0,x=2147483647-C|0,S=-2147483648-C|0,(v?(x|0)<(C|0):(S|0)>(C|0))||(m=C<<1,v?(2147483647-m|0)<(C|0):(-2147483648-m|0)>(C|0))||((R|0)>0?(2147483647-R|0)<(R|0):(-2147483648-R|0)>(R|0))||(d=C*3|0,m=R<<1,(v?(x|0)<(m|0):(S|0)>(m|0))||((C|0)>-1?(d|-2147483648|0)>=(R|0):(d^-2147483648|0)<(R|0))))return V=1,V|0}else m=R<<1,d=C*3|0;return v=tl(+(d-R|0)*.14285714285714285)|0,f[h>>2]=v,x=tl(+(m+C|0)*.14285714285714285)|0,f[V>>2]=x,f[L>>2]=0,m=(x|0)<(v|0),d=m?v:x,m=m?x:v,(m|0)<0&&(((m|0)==-2147483648||((d|0)>0?(2147483647-d|0)<(m|0):(-2147483648-d|0)>(m|0)))&&gt(27795,26892,354,26903),((d|0)>-1?(d|-2147483648|0)>=(m|0):(d^-2147483648|0)<(m|0))&&gt(27795,26892,354,26903)),d=x-v|0,(v|0)<0?(m=0-v|0,f[V>>2]=d,f[L>>2]=m,f[h>>2]=0,v=0):(d=x,m=0),(d|0)<0&&(v=v-d|0,f[h>>2]=v,m=m-d|0,f[L>>2]=m,f[V>>2]=0,d=0),S=v-m|0,x=d-m|0,(m|0)<0?(f[h>>2]=S,f[V>>2]=x,f[L>>2]=0,d=x,x=S,m=0):x=v,v=(d|0)<(x|0)?d:x,v=(m|0)<(v|0)?m:v,(v|0)<=0?(V=0,V|0):(f[h>>2]=x-v,f[V>>2]=d-v,f[L>>2]=m-v,V=0,V|0)}function es(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0;if(R=h+8|0,x=f[R>>2]|0,S=(f[h>>2]|0)-x|0,C=h+4|0,x=(f[C>>2]|0)-x|0,S>>>0>715827881|x>>>0>715827881){if(m=(S|0)>0,(m?(2147483647-S|0)<(S|0):(-2147483648-S|0)>(S|0))||(d=S<<1,v=(x|0)>0,v?(2147483647-x|0)<(x|0):(-2147483648-x|0)>(x|0)))return C=1,C|0;if(L=x<<1,(v?(2147483647-L|0)<(x|0):(-2147483648-L|0)>(x|0))||(m?(2147483647-d|0)<(x|0):(-2147483648-d|0)>(x|0))||(m=x*3|0,(x|0)>-1?(m|-2147483648|0)>=(S|0):(m^-2147483648|0)<(S|0)))return L=1,L|0}else m=x*3|0,d=S<<1;return v=tl(+(d+x|0)*.14285714285714285)|0,f[h>>2]=v,x=tl(+(m-S|0)*.14285714285714285)|0,f[C>>2]=x,f[R>>2]=0,m=(x|0)<(v|0),d=m?v:x,m=m?x:v,(m|0)<0&&(((m|0)==-2147483648||((d|0)>0?(2147483647-d|0)<(m|0):(-2147483648-d|0)>(m|0)))&&gt(27795,26892,402,26917),((d|0)>-1?(d|-2147483648|0)>=(m|0):(d^-2147483648|0)<(m|0))&&gt(27795,26892,402,26917)),d=x-v|0,(v|0)<0?(m=0-v|0,f[C>>2]=d,f[R>>2]=m,f[h>>2]=0,v=0):(d=x,m=0),(d|0)<0&&(v=v-d|0,f[h>>2]=v,m=m-d|0,f[R>>2]=m,f[C>>2]=0,d=0),S=v-m|0,x=d-m|0,(m|0)<0?(f[h>>2]=S,f[C>>2]=x,f[R>>2]=0,d=x,x=S,m=0):x=v,v=(d|0)<(x|0)?d:x,v=(m|0)<(v|0)?m:v,(v|0)<=0?(L=0,L|0):(f[h>>2]=x-v,f[C>>2]=d-v,f[R>>2]=m-v,L=0,L|0)}function q7(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;R=h+8|0,m=f[R>>2]|0,d=(f[h>>2]|0)-m|0,C=h+4|0,m=(f[C>>2]|0)-m|0,v=tl(+((d*3|0)-m|0)*.14285714285714285)|0,f[h>>2]=v,d=tl(+((m<<1)+d|0)*.14285714285714285)|0,f[C>>2]=d,f[R>>2]=0,m=d-v|0,(v|0)<0?(S=0-v|0,f[C>>2]=m,f[R>>2]=S,f[h>>2]=0,d=m,v=0,m=S):m=0,(d|0)<0&&(v=v-d|0,f[h>>2]=v,m=m-d|0,f[R>>2]=m,f[C>>2]=0,d=0),S=v-m|0,x=d-m|0,(m|0)<0?(f[h>>2]=S,f[C>>2]=x,f[R>>2]=0,d=x,x=S,m=0):x=v,v=(d|0)<(x|0)?d:x,v=(m|0)<(v|0)?m:v,!((v|0)<=0)&&(f[h>>2]=x-v,f[C>>2]=d-v,f[R>>2]=m-v)}function _8(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;R=h+8|0,m=f[R>>2]|0,d=(f[h>>2]|0)-m|0,C=h+4|0,m=(f[C>>2]|0)-m|0,v=tl(+((d<<1)+m|0)*.14285714285714285)|0,f[h>>2]=v,d=tl(+((m*3|0)-d|0)*.14285714285714285)|0,f[C>>2]=d,f[R>>2]=0,m=d-v|0,(v|0)<0?(S=0-v|0,f[C>>2]=m,f[R>>2]=S,f[h>>2]=0,d=m,v=0,m=S):m=0,(d|0)<0&&(v=v-d|0,f[h>>2]=v,m=m-d|0,f[R>>2]=m,f[C>>2]=0,d=0),S=v-m|0,x=d-m|0,(m|0)<0?(f[h>>2]=S,f[C>>2]=x,f[R>>2]=0,d=x,x=S,m=0):x=v,v=(d|0)<(x|0)?d:x,v=(m|0)<(v|0)?m:v,!((v|0)<=0)&&(f[h>>2]=x-v,f[C>>2]=d-v,f[R>>2]=m-v)}function s2(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;d=f[h>>2]|0,R=h+4|0,m=f[R>>2]|0,C=h+8|0,v=f[C>>2]|0,x=m+(d*3|0)|0,f[h>>2]=x,m=v+(m*3|0)|0,f[R>>2]=m,d=(v*3|0)+d|0,f[C>>2]=d,v=m-x|0,(x|0)<0?(d=d-x|0,f[R>>2]=v,f[C>>2]=d,f[h>>2]=0,m=v,v=0):v=x,(m|0)<0&&(v=v-m|0,f[h>>2]=v,d=d-m|0,f[C>>2]=d,f[R>>2]=0,m=0),S=v-d|0,x=m-d|0,(d|0)<0?(f[h>>2]=S,f[R>>2]=x,f[C>>2]=0,v=S,d=0):x=m,m=(x|0)<(v|0)?x:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=v-m,f[R>>2]=x-m,f[C>>2]=d-m)}function Y0(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;x=f[h>>2]|0,R=h+4|0,d=f[R>>2]|0,C=h+8|0,m=f[C>>2]|0,v=(d*3|0)+x|0,x=m+(x*3|0)|0,f[h>>2]=x,f[R>>2]=v,d=(m*3|0)+d|0,f[C>>2]=d,m=v-x|0,(x|0)<0?(d=d-x|0,f[R>>2]=m,f[C>>2]=d,f[h>>2]=0,x=0):m=v,(m|0)<0&&(x=x-m|0,f[h>>2]=x,d=d-m|0,f[C>>2]=d,f[R>>2]=0,m=0),S=x-d|0,v=m-d|0,(d|0)<0?(f[h>>2]=S,f[R>>2]=v,f[C>>2]=0,x=S,d=0):v=m,m=(v|0)<(x|0)?v:x,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=x-m,f[R>>2]=v-m,f[C>>2]=d-m)}function x8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0;(d+-1|0)>>>0>=6||(x=(f[15440+(d*12|0)>>2]|0)+(f[h>>2]|0)|0,f[h>>2]=x,C=h+4|0,v=(f[15440+(d*12|0)+4>>2]|0)+(f[C>>2]|0)|0,f[C>>2]=v,R=h+8|0,d=(f[15440+(d*12|0)+8>>2]|0)+(f[R>>2]|0)|0,f[R>>2]=d,m=v-x|0,(x|0)<0?(d=d-x|0,f[C>>2]=m,f[R>>2]=d,f[h>>2]=0,v=0):(m=v,v=x),(m|0)<0&&(v=v-m|0,f[h>>2]=v,d=d-m|0,f[R>>2]=d,f[C>>2]=0,m=0),S=v-d|0,x=m-d|0,(d|0)<0?(f[h>>2]=S,f[C>>2]=x,f[R>>2]=0,v=S,d=0):x=m,m=(x|0)<(v|0)?x:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=v-m,f[C>>2]=x-m,f[R>>2]=d-m))}function j1(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;x=f[h>>2]|0,R=h+4|0,d=f[R>>2]|0,C=h+8|0,m=f[C>>2]|0,v=d+x|0,x=m+x|0,f[h>>2]=x,f[R>>2]=v,d=m+d|0,f[C>>2]=d,m=v-x|0,(x|0)<0?(d=d-x|0,f[R>>2]=m,f[C>>2]=d,f[h>>2]=0,v=0):(m=v,v=x),(m|0)<0&&(v=v-m|0,f[h>>2]=v,d=d-m|0,f[C>>2]=d,f[R>>2]=0,m=0),S=v-d|0,x=m-d|0,(d|0)<0?(f[h>>2]=S,f[R>>2]=x,f[C>>2]=0,v=S,d=0):x=m,m=(x|0)<(v|0)?x:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=v-m,f[R>>2]=x-m,f[C>>2]=d-m)}function X1(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;d=f[h>>2]|0,R=h+4|0,v=f[R>>2]|0,C=h+8|0,m=f[C>>2]|0,x=v+d|0,f[h>>2]=x,v=m+v|0,f[R>>2]=v,d=m+d|0,f[C>>2]=d,m=v-x|0,(x|0)<0?(d=d-x|0,f[R>>2]=m,f[C>>2]=d,f[h>>2]=0,v=0):(m=v,v=x),(m|0)<0&&(v=v-m|0,f[h>>2]=v,d=d-m|0,f[C>>2]=d,f[R>>2]=0,m=0),S=v-d|0,x=m-d|0,(d|0)<0?(f[h>>2]=S,f[R>>2]=x,f[C>>2]=0,v=S,d=0):x=m,m=(x|0)<(v|0)?x:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=v-m,f[R>>2]=x-m,f[C>>2]=d-m)}function Q0(h){switch(h=h|0,h|0){case 1:{h=5;break}case 5:{h=4;break}case 4:{h=6;break}case 6:{h=2;break}case 2:{h=3;break}case 3:{h=1;break}}return h|0}function d0(h){switch(h=h|0,h|0){case 1:{h=3;break}case 3:{h=2;break}case 2:{h=6;break}case 6:{h=4;break}case 4:{h=5;break}case 5:{h=1;break}}return h|0}function b8(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;d=f[h>>2]|0,R=h+4|0,m=f[R>>2]|0,C=h+8|0,v=f[C>>2]|0,x=m+(d<<1)|0,f[h>>2]=x,m=v+(m<<1)|0,f[R>>2]=m,d=(v<<1)+d|0,f[C>>2]=d,v=m-x|0,(x|0)<0?(d=d-x|0,f[R>>2]=v,f[C>>2]=d,f[h>>2]=0,m=v,v=0):v=x,(m|0)<0&&(v=v-m|0,f[h>>2]=v,d=d-m|0,f[C>>2]=d,f[R>>2]=0,m=0),S=v-d|0,x=m-d|0,(d|0)<0?(f[h>>2]=S,f[R>>2]=x,f[C>>2]=0,v=S,d=0):x=m,m=(x|0)<(v|0)?x:v,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=v-m,f[R>>2]=x-m,f[C>>2]=d-m)}function R3(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;x=f[h>>2]|0,R=h+4|0,d=f[R>>2]|0,C=h+8|0,m=f[C>>2]|0,v=(d<<1)+x|0,x=m+(x<<1)|0,f[h>>2]=x,f[R>>2]=v,d=(m<<1)+d|0,f[C>>2]=d,m=v-x|0,(x|0)<0?(d=d-x|0,f[R>>2]=m,f[C>>2]=d,f[h>>2]=0,x=0):m=v,(m|0)<0&&(x=x-m|0,f[h>>2]=x,d=d-m|0,f[C>>2]=d,f[R>>2]=0,m=0),S=x-d|0,v=m-d|0,(d|0)<0?(f[h>>2]=S,f[R>>2]=v,f[C>>2]=0,x=S,d=0):v=m,m=(v|0)<(x|0)?v:x,m=(d|0)<(m|0)?d:m,!((m|0)<=0)&&(f[h>>2]=x-m,f[R>>2]=v-m,f[C>>2]=d-m)}function a2(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0;return R=(f[h>>2]|0)-(f[d>>2]|0)|0,C=(R|0)<0,v=(f[h+4>>2]|0)-(f[d+4>>2]|0)-(C?R:0)|0,S=(v|0)<0,x=(C?0-R|0:0)+(f[h+8>>2]|0)-(f[d+8>>2]|0)+(S?0-v|0:0)|0,h=(x|0)<0,d=h?0:x,m=(S?0:v)-(h?x:0)|0,x=(C?0:R)-(S?v:0)-(h?x:0)|0,h=(m|0)<(x|0)?m:x,h=(d|0)<(h|0)?d:h,v=(h|0)>0,d=d-(v?h:0)|0,m=m-(v?h:0)|0,h=x-(v?h:0)|0,h=(h|0)>-1?h:0-h|0,m=(m|0)>-1?m:0-m|0,d=(d|0)>-1?d:0-d|0,d=(m|0)>(d|0)?m:d,((h|0)>(d|0)?h:d)|0}function k7(h,d){h=h|0,d=d|0;var m=0;m=f[h+8>>2]|0,f[d>>2]=(f[h>>2]|0)-m,f[d+4>>2]=(f[h+4>>2]|0)-m}function S8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0;return v=f[h>>2]|0,f[d>>2]=v,x=f[h+4>>2]|0,R=d+4|0,f[R>>2]=x,C=d+8|0,f[C>>2]=0,m=(x|0)<(v|0),h=m?v:x,m=m?x:v,(m|0)<0&&((m|0)==-2147483648||((h|0)>0?(2147483647-h|0)<(m|0):(-2147483648-h|0)>(m|0))||((h|0)>-1?(h|-2147483648|0)>=(m|0):(h^-2147483648|0)<(m|0)))?(d=1,d|0):(h=x-v|0,(v|0)<0?(m=0-v|0,f[R>>2]=h,f[C>>2]=m,f[d>>2]=0,v=0):(h=x,m=0),(h|0)<0&&(v=v-h|0,f[d>>2]=v,m=m-h|0,f[C>>2]=m,f[R>>2]=0,h=0),S=v-m|0,x=h-m|0,(m|0)<0?(f[d>>2]=S,f[R>>2]=x,f[C>>2]=0,h=x,x=S,m=0):x=v,v=(h|0)<(x|0)?h:x,v=(m|0)<(v|0)?m:v,(v|0)<=0?(d=0,d|0):(f[d>>2]=x-v,f[R>>2]=h-v,f[C>>2]=m-v,d=0,d|0))}function C3(h){h=h|0;var d=0,m=0,v=0,x=0;d=h+8|0,x=f[d>>2]|0,m=x-(f[h>>2]|0)|0,f[h>>2]=m,v=h+4|0,h=(f[v>>2]|0)-x|0,f[v>>2]=h,f[d>>2]=0-(h+m)}function T8(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;m=f[h>>2]|0,d=0-m|0,f[h>>2]=d,R=h+8|0,f[R>>2]=0,C=h+4|0,v=f[C>>2]|0,x=v+m|0,(m|0)>0?(f[C>>2]=x,f[R>>2]=m,f[h>>2]=0,d=0,v=x):m=0,(v|0)<0?(S=d-v|0,f[h>>2]=S,m=m-v|0,f[R>>2]=m,f[C>>2]=0,x=S-m|0,d=0-m|0,(m|0)<0?(f[h>>2]=x,f[C>>2]=d,f[R>>2]=0,v=d,m=0):(v=0,x=S)):x=d,d=(v|0)<(x|0)?v:x,d=(m|0)<(d|0)?m:d,!((d|0)<=0)&&(f[h>>2]=x-d,f[C>>2]=v-d,f[R>>2]=m-d)}function H7(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0;if(ne=Y,Y=Y+64|0,W=ne,C=ne+56|0,!(!0&(d&2013265920|0)==134217728&(!0&(v&2013265920|0)==134217728)))return x=5,Y=ne,x|0;if((h|0)==(m|0)&(d|0)==(v|0))return f[x>>2]=0,x=0,Y=ne,x|0;if(R=lt(h|0,d|0,52)|0,Z()|0,R=R&15,V=lt(m|0,v|0,52)|0,Z()|0,(R|0)!=(V&15|0))return x=12,Y=ne,x|0;if(S=R+-1|0,R>>>0>1){D3(h,d,S,W)|0,D3(m,v,S,C)|0,V=W,L=f[V>>2]|0,V=f[V+4>>2]|0;e:do if((L|0)==(f[C>>2]|0)&&(V|0)==(f[C+4>>2]|0)){R=(R^15)*3|0,S=lt(h|0,d|0,R|0)|0,Z()|0,S=S&7,R=lt(m|0,v|0,R|0)|0,Z()|0,R=R&7;do if((S|0)==0|(R|0)==0)f[x>>2]=1,S=0;else if((S|0)==7)S=5;else{if((S|0)==1|(R|0)==1&&Ci(L,V)|0){S=5;break}if((f[15536+(S<<2)>>2]|0)!=(R|0)&&(f[15568+(S<<2)>>2]|0)!=(R|0))break e;f[x>>2]=1,S=0}while(!1);return x=S,Y=ne,x|0}while(!1)}S=W,R=S+56|0;do f[S>>2]=0,S=S+4|0;while((S|0)<(R|0));return f0(h,d,1,W)|0,d=W,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0))&&(d=W+8|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=W+16|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=W+24|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=W+32|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))&&(d=W+40|0,!((f[d>>2]|0)==(m|0)&&(f[d+4>>2]|0)==(v|0)))?(S=W+48|0,S=((f[S>>2]|0)==(m|0)?(f[S+4>>2]|0)==(v|0):0)&1):S=1,f[x>>2]=S,x=0,Y=ne,x|0}function M8(h,d,m,v,x){return h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,m=_3(h,d,m,v)|0,(m|0)==7?(x=11,x|0):(v=St(m|0,0,56)|0,d=d&-2130706433|(Z()|0)|268435456,f[x>>2]=h|v,f[x+4>>2]=d,x=0,x|0)}function W7(h,d,m){return h=h|0,d=d|0,m=m|0,!0&(d&2013265920|0)==268435456?(f[m>>2]=h,f[m+4>>2]=d&-2130706433|134217728,m=0,m|0):(m=6,m|0)}function A0(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;return x=Y,Y=Y+16|0,v=x,f[v>>2]=0,!0&(d&2013265920|0)==268435456?(S=lt(h|0,d|0,56)|0,Z()|0,v=Ai(h,d&-2130706433|134217728,S&7,v,m)|0,Y=x,v|0):(v=6,Y=x,v|0)}function E8(h,d){h=h|0,d=d|0;var m=0;switch(m=lt(h|0,d|0,56)|0,Z()|0,m&7){case 0:case 7:return m=0,m|0}return m=d&-2130706433|134217728,!(!0&(d&2013265920|0)==268435456)||!0&(d&117440512|0)==16777216&(Ci(h,m)|0)!=0?(m=0,m|0):(m=P3(h,m)|0,m|0)}function Sm(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0;return x=Y,Y=Y+16|0,v=x,!0&(d&2013265920|0)==268435456?(S=d&-2130706433|134217728,R=m,f[R>>2]=h,f[R+4>>2]=S,f[v>>2]=0,d=lt(h|0,d|0,56)|0,Z()|0,v=Ai(h,S,d&7,v,m+8|0)|0,Y=x,v|0):(v=6,Y=x,v|0)}function j7(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0;return x=(Ci(h,d)|0)==0,d=d&-2130706433,v=m,f[v>>2]=x?h:0,f[v+4>>2]=x?d|285212672:0,v=m+8|0,f[v>>2]=h,f[v+4>>2]=d|301989888,v=m+16|0,f[v>>2]=h,f[v+4>>2]=d|318767104,v=m+24|0,f[v>>2]=h,f[v+4>>2]=d|335544320,v=m+32|0,f[v>>2]=h,f[v+4>>2]=d|352321536,m=m+40|0,f[m>>2]=h,f[m+4>>2]=d|369098752,0}function ro(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0;return R=Y,Y=Y+16|0,x=R,S=d&-2130706433|134217728,!0&(d&2013265920|0)==268435456?(v=lt(h|0,d|0,56)|0,Z()|0,v=Rm(h,S,v&7)|0,(v|0)==-1?(f[m>>2]=0,S=6,Y=R,S|0):(Yl(h,S,x)|0&&gt(27795,26932,282,26947),d=lt(h|0,d|0,52)|0,Z()|0,d=d&15,Ci(h,S)|0?g0(x,d,v,2,m):o2(x,d,v,2,m),S=0,Y=R,S|0)):(S=6,Y=R,S|0)}function p0(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0;v=Y,Y=Y+16|0,x=v,w8(h,d,m,x),G7(x,m+4|0),Y=v}function w8(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0;if(C=Y,Y=Y+16|0,L=C,R8(h,m,L),S=+X0(+(1-+Q[L>>3]*.5)),S<1e-16){f[v>>2]=0,f[v+4>>2]=0,f[v+8>>2]=0,f[v+12>>2]=0,Y=C;return}if(L=f[m>>2]|0,x=+Q[15920+(L*24|0)>>3],x=+Q1(x-+Q1(+Z7(15600+(L<<4)|0,h))),fa(d)|0?R=+Q1(x+-.3334731722518321):R=x,x=+cs(+S)*2.618033988749896,(d|0)>0){h=0;do x=x*2.6457513110645907,h=h+1|0;while((h|0)!=(d|0))}S=+fi(+R)*x,Q[v>>3]=S,R=+Wn(+R)*x,Q[v+8>>3]=R,Y=C}function R8(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;if(S=Y,Y=Y+32|0,x=S,k8(h,x),f[d>>2]=0,Q[m>>3]=5,v=+Rn(16400,x),v<+Q[m>>3]&&(f[d>>2]=0,Q[m>>3]=v),v=+Rn(16424,x),v<+Q[m>>3]&&(f[d>>2]=1,Q[m>>3]=v),v=+Rn(16448,x),v<+Q[m>>3]&&(f[d>>2]=2,Q[m>>3]=v),v=+Rn(16472,x),v<+Q[m>>3]&&(f[d>>2]=3,Q[m>>3]=v),v=+Rn(16496,x),v<+Q[m>>3]&&(f[d>>2]=4,Q[m>>3]=v),v=+Rn(16520,x),v<+Q[m>>3]&&(f[d>>2]=5,Q[m>>3]=v),v=+Rn(16544,x),v<+Q[m>>3]&&(f[d>>2]=6,Q[m>>3]=v),v=+Rn(16568,x),v<+Q[m>>3]&&(f[d>>2]=7,Q[m>>3]=v),v=+Rn(16592,x),v<+Q[m>>3]&&(f[d>>2]=8,Q[m>>3]=v),v=+Rn(16616,x),v<+Q[m>>3]&&(f[d>>2]=9,Q[m>>3]=v),v=+Rn(16640,x),v<+Q[m>>3]&&(f[d>>2]=10,Q[m>>3]=v),v=+Rn(16664,x),v<+Q[m>>3]&&(f[d>>2]=11,Q[m>>3]=v),v=+Rn(16688,x),v<+Q[m>>3]&&(f[d>>2]=12,Q[m>>3]=v),v=+Rn(16712,x),v<+Q[m>>3]&&(f[d>>2]=13,Q[m>>3]=v),v=+Rn(16736,x),v<+Q[m>>3]&&(f[d>>2]=14,Q[m>>3]=v),v=+Rn(16760,x),v<+Q[m>>3]&&(f[d>>2]=15,Q[m>>3]=v),v=+Rn(16784,x),v<+Q[m>>3]&&(f[d>>2]=16,Q[m>>3]=v),v=+Rn(16808,x),v<+Q[m>>3]&&(f[d>>2]=17,Q[m>>3]=v),v=+Rn(16832,x),v<+Q[m>>3]&&(f[d>>2]=18,Q[m>>3]=v),v=+Rn(16856,x),!(v<+Q[m>>3])){Y=S;return}f[d>>2]=19,Q[m>>3]=v,Y=S}function m0(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0;if(S=+cf(h),S<1e-16){d=15600+(d<<4)|0,f[x>>2]=f[d>>2],f[x+4>>2]=f[d+4>>2],f[x+8>>2]=f[d+8>>2],f[x+12>>2]=f[d+12>>2];return}if(R=+Pe(+ +Q[h+8>>3],+ +Q[h>>3]),(m|0)>0){h=0;do S=S*.37796447300922725,h=h+1|0;while((h|0)!=(m|0))}C=S*.3333333333333333,v?(m=(fa(m)|0)==0,S=+Ee(+((m?C:C*.37796447300922725)*.381966011250105))):(S=+Ee(+(S*.381966011250105)),fa(m)|0&&(R=+Q1(R+.3334731722518321))),_0(15600+(d<<4)|0,+Q1(+Q[15920+(d*24|0)>>3]-R),S,x)}function N3(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0;v=Y,Y=Y+16|0,x=v,Po(h+4|0,x),m0(x,f[h>>2]|0,d,0,m),Y=v}function g0(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0,Cn=0,Nn=0,tn=0,Qt=0,ct=0,jn=0,Ni=0,pn=0;if(jn=Y,Y=Y+272|0,S=jn+256|0,De=jn+240|0,tn=jn,Qt=jn+224|0,ct=jn+208|0,Re=jn+176|0,xe=jn+160|0,mt=jn+192|0,sn=jn+144|0,Xt=jn+128|0,Ln=jn+112|0,Cn=jn+96|0,Nn=jn+80|0,f[S>>2]=d,f[De>>2]=f[h>>2],f[De+4>>2]=f[h+4>>2],f[De+8>>2]=f[h+8>>2],f[De+12>>2]=f[h+12>>2],ts(De,S,tn),f[x>>2]=0,De=v+m+((v|0)==5&1)|0,(De|0)<=(m|0)){Y=jn;return}L=f[S>>2]|0,V=Qt+4|0,W=Re+4|0,ne=m+5|0,he=16880+(L<<2)|0,ce=16960+(L<<2)|0,fe=Xt+8|0,_e=Ln+8|0,Me=Cn+8|0,Fe=ct+4|0,C=m;e:for(;;){R=tn+(((C|0)%5|0)<<4)|0,f[ct>>2]=f[R>>2],f[ct+4>>2]=f[R+4>>2],f[ct+8>>2]=f[R+8>>2],f[ct+12>>2]=f[R+12>>2];do;while((y0(ct,L,0,1)|0)==2);if((C|0)>(m|0)&(fa(d)|0)!=0){if(f[Re>>2]=f[ct>>2],f[Re+4>>2]=f[ct+4>>2],f[Re+8>>2]=f[ct+8>>2],f[Re+12>>2]=f[ct+12>>2],Po(V,xe),v=f[Re>>2]|0,S=f[17040+(v*80|0)+(f[Qt>>2]<<2)>>2]|0,f[Re>>2]=f[18640+(v*80|0)+(S*20|0)>>2],R=f[18640+(v*80|0)+(S*20|0)+16>>2]|0,(R|0)>0){h=0;do j1(W),h=h+1|0;while((h|0)<(R|0))}switch(R=18640+(v*80|0)+(S*20|0)+4|0,f[mt>>2]=f[R>>2],f[mt+4>>2]=f[R+4>>2],f[mt+8>>2]=f[R+8>>2],v8(mt,(f[he>>2]|0)*3|0),As(W,mt,W),yr(W),Po(W,sn),Ni=+(f[ce>>2]|0),Q[Xt>>3]=Ni*3,Q[fe>>3]=0,pn=Ni*-1.5,Q[Ln>>3]=pn,Q[_e>>3]=Ni*2.598076211353316,Q[Cn>>3]=pn,Q[Me>>3]=Ni*-2.598076211353316,f[17040+((f[Re>>2]|0)*80|0)+(f[ct>>2]<<2)>>2]|0){case 1:{h=Ln,v=Xt;break}case 3:{h=Cn,v=Ln;break}case 2:{h=Xt,v=Cn;break}default:{h=12;break e}}el(xe,sn,v,h,Nn),m0(Nn,f[Re>>2]|0,L,1,x+8+(f[x>>2]<<4)|0),f[x>>2]=(f[x>>2]|0)+1}if((C|0)<(ne|0)&&(Po(Fe,Re),m0(Re,f[ct>>2]|0,L,1,x+8+(f[x>>2]<<4)|0),f[x>>2]=(f[x>>2]|0)+1),f[Qt>>2]=f[ct>>2],f[Qt+4>>2]=f[ct+4>>2],f[Qt+8>>2]=f[ct+8>>2],f[Qt+12>>2]=f[ct+12>>2],C=C+1|0,(C|0)>=(De|0)){h=3;break}}if((h|0)==3){Y=jn;return}else(h|0)==12&&gt(26970,27017,572,27027)}function ts(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0;L=Y,Y=Y+128|0,v=L+64|0,x=L,S=v,R=20240,C=S+60|0;do f[S>>2]=f[R>>2],S=S+4|0,R=R+4|0;while((S|0)<(C|0));S=x,R=20304,C=S+60|0;do f[S>>2]=f[R>>2],S=S+4|0,R=R+4|0;while((S|0)<(C|0));C=(fa(f[d>>2]|0)|0)==0,v=C?v:x,x=h+4|0,b8(x),R3(x),fa(f[d>>2]|0)|0&&(Y0(x),f[d>>2]=(f[d>>2]|0)+1),f[m>>2]=f[h>>2],d=m+4|0,As(x,v,d),yr(d),f[m+16>>2]=f[h>>2],d=m+20|0,As(x,v+12|0,d),yr(d),f[m+32>>2]=f[h>>2],d=m+36|0,As(x,v+24|0,d),yr(d),f[m+48>>2]=f[h>>2],d=m+52|0,As(x,v+36|0,d),yr(d),f[m+64>>2]=f[h>>2],m=m+68|0,As(x,v+48|0,m),yr(m),Y=L}function y0(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0;if(fe=Y,Y=Y+32|0,he=fe+12|0,C=fe,ce=h+4|0,ne=f[16960+(d<<2)>>2]|0,W=(v|0)!=0,ne=W?ne*3|0:ne,x=f[ce>>2]|0,V=h+8|0,R=f[V>>2]|0,W){if(S=h+12|0,v=f[S>>2]|0,x=R+x+v|0,(x|0)==(ne|0))return ce=1,Y=fe,ce|0;L=S}else L=h+12|0,v=f[L>>2]|0,x=R+x+v|0;if((x|0)<=(ne|0))return ce=0,Y=fe,ce|0;do if((v|0)>0){if(v=f[h>>2]|0,(R|0)>0){S=18640+(v*80|0)+60|0,v=h;break}v=18640+(v*80|0)+40|0,m?(z7(he,ne,0,0),i2(ce,he,C),X1(C),As(C,he,ce),S=v,v=h):(S=v,v=h)}else S=18640+((f[h>>2]|0)*80|0)+20|0,v=h;while(!1);if(f[v>>2]=f[S>>2],x=S+16|0,(f[x>>2]|0)>0){v=0;do j1(ce),v=v+1|0;while((v|0)<(f[x>>2]|0))}return h=S+4|0,f[he>>2]=f[h>>2],f[he+4>>2]=f[h+4>>2],f[he+8>>2]=f[h+8>>2],d=f[16880+(d<<2)>>2]|0,v8(he,W?d*3|0:d),As(ce,he,ce),yr(ce),W?v=((f[V>>2]|0)+(f[ce>>2]|0)+(f[L>>2]|0)|0)==(ne|0)?1:2:v=2,ce=v,Y=fe,ce|0}function X7(h,d){h=h|0,d=d|0;var m=0;do m=y0(h,d,0,1)|0;while((m|0)==2);return m|0}function o2(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0,Cn=0,Nn=0,tn=0;if(Cn=Y,Y=Y+240|0,S=Cn+224|0,mt=Cn+208|0,sn=Cn,Xt=Cn+192|0,Ln=Cn+176|0,Me=Cn+160|0,Fe=Cn+144|0,De=Cn+128|0,Re=Cn+112|0,xe=Cn+96|0,f[S>>2]=d,f[mt>>2]=f[h>>2],f[mt+4>>2]=f[h+4>>2],f[mt+8>>2]=f[h+8>>2],f[mt+12>>2]=f[h+12>>2],Y1(mt,S,sn),f[x>>2]=0,_e=v+m+((v|0)==6&1)|0,(_e|0)<=(m|0)){Y=Cn;return}L=f[S>>2]|0,V=m+6|0,W=16960+(L<<2)|0,ne=Fe+8|0,he=De+8|0,ce=Re+8|0,fe=Xt+4|0,R=0,C=m,v=-1;e:for(;;){if(S=(C|0)%6|0,h=sn+(S<<4)|0,f[Xt>>2]=f[h>>2],f[Xt+4>>2]=f[h+4>>2],f[Xt+8>>2]=f[h+8>>2],f[Xt+12>>2]=f[h+12>>2],h=R,R=y0(Xt,L,0,1)|0,(C|0)>(m|0)&(fa(d)|0)!=0&&(h|0)!=1&&(f[Xt>>2]|0)!=(v|0)){switch(Po(sn+(((S+5|0)%6|0)<<4)+4|0,Ln),Po(sn+(S<<4)+4|0,Me),Nn=+(f[W>>2]|0),Q[Fe>>3]=Nn*3,Q[ne>>3]=0,tn=Nn*-1.5,Q[De>>3]=tn,Q[he>>3]=Nn*2.598076211353316,Q[Re>>3]=tn,Q[ce>>3]=Nn*-2.598076211353316,S=f[mt>>2]|0,f[17040+(S*80|0)+(((v|0)==(S|0)?f[Xt>>2]|0:v)<<2)>>2]|0){case 1:{h=De,v=Fe;break}case 3:{h=Re,v=De;break}case 2:{h=Fe,v=Re;break}default:{h=8;break e}}el(Ln,Me,v,h,xe),!(q8(Ln,xe)|0)&&!(q8(Me,xe)|0)&&(m0(xe,f[mt>>2]|0,L,1,x+8+(f[x>>2]<<4)|0),f[x>>2]=(f[x>>2]|0)+1)}if((C|0)<(V|0)&&(Po(fe,Ln),m0(Ln,f[Xt>>2]|0,L,1,x+8+(f[x>>2]<<4)|0),f[x>>2]=(f[x>>2]|0)+1),C=C+1|0,(C|0)>=(_e|0)){h=3;break}else v=f[Xt>>2]|0}if((h|0)==3){Y=Cn;return}else(h|0)==8&&gt(27054,27017,737,27099)}function Y1(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0;L=Y,Y=Y+160|0,v=L+80|0,x=L,S=v,R=20368,C=S+72|0;do f[S>>2]=f[R>>2],S=S+4|0,R=R+4|0;while((S|0)<(C|0));S=x,R=20448,C=S+72|0;do f[S>>2]=f[R>>2],S=S+4|0,R=R+4|0;while((S|0)<(C|0));C=(fa(f[d>>2]|0)|0)==0,v=C?v:x,x=h+4|0,b8(x),R3(x),fa(f[d>>2]|0)|0&&(Y0(x),f[d>>2]=(f[d>>2]|0)+1),f[m>>2]=f[h>>2],d=m+4|0,As(x,v,d),yr(d),f[m+16>>2]=f[h>>2],d=m+20|0,As(x,v+12|0,d),yr(d),f[m+32>>2]=f[h>>2],d=m+36|0,As(x,v+24|0,d),yr(d),f[m+48>>2]=f[h>>2],d=m+52|0,As(x,v+36|0,d),yr(d),f[m+64>>2]=f[h>>2],d=m+68|0,As(x,v+48|0,d),yr(d),f[m+80>>2]=f[h>>2],m=m+84|0,As(x,v+60|0,m),yr(m),Y=L}function C8(h,d){return h=h|0,d=d|0,d=lt(h|0,d|0,52)|0,Z()|0,d&15|0}function l2(h,d){return h=h|0,d=d|0,d=lt(h|0,d|0,45)|0,Z()|0,d&127|0}function P3(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0;return!(!0&(d&-16777216|0)==134217728)||(v=lt(h|0,d|0,52)|0,Z()|0,v=v&15,m=lt(h|0,d|0,45)|0,Z()|0,m=m&127,m>>>0>121)?(h=0,h|0):(R=(v^15)*3|0,x=lt(h|0,d|0,R|0)|0,R=St(x|0,Z()|0,R|0)|0,x=Z()|0,S=Hr(-1227133514,-1171,R|0,x|0)|0,!((R&613566756&S|0)==0&(x&4681&(Z()|0)|0)==0)||(R=(v*3|0)+19|0,S=St(~h|0,~d|0,R|0)|0,R=lt(S|0,Z()|0,R|0)|0,!((v|0)==15|(R|0)==0&(Z()|0)==0))?(R=0,R|0):!(rt[20528+m>>0]|0)||(d=d&8191,(h|0)==0&(d|0)==0)?(R=1,R|0):(R=Q3(h|0,d|0)|0,Z()|0,((63-R|0)%3|0|0)!=0|0))}function Ms(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0;if(x=St(d|0,0,52)|0,S=Z()|0,m=St(m|0,0,45)|0,m=S|(Z()|0)|134225919,(d|0)<1){S=-1,v=m,d=h,f[d>>2]=S,h=h+4|0,f[h>>2]=v;return}for(S=1,x=-1;R=(15-S|0)*3|0,C=St(7,0,R|0)|0,m=m&~(Z()|0),R=St(v|0,0,R|0)|0,x=x&~C|R,m=m|(Z()|0),(S|0)!=(d|0);)S=S+1|0;C=h,R=C,f[R>>2]=x,C=C+4|0,f[C>>2]=m}function D3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0;if(S=lt(h|0,d|0,52)|0,Z()|0,S=S&15,m>>>0>15)return v=4,v|0;if((S|0)<(m|0))return v=12,v|0;if((S|0)==(m|0))return f[v>>2]=h,f[v+4>>2]=d,v=0,v|0;if(x=St(m|0,0,52)|0,x=x|h,h=Z()|0|d&-15728641,(S|0)>(m|0))do d=St(7,0,(14-m|0)*3|0)|0,m=m+1|0,x=d|x,h=Z()|0|h;while((m|0)<(S|0));return f[v>>2]=x,f[v+4>>2]=h,v=0,v|0}function Xl(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0;if(S=lt(h|0,d|0,52)|0,Z()|0,S=S&15,!((m|0)<16&(S|0)<=(m|0)))return v=4,v|0;x=m-S|0,m=lt(h|0,d|0,45)|0,Z()|0;e:do if(!(ki(m&127)|0))m=Bo(7,0,x,((x|0)<0)<<31>>31)|0,x=Z()|0;else{t:do if(S|0){for(m=1;R=St(7,0,(15-m|0)*3|0)|0,!!((R&h|0)==0&((Z()|0)&d|0)==0);)if(m>>>0<S>>>0)m=m+1|0;else break t;m=Bo(7,0,x,((x|0)<0)<<31>>31)|0,x=Z()|0;break e}while(!1);m=Bo(7,0,x,((x|0)<0)<<31>>31)|0,m=wr(m|0,Z()|0,5,0)|0,m=fn(m|0,Z()|0,-5,-1)|0,m=nl(m|0,Z()|0,6,0)|0,m=fn(m|0,Z()|0,1,0)|0,x=Z()|0}while(!1);return R=v,f[R>>2]=m,f[R+4>>2]=x,R=0,R|0}function Ci(h,d){h=h|0,d=d|0;var m=0,v=0,x=0;if(x=lt(h|0,d|0,45)|0,Z()|0,!(ki(x&127)|0))return x=0,x|0;x=lt(h|0,d|0,52)|0,Z()|0,x=x&15;e:do if(!x)m=0;else for(v=1;;){if(m=lt(h|0,d|0,(15-v|0)*3|0)|0,Z()|0,m=m&7,m|0)break e;if(v>>>0<x>>>0)v=v+1|0;else{m=0;break}}while(!1);return x=(m|0)==0&1,x|0}function Y7(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0;if(R=Y,Y=Y+16|0,S=R,V3(S,h,d,m),d=S,h=f[d>>2]|0,d=f[d+4>>2]|0,(h|0)==0&(d|0)==0)return Y=R,0;x=0,m=0;do C=v+(x<<3)|0,f[C>>2]=h,f[C+4>>2]=d,x=fn(x|0,m|0,1,0)|0,m=Z()|0,h2(S),C=S,h=f[C>>2]|0,d=f[C+4>>2]|0;while(!((h|0)==0&(d|0)==0));return Y=R,0}function B3(h,d,m,v){return h=h|0,d=d|0,m=m|0,v=v|0,(v|0)<(m|0)?(m=d,v=h,ot(m|0),v|0):(m=St(-1,-1,((v-m|0)*3|0)+3|0)|0,v=St(~m|0,~(Z()|0)|0,(15-v|0)*3|0)|0,m=~(Z()|0)&d,v=~v&h,ot(m|0),v|0)}function L3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0;return x=lt(h|0,d|0,52)|0,Z()|0,x=x&15,(m|0)<16&(x|0)<=(m|0)?((x|0)<(m|0)&&(x=St(-1,-1,((m+-1-x|0)*3|0)+3|0)|0,x=St(~x|0,~(Z()|0)|0,(15-m|0)*3|0)|0,d=~(Z()|0)&d,h=~x&h),x=St(m|0,0,52)|0,m=d&-15728641|(Z()|0),f[v>>2]=h|x,f[v+4>>2]=m,v=0,v|0):(v=4,v|0)}function Q7(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0,Cn=0,Nn=0,tn=0,Qt=0,ct=0;if((m|0)==0&(v|0)==0)return ct=0,ct|0;if(x=h,S=f[x>>2]|0,x=f[x+4>>2]|0,!0&(x&15728640|0)==0){if(!((v|0)>0|(v|0)==0&m>>>0>0)||(ct=d,f[ct>>2]=S,f[ct+4>>2]=x,(m|0)==1&(v|0)==0))return ct=0,ct|0;x=1,S=0;do tn=h+(x<<3)|0,Qt=f[tn+4>>2]|0,ct=d+(x<<3)|0,f[ct>>2]=f[tn>>2],f[ct+4>>2]=Qt,x=fn(x|0,S|0,1,0)|0,S=Z()|0;while((S|0)<(v|0)|(S|0)==(v|0)&x>>>0<m>>>0);return x=0,x|0}if(Nn=m<<3,Qt=oo(Nn)|0,!Qt)return ct=13,ct|0;if(il(Qt|0,h|0,Nn|0)|0,tn=Cs(m,8)|0,!tn)return An(Qt),ct=13,ct|0;e:for(;;){x=Qt,V=f[x>>2]|0,x=f[x+4>>2]|0,Ln=lt(V|0,x|0,52)|0,Z()|0,Ln=Ln&15,Cn=Ln+-1|0,Xt=(Ln|0)!=0,sn=(v|0)>0|(v|0)==0&m>>>0>0;t:do if(Xt&sn){if(De=St(Cn|0,0,52)|0,Re=Z()|0,Cn>>>0>15){if(!((V|0)==0&(x|0)==0)){ct=16;break e}for(S=0,h=0;;){if(S=fn(S|0,h|0,1,0)|0,h=Z()|0,!((h|0)<(v|0)|(h|0)==(v|0)&S>>>0<m>>>0))break t;if(R=Qt+(S<<3)|0,mt=f[R>>2]|0,R=f[R+4>>2]|0,!((mt|0)==0&(R|0)==0)){x=R,ct=16;break e}}}for(C=V,h=x,S=0,R=0;;){if(!((C|0)==0&(h|0)==0)){if(!(!0&(h&117440512|0)==0)){ct=21;break e}if(W=lt(C|0,h|0,52)|0,Z()|0,W=W&15,(W|0)<(Cn|0)){x=12,ct=27;break e}if((W|0)!=(Cn|0)&&(C=C|De,h=h&-15728641|Re,W>>>0>=Ln>>>0)){L=Cn;do mt=St(7,0,(14-L|0)*3|0)|0,L=L+1|0,C=mt|C,h=Z()|0|h;while(L>>>0<W>>>0)}if(he=b0(C|0,h|0,m|0,v|0)|0,ce=Z()|0,L=tn+(he<<3)|0,W=L,ne=f[W>>2]|0,W=f[W+4>>2]|0,!((ne|0)==0&(W|0)==0)){Me=0,Fe=0;do{if((Me|0)>(v|0)|(Me|0)==(v|0)&Fe>>>0>m>>>0){ct=31;break e}if((ne|0)==(C|0)&(W&-117440513|0)==(h|0)){fe=lt(ne|0,W|0,56)|0,Z()|0,fe=fe&7,_e=fe+1|0,mt=lt(ne|0,W|0,45)|0,Z()|0;n:do if(!(ki(mt&127)|0))W=7;else{if(ne=lt(ne|0,W|0,52)|0,Z()|0,ne=ne&15,!ne){W=6;break}for(W=1;;){if(mt=St(7,0,(15-W|0)*3|0)|0,!((mt&C|0)==0&((Z()|0)&h|0)==0)){W=7;break n}if(W>>>0<ne>>>0)W=W+1|0;else{W=6;break}}}while(!1);if((fe+2|0)>>>0>W>>>0){ct=41;break e}mt=St(_e|0,0,56)|0,h=Z()|0|h&-117440513,xe=L,f[xe>>2]=0,f[xe+4>>2]=0,C=mt|C}else he=fn(he|0,ce|0,1,0)|0,he=iu(he|0,Z()|0,m|0,v|0)|0,ce=Z()|0;Fe=fn(Fe|0,Me|0,1,0)|0,Me=Z()|0,L=tn+(he<<3)|0,W=L,ne=f[W>>2]|0,W=f[W+4>>2]|0}while(!((ne|0)==0&(W|0)==0))}mt=L,f[mt>>2]=C,f[mt+4>>2]=h}if(S=fn(S|0,R|0,1,0)|0,R=Z()|0,!((R|0)<(v|0)|(R|0)==(v|0)&S>>>0<m>>>0))break t;h=Qt+(S<<3)|0,C=f[h>>2]|0,h=f[h+4>>2]|0}}while(!1);if(mt=fn(m|0,v|0,5,0)|0,xe=Z()|0,xe>>>0<0|(xe|0)==0&mt>>>0<11){ct=85;break}if(mt=nl(m|0,v|0,6,0)|0,Z()|0,mt=Cs(mt,8)|0,!mt){ct=48;break}do if(sn){for(_e=0,h=0,fe=0,Me=0;;){if(W=tn+(_e<<3)|0,R=W,S=f[R>>2]|0,R=f[R+4>>2]|0,(S|0)==0&(R|0)==0)xe=fe;else{ne=lt(S|0,R|0,56)|0,Z()|0,ne=ne&7,C=ne+1|0,he=R&-117440513,xe=lt(S|0,R|0,45)|0,Z()|0;t:do if(ki(xe&127)|0){if(ce=lt(S|0,R|0,52)|0,Z()|0,ce=ce&15,ce|0)for(L=1;;){if(xe=St(7,0,(15-L|0)*3|0)|0,!((S&xe|0)==0&(he&(Z()|0)|0)==0))break t;if(L>>>0<ce>>>0)L=L+1|0;else break}R=St(C|0,0,56)|0,S=R|S,R=Z()|0|he,C=W,f[C>>2]=S,f[C+4>>2]=R,C=ne+2|0}while(!1);(C|0)==7?(xe=mt+(h<<3)|0,f[xe>>2]=S,f[xe+4>>2]=R&-117440513,h=fn(h|0,fe|0,1,0)|0,xe=Z()|0):xe=fe}if(_e=fn(_e|0,Me|0,1,0)|0,Me=Z()|0,(Me|0)<(v|0)|(Me|0)==(v|0)&_e>>>0<m>>>0)fe=xe;else break}if(sn){if(Fe=Cn>>>0>15,De=St(Cn|0,0,52)|0,Re=Z()|0,!Xt){for(S=0,L=0,C=0,R=0;(V|0)==0&(x|0)==0||(Cn=d+(S<<3)|0,f[Cn>>2]=V,f[Cn+4>>2]=x,S=fn(S|0,L|0,1,0)|0,L=Z()|0),C=fn(C|0,R|0,1,0)|0,R=Z()|0,!!((R|0)<(v|0)|(R|0)==(v|0)&C>>>0<m>>>0);)x=Qt+(C<<3)|0,V=f[x>>2]|0,x=f[x+4>>2]|0;x=xe;break}for(S=0,L=0,R=0,C=0;;){do if(!((V|0)==0&(x|0)==0)){if(ce=lt(V|0,x|0,52)|0,Z()|0,ce=ce&15,Fe|(ce|0)<(Cn|0)){ct=80;break e}if((ce|0)!=(Cn|0)){if(W=V|De,ne=x&-15728641|Re,ce>>>0>=Ln>>>0){he=Cn;do Xt=St(7,0,(14-he|0)*3|0)|0,he=he+1|0,W=Xt|W,ne=Z()|0|ne;while(he>>>0<ce>>>0)}}else W=V,ne=x;fe=b0(W|0,ne|0,m|0,v|0)|0,he=0,ce=0,Me=Z()|0;do{if((he|0)>(v|0)|(he|0)==(v|0)&ce>>>0>m>>>0){ct=81;break e}if(Xt=tn+(fe<<3)|0,_e=f[Xt+4>>2]|0,(_e&-117440513|0)==(ne|0)&&(f[Xt>>2]|0)==(W|0)){ct=65;break}Xt=fn(fe|0,Me|0,1,0)|0,fe=iu(Xt|0,Z()|0,m|0,v|0)|0,Me=Z()|0,ce=fn(ce|0,he|0,1,0)|0,he=Z()|0,Xt=tn+(fe<<3)|0}while(!((f[Xt>>2]|0)==(W|0)&&(f[Xt+4>>2]|0)==(ne|0)));if((ct|0)==65&&(ct=0,!0&(_e&117440512|0)==100663296))break;Xt=d+(S<<3)|0,f[Xt>>2]=V,f[Xt+4>>2]=x,S=fn(S|0,L|0,1,0)|0,L=Z()|0}while(!1);if(R=fn(R|0,C|0,1,0)|0,C=Z()|0,!((C|0)<(v|0)|(C|0)==(v|0)&R>>>0<m>>>0))break;x=Qt+(R<<3)|0,V=f[x>>2]|0,x=f[x+4>>2]|0}x=xe}else S=0,x=xe}else S=0,h=0,x=0;while(!1);if(Lo(tn|0,0,Nn|0)|0,il(Qt|0,mt|0,h<<3|0)|0,An(mt),(h|0)==0&(x|0)==0){ct=89;break}else d=d+(S<<3)|0,v=x,m=h}if((ct|0)==16)!0&(x&117440512|0)==0?(x=4,ct=27):ct=21;else if((ct|0)==31)gt(27795,27122,529,27132);else{if((ct|0)==41)return An(Qt),An(tn),ct=10,ct|0;if((ct|0)==48)return An(Qt),An(tn),ct=13,ct|0;(ct|0)==80?gt(27795,27122,620,27132):(ct|0)==81?gt(27795,27122,632,27132):(ct|0)==85&&(il(d|0,Qt|0,m<<3|0)|0,ct=89)}return(ct|0)==21?(An(Qt),An(tn),ct=5,ct|0):(ct|0)==27?(An(Qt),An(tn),ct=x,ct|0):(ct|0)==89?(An(Qt),An(tn),ct=0,ct|0):0}function I3(h,d,m,v,x,S,R){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,S=S|0,R=R|0;var C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0;if(_e=Y,Y=Y+16|0,fe=_e,!((m|0)>0|(m|0)==0&d>>>0>0))return fe=0,Y=_e,fe|0;if((R|0)>=16)return fe=12,Y=_e,fe|0;he=0,ce=0,ne=0,C=0;e:for(;;){if(V=h+(he<<3)|0,L=f[V>>2]|0,V=f[V+4>>2]|0,W=lt(L|0,V|0,52)|0,Z()|0,(W&15|0)>(R|0)){C=12,L=11;break}if(V3(fe,L,V,R),W=fe,V=f[W>>2]|0,W=f[W+4>>2]|0,(V|0)==0&(W|0)==0)L=ne;else{L=ne;do{if(!((C|0)<(S|0)|(C|0)==(S|0)&L>>>0<x>>>0)){L=10;break e}ne=v+(L<<3)|0,f[ne>>2]=V,f[ne+4>>2]=W,L=fn(L|0,C|0,1,0)|0,C=Z()|0,h2(fe),ne=fe,V=f[ne>>2]|0,W=f[ne+4>>2]|0}while(!((V|0)==0&(W|0)==0))}if(he=fn(he|0,ce|0,1,0)|0,ce=Z()|0,(ce|0)<(m|0)|(ce|0)==(m|0)&he>>>0<d>>>0)ne=L;else{C=0,L=11;break}}return(L|0)==10?(fe=14,Y=_e,fe|0):(L|0)==11?(Y=_e,C|0):0}function u2(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0;he=Y,Y=Y+16|0,ne=he;e:do if((m|0)>0|(m|0)==0&d>>>0>0){for(V=0,R=0,S=0,W=0;;){if(L=h+(V<<3)|0,C=f[L>>2]|0,L=f[L+4>>2]|0,!((C|0)==0&(L|0)==0)&&(L=(Xl(C,L,v,ne)|0)==0,C=ne,R=fn(f[C>>2]|0,f[C+4>>2]|0,R|0,S|0)|0,S=Z()|0,!L)){S=12;break}if(V=fn(V|0,W|0,1,0)|0,W=Z()|0,!((W|0)<(m|0)|(W|0)==(m|0)&V>>>0<d>>>0))break e}return Y=he,S|0}else R=0,S=0;while(!1);return f[x>>2]=R,f[x+4>>2]=S,x=0,Y=he,x|0}function cr(h,d){return h=h|0,d=d|0,d=lt(h|0,d|0,52)|0,Z()|0,d&1|0}function Xs(h,d){h=h|0,d=d|0;var m=0,v=0,x=0;if(x=lt(h|0,d|0,52)|0,Z()|0,x=x&15,!x)return x=0,x|0;for(v=1;;){if(m=lt(h|0,d|0,(15-v|0)*3|0)|0,Z()|0,m=m&7,m|0){v=5;break}if(v>>>0<x>>>0)v=v+1|0;else{m=0,v=5;break}}return(v|0)==5?m|0:0}function N8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0;if(L=lt(h|0,d|0,52)|0,Z()|0,L=L&15,!L)return C=d,L=h,ot(C|0),L|0;for(C=1,m=0;;){S=(15-C|0)*3|0,v=St(7,0,S|0)|0,x=Z()|0,R=lt(h|0,d|0,S|0)|0,Z()|0,S=St(Q0(R&7)|0,0,S|0)|0,R=Z()|0,h=S|h&~v,d=R|d&~x;e:do if(!m)if((S&v|0)==0&(R&x|0)==0)m=0;else if(v=lt(h|0,d|0,52)|0,Z()|0,v=v&15,!v)m=1;else{m=1;t:for(;;){switch(R=lt(h|0,d|0,(15-m|0)*3|0)|0,Z()|0,R&7){case 1:break t;case 0:break;default:{m=1;break e}}if(m>>>0<v>>>0)m=m+1|0;else{m=1;break e}}for(m=1;;)if(R=(15-m|0)*3|0,x=lt(h|0,d|0,R|0)|0,Z()|0,S=St(7,0,R|0)|0,d=d&~(Z()|0),R=St(Q0(x&7)|0,0,R|0)|0,h=h&~S|R,d=d|(Z()|0),m>>>0<v>>>0)m=m+1|0;else{m=1;break}}while(!1);if(C>>>0<L>>>0)C=C+1|0;else break}return ot(d|0),h|0}function $0(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0;if(v=lt(h|0,d|0,52)|0,Z()|0,v=v&15,!v)return m=d,v=h,ot(m|0),v|0;for(m=1;S=(15-m|0)*3|0,R=lt(h|0,d|0,S|0)|0,Z()|0,x=St(7,0,S|0)|0,d=d&~(Z()|0),S=St(Q0(R&7)|0,0,S|0)|0,h=S|h&~x,d=Z()|0|d,m>>>0<v>>>0;)m=m+1|0;return ot(d|0),h|0}function c2(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0;if(L=lt(h|0,d|0,52)|0,Z()|0,L=L&15,!L)return C=d,L=h,ot(C|0),L|0;for(C=1,m=0;;){S=(15-C|0)*3|0,v=St(7,0,S|0)|0,x=Z()|0,R=lt(h|0,d|0,S|0)|0,Z()|0,S=St(d0(R&7)|0,0,S|0)|0,R=Z()|0,h=S|h&~v,d=R|d&~x;e:do if(!m)if((S&v|0)==0&(R&x|0)==0)m=0;else if(v=lt(h|0,d|0,52)|0,Z()|0,v=v&15,!v)m=1;else{m=1;t:for(;;){switch(R=lt(h|0,d|0,(15-m|0)*3|0)|0,Z()|0,R&7){case 1:break t;case 0:break;default:{m=1;break e}}if(m>>>0<v>>>0)m=m+1|0;else{m=1;break e}}for(m=1;;)if(x=(15-m|0)*3|0,S=St(7,0,x|0)|0,R=d&~(Z()|0),d=lt(h|0,d|0,x|0)|0,Z()|0,d=St(d0(d&7)|0,0,x|0)|0,h=h&~S|d,d=R|(Z()|0),m>>>0<v>>>0)m=m+1|0;else{m=1;break}}while(!1);if(C>>>0<L>>>0)C=C+1|0;else break}return ot(d|0),h|0}function Do(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0;if(v=lt(h|0,d|0,52)|0,Z()|0,v=v&15,!v)return m=d,v=h,ot(m|0),v|0;for(m=1;R=(15-m|0)*3|0,S=St(7,0,R|0)|0,x=d&~(Z()|0),d=lt(h|0,d|0,R|0)|0,Z()|0,d=St(d0(d&7)|0,0,R|0)|0,h=d|h&~S,d=Z()|0|x,m>>>0<v>>>0;)m=m+1|0;return ot(d|0),h|0}function $7(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(L=Y,Y=Y+64|0,C=L+40|0,v=L+24|0,x=L+12|0,S=L,St(d|0,0,52)|0,m=Z()|0|134225919,!d)return(f[h+4>>2]|0)>2||(f[h+8>>2]|0)>2||(f[h+12>>2]|0)>2?(R=0,C=0,ot(R|0),Y=L,C|0):(St(f8(h)|0,0,45)|0,R=Z()|0|m,C=-1,ot(R|0),Y=L,C|0);if(f[C>>2]=f[h>>2],f[C+4>>2]=f[h+4>>2],f[C+8>>2]=f[h+8>>2],f[C+12>>2]=f[h+12>>2],R=C+4|0,(d|0)>0)for(h=-1;f[v>>2]=f[R>>2],f[v+4>>2]=f[R+4>>2],f[v+8>>2]=f[R+8>>2],d&1?(q7(R),f[x>>2]=f[R>>2],f[x+4>>2]=f[R+4>>2],f[x+8>>2]=f[R+8>>2],s2(x)):(_8(R),f[x>>2]=f[R>>2],f[x+4>>2]=f[R+4>>2],f[x+8>>2]=f[R+8>>2],Y0(x)),i2(v,x,S),yr(S),W=(15-d|0)*3|0,V=St(7,0,W|0)|0,m=m&~(Z()|0),W=St(r2(S)|0,0,W|0)|0,h=W|h&~V,m=Z()|0|m,(d|0)>1;)d=d+-1|0;else h=-1;e:do if((f[R>>2]|0)<=2&&(f[C+8>>2]|0)<=2&&(f[C+12>>2]|0)<=2){if(v=f8(C)|0,d=St(v|0,0,45)|0,d=d|h,h=Z()|0|m&-1040385,S=d8(C)|0,!(ki(v)|0)){if((S|0)<=0)break;for(x=0;;){if(v=lt(d|0,h|0,52)|0,Z()|0,v=v&15,v)for(m=1;W=(15-m|0)*3|0,C=lt(d|0,h|0,W|0)|0,Z()|0,V=St(7,0,W|0)|0,h=h&~(Z()|0),W=St(Q0(C&7)|0,0,W|0)|0,d=d&~V|W,h=h|(Z()|0),m>>>0<v>>>0;)m=m+1|0;if(x=x+1|0,(x|0)==(S|0))break e}}x=lt(d|0,h|0,52)|0,Z()|0,x=x&15;t:do if(x){m=1;n:for(;;){switch(W=lt(d|0,h|0,(15-m|0)*3|0)|0,Z()|0,W&7){case 1:break n;case 0:break;default:break t}if(m>>>0<x>>>0)m=m+1|0;else break t}if(S3(v,f[C>>2]|0)|0)for(m=1;C=(15-m|0)*3|0,V=St(7,0,C|0)|0,W=h&~(Z()|0),h=lt(d|0,h|0,C|0)|0,Z()|0,h=St(d0(h&7)|0,0,C|0)|0,d=d&~V|h,h=W|(Z()|0),m>>>0<x>>>0;)m=m+1|0;else for(m=1;W=(15-m|0)*3|0,C=lt(d|0,h|0,W|0)|0,Z()|0,V=St(7,0,W|0)|0,h=h&~(Z()|0),W=St(Q0(C&7)|0,0,W|0)|0,d=d&~V|W,h=h|(Z()|0),m>>>0<x>>>0;)m=m+1|0}while(!1);if((S|0)>0){m=0;do d=N8(d,h)|0,h=Z()|0,m=m+1|0;while((m|0)!=(S|0))}}else d=0,h=0;while(!1);return V=h,W=d,ot(V|0),Y=L,W|0}function fa(h){return h=h|0,(h|0)%2|0|0}function v0(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0;return x=Y,Y=Y+16|0,v=x,d>>>0>15?(v=4,Y=x,v|0):(f[h+4>>2]&2146435072|0)==2146435072||(f[h+8+4>>2]&2146435072|0)==2146435072?(v=3,Y=x,v|0):(p0(h,d,v),d=$7(v,d)|0,v=Z()|0,f[m>>2]=d,f[m+4>>2]=v,(d|0)==0&(v|0)==0&&gt(27795,27122,959,27145),v=0,Y=x,v|0)}function Es(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0;if(x=m+4|0,S=lt(h|0,d|0,52)|0,Z()|0,S=S&15,R=lt(h|0,d|0,45)|0,Z()|0,v=(S|0)==0,ki(R&127)|0){if(v)return R=1,R|0;v=1}else{if(v)return R=0,R|0;(f[x>>2]|0)==0&&(f[m+8>>2]|0)==0?v=(f[m+12>>2]|0)!=0&1:v=1}for(m=1;m&1?s2(x):Y0(x),R=lt(h|0,d|0,(15-m|0)*3|0)|0,Z()|0,x8(x,R&7),m>>>0<S>>>0;)m=m+1|0;return v|0}function Yl(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(W=Y,Y=Y+16|0,L=W,V=lt(h|0,d|0,45)|0,Z()|0,V=V&127,V>>>0>121)return f[m>>2]=0,f[m+4>>2]=0,f[m+8>>2]=0,f[m+12>>2]=0,V=5,Y=W,V|0;e:do if((ki(V)|0)!=0&&(S=lt(h|0,d|0,52)|0,Z()|0,S=S&15,(S|0)!=0)){v=1;t:for(;;){switch(C=lt(h|0,d|0,(15-v|0)*3|0)|0,Z()|0,C&7){case 5:break t;case 0:break;default:{v=d;break e}}if(v>>>0<S>>>0)v=v+1|0;else{v=d;break e}}for(x=1,v=d;d=(15-x|0)*3|0,R=St(7,0,d|0)|0,C=v&~(Z()|0),v=lt(h|0,v|0,d|0)|0,Z()|0,v=St(d0(v&7)|0,0,d|0)|0,h=h&~R|v,v=C|(Z()|0),x>>>0<S>>>0;)x=x+1|0}else v=d;while(!1);if(C=7696+(V*28|0)|0,f[m>>2]=f[C>>2],f[m+4>>2]=f[C+4>>2],f[m+8>>2]=f[C+8>>2],f[m+12>>2]=f[C+12>>2],!(Es(h,v,m)|0))return V=0,Y=W,V|0;if(R=m+4|0,f[L>>2]=f[R>>2],f[L+4>>2]=f[R+4>>2],f[L+8>>2]=f[R+8>>2],S=lt(h|0,v|0,52)|0,Z()|0,C=S&15,S&1?(Y0(R),S=C+1|0):S=C,!(ki(V)|0))v=0;else{e:do if(!C)v=0;else for(d=1;;){if(x=lt(h|0,v|0,(15-d|0)*3|0)|0,Z()|0,x=x&7,x|0){v=x;break e}if(d>>>0<C>>>0)d=d+1|0;else{v=0;break}}while(!1);v=(v|0)==4&1}if(!(y0(m,S,v,0)|0))(S|0)!=(C|0)&&(f[R>>2]=f[L>>2],f[R+4>>2]=f[L+4>>2],f[R+8>>2]=f[L+8>>2]);else{if(ki(V)|0)do;while((y0(m,S,0,0)|0)!=0);(S|0)!=(C|0)&&_8(R)}return V=0,Y=W,V|0}function K0(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;return S=Y,Y=Y+16|0,v=S,x=Yl(h,d,v)|0,x|0?(Y=S,x|0):(x=lt(h|0,d|0,52)|0,Z()|0,N3(v,x&15,m),x=0,Y=S,x|0)}function Ql(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0;if(R=Y,Y=Y+16|0,S=R,v=Yl(h,d,S)|0,v|0)return S=v,Y=R,S|0;v=lt(h|0,d|0,45)|0,Z()|0,v=(ki(v&127)|0)==0,x=lt(h|0,d|0,52)|0,Z()|0,x=x&15;e:do if(!v){if(x|0)for(v=1;;){if(C=St(7,0,(15-v|0)*3|0)|0,!((C&h|0)==0&((Z()|0)&d|0)==0))break e;if(v>>>0<x>>>0)v=v+1|0;else break}return g0(S,x,0,5,m),C=0,Y=R,C|0}while(!1);return o2(S,x,0,6,m),C=0,Y=R,C|0}function P8(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;if(x=lt(h|0,d|0,45)|0,Z()|0,!(ki(x&127)|0))return x=2,f[m>>2]=x,0;if(x=lt(h|0,d|0,52)|0,Z()|0,x=x&15,!x)return x=5,f[m>>2]=x,0;for(v=1;;){if(S=St(7,0,(15-v|0)*3|0)|0,!((S&h|0)==0&((Z()|0)&d|0)==0)){v=2,h=6;break}if(v>>>0<x>>>0)v=v+1|0;else{v=5,h=6;break}}return(h|0)==6&&(f[m>>2]=v),0}function U3(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0;ne=Y,Y=Y+128|0,V=ne+112|0,S=ne+96|0,W=ne,x=lt(h|0,d|0,52)|0,Z()|0,C=x&15,f[V>>2]=C,R=lt(h|0,d|0,45)|0,Z()|0,R=R&127;e:do if(ki(R)|0){if(C|0)for(v=1;;){if(L=St(7,0,(15-v|0)*3|0)|0,!((L&h|0)==0&((Z()|0)&d|0)==0)){x=0;break e}if(v>>>0<C>>>0)v=v+1|0;else break}if(x&1)x=1;else return L=St(C+1|0,0,52)|0,W=Z()|0|d&-15728641,V=St(7,0,(14-C|0)*3|0)|0,W=U3((L|h)&~V,W&~(Z()|0),m)|0,Y=ne,W|0}else x=0;while(!1);if(v=Yl(h,d,S)|0,!v){x?(ts(S,V,W),L=5):(Y1(S,V,W),L=6);e:do if(ki(R)|0)if(!C)h=5;else for(v=1;;){if(R=St(7,0,(15-v|0)*3|0)|0,!((R&h|0)==0&((Z()|0)&d|0)==0)){h=2;break e}if(v>>>0<C>>>0)v=v+1|0;else{h=5;break}}else h=2;while(!1);Lo(m|0,-1,h<<2|0)|0;e:do if(x)for(S=0;;){if(R=W+(S<<4)|0,X7(R,f[V>>2]|0)|0,R=f[R>>2]|0,C=f[m>>2]|0,(C|0)==-1|(C|0)==(R|0))v=m;else{x=0;do{if(x=x+1|0,x>>>0>=h>>>0){v=1;break e}v=m+(x<<2)|0,C=f[v>>2]|0}while(!((C|0)==-1|(C|0)==(R|0)))}if(f[v>>2]=R,S=S+1|0,S>>>0>=L>>>0){v=0;break}}else for(S=0;;){if(R=W+(S<<4)|0,y0(R,f[V>>2]|0,0,1)|0,R=f[R>>2]|0,C=f[m>>2]|0,(C|0)==-1|(C|0)==(R|0))v=m;else{x=0;do{if(x=x+1|0,x>>>0>=h>>>0){v=1;break e}v=m+(x<<2)|0,C=f[v>>2]|0}while(!((C|0)==-1|(C|0)==(R|0)))}if(f[v>>2]=R,S=S+1|0,S>>>0>=L>>>0){v=0;break}}while(!1)}return W=v,Y=ne,W|0}function O3(){return 12}function F3(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0;if(h>>>0>15)return C=4,C|0;if(St(h|0,0,52)|0,C=Z()|0|134225919,!h){m=0,v=0;do ki(v)|0&&(St(v|0,0,45)|0,R=C|(Z()|0),h=d+(m<<3)|0,f[h>>2]=-1,f[h+4>>2]=R,m=m+1|0),v=v+1|0;while((v|0)!=122);return m=0,m|0}m=0,R=0;do{if(ki(R)|0){for(St(R|0,0,45)|0,v=1,x=-1,S=C|(Z()|0);L=St(7,0,(15-v|0)*3|0)|0,x=x&~L,S=S&~(Z()|0),(v|0)!=(h|0);)v=v+1|0;L=d+(m<<3)|0,f[L>>2]=x,f[L+4>>2]=S,m=m+1|0}R=R+1|0}while((R|0)!=122);return m=0,m|0}function Tm(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0;if(De=Y,Y=Y+16|0,Me=De,Fe=lt(h|0,d|0,52)|0,Z()|0,Fe=Fe&15,m>>>0>15)return Fe=4,Y=De,Fe|0;if((Fe|0)<(m|0))return Fe=12,Y=De,Fe|0;if((Fe|0)!=(m|0))if(S=St(m|0,0,52)|0,S=S|h,C=Z()|0|d&-15728641,(Fe|0)>(m|0)){L=m;do _e=St(7,0,(14-L|0)*3|0)|0,L=L+1|0,S=_e|S,C=Z()|0|C;while((L|0)<(Fe|0));_e=S}else _e=S;else _e=h,C=d;fe=lt(_e|0,C|0,45)|0,Z()|0;e:do if(ki(fe&127)|0){if(L=lt(_e|0,C|0,52)|0,Z()|0,L=L&15,L|0)for(S=1;;){if(fe=St(7,0,(15-S|0)*3|0)|0,!((fe&_e|0)==0&((Z()|0)&C|0)==0)){V=33;break e}if(S>>>0<L>>>0)S=S+1|0;else break}if(fe=v,f[fe>>2]=0,f[fe+4>>2]=0,(Fe|0)>(m|0)){for(fe=d&-15728641,ce=Fe;;){if(he=ce,ce=ce+-1|0,ce>>>0>15|(Fe|0)<(ce|0)){V=19;break}if((Fe|0)!=(ce|0))if(S=St(ce|0,0,52)|0,S=S|h,L=Z()|0|fe,(Fe|0)<(he|0))ne=S;else{V=ce;do ne=St(7,0,(14-V|0)*3|0)|0,V=V+1|0,S=ne|S,L=Z()|0|L;while((V|0)<(Fe|0));ne=S}else ne=h,L=d;if(W=lt(ne|0,L|0,45)|0,Z()|0,!(ki(W&127)|0))S=0;else{W=lt(ne|0,L|0,52)|0,Z()|0,W=W&15;t:do if(!W)S=0;else for(V=1;;){if(S=lt(ne|0,L|0,(15-V|0)*3|0)|0,Z()|0,S=S&7,S|0)break t;if(V>>>0<W>>>0)V=V+1|0;else{S=0;break}}while(!1);S=(S|0)==0&1}if(L=lt(h|0,d|0,(15-he|0)*3|0)|0,Z()|0,L=L&7,(L|0)==7){x=5,V=42;break}if(S=(S|0)!=0,(L|0)==1&S){x=5,V=42;break}if(ne=L+(((L|0)!=0&S)<<31>>31)|0,ne|0&&(V=Fe-he|0,V=Bo(7,0,V,((V|0)<0)<<31>>31)|0,W=Z()|0,S?(S=wr(V|0,W|0,5,0)|0,S=fn(S|0,Z()|0,-5,-1)|0,S=nl(S|0,Z()|0,6,0)|0,S=fn(S|0,Z()|0,1,0)|0,L=Z()|0):(S=V,L=W),he=ne+-1|0,he=wr(V|0,W|0,he|0,((he|0)<0)<<31>>31|0)|0,he=fn(S|0,L|0,he|0,Z()|0)|0,ne=Z()|0,W=v,W=fn(he|0,ne|0,f[W>>2]|0,f[W+4>>2]|0)|0,ne=Z()|0,he=v,f[he>>2]=W,f[he+4>>2]=ne),(ce|0)<=(m|0)){V=37;break}}if((V|0)==19)gt(27795,27122,1276,27158);else if((V|0)==37){R=v,x=f[R+4>>2]|0,R=f[R>>2]|0;break}else if((V|0)==42)return Y=De,x|0}else x=0,R=0}else V=33;while(!1);e:do if((V|0)==33)if(fe=v,f[fe>>2]=0,f[fe+4>>2]=0,(Fe|0)>(m|0)){for(S=Fe;;){if(x=lt(h|0,d|0,(15-S|0)*3|0)|0,Z()|0,x=x&7,(x|0)==7){x=5;break}if(R=Fe-S|0,R=Bo(7,0,R,((R|0)<0)<<31>>31)|0,x=wr(R|0,Z()|0,x|0,0)|0,R=Z()|0,fe=v,R=fn(f[fe>>2]|0,f[fe+4>>2]|0,x|0,R|0)|0,x=Z()|0,fe=v,f[fe>>2]=R,f[fe+4>>2]=x,S=S+-1|0,(S|0)<=(m|0))break e}return Y=De,x|0}else x=0,R=0;while(!1);return Xl(_e,C,Fe,Me)|0&&gt(27795,27122,1236,27173),Fe=Me,Me=f[Fe+4>>2]|0,((x|0)>-1|(x|0)==-1&R>>>0>4294967295)&((Me|0)>(x|0)|((Me|0)==(x|0)?(f[Fe>>2]|0)>>>0>R>>>0:0))?(Fe=0,Y=De,Fe|0):(gt(27795,27122,1316,27158),0)}function K7(h,d,m,v,x,S){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,S=S|0;var R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0;if(ne=Y,Y=Y+16|0,R=ne,x>>>0>15)return S=4,Y=ne,S|0;if(C=lt(m|0,v|0,52)|0,Z()|0,C=C&15,(C|0)>(x|0))return S=12,Y=ne,S|0;if(Xl(m,v,x,R)|0&&gt(27795,27122,1236,27173),W=R,V=f[W+4>>2]|0,!(((d|0)>-1|(d|0)==-1&h>>>0>4294967295)&((V|0)>(d|0)|((V|0)==(d|0)?(f[W>>2]|0)>>>0>h>>>0:0))))return S=2,Y=ne,S|0;W=x-C|0,x=St(x|0,0,52)|0,L=Z()|0|v&-15728641,V=S,f[V>>2]=x|m,f[V+4>>2]=L,V=lt(m|0,v|0,45)|0,Z()|0;e:do if(ki(V&127)|0){if(C|0)for(R=1;;){if(V=St(7,0,(15-R|0)*3|0)|0,!((V&m|0)==0&((Z()|0)&v|0)==0))break e;if(R>>>0<C>>>0)R=R+1|0;else break}if((W|0)<1)return S=0,Y=ne,S|0;for(V=C^15,v=-1,L=1,R=1;;){C=W-L|0,C=Bo(7,0,C,((C|0)<0)<<31>>31)|0,m=Z()|0;do if(R)if(R=wr(C|0,m|0,5,0)|0,R=fn(R|0,Z()|0,-5,-1)|0,R=nl(R|0,Z()|0,6,0)|0,x=Z()|0,(d|0)>(x|0)|(d|0)==(x|0)&h>>>0>R>>>0){d=fn(h|0,d|0,-1,-1)|0,d=Hr(d|0,Z()|0,R|0,x|0)|0,R=Z()|0,he=S,fe=f[he>>2]|0,he=f[he+4>>2]|0,_e=(V+v|0)*3|0,ce=St(7,0,_e|0)|0,he=he&~(Z()|0),v=nl(d|0,R|0,C|0,m|0)|0,h=Z()|0,x=fn(v|0,h|0,2,0)|0,_e=St(x|0,Z()|0,_e|0)|0,he=Z()|0|he,x=S,f[x>>2]=_e|fe&~ce,f[x+4>>2]=he,h=wr(v|0,h|0,C|0,m|0)|0,h=Hr(d|0,R|0,h|0,Z()|0)|0,R=0,d=Z()|0;break}else{_e=S,ce=f[_e>>2]|0,_e=f[_e+4>>2]|0,fe=St(7,0,(V+v|0)*3|0)|0,_e=_e&~(Z()|0),R=S,f[R>>2]=ce&~fe,f[R+4>>2]=_e,R=1;break}else ce=S,x=f[ce>>2]|0,ce=f[ce+4>>2]|0,v=(V+v|0)*3|0,he=St(7,0,v|0)|0,ce=ce&~(Z()|0),_e=nl(h|0,d|0,C|0,m|0)|0,R=Z()|0,v=St(_e|0,R|0,v|0)|0,ce=Z()|0|ce,fe=S,f[fe>>2]=v|x&~he,f[fe+4>>2]=ce,R=wr(_e|0,R|0,C|0,m|0)|0,h=Hr(h|0,d|0,R|0,Z()|0)|0,R=0,d=Z()|0;while(!1);if((W|0)>(L|0))v=~L,L=L+1|0;else{d=0;break}}return Y=ne,d|0}while(!1);if((W|0)<1)return _e=0,Y=ne,_e|0;for(x=C^15,R=1;;)if(fe=W-R|0,fe=Bo(7,0,fe,((fe|0)<0)<<31>>31)|0,_e=Z()|0,L=S,m=f[L>>2]|0,L=f[L+4>>2]|0,C=(x-R|0)*3|0,v=St(7,0,C|0)|0,L=L&~(Z()|0),he=nl(h|0,d|0,fe|0,_e|0)|0,ce=Z()|0,C=St(he|0,ce|0,C|0)|0,L=Z()|0|L,V=S,f[V>>2]=C|m&~v,f[V+4>>2]=L,_e=wr(he|0,ce|0,fe|0,_e|0)|0,h=Hr(h|0,d|0,_e|0,Z()|0)|0,d=Z()|0,(W|0)<=(R|0)){d=0;break}else R=R+1|0;return Y=ne,d|0}function V3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0;x=lt(d|0,m|0,52)|0,Z()|0,x=x&15,(d|0)==0&(m|0)==0|((v|0)>15|(x|0)>(v|0))?(S=-1,d=-1,m=0,x=0):(d=B3(d,m,x+1|0,v)|0,R=(Z()|0)&-15728641,m=St(v|0,0,52)|0,m=d|m,R=R|(Z()|0),d=(Ci(m,R)|0)==0,S=x,d=d?-1:v,x=R),R=h,f[R>>2]=m,f[R+4>>2]=x,f[h+8>>2]=S,f[h+12>>2]=d}function Da(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0;if(x=lt(h|0,d|0,52)|0,Z()|0,x=x&15,S=v+8|0,f[S>>2]=x,(h|0)==0&(d|0)==0|((m|0)>15|(x|0)>(m|0))){m=v,f[m>>2]=0,f[m+4>>2]=0,f[S>>2]=-1,f[v+12>>2]=-1;return}if(h=B3(h,d,x+1|0,m)|0,S=(Z()|0)&-15728641,x=St(m|0,0,52)|0,x=h|x,S=S|(Z()|0),h=v,f[h>>2]=x,f[h+4>>2]=S,h=v+12|0,Ci(x,S)|0){f[h>>2]=m;return}else{f[h>>2]=-1;return}}function h2(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0;if(m=h,d=f[m>>2]|0,m=f[m+4>>2]|0,!((d|0)==0&(m|0)==0)&&(v=lt(d|0,m|0,52)|0,Z()|0,v=v&15,C=St(1,0,(v^15)*3|0)|0,d=fn(C|0,Z()|0,d|0,m|0)|0,m=Z()|0,C=h,f[C>>2]=d,f[C+4>>2]=m,C=h+8|0,R=f[C>>2]|0,!((v|0)<(R|0)))){for(L=h+12|0,S=v;;){if((S|0)==(R|0)){v=5;break}if(V=(S|0)==(f[L>>2]|0),x=(15-S|0)*3|0,v=lt(d|0,m|0,x|0)|0,Z()|0,v=v&7,V&((v|0)==1&!0)){v=7;break}if(!((v|0)==7&!0)){v=10;break}if(V=St(1,0,x|0)|0,d=fn(d|0,m|0,V|0,Z()|0)|0,m=Z()|0,V=h,f[V>>2]=d,f[V+4>>2]=m,(S|0)>(R|0))S=S+-1|0;else{v=10;break}}if((v|0)==5){V=h,f[V>>2]=0,f[V+4>>2]=0,f[C>>2]=-1,f[L>>2]=-1;return}else if((v|0)==7){R=St(1,0,x|0)|0,R=fn(d|0,m|0,R|0,Z()|0)|0,C=Z()|0,V=h,f[V>>2]=R,f[V+4>>2]=C,f[L>>2]=S+-1;return}else if((v|0)==10)return}}function Q1(h){h=+h;var d=0;return d=h<0?h+6.283185307179586:h,+(h>=6.283185307179586?d+-6.283185307179586:d)}function $1(h,d){return h=h|0,d=d|0,+Bn(+(+Q[h>>3]-+Q[d>>3]))<17453292519943298e-27?(d=+Bn(+(+Q[h+8>>3]-+Q[d+8>>3]))<17453292519943298e-27,d|0):(d=0,d|0)}function ws(h,d){switch(h=+h,d=d|0,d|0){case 1:{h=h<0?h+6.283185307179586:h;break}case 2:{h=h>0?h+-6.283185307179586:h;break}}return+h}function Ys(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0;return x=+Q[d>>3],v=+Q[h>>3],S=+Wn(+((x-v)*.5)),m=+Wn(+((+Q[d+8>>3]-+Q[h+8>>3])*.5)),m=S*S+m*(+fi(+x)*+fi(+v)*m),+(+Pe(+ +ri(+m),+ +ri(+(1-m)))*2)}function K1(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0;return x=+Q[d>>3],v=+Q[h>>3],S=+Wn(+((x-v)*.5)),m=+Wn(+((+Q[d+8>>3]-+Q[h+8>>3])*.5)),m=S*S+m*(+fi(+x)*+fi(+v)*m),+(+Pe(+ +ri(+m),+ +ri(+(1-m)))*2*6371.007180918475)}function da(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0;return x=+Q[d>>3],v=+Q[h>>3],S=+Wn(+((x-v)*.5)),m=+Wn(+((+Q[d+8>>3]-+Q[h+8>>3])*.5)),m=S*S+m*(+fi(+x)*+fi(+v)*m),+(+Pe(+ +ri(+m),+ +ri(+(1-m)))*2*6371.007180918475*1e3)}function Z7(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0;return S=+Q[d>>3],v=+fi(+S),x=+Q[d+8>>3]-+Q[h+8>>3],R=v*+Wn(+x),m=+Q[h>>3],+ +Pe(+R,+(+Wn(+S)*+fi(+m)-+fi(+x)*(v*+Wn(+m))))}function _0(h,d,m,v){h=h|0,d=+d,m=+m,v=v|0;var x=0,S=0,R=0,C=0;if(m<1e-16){f[v>>2]=f[h>>2],f[v+4>>2]=f[h+4>>2],f[v+8>>2]=f[h+8>>2],f[v+12>>2]=f[h+12>>2];return}S=d<0?d+6.283185307179586:d,S=d>=6.283185307179586?S+-6.283185307179586:S;do if(S<1e-16)d=+Q[h>>3]+m,Q[v>>3]=d,x=v;else{if(x=+Bn(+(S+-3.141592653589793))<1e-16,d=+Q[h>>3],x){d=d-m,Q[v>>3]=d,x=v;break}if(R=+fi(+m),m=+Wn(+m),d=R*+Wn(+d)+ +fi(+S)*(m*+fi(+d)),d=d>1?1:d,d=+ae(+(d<-1?-1:d)),Q[v>>3]=d,+Bn(+(d+-1.5707963267948966))<1e-16){Q[v>>3]=1.5707963267948966,Q[v+8>>3]=0;return}if(+Bn(+(d+1.5707963267948966))<1e-16){Q[v>>3]=-1.5707963267948966,Q[v+8>>3]=0;return}if(C=1/+fi(+d),S=m*+Wn(+S)*C,m=+Q[h>>3],d=C*((R-+Wn(+d)*+Wn(+m))/+fi(+m)),R=S>1?1:S,d=d>1?1:d,d=+Q[h+8>>3]+ +Pe(+(R<-1?-1:R),+(d<-1?-1:d)),d>3.141592653589793)do d=d+-6.283185307179586;while(d>3.141592653589793);if(d<-3.141592653589793)do d=d+6.283185307179586;while(d<-3.141592653589793);Q[v+8>>3]=d;return}while(!1);if(+Bn(+(d+-1.5707963267948966))<1e-16){Q[x>>3]=1.5707963267948966,Q[v+8>>3]=0;return}if(+Bn(+(d+1.5707963267948966))<1e-16){Q[x>>3]=-1.5707963267948966,Q[v+8>>3]=0;return}if(d=+Q[h+8>>3],d>3.141592653589793)do d=d+-6.283185307179586;while(d>3.141592653589793);if(d<-3.141592653589793)do d=d+6.283185307179586;while(d<-3.141592653589793);Q[v+8>>3]=d}function $l(h,d){return h=h|0,d=d|0,h>>>0>15?(d=4,d|0):(Q[d>>3]=+Q[20656+(h<<3)>>3],d=0,d|0)}function Z0(h,d){return h=h|0,d=d|0,h>>>0>15?(d=4,d|0):(Q[d>>3]=+Q[20784+(h<<3)>>3],d=0,d|0)}function D8(h,d){return h=h|0,d=d|0,h>>>0>15?(d=4,d|0):(Q[d>>3]=+Q[20912+(h<<3)>>3],d=0,d|0)}function B8(h,d){return h=h|0,d=d|0,h>>>0>15?(d=4,d|0):(Q[d>>3]=+Q[21040+(h<<3)>>3],d=0,d|0)}function so(h,d){h=h|0,d=d|0;var m=0;return h>>>0>15?(d=4,d|0):(m=Bo(7,0,h,((h|0)<0)<<31>>31)|0,m=wr(m|0,Z()|0,120,0)|0,h=Z()|0,f[d>>2]=m|2,f[d+4>>2]=h,d=0,d|0)}function L8(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0;return he=+Q[d>>3],W=+Q[h>>3],L=+Wn(+((he-W)*.5)),S=+Q[d+8>>3],V=+Q[h+8>>3],R=+Wn(+((S-V)*.5)),C=+fi(+W),ne=+fi(+he),R=L*L+R*(ne*C*R),R=+Pe(+ +ri(+R),+ +ri(+(1-R)))*2,L=+Q[m>>3],he=+Wn(+((L-he)*.5)),v=+Q[m+8>>3],S=+Wn(+((v-S)*.5)),x=+fi(+L),S=he*he+S*(ne*x*S),S=+Pe(+ +ri(+S),+ +ri(+(1-S)))*2,L=+Wn(+((W-L)*.5)),v=+Wn(+((V-v)*.5)),v=L*L+v*(C*x*v),v=+Pe(+ +ri(+v),+ +ri(+(1-v)))*2,x=(R+S+v)*.5,+(+Ee(+ +ri(+(+cs(+(x*.5))*+cs(+((x-R)*.5))*+cs(+((x-S)*.5))*+cs(+((x-v)*.5)))))*4)}function J0(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0;if(C=Y,Y=Y+192|0,S=C+168|0,R=C,x=K0(h,d,S)|0,x|0)return m=x,Y=C,m|0;if(Ql(h,d,R)|0&&gt(27795,27190,415,27199),d=f[R>>2]|0,(d|0)>0){if(v=+L8(R+8|0,R+8+(((d|0)!=1&1)<<4)|0,S)+0,(d|0)!=1){h=1;do x=h,h=h+1|0,v=v+ +L8(R+8+(x<<4)|0,R+8+(((h|0)%(d|0)|0)<<4)|0,S);while((h|0)<(d|0))}}else v=0;return Q[m>>3]=v,m=0,Y=C,m|0}function f2(h,d,m){return h=h|0,d=d|0,m=m|0,h=J0(h,d,m)|0,h|0||(Q[m>>3]=+Q[m>>3]*6371.007180918475*6371.007180918475),h|0}function Kl(h,d,m){return h=h|0,d=d|0,m=m|0,h=J0(h,d,m)|0,h|0||(Q[m>>3]=+Q[m>>3]*6371.007180918475*6371.007180918475*1e3*1e3),h|0}function J7(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(C=Y,Y=Y+176|0,R=C,h=ro(h,d,R)|0,h|0)return R=h,Y=C,R|0;if(Q[m>>3]=0,h=f[R>>2]|0,(h|0)<=1)return R=0,Y=C,R|0;d=h+-1|0,h=0,v=+Q[R+8>>3],x=+Q[R+16>>3],S=0;do h=h+1|0,V=v,v=+Q[R+8+(h<<4)>>3],W=+Wn(+((v-V)*.5)),L=x,x=+Q[R+8+(h<<4)+8>>3],L=+Wn(+((x-L)*.5)),L=W*W+L*(+fi(+v)*+fi(+V)*L),S=S+ +Pe(+ +ri(+L),+ +ri(+(1-L)))*2;while((h|0)<(d|0));return Q[m>>3]=S,R=0,Y=C,R|0}function ef(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(C=Y,Y=Y+176|0,R=C,h=ro(h,d,R)|0,h|0)return R=h,S=+Q[m>>3],S=S*6371.007180918475,Q[m>>3]=S,Y=C,R|0;if(Q[m>>3]=0,h=f[R>>2]|0,(h|0)<=1)return R=0,S=0,S=S*6371.007180918475,Q[m>>3]=S,Y=C,R|0;d=h+-1|0,h=0,v=+Q[R+8>>3],x=+Q[R+16>>3],S=0;do h=h+1|0,V=v,v=+Q[R+8+(h<<4)>>3],W=+Wn(+((v-V)*.5)),L=x,x=+Q[R+8+(h<<4)+8>>3],L=+Wn(+((x-L)*.5)),L=W*W+L*(+fi(+V)*+fi(+v)*L),S=S+ +Pe(+ +ri(+L),+ +ri(+(1-L)))*2;while((h|0)!=(d|0));return Q[m>>3]=S,R=0,W=S,W=W*6371.007180918475,Q[m>>3]=W,Y=C,R|0}function d2(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(C=Y,Y=Y+176|0,R=C,h=ro(h,d,R)|0,h|0)return R=h,S=+Q[m>>3],S=S*6371.007180918475,S=S*1e3,Q[m>>3]=S,Y=C,R|0;if(Q[m>>3]=0,h=f[R>>2]|0,(h|0)<=1)return R=0,S=0,S=S*6371.007180918475,S=S*1e3,Q[m>>3]=S,Y=C,R|0;d=h+-1|0,h=0,v=+Q[R+8>>3],x=+Q[R+16>>3],S=0;do h=h+1|0,V=v,v=+Q[R+8+(h<<4)>>3],W=+Wn(+((v-V)*.5)),L=x,x=+Q[R+8+(h<<4)+8>>3],L=+Wn(+((x-L)*.5)),L=W*W+L*(+fi(+V)*+fi(+v)*L),S=S+ +Pe(+ +ri(+L),+ +ri(+(1-L)))*2;while((h|0)!=(d|0));return Q[m>>3]=S,R=0,W=S,W=W*6371.007180918475,W=W*1e3,Q[m>>3]=W,Y=C,R|0}function tf(h){h=h|0;var d=0,m=0,v=0;return d=Cs(1,12)|0,d||gt(27280,27235,49,27293),m=h+4|0,v=f[m>>2]|0,v|0?(v=v+8|0,f[v>>2]=d,f[m>>2]=d,d|0):(f[h>>2]|0&&gt(27310,27235,61,27333),v=h,f[v>>2]=d,f[m>>2]=d,d|0)}function z3(h,d){h=h|0,d=d|0;var m=0,v=0;return v=oo(24)|0,v||gt(27347,27235,78,27361),f[v>>2]=f[d>>2],f[v+4>>2]=f[d+4>>2],f[v+8>>2]=f[d+8>>2],f[v+12>>2]=f[d+12>>2],f[v+16>>2]=0,d=h+4|0,m=f[d>>2]|0,m|0?(f[m+16>>2]=v,f[d>>2]=v,v|0):(f[h>>2]|0&&gt(27376,27235,82,27361),f[h>>2]=v,f[d>>2]=v,v|0)}function I8(h){h=h|0;var d=0,m=0,v=0,x=0;if(h)for(v=1;;){if(d=f[h>>2]|0,d|0)do{if(m=f[d>>2]|0,m|0)do x=m,m=f[m+16>>2]|0,An(x);while((m|0)!=0);x=d,d=f[d+8>>2]|0,An(x)}while((d|0)!=0);if(d=h,h=f[h+8>>2]|0,v||An(d),h)v=0;else break}}function U8(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0,Cn=0,Nn=0,tn=0,Qt=0,ct=0,jn=0,Ni=0,pn=0;if(x=h+8|0,f[x>>2]|0)return pn=1,pn|0;if(v=f[h>>2]|0,!v)return pn=0,pn|0;d=v,m=0;do m=m+1|0,d=f[d+8>>2]|0;while((d|0)!=0);if(m>>>0<2)return pn=0,pn|0;jn=oo(m<<2)|0,jn||gt(27396,27235,317,27415),ct=oo(m<<5)|0,ct||gt(27437,27235,321,27415),f[h>>2]=0,sn=h+4|0,f[sn>>2]=0,f[x>>2]=0,m=0,Qt=0,mt=0,ne=0;e:for(;;){if(W=f[v>>2]|0,W){S=0,R=W;do{if(L=+Q[R+8>>3],d=R,R=f[R+16>>2]|0,V=(R|0)==0,x=V?W:R,C=+Q[x+8>>3],+Bn(+(L-C))>3.141592653589793){pn=14;break}S=S+(C-L)*(+Q[d>>3]+ +Q[x>>3])}while(!V);if((pn|0)==14){pn=0,S=0,d=W;do xe=+Q[d+8>>3],tn=d+16|0,Nn=f[tn>>2]|0,Nn=(Nn|0)==0?W:Nn,Re=+Q[Nn+8>>3],S=S+(+Q[d>>3]+ +Q[Nn>>3])*((Re<0?Re+6.283185307179586:Re)-(xe<0?xe+6.283185307179586:xe)),d=f[((d|0)==0?v:tn)>>2]|0;while((d|0)!=0)}S>0?(f[jn+(Qt<<2)>>2]=v,Qt=Qt+1|0,x=mt,d=ne):pn=19}else pn=19;if((pn|0)==19){pn=0;do if(m){if(d=m+8|0,f[d>>2]|0){pn=21;break e}if(m=Cs(1,12)|0,!m){pn=23;break e}f[d>>2]=m,x=m+4|0,R=m,d=ne}else if(ne){x=sn,R=ne+8|0,d=v,m=h;break}else if(f[h>>2]|0){pn=27;break e}else{x=sn,R=h,d=v,m=h;break}while(!1);if(f[R>>2]=v,f[x>>2]=v,R=ct+(mt<<5)|0,V=f[v>>2]|0,V){for(W=ct+(mt<<5)+8|0,Q[W>>3]=17976931348623157e292,ne=ct+(mt<<5)+24|0,Q[ne>>3]=17976931348623157e292,Q[R>>3]=-17976931348623157e292,he=ct+(mt<<5)+16|0,Q[he>>3]=-17976931348623157e292,Fe=17976931348623157e292,De=-17976931348623157e292,x=0,ce=V,L=17976931348623157e292,_e=17976931348623157e292,Me=-17976931348623157e292,C=-17976931348623157e292;S=+Q[ce>>3],xe=+Q[ce+8>>3],ce=f[ce+16>>2]|0,fe=(ce|0)==0,Re=+Q[(fe?V:ce)+8>>3],S<L&&(Q[W>>3]=S,L=S),xe<_e&&(Q[ne>>3]=xe,_e=xe),S>Me?Q[R>>3]=S:S=Me,xe>C&&(Q[he>>3]=xe,C=xe),Fe=xe>0&xe<Fe?xe:Fe,De=xe<0&xe>De?xe:De,x=x|+Bn(+(xe-Re))>3.141592653589793,!fe;)Me=S;x&&(Q[he>>3]=De,Q[ne>>3]=Fe)}else f[R>>2]=0,f[R+4>>2]=0,f[R+8>>2]=0,f[R+12>>2]=0,f[R+16>>2]=0,f[R+20>>2]=0,f[R+24>>2]=0,f[R+28>>2]=0;x=mt+1|0}if(tn=v+8|0,v=f[tn>>2]|0,f[tn>>2]=0,v)mt=x,ne=d;else{pn=45;break}}if((pn|0)==21)gt(27213,27235,35,27247);else if((pn|0)==23)gt(27267,27235,37,27247);else if((pn|0)==27)gt(27310,27235,61,27333);else if((pn|0)==45){e:do if((Qt|0)>0){for(tn=(x|0)==0,Cn=x<<2,Nn=(h|0)==0,Ln=0,d=0;;){if(Xt=f[jn+(Ln<<2)>>2]|0,tn)pn=73;else{if(mt=oo(Cn)|0,!mt){pn=50;break}if(sn=oo(Cn)|0,!sn){pn=52;break}t:do if(Nn)m=0;else{for(x=0,m=0,R=h;v=ct+(x<<5)|0,G3(f[R>>2]|0,v,f[Xt>>2]|0)|0?(f[mt+(m<<2)>>2]=R,f[sn+(m<<2)>>2]=v,fe=m+1|0):fe=m,R=f[R+8>>2]|0,R;)x=x+1|0,m=fe;if((fe|0)>0)if(v=f[mt>>2]|0,(fe|0)==1)m=v;else for(he=0,ce=-1,m=v,ne=v;;){for(V=f[ne>>2]|0,v=0,R=0;x=f[f[mt+(R<<2)>>2]>>2]|0,(x|0)==(V|0)?W=v:W=v+((G3(x,f[sn+(R<<2)>>2]|0,f[V>>2]|0)|0)&1)|0,R=R+1|0,(R|0)!=(fe|0);)v=W;if(x=(W|0)>(ce|0),m=x?ne:m,v=he+1|0,(v|0)==(fe|0))break t;he=v,ce=x?W:ce,ne=f[mt+(v<<2)>>2]|0}else m=0}while(!1);if(An(mt),An(sn),m){if(x=m+4|0,v=f[x>>2]|0,v)m=v+8|0;else if(f[m>>2]|0){pn=70;break}f[m>>2]=Xt,f[x>>2]=Xt}else pn=73}if((pn|0)==73){if(pn=0,d=f[Xt>>2]|0,d|0)do sn=d,d=f[d+16>>2]|0,An(sn);while((d|0)!=0);An(Xt),d=1}if(Ln=Ln+1|0,(Ln|0)>=(Qt|0)){Ni=d;break e}}(pn|0)==50?gt(27452,27235,249,27471):(pn|0)==52?gt(27490,27235,252,27471):(pn|0)==70&&gt(27310,27235,61,27333)}else Ni=0;while(!1);return An(jn),An(ct),pn=Ni,pn|0}return 0}function G3(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(!(m8(d,m)|0)||(d=p8(d)|0,v=+Q[m>>3],x=+Q[m+8>>3],x=d&x<0?x+6.283185307179586:x,h=f[h>>2]|0,!h))return h=0,h|0;if(d){d=0,V=x,m=h;e:for(;;){for(;R=+Q[m>>3],x=+Q[m+8>>3],m=m+16|0,W=f[m>>2]|0,W=(W|0)==0?h:W,S=+Q[W>>3],C=+Q[W+8>>3],R>S?(L=R,R=C):(L=S,S=R,R=x,x=C),v=v==S|v==L?v+2220446049250313e-31:v,!!(v<S|v>L);)if(m=f[m>>2]|0,!m){m=22;break e}if(C=R<0?R+6.283185307179586:R,R=x<0?x+6.283185307179586:x,V=C==V|R==V?V+-2220446049250313e-31:V,L=C+(R-C)*((v-S)/(L-S)),(L<0?L+6.283185307179586:L)>V&&(d=d^1),m=f[m>>2]|0,!m){m=22;break}}if((m|0)==22)return d|0}else{d=0,V=x,m=h;e:for(;;){for(;R=+Q[m>>3],x=+Q[m+8>>3],m=m+16|0,W=f[m>>2]|0,W=(W|0)==0?h:W,S=+Q[W>>3],C=+Q[W+8>>3],R>S?(L=R,R=C):(L=S,S=R,R=x,x=C),v=v==S|v==L?v+2220446049250313e-31:v,!!(v<S|v>L);)if(m=f[m>>2]|0,!m){m=22;break e}if(V=R==V|x==V?V+-2220446049250313e-31:V,R+(x-R)*((v-S)/(L-S))>V&&(d=d^1),m=f[m>>2]|0,!m){m=22;break}}if((m|0)==22)return d|0}return 0}function ao(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0;if(De=Y,Y=Y+32|0,Fe=De+16|0,Me=De,S=lt(h|0,d|0,52)|0,Z()|0,S=S&15,ce=lt(m|0,v|0,52)|0,Z()|0,(S|0)!=(ce&15|0))return Fe=12,Y=De,Fe|0;if(V=lt(h|0,d|0,45)|0,Z()|0,V=V&127,W=lt(m|0,v|0,45)|0,Z()|0,W=W&127,V>>>0>121|W>>>0>121)return Fe=5,Y=De,Fe|0;if(ce=(V|0)!=(W|0),ce){if(C=M3(V,W)|0,(C|0)==7)return Fe=1,Y=De,Fe|0;L=M3(W,V)|0,(L|0)==7?gt(27514,27538,161,27548):(fe=C,R=L)}else fe=0,R=0;ne=ki(V)|0,he=ki(W)|0,f[Fe>>2]=0,f[Fe+4>>2]=0,f[Fe+8>>2]=0,f[Fe+12>>2]=0;do if(fe){if(W=f[4272+(V*28|0)+(fe<<2)>>2]|0,C=(W|0)>0,he)if(C){V=0,L=m,C=v;do L=c2(L,C)|0,C=Z()|0,R=d0(R)|0,(R|0)==1&&(R=d0(1)|0),V=V+1|0;while((V|0)!=(W|0));W=R,V=L,L=C}else W=R,V=m,L=v;else if(C){V=0,L=m,C=v;do L=Do(L,C)|0,C=Z()|0,R=d0(R)|0,V=V+1|0;while((V|0)!=(W|0));W=R,V=L,L=C}else W=R,V=m,L=v;if(Es(V,L,Fe)|0,ce||gt(27563,27538,191,27548),C=(ne|0)!=0,R=(he|0)!=0,C&R&&gt(27590,27538,192,27548),C){if(R=Xs(h,d)|0,(R|0)==7){S=5;break}if(rt[22e3+(R*7|0)+fe>>0]|0){S=1;break}L=f[21168+(R*28|0)+(fe<<2)>>2]|0,V=L}else if(R){if(R=Xs(V,L)|0,(R|0)==7){S=5;break}if(rt[22e3+(R*7|0)+W>>0]|0){S=1;break}V=0,L=f[21168+(W*28|0)+(R<<2)>>2]|0}else V=0,L=0;if((V|L|0)<0)S=5;else{if((L|0)>0){C=Fe+4|0,R=0;do X1(C),R=R+1|0;while((R|0)!=(L|0))}if(f[Me>>2]=0,f[Me+4>>2]=0,f[Me+8>>2]=0,x8(Me,fe),S|0)for(;fa(S)|0?s2(Me):Y0(Me),(S|0)>1;)S=S+-1|0;if((V|0)>0){S=0;do X1(Me),S=S+1|0;while((S|0)!=(V|0))}_e=Fe+4|0,As(_e,Me,_e),yr(_e),_e=51}}else if(Es(m,v,Fe)|0,(ne|0)!=0&(he|0)!=0)if((W|0)!=(V|0)&&gt(27621,27538,261,27548),R=Xs(h,d)|0,S=Xs(m,v)|0,(R|0)==7|(S|0)==7)S=5;else if(rt[22e3+(R*7|0)+S>>0]|0)S=1;else if(R=f[21168+(R*28|0)+(S<<2)>>2]|0,(R|0)>0){C=Fe+4|0,S=0;do X1(C),S=S+1|0;while((S|0)!=(R|0));_e=51}else _e=51;else _e=51;while(!1);return(_e|0)==51&&(S=Fe+4|0,f[x>>2]=f[S>>2],f[x+4>>2]=f[S+4>>2],f[x+8>>2]=f[S+8>>2],S=0),Fe=S,Y=De,Fe|0}function O8(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0;if(_e=Y,Y=Y+48|0,V=_e+36|0,R=_e+24|0,C=_e+12|0,L=_e,x=lt(h|0,d|0,52)|0,Z()|0,x=x&15,he=lt(h|0,d|0,45)|0,Z()|0,he=he&127,he>>>0>121)return v=5,Y=_e,v|0;if(W=ki(he)|0,St(x|0,0,52)|0,Me=Z()|0|134225919,S=v,f[S>>2]=-1,f[S+4>>2]=Me,!x)return x=r2(m)|0,(x|0)==7||(x=T3(he,x)|0,(x|0)==127)?(Me=1,Y=_e,Me|0):(ce=St(x|0,0,45)|0,fe=Z()|0,he=v,fe=f[he+4>>2]&-1040385|fe,Me=v,f[Me>>2]=f[he>>2]|ce,f[Me+4>>2]=fe,Me=0,Y=_e,Me|0);for(f[V>>2]=f[m>>2],f[V+4>>2]=f[m+4>>2],f[V+8>>2]=f[m+8>>2],m=x;;){if(S=m,m=m+-1|0,f[R>>2]=f[V>>2],f[R+4>>2]=f[V+4>>2],f[R+8>>2]=f[V+8>>2],fa(S)|0){if(x=bm(V)|0,x|0){m=13;break}f[C>>2]=f[V>>2],f[C+4>>2]=f[V+4>>2],f[C+8>>2]=f[V+8>>2],s2(C)}else{if(x=es(V)|0,x|0){m=13;break}f[C>>2]=f[V>>2],f[C+4>>2]=f[V+4>>2],f[C+8>>2]=f[V+8>>2],Y0(C)}if(i2(R,C,L),yr(L),x=v,De=f[x>>2]|0,x=f[x+4>>2]|0,Re=(15-S|0)*3|0,Fe=St(7,0,Re|0)|0,x=x&~(Z()|0),Re=St(r2(L)|0,0,Re|0)|0,x=Z()|0|x,Me=v,f[Me>>2]=Re|De&~Fe,f[Me+4>>2]=x,(S|0)<=1){m=14;break}}e:do if((m|0)!=13&&(m|0)==14)if((f[V>>2]|0)<=1&&(f[V+4>>2]|0)<=1&&(f[V+8>>2]|0)<=1){m=r2(V)|0,x=T3(he,m)|0,(x|0)==127?L=0:L=ki(x)|0;t:do if(m){if(W){if(x=Xs(h,d)|0,(x|0)==7){x=5;break e}if(S=f[21376+(x*28|0)+(m<<2)>>2]|0,(S|0)>0){x=m,m=0;do x=Q0(x)|0,m=m+1|0;while((m|0)!=(S|0))}else x=m;if((x|0)==1){x=9;break e}m=T3(he,x)|0,(m|0)==127&&gt(27648,27538,411,27678),ki(m)|0?gt(27693,27538,412,27678):(fe=m,ce=S,ne=x)}else fe=x,ce=0,ne=m;if(C=f[4272+(he*28|0)+(ne<<2)>>2]|0,(C|0)<=-1&&gt(27724,27538,419,27678),!L){if((ce|0)<0){x=5;break e}if(ce|0){S=v,x=0,m=f[S>>2]|0,S=f[S+4>>2]|0;do m=$0(m,S)|0,S=Z()|0,Re=v,f[Re>>2]=m,f[Re+4>>2]=S,x=x+1|0;while((x|0)<(ce|0))}if((C|0)<=0){x=fe,m=58;break}for(S=v,x=0,m=f[S>>2]|0,S=f[S+4>>2]|0;;)if(m=$0(m,S)|0,S=Z()|0,Re=v,f[Re>>2]=m,f[Re+4>>2]=S,x=x+1|0,(x|0)==(C|0)){x=fe,m=58;break t}}if(R=M3(fe,he)|0,(R|0)==7&&gt(27514,27538,428,27678),x=v,m=f[x>>2]|0,x=f[x+4>>2]|0,(C|0)>0){S=0;do m=$0(m,x)|0,x=Z()|0,Re=v,f[Re>>2]=m,f[Re+4>>2]=x,S=S+1|0;while((S|0)!=(C|0))}if(x=Xs(m,x)|0,(x|0)==7&&gt(27795,27538,440,27678),m=b3(fe)|0,m=f[(m?21792:21584)+(R*28|0)+(x<<2)>>2]|0,(m|0)<0&&gt(27795,27538,454,27678),!m)x=fe,m=58;else{R=v,x=0,S=f[R>>2]|0,R=f[R+4>>2]|0;do S=N8(S,R)|0,R=Z()|0,Re=v,f[Re>>2]=S,f[Re+4>>2]=R,x=x+1|0;while((x|0)<(m|0));x=fe,m=58}}else if((W|0)!=0&(L|0)!=0){if(m=Xs(h,d)|0,S=v,S=Xs(f[S>>2]|0,f[S+4>>2]|0)|0,(m|0)==7|(S|0)==7){x=5;break e}if(S=f[21376+(m*28|0)+(S<<2)>>2]|0,(S|0)<0){x=5;break e}if(!S)m=59;else{C=v,m=0,R=f[C>>2]|0,C=f[C+4>>2]|0;do R=$0(R,C)|0,C=Z()|0,Re=v,f[Re>>2]=R,f[Re+4>>2]=C,m=m+1|0;while((m|0)<(S|0));m=58}}else m=58;while(!1);if((m|0)==58&&L&&(m=59),(m|0)==59&&(Re=v,(Xs(f[Re>>2]|0,f[Re+4>>2]|0)|0)==1)){x=9;break}Re=v,Fe=f[Re>>2]|0,Re=f[Re+4>>2]&-1040385,De=St(x|0,0,45)|0,Re=Re|(Z()|0),x=v,f[x>>2]=Fe|De,f[x+4>>2]=Re,x=0}else x=1;while(!1);return Re=x,Y=_e,Re|0}function F8(h,d,m,v,x,S){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,S=S|0;var R=0,C=0;return C=Y,Y=Y+16|0,R=C,x?h=15:(h=ao(h,d,m,v,R)|0,h||(k7(R,S),h=0)),Y=C,h|0}function Aa(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0;return R=Y,Y=Y+16|0,S=R,v?m=15:(m=S8(m,S)|0,m||(m=O8(h,d,S,x)|0)),Y=R,m|0}function nf(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0;return L=Y,Y=Y+32|0,R=L+12|0,C=L,S=ao(h,d,h,d,R)|0,S|0?(C=S,Y=L,C|0):(h=ao(h,d,m,v,C)|0,h|0?(C=h,Y=L,C|0):(R=a2(R,C)|0,C=x,f[C>>2]=R,f[C+4>>2]=((R|0)<0)<<31>>31,C=0,Y=L,C|0))}function Rs(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0;return L=Y,Y=Y+32|0,R=L+12|0,C=L,S=ao(h,d,h,d,R)|0,!S&&(S=ao(h,d,m,v,C)|0,!S)?(v=a2(R,C)|0,v=fn(v|0,((v|0)<0)<<31>>31|0,1,0)|0,R=Z()|0,C=x,f[C>>2]=v,f[C+4>>2]=R,C=0,Y=L,C|0):(C=S,Y=L,C|0)}function rf(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0;if(Xt=Y,Y=Y+48|0,mt=Xt+24|0,R=Xt+12|0,sn=Xt,S=ao(h,d,h,d,mt)|0,!S&&(S=ao(h,d,m,v,R)|0,!S)){Re=a2(mt,R)|0,xe=((Re|0)<0)<<31>>31,f[mt>>2]=0,f[mt+4>>2]=0,f[mt+8>>2]=0,f[R>>2]=0,f[R+4>>2]=0,f[R+8>>2]=0,ao(h,d,h,d,mt)|0&&gt(27795,27538,692,27747),ao(h,d,m,v,R)|0&&gt(27795,27538,697,27747),C3(mt),C3(R),W=(Re|0)==0?0:1/+(Re|0),m=f[mt>>2]|0,_e=W*+((f[R>>2]|0)-m|0),Me=mt+4|0,v=f[Me>>2]|0,Fe=W*+((f[R+4>>2]|0)-v|0),De=mt+8|0,S=f[De>>2]|0,W=W*+((f[R+8>>2]|0)-S|0),f[sn>>2]=m,ne=sn+4|0,f[ne>>2]=v,he=sn+8|0,f[he>>2]=S;e:do if((Re|0)<0)S=0;else for(ce=0,fe=0;;){L=+(fe>>>0)+4294967296*+(ce|0),Ln=_e*L+ +(m|0),C=Fe*L+ +(v|0),L=W*L+ +(S|0),m=~~+lo(+Ln),R=~~+lo(+C),S=~~+lo(+L),Ln=+Bn(+(+(m|0)-Ln)),C=+Bn(+(+(R|0)-C)),L=+Bn(+(+(S|0)-L));do if(Ln>C&Ln>L)m=0-(R+S)|0,v=R;else if(V=0-m|0,C>L){v=V-S|0;break}else{v=R,S=V-R|0;break}while(!1);if(f[sn>>2]=m,f[ne>>2]=v,f[he>>2]=S,T8(sn),S=O8(h,d,sn,x+(fe<<3)|0)|0,S|0)break e;if(!((ce|0)<(xe|0)|(ce|0)==(xe|0)&fe>>>0<Re>>>0)){S=0;break e}m=fn(fe|0,ce|0,1,0)|0,v=Z()|0,ce=v,fe=m,m=f[mt>>2]|0,v=f[Me>>2]|0,S=f[De>>2]|0}while(!1);return sn=S,Y=Xt,sn|0}return sn=S,Y=Xt,sn|0}function Bo(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0;if((m|0)==0&(v|0)==0)return x=0,S=1,ot(x|0),S|0;S=h,x=d,h=1,d=0;do R=(m&1|0)==0&!0,h=wr((R?1:S)|0,(R?0:x)|0,h|0,d|0)|0,d=Z()|0,m=Jl(m|0,v|0,1)|0,v=Z()|0,S=wr(S|0,x|0,S|0,x|0)|0,x=Z()|0;while(!((m|0)==0&(v|0)==0));return ot(d|0),h|0}function q3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0;C=Y,Y=Y+16|0,S=C,R=lt(h|0,d|0,52)|0,Z()|0,R=R&15;do if(R){if(x=K0(h,d,S)|0,!x){V=+Q[S>>3],L=1/+fi(+V),W=+Q[25968+(R<<3)>>3],Q[m>>3]=V+W,Q[m+8>>3]=V-W,V=+Q[S+8>>3],L=W*L,Q[m+16>>3]=L+V,Q[m+24>>3]=V-L;break}return R=x,Y=C,R|0}else{if(x=lt(h|0,d|0,45)|0,Z()|0,x=x&127,x>>>0>121)return R=5,Y=C,R|0;S=22064+(x<<5)|0,f[m>>2]=f[S>>2],f[m+4>>2]=f[S+4>>2],f[m+8>>2]=f[S+8>>2],f[m+12>>2]=f[S+12>>2],f[m+16>>2]=f[S+16>>2],f[m+20>>2]=f[S+20>>2],f[m+24>>2]=f[S+24>>2],f[m+28>>2]=f[S+28>>2];break}while(!1);return y8(m,v?1.4:1.1),v=26096+(R<<3)|0,(f[v>>2]|0)==(h|0)&&(f[v+4>>2]|0)==(d|0)&&(Q[m>>3]=1.5707963267948966),R=26224+(R<<3)|0,(f[R>>2]|0)==(h|0)&&(f[R+4>>2]|0)==(d|0)&&(Q[m+8>>3]=-1.5707963267948966),+Q[m>>3]!=1.5707963267948966&&+Q[m+8>>3]!=-1.5707963267948966?(R=0,Y=C,R|0):(Q[m+16>>3]=3.141592653589793,Q[m+24>>3]=-3.141592653589793,R=0,Y=C,R|0)}function Mm(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0;V=Y,Y=Y+48|0,R=V+32|0,S=V+40|0,C=V,Ms(R,0,0,0),L=f[R>>2]|0,R=f[R+4>>2]|0;do if(m>>>0<=15){if(x=eu(v)|0,x|0){v=C,f[v>>2]=0,f[v+4>>2]=0,f[C+8>>2]=x,f[C+12>>2]=-1,v=C+16|0,L=C+29|0,f[v>>2]=0,f[v+4>>2]=0,f[v+8>>2]=0,rt[v+12>>0]=0,rt[L>>0]=rt[S>>0]|0,rt[L+1>>0]=rt[S+1>>0]|0,rt[L+2>>0]=rt[S+2>>0]|0;break}if(x=Cs((f[d+8>>2]|0)+1|0,32)|0,x){k3(d,x),W=C,f[W>>2]=L,f[W+4>>2]=R,f[C+8>>2]=0,f[C+12>>2]=m,f[C+16>>2]=v,f[C+20>>2]=d,f[C+24>>2]=x,rt[C+28>>0]=0,L=C+29|0,rt[L>>0]=rt[S>>0]|0,rt[L+1>>0]=rt[S+1>>0]|0,rt[L+2>>0]=rt[S+2>>0]|0;break}else{v=C,f[v>>2]=0,f[v+4>>2]=0,f[C+8>>2]=13,f[C+12>>2]=-1,v=C+16|0,L=C+29|0,f[v>>2]=0,f[v+4>>2]=0,f[v+8>>2]=0,rt[v+12>>0]=0,rt[L>>0]=rt[S>>0]|0,rt[L+1>>0]=rt[S+1>>0]|0,rt[L+2>>0]=rt[S+2>>0]|0;break}}else L=C,f[L>>2]=0,f[L+4>>2]=0,f[C+8>>2]=4,f[C+12>>2]=-1,L=C+16|0,W=C+29|0,f[L>>2]=0,f[L+4>>2]=0,f[L+8>>2]=0,rt[L+12>>0]=0,rt[W>>0]=rt[S>>0]|0,rt[W+1>>0]=rt[S+1>>0]|0,rt[W+2>>0]=rt[S+2>>0]|0;while(!1);Ba(C),f[h>>2]=f[C>>2],f[h+4>>2]=f[C+4>>2],f[h+8>>2]=f[C+8>>2],f[h+12>>2]=f[C+12>>2],f[h+16>>2]=f[C+16>>2],f[h+20>>2]=f[C+20>>2],f[h+24>>2]=f[C+24>>2],f[h+28>>2]=f[C+28>>2],Y=V}function Ba(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0;if(xe=Y,Y=Y+336|0,ce=xe+168|0,fe=xe,v=h,m=f[v>>2]|0,v=f[v+4>>2]|0,(m|0)==0&(v|0)==0){Y=xe;return}if(d=h+28|0,rt[d>>0]|0?(m=V8(m,v)|0,v=Z()|0):rt[d>>0]=1,Re=h+20|0,!(f[f[Re>>2]>>2]|0)){d=h+24|0,m=f[d>>2]|0,m|0&&An(m),De=h,f[De>>2]=0,f[De+4>>2]=0,f[h+8>>2]=0,f[Re>>2]=0,f[h+12>>2]=-1,f[h+16>>2]=0,f[d>>2]=0,Y=xe;return}De=h+16|0,d=f[De>>2]|0,x=d&15;e:do if((m|0)==0&(v|0)==0)Fe=h+24|0;else{_e=h+12|0,ne=(x|0)==3,W=d&255,L=(x|1|0)==3,he=h+24|0,V=(x+-1|0)>>>0<3,R=(x|2|0)==3,C=fe+8|0;t:for(;;){if(S=lt(m|0,v|0,52)|0,Z()|0,S=S&15,(S|0)==(f[_e>>2]|0)){switch(W&15){case 0:case 2:case 3:{if(x=K0(m,v,ce)|0,x|0){Me=15;break t}if(A2(f[Re>>2]|0,f[he>>2]|0,ce)|0){Me=19;break t}break}}if(L&&(x=f[(f[Re>>2]|0)+4>>2]|0,f[ce>>2]=f[x>>2],f[ce+4>>2]=f[x+4>>2],f[ce+8>>2]=f[x+8>>2],f[ce+12>>2]=f[x+12>>2],m8(26832,ce)|0)){if(v0(f[(f[Re>>2]|0)+4>>2]|0,S,fe)|0){Me=25;break}if(x=fe,(f[x>>2]|0)==(m|0)&&(f[x+4>>2]|0)==(v|0)){Me=29;break}}if(V){if(x=Ql(m,v,ce)|0,x|0){Me=32;break}if(q3(m,v,fe,0)|0){Me=36;break}if(R&&H3(f[Re>>2]|0,f[he>>2]|0,ce,fe)|0){Me=42;break}if(L&&sf(f[Re>>2]|0,f[he>>2]|0,ce,fe)|0){Me=42;break}}if(ne){if(d=q3(m,v,ce,1)|0,x=f[he>>2]|0,d|0){Me=45;break}if(E3(x,ce)|0){if(n2(fe,ce),w3(ce,f[he>>2]|0)|0){Me=53;break}if(A2(f[Re>>2]|0,f[he>>2]|0,C)|0){Me=53;break}if(sf(f[Re>>2]|0,f[he>>2]|0,fe,ce)|0){Me=53;break}}}}do if((S|0)<(f[_e>>2]|0)){if(d=q3(m,v,ce,1)|0,x=f[he>>2]|0,d|0){Me=58;break t}if(!(E3(x,ce)|0)){Me=73;break}if(w3(f[he>>2]|0,ce)|0&&(n2(fe,ce),H3(f[Re>>2]|0,f[he>>2]|0,fe,ce)|0)){Me=65;break t}if(m=L3(m,v,S+1|0,fe)|0,m|0){Me=67;break t}v=fe,m=f[v>>2]|0,v=f[v+4>>2]|0}else Me=73;while(!1);if((Me|0)==73&&(Me=0,m=V8(m,v)|0,v=Z()|0),(m|0)==0&(v|0)==0){Fe=he;break e}}switch(Me|0){case 15:{d=f[he>>2]|0,d|0&&An(d),Me=h,f[Me>>2]=0,f[Me+4>>2]=0,f[Re>>2]=0,f[_e>>2]=-1,f[De>>2]=0,f[he>>2]=0,f[h+8>>2]=x,Me=20;break}case 19:{f[h>>2]=m,f[h+4>>2]=v,Me=20;break}case 25:{gt(27795,27761,470,27772);break}case 29:{f[h>>2]=m,f[h+4>>2]=v,Y=xe;return}case 32:{d=f[he>>2]|0,d|0&&An(d),Fe=h,f[Fe>>2]=0,f[Fe+4>>2]=0,f[Re>>2]=0,f[_e>>2]=-1,f[De>>2]=0,f[he>>2]=0,f[h+8>>2]=x,Y=xe;return}case 36:{gt(27795,27761,493,27772);break}case 42:{f[h>>2]=m,f[h+4>>2]=v,Y=xe;return}case 45:{x|0&&An(x),Me=h,f[Me>>2]=0,f[Me+4>>2]=0,f[Re>>2]=0,f[_e>>2]=-1,f[De>>2]=0,f[he>>2]=0,f[h+8>>2]=d,Me=55;break}case 53:{f[h>>2]=m,f[h+4>>2]=v,Me=55;break}case 58:{x|0&&An(x),Me=h,f[Me>>2]=0,f[Me+4>>2]=0,f[Re>>2]=0,f[_e>>2]=-1,f[De>>2]=0,f[he>>2]=0,f[h+8>>2]=d,Me=71;break}case 65:{f[h>>2]=m,f[h+4>>2]=v,Me=71;break}case 67:{d=f[he>>2]|0,d|0&&An(d),Fe=h,f[Fe>>2]=0,f[Fe+4>>2]=0,f[Re>>2]=0,f[_e>>2]=-1,f[De>>2]=0,f[he>>2]=0,f[h+8>>2]=m,Y=xe;return}}if((Me|0)==20){Y=xe;return}else if((Me|0)==55){Y=xe;return}else if((Me|0)==71){Y=xe;return}}while(!1);d=f[Fe>>2]|0,d|0&&An(d),Me=h,f[Me>>2]=0,f[Me+4>>2]=0,f[h+8>>2]=0,f[Re>>2]=0,f[h+12>>2]=-1,f[De>>2]=0,f[Fe>>2]=0,Y=xe}function V8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0;ne=Y,Y=Y+16|0,W=ne,v=lt(h|0,d|0,52)|0,Z()|0,v=v&15,m=lt(h|0,d|0,45)|0,Z()|0;do if(v){for(;m=St(v+4095|0,0,52)|0,x=Z()|0|d&-15728641,S=(15-v|0)*3|0,R=St(7,0,S|0)|0,C=Z()|0,m=m|h|R,x=x|C,L=lt(h|0,d|0,S|0)|0,Z()|0,L=L&7,v=v+-1|0,!(L>>>0<6);)if(v)d=x,h=m;else{V=4;break}if((V|0)==4){m=lt(m|0,x|0,45)|0,Z()|0;break}return W=(L|0)==0&(Ci(m,x)|0)!=0,W=St((W?2:1)+L|0,0,S|0)|0,V=Z()|0|d&~C,W=W|h&~R,ot(V|0),Y=ne,W|0}while(!1);return m=m&127,m>>>0>120?(V=0,W=0,ot(V|0),Y=ne,W|0):(Ms(W,0,m+1|0,0),V=f[W+4>>2]|0,W=f[W>>2]|0,ot(V|0),Y=ne,W|0)}function z8(h,d,m,v,x,S){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0,S=S|0;var R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0;Me=Y,Y=Y+160|0,ne=Me+80|0,C=Me+64|0,he=Me+112|0,_e=Me,Mm(ne,h,d,m),V=ne,V3(C,f[V>>2]|0,f[V+4>>2]|0,d),V=C,L=f[V>>2]|0,V=f[V+4>>2]|0,R=f[ne+8>>2]|0,ce=he+4|0,f[ce>>2]=f[ne>>2],f[ce+4>>2]=f[ne+4>>2],f[ce+8>>2]=f[ne+8>>2],f[ce+12>>2]=f[ne+12>>2],f[ce+16>>2]=f[ne+16>>2],f[ce+20>>2]=f[ne+20>>2],f[ce+24>>2]=f[ne+24>>2],f[ce+28>>2]=f[ne+28>>2],ce=_e,f[ce>>2]=L,f[ce+4>>2]=V,ce=_e+8|0,f[ce>>2]=R,h=_e+12|0,d=he,m=h+36|0;do f[h>>2]=f[d>>2],h=h+4|0,d=d+4|0;while((h|0)<(m|0));if(he=_e+48|0,f[he>>2]=f[C>>2],f[he+4>>2]=f[C+4>>2],f[he+8>>2]=f[C+8>>2],f[he+12>>2]=f[C+12>>2],(L|0)==0&(V|0)==0)return _e=R,Y=Me,_e|0;m=_e+16|0,W=_e+24|0,ne=_e+28|0,R=0,C=0,d=L,h=V;do{if(!((R|0)<(x|0)|(R|0)==(x|0)&C>>>0<v>>>0)){fe=4;break}if(V=C,C=fn(C|0,R|0,1,0)|0,R=Z()|0,V=S+(V<<3)|0,f[V>>2]=d,f[V+4>>2]=h,h2(he),h=he,d=f[h>>2]|0,h=f[h+4>>2]|0,(d|0)==0&(h|0)==0){if(Ba(m),d=m,h=f[d>>2]|0,d=f[d+4>>2]|0,(h|0)==0&(d|0)==0){fe=10;break}Da(h,d,f[ne>>2]|0,he),h=he,d=f[h>>2]|0,h=f[h+4>>2]|0}V=_e,f[V>>2]=d,f[V+4>>2]=h}while(!((d|0)==0&(h|0)==0));return(fe|0)==4?(h=_e+40|0,d=f[h>>2]|0,d|0&&An(d),fe=_e+16|0,f[fe>>2]=0,f[fe+4>>2]=0,f[W>>2]=0,f[_e+36>>2]=0,f[ne>>2]=-1,f[_e+32>>2]=0,f[h>>2]=0,Da(0,0,0,he),f[_e>>2]=0,f[_e+4>>2]=0,f[ce>>2]=0,_e=14,Y=Me,_e|0):((fe|0)==10&&(f[_e>>2]=0,f[_e+4>>2]=0,f[ce>>2]=f[W>>2]),_e=f[ce>>2]|0,Y=Me,_e|0)}function Z1(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0;if(ne=Y,Y=Y+48|0,L=ne+32|0,C=ne+40|0,V=ne,!(f[h>>2]|0))return W=v,f[W>>2]=0,f[W+4>>2]=0,W=0,Y=ne,W|0;Ms(L,0,0,0),R=L,x=f[R>>2]|0,R=f[R+4>>2]|0;do if(d>>>0>15)W=V,f[W>>2]=0,f[W+4>>2]=0,f[V+8>>2]=4,f[V+12>>2]=-1,W=V+16|0,m=V+29|0,f[W>>2]=0,f[W+4>>2]=0,f[W+8>>2]=0,rt[W+12>>0]=0,rt[m>>0]=rt[C>>0]|0,rt[m+1>>0]=rt[C+1>>0]|0,rt[m+2>>0]=rt[C+2>>0]|0,m=4,W=9;else{if(m=eu(m)|0,m|0){L=V,f[L>>2]=0,f[L+4>>2]=0,f[V+8>>2]=m,f[V+12>>2]=-1,L=V+16|0,W=V+29|0,f[L>>2]=0,f[L+4>>2]=0,f[L+8>>2]=0,rt[L+12>>0]=0,rt[W>>0]=rt[C>>0]|0,rt[W+1>>0]=rt[C+1>>0]|0,rt[W+2>>0]=rt[C+2>>0]|0,W=9;break}if(m=Cs((f[h+8>>2]|0)+1|0,32)|0,!m){W=V,f[W>>2]=0,f[W+4>>2]=0,f[V+8>>2]=13,f[V+12>>2]=-1,W=V+16|0,m=V+29|0,f[W>>2]=0,f[W+4>>2]=0,f[W+8>>2]=0,rt[W+12>>0]=0,rt[m>>0]=rt[C>>0]|0,rt[m+1>>0]=rt[C+1>>0]|0,rt[m+2>>0]=rt[C+2>>0]|0,m=13,W=9;break}k3(h,m),ce=V,f[ce>>2]=x,f[ce+4>>2]=R,R=V+8|0,f[R>>2]=0,f[V+12>>2]=d,f[V+20>>2]=h,f[V+24>>2]=m,rt[V+28>>0]=0,x=V+29|0,rt[x>>0]=rt[C>>0]|0,rt[x+1>>0]=rt[C+1>>0]|0,rt[x+2>>0]=rt[C+2>>0]|0,f[V+16>>2]=3,he=+xm(m),he=he*+F7(m),S=+Bn(+ +Q[m>>3]),S=he/+fi(+ +m2(+S,+ +Bn(+ +Q[m+8>>3])))*6371.007180918475*6371.007180918475,x=V+12|0,m=f[x>>2]|0;e:do if((m|0)>0)do{if($l(m+-1|0,L)|0,!(S/+Q[L>>3]>10))break e;ce=f[x>>2]|0,m=ce+-1|0,f[x>>2]=m}while((ce|0)>1);while(!1);if(Ba(V),x=v,f[x>>2]=0,f[x+4>>2]=0,x=V,m=f[x>>2]|0,x=f[x+4>>2]|0,!((m|0)==0&(x|0)==0))do Xl(m,x,d,L)|0,C=L,h=v,C=fn(f[h>>2]|0,f[h+4>>2]|0,f[C>>2]|0,f[C+4>>2]|0)|0,h=Z()|0,ce=v,f[ce>>2]=C,f[ce+4>>2]=h,Ba(V),ce=V,m=f[ce>>2]|0,x=f[ce+4>>2]|0;while(!((m|0)==0&(x|0)==0));m=f[R>>2]|0}while(!1);return ce=m,Y=ne,ce|0}function J1(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0;if(!(m8(d,m)|0)||(d=p8(d)|0,v=+Q[m>>3],x=+Q[m+8>>3],x=d&x<0?x+6.283185307179586:x,he=f[h>>2]|0,(he|0)<=0))return he=0,he|0;if(ne=f[h+4>>2]|0,d){d=0,W=x,m=-1,h=0;e:for(;;){for(V=h;R=+Q[ne+(V<<4)>>3],x=+Q[ne+(V<<4)+8>>3],h=(m+2|0)%(he|0)|0,S=+Q[ne+(h<<4)>>3],C=+Q[ne+(h<<4)+8>>3],R>S?(L=R,R=C):(L=S,S=R,R=x,x=C),v=v==S|v==L?v+2220446049250313e-31:v,!!(v<S|v>L);)if(m=V+1|0,(m|0)>=(he|0)){m=22;break e}else h=V,V=m,m=h;if(C=R<0?R+6.283185307179586:R,R=x<0?x+6.283185307179586:x,W=C==W|R==W?W+-2220446049250313e-31:W,L=C+(R-C)*((v-S)/(L-S)),(L<0?L+6.283185307179586:L)>W&&(d=d^1),h=V+1|0,(h|0)>=(he|0)){m=22;break}else m=V}if((m|0)==22)return d|0}else{d=0,W=x,m=-1,h=0;e:for(;;){for(V=h;R=+Q[ne+(V<<4)>>3],x=+Q[ne+(V<<4)+8>>3],h=(m+2|0)%(he|0)|0,S=+Q[ne+(h<<4)>>3],C=+Q[ne+(h<<4)+8>>3],R>S?(L=R,R=C):(L=S,S=R,R=x,x=C),v=v==S|v==L?v+2220446049250313e-31:v,!!(v<S|v>L);)if(m=V+1|0,(m|0)>=(he|0)){m=22;break e}else h=V,V=m,m=h;if(W=R==W|x==W?W+-2220446049250313e-31:W,R+(x-R)*((v-S)/(L-S))>W&&(d=d^1),h=V+1|0,(h|0)>=(he|0)){m=22;break}else m=V}if((m|0)==22)return d|0}return 0}function G8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0;if(fe=f[h>>2]|0,!fe){f[d>>2]=0,f[d+4>>2]=0,f[d+8>>2]=0,f[d+12>>2]=0,f[d+16>>2]=0,f[d+20>>2]=0,f[d+24>>2]=0,f[d+28>>2]=0;return}if(_e=d+8|0,Q[_e>>3]=17976931348623157e292,Me=d+24|0,Q[Me>>3]=17976931348623157e292,Q[d>>3]=-17976931348623157e292,Fe=d+16|0,Q[Fe>>3]=-17976931348623157e292,!((fe|0)<=0)){for(he=f[h+4>>2]|0,V=17976931348623157e292,W=-17976931348623157e292,ne=0,h=-1,S=17976931348623157e292,R=17976931348623157e292,L=-17976931348623157e292,v=-17976931348623157e292,ce=0;m=+Q[he+(ce<<4)>>3],C=+Q[he+(ce<<4)+8>>3],h=h+2|0,x=+Q[he+(((h|0)==(fe|0)?0:h)<<4)+8>>3],m<S&&(Q[_e>>3]=m,S=m),C<R&&(Q[Me>>3]=C,R=C),m>L?Q[d>>3]=m:m=L,C>v&&(Q[Fe>>3]=C,v=C),V=C>0&C<V?C:V,W=C<0&C>W?C:W,ne=ne|+Bn(+(C-x))>3.141592653589793,h=ce+1|0,(h|0)!=(fe|0);)De=ce,L=m,ce=h,h=De;ne&&(Q[Fe>>3]=W,Q[Me>>3]=V)}}function eu(h){return h=h|0,(h>>>0<4?0:15)|0}function k3(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0;if(fe=f[h>>2]|0,fe){if(_e=d+8|0,Q[_e>>3]=17976931348623157e292,Me=d+24|0,Q[Me>>3]=17976931348623157e292,Q[d>>3]=-17976931348623157e292,Fe=d+16|0,Q[Fe>>3]=-17976931348623157e292,(fe|0)>0){for(x=f[h+4>>2]|0,he=17976931348623157e292,ce=-17976931348623157e292,v=0,m=-1,L=17976931348623157e292,V=17976931348623157e292,ne=-17976931348623157e292,R=-17976931348623157e292,De=0;S=+Q[x+(De<<4)>>3],W=+Q[x+(De<<4)+8>>3],sn=m+2|0,C=+Q[x+(((sn|0)==(fe|0)?0:sn)<<4)+8>>3],S<L&&(Q[_e>>3]=S,L=S),W<V&&(Q[Me>>3]=W,V=W),S>ne?Q[d>>3]=S:S=ne,W>R&&(Q[Fe>>3]=W,R=W),he=W>0&W<he?W:he,ce=W<0&W>ce?W:ce,v=v|+Bn(+(W-C))>3.141592653589793,m=De+1|0,(m|0)!=(fe|0);)sn=De,ne=S,De=m,m=sn;v&&(Q[Fe>>3]=ce,Q[Me>>3]=he)}}else f[d>>2]=0,f[d+4>>2]=0,f[d+8>>2]=0,f[d+12>>2]=0,f[d+16>>2]=0,f[d+20>>2]=0,f[d+24>>2]=0,f[d+28>>2]=0;if(sn=h+8|0,m=f[sn>>2]|0,!((m|0)<=0)){mt=h+12|0,xe=0;do if(x=f[mt>>2]|0,v=xe,xe=xe+1|0,Me=d+(xe<<5)|0,Fe=f[x+(v<<3)>>2]|0,Fe){if(De=d+(xe<<5)+8|0,Q[De>>3]=17976931348623157e292,h=d+(xe<<5)+24|0,Q[h>>3]=17976931348623157e292,Q[Me>>3]=-17976931348623157e292,Re=d+(xe<<5)+16|0,Q[Re>>3]=-17976931348623157e292,(Fe|0)>0){for(fe=f[x+(v<<3)+4>>2]|0,he=17976931348623157e292,ce=-17976931348623157e292,x=0,v=-1,_e=0,L=17976931348623157e292,V=17976931348623157e292,W=-17976931348623157e292,R=-17976931348623157e292;S=+Q[fe+(_e<<4)>>3],ne=+Q[fe+(_e<<4)+8>>3],v=v+2|0,C=+Q[fe+(((v|0)==(Fe|0)?0:v)<<4)+8>>3],S<L&&(Q[De>>3]=S,L=S),ne<V&&(Q[h>>3]=ne,V=ne),S>W?Q[Me>>3]=S:S=W,ne>R&&(Q[Re>>3]=ne,R=ne),he=ne>0&ne<he?ne:he,ce=ne<0&ne>ce?ne:ce,x=x|+Bn(+(ne-C))>3.141592653589793,v=_e+1|0,(v|0)!=(Fe|0);)Xt=_e,_e=v,W=S,v=Xt;x&&(Q[Re>>3]=ce,Q[h>>3]=he)}}else f[Me>>2]=0,f[Me+4>>2]=0,f[Me+8>>2]=0,f[Me+12>>2]=0,f[Me+16>>2]=0,f[Me+20>>2]=0,f[Me+24>>2]=0,f[Me+28>>2]=0,m=f[sn>>2]|0;while((xe|0)<(m|0))}}function A2(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;if(!(J1(h,d,m)|0))return x=0,x|0;if(x=h+8|0,(f[x>>2]|0)<=0)return x=1,x|0;for(v=h+12|0,h=0;;){if(S=h,h=h+1|0,J1((f[v>>2]|0)+(S<<3)|0,d+(h<<5)|0,m)|0){h=0,v=6;break}if((h|0)>=(f[x>>2]|0)){h=1,v=6;break}}return(v|0)==6?h|0:0}function H3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0;if(V=Y,Y=Y+16|0,C=V,R=m+8|0,!(J1(h,d,R)|0))return L=0,Y=V,L|0;L=h+8|0;e:do if((f[L>>2]|0)>0){for(S=h+12|0,x=0;;){if(W=x,x=x+1|0,J1((f[S>>2]|0)+(W<<3)|0,d+(x<<5)|0,R)|0){x=0;break}if((x|0)>=(f[L>>2]|0))break e}return Y=V,x|0}while(!1);if(W3(h,d,m,v)|0)return W=0,Y=V,W|0;f[C>>2]=f[m>>2],f[C+4>>2]=R,x=f[L>>2]|0;e:do if((x|0)>0)for(h=h+12|0,R=0,S=x;;){if(x=f[h>>2]|0,(f[x+(R<<3)>>2]|0)>0){if(J1(C,v,f[x+(R<<3)+4>>2]|0)|0){x=0;break e}if(x=R+1|0,W3((f[h>>2]|0)+(R<<3)|0,d+(x<<5)|0,m,v)|0){x=0;break e}S=f[L>>2]|0}else x=R+1|0;if((x|0)<(S|0))R=x;else{x=1;break}}else x=1;while(!1);return W=x,Y=V,W|0}function W3(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0,sn=0,Xt=0,Ln=0;if(sn=Y,Y=Y+176|0,De=sn+172|0,x=sn+168|0,Re=sn,!(E3(d,v)|0))return h=0,Y=sn,h|0;if(t2(d,v,De,x),il(Re|0,m|0,168)|0,(f[m>>2]|0)>0){d=0;do Xt=Re+8+(d<<4)+8|0,Fe=+ws(+Q[Xt>>3],f[x>>2]|0),Q[Xt>>3]=Fe,d=d+1|0;while((d|0)<(f[m>>2]|0))}_e=+Q[v>>3],Me=+Q[v+8>>3],Fe=+ws(+Q[v+16>>3],f[x>>2]|0),ce=+ws(+Q[v+24>>3],f[x>>2]|0);e:do if((f[h>>2]|0)>0){if(v=h+4|0,x=f[Re>>2]|0,(x|0)<=0){for(d=0;;)if(d=d+1|0,(d|0)>=(f[h>>2]|0)){d=0;break e}}for(m=0;;){if(d=f[v>>2]|0,he=+Q[d+(m<<4)>>3],fe=+ws(+Q[d+(m<<4)+8>>3],f[De>>2]|0),d=f[v>>2]|0,m=m+1|0,Xt=(m|0)%(f[h>>2]|0)|0,S=+Q[d+(Xt<<4)>>3],R=+ws(+Q[d+(Xt<<4)+8>>3],f[De>>2]|0),!(he>=_e)|!(S>=_e)&&!(he<=Me)|!(S<=Me)&&!(fe<=ce)|!(R<=ce)&&!(fe>=Fe)|!(R>=Fe)){ne=S-he,V=R-fe,d=0;do if(Ln=d,d=d+1|0,Xt=(d|0)==(x|0)?0:d,S=+Q[Re+8+(Ln<<4)+8>>3],R=+Q[Re+8+(Xt<<4)+8>>3]-S,C=+Q[Re+8+(Ln<<4)>>3],L=+Q[Re+8+(Xt<<4)>>3]-C,W=ne*R-V*L,W!=0&&(xe=fe-S,mt=he-C,L=(xe*L-R*mt)/W,!(L<0|L>1))&&(W=(ne*xe-V*mt)/W,W>=0&W<=1)){d=1;break e}while((d|0)<(x|0))}if((m|0)>=(f[h>>2]|0)){d=0;break}}}else d=0;while(!1);return Ln=d,Y=sn,Ln|0}function sf(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0;if(W3(h,d,m,v)|0)return S=1,S|0;if(S=h+8|0,(f[S>>2]|0)<=0)return S=0,S|0;for(x=h+12|0,h=0;;){if(R=h,h=h+1|0,W3((f[x>>2]|0)+(R<<3)|0,d+(h<<5)|0,m,v)|0){h=1,x=6;break}if((h|0)>=(f[S>>2]|0)){h=0,x=6;break}}return(x|0)==6?h|0:0}function Em(){return 8}function af(){return 16}function of(){return 168}function tu(){return 8}function j3(){return 16}function lf(){return 12}function uf(){return 8}function wm(h){return h=h|0,+(+((f[h>>2]|0)>>>0)+4294967296*+(f[h+4>>2]|0))}function cf(h){h=h|0;var d=0,m=0;return m=+Q[h>>3],d=+Q[h+8>>3],+ +ri(+(m*m+d*d))}function el(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0;V=+Q[h>>3],L=+Q[d>>3]-V,C=+Q[h+8>>3],R=+Q[d+8>>3]-C,ne=+Q[m>>3],S=+Q[v>>3]-ne,he=+Q[m+8>>3],W=+Q[v+8>>3]-he,S=(S*(C-he)-(V-ne)*W)/(L*W-R*S),Q[x>>3]=V+L*S,Q[x+8>>3]=C+R*S}function q8(h,d){return h=h|0,d=d|0,+Bn(+(+Q[h>>3]-+Q[d>>3]))<11920928955078125e-23?(d=+Bn(+(+Q[h+8>>3]-+Q[d+8>>3]))<11920928955078125e-23,d|0):(d=0,d|0)}function Rn(h,d){h=h|0,d=d|0;var m=0,v=0,x=0;return x=+Q[h>>3]-+Q[d>>3],v=+Q[h+8>>3]-+Q[d+8>>3],m=+Q[h+16>>3]-+Q[d+16>>3],+(x*x+v*v+m*m)}function k8(h,d){h=h|0,d=d|0;var m=0,v=0,x=0;m=+Q[h>>3],v=+fi(+m),m=+Wn(+m),Q[d+16>>3]=m,m=+Q[h+8>>3],x=v*+fi(+m),Q[d>>3]=x,m=v*+Wn(+m),Q[d+8>>3]=m}function Rm(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;if(S=Y,Y=Y+16|0,x=S,v=Ci(h,d)|0,(m+-1|0)>>>0>5||(v=(v|0)!=0,(m|0)==1&v))return x=-1,Y=S,x|0;do if(nu(h,d,x)|0)v=-1;else if(v){v=((f[26352+(m<<2)>>2]|0)+5-(f[x>>2]|0)|0)%5|0;break}else{v=((f[26384+(m<<2)>>2]|0)+6-(f[x>>2]|0)|0)%6|0;break}while(!1);return x=v,Y=S,x|0}function nu(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0,V=0;if(V=Y,Y=Y+32|0,R=V+16|0,C=V,v=Yl(h,d,R)|0,v|0)return m=v,Y=V,m|0;S=l2(h,d)|0,L=Xs(h,d)|0,I7(S,C),v=U7(S,f[R>>2]|0)|0;e:do if(ki(S)|0){do switch(S|0){case 4:{h=0;break}case 14:{h=1;break}case 24:{h=2;break}case 38:{h=3;break}case 49:{h=4;break}case 58:{h=5;break}case 63:{h=6;break}case 72:{h=7;break}case 83:{h=8;break}case 97:{h=9;break}case 107:{h=10;break}case 117:{h=11;break}default:{v=1;break e}}while(!1);if(x=f[26416+(h*24|0)+8>>2]|0,d=f[26416+(h*24|0)+16>>2]|0,h=f[R>>2]|0,(h|0)!=(f[C>>2]|0)&&(C=b3(S)|0,h=f[R>>2]|0,C|(h|0)==(d|0)&&(v=(v+1|0)%6|0)),(L|0)==3&(h|0)==(d|0)){v=(v+5|0)%6|0,x=22;break}(L|0)==5&(h|0)==(x|0)&&(v=(v+1|0)%6|0),x=22}else x=22;while(!1);return(x|0)==22&&(f[m>>2]=v,v=0),m=v,Y=V,m|0}function La(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0;if(Re=Y,Y=Y+32|0,De=Re+24|0,Me=Re+20|0,fe=Re+8|0,ce=Re+16|0,he=Re,L=(Ci(h,d)|0)==0,L=L?6:5,W=lt(h|0,d|0,52)|0,Z()|0,W=W&15,L>>>0<=m>>>0)return v=2,Y=Re,v|0;ne=(W|0)==0,!ne&&(_e=St(7,0,(W^15)*3|0)|0,(_e&h|0)==0&((Z()|0)&d|0)==0)?x=m:S=4;e:do if((S|0)==4){if(x=(Ci(h,d)|0)!=0,((x?4:5)|0)<(m|0)||nu(h,d,De)|0||(S=(f[De>>2]|0)+m|0,x?x=26704+(((S|0)%5|0)<<2)|0:x=26736+(((S|0)%6|0)<<2)|0,_e=f[x>>2]|0,(_e|0)==7))return v=1,Y=Re,v|0;f[Me>>2]=0,x=Ai(h,d,_e,Me,fe)|0;do if(!x){if(C=fe,V=f[C>>2]|0,C=f[C+4>>2]|0,R=C>>>0<d>>>0|(C|0)==(d|0)&V>>>0<h>>>0,S=R?V:h,R=R?C:d,!ne&&(ne=St(7,0,(W^15)*3|0)|0,(V&ne|0)==0&(C&(Z()|0)|0)==0))x=m;else{if(C=(m+-1+L|0)%(L|0)|0,x=Ci(h,d)|0,(C|0)<0&&gt(27795,27797,246,27806),L=(x|0)!=0,((L?4:5)|0)<(C|0)&&gt(27795,27797,246,27806),nu(h,d,De)|0&&gt(27795,27797,246,27806),x=(f[De>>2]|0)+C|0,L?x=26704+(((x|0)%5|0)<<2)|0:x=26736+(((x|0)%6|0)<<2)|0,C=f[x>>2]|0,(C|0)==7&&gt(27795,27797,246,27806),f[ce>>2]=0,x=Ai(h,d,C,ce,he)|0,x|0)break;V=he,L=f[V>>2]|0,V=f[V+4>>2]|0;do if(V>>>0<R>>>0|(V|0)==(R|0)&L>>>0<S>>>0){if(Ci(L,V)|0?S=_3(L,V,h,d)|0:S=f[26800+((((f[ce>>2]|0)+(f[26768+(C<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,x=Ci(L,V)|0,(S+-1|0)>>>0>5){x=-1,S=L,R=V;break}if(x=(x|0)!=0,(S|0)==1&x){x=-1,S=L,R=V;break}do if(nu(L,V,De)|0)x=-1;else if(x){x=((f[26352+(S<<2)>>2]|0)+5-(f[De>>2]|0)|0)%5|0;break}else{x=((f[26384+(S<<2)>>2]|0)+6-(f[De>>2]|0)|0)%6|0;break}while(!1);S=L,R=V}else x=m;while(!1);C=fe,V=f[C>>2]|0,C=f[C+4>>2]|0}if((S|0)==(V|0)&(R|0)==(C|0)){if(L=(Ci(V,C)|0)!=0,L?h=_3(V,C,h,d)|0:h=f[26800+((((f[Me>>2]|0)+(f[26768+(_e<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,x=Ci(V,C)|0,(h+-1|0)>>>0<=5&&(Fe=(x|0)!=0,!((h|0)==1&Fe)))do if(nu(V,C,De)|0)x=-1;else if(Fe){x=((f[26352+(h<<2)>>2]|0)+5-(f[De>>2]|0)|0)%5|0;break}else{x=((f[26384+(h<<2)>>2]|0)+6-(f[De>>2]|0)|0)%6|0;break}while(!1);else x=-1;x=x+1|0,x=(x|0)==6|L&(x|0)==5?0:x}d=R,h=S;break e}while(!1);return v=x,Y=Re,v|0}while(!1);return Fe=St(x|0,0,56)|0,De=Z()|0|d&-2130706433|536870912,f[v>>2]=Fe|h,f[v+4>>2]=De,v=0,Y=Re,v|0}function Cm(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;return S=(Ci(h,d)|0)==0,v=La(h,d,0,m)|0,x=(v|0)==0,S?!x||(v=La(h,d,1,m+8|0)|0,v|0)||(v=La(h,d,2,m+16|0)|0,v|0)||(v=La(h,d,3,m+24|0)|0,v|0)||(v=La(h,d,4,m+32|0)|0,v)?(S=v,S|0):La(h,d,5,m+40|0)|0:!x||(v=La(h,d,1,m+8|0)|0,v|0)||(v=La(h,d,2,m+16|0)|0,v|0)||(v=La(h,d,3,m+24|0)|0,v|0)||(v=La(h,d,4,m+32|0)|0,v|0)?(S=v,S|0):(S=m+40|0,f[S>>2]=0,f[S+4>>2]=0,S=0,S|0)}function Nm(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0,C=0,L=0;return L=Y,Y=Y+192|0,x=L,S=L+168|0,R=lt(h|0,d|0,56)|0,Z()|0,R=R&7,C=d&-2130706433|134217728,v=Yl(h,C,S)|0,v|0?(C=v,Y=L,C|0):(d=lt(h|0,d|0,52)|0,Z()|0,d=d&15,Ci(h,C)|0?g0(S,d,R,1,x):o2(S,d,R,1,x),C=x+8|0,f[m>>2]=f[C>>2],f[m+4>>2]=f[C+4>>2],f[m+8>>2]=f[C+8>>2],f[m+12>>2]=f[C+12>>2],C=0,Y=L,C|0)}function Pm(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0;return x=Y,Y=Y+16|0,m=x,!(!0&(d&2013265920|0)==536870912)||(v=d&-2130706433|134217728,!(P3(h,v)|0))?(v=0,Y=x,v|0):(S=lt(h|0,d|0,56)|0,Z()|0,S=(La(h,v,S&7,m)|0)==0,v=m,v=S&((f[v>>2]|0)==(h|0)?(f[v+4>>2]|0)==(d|0):0)&1,Y=x,v|0)}function X3(h,d,m){h=h|0,d=d|0,m=m|0;var v=0;(d|0)>0?(v=Cs(d,4)|0,f[h>>2]=v,v||gt(27819,27842,40,27856)):f[h>>2]=0,f[h+4>>2]=d,f[h+8>>2]=0,f[h+12>>2]=m}function x0(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0;x=h+4|0,S=h+12|0,R=h+8|0;e:for(;;){for(m=f[x>>2]|0,d=0;;){if((d|0)>=(m|0))break e;if(v=f[h>>2]|0,C=f[v+(d<<2)>>2]|0,!C)d=d+1|0;else break}d=v+(~~(+Bn(+(+io(10,+ +(15-(f[S>>2]|0)|0))*(+Q[C>>3]+ +Q[C+8>>3])))%+(m|0))>>>0<<2)|0,m=f[d>>2]|0;t:do if(m|0){if(v=C+32|0,(m|0)==(C|0))f[d>>2]=f[v>>2];else{if(m=m+32|0,d=f[m>>2]|0,!d)break;for(;(d|0)!=(C|0);)if(m=d+32|0,d=f[m>>2]|0,!d)break t;f[m>>2]=f[v>>2]}An(C),f[R>>2]=(f[R>>2]|0)+-1}while(!1)}An(f[h>>2]|0)}function H8(h){h=h|0;var d=0,m=0,v=0;for(v=f[h+4>>2]|0,m=0;;){if((m|0)>=(v|0)){d=0,m=4;break}if(d=f[(f[h>>2]|0)+(m<<2)>>2]|0,!d)m=m+1|0;else{m=4;break}}return(m|0)==4?d|0:0}function p2(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0;if(m=~~(+Bn(+(+io(10,+ +(15-(f[h+12>>2]|0)|0))*(+Q[d>>3]+ +Q[d+8>>3])))%+(f[h+4>>2]|0))>>>0,m=(f[h>>2]|0)+(m<<2)|0,v=f[m>>2]|0,!v)return S=1,S|0;S=d+32|0;do if((v|0)!=(d|0)){if(m=f[v+32>>2]|0,!m)return S=1,S|0;for(x=m;;){if((x|0)==(d|0)){x=8;break}if(m=f[x+32>>2]|0,m)v=x,x=m;else{m=1,x=10;break}}if((x|0)==8){f[v+32>>2]=f[S>>2];break}else if((x|0)==10)return m|0}else f[m>>2]=f[S>>2];while(!1);return An(d),S=h+8|0,f[S>>2]=(f[S>>2]|0)+-1,S=0,S|0}function Zl(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0;S=oo(40)|0,S||gt(27872,27842,98,27885),f[S>>2]=f[d>>2],f[S+4>>2]=f[d+4>>2],f[S+8>>2]=f[d+8>>2],f[S+12>>2]=f[d+12>>2],x=S+16|0,f[x>>2]=f[m>>2],f[x+4>>2]=f[m+4>>2],f[x+8>>2]=f[m+8>>2],f[x+12>>2]=f[m+12>>2],f[S+32>>2]=0,x=~~(+Bn(+(+io(10,+ +(15-(f[h+12>>2]|0)|0))*(+Q[d>>3]+ +Q[d+8>>3])))%+(f[h+4>>2]|0))>>>0,x=(f[h>>2]|0)+(x<<2)|0,v=f[x>>2]|0;do if(!v)f[x>>2]=S;else{for(;!($1(v,d)|0&&$1(v+16|0,m)|0);)if(x=f[v+32>>2]|0,v=(x|0)==0?v:x,!(f[v+32>>2]|0)){R=10;break}if((R|0)==10){f[v+32>>2]=S;break}return An(S),R=v,R|0}while(!1);return R=h+8|0,f[R>>2]=(f[R>>2]|0)+1,R=S,R|0}function hf(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0;if(x=~~(+Bn(+(+io(10,+ +(15-(f[h+12>>2]|0)|0))*(+Q[d>>3]+ +Q[d+8>>3])))%+(f[h+4>>2]|0))>>>0,x=f[(f[h>>2]|0)+(x<<2)>>2]|0,!x)return m=0,m|0;if(!m){for(h=x;;){if($1(h,d)|0){v=10;break}if(h=f[h+32>>2]|0,!h){h=0,v=10;break}}if((v|0)==10)return h|0}for(h=x;;){if($1(h,d)|0&&$1(h+16|0,m)|0){v=10;break}if(h=f[h+32>>2]|0,!h){h=0,v=10;break}}return(v|0)==10?h|0:0}function W8(h,d){h=h|0,d=d|0;var m=0;if(m=~~(+Bn(+(+io(10,+ +(15-(f[h+12>>2]|0)|0))*(+Q[d>>3]+ +Q[d+8>>3])))%+(f[h+4>>2]|0))>>>0,h=f[(f[h>>2]|0)+(m<<2)>>2]|0,!h)return m=0,m|0;for(;;){if($1(h,d)|0){d=5;break}if(h=f[h+32>>2]|0,!h){h=0,d=5;break}}return(d|0)==5?h|0:0}function j8(){return 27904}function tl(h){return h=+h,~~+$3(+h)|0}function oo(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0,_e=0,Me=0,Fe=0,De=0,Re=0,xe=0,mt=0;mt=Y,Y=Y+16|0,he=mt;do if(h>>>0<245){if(V=h>>>0<11?16:h+11&-8,h=V>>>3,ne=f[6977]|0,m=ne>>>h,m&3|0)return d=(m&1^1)+h|0,h=27948+(d<<1<<2)|0,m=h+8|0,v=f[m>>2]|0,x=v+8|0,S=f[x>>2]|0,(S|0)==(h|0)?f[6977]=ne&~(1<<d):(f[S+12>>2]=h,f[m>>2]=S),xe=d<<3,f[v+4>>2]=xe|3,xe=v+xe+4|0,f[xe>>2]=f[xe>>2]|1,xe=x,Y=mt,xe|0;if(W=f[6979]|0,V>>>0>W>>>0){if(m|0)return d=2<<h,d=m<<h&(d|0-d),d=(d&0-d)+-1|0,C=d>>>12&16,d=d>>>C,m=d>>>5&8,d=d>>>m,S=d>>>2&4,d=d>>>S,h=d>>>1&2,d=d>>>h,v=d>>>1&1,v=(m|C|S|h|v)+(d>>>v)|0,d=27948+(v<<1<<2)|0,h=d+8|0,S=f[h>>2]|0,C=S+8|0,m=f[C>>2]|0,(m|0)==(d|0)?(h=ne&~(1<<v),f[6977]=h):(f[m+12>>2]=d,f[h>>2]=m,h=ne),xe=v<<3,R=xe-V|0,f[S+4>>2]=V|3,x=S+V|0,f[x+4>>2]=R|1,f[S+xe>>2]=R,W|0&&(v=f[6982]|0,d=W>>>3,m=27948+(d<<1<<2)|0,d=1<<d,h&d?(h=m+8|0,d=f[h>>2]|0):(f[6977]=h|d,d=m,h=m+8|0),f[h>>2]=v,f[d+12>>2]=v,f[v+8>>2]=d,f[v+12>>2]=m),f[6979]=R,f[6982]=x,xe=C,Y=mt,xe|0;if(S=f[6978]|0,S){for(m=(S&0-S)+-1|0,x=m>>>12&16,m=m>>>x,v=m>>>5&8,m=m>>>v,R=m>>>2&4,m=m>>>R,C=m>>>1&2,m=m>>>C,L=m>>>1&1,L=f[28212+((v|x|R|C|L)+(m>>>L)<<2)>>2]|0,m=L,C=L,L=(f[L+4>>2]&-8)-V|0;h=f[m+16>>2]|0,!(!h&&(h=f[m+20>>2]|0,!h));)R=(f[h+4>>2]&-8)-V|0,x=R>>>0<L>>>0,m=h,C=x?h:C,L=x?R:L;if(R=C+V|0,R>>>0>C>>>0){x=f[C+24>>2]|0,d=f[C+12>>2]|0;do if((d|0)==(C|0)){if(h=C+20|0,d=f[h>>2]|0,!d&&(h=C+16|0,d=f[h>>2]|0,!d)){m=0;break}for(;;)if(v=d+20|0,m=f[v>>2]|0,m)d=m,h=v;else if(v=d+16|0,m=f[v>>2]|0,m)d=m,h=v;else break;f[h>>2]=0,m=d}else m=f[C+8>>2]|0,f[m+12>>2]=d,f[d+8>>2]=m,m=d;while(!1);do if(x|0){if(d=f[C+28>>2]|0,h=28212+(d<<2)|0,(C|0)==(f[h>>2]|0)){if(f[h>>2]=m,!m){f[6978]=S&~(1<<d);break}}else if(xe=x+16|0,f[((f[xe>>2]|0)==(C|0)?xe:x+20|0)>>2]=m,!m)break;f[m+24>>2]=x,d=f[C+16>>2]|0,d|0&&(f[m+16>>2]=d,f[d+24>>2]=m),d=f[C+20>>2]|0,d|0&&(f[m+20>>2]=d,f[d+24>>2]=m)}while(!1);return L>>>0<16?(xe=L+V|0,f[C+4>>2]=xe|3,xe=C+xe+4|0,f[xe>>2]=f[xe>>2]|1):(f[C+4>>2]=V|3,f[R+4>>2]=L|1,f[R+L>>2]=L,W|0&&(v=f[6982]|0,d=W>>>3,m=27948+(d<<1<<2)|0,d=1<<d,d&ne?(h=m+8|0,d=f[h>>2]|0):(f[6977]=d|ne,d=m,h=m+8|0),f[h>>2]=v,f[d+12>>2]=v,f[v+8>>2]=d,f[v+12>>2]=m),f[6979]=L,f[6982]=R),xe=C+8|0,Y=mt,xe|0}else ne=V}else ne=V}else ne=V}else if(h>>>0<=4294967231)if(h=h+11|0,V=h&-8,v=f[6978]|0,v){x=0-V|0,h=h>>>8,h?V>>>0>16777215?L=31:(ne=(h+1048320|0)>>>16&8,_e=h<<ne,C=(_e+520192|0)>>>16&4,_e=_e<<C,L=(_e+245760|0)>>>16&2,L=14-(C|ne|L)+(_e<<L>>>15)|0,L=V>>>(L+7|0)&1|L<<1):L=0,m=f[28212+(L<<2)>>2]|0;e:do if(!m)m=0,h=0,_e=61;else for(h=0,C=V<<((L|0)==31?0:25-(L>>>1)|0),S=0;;){if(R=(f[m+4>>2]&-8)-V|0,R>>>0<x>>>0)if(R)h=m,x=R;else{h=m,x=0,_e=65;break e}if(_e=f[m+20>>2]|0,m=f[m+16+(C>>>31<<2)>>2]|0,S=(_e|0)==0|(_e|0)==(m|0)?S:_e,m)C=C<<1;else{m=S,_e=61;break}}while(!1);if((_e|0)==61){if((m|0)==0&(h|0)==0){if(h=2<<L,h=(h|0-h)&v,!h){ne=V;break}ne=(h&0-h)+-1|0,R=ne>>>12&16,ne=ne>>>R,S=ne>>>5&8,ne=ne>>>S,C=ne>>>2&4,ne=ne>>>C,L=ne>>>1&2,ne=ne>>>L,m=ne>>>1&1,h=0,m=f[28212+((S|R|C|L|m)+(ne>>>m)<<2)>>2]|0}m?_e=65:(C=h,R=x)}if((_e|0)==65)for(S=m;;)if(ne=(f[S+4>>2]&-8)-V|0,m=ne>>>0<x>>>0,x=m?ne:x,h=m?S:h,m=f[S+16>>2]|0,m||(m=f[S+20>>2]|0),m)S=m;else{C=h,R=x;break}if((C|0)!=0&&R>>>0<((f[6979]|0)-V|0)>>>0&&(W=C+V|0,W>>>0>C>>>0)){S=f[C+24>>2]|0,d=f[C+12>>2]|0;do if((d|0)==(C|0)){if(h=C+20|0,d=f[h>>2]|0,!d&&(h=C+16|0,d=f[h>>2]|0,!d)){d=0;break}for(;;)if(x=d+20|0,m=f[x>>2]|0,m)d=m,h=x;else if(x=d+16|0,m=f[x>>2]|0,m)d=m,h=x;else break;f[h>>2]=0}else xe=f[C+8>>2]|0,f[xe+12>>2]=d,f[d+8>>2]=xe;while(!1);do if(S){if(h=f[C+28>>2]|0,m=28212+(h<<2)|0,(C|0)==(f[m>>2]|0)){if(f[m>>2]=d,!d){v=v&~(1<<h),f[6978]=v;break}}else if(xe=S+16|0,f[((f[xe>>2]|0)==(C|0)?xe:S+20|0)>>2]=d,!d)break;f[d+24>>2]=S,h=f[C+16>>2]|0,h|0&&(f[d+16>>2]=h,f[h+24>>2]=d),h=f[C+20>>2]|0,h&&(f[d+20>>2]=h,f[h+24>>2]=d)}while(!1);e:do if(R>>>0<16)xe=R+V|0,f[C+4>>2]=xe|3,xe=C+xe+4|0,f[xe>>2]=f[xe>>2]|1;else{if(f[C+4>>2]=V|3,f[W+4>>2]=R|1,f[W+R>>2]=R,d=R>>>3,R>>>0<256){m=27948+(d<<1<<2)|0,h=f[6977]|0,d=1<<d,h&d?(h=m+8|0,d=f[h>>2]|0):(f[6977]=h|d,d=m,h=m+8|0),f[h>>2]=W,f[d+12>>2]=W,f[W+8>>2]=d,f[W+12>>2]=m;break}if(d=R>>>8,d?R>>>0>16777215?m=31:(Re=(d+1048320|0)>>>16&8,xe=d<<Re,De=(xe+520192|0)>>>16&4,xe=xe<<De,m=(xe+245760|0)>>>16&2,m=14-(De|Re|m)+(xe<<m>>>15)|0,m=R>>>(m+7|0)&1|m<<1):m=0,d=28212+(m<<2)|0,f[W+28>>2]=m,h=W+16|0,f[h+4>>2]=0,f[h>>2]=0,h=1<<m,!(v&h)){f[6978]=v|h,f[d>>2]=W,f[W+24>>2]=d,f[W+12>>2]=W,f[W+8>>2]=W;break}d=f[d>>2]|0;t:do if((f[d+4>>2]&-8|0)!=(R|0)){for(v=R<<((m|0)==31?0:25-(m>>>1)|0);m=d+16+(v>>>31<<2)|0,h=f[m>>2]|0,!!h;)if((f[h+4>>2]&-8|0)==(R|0)){d=h;break t}else v=v<<1,d=h;f[m>>2]=W,f[W+24>>2]=d,f[W+12>>2]=W,f[W+8>>2]=W;break e}while(!1);Re=d+8|0,xe=f[Re>>2]|0,f[xe+12>>2]=W,f[Re>>2]=W,f[W+8>>2]=xe,f[W+12>>2]=d,f[W+24>>2]=0}while(!1);return xe=C+8|0,Y=mt,xe|0}else ne=V}else ne=V;else ne=-1;while(!1);if(m=f[6979]|0,m>>>0>=ne>>>0)return d=m-ne|0,h=f[6982]|0,d>>>0>15?(xe=h+ne|0,f[6982]=xe,f[6979]=d,f[xe+4>>2]=d|1,f[h+m>>2]=d,f[h+4>>2]=ne|3):(f[6979]=0,f[6982]=0,f[h+4>>2]=m|3,xe=h+m+4|0,f[xe>>2]=f[xe>>2]|1),xe=h+8|0,Y=mt,xe|0;if(R=f[6980]|0,R>>>0>ne>>>0)return De=R-ne|0,f[6980]=De,xe=f[6983]|0,Re=xe+ne|0,f[6983]=Re,f[Re+4>>2]=De|1,f[xe+4>>2]=ne|3,xe=xe+8|0,Y=mt,xe|0;if(f[7095]|0?h=f[7097]|0:(f[7097]=4096,f[7096]=4096,f[7098]=-1,f[7099]=-1,f[7100]=0,f[7088]=0,f[7095]=he&-16^1431655768,h=4096),C=ne+48|0,L=ne+47|0,S=h+L|0,x=0-h|0,V=S&x,V>>>0<=ne>>>0||(h=f[7087]|0,h|0&&(W=f[7085]|0,he=W+V|0,he>>>0<=W>>>0|he>>>0>h>>>0)))return xe=0,Y=mt,xe|0;e:do if(f[7088]&4)d=0,_e=143;else{m=f[6983]|0;t:do if(m){for(v=28356;he=f[v>>2]|0,!(he>>>0<=m>>>0&&(he+(f[v+4>>2]|0)|0)>>>0>m>>>0);)if(h=f[v+8>>2]|0,h)v=h;else{_e=128;break t}if(d=S-R&x,d>>>0<2147483647)if(h=Io(d|0)|0,(h|0)==((f[v>>2]|0)+(f[v+4>>2]|0)|0)){if((h|0)!=-1){R=d,S=h,_e=145;break e}}else v=h,_e=136;else d=0}else _e=128;while(!1);do if((_e|0)==128)if(m=Io(0)|0,(m|0)!=-1&&(d=m,ce=f[7096]|0,fe=ce+-1|0,d=((fe&d|0)==0?0:(fe+d&0-ce)-d|0)+V|0,ce=f[7085]|0,fe=d+ce|0,d>>>0>ne>>>0&d>>>0<2147483647)){if(he=f[7087]|0,he|0&&fe>>>0<=ce>>>0|fe>>>0>he>>>0){d=0;break}if(h=Io(d|0)|0,(h|0)==(m|0)){R=d,S=m,_e=145;break e}else v=h,_e=136}else d=0;while(!1);do if((_e|0)==136){if(m=0-d|0,!(C>>>0>d>>>0&(d>>>0<2147483647&(v|0)!=-1)))if((v|0)==-1){d=0;break}else{R=d,S=v,_e=145;break e}if(h=f[7097]|0,h=L-d+h&0-h,h>>>0>=2147483647){R=d,S=v,_e=145;break e}if((Io(h|0)|0)==-1){Io(m|0)|0,d=0;break}else{R=h+d|0,S=v,_e=145;break e}}while(!1);f[7088]=f[7088]|4,_e=143}while(!1);if((_e|0)==143&&V>>>0<2147483647&&(De=Io(V|0)|0,fe=Io(0)|0,Me=fe-De|0,Fe=Me>>>0>(ne+40|0)>>>0,!((De|0)==-1|Fe^1|De>>>0<fe>>>0&((De|0)!=-1&(fe|0)!=-1)^1))&&(R=Fe?Me:d,S=De,_e=145),(_e|0)==145){d=(f[7085]|0)+R|0,f[7085]=d,d>>>0>(f[7086]|0)>>>0&&(f[7086]=d),L=f[6983]|0;e:do if(L){for(d=28356;;){if(h=f[d>>2]|0,m=f[d+4>>2]|0,(S|0)==(h+m|0)){_e=154;break}if(v=f[d+8>>2]|0,v)d=v;else break}if((_e|0)==154&&(Re=d+4|0,(f[d+12>>2]&8|0)==0)&&S>>>0>L>>>0&h>>>0<=L>>>0){f[Re>>2]=m+R,xe=(f[6980]|0)+R|0,De=L+8|0,De=(De&7|0)==0?0:0-De&7,Re=L+De|0,De=xe-De|0,f[6983]=Re,f[6980]=De,f[Re+4>>2]=De|1,f[L+xe+4>>2]=40,f[6984]=f[7099];break}for(S>>>0<(f[6981]|0)>>>0&&(f[6981]=S),m=S+R|0,d=28356;;){if((f[d>>2]|0)==(m|0)){_e=162;break}if(h=f[d+8>>2]|0,h)d=h;else break}if((_e|0)==162&&(f[d+12>>2]&8|0)==0){f[d>>2]=S,W=d+4|0,f[W>>2]=(f[W>>2]|0)+R,W=S+8|0,W=S+((W&7|0)==0?0:0-W&7)|0,d=m+8|0,d=m+((d&7|0)==0?0:0-d&7)|0,V=W+ne|0,C=d-W-ne|0,f[W+4>>2]=ne|3;t:do if((L|0)==(d|0))xe=(f[6980]|0)+C|0,f[6980]=xe,f[6983]=V,f[V+4>>2]=xe|1;else{if((f[6982]|0)==(d|0)){xe=(f[6979]|0)+C|0,f[6979]=xe,f[6982]=V,f[V+4>>2]=xe|1,f[V+xe>>2]=xe;break}if(h=f[d+4>>2]|0,(h&3|0)==1){R=h&-8,v=h>>>3;n:do if(h>>>0<256)if(h=f[d+8>>2]|0,m=f[d+12>>2]|0,(m|0)==(h|0)){f[6977]=f[6977]&~(1<<v);break}else{f[h+12>>2]=m,f[m+8>>2]=h;break}else{S=f[d+24>>2]|0,h=f[d+12>>2]|0;do if((h|0)==(d|0)){if(m=d+16|0,v=m+4|0,h=f[v>>2]|0,h)m=v;else if(h=f[m>>2]|0,!h){h=0;break}for(;;)if(x=h+20|0,v=f[x>>2]|0,v)h=v,m=x;else if(x=h+16|0,v=f[x>>2]|0,v)h=v,m=x;else break;f[m>>2]=0}else xe=f[d+8>>2]|0,f[xe+12>>2]=h,f[h+8>>2]=xe;while(!1);if(!S)break;m=f[d+28>>2]|0,v=28212+(m<<2)|0;do if((f[v>>2]|0)!=(d|0)){if(xe=S+16|0,f[((f[xe>>2]|0)==(d|0)?xe:S+20|0)>>2]=h,!h)break n}else{if(f[v>>2]=h,h|0)break;f[6978]=f[6978]&~(1<<m);break n}while(!1);if(f[h+24>>2]=S,m=d+16|0,v=f[m>>2]|0,v|0&&(f[h+16>>2]=v,f[v+24>>2]=h),m=f[m+4>>2]|0,!m)break;f[h+20>>2]=m,f[m+24>>2]=h}while(!1);d=d+R|0,x=R+C|0}else x=C;if(d=d+4|0,f[d>>2]=f[d>>2]&-2,f[V+4>>2]=x|1,f[V+x>>2]=x,d=x>>>3,x>>>0<256){m=27948+(d<<1<<2)|0,h=f[6977]|0,d=1<<d,h&d?(h=m+8|0,d=f[h>>2]|0):(f[6977]=h|d,d=m,h=m+8|0),f[h>>2]=V,f[d+12>>2]=V,f[V+8>>2]=d,f[V+12>>2]=m;break}d=x>>>8;do if(!d)v=0;else{if(x>>>0>16777215){v=31;break}Re=(d+1048320|0)>>>16&8,xe=d<<Re,De=(xe+520192|0)>>>16&4,xe=xe<<De,v=(xe+245760|0)>>>16&2,v=14-(De|Re|v)+(xe<<v>>>15)|0,v=x>>>(v+7|0)&1|v<<1}while(!1);if(d=28212+(v<<2)|0,f[V+28>>2]=v,h=V+16|0,f[h+4>>2]=0,f[h>>2]=0,h=f[6978]|0,m=1<<v,!(h&m)){f[6978]=h|m,f[d>>2]=V,f[V+24>>2]=d,f[V+12>>2]=V,f[V+8>>2]=V;break}d=f[d>>2]|0;n:do if((f[d+4>>2]&-8|0)!=(x|0)){for(v=x<<((v|0)==31?0:25-(v>>>1)|0);m=d+16+(v>>>31<<2)|0,h=f[m>>2]|0,!!h;)if((f[h+4>>2]&-8|0)==(x|0)){d=h;break n}else v=v<<1,d=h;f[m>>2]=V,f[V+24>>2]=d,f[V+12>>2]=V,f[V+8>>2]=V;break t}while(!1);Re=d+8|0,xe=f[Re>>2]|0,f[xe+12>>2]=V,f[Re>>2]=V,f[V+8>>2]=xe,f[V+12>>2]=d,f[V+24>>2]=0}while(!1);return xe=W+8|0,Y=mt,xe|0}for(d=28356;h=f[d>>2]|0,!(h>>>0<=L>>>0&&(xe=h+(f[d+4>>2]|0)|0,xe>>>0>L>>>0));)d=f[d+8>>2]|0;x=xe+-47|0,h=x+8|0,h=x+((h&7|0)==0?0:0-h&7)|0,x=L+16|0,h=h>>>0<x>>>0?L:h,d=h+8|0,m=R+-40|0,De=S+8|0,De=(De&7|0)==0?0:0-De&7,Re=S+De|0,De=m-De|0,f[6983]=Re,f[6980]=De,f[Re+4>>2]=De|1,f[S+m+4>>2]=40,f[6984]=f[7099],m=h+4|0,f[m>>2]=27,f[d>>2]=f[7089],f[d+4>>2]=f[7090],f[d+8>>2]=f[7091],f[d+12>>2]=f[7092],f[7089]=S,f[7090]=R,f[7092]=0,f[7091]=d,d=h+24|0;do Re=d,d=d+4|0,f[d>>2]=7;while((Re+8|0)>>>0<xe>>>0);if((h|0)!=(L|0)){if(S=h-L|0,f[m>>2]=f[m>>2]&-2,f[L+4>>2]=S|1,f[h>>2]=S,d=S>>>3,S>>>0<256){m=27948+(d<<1<<2)|0,h=f[6977]|0,d=1<<d,h&d?(h=m+8|0,d=f[h>>2]|0):(f[6977]=h|d,d=m,h=m+8|0),f[h>>2]=L,f[d+12>>2]=L,f[L+8>>2]=d,f[L+12>>2]=m;break}if(d=S>>>8,d?S>>>0>16777215?v=31:(Re=(d+1048320|0)>>>16&8,xe=d<<Re,De=(xe+520192|0)>>>16&4,xe=xe<<De,v=(xe+245760|0)>>>16&2,v=14-(De|Re|v)+(xe<<v>>>15)|0,v=S>>>(v+7|0)&1|v<<1):v=0,m=28212+(v<<2)|0,f[L+28>>2]=v,f[L+20>>2]=0,f[x>>2]=0,d=f[6978]|0,h=1<<v,!(d&h)){f[6978]=d|h,f[m>>2]=L,f[L+24>>2]=m,f[L+12>>2]=L,f[L+8>>2]=L;break}d=f[m>>2]|0;t:do if((f[d+4>>2]&-8|0)!=(S|0)){for(v=S<<((v|0)==31?0:25-(v>>>1)|0);m=d+16+(v>>>31<<2)|0,h=f[m>>2]|0,!!h;)if((f[h+4>>2]&-8|0)==(S|0)){d=h;break t}else v=v<<1,d=h;f[m>>2]=L,f[L+24>>2]=d,f[L+12>>2]=L,f[L+8>>2]=L;break e}while(!1);Re=d+8|0,xe=f[Re>>2]|0,f[xe+12>>2]=L,f[Re>>2]=L,f[L+8>>2]=xe,f[L+12>>2]=d,f[L+24>>2]=0}}else xe=f[6981]|0,(xe|0)==0|S>>>0<xe>>>0&&(f[6981]=S),f[7089]=S,f[7090]=R,f[7092]=0,f[6986]=f[7095],f[6985]=-1,f[6990]=27948,f[6989]=27948,f[6992]=27956,f[6991]=27956,f[6994]=27964,f[6993]=27964,f[6996]=27972,f[6995]=27972,f[6998]=27980,f[6997]=27980,f[7e3]=27988,f[6999]=27988,f[7002]=27996,f[7001]=27996,f[7004]=28004,f[7003]=28004,f[7006]=28012,f[7005]=28012,f[7008]=28020,f[7007]=28020,f[7010]=28028,f[7009]=28028,f[7012]=28036,f[7011]=28036,f[7014]=28044,f[7013]=28044,f[7016]=28052,f[7015]=28052,f[7018]=28060,f[7017]=28060,f[7020]=28068,f[7019]=28068,f[7022]=28076,f[7021]=28076,f[7024]=28084,f[7023]=28084,f[7026]=28092,f[7025]=28092,f[7028]=28100,f[7027]=28100,f[7030]=28108,f[7029]=28108,f[7032]=28116,f[7031]=28116,f[7034]=28124,f[7033]=28124,f[7036]=28132,f[7035]=28132,f[7038]=28140,f[7037]=28140,f[7040]=28148,f[7039]=28148,f[7042]=28156,f[7041]=28156,f[7044]=28164,f[7043]=28164,f[7046]=28172,f[7045]=28172,f[7048]=28180,f[7047]=28180,f[7050]=28188,f[7049]=28188,f[7052]=28196,f[7051]=28196,xe=R+-40|0,De=S+8|0,De=(De&7|0)==0?0:0-De&7,Re=S+De|0,De=xe-De|0,f[6983]=Re,f[6980]=De,f[Re+4>>2]=De|1,f[S+xe+4>>2]=40,f[6984]=f[7099];while(!1);if(d=f[6980]|0,d>>>0>ne>>>0)return De=d-ne|0,f[6980]=De,xe=f[6983]|0,Re=xe+ne|0,f[6983]=Re,f[Re+4>>2]=De|1,f[xe+4>>2]=ne|3,xe=xe+8|0,Y=mt,xe|0}return xe=j8()|0,f[xe>>2]=12,xe=0,Y=mt,xe|0}function An(h){h=h|0;var d=0,m=0,v=0,x=0,S=0,R=0,C=0,L=0;if(h){m=h+-8|0,x=f[6981]|0,h=f[h+-4>>2]|0,d=h&-8,L=m+d|0;do if(h&1)C=m,R=m;else{if(v=f[m>>2]|0,!(h&3)||(R=m+(0-v)|0,S=v+d|0,R>>>0<x>>>0))return;if((f[6982]|0)==(R|0)){if(h=L+4|0,d=f[h>>2]|0,(d&3|0)!=3){C=R,d=S;break}f[6979]=S,f[h>>2]=d&-2,f[R+4>>2]=S|1,f[R+S>>2]=S;return}if(m=v>>>3,v>>>0<256)if(h=f[R+8>>2]|0,d=f[R+12>>2]|0,(d|0)==(h|0)){f[6977]=f[6977]&~(1<<m),C=R,d=S;break}else{f[h+12>>2]=d,f[d+8>>2]=h,C=R,d=S;break}x=f[R+24>>2]|0,h=f[R+12>>2]|0;do if((h|0)==(R|0)){if(d=R+16|0,m=d+4|0,h=f[m>>2]|0,h)d=m;else if(h=f[d>>2]|0,!h){h=0;break}for(;;)if(v=h+20|0,m=f[v>>2]|0,m)h=m,d=v;else if(v=h+16|0,m=f[v>>2]|0,m)h=m,d=v;else break;f[d>>2]=0}else C=f[R+8>>2]|0,f[C+12>>2]=h,f[h+8>>2]=C;while(!1);if(x){if(d=f[R+28>>2]|0,m=28212+(d<<2)|0,(f[m>>2]|0)==(R|0)){if(f[m>>2]=h,!h){f[6978]=f[6978]&~(1<<d),C=R,d=S;break}}else if(C=x+16|0,f[((f[C>>2]|0)==(R|0)?C:x+20|0)>>2]=h,!h){C=R,d=S;break}f[h+24>>2]=x,d=R+16|0,m=f[d>>2]|0,m|0&&(f[h+16>>2]=m,f[m+24>>2]=h),d=f[d+4>>2]|0,d?(f[h+20>>2]=d,f[d+24>>2]=h,C=R,d=S):(C=R,d=S)}else C=R,d=S}while(!1);if(!(R>>>0>=L>>>0)&&(h=L+4|0,v=f[h>>2]|0,!!(v&1))){if(v&2)f[h>>2]=v&-2,f[C+4>>2]=d|1,f[R+d>>2]=d,x=d;else{if((f[6983]|0)==(L|0)){if(L=(f[6980]|0)+d|0,f[6980]=L,f[6983]=C,f[C+4>>2]=L|1,(C|0)!=(f[6982]|0))return;f[6982]=0,f[6979]=0;return}if((f[6982]|0)==(L|0)){L=(f[6979]|0)+d|0,f[6979]=L,f[6982]=R,f[C+4>>2]=L|1,f[R+L>>2]=L;return}x=(v&-8)+d|0,m=v>>>3;do if(v>>>0<256)if(d=f[L+8>>2]|0,h=f[L+12>>2]|0,(h|0)==(d|0)){f[6977]=f[6977]&~(1<<m);break}else{f[d+12>>2]=h,f[h+8>>2]=d;break}else{S=f[L+24>>2]|0,h=f[L+12>>2]|0;do if((h|0)==(L|0)){if(d=L+16|0,m=d+4|0,h=f[m>>2]|0,h)d=m;else if(h=f[d>>2]|0,!h){m=0;break}for(;;)if(v=h+20|0,m=f[v>>2]|0,m)h=m,d=v;else if(v=h+16|0,m=f[v>>2]|0,m)h=m,d=v;else break;f[d>>2]=0,m=h}else m=f[L+8>>2]|0,f[m+12>>2]=h,f[h+8>>2]=m,m=h;while(!1);if(S|0){if(h=f[L+28>>2]|0,d=28212+(h<<2)|0,(f[d>>2]|0)==(L|0)){if(f[d>>2]=m,!m){f[6978]=f[6978]&~(1<<h);break}}else if(v=S+16|0,f[((f[v>>2]|0)==(L|0)?v:S+20|0)>>2]=m,!m)break;f[m+24>>2]=S,h=L+16|0,d=f[h>>2]|0,d|0&&(f[m+16>>2]=d,f[d+24>>2]=m),h=f[h+4>>2]|0,h|0&&(f[m+20>>2]=h,f[h+24>>2]=m)}}while(!1);if(f[C+4>>2]=x|1,f[R+x>>2]=x,(C|0)==(f[6982]|0)){f[6979]=x;return}}if(h=x>>>3,x>>>0<256){m=27948+(h<<1<<2)|0,d=f[6977]|0,h=1<<h,d&h?(d=m+8|0,h=f[d>>2]|0):(f[6977]=d|h,h=m,d=m+8|0),f[d>>2]=C,f[h+12>>2]=C,f[C+8>>2]=h,f[C+12>>2]=m;return}h=x>>>8,h?x>>>0>16777215?v=31:(R=(h+1048320|0)>>>16&8,L=h<<R,S=(L+520192|0)>>>16&4,L=L<<S,v=(L+245760|0)>>>16&2,v=14-(S|R|v)+(L<<v>>>15)|0,v=x>>>(v+7|0)&1|v<<1):v=0,h=28212+(v<<2)|0,f[C+28>>2]=v,f[C+20>>2]=0,f[C+16>>2]=0,d=f[6978]|0,m=1<<v;e:do if(!(d&m))f[6978]=d|m,f[h>>2]=C,f[C+24>>2]=h,f[C+12>>2]=C,f[C+8>>2]=C;else{h=f[h>>2]|0;t:do if((f[h+4>>2]&-8|0)!=(x|0)){for(v=x<<((v|0)==31?0:25-(v>>>1)|0);m=h+16+(v>>>31<<2)|0,d=f[m>>2]|0,!!d;)if((f[d+4>>2]&-8|0)==(x|0)){h=d;break t}else v=v<<1,h=d;f[m>>2]=C,f[C+24>>2]=h,f[C+12>>2]=C,f[C+8>>2]=C;break e}while(!1);R=h+8|0,L=f[R>>2]|0,f[L+12>>2]=C,f[R>>2]=C,f[C+8>>2]=L,f[C+12>>2]=h,f[C+24>>2]=0}while(!1);if(L=(f[6985]|0)+-1|0,f[6985]=L,!(L|0)){for(h=28364;h=f[h>>2]|0,h;)h=h+8|0;f[6985]=-1}}}}function Cs(h,d){h=h|0,d=d|0;var m=0;return h?(m=we(d,h)|0,(d|h)>>>0>65535&&(m=((m>>>0)/(h>>>0)|0|0)==(d|0)?m:-1)):m=0,h=oo(m)|0,!h||!(f[h+-4>>2]&3)||Lo(h|0,0,m|0)|0,h|0}function fn(h,d,m,v){return h=h|0,d=d|0,m=m|0,v=v|0,m=h+m>>>0,ot(d+v+(m>>>0<h>>>0|0)>>>0|0),m|0|0}function Hr(h,d,m,v){return h=h|0,d=d|0,m=m|0,v=v|0,v=d-v-(m>>>0>h>>>0|0)>>>0,ot(v|0),h-m>>>0|0|0}function Y3(h){return h=h|0,(h?31-(kt(h^h-1)|0)|0:32)|0}function ni(h,d,m,v,x){h=h|0,d=d|0,m=m|0,v=v|0,x=x|0;var S=0,R=0,C=0,L=0,V=0,W=0,ne=0,he=0,ce=0,fe=0;if(W=h,L=d,V=L,R=m,he=v,C=he,!V)return S=(x|0)!=0,C?S?(f[x>>2]=h|0,f[x+4>>2]=d&0,he=0,x=0,ot(he|0),x|0):(he=0,x=0,ot(he|0),x|0):(S&&(f[x>>2]=(W>>>0)%(R>>>0),f[x+4>>2]=0),he=0,x=(W>>>0)/(R>>>0)>>>0,ot(he|0),x|0);S=(C|0)==0;do if(R){if(!S){if(S=(kt(C|0)|0)-(kt(V|0)|0)|0,S>>>0<=31){ne=S+1|0,C=31-S|0,d=S-31>>31,R=ne,h=W>>>(ne>>>0)&d|V<<C,d=V>>>(ne>>>0)&d,S=0,C=W<<C;break}return x?(f[x>>2]=h|0,f[x+4>>2]=L|d&0,he=0,x=0,ot(he|0),x|0):(he=0,x=0,ot(he|0),x|0)}if(S=R-1|0,S&R|0){C=(kt(R|0)|0)+33-(kt(V|0)|0)|0,fe=64-C|0,ne=32-C|0,L=ne>>31,ce=C-32|0,d=ce>>31,R=C,h=ne-1>>31&V>>>(ce>>>0)|(V<<ne|W>>>(C>>>0))&d,d=d&V>>>(C>>>0),S=W<<fe&L,C=(V<<fe|W>>>(ce>>>0))&L|W<<ne&C-33>>31;break}return x|0&&(f[x>>2]=S&W,f[x+4>>2]=0),(R|0)==1?(ce=L|d&0,fe=h|0|0,ot(ce|0),fe|0):(fe=Y3(R|0)|0,ce=V>>>(fe>>>0)|0,fe=V<<32-fe|W>>>(fe>>>0)|0,ot(ce|0),fe|0)}else{if(S)return x|0&&(f[x>>2]=(V>>>0)%(R>>>0),f[x+4>>2]=0),ce=0,fe=(V>>>0)/(R>>>0)>>>0,ot(ce|0),fe|0;if(!W)return x|0&&(f[x>>2]=0,f[x+4>>2]=(V>>>0)%(C>>>0)),ce=0,fe=(V>>>0)/(C>>>0)>>>0,ot(ce|0),fe|0;if(S=C-1|0,!(S&C))return x|0&&(f[x>>2]=h|0,f[x+4>>2]=S&V|d&0),ce=0,fe=V>>>((Y3(C|0)|0)>>>0),ot(ce|0),fe|0;if(S=(kt(C|0)|0)-(kt(V|0)|0)|0,S>>>0<=30){d=S+1|0,C=31-S|0,R=d,h=V<<C|W>>>(d>>>0),d=V>>>(d>>>0),S=0,C=W<<C;break}return x?(f[x>>2]=h|0,f[x+4>>2]=L|d&0,ce=0,fe=0,ot(ce|0),fe|0):(ce=0,fe=0,ot(ce|0),fe|0)}while(!1);if(!R)V=C,L=0,C=0;else{ne=m|0|0,W=he|v&0,V=fn(ne|0,W|0,-1,-1)|0,m=Z()|0,L=C,C=0;do v=L,L=S>>>31|L<<1,S=C|S<<1,v=h<<1|v>>>31|0,he=h>>>31|d<<1|0,Hr(V|0,m|0,v|0,he|0)|0,fe=Z()|0,ce=fe>>31|((fe|0)<0?-1:0)<<1,C=ce&1,h=Hr(v|0,he|0,ce&ne|0,(((fe|0)<0?-1:0)>>31|((fe|0)<0?-1:0)<<1)&W|0)|0,d=Z()|0,R=R-1|0;while((R|0)!=0);V=L,L=0}return R=0,x|0&&(f[x>>2]=h,f[x+4>>2]=d),ce=(S|0)>>>31|(V|R)<<1|(R<<1|S>>>31)&0|L,fe=(S<<1|0)&-2|C,ot(ce|0),fe|0}function nl(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0;return V=d>>31|((d|0)<0?-1:0)<<1,L=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,S=v>>31|((v|0)<0?-1:0)<<1,x=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,C=Hr(V^h|0,L^d|0,V|0,L|0)|0,R=Z()|0,h=S^V,d=x^L,Hr((ni(C,R,Hr(S^m|0,x^v|0,S|0,x|0)|0,Z()|0,0)|0)^h|0,(Z()|0)^d|0,h|0,d|0)|0}function pa(h,d){h=h|0,d=d|0;var m=0,v=0,x=0,S=0;return S=h&65535,x=d&65535,m=we(x,S)|0,v=h>>>16,h=(m>>>16)+(we(x,v)|0)|0,x=d>>>16,d=we(x,S)|0,ot((h>>>16)+(we(x,v)|0)+(((h&65535)+d|0)>>>16)|0),h+d<<16|m&65535|0|0}function wr(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0;return x=h,S=m,m=pa(x,S)|0,h=Z()|0,ot((we(d,S)|0)+(we(v,x)|0)+h|h&0|0),m|0|0|0}function iu(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0,R=0,C=0,L=0,V=0;return x=Y,Y=Y+16|0,C=x|0,R=d>>31|((d|0)<0?-1:0)<<1,S=((d|0)<0?-1:0)>>31|((d|0)<0?-1:0)<<1,V=v>>31|((v|0)<0?-1:0)<<1,L=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,h=Hr(R^h|0,S^d|0,R|0,S|0)|0,d=Z()|0,ni(h,d,Hr(V^m|0,L^v|0,V|0,L|0)|0,Z()|0,C)|0,v=Hr(f[C>>2]^R|0,f[C+4>>2]^S|0,R|0,S|0)|0,m=Z()|0,Y=x,ot(m|0),v|0}function b0(h,d,m,v){h=h|0,d=d|0,m=m|0,v=v|0;var x=0,S=0;return S=Y,Y=Y+16|0,x=S|0,ni(h,d,m,v,x)|0,Y=S,ot(f[x+4>>2]|0),f[x>>2]|0|0}function Jl(h,d,m){return h=h|0,d=d|0,m=m|0,(m|0)<32?(ot(d>>m|0),h>>>m|(d&(1<<m)-1)<<32-m):(ot(((d|0)<0?-1:0)|0),d>>m-32|0)}function lt(h,d,m){return h=h|0,d=d|0,m=m|0,(m|0)<32?(ot(d>>>m|0),h>>>m|(d&(1<<m)-1)<<32-m):(ot(0),d>>>m-32|0)}function St(h,d,m){return h=h|0,d=d|0,m=m|0,(m|0)<32?(ot(d<<m|(h&(1<<m)-1<<32-m)>>>32-m|0),h<<m):(ot(h<<m-32|0),0)}function Q3(h,d,m){return h=h|0,d=d|0,d=kt(d)|0,(d|0)==32&&(d=d+(kt(h)|0)|0),ot(0),d|0}function ff(h,d){return h=+h,d=+d,h!=h?+d:d!=d?+h:+Ut(+h,+d)}function m2(h,d){return h=+h,d=+d,h!=h?+d:d!=d?+h:+_t(+h,+d)}function lo(h){return h=+h,h>=0?+$n(h+.5):+Ge(h-.5)}function il(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0;if((m|0)>=8192)return bi(h|0,d|0,m|0)|0,h|0;if(S=h|0,x=h+m|0,(h&3)==(d&3)){for(;h&3;){if(!m)return S|0;rt[h>>0]=rt[d>>0]|0,h=h+1|0,d=d+1|0,m=m-1|0}for(m=x&-4|0,v=m-64|0;(h|0)<=(v|0);)f[h>>2]=f[d>>2],f[h+4>>2]=f[d+4>>2],f[h+8>>2]=f[d+8>>2],f[h+12>>2]=f[d+12>>2],f[h+16>>2]=f[d+16>>2],f[h+20>>2]=f[d+20>>2],f[h+24>>2]=f[d+24>>2],f[h+28>>2]=f[d+28>>2],f[h+32>>2]=f[d+32>>2],f[h+36>>2]=f[d+36>>2],f[h+40>>2]=f[d+40>>2],f[h+44>>2]=f[d+44>>2],f[h+48>>2]=f[d+48>>2],f[h+52>>2]=f[d+52>>2],f[h+56>>2]=f[d+56>>2],f[h+60>>2]=f[d+60>>2],h=h+64|0,d=d+64|0;for(;(h|0)<(m|0);)f[h>>2]=f[d>>2],h=h+4|0,d=d+4|0}else for(m=x-4|0;(h|0)<(m|0);)rt[h>>0]=rt[d>>0]|0,rt[h+1>>0]=rt[d+1>>0]|0,rt[h+2>>0]=rt[d+2>>0]|0,rt[h+3>>0]=rt[d+3>>0]|0,h=h+4|0,d=d+4|0;for(;(h|0)<(x|0);)rt[h>>0]=rt[d>>0]|0,h=h+1|0,d=d+1|0;return S|0}function Lo(h,d,m){h=h|0,d=d|0,m=m|0;var v=0,x=0,S=0,R=0;if(S=h+m|0,d=d&255,(m|0)>=67){for(;h&3;)rt[h>>0]=d,h=h+1|0;for(v=S&-4|0,R=d|d<<8|d<<16|d<<24,x=v-64|0;(h|0)<=(x|0);)f[h>>2]=R,f[h+4>>2]=R,f[h+8>>2]=R,f[h+12>>2]=R,f[h+16>>2]=R,f[h+20>>2]=R,f[h+24>>2]=R,f[h+28>>2]=R,f[h+32>>2]=R,f[h+36>>2]=R,f[h+40>>2]=R,f[h+44>>2]=R,f[h+48>>2]=R,f[h+52>>2]=R,f[h+56>>2]=R,f[h+60>>2]=R,h=h+64|0;for(;(h|0)<(v|0);)f[h>>2]=R,h=h+4|0}for(;(h|0)<(S|0);)rt[h>>0]=d,h=h+1|0;return S-m|0}function $3(h){return h=+h,h>=0?+$n(h+.5):+Ge(h-.5)}function Io(h){h=h|0;var d=0,m=0,v=0;return v=ti()|0,m=f[ii>>2]|0,d=m+h|0,(h|0)>0&(d|0)<(m|0)|(d|0)<0?(Bi(d|0)|0,mn(12),-1):(d|0)>(v|0)&&!(Ki(d|0)|0)?(mn(12),-1):(f[ii>>2]=d,m|0)}return{___divdi3:nl,___muldi3:wr,___remdi3:iu,___uremdi3:b0,_areNeighborCells:H7,_bitshift64Ashr:Jl,_bitshift64Lshr:lt,_bitshift64Shl:St,_calloc:Cs,_cellAreaKm2:f2,_cellAreaM2:Kl,_cellAreaRads2:J0,_cellToBoundary:Ql,_cellToCenterChild:L3,_cellToChildPos:Tm,_cellToChildren:Y7,_cellToChildrenSize:Xl,_cellToLatLng:K0,_cellToLocalIj:F8,_cellToParent:D3,_cellToVertex:La,_cellToVertexes:Cm,_cellsToDirectedEdge:M8,_cellsToLinkedMultiPolygon:L7,_childPosToCell:K7,_compactCells:Q7,_destroyLinkedMultiPolygon:I8,_directedEdgeToBoundary:ro,_directedEdgeToCells:Sm,_edgeLengthKm:ef,_edgeLengthM:d2,_edgeLengthRads:J7,_emscripten_replace_memory:xn,_free:An,_getBaseCellNumber:l2,_getDirectedEdgeDestination:A0,_getDirectedEdgeOrigin:W7,_getHexagonAreaAvgKm2:$l,_getHexagonAreaAvgM2:Z0,_getHexagonEdgeLengthAvgKm:D8,_getHexagonEdgeLengthAvgM:B8,_getIcosahedronFaces:U3,_getNumCells:so,_getPentagons:F3,_getRes0Cells:A8,_getResolution:C8,_greatCircleDistanceKm:K1,_greatCircleDistanceM:da,_greatCircleDistanceRads:Ys,_gridDisk:f0,_gridDiskDistances:Vi,_gridDistance:nf,_gridPathCells:rf,_gridPathCellsSize:Rs,_gridRing:ds,_gridRingUnsafe:jl,_i64Add:fn,_i64Subtract:Hr,_isPentagon:Ci,_isResClassIII:cr,_isValidCell:P3,_isValidDirectedEdge:E8,_isValidVertex:Pm,_latLngToCell:v0,_llvm_ctlz_i64:Q3,_llvm_maxnum_f64:ff,_llvm_minnum_f64:m2,_llvm_round_f64:lo,_localIjToCell:Aa,_malloc:oo,_maxFaceCount:P8,_maxGridDiskSize:Jr,_maxPolygonToCellsSize:x3,_maxPolygonToCellsSizeExperimental:Z1,_memcpy:il,_memset:Lo,_originToDirectedEdges:j7,_pentagonCount:O3,_polygonToCells:B7,_polygonToCellsExperimental:z8,_readInt64AsDoubleFromPointer:wm,_res0CellCount:O7,_round:$3,_sbrk:Io,_sizeOfCellBoundary:of,_sizeOfCoordIJ:uf,_sizeOfGeoLoop:tu,_sizeOfGeoPolygon:j3,_sizeOfH3Index:Em,_sizeOfLatLng:af,_sizeOfLinkedGeoPolygon:lf,_uncompactCells:I3,_uncompactCellsSize:u2,_vertexToLatLng:Nm,establishStackSpace:h0,stackAlloc:Zi,stackRestore:hs,stackSave:di}})(Ue,Mt,j);e.___divdi3=le.___divdi3,e.___muldi3=le.___muldi3,e.___remdi3=le.___remdi3,e.___uremdi3=le.___uremdi3,e._areNeighborCells=le._areNeighborCells,e._bitshift64Ashr=le._bitshift64Ashr,e._bitshift64Lshr=le._bitshift64Lshr,e._bitshift64Shl=le._bitshift64Shl,e._calloc=le._calloc,e._cellAreaKm2=le._cellAreaKm2,e._cellAreaM2=le._cellAreaM2,e._cellAreaRads2=le._cellAreaRads2,e._cellToBoundary=le._cellToBoundary,e._cellToCenterChild=le._cellToCenterChild,e._cellToChildPos=le._cellToChildPos,e._cellToChildren=le._cellToChildren,e._cellToChildrenSize=le._cellToChildrenSize,e._cellToLatLng=le._cellToLatLng,e._cellToLocalIj=le._cellToLocalIj,e._cellToParent=le._cellToParent,e._cellToVertex=le._cellToVertex,e._cellToVertexes=le._cellToVertexes,e._cellsToDirectedEdge=le._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=le._cellsToLinkedMultiPolygon,e._childPosToCell=le._childPosToCell,e._compactCells=le._compactCells,e._destroyLinkedMultiPolygon=le._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=le._directedEdgeToBoundary,e._directedEdgeToCells=le._directedEdgeToCells,e._edgeLengthKm=le._edgeLengthKm,e._edgeLengthM=le._edgeLengthM,e._edgeLengthRads=le._edgeLengthRads;var ut=e._emscripten_replace_memory=le._emscripten_replace_memory;e._free=le._free,e._getBaseCellNumber=le._getBaseCellNumber,e._getDirectedEdgeDestination=le._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=le._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=le._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=le._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=le._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=le._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=le._getIcosahedronFaces,e._getNumCells=le._getNumCells,e._getPentagons=le._getPentagons,e._getRes0Cells=le._getRes0Cells,e._getResolution=le._getResolution,e._greatCircleDistanceKm=le._greatCircleDistanceKm,e._greatCircleDistanceM=le._greatCircleDistanceM,e._greatCircleDistanceRads=le._greatCircleDistanceRads,e._gridDisk=le._gridDisk,e._gridDiskDistances=le._gridDiskDistances,e._gridDistance=le._gridDistance,e._gridPathCells=le._gridPathCells,e._gridPathCellsSize=le._gridPathCellsSize,e._gridRing=le._gridRing,e._gridRingUnsafe=le._gridRingUnsafe,e._i64Add=le._i64Add,e._i64Subtract=le._i64Subtract,e._isPentagon=le._isPentagon,e._isResClassIII=le._isResClassIII,e._isValidCell=le._isValidCell,e._isValidDirectedEdge=le._isValidDirectedEdge,e._isValidVertex=le._isValidVertex,e._latLngToCell=le._latLngToCell,e._llvm_ctlz_i64=le._llvm_ctlz_i64,e._llvm_maxnum_f64=le._llvm_maxnum_f64,e._llvm_minnum_f64=le._llvm_minnum_f64,e._llvm_round_f64=le._llvm_round_f64,e._localIjToCell=le._localIjToCell,e._malloc=le._malloc,e._maxFaceCount=le._maxFaceCount,e._maxGridDiskSize=le._maxGridDiskSize,e._maxPolygonToCellsSize=le._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=le._maxPolygonToCellsSizeExperimental,e._memcpy=le._memcpy,e._memset=le._memset,e._originToDirectedEdges=le._originToDirectedEdges,e._pentagonCount=le._pentagonCount,e._polygonToCells=le._polygonToCells,e._polygonToCellsExperimental=le._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=le._readInt64AsDoubleFromPointer,e._res0CellCount=le._res0CellCount,e._round=le._round,e._sbrk=le._sbrk,e._sizeOfCellBoundary=le._sizeOfCellBoundary,e._sizeOfCoordIJ=le._sizeOfCoordIJ,e._sizeOfGeoLoop=le._sizeOfGeoLoop,e._sizeOfGeoPolygon=le._sizeOfGeoPolygon,e._sizeOfH3Index=le._sizeOfH3Index,e._sizeOfLatLng=le._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=le._sizeOfLinkedGeoPolygon,e._uncompactCells=le._uncompactCells,e._uncompactCellsSize=le._uncompactCellsSize,e._vertexToLatLng=le._vertexToLatLng,e.establishStackSpace=le.establishStackSpace;var bt=e.stackAlloc=le.stackAlloc,Gt=e.stackRestore=le.stackRestore,vt=e.stackSave=le.stackSave;if(e.asm=le,e.cwrap=D,e.setValue=_,e.getValue=b,cn){de(cn)||(cn=s(cn));{ft();var at=function(Ve){Ve.byteLength&&(Ve=new Uint8Array(Ve)),K.set(Ve,y),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,wt()},qt=function(){a(cn,at,function(){throw"could not load memory initializer "+cn})},hn=ge(cn);if(hn)at(hn.buffer);else if(e.memoryInitializerRequest){var ei=function(){var Ve=e.memoryInitializerRequest,nt=Ve.response;if(Ve.status!==200&&Ve.status!==0){var It=ge(e.memoryInitializerRequestURL);if(It)nt=It.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Ve.status+", retrying "+cn),qt();return}}at(nt)};e.memoryInitializerRequest.response?setTimeout(ei,0):e.memoryInitializerRequest.addEventListener("load",ei)}else qt()}}var Hn;xt=function Ve(){Hn||Er(),Hn||(xt=Ve)};function Er(Ve){if(ke>0||(Xe(),ke>0))return;function nt(){Hn||(Hn=!0,!w&&(Tt(),Ft(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Pt()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),nt()},1)):nt()}e.run=Er;function ur(Ve){throw e.onAbort&&e.onAbort(Ve),Ve+="",o(Ve),l(Ve),w=!0,"abort("+Ve+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=ur,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return Er(),i})(typeof vi=="object"?vi:{}),Fn="number",En=Fn,Th=Fn,Un=Fn,On=Fn,vs=Fn,Jt=Fn,vJ=[["sizeOfH3Index",Fn],["sizeOfLatLng",Fn],["sizeOfCellBoundary",Fn],["sizeOfGeoLoop",Fn],["sizeOfGeoPolygon",Fn],["sizeOfLinkedGeoPolygon",Fn],["sizeOfCoordIJ",Fn],["readInt64AsDoubleFromPointer",Fn],["isValidCell",Th,[Un,On]],["latLngToCell",En,[Fn,Fn,vs,Jt]],["cellToLatLng",En,[Un,On,Jt]],["cellToBoundary",En,[Un,On,Jt]],["maxGridDiskSize",En,[Fn,Jt]],["gridDisk",En,[Un,On,Fn,Jt]],["gridDiskDistances",En,[Un,On,Fn,Jt,Jt]],["gridRing",En,[Un,On,Fn,Jt]],["gridRingUnsafe",En,[Un,On,Fn,Jt]],["maxPolygonToCellsSize",En,[Jt,vs,Fn,Jt]],["polygonToCells",En,[Jt,vs,Fn,Jt]],["maxPolygonToCellsSizeExperimental",En,[Jt,vs,Fn,Jt]],["polygonToCellsExperimental",En,[Jt,vs,Fn,Fn,Fn,Jt]],["cellsToLinkedMultiPolygon",En,[Jt,Fn,Jt]],["destroyLinkedMultiPolygon",null,[Jt]],["compactCells",En,[Jt,Jt,Fn,Fn]],["uncompactCells",En,[Jt,Fn,Fn,Jt,Fn,vs]],["uncompactCellsSize",En,[Jt,Fn,Fn,vs,Jt]],["isPentagon",Th,[Un,On]],["isResClassIII",Th,[Un,On]],["getBaseCellNumber",Fn,[Un,On]],["getResolution",Fn,[Un,On]],["maxFaceCount",En,[Un,On,Jt]],["getIcosahedronFaces",En,[Un,On,Jt]],["cellToParent",En,[Un,On,vs,Jt]],["cellToChildren",En,[Un,On,vs,Jt]],["cellToCenterChild",En,[Un,On,vs,Jt]],["cellToChildrenSize",En,[Un,On,vs,Jt]],["cellToChildPos",En,[Un,On,vs,Jt]],["childPosToCell",En,[Fn,Fn,Un,On,vs,Jt]],["areNeighborCells",En,[Un,On,Un,On,Jt]],["cellsToDirectedEdge",En,[Un,On,Un,On,Jt]],["getDirectedEdgeOrigin",En,[Un,On,Jt]],["getDirectedEdgeDestination",En,[Un,On,Jt]],["isValidDirectedEdge",Th,[Un,On]],["directedEdgeToCells",En,[Un,On,Jt]],["originToDirectedEdges",En,[Un,On,Jt]],["directedEdgeToBoundary",En,[Un,On,Jt]],["gridDistance",En,[Un,On,Un,On,Jt]],["gridPathCells",En,[Un,On,Un,On,Jt]],["gridPathCellsSize",En,[Un,On,Un,On,Jt]],["cellToLocalIj",En,[Un,On,Un,On,Fn,Jt]],["localIjToCell",En,[Un,On,Jt,Fn,Jt]],["getHexagonAreaAvgM2",En,[vs,Jt]],["getHexagonAreaAvgKm2",En,[vs,Jt]],["getHexagonEdgeLengthAvgM",En,[vs,Jt]],["getHexagonEdgeLengthAvgKm",En,[vs,Jt]],["greatCircleDistanceM",Fn,[Jt,Jt]],["greatCircleDistanceKm",Fn,[Jt,Jt]],["greatCircleDistanceRads",Fn,[Jt,Jt]],["cellAreaM2",En,[Un,On,Jt]],["cellAreaKm2",En,[Un,On,Jt]],["cellAreaRads2",En,[Un,On,Jt]],["edgeLengthM",En,[Un,On,Jt]],["edgeLengthKm",En,[Un,On,Jt]],["edgeLengthRads",En,[Un,On,Jt]],["getNumCells",En,[vs,Jt]],["getRes0Cells",En,[Jt]],["res0CellCount",Fn],["getPentagons",En,[Fn,Jt]],["pentagonCount",Fn],["cellToVertex",En,[Un,On,Fn,Jt]],["cellToVertexes",En,[Un,On,Jt]],["vertexToLatLng",En,[Un,On,Jt]],["isValidVertex",Th,[Un,On]]],_J=0,xJ=1,bJ=2,SJ=3,JP=4,TJ=5,MJ=6,EJ=7,wJ=8,RJ=9,CJ=10,NJ=11,PJ=12,DJ=13,BJ=14,LJ=15,Hs={};Hs[_J]="Success";Hs[xJ]="The operation failed but a more specific error is not available";Hs[bJ]="Argument was outside of acceptable range";Hs[SJ]="Latitude or longitude arguments were outside of acceptable range";Hs[JP]="Resolution argument was outside of acceptable range";Hs[TJ]="Cell argument was not valid";Hs[MJ]="Directed edge argument was not valid";Hs[EJ]="Undirected edge argument was not valid";Hs[wJ]="Vertex argument was not valid";Hs[RJ]="Pentagon distortion was encountered";Hs[CJ]="Duplicate input";Hs[NJ]="Cell arguments were not neighbors";Hs[PJ]="Cell arguments had incompatible resolutions";Hs[DJ]="Memory allocation failed";Hs[BJ]="Bounds of provided memory were insufficient";Hs[LJ]="Mode or flags argument was not valid";var IJ=1e3,eD=1001,tD=1002,Fp={};Fp[IJ]="Unknown unit";Fp[eD]="Array length out of bounds";Fp[tD]="Got unexpected null value for H3 index";var UJ="Unknown error";function nD(i,e,t){var n=t&&"value"in t,r=new Error((i[e]||UJ)+" (code: "+e+(n?", value: "+t.value:"")+")");return r.code=e,r}function iD(i,e){var t=arguments.length===2?{value:e}:{};return nD(Hs,i,t)}function rD(i,e){var t=arguments.length===2?{value:e}:{};return nD(Fp,i,t)}function U6(i){if(i!==0)throw iD(i)}var Za={};vJ.forEach(function(e){Za[e[0]]=vi.cwrap.apply(vi,e)});var c5=16,O6=4,H5=8,OJ=8,wA=Za.sizeOfH3Index(),db=Za.sizeOfLatLng(),FJ=Za.sizeOfCellBoundary(),VJ=Za.sizeOfGeoPolygon(),o6=Za.sizeOfGeoLoop();Za.sizeOfLinkedGeoPolygon();Za.sizeOfCoordIJ();function zJ(i){if(typeof i!="number"||i<0||i>15||Math.floor(i)!==i)throw iD(JP,i);return i}function GJ(i){if(!i)throw rD(tD);return i}var qJ=Math.pow(2,32)-1;function kJ(i){if(i>qJ)throw rD(eD,i);return i}var HJ=/[^0-9a-fA-F]/;function sD(i){if(Array.isArray(i)&&i.length===2&&Number.isInteger(i[0])&&Number.isInteger(i[1]))return i;if(typeof i!="string"||HJ.test(i))return[0,0];var e=parseInt(i.substring(0,i.length-8),c5),t=parseInt(i.substring(i.length-8),c5);return[t,e]}function Aw(i){if(i>=0)return i.toString(c5);i=i&2147483647;var e=aD(8,i.toString(c5)),t=(parseInt(e[0],c5)+8).toString(c5);return e=t+e.substring(1),e}function WJ(i,e){return Aw(e)+aD(8,Aw(i))}function aD(i,e){for(var t=i-e.length,n="",r=0;r<t;r++)n+="0";return n=n+e,n}function pw(i,e,t){for(var n=i.length,r=vi._calloc(n,db),s=t?1:0,a=t?0:1,o=0;o<n*2;o+=2)vi.HEAPF64.set([i[o/2][s],i[o/2][a]].map(cD),r/H5+o);return vi.HEAPU32.set([n,r],e/O6),e}function jJ(i,e){var t=i.length-1,n=vi._calloc(VJ),r=0,s=r+o6,a=s+O6;pw(i[0],n+r,e);var o;if(t>0){o=vi._calloc(t,o6);for(var l=0;l<t;l++)pw(i[l+1],o+o6*l,e)}return vi.setValue(n+s,t,"i32"),vi.setValue(n+a,o,"i32"),n}function XJ(i){var e=0,t=e+o6,n=t+O6,r=O6;vi._free(vi.getValue(i+e+r,"i8*"));var s=vi.getValue(i+t,"i32");if(s>0){for(var a=vi.getValue(i+n,"i32"),o=0;o<s;o++)vi._free(vi.getValue(a+o6*o+r,"i8*"));vi._free(a)}vi._free(i)}function oD(i,e){e===void 0&&(e=0);var t=vi.getValue(i+wA*e,"i32"),n=vi.getValue(i+wA*e+O6,"i32");return n?WJ(t,n):null}function YJ(i){return Za.readInt64AsDoubleFromPointer(i)}function QJ(i,e){for(var t=[],n=0;n<e;n++){var r=oD(i,n);r!==null&&t.push(r)}return t}function RA(i){return eee(vi.getValue(i,"double"))}function $J(i){return[RA(i),RA(i+H5)]}function KJ(i){return[RA(i+H5),RA(i)]}function ZJ(i,e,t){for(var n=vi.getValue(i,"i32"),r=i+H5,s=[],a=KJ,o=0;o<n*2;o+=2)s.push(a(r+H5*o));return s.push(s[0]),s}function JJ(i,e,t){var n=vi._malloc(db);vi.HEAPF64.set([i,e].map(cD),n/H5);var r=vi._malloc(wA);try{return U6(Za.latLngToCell(n,t,r)),GJ(oD(r))}finally{vi._free(r),vi._free(n)}}function lD(i){var e=vi._malloc(db),t=sD(i),n=t[0],r=t[1];try{return U6(Za.cellToLatLng(n,r,e)),$J(e)}finally{vi._free(e)}}function uD(i,e){var t=vi._malloc(FJ),n=sD(i),r=n[0],s=n[1];try{return U6(Za.cellToBoundary(r,s,t)),ZJ(t,e,e)}finally{vi._free(t)}}function mw(i,e,t){if(zJ(e),t=!!t,i.length===0||i[0].length===0)return[];var n=typeof i[0][0]=="number"?[i]:i,r=jJ(n,t),s=vi._malloc(OJ);try{U6(Za.maxPolygonToCellsSize(r,e,0,s));var a=kJ(YJ(s)),o=vi._calloc(a,wA);try{return U6(Za.polygonToCells(r,e,0,o)),QJ(o,a)}finally{vi._free(o)}}finally{vi._free(s),XJ(r)}}function cD(i){return i*Math.PI/180}function eee(i){return i*180/Math.PI}function tee(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const nee=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],ay=new WeakMap;class iee{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=nee,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const t=e.getMRT();return t!==null&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:r,object:s}=e;if(t={material:this.getMaterialData(r),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:a,height:o}=e.context;t.bufferWidth=a,t.bufferHeight=o}t.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const r=e[n];t[n]={version:r.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.overrideNodes.modelViewMatrix!==null||e.renderer.overrideNodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const r=e[n];r!=null&&(typeof r=="object"&&r.clone!==void 0?r.isTexture===!0?t[n]={id:r.id,version:r.version}:t[n]=r.clone():t[n]=r)}return t}equals(e,t){const{object:n,material:r,geometry:s}=e,a=this.getRenderObjectData(e);if(a.worldMatrix.equals(n.matrixWorld)!==!0)return a.worldMatrix.copy(n.matrixWorld),!1;const o=a.material;for(const E in o){const M=o[E],P=r[E];if(M.equals!==void 0){if(M.equals(P)===!1)return M.copy(P),!1}else if(P.isTexture===!0){if(M.id!==P.id||M.version!==P.version)return M.id=P.id,M.version=P.version,!1}else if(M!==P)return o[E]=P,!1}if(o.transmission>0){const{width:E,height:M}=e.context;if(a.bufferWidth!==E||a.bufferHeight!==M)return a.bufferWidth=E,a.bufferHeight=M,!1}const l=a.geometry,u=s.attributes,c=l.attributes,p=Object.keys(c),y=Object.keys(u);if(l.id!==s.id)return l.id=s.id,!1;if(p.length!==y.length)return a.geometry.attributes=this.getAttributesData(u),!1;for(const E of p){const M=c[E],P=u[E];if(P===void 0)return delete c[E],!1;if(M.version!==P.version)return M.version=P.version,!1}const _=s.index,b=l.indexVersion,w=_?_.version:null;if(b!==w)return l.indexVersion=w,!1;if(l.drawRange.start!==s.drawRange.start||l.drawRange.count!==s.drawRange.count)return l.drawRange.start=s.drawRange.start,l.drawRange.count=s.drawRange.count,!1;if(a.morphTargetInfluences){let E=!1;for(let M=0;M<a.morphTargetInfluences.length;M++)a.morphTargetInfluences[M]!==n.morphTargetInfluences[M]&&(E=!0);if(E)return!0}if(a.lights){for(let E=0;E<t.length;E++)if(a.lights[E].map!==t[E].map)return!1}return a.center&&a.center.equals(n.center)===!1?(a.center.copy(n.center),!0):(e.bundle!==null&&(a.version=e.bundle.version),!0)}getLightsData(e){const t=[];for(const n of e)n.isSpotLight===!0&&n.map!==null&&t.push({map:n.map.version});return t}getLights(e,t){if(ay.has(e)){const r=ay.get(e);if(r.renderId===t)return r.lightsData}const n=this.getLightsData(e.getLights());return ay.set(e,{renderId:t,lightsData:n}),n}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const r=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;if(r||s)return!1;const a=this.getLights(e.lightsNode,n);return this.equals(e,a)!==!0}}function F6(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let r=0,s;r<i.length;r++)s=i[r],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const hD=i=>F6(i),Vp=i=>F6(i),CA=(...i)=>F6(i);function fD(i,e=!1){const t=[];i.isNode===!0&&t.push(i.id);for(const{property:n,childNode:r}of NA(i))t.push(F6(n.slice(0,-4)),r.getCacheKey(e));return F6(t)}function*NA(i,e=!1){for(const t of Object.getOwnPropertyNames(i)){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let r=0;r<n.length;r++){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(n&&Object.getPrototypeOf(n)===Object.prototype)for(const r in n){if(r.startsWith("_")===!0)continue;const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}}}const ree=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),gw=new WeakMap;function dD(i){return ree.get(i)}function PA(i){if(/[iu]?vec\d/.test(i))return i.startsWith("ivec")?Int32Array:i.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(i)||/float/.test(i))return Float32Array;if(/uint/.test(i))return Uint32Array;if(/int/.test(i))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${i}`)}function AD(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 9;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function see(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 12;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function aee(i){if(/float|int|uint/.test(i))return 4;if(/vec2/.test(i))return 8;if(/vec3/.test(i)||/vec4/.test(i))return 16;if(/mat2/.test(i))return 8;if(/mat3/.test(i))return 48;if(/mat4/.test(i))return 64;console.error("THREE.TSL: Unsupported type:",i)}function Du(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function Ab(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new Dt(...e):t==="vec2"?new He(...e):t==="vec3"?new te(...e):t==="vec4"?new an(...e):t==="mat2"?new p7(...e):t==="mat3"?new Vn(...e):t==="mat4"?new $t(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?gD(e[0]):null}function pD(i){let e=gw.get(i);return e===void 0&&(e={},gw.set(i,e)),e}function mD(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function gD(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}const Kh={VERTEX:"vertex",FRAGMENT:"fragment"},kn={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},oee={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},zs={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},yD=["fragment","vertex"],s_=["setup","analyze","generate"],a_=[...yD,"compute"],m3=["x","y","z","w"],lee={analyze:"setup",generate:"analyze"};let uee=0;class jt extends No{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=kn.NONE,this.updateBeforeType=kn.NONE,this.updateAfterType=kn.NONE,this.uuid=dp.generateUUID(),this.version=0,this.global=!1,this.parents=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:uee++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this),this}onFrameUpdate(e){return this.onUpdate(e,kn.FRAME)}onRenderUpdate(e){return this.onUpdate(e,kn.RENDER)}onObjectUpdate(e){return this.onUpdate(e,kn.OBJECT)}onReference(e){return this.updateReference=e.bind(this),this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of NA(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=CA(fD(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}getArrayCount(){return null}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())t["node"+n++]=r;return t.outputNode||null}analyze(e,t=null){const n=e.increaseUsage(this);if(this.parents===!0){const r=e.getDataFromNode(this,"any");r.stages=r.stages||{},r.stages[e.shaderStage]=r.stages[e.shaderStage]||[],r.stages[e.shaderStage].push(t)}if(n===1){const r=e.getNodeProperties(this);for(const s of Object.values(r))s&&s.isNode===!0&&s.build(e,this)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);const r=e.getDataFromNode(this);r.buildStages=r.buildStages||{},r.buildStages[e.buildStage]=!0;const s=lee[e.buildStage];if(s&&r.buildStages[s]!==!0){const l=e.getBuildStage();e.setBuildStage(s),this.build(e),e.setBuildStage(l)}e.addNode(this),e.addChain(this);let a=null;const o=e.getBuildStage();if(o==="setup"){this.updateReference(e);const l=e.getNodeProperties(this);if(l.initialized!==!0){l.initialized=!0,l.outputNode=this.setup(e)||l.outputNode||null;for(const u of Object.values(l))if(u&&u.isNode===!0){if(u.parents===!0){const c=e.getNodeProperties(u);c.parents=c.parents||[],c.parents.push(this)}u.build(e)}}a=l.outputNode}else if(o==="analyze")this.analyze(e,t);else if(o==="generate"){if(this.generate.length===1){const u=this.getNodeType(e),c=e.getDataFromNode(this);a=c.snippet,a===void 0?c.generated===void 0?(c.generated=!0,a=this.generate(e)||"",c.snippet=a):(console.warn("THREE.Node: Recursion detected.",this),a="/* Recursion detected. */"):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,u,t)}else a=this.generate(e,t)||"";a===""&&t!==null&&t!=="void"&&t!=="OutputType"&&(console.error(`THREE.TSL: Invalid generated code, expected a "${t}".`),a=e.generateConst(t))}return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return NA(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:r,index:s,childNode:a}of t)s!==void 0?(n[r]===void 0&&(n[r]=Number.isInteger(s)?[]:{}),n[r][s]=a.toJSON(e.meta).uuid):n[r]=a.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const r=[];for(const s of e.inputNodes[n])r.push(t[s]);this[n]=r}else if(typeof e.inputNodes[n]=="object"){const r={};for(const s in e.inputNodes[n]){const a=e.inputNodes[n][s];r[s]=t[a]}this[n]=r}else{const r=e.inputNodes[n];this[n]=t[r]}}}toJSON(e){const{uuid:t,type:n}=this,r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},r!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}if(r){const o=a(e.textures),l=a(e.images),u=a(e.nodes);o.length>0&&(s.textures=o),l.length>0&&(s.images=l),u.length>0&&(s.nodes=u)}return s}}class g3 extends jt{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),r=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${r} ]`}}class vD extends jt{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const r of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(r))&&(n=r);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,r=this.getNodeType(e),s=n.build(e,r);return e.format(s,r,t)}}class zr extends jt{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const r=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,r,t);if(r!=="void"&&t!=="void"&&this.hasDependencies(e)){const a=super.build(e,r),o=e.getVarFromNode(this,null,r),l=e.getPropertyName(o);return e.addLineFlowCode(`${l} = ${a}`,this),s.snippet=a,s.propertyName=l,e.format(s.propertyName,r,t)}}return super.build(e,t)}}class cee extends zr{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),r=e.getTypeLength(n),s=this.nodes,a=e.getComponentType(n),o=[];let l=0;for(const c of s){if(l>=r){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let p=c.getNodeType(e),y=e.getTypeLength(p),_;if(l+y>r&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),y=r-l,p=e.getTypeFromLength(y)),l+=y,_=c.build(e,p),e.getComponentType(p)!==a){const w=e.getTypeFromLength(y,a);_=e.format(_,p,w)}o.push(_)}const u=`${e.getType(n)}( ${o.join(", ")} )`;return e.format(u,n,t)}}const hee=m3.join("");class _D extends jt{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(m3.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}getScope(){return this.node.getScope()}generate(e,t){const n=this.node,r=e.getTypeLength(n.getNodeType(e));let s=null;if(r>1){let a=null;this.getVectorLength()>=r&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=n.build(e,a);this.components.length===r&&this.components===hee.slice(0,this.components.length)?s=e.format(l,a,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class fee extends zr{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:r}=this,s=this.getNodeType(e),a=e.getComponentType(r.getNodeType(e)),o=e.getTypeFromLength(n.length,a),l=r.build(e,o),u=t.build(e,s),c=e.getTypeLength(s),p=[];for(let y=0;y<c;y++){const _=m3[y];_===n[0]?(p.push(l),y+=n.length-1):p.push(u+"."+_)}return`${e.getType(s)}( ${p.join(", ")} )`}}class dee extends zr{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,r=this.getNodeType(e),s=n.build(e),a=e.getVarFromNode(this),o=e.getPropertyName(a);e.addLineFlowCode(o+" = "+s,this);const l=e.getTypeLength(r),u=[];let c=0;for(let p=0;p<l;p++){const y=m3[p];y===t[c]?(u.push("1.0 - "+(o+"."+y)),c++):u.push(o+"."+y)}return`${e.getType(r)}( ${u.join(", ")} )`}}class pb extends jt{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Du(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Du(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=mD(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?Ab(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const yw=/float|u?int/;class u0 extends pb{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return yw.test(n)&&yw.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class Aee extends jt{static get type(){return"MemberNode"}constructor(e,t){super(),this.structNode=e,this.property=t,this.isMemberNode=!0}hasMember(e){return this.structNode.isMemberNode&&this.structNode.hasMember(e)===!1?!1:this.structNode.getMemberType(e,this.property)!=="void"}getNodeType(e){return this.hasMember(e)===!1?"float":this.structNode.getMemberType(e,this.property)}getMemberType(e,t){if(this.hasMember(e)===!1)return"float";const n=this.getNodeType(e);return e.getStructTypeNode(n).getMemberType(e,t)}generate(e){if(this.hasMember(e)===!1){console.warn(`THREE.TSL: Member "${this.property}" does not exist in struct.`);const n=this.getNodeType(e);return e.generateConst(n)}return this.structNode.build(e)+"."+this.property}}let Gu=null;const o_=new Map;function je(i,e){if(o_.has(i)){console.warn(`THREE.TSL: Redefinition of method chaining '${i}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${i} is not a function`);o_.set(i,e),i!=="assign"&&(jt.prototype[i]=function(...t){return this.isStackNode?this.add(e(...t)):e(this,...t)},jt.prototype[i+"Assign"]=function(...t){return this.isStackNode?this.assign(t[0],e(...t)):this.assign(e(this,...t))})}const pee=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),vw=i=>pee(i).split("").sort().join("");jt.prototype.assign=function(...i){if(this.isStackNode!==!0)return Gu!==null?Gu.assign(this,...i):console.error("THREE.TSL: No stack defined for assign operation. Make sure the assign is inside a Fn()."),this;{const e=o_.get("assign");return this.add(e(...i))}};jt.prototype.toVarIntent=function(){return this};jt.prototype.get=function(i){return new Aee(this,i)};const l6={};function V9(i,e,t){l6[i]=l6[e]=l6[t]={get(){this._cache=this._cache||{};let a=this._cache[i];return a===void 0&&(a=new _D(this,i),this._cache[i]=a),a},set(a){this[i].assign($e(a))}};const n=i.toUpperCase(),r=e.toUpperCase(),s=t.toUpperCase();jt.prototype["set"+n]=jt.prototype["set"+r]=jt.prototype["set"+s]=function(a){const o=vw(i);return new fee(this,o,$e(a))},jt.prototype["flip"+n]=jt.prototype["flip"+r]=jt.prototype["flip"+s]=function(){const a=vw(i);return new dee(this,a)}}const cl=["x","y","z","w"],hl=["r","g","b","a"],fl=["s","t","p","q"];for(let i=0;i<4;i++){let e=cl[i],t=hl[i],n=fl[i];V9(e,t,n);for(let r=0;r<4;r++){e=cl[i]+cl[r],t=hl[i]+hl[r],n=fl[i]+fl[r],V9(e,t,n);for(let s=0;s<4;s++){e=cl[i]+cl[r]+cl[s],t=hl[i]+hl[r]+hl[s],n=fl[i]+fl[r]+fl[s],V9(e,t,n);for(let a=0;a<4;a++)e=cl[i]+cl[r]+cl[s]+cl[a],t=hl[i]+hl[r]+hl[s]+hl[a],n=fl[i]+fl[r]+fl[s]+fl[a],V9(e,t,n)}}}for(let i=0;i<32;i++)l6[i]={get(){this._cache=this._cache||{};let e=this._cache[i];return e===void 0&&(e=new g3(this,new u0(i,"uint")),this._cache[i]=e),e},set(e){this[i].assign($e(e))}};Object.defineProperties(jt.prototype,l6);const _w=new WeakMap,mee=function(i,e=null){const t=Du(i);return t==="node"?i:e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string"?$e(l_(i,e)):t==="shader"?i.isFn?i:Te(i):i},gee=function(i,e=null){for(const t in i)i[t]=$e(i[t],e);return i},yee=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=$e(i[n],e);return i},xD=function(i,e=null,t=null,n=null){function r(c){return n!==null?(c=$e(Object.assign(c,n)),n.intent===!0&&(c=c.toVarIntent())):c=$e(c),c}let s,a=e,o,l;function u(c){let p;return a?p=/[a-z]/i.test(a)?a+"()":a:p=i.type,o!==void 0&&c.length<o?(console.error(`THREE.TSL: "${p}" parameter length is less than minimum required.`),c.concat(new Array(o-c.length).fill(0))):l!==void 0&&c.length>l?(console.error(`THREE.TSL: "${p}" parameter length exceeds limit.`),c.slice(0,l)):c}return e===null?s=(...c)=>r(new i(...xc(u(c)))):t!==null?(t=$e(t),s=(...c)=>r(new i(e,...xc(u(c)),t))):s=(...c)=>r(new i(e,...xc(u(c)))),s.setParameterLength=(...c)=>(c.length===1?o=l=c[0]:c.length===2&&([o,l]=c),s),s.setName=c=>(a=c,s),s},vee=function(i,...e){return $e(new i(...xc(e)))};class _ee extends jt{constructor(e,t){super(),this.shaderNode=e,this.rawInputs=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,rawInputs:n}=this,r=e.getNodeProperties(t),s=e.getClosestSubBuild(t.subBuilds)||"",a=s||"default";if(r[a])return r[a];const o=e.subBuildFn;e.subBuildFn=s;let l=null;if(t.layout){let u=_w.get(e.constructor);u===void 0&&(u=new WeakMap,_w.set(e.constructor,u));let c=u.get(t);c===void 0&&(c=$e(e.buildFunctionNode(t)),u.set(t,c)),e.addInclude(c);const p=n?xee(n):null;l=$e(c.call(p))}else{const u=new Proxy(e,{get:(b,w,E)=>{let M;return Symbol.iterator===w?M=function*(){yield void 0}:M=Reflect.get(b,w,E),M}}),c=n?bee(n):null,p=Array.isArray(n)?n.length>0:n!==null,y=t.jsFunc,_=p||y.length>1?y(c,u):y(u);l=$e(_)}return e.subBuildFn=o,t.once&&(r[a]=l),l}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const t=e.getNodeProperties(this),n=e.getSubBuildOutput(this);return t[n]=t[n]||this.setupOutput(e),t[n].subBuild=e.getClosestSubBuild(this),t[n]}build(e,t=null){let n=null;const r=e.getBuildStage(),s=e.getNodeProperties(this),a=e.getSubBuildOutput(this),o=this.getOutputNode(e);if(r==="setup"){const l=e.getSubBuildProperty("initialized",this);if(s[l]!==!0&&(s[l]=!0,s[a]=this.getOutputNode(e),s[a].build(e),this.shaderNode.subBuilds))for(const u of e.chaining){const c=e.getDataFromNode(u,"any");c.subBuilds=c.subBuilds||new Set;for(const p of this.shaderNode.subBuilds)c.subBuilds.add(p)}n=s[a]}else r==="analyze"?o.build(e,t):r==="generate"&&(n=o.build(e,t)||"");return n}}function xee(i){let e;return qp(i),i[0]&&(i[0].isNode||Object.getPrototypeOf(i[0])!==Object.prototype)?e=[...i]:e=i[0],e}function bee(i){let e=0;return qp(i),new Proxy(i,{get:(t,n,r)=>{let s;if(n==="length")return s=i.length,s;if(Symbol.iterator===n)s=function*(){for(const a of i)yield $e(a)};else{if(i.length>0)if(Object.getPrototypeOf(i[0])===Object.prototype){const a=i[0];a[n]===void 0?s=a[e++]:s=Reflect.get(a,n,r)}else i[0]instanceof jt&&(i[n]===void 0?s=i[e++]:s=Reflect.get(i,n,r));else s=Reflect.get(t,n,r);s=$e(s)}return s}})}class See extends jt{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return $e(new _ee(this,e))}setup(){return this.call()}}const Tee=[!1,!0],Mee=[0,1,2,3],Eee=[-1,-2],bD=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],mb=new Map;for(const i of Tee)mb.set(i,new u0(i));const gb=new Map;for(const i of Mee)gb.set(i,new u0(i,"uint"));const yb=new Map([...gb].map(i=>new u0(i.value,"int")));for(const i of Eee)yb.set(i,new u0(i,"int"));const zp=new Map([...yb].map(i=>new u0(i.value)));for(const i of bD)zp.set(i,new u0(i));for(const i of bD)zp.set(-i,new u0(-i));const Gp={bool:mb,uint:gb,ints:yb,float:zp},xw=new Map([...mb,...zp]),l_=(i,e)=>xw.has(i)?xw.get(i):i.isNode===!0?i:new u0(i,e),Zr=function(i,e=null){return(...t)=>{for(const r of t)if(r===void 0)return console.error(`THREE.TSL: Invalid parameter for the type "${i}".`),$e(new u0(0,i));if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(r=>{const s=typeof r;return s!=="object"&&s!=="function"}))&&(t=[Ab(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Zh(e.get(t[0]));if(t.length===1){const r=l_(t[0],i);return r.nodeType===i?Zh(r):Zh(new vD(r,i))}const n=t.map(r=>l_(r));return Zh(new cee(n,i))}},V6=i=>typeof i=="object"&&i!==null?i.value:i,SD=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function h5(i,e){return new See(i,e)}const $e=(i,e=null)=>mee(i,e),Zh=(i,e=null)=>$e(i,e).toVarIntent(),qp=(i,e=null)=>new gee(i,e),xc=(i,e=null)=>new yee(i,e),Mn=(i,e=null,t=null,n=null)=>new xD(i,e,t,n),Nt=(i,...e)=>new vee(i,...e),Et=(i,e=null,t=null,n={})=>new xD(i,e,t,{intent:!0,...n});let wee=0;class Ree extends jt{constructor(e,t=null){super();let n=null;t!==null&&(typeof t=="object"?n=t.return:(typeof t=="string"?n=t:console.error("THREE.TSL: Invalid layout type."),t=null)),this.shaderNode=new h5(e,n),t!==null&&this.setLayout(t),this.isFn=!0}setLayout(e){const t=this.shaderNode.nodeType;if(typeof e.inputs!="object"){const n={name:"fn"+wee++,type:t,inputs:[]};for(const r in e)r!=="return"&&n.inputs.push({name:r,type:e[r]});e=n}return this.shaderNode.setLayout(e),this}getNodeType(e){return this.shaderNode.getNodeType(e)||"float"}call(...e){const t=this.shaderNode.call(e);return this.shaderNode.nodeType==="void"&&t.toStack(),t.toVarIntent()}once(e=null){return this.shaderNode.once=!0,this.shaderNode.subBuilds=e,this}generate(e){const t=this.getNodeType(e);return console.error('THREE.TSL: "Fn()" was declared but not invoked. Try calling it like "Fn()( ...params )".'),e.generateConst(t)}}function Te(i,e=null){const t=new Ree(i,e);return new Proxy(()=>{},{apply(n,r,s){return t.call(...s)},get(n,r,s){return Reflect.get(t,r,s)},set(n,r,s,a){return Reflect.set(t,r,s,a)}})}const z6=i=>{Gu=i},kp=()=>Gu,_n=(...i)=>Gu.If(...i),Cee=(...i)=>Gu.Switch(...i);function Hp(i){return Gu&&Gu.add(i),i}je("toStack",Hp);const TD=new Zr("color"),ue=new Zr("float",Gp.float),me=new Zr("int",Gp.ints),zt=new Zr("uint",Gp.uint),t0=new Zr("bool",Gp.bool),Ze=new Zr("vec2"),is=new Zr("ivec2"),MD=new Zr("uvec2"),ED=new Zr("bvec2"),be=new Zr("vec3"),wD=new Zr("ivec3"),r8=new Zr("uvec3"),vb=new Zr("bvec3"),un=new Zr("vec4"),RD=new Zr("ivec4"),CD=new Zr("uvec4"),ND=new Zr("bvec4"),Wp=new Zr("mat2"),ca=new Zr("mat3"),bc=new Zr("mat4"),Nee=(i="")=>$e(new u0(i,"string")),Pee=i=>$e(new u0(i,"ArrayBuffer"));je("toColor",TD);je("toFloat",ue);je("toInt",me);je("toUint",zt);je("toBool",t0);je("toVec2",Ze);je("toIVec2",is);je("toUVec2",MD);je("toBVec2",ED);je("toVec3",be);je("toIVec3",wD);je("toUVec3",r8);je("toBVec3",vb);je("toVec4",un);je("toIVec4",RD);je("toUVec4",CD);je("toBVec4",ND);je("toMat2",Wp);je("toMat3",ca);je("toMat4",bc);const PD=Mn(g3).setParameterLength(2),DD=(i,e)=>$e(new vD($e(i),e)),Dee=(i,e)=>$e(new _D($e(i),e));je("element",PD);je("convert",DD);const Bee=i=>(console.warn("THREE.TSL: append() has been renamed to Stack()."),Hp(i));je("append",i=>(console.warn("THREE.TSL: .append() has been renamed to .toStack()."),Hp(i)));class Di extends jt{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0,this.global=!0}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const C1=(i,e)=>$e(new Di(i,e)),G6=(i,e)=>$e(new Di(i,e,!0)),Mi=Nt(Di,"vec4","DiffuseColor"),u_=Nt(Di,"vec3","EmissiveColor"),xl=Nt(Di,"float","Roughness"),q6=Nt(Di,"float","Metalness"),DA=Nt(Di,"float","Clearcoat"),k6=Nt(Di,"float","ClearcoatRoughness"),Ac=Nt(Di,"vec3","Sheen"),jp=Nt(Di,"float","SheenRoughness"),Xp=Nt(Di,"float","Iridescence"),_b=Nt(Di,"float","IridescenceIOR"),xb=Nt(Di,"float","IridescenceThickness"),BA=Nt(Di,"float","AlphaT"),Mu=Nt(Di,"float","Anisotropy"),u6=Nt(Di,"vec3","AnisotropyT"),Sc=Nt(Di,"vec3","AnisotropyB"),Oa=Nt(Di,"color","SpecularColor"),H6=Nt(Di,"float","SpecularF90"),LA=Nt(Di,"float","Shininess"),y5=Nt(Di,"vec4","Output"),Rd=Nt(Di,"float","dashSize"),c_=Nt(Di,"float","gapSize"),Lee=Nt(Di,"float","pointWidth"),c6=Nt(Di,"float","IOR"),IA=Nt(Di,"float","Transmission"),bb=Nt(Di,"float","Thickness"),Sb=Nt(Di,"float","AttenuationDistance"),Tb=Nt(Di,"color","AttenuationColor"),Mb=Nt(Di,"float","Dispersion");class BD extends jt{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const LD=i=>new BD(i),Yp=(i,e=0)=>new BD(i,!0,e),ID=Yp("frame"),rn=Yp("render"),Eb=LD("object");class v7 extends pb{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=Eb}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){return e=e.bind(this),super.onUpdate(n=>{const r=e(n,this);r!==void 0&&(this.value=r)},t)}getInputType(e){let t=super.getInputType(e);return t==="bool"&&(t="uint"),t}generate(e,t){const n=this.getNodeType(e),r=this.getUniformHash(e);let s=e.getNodeFromHash(r);s===void 0&&(e.setHashNode(this,r),s=this);const a=s.getInputType(e),o=e.getUniformFromNode(s,a,e.shaderStage,this.name||e.context.nodeName),l=e.getPropertyName(o);e.context.nodeName!==void 0&&delete e.context.nodeName;let u=l;if(n==="bool"){const c=e.getDataFromNode(this);let p=c.propertyName;if(p===void 0){const y=e.getVarFromNode(this,null,"bool");p=e.getPropertyName(y),c.propertyName=p,u=e.format(l,a,n),e.addLineFlowCode(`${p} = ${u}`,this)}u=p}return e.format(u,n,t)}}const on=(i,e)=>{const t=SD(e||i);return t===i&&(i=Ab(t)),i=i&&i.isNode===!0?i.node&&i.node.value||i.value:i,$e(new v7(i,t))};class bw extends zr{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const UD=(...i)=>{let e;if(i.length===1){const t=i[0];e=new bw(null,t.length,t)}else{const t=i[0],n=i[1];e=new bw(t,n)}return $e(e)};je("toArray",(i,e)=>UD(Array(e).fill(i)));class Iee extends zr{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return m3.join("").slice(0,n)!==t.components}return!1}setup(e){const{targetNode:t,sourceNode:n}=this,r=t.getScope(),s=e.getNodeProperties(r);s.assign=!0;const a=e.getNodeProperties(this);a.sourceNode=n,a.targetNode=t.context({assign:!0})}generate(e,t){const{targetNode:n,sourceNode:r}=e.getNodeProperties(this),s=this.needsSplitAssign(e),a=n.build(e),o=n.getNodeType(e),l=r.build(e,o),u=r.getNodeType(e),c=e.getDataFromNode(this);let p;if(c.initialized===!0)t!=="void"&&(p=a);else if(s){const y=e.getVarFromNode(this,null,o),_=e.getPropertyName(y);e.addLineFlowCode(`${_} = ${l}`,this);const b=n.node,E=b.node.context({assign:!0}).build(e);for(let M=0;M<b.components.length;M++){const P=b.components[M];e.addLineFlowCode(`${E}.${P} = ${_}[ ${M} ]`,this)}t!=="void"&&(p=a)}else p=`${a} = ${l}`,(t==="void"||u==="void")&&(e.addLineFlowCode(p,this),t!=="void"&&(p=a));return c.initialized=!0,e.format(p,o,t)}}const OD=Mn(Iee).setParameterLength(2);je("assign",OD);class Uee extends zr{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}getMemberType(e,t){return this.functionNode.getMemberType(e,t)}generate(e){const t=[],n=this.functionNode,r=n.getInputs(e),s=this.parameters,a=(l,u)=>{const c=u.type,p=c==="pointer";let y;return p?y="&"+l.build(e):y=l.build(e,c),y};if(Array.isArray(s)){if(s.length>r.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=r.length;else if(s.length<r.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<r.length;)s.push(ue(0));for(let l=0;l<s.length;l++)t.push(a(s[l],r[l]))}else for(const l of r){const u=s[l.name];u!==void 0?t.push(a(u,l)):(console.error(`THREE.TSL: Input '${l.name}' not found in 'Fn()'.`),t.push(a(ue(0),l)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const FD=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?xc(e):qp(e[0]),$e(new Uee($e(i),e)));je("call",FD);const Oee={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class _r extends zr{static get type(){return"OperatorNode"}constructor(e,t,n,...r){if(super(),r.length>0){let s=new _r(e,t,n);for(let a=0;a<r.length-1;a++)s=new _r(e,s,r[a]);t=s,n=r[r.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(Oee[this.op],t)}getNodeType(e,t=null){const n=this.op,r=this.aNode,s=this.bNode,a=r.getNodeType(e),o=s?s.getNodeType(e):null;if(a==="void"||o==="void")return t||"void";if(n==="%")return a;if(n==="~"||n==="&"||n==="|"||n==="^"||n===">>"||n==="<<")return e.getIntegerType(a);if(n==="!"||n==="&&"||n==="||"||n==="^^")return"bool";if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">="){const l=Math.max(e.getTypeLength(a),e.getTypeLength(o));return l>1?`bvec${l}`:"bool"}else{if(e.isMatrix(a)){if(o==="float")return a;if(e.isVector(o))return e.getVectorFromMatrix(a);if(e.isMatrix(o))return a}else if(e.isMatrix(o)){if(a==="float")return o;if(e.isVector(a))return e.getVectorFromMatrix(o)}return e.getTypeLength(o)>e.getTypeLength(a)?o:a}}generate(e,t){const n=this.op,{aNode:r,bNode:s}=this,a=this.getNodeType(e,t);let o=null,l=null;a!=="void"?(o=r.getNodeType(e),l=s?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(o)?l=o:e.isVector(l)?o=l:o!==l&&(o=l="float"):n===">>"||n==="<<"?(o=a,l=e.changeComponentType(l,"uint")):n==="%"?(o=a,l=e.isInteger(o)&&e.isInteger(l)?l:o):e.isMatrix(o)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(o):e.isMatrix(l)||(o=l=a):e.isMatrix(l)?o==="float"?o="float":e.isVector(o)?o=e.getVectorFromMatrix(l):o=l=a:o=l=a):o=l=a;const u=r.build(e,o),c=s?s.build(e,l):null,p=e.getFunctionOperator(n);if(t!=="void"){const y=e.renderer.coordinateSystem===Vs;if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">=")return y?e.isVector(o)?e.format(`${this.getOperatorMethod(e,t)}( ${u}, ${c} )`,a,t):e.format(`( ${u} ${n} ${c} )`,a,t):e.format(`( ${u} ${n} ${c} )`,a,t);if(n==="%")return e.isInteger(l)?e.format(`( ${u} % ${c} )`,a,t):e.format(`${this.getOperatorMethod(e,a)}( ${u}, ${c} )`,a,t);if(n==="!"||n==="~")return e.format(`(${n}${u})`,o,t);if(p)return e.format(`${p}( ${u}, ${c} )`,a,t);if(e.isMatrix(o)&&l==="float")return e.format(`( ${c} ${n} ${u} )`,a,t);if(o==="float"&&e.isMatrix(l))return e.format(`${u} ${n} ${c}`,a,t);{let _=`( ${u} ${n} ${c} )`;return!y&&a==="bool"&&e.isVector(o)&&e.isVector(l)&&(_=`all${_}`),e.format(_,a,t)}}else if(o!=="void")return p?e.format(`${p}( ${u}, ${c} )`,a,t):e.isMatrix(o)&&l==="float"?e.format(`${c} ${n} ${u}`,a,t):e.format(`${u} ${n} ${c}`,a,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const kr=Et(_r,"+").setParameterLength(2,1/0).setName("add"),oi=Et(_r,"-").setParameterLength(2,1/0).setName("sub"),Pn=Et(_r,"*").setParameterLength(2,1/0).setName("mul"),Co=Et(_r,"/").setParameterLength(2,1/0).setName("div"),_7=Et(_r,"%").setParameterLength(2).setName("mod"),wb=Et(_r,"==").setParameterLength(2).setName("equal"),VD=Et(_r,"!=").setParameterLength(2).setName("notEqual"),zD=Et(_r,"<").setParameterLength(2).setName("lessThan"),Rb=Et(_r,">").setParameterLength(2).setName("greaterThan"),GD=Et(_r,"<=").setParameterLength(2).setName("lessThanEqual"),qD=Et(_r,">=").setParameterLength(2).setName("greaterThanEqual"),kD=Et(_r,"&&").setParameterLength(2,1/0).setName("and"),HD=Et(_r,"||").setParameterLength(2,1/0).setName("or"),WD=Et(_r,"!").setParameterLength(1).setName("not"),jD=Et(_r,"^^").setParameterLength(2).setName("xor"),XD=Et(_r,"&").setParameterLength(2).setName("bitAnd"),YD=Et(_r,"~").setParameterLength(2).setName("bitNot"),QD=Et(_r,"|").setParameterLength(2).setName("bitOr"),$D=Et(_r,"^").setParameterLength(2).setName("bitXor"),KD=Et(_r,"<<").setParameterLength(2).setName("shiftLeft"),ZD=Et(_r,">>").setParameterLength(2).setName("shiftRight"),JD=Te(([i])=>(i.addAssign(1),i)),eB=Te(([i])=>(i.subAssign(1),i)),tB=Te(([i])=>{const e=me(i).toConst();return i.addAssign(1),e}),nB=Te(([i])=>{const e=me(i).toConst();return i.subAssign(1),e});je("add",kr);je("sub",oi);je("mul",Pn);je("div",Co);je("mod",_7);je("equal",wb);je("notEqual",VD);je("lessThan",zD);je("greaterThan",Rb);je("lessThanEqual",GD);je("greaterThanEqual",qD);je("and",kD);je("or",HD);je("not",WD);je("xor",jD);je("bitAnd",XD);je("bitNot",YD);je("bitOr",QD);je("bitXor",$D);je("shiftLeft",KD);je("shiftRight",ZD);je("incrementBefore",JD);je("decrementBefore",eB);je("increment",tB);je("decrement",nB);const iB=(i,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),_7(me(i),me(e)));je("modInt",iB);class Be extends zr{static get type(){return"MathNode"}constructor(e,t,n=null,r=null){if(super(),(e===Be.MAX||e===Be.MIN)&&arguments.length>3){let s=new Be(e,t,n);for(let a=2;a<arguments.length-1;a++)s=new Be(e,s,arguments[a]);t=s,n=arguments[arguments.length-1],r=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=r,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(n)?0:e.getTypeLength(n),o=e.isMatrix(r)?0:e.getTypeLength(r);return s>a&&s>o?t:a>o?n:o>s?r:t}getNodeType(e){const t=this.method;return t===Be.LENGTH||t===Be.DISTANCE||t===Be.DOT?"float":t===Be.CROSS?"vec3":t===Be.ALL||t===Be.ANY?"bool":t===Be.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:t,bNode:n,method:r}=this;let s=null;if(r===Be.ONE_MINUS)s=oi(1,t);else if(r===Be.RECIPROCAL)s=Co(1,t);else if(r===Be.DIFFERENCE)s=tr(oi(t,n));else if(r===Be.TRANSFORM_DIRECTION){let a=t,o=n;e.isMatrix(a.getNodeType(e))?o=un(be(o),0):a=un(be(a),0);const l=Pn(a,o).xyz;s=G1(l)}return s!==null?s:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let r=this.method;const s=this.getNodeType(e),a=this.getInputType(e),o=this.aNode,l=this.bNode,u=this.cNode,c=e.renderer.coordinateSystem;if(r===Be.NEGATE)return e.format("( - "+o.build(e,a)+" )",s,t);{const p=[];return r===Be.CROSS?p.push(o.build(e,s),l.build(e,s)):c===Vs&&r===Be.STEP?p.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":a),l.build(e,a)):c===Vs&&(r===Be.MIN||r===Be.MAX)?p.push(o.build(e,a),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":a)):r===Be.REFRACT?p.push(o.build(e,a),l.build(e,a),u.build(e,"float")):r===Be.MIX?p.push(o.build(e,a),l.build(e,a),u.build(e,e.getTypeLength(u.getNodeType(e))===1?"float":a)):(c===Jo&&r===Be.ATAN&&l!==null&&(r="atan2"),e.shaderStage!=="fragment"&&(r===Be.DFDX||r===Be.DFDY)&&(console.warn(`THREE.TSL: '${r}' is not supported in the ${e.shaderStage} stage.`),r="/*"+r+"*/"),p.push(o.build(e,a)),l!==null&&p.push(l.build(e,a)),u!==null&&p.push(u.build(e,a))),e.format(`${e.getMethod(r,s)}( ${p.join(", ")} )`,s,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Be.ALL="all";Be.ANY="any";Be.RADIANS="radians";Be.DEGREES="degrees";Be.EXP="exp";Be.EXP2="exp2";Be.LOG="log";Be.LOG2="log2";Be.SQRT="sqrt";Be.INVERSE_SQRT="inversesqrt";Be.FLOOR="floor";Be.CEIL="ceil";Be.NORMALIZE="normalize";Be.FRACT="fract";Be.SIN="sin";Be.COS="cos";Be.TAN="tan";Be.ASIN="asin";Be.ACOS="acos";Be.ATAN="atan";Be.ABS="abs";Be.SIGN="sign";Be.LENGTH="length";Be.NEGATE="negate";Be.ONE_MINUS="oneMinus";Be.DFDX="dFdx";Be.DFDY="dFdy";Be.ROUND="round";Be.RECIPROCAL="reciprocal";Be.TRUNC="trunc";Be.FWIDTH="fwidth";Be.TRANSPOSE="transpose";Be.DETERMINANT="determinant";Be.INVERSE="inverse";Be.EQUALS="equals";Be.MIN="min";Be.MAX="max";Be.STEP="step";Be.REFLECT="reflect";Be.DISTANCE="distance";Be.DIFFERENCE="difference";Be.DOT="dot";Be.CROSS="cross";Be.POW="pow";Be.TRANSFORM_DIRECTION="transformDirection";Be.MIX="mix";Be.CLAMP="clamp";Be.REFRACT="refract";Be.SMOOTHSTEP="smoothstep";Be.FACEFORWARD="faceforward";const rB=ue(1e-6),Fee=ue(1e6),UA=ue(Math.PI),Vee=ue(Math.PI*2),sB=Et(Be,Be.ALL).setParameterLength(1),aB=Et(Be,Be.ANY).setParameterLength(1),oB=Et(Be,Be.RADIANS).setParameterLength(1),lB=Et(Be,Be.DEGREES).setParameterLength(1),Cb=Et(Be,Be.EXP).setParameterLength(1),W5=Et(Be,Be.EXP2).setParameterLength(1),Qp=Et(Be,Be.LOG).setParameterLength(1),Rl=Et(Be,Be.LOG2).setParameterLength(1),kl=Et(Be,Be.SQRT).setParameterLength(1),Nb=Et(Be,Be.INVERSE_SQRT).setParameterLength(1),Cl=Et(Be,Be.FLOOR).setParameterLength(1),$p=Et(Be,Be.CEIL).setParameterLength(1),G1=Et(Be,Be.NORMALIZE).setParameterLength(1),H1=Et(Be,Be.FRACT).setParameterLength(1),To=Et(Be,Be.SIN).setParameterLength(1),g1=Et(Be,Be.COS).setParameterLength(1),uB=Et(Be,Be.TAN).setParameterLength(1),cB=Et(Be,Be.ASIN).setParameterLength(1),Pb=Et(Be,Be.ACOS).setParameterLength(1),Kp=Et(Be,Be.ATAN).setParameterLength(1,2),tr=Et(Be,Be.ABS).setParameterLength(1),W6=Et(Be,Be.SIGN).setParameterLength(1),Nl=Et(Be,Be.LENGTH).setParameterLength(1),hB=Et(Be,Be.NEGATE).setParameterLength(1),fB=Et(Be,Be.ONE_MINUS).setParameterLength(1),Db=Et(Be,Be.DFDX).setParameterLength(1),Bb=Et(Be,Be.DFDY).setParameterLength(1),dB=Et(Be,Be.ROUND).setParameterLength(1),AB=Et(Be,Be.RECIPROCAL).setParameterLength(1),Lb=Et(Be,Be.TRUNC).setParameterLength(1),pB=Et(Be,Be.FWIDTH).setParameterLength(1),mB=Et(Be,Be.TRANSPOSE).setParameterLength(1),gB=Et(Be,Be.DETERMINANT).setParameterLength(1),yB=Et(Be,Be.INVERSE).setParameterLength(1),vB=(i,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),wb(i,e)),Ja=Et(Be,Be.MIN).setParameterLength(2,1/0),Mr=Et(Be,Be.MAX).setParameterLength(2,1/0),Zp=Et(Be,Be.STEP).setParameterLength(2),_B=Et(Be,Be.REFLECT).setParameterLength(2),xB=Et(Be,Be.DISTANCE).setParameterLength(2),bB=Et(Be,Be.DIFFERENCE).setParameterLength(2),Qu=Et(Be,Be.DOT).setParameterLength(2),Jp=Et(Be,Be.CROSS).setParameterLength(2),Yo=Et(Be,Be.POW).setParameterLength(2),Ib=i=>Pn(i,i),SB=i=>Pn(i,i,i),TB=i=>Pn(i,i,i,i),MB=Et(Be,Be.TRANSFORM_DIRECTION).setParameterLength(2),EB=i=>Pn(W6(i),Yo(tr(i),1/3)),Ub=i=>Qu(i,i),xi=Et(Be,Be.MIX).setParameterLength(3),n0=(i,e=0,t=1)=>$e(new Be(Be.CLAMP,$e(i),$e(e),$e(t))),Ob=i=>n0(i),Fb=Et(Be,Be.REFRACT).setParameterLength(3),Ol=Et(Be,Be.SMOOTHSTEP).setParameterLength(3),Vb=Et(Be,Be.FACEFORWARD).setParameterLength(3),wB=Te(([i])=>{const n=43758.5453,r=Qu(i.xy,Ze(12.9898,78.233)),s=_7(r,UA);return H1(To(s).mul(n))}),RB=(i,e,t)=>xi(e,t,i),CB=(i,e,t)=>Ol(e,t,i),NB=(i,e)=>Zp(e,i),PB=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),Kp(i,e)),zee=Vb,Gee=Nb;je("all",sB);je("any",aB);je("equals",vB);je("radians",oB);je("degrees",lB);je("exp",Cb);je("exp2",W5);je("log",Qp);je("log2",Rl);je("sqrt",kl);je("inverseSqrt",Nb);je("floor",Cl);je("ceil",$p);je("normalize",G1);je("fract",H1);je("sin",To);je("cos",g1);je("tan",uB);je("asin",cB);je("acos",Pb);je("atan",Kp);je("abs",tr);je("sign",W6);je("length",Nl);je("lengthSq",Ub);je("negate",hB);je("oneMinus",fB);je("dFdx",Db);je("dFdy",Bb);je("round",dB);je("reciprocal",AB);je("trunc",Lb);je("fwidth",pB);je("atan2",PB);je("min",Ja);je("max",Mr);je("step",NB);je("reflect",_B);je("distance",xB);je("dot",Qu);je("cross",Jp);je("pow",Yo);je("pow2",Ib);je("pow3",SB);je("pow4",TB);je("transformDirection",MB);je("mix",RB);je("clamp",n0);je("refract",Fb);je("smoothstep",CB);je("faceForward",Vb);je("difference",bB);je("saturate",Ob);je("cbrt",EB);je("transpose",mB);je("determinant",gB);je("inverse",yB);je("rand",wB);class qee extends jt{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return e.flowBuildStage(this,"setup"),this.getNodeType(e);const r=t.getNodeType(e);if(n!==null){const s=n.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(r))return s}return r}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,r!==null&&(e.getDataFromNode(r).parentNodeBlock=s);const a=e.context.uniformFlow,o=e.getNodeProperties(this);o.condNode=t,o.ifNode=a?n:n.context({nodeBlock:n}),o.elseNode=r?a?r:r.context({nodeBlock:r}):null}generate(e,t){const n=this.getNodeType(e),r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{condNode:s,ifNode:a,elseNode:o}=e.getNodeProperties(this),l=e.currentFunctionNode,u=t!=="void",c=u?C1(n).build(e):"";r.nodeProperty=c;const p=s.build(e,"bool");if(e.context.uniformFlow&&o!==null){const b=a.build(e,n),w=o.build(e,n),E=e.getTernary(p,b,w);return e.format(E,n,t)}e.addFlowCode(`
${e.tab}if ( ${p} ) {

`).addFlowTab();let _=a.build(e,n);if(_&&(u?_=c+" = "+_+";":(_="return "+_+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),_="// "+_))),e.removeFlowTab().addFlowCode(e.tab+"	"+_+`

`+e.tab+"}"),o!==null){e.addFlowCode(` else {

`).addFlowTab();let b=o.build(e,n);b&&(u?b=c+" = "+b+";":(b="return "+b+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),b="// "+b))),e.removeFlowTab().addFlowCode(e.tab+"	"+b+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,n,t)}}const xs=Mn(qee).setParameterLength(2,3);je("select",xs);class DB extends jt{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}getMemberType(e,t){return this.node.getMemberType(e,t)}analyze(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e,t);return e.setContext(n),r}}const x7=Mn(DB).setParameterLength(1,2),BB=i=>x7(i,{uniformFlow:!0}),zb=(i,e)=>x7(i,{nodeName:e});function LB(i,e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),zb(i,e)}je("context",x7);je("label",LB);je("uniformFlow",BB);je("setName",zb);class Cd extends jt{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}getIntent(){return this.intent}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}build(...e){return this.intent===!0&&e[0].getNodeProperties(this).assign!==!0?this.node.build(...e):super.build(...e)}generate(e){const{node:t,name:n,readOnly:r}=this,{renderer:s}=e,a=s.backend.isWebGPUBackend===!0;let o=!1,l=!1;r&&(o=e.isDeterministic(t),l=a?r:o);const u=e.getVectorType(this.getNodeType(e)),c=t.build(e,u),p=e.getVarFromNode(this,n,u,void 0,l),y=e.getPropertyName(p);let _=y;if(l)if(a)_=o?`const ${y}`:`let ${y}`;else{const b=t.getArrayCount(e);_=`const ${e.getVar(p.type,y,b)}`}return e.addLineFlowCode(`${_} = ${c}`,this),y}}const Gb=Mn(Cd),IB=(i,e=null)=>Gb(i,e).toStack(),UB=(i,e=null)=>Gb(i,e,!0).toStack(),OB=i=>kp()===null?i:Gb(i).setIntent(!0).toStack();je("toVar",IB);je("toConst",UB);je("toVarIntent",OB);class kee extends jt{static get type(){return"SubBuild"}constructor(e,t,n=null){super(n),this.node=e,this.name=t,this.isSubBuildNode=!0}getNodeType(e){if(this.nodeType!==null)return this.nodeType;e.addSubBuild(this.name);const t=this.node.getNodeType(e);return e.removeSubBuild(),t}build(e,...t){e.addSubBuild(this.name);const n=this.node.build(e,...t);return e.removeSubBuild(),n}}const v5=(i,e,t=null)=>$e(new kee($e(i),e,t));class Hee extends jt{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const r=this.name,s=this.getNodeType(e),a=this.interpolationType,o=this.interpolationSampling;t.varying=n=e.getVaryingFromNode(this,r,s,a,o),t.node=v5(this.node,"VERTEX")}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(Kh.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(Kh.VERTEX,this.node)}generate(e){const t=e.getSubBuildProperty("property",e.currentStack),n=e.getNodeProperties(this),r=this.setupVarying(e);if(n[t]===void 0){const s=this.getNodeType(e),a=e.getPropertyName(r,Kh.VERTEX);e.flowNodeFromShaderStage(Kh.VERTEX,n.node,s,a),n[t]=a}return e.getPropertyName(r)}}const Hl=Mn(Hee).setParameterLength(1,2),FB=i=>Hl(i);je("toVarying",Hl);je("toVertexStage",FB);je("varying",(...i)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),Hl(...i)));je("vertexStage",(...i)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),Hl(...i)));const VB=Te(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return xi(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),zB=Te(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return xi(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),qb="WorkingColorSpace",Wee="OutputColorSpace";class kb extends zr{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===qb?gn.workingColorSpace:t===Wee?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),r=this.resolveColorSpace(e,this.target);let s=t;return gn.enabled===!1||n===r||!n||!r||(gn.getTransfer(n)===Ht&&(s=un(VB(s.rgb),s.a)),gn.getPrimaries(n)!==gn.getPrimaries(r)&&(s=un(ca(gn._getMatrix(new Vn,n,r)).mul(s.rgb),s.a)),gn.getTransfer(r)===Ht&&(s=un(zB(s.rgb),s.a))),s}}const GB=(i,e)=>$e(new kb($e(i),qb,e)),em=(i,e)=>$e(new kb($e(i),e,qb)),jee=(i,e,t)=>$e(new kb($e(i),e,t));je("workingToColorSpace",GB);je("colorSpaceToWorking",em);let Xee=class extends g3{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}};class qB extends jt{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=kn.OBJECT}setGroup(e){return this.group=e,this}element(e){return $e(new Xee(this,$e(e)))}setNodeType(e){const t=on(null,e);this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Yee=(i,e,t)=>$e(new qB(i,e,t));class Qee extends qB{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(rn)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const kB=(i,e,t=null)=>$e(new Qee(i,e,t));class $ee extends zr{static get type(){return"ToneMappingNode"}constructor(e,t=WB,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return CA(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===oa)return t;let r=null;const s=e.renderer.library.getToneMappingFunction(n);return s!==null?r=un(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}const HB=(i,e,t)=>$e(new $ee(i,$e(e),$e(t))),WB=kB("toneMappingExposure","float");je("toneMapping",(i,e,t)=>HB(e,t,i));class Kee extends pb{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=r,this.usage=L5,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),s=this.bufferStride||r,a=this.bufferOffset,o=n.isInterleavedBuffer===!0?n:new t8(n,s),l=new Ca(o,r,a);o.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=r,s=r):s=Hl(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const b7=(i,e=null,t=0,n=0)=>$e(new Kee(i,e,t,n)),jB=(i,e=null,t=0,n=0)=>b7(i,e,t,n).setUsage(uc),OA=(i,e=null,t=0,n=0)=>b7(i,e,t,n).setInstanced(!0),h_=(i,e=null,t=0,n=0)=>jB(i,e,t,n).setInstanced(!0);je("toAttribute",i=>b7(i.value));class Zee extends jt{static get type(){return"ComputeNode"}constructor(e,t){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=t,this.count=null,this.version=1,this.name="",this.updateBeforeType=kn.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.build(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const r=this.computeNode.build(e,"void");r!==""&&e.addLineFlowCode(r,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,t)}}}const Hb=(i,e=[64])=>{(e.length===0||e.length>3)&&console.error("THREE.TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let t=0;t<e.length;t++){const n=e[t];(typeof n!="number"||n<=0||!Number.isInteger(n))&&console.error(`THREE.TSL: compute() workgroupSize element at index [ ${t} ] must be a positive integer`)}for(;e.length<3;)e.push(1);return $e(new Zee($e(i),e))},XB=(i,e,t)=>Hb(i,t).setCount(e);je("compute",XB);je("computeKernel",Hb);class Jee extends jt{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const r=this.node.getNodeType(e);return e.setCache(t),r}build(e,...t){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const s=this.node.build(e,...t);return e.setCache(n),s}}const h6=(i,e)=>$e(new Jee($e(i),e));je("cache",h6);class ete extends jt{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const YB=Mn(ete).setParameterLength(2);je("bypass",YB);class QB extends jt{static get type(){return"RemapNode"}constructor(e,t,n,r=ue(0),s=ue(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=r,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:r,outHighNode:s,doClamp:a}=this;let o=e.sub(t).div(n.sub(t));return a===!0&&(o=o.clamp()),o.mul(s.sub(r)).add(r)}}const $B=Mn(QB,null,null,{doClamp:!1}).setParameterLength(3,5),KB=Mn(QB).setParameterLength(3,5);je("remap",$B);je("remapClamp",KB);class Nd extends jt{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),r=this.snippet;if(n==="void")e.addLineFlowCode(r,this);else return e.format(r,n,t)}}const q1=Mn(Nd).setParameterLength(1,2),ZB=i=>(i?xs(i,q1("discard")):q1("discard")).toStack(),tte=()=>q1("return").toStack();je("discard",ZB);class nte extends zr{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||oa,r=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Ea;return n!==oa&&(t=t.toneMapping(n)),r!==Ea&&r!==gn.workingColorSpace&&(t=t.workingToColorSpace(r)),t}}const JB=(i,e=null,t=null)=>$e(new nte($e(i),e,t));je("renderOutput",JB);class ite extends zr{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e),r="--- TSL debug - "+e.shaderStage+" shader ---",s="-".repeat(r.length);let a="";return a+="// #"+r+`#
`,a+=e.flow.code.replace(/^\t/mg,"")+`
`,a+="/* ... */ "+n+` /* ... */
`,a+="// #"+s+`#
`,t!==null?t(e,a):console.log(a),n}}const eL=(i,e=null)=>$e(new ite($e(i),e)).toStack();je("debug",eL);function rte(i){console.warn("THREE.TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",i)}class tL extends jt{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),a=e.getTypeFromAttribute(s),o=e.getAttribute(t,a);return e.shaderStage==="vertex"?e.format(o.name,a,n):Hl(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const k1=(i,e=null)=>$e(new tL(i,e)),qi=(i=0)=>k1("uv"+(i>0?i:""),"vec2");class ste extends jt{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),r=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${r} )`,this.getNodeType(e),t)}}const Uu=Mn(ste).setParameterLength(1,2);class ate extends v7{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=kn.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:r,height:s}=n;this.value=Math.log2(Math.max(r,s))}}}const Wb=Mn(ate).setParameterLength(1),jb=new mr;class Fl extends v7{static get type(){return"TextureNode"}constructor(e=jb,t=null,n=null,r=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=r,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.offsetNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=kn.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===zi?"uvec4":this.value.type===rs?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return qi(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=on(this.value.matrix)),this._matrixUniform.mul(be(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?kn.OBJECT:kn.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(me(Uu(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this,e)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode,t.offsetNode=this.offsetNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateOffset(e,t){return t.build(e,"ivec2")}generateSnippet(e,t,n,r,s,a,o,l,u){const c=this.value;let p;return r?p=e.generateTextureLevel(c,t,n,r,a,u):s?p=e.generateTextureBias(c,t,n,s,a,u):l?p=e.generateTextureGrad(c,t,n,l,a,u):o?p=e.generateTextureCompare(c,t,n,o,a,u):this.sampler===!1?p=e.generateTextureLoad(c,t,n,a,u):p=e.generateTexture(c,t,n,a,u),p}generate(e,t){const n=this.value,r=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(t))return s+"_sampler";if(e.isReference(t))return s;{const a=e.getDataFromNode(this);let o=a.propertyName;if(o===void 0){const{uvNode:c,levelNode:p,biasNode:y,compareNode:_,depthNode:b,gradNode:w,offsetNode:E}=r,M=this.generateUV(e,c),P=p?p.build(e,"float"):null,D=y?y.build(e,"float"):null,B=b?b.build(e,"int"):null,U=_?_.build(e,"float"):null,O=w?[w[0].build(e,"vec2"),w[1].build(e,"vec2")]:null,z=E?this.generateOffset(e,E):null,q=e.getVarFromNode(this);o=e.getPropertyName(q);const F=this.generateSnippet(e,s,M,P,D,B,U,O,z);e.addLineFlowCode(`${o} = ${F}`,this),a.snippet=F,a.propertyName=o}let l=o;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(l=em(q1(l,u),n.colorSpace).setup(e).build(e,u)),e.format(l,u,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=$e(e),t.referenceNode=this.getBase(),$e(t)}load(e){return this.sample(e).setSampler(!1)}blur(e){const t=this.clone();t.biasNode=$e(e).mul(Wb(t)),t.referenceNode=this.getBase();const n=t.value;return t.generateMipmaps===!1&&(n&&n.generateMipmaps===!1||n.minFilter===Xi||n.magFilter===Xi)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),$e(t)}level(e){const t=this.clone();return t.levelNode=$e(e),t.referenceNode=this.getBase(),$e(t)}size(e){return Uu(this,e)}bias(e){const t=this.clone();return t.biasNode=$e(e),t.referenceNode=this.getBase(),$e(t)}getBase(){return this.referenceNode?this.referenceNode.getBase():this}compare(e){const t=this.clone();return t.compareNode=$e(e),t.referenceNode=this.getBase(),$e(t)}grad(e,t){const n=this.clone();return n.gradNode=[$e(e),$e(t)],n.referenceNode=this.getBase(),$e(n)}depth(e){const t=this.clone();return t.depthNode=$e(e),t.referenceNode=this.getBase(),$e(t)}offset(e){const t=this.clone();return t.offsetNode=$e(e),t.referenceNode=this.getBase(),$e(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}const ote=Mn(Fl).setParameterLength(1,4).setName("texture"),si=(i=jb,e=null,t=null,n=null)=>{let r;return i&&i.isTextureNode===!0?(r=$e(i.clone()),r.referenceNode=i.getBase(),e!==null&&(r.uvNode=$e(e)),t!==null&&(r.levelNode=$e(t)),n!==null&&(r.biasNode=$e(n))):r=ote(i,e,t,n),r},lte=(i=jb)=>si(i),Br=(...i)=>si(...i).setSampler(!1),ute=i=>(i.isNode===!0?i:si(i)).convert("sampler"),cte=i=>(i.isNode===!0?i:si(i)).convert("samplerComparison");class Xb extends v7{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const S7=(i,e,t)=>$e(new Xb(i,e,t));class hte extends g3{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),r=this.node.getPaddedType();return e.format(t,r,n)}}class fte extends Xb{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?Du(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=kn.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let r=0;r<e.length;r++){const s=r*4;t[s]=e[r]}else if(n==="color")for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.r,t[s+1]=a.g,t[s+2]=a.b||0}else if(n==="mat2")for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+3]=a.elements[3]}else if(n==="mat3")for(let r=0;r<e.length;r++){const s=r*16,a=e[r];t[s]=a.elements[0],t[s+1]=a.elements[1],t[s+2]=a.elements[2],t[s+4]=a.elements[3],t[s+5]=a.elements[4],t[s+6]=a.elements[5],t[s+8]=a.elements[6],t[s+9]=a.elements[7],t[s+10]=a.elements[8],t[s+15]=1}else if(n==="mat4")for(let r=0;r<e.length;r++){const s=r*16,a=e[r];for(let o=0;o<a.elements.length;o++)t[s+o]=a.elements[o]}else for(let r=0;r<e.length;r++){const s=r*4,a=e[r];t[s]=a.x,t[s+1]=a.y,t[s+2]=a.z||0,t[s+3]=a.w||0}}setup(e){const t=this.array.length,n=this.elementType;let r=Float32Array;const s=this.paddedType,a=e.getTypeLength(s);return n.charAt(0)==="i"&&(r=Int32Array),n.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*a),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return $e(new hte(this,$e(e)))}}const ra=(i,e)=>$e(new fte(i,e));class dte extends jt{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const W1=Mn(dte).setParameterLength(1);let Mh,Eh;class Ji extends jt{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this._output=null,this.isViewportNode=!0}getNodeType(){return this.scope===Ji.DPR?"float":this.scope===Ji.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=kn.NONE;return(this.scope===Ji.SIZE||this.scope===Ji.VIEWPORT||this.scope===Ji.DPR)&&(e=kn.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===Ji.VIEWPORT?t!==null?Eh.copy(t.viewport):(e.getViewport(Eh),Eh.multiplyScalar(e.getPixelRatio())):this.scope===Ji.DPR?this._output.value=e.getPixelRatio():t!==null?(Mh.width=t.width,Mh.height=t.height):e.getDrawingBufferSize(Mh)}setup(){const e=this.scope;let t=null;return e===Ji.SIZE?t=on(Mh||(Mh=new He)):e===Ji.VIEWPORT?t=on(Eh||(Eh=new an)):e===Ji.DPR?t=on(1):t=Ze(T7.div(i3)),this._output=t,t}generate(e){if(this.scope===Ji.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(i3).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}Ji.COORDINATE="coordinate";Ji.VIEWPORT="viewport";Ji.SIZE="size";Ji.UV="uv";Ji.DPR="dpr";const nL=Nt(Ji,Ji.DPR),N1=Nt(Ji,Ji.UV),i3=Nt(Ji,Ji.SIZE),T7=Nt(Ji,Ji.COORDINATE),Yb=Nt(Ji,Ji.VIEWPORT),Qb=Yb.zw,iL=T7.sub(Yb.xy),Ate=iL.div(Qb),pte=Te(()=>(console.warn('THREE.TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),i3),"vec2").once()(),$u=on(0,"uint").setName("u_cameraIndex").setGroup(Yp("cameraIndex")).toVarying("v_cameraIndex"),wu=on("float").setName("cameraNear").setGroup(rn).onRenderUpdate(({camera:i})=>i.near),Ru=on("float").setName("cameraFar").setGroup(rn).onRenderUpdate(({camera:i})=>i.far),s8=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrix);e=ra(t).setGroup(rn).setName("cameraProjectionMatrices").element(i.isMultiViewCamera?W1("gl_ViewID_OVR"):$u).toConst("cameraProjectionMatrix")}else e=on("mat4").setName("cameraProjectionMatrix").setGroup(rn).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),mte=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrixInverse);e=ra(t).setGroup(rn).setName("cameraProjectionMatricesInverse").element(i.isMultiViewCamera?W1("gl_ViewID_OVR"):$u).toConst("cameraProjectionMatrixInverse")}else e=on("mat4").setName("cameraProjectionMatrixInverse").setGroup(rn).onRenderUpdate(({camera:t})=>t.projectionMatrixInverse);return e}).once()(),c0=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.matrixWorldInverse);e=ra(t).setGroup(rn).setName("cameraViewMatrices").element(i.isMultiViewCamera?W1("gl_ViewID_OVR"):$u).toConst("cameraViewMatrix")}else e=on("mat4").setName("cameraViewMatrix").setGroup(rn).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),gte=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.matrixWorld);e=ra(t).setGroup(rn).setName("cameraWorldMatrices").element(i.isMultiViewCamera?W1("gl_ViewID_OVR"):$u).toConst("cameraWorldMatrix")}else e=on("mat4").setName("cameraWorldMatrix").setGroup(rn).onRenderUpdate(({camera:t})=>t.matrixWorld);return e}).once()(),yte=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.normalMatrix);e=ra(t).setGroup(rn).setName("cameraNormalMatrices").element(i.isMultiViewCamera?W1("gl_ViewID_OVR"):$u).toConst("cameraNormalMatrix")}else e=on("mat3").setName("cameraNormalMatrix").setGroup(rn).onRenderUpdate(({camera:t})=>t.normalMatrix);return e}).once()(),rL=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(let r=0,s=i.cameras.length;r<s;r++)t.push(new te);e=ra(t).setGroup(rn).setName("cameraPositions").onRenderUpdate(({camera:r},s)=>{const a=r.cameras,o=s.array;for(let l=0,u=a.length;l<u;l++)o[l].setFromMatrixPosition(a[l].matrixWorld)}).element(i.isMultiViewCamera?W1("gl_ViewID_OVR"):$u).toConst("cameraPosition")}else e=on(new te).setName("cameraPosition").setGroup(rn).onRenderUpdate(({camera:t},n)=>n.value.setFromMatrixPosition(t.matrixWorld));return e}).once()(),vte=Te(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.viewport);e=ra(t,"vec4").setGroup(rn).setName("cameraViewports").element($u).toConst("cameraViewport")}else e=un(0,0,i3.x,i3.y).toConst("cameraViewport");return e}).once()(),Sw=new Kr;class ci extends jt{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=kn.OBJECT,this.uniformNode=new v7(null)}getNodeType(){const e=this.scope;if(e===ci.WORLD_MATRIX)return"mat4";if(e===ci.POSITION||e===ci.VIEW_POSITION||e===ci.DIRECTION||e===ci.SCALE)return"vec3";if(e===ci.RADIUS)return"float"}update(e){const t=this.object3d,n=this.uniformNode,r=this.scope;if(r===ci.WORLD_MATRIX)n.value=t.matrixWorld;else if(r===ci.POSITION)n.value=n.value||new te,n.value.setFromMatrixPosition(t.matrixWorld);else if(r===ci.SCALE)n.value=n.value||new te,n.value.setFromMatrixScale(t.matrixWorld);else if(r===ci.DIRECTION)n.value=n.value||new te,t.getWorldDirection(n.value);else if(r===ci.VIEW_POSITION){const s=e.camera;n.value=n.value||new te,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}else if(r===ci.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),Sw.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),n.value=Sw.radius}}generate(e){const t=this.scope;return t===ci.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===ci.POSITION||t===ci.VIEW_POSITION||t===ci.DIRECTION||t===ci.SCALE?this.uniformNode.nodeType="vec3":t===ci.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ci.WORLD_MATRIX="worldMatrix";ci.POSITION="position";ci.SCALE="scale";ci.VIEW_POSITION="viewPosition";ci.DIRECTION="direction";ci.RADIUS="radius";const _te=Mn(ci,ci.DIRECTION).setParameterLength(1),xte=Mn(ci,ci.WORLD_MATRIX).setParameterLength(1),sL=Mn(ci,ci.POSITION).setParameterLength(1),bte=Mn(ci,ci.SCALE).setParameterLength(1),Ste=Mn(ci,ci.VIEW_POSITION).setParameterLength(1),Tte=Mn(ci,ci.RADIUS).setParameterLength(1);class i0 extends ci{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const Mte=Nt(i0,i0.DIRECTION),Qo=Nt(i0,i0.WORLD_MATRIX),Ete=Nt(i0,i0.POSITION),wte=Nt(i0,i0.SCALE),Rte=Nt(i0,i0.VIEW_POSITION),Cte=Nt(i0,i0.RADIUS),aL=on(new Vn).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),Nte=on(new $t).onObjectUpdate(({object:i},e)=>e.value.copy(i.matrixWorld).invert()),y3=Te(i=>i.renderer.overrideNodes.modelViewMatrix||oL).once()().toVar("modelViewMatrix"),oL=c0.mul(Qo),f_=Te(i=>(i.context.isHighPrecisionModelViewMatrix=!0,on("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),d_=Te(i=>{const e=i.context.isHighPrecisionModelViewMatrix;return on("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),M7=k1("position","vec3"),Or=M7.toVarying("positionLocal"),FA=M7.toVarying("positionPrevious"),Pl=Te(i=>Qo.mul(Or).xyz.toVarying(i.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),$b=Te(()=>Or.transformDirection(Qo).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),Fr=Te(i=>i.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),fr=Fr.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class Pte extends jt{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if(e.shaderStage!=="fragment")return"true";const{material:t}=e;return t.side===Fi?"false":e.getFrontFacing()}}const lL=Nt(Pte),Kb=ue(lL).mul(2).sub(1),a8=Te(([i],{material:e})=>{const t=e.side;return t===Fi?i=i.mul(-1):t===Ur&&(i=i.mul(Kb)),i}),tm=k1("normal","vec3"),eo=Te(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),be(0,1,0)):tm,"vec3").once()().toVar("normalLocal"),uL=Fr.dFdx().cross(Fr.dFdy()).normalize().toVar("normalFlat"),j5=Te(i=>{let e;return i.material.flatShading===!0?e=uL:e=Zb(eo).toVarying("v_normalViewGeometry").normalize(),e},"vec3").once()().toVar("normalViewGeometry"),cL=Te(i=>{let e=j5.transformDirection(c0);return i.material.flatShading!==!0&&(e=e.toVarying("v_normalWorldGeometry")),e.normalize().toVar("normalWorldGeometry")},"vec3").once()(),Ui=Te(({subBuildFn:i,material:e,context:t})=>{let n;return i==="NORMAL"||i==="VERTEX"?(n=j5,e.flatShading!==!0&&(n=a8(n))):n=t.setupNormal().context({getUV:null}),n},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),Ku=Ui.transformDirection(c0).toVar("normalWorld"),pc=Te(({subBuildFn:i,context:e})=>{let t;return i==="NORMAL"||i==="VERTEX"?t=Ui:t=e.setupClearcoatNormal().context({getUV:null}),t},"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),hL=Te(([i,e=Qo])=>{const t=ca(e),n=i.div(be(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),Zb=Te(([i],e)=>{const t=e.renderer.overrideNodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=aL.mul(i);return c0.transformDirection(n)}),Dte=Te(()=>(console.warn('THREE.TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),Ui)).once(["NORMAL","VERTEX"])(),Bte=Te(()=>(console.warn('THREE.TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),Ku)).once(["NORMAL","VERTEX"])(),Lte=Te(()=>(console.warn('THREE.TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),pc)).once(["NORMAL","VERTEX"])(),Tw=new bs,oy=new $t,fL=on(0).onReference(({material:i})=>i).onObjectUpdate(({material:i})=>i.refractionRatio),Pd=on(1).onReference(({material:i})=>i).onObjectUpdate(function({material:i,scene:e}){return i.envMap?i.envMapIntensity:e.environmentIntensity}),Jb=on(new $t).onReference(function(i){return i.material}).onObjectUpdate(function({material:i,scene:e}){const t=e.environment!==null&&i.envMap===null?e.environmentRotation:i.envMapRotation;return t?(Tw.copy(t),oy.makeRotationFromEuler(Tw)):oy.identity(),oy}),dL=fr.negate().reflect(Ui),AL=fr.negate().refract(Ui,fL),pL=dL.transformDirection(c0).toVar("reflectVector"),mL=AL.transformDirection(c0).toVar("reflectVector"),gL=new Wu;class Ite extends Fl{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,r=null){super(e,t,n,r),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===Eo?pL:e.mapping===Zo?mL:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),be(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===Jo||!n.isRenderTargetTexture)&&(t=be(t.x.negate(),t.yz)),Jb.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const eS=Mn(Ite).setParameterLength(1,4).setName("cubeTexture"),X5=(i=gL,e=null,t=null,n=null)=>{let r;return i&&i.isCubeTextureNode===!0?(r=$e(i.clone()),r.referenceNode=i,e!==null&&(r.uvNode=$e(e)),t!==null&&(r.levelNode=$e(t)),n!==null&&(r.biasNode=$e(n))):r=eS(i,e,t,n),r},Ute=(i=gL)=>eS(i);class Ote extends g3{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}}class nm extends jt{static get type(){return"ReferenceNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=kn.OBJECT}element(e){return $e(new Ote(this,$e(e)))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let t=null;this.count!==null?t=S7(null,e,this.count):Array.isArray(this.getValueFromReference())?t=ra(null,e):e==="texture"?t=si(null):e==="cubeTexture"?t=X5(null):t=on(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.setName(this.name),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const ji=(i,e,t)=>$e(new nm(i,e,t)),A_=(i,e,t,n)=>$e(new nm(i,e,n,t));class Fte extends nm{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const _1=(i,e,t=null)=>$e(new Fte(i,e,t)),yL=qi(),Vte=Fr.dFdx(),zte=Fr.dFdy(),vL=yL.dFdx(),_L=yL.dFdy(),xL=Ui,bL=zte.cross(xL),SL=xL.cross(Vte),p_=bL.mul(vL.x).add(SL.mul(_L.x)),m_=bL.mul(vL.y).add(SL.mul(_L.y)),Mw=p_.dot(p_).max(m_.dot(m_)),TL=Mw.equal(0).select(0,Mw.inverseSqrt()),Gte=p_.mul(TL).toVar("tangentViewFrame"),qte=m_.mul(TL).toVar("bitangentViewFrame"),im=Te(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),k1("tangent","vec4")))(),E7=im.xyz.toVar("tangentLocal"),rm=Te(({subBuildFn:i,geometry:e,material:t})=>{let n;return i==="VERTEX"||e.hasAttribute("tangent")?n=y3.mul(un(E7,0)).xyz.toVarying("v_tangentView").normalize():n=Gte,t.flatShading!==!0&&(n=a8(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),ML=rm.transformDirection(c0).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),sm=Te(([i,e],{subBuildFn:t,material:n})=>{let r=i.mul(im.w).xyz;return t==="NORMAL"&&n.flatShading!==!0&&(r=r.toVarying(e)),r}).once(["NORMAL"]),kte=sm(tm.cross(im),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),Hte=sm(eo.cross(E7),"v_bitangentLocal").normalize().toVar("bitangentLocal"),EL=Te(({subBuildFn:i,geometry:e,material:t})=>{let n;return i==="VERTEX"||e.hasAttribute("tangent")?n=sm(Ui.cross(rm),"v_bitangentView").normalize():n=qte,t.flatShading!==!0&&(n=a8(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),Wte=sm(Ku.cross(ML),"v_bitangentWorld").normalize().toVar("bitangentWorld"),mc=ca(rm,EL,Ui).toVar("TBNViewMatrix"),wL=fr.mul(mc),jte=(i,e)=>i.sub(wL.mul(e)),RL=Te(()=>{let i=Sc.cross(fr);return i=i.cross(Sc).normalize(),i=xi(i,Ui,Mu.mul(xl.oneMinus()).oneMinus().pow2().pow2()).normalize(),i}).once()();class Xte extends zr{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Bl}setup({material:e}){const{normalMapType:t,scaleNode:n}=this;let r=this.node.mul(2).sub(1);if(n!==null){let a=n;e.flatShading===!0&&(a=a8(a)),r=be(r.xy.mul(a),r.z)}let s=null;return t===ix?s=Zb(r):t===Bl?s=mc.mul(r).normalize():(console.error(`THREE.NodeMaterial: Unsupported normal map type: ${t}`),s=Ui),s}}const g_=Mn(Xte).setParameterLength(1,2),Yte=Te(({textureNode:i,bumpScale:e})=>{const t=r=>i.cache().context({getUV:s=>r(s.uvNode||qi()),forceUVContext:!0}),n=ue(t(r=>r));return Ze(ue(t(r=>r.add(r.dFdx()))).sub(n),ue(t(r=>r.add(r.dFdy()))).sub(n)).mul(e)}),Qte=Te(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,r=e.dFdx().normalize(),s=e.dFdy().normalize(),a=t,o=s.cross(a),l=a.cross(r),u=r.dot(o).mul(Kb),c=u.sign().mul(n.x.mul(o).add(n.y.mul(l)));return u.abs().mul(t).sub(c).normalize()});class $te extends zr{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=Yte({textureNode:this.textureNode,bumpScale:e});return Qte({surf_pos:Fr,surf_norm:Ui,dHdxy:t})}}const tS=Mn($te).setParameterLength(1,2),Ew=new Map;class Ke extends jt{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=Ew.get(e);return n===void 0&&(n=_1(e,t),Ew.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let r=null;if(n===Ke.COLOR){const s=t.color!==void 0?this.getColor(n):be();t.map&&t.map.isTexture===!0?r=s.mul(this.getTexture("map")):r=s}else if(n===Ke.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?r=s.mul(this.getTexture("alpha")):r=s}else if(n===Ke.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?r=this.getTexture("specular").r:r=ue(1);else if(n===Ke.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s}else if(n===Ke.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?r=s.mul(this.getTexture(n).rgb):r=s}else if(n===Ke.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).g):r=s}else if(n===Ke.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?r=s.mul(this.getTexture(n).b):r=s}else if(n===Ke.EMISSIVE){const s=this.getFloat("emissiveIntensity"),a=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?r=a.mul(this.getTexture(n)):r=a}else if(n===Ke.NORMAL)t.normalMap?(r=g_(this.getTexture("normal"),this.getCache("normalScale","vec2")),r.normalMapType=t.normalMapType):t.bumpMap?r=tS(this.getTexture("bump").r,this.getFloat("bumpScale")):r=Ui;else if(n===Ke.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.CLEARCOAT_NORMAL)t.clearcoatNormalMap?r=g_(this.getTexture(n),this.getCache(n+"Scale","vec2")):r=Ui;else if(n===Ke.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?r=s.mul(this.getTexture("sheenColor").rgb):r=s}else if(n===Ke.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s,r=r.clamp(.07,1)}else if(n===Ke.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);r=Wp(i5.x,i5.y,i5.y.negate(),i5.x).mul(s.rg.mul(2).sub(Ze(1)).normalize().mul(s.b))}else r=i5;else if(n===Ke.IRIDESCENCE_THICKNESS){const s=ji("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const a=ji("0","float",t.iridescenceThicknessRange);r=s.sub(a).mul(this.getTexture(n).g).add(a)}else r=s}else if(n===Ke.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?r=s.mul(this.getTexture(n).r):r=s}else if(n===Ke.THICKNESS){const s=this.getFloat(n);t.thicknessMap?r=s.mul(this.getTexture(n).g):r=s}else if(n===Ke.IOR)r=this.getFloat(n);else if(n===Ke.LIGHT_MAP)r=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===Ke.AO)r=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(n===Ke.LINE_DASH_OFFSET)r=t.dashOffset?this.getFloat(n):ue(0);else{const s=this.getNodeType(e);r=this.getCache(n,s)}return r}}Ke.ALPHA_TEST="alphaTest";Ke.COLOR="color";Ke.OPACITY="opacity";Ke.SHININESS="shininess";Ke.SPECULAR="specular";Ke.SPECULAR_STRENGTH="specularStrength";Ke.SPECULAR_INTENSITY="specularIntensity";Ke.SPECULAR_COLOR="specularColor";Ke.REFLECTIVITY="reflectivity";Ke.ROUGHNESS="roughness";Ke.METALNESS="metalness";Ke.NORMAL="normal";Ke.CLEARCOAT="clearcoat";Ke.CLEARCOAT_ROUGHNESS="clearcoatRoughness";Ke.CLEARCOAT_NORMAL="clearcoatNormal";Ke.EMISSIVE="emissive";Ke.ROTATION="rotation";Ke.SHEEN="sheen";Ke.SHEEN_ROUGHNESS="sheenRoughness";Ke.ANISOTROPY="anisotropy";Ke.IRIDESCENCE="iridescence";Ke.IRIDESCENCE_IOR="iridescenceIOR";Ke.IRIDESCENCE_THICKNESS="iridescenceThickness";Ke.IOR="ior";Ke.TRANSMISSION="transmission";Ke.THICKNESS="thickness";Ke.ATTENUATION_DISTANCE="attenuationDistance";Ke.ATTENUATION_COLOR="attenuationColor";Ke.LINE_SCALE="scale";Ke.LINE_DASH_SIZE="dashSize";Ke.LINE_GAP_SIZE="gapSize";Ke.LINE_WIDTH="linewidth";Ke.LINE_DASH_OFFSET="dashOffset";Ke.POINT_SIZE="size";Ke.DISPERSION="dispersion";Ke.LIGHT_MAP="light";Ke.AO="ao";const CL=Nt(Ke,Ke.ALPHA_TEST),NL=Nt(Ke,Ke.COLOR),PL=Nt(Ke,Ke.SHININESS),DL=Nt(Ke,Ke.EMISSIVE),nS=Nt(Ke,Ke.OPACITY),BL=Nt(Ke,Ke.SPECULAR),y_=Nt(Ke,Ke.SPECULAR_INTENSITY),LL=Nt(Ke,Ke.SPECULAR_COLOR),f6=Nt(Ke,Ke.SPECULAR_STRENGTH),Dd=Nt(Ke,Ke.REFLECTIVITY),IL=Nt(Ke,Ke.ROUGHNESS),UL=Nt(Ke,Ke.METALNESS),OL=Nt(Ke,Ke.NORMAL),FL=Nt(Ke,Ke.CLEARCOAT),VL=Nt(Ke,Ke.CLEARCOAT_ROUGHNESS),zL=Nt(Ke,Ke.CLEARCOAT_NORMAL),GL=Nt(Ke,Ke.ROTATION),qL=Nt(Ke,Ke.SHEEN),kL=Nt(Ke,Ke.SHEEN_ROUGHNESS),HL=Nt(Ke,Ke.ANISOTROPY),WL=Nt(Ke,Ke.IRIDESCENCE),jL=Nt(Ke,Ke.IRIDESCENCE_IOR),XL=Nt(Ke,Ke.IRIDESCENCE_THICKNESS),YL=Nt(Ke,Ke.TRANSMISSION),QL=Nt(Ke,Ke.THICKNESS),$L=Nt(Ke,Ke.IOR),KL=Nt(Ke,Ke.ATTENUATION_DISTANCE),ZL=Nt(Ke,Ke.ATTENUATION_COLOR),JL=Nt(Ke,Ke.LINE_SCALE),eI=Nt(Ke,Ke.LINE_DASH_SIZE),tI=Nt(Ke,Ke.LINE_GAP_SIZE),Kte=Nt(Ke,Ke.LINE_WIDTH),nI=Nt(Ke,Ke.LINE_DASH_OFFSET),iI=Nt(Ke,Ke.POINT_SIZE),rI=Nt(Ke,Ke.DISPERSION),iS=Nt(Ke,Ke.LIGHT_MAP),sI=Nt(Ke,Ke.AO),i5=on(new He).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),rS=Te(i=>i.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class dr extends jt{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let r;if(n===dr.VERTEX)r=e.getVertexIndex();else if(n===dr.INSTANCE)r=e.getInstanceIndex();else if(n===dr.DRAW)r=e.getDrawIndex();else if(n===dr.INVOCATION_LOCAL)r=e.getInvocationLocalIndex();else if(n===dr.INVOCATION_SUBGROUP)r=e.getInvocationSubgroupIndex();else if(n===dr.SUBGROUP)r=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=r:s=Hl(this).build(e,t),s}}dr.VERTEX="vertex";dr.INSTANCE="instance";dr.SUBGROUP="subgroup";dr.INVOCATION_LOCAL="invocationLocal";dr.INVOCATION_SUBGROUP="invocationSubgroup";dr.DRAW="draw";const aI=Nt(dr,dr.VERTEX),Ou=Nt(dr,dr.INSTANCE),Zte=Nt(dr,dr.SUBGROUP),Jte=Nt(dr,dr.INVOCATION_SUBGROUP),ene=Nt(dr,dr.INVOCATION_LOCAL),oI=Nt(dr,dr.DRAW);class lI extends jt{static get type(){return"InstanceNode"}constructor(e,t,n=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=kn.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{instanceMatrix:t,instanceColor:n}=this,{count:r}=t;let{instanceMatrixNode:s,instanceColorNode:a}=this;if(s===null){if(r<=1e3)s=S7(t.array,"mat4",Math.max(r,1)).element(Ou);else{const l=new E6(t.array,16,1);this.buffer=l;const u=t.usage===uc?h_:OA,c=[u(l,"vec4",16,0),u(l,"vec4",16,4),u(l,"vec4",16,8),u(l,"vec4",16,12)];s=bc(...c)}this.instanceMatrixNode=s}if(n&&a===null){const l=new $a(n.array,3),u=n.usage===uc?h_:OA;this.bufferColor=l,a=be(u(l,"vec3",3,0)),this.instanceColorNode=a}const o=s.mul(Or).xyz;if(Or.assign(o),e.hasGeometryAttribute("normal")){const l=hL(eo,s);eo.assign(l)}this.instanceColorNode!==null&&G6("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==uc&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==uc&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const tne=Mn(lI).setParameterLength(2,3);class nne extends lI{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:r}=e;super(t,n,r),this.instancedMesh=e}}const uI=Mn(nne).setParameterLength(1);class ine extends jt{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=Ou:this.batchingIdNode=oI);const n=Te(([b])=>{const w=me(Uu(Br(this.batchMesh._indirectTexture),0).x),E=me(b).mod(w),M=me(b).div(w);return Br(this.batchMesh._indirectTexture,is(E,M)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(me(this.batchingIdNode)),r=this.batchMesh._matricesTexture,s=me(Uu(Br(r),0).x),a=ue(n).mul(4).toInt().toVar(),o=a.mod(s),l=a.div(s),u=bc(Br(r,is(o,l)),Br(r,is(o.add(1),l)),Br(r,is(o.add(2),l)),Br(r,is(o.add(3),l))),c=this.batchMesh._colorsTexture;if(c!==null){const w=Te(([E])=>{const M=me(Uu(Br(c),0).x),P=E,D=P.mod(M),B=P.div(M);return Br(c,is(D,B)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);G6("vec3","vBatchColor").assign(w)}const p=ca(u);Or.assign(u.mul(Or));const y=eo.div(be(p[0].dot(p[0]),p[1].dot(p[1]),p[2].dot(p[2]))),_=p.mul(y).xyz;eo.assign(_),e.hasGeometryAttribute("tangent")&&E7.mulAssign(p)}}const cI=Mn(ine).setParameterLength(1);class rne extends g3{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const r=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&r!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}const sne=Mn(rne).setParameterLength(2);class ane extends Xb{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let r,s=null;t&&t.isStruct?(r="struct",s=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(n=e.count)):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(r=dD(e.itemSize),n=e.count):r=t,super(e,r,n),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=zs.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return sne(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(zs.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=b7(this.value),this._varying=Hl(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return this.structTypeNode!==null?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),r=n.build(e);return e.registerTransform(r,t),r}}const Tc=(i,e=null,t=0)=>$e(new ane(i,e,t)),one=(i,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),Tc(i,e,t).setPBO(!0)),ww=new WeakMap;class hI extends jt{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=kn.OBJECT,this.skinIndexNode=k1("skinIndex","uvec4"),this.skinWeightNode=k1("skinWeight","vec4"),this.bindMatrixNode=ji("bindMatrix","mat4"),this.bindMatrixInverseNode=ji("bindMatrixInverse","mat4"),this.boneMatricesNode=A_("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Or,this.toPositionNode=Or,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(n.x),l=e.element(n.y),u=e.element(n.z),c=e.element(n.w),p=s.mul(t),y=kr(o.mul(r.x).mul(p),l.mul(r.y).mul(p),u.mul(r.z).mul(p),c.mul(r.w).mul(p));return a.mul(y).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=eo){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:a}=this,o=e.element(n.x),l=e.element(n.y),u=e.element(n.z),c=e.element(n.w);let p=kr(r.x.mul(o),r.y.mul(l),r.z.mul(u),r.w.mul(c));return p=a.mul(p).mul(s),p.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=A_("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,FA)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||pD(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&FA.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();eo.assign(n),e.hasGeometryAttribute("tangent")&&E7.assign(n)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;ww.get(t)!==e.frameId&&(ww.set(t,e.frameId),this.previousBoneMatricesNode!==null&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}const fI=i=>$e(new hI(i)),lne=(i,e=null)=>{const t=new hI(i);return t.positionNode=Tc(new $a(i.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(Ou).toVar(),t.skinIndexNode=Tc(new $a(new Uint32Array(i.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(Ou).toVar(),t.skinWeightNode=Tc(new $a(i.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(Ou).toVar(),t.bindMatrixNode=on(i.bindMatrix,"mat4"),t.bindMatrixInverseNode=on(i.bindMatrixInverse,"mat4"),t.boneMatricesNode=S7(i.skeleton.boneMatrices,"mat4",i.skeleton.bones.length),t.toPositionNode=e,$e(t)};class une extends jt{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let a=0,o=this.params.length-1;a<o;a++){const l=this.params[a],u=l.isNode!==!0&&l.name||this.getVarName(a),c=l.isNode!==!0&&l.type||"int";n[u]=q1(u,c)}const r=e.addStack();t.returnsNode=this.params[this.params.length-1](n,e),t.stackNode=r;const s=this.params[0];return s.isNode!==!0&&typeof s.update=="function"&&(t.updateNode=Te(this.params[0].update)(n)),e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,r=t.stackNode;for(let o=0,l=n.length-1;o<l;o++){const u=n[o];let c=!1,p=null,y=null,_=null,b=null,w=null,E=null;u.isNode?u.getNodeType(e)==="bool"?(c=!0,b="bool",y=u.build(e,b)):(b="int",_=this.getVarName(o),p="0",y=u.build(e,b),w="<"):(b=u.type||"int",_=u.name||this.getVarName(o),p=u.start,y=u.end,w=u.condition,E=u.update,typeof p=="number"?p=e.generateConst(b,p):p&&p.isNode&&(p=p.build(e,b)),typeof y=="number"?y=e.generateConst(b,y):y&&y.isNode&&(y=y.build(e,b)),p!==void 0&&y===void 0?(p=p+" - 1",y="0",w=">="):y!==void 0&&p===void 0&&(p="0",w="<"),w===void 0&&(Number(p)>Number(y)?w=">=":w="<"));let M;if(c)M=`while ( ${y} )`;else{const P={start:p,end:y},D=P.start,B=P.end;let U;const O=()=>w.includes("<")?"+=":"-=";if(E!=null)switch(typeof E){case"function":U=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":U=_+" "+O()+" "+e.generateConst(b,E);break;case"string":U=_+" "+E;break;default:E.isNode?U=_+" "+O()+" "+E.build(e):(console.error("THREE.TSL: 'Loop( { update: ... } )' is not a function, string or number."),U="break /* invalid update */")}else b==="int"||b==="uint"?E=w.includes("<")?"++":"--":E=O()+" 1.",U=_+" "+E;const z=e.getVar(b,_)+" = "+D,q=_+" "+w+" "+B;M=`for ( ${z}; ${q}; ${U} )`}e.addFlowCode((o===0?`
`:"")+e.tab+M+` {

`).addFlowTab()}const s=r.build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let o=0,l=this.params.length-1;o<l;o++)e.addFlowCode((o===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const Oi=(...i)=>$e(new une(xc(i,"int"))).toStack(),cne=()=>q1("continue").toStack(),dI=()=>q1("break").toStack(),ly=new WeakMap,go=new an,Rw=Te(({bufferMap:i,influence:e,stride:t,width:n,depth:r,offset:s})=>{const a=me(aI).mul(t).add(s),o=a.div(n),l=a.sub(o.mul(n));return Br(i,is(l,o)).depth(r).xyz.mul(e)});function hne(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,r=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,s=r!==void 0?r.length:0;let a=ly.get(i);if(a===void 0||a.count!==s){let M=function(){w.dispose(),ly.delete(i),i.removeEventListener("dispose",M)};a!==void 0&&a.texture.dispose();const o=i.morphAttributes.position||[],l=i.morphAttributes.normal||[],u=i.morphAttributes.color||[];let c=0;e===!0&&(c=1),t===!0&&(c=2),n===!0&&(c=3);let p=i.attributes.position.count*c,y=1;const _=4096;p>_&&(y=Math.ceil(p/_),p=_);const b=new Float32Array(p*y*4*s),w=new r7(b,p,y,s);w.type=or,w.needsUpdate=!0;const E=c*4;for(let P=0;P<s;P++){const D=o[P],B=l[P],U=u[P],O=p*y*4*P;for(let z=0;z<D.count;z++){const q=z*E;e===!0&&(go.fromBufferAttribute(D,z),b[O+q+0]=go.x,b[O+q+1]=go.y,b[O+q+2]=go.z,b[O+q+3]=0),t===!0&&(go.fromBufferAttribute(B,z),b[O+q+4]=go.x,b[O+q+5]=go.y,b[O+q+6]=go.z,b[O+q+7]=0),n===!0&&(go.fromBufferAttribute(U,z),b[O+q+8]=go.x,b[O+q+9]=go.y,b[O+q+10]=go.z,b[O+q+11]=U.itemSize===4?go.w:1)}}a={count:s,texture:w,stride:c,size:new He(p,y)},ly.set(i,a),i.addEventListener("dispose",M)}return a}class fne extends jt{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=on(1),this.updateType=kn.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,r=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,a=s!==void 0?s.length:0,{texture:o,stride:l,size:u}=hne(t);n===!0&&Or.mulAssign(this.morphBaseInfluence),r===!0&&eo.mulAssign(this.morphBaseInfluence);const c=me(u.width);Oi(a,({i:p})=>{const y=ue(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?y.assign(Br(this.mesh.morphTexture,is(me(p).add(1),me(Ou))).r):y.assign(ji("morphTargetInfluences","float").element(p).toVar()),_n(y.notEqual(0),()=>{n===!0&&Or.addAssign(Rw({bufferMap:o,influence:y,stride:l,width:c,depth:p,offset:me(0)})),r===!0&&eo.addAssign(Rw({bufferMap:o,influence:y,stride:l,width:c,depth:p,offset:me(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const AI=Mn(fne).setParameterLength(1);class o8 extends jt{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class dne extends o8{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class Ane extends DB{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,r=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=r,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=be().toVar("directDiffuse"),r=be().toVar("directSpecular"),s=be().toVar("indirectDiffuse"),a=be().toVar("indirectSpecular"),o={directDiffuse:n,directSpecular:r,indirectDiffuse:s,indirectSpecular:a};return{radiance:be().toVar("radiance"),irradiance:be().toVar("irradiance"),iblIrradiance:be().toVar("iblIrradiance"),ambientOcclusion:ue(1).toVar("ambientOcclusion"),reflectedLight:o,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const pI=Mn(Ane);class pne extends o8{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}const q4=new He;class am extends Fl{static get type(){return"ViewportTextureNode"}constructor(e=N1,t=null,n=null){let r=null;n===null?(r=new fx,r.minFilter=Fs,n=r):r=n,super(n,e,t),this.generateMipmaps=!1,this.defaultFramebuffer=r,this.isOutputTextureNode=!0,this.updateBeforeType=kn.FRAME,this._cacheTextures=new WeakMap}getTextureForReference(e=null){let t,n;if(this.referenceNode?(t=this.referenceNode.defaultFramebuffer,n=this.referenceNode._cacheTextures):(t=this.defaultFramebuffer,n=this._cacheTextures),e===null)return t;if(n.has(e)===!1){const r=t.clone();n.set(e,r)}return n.get(e)}updateReference(e){const t=e.renderer.getRenderTarget();return this.value=this.getTextureForReference(t),this.value}updateBefore(e){const t=e.renderer,n=t.getRenderTarget();n===null?t.getDrawingBufferSize(q4):q4.set(n.width,n.height);const r=this.getTextureForReference(n);(r.image.width!==q4.width||r.image.height!==q4.height)&&(r.image.width=q4.width,r.image.height=q4.height,r.needsUpdate=!0);const s=r.generateMipmaps;r.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(r),r.generateMipmaps=s}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const mne=Mn(am).setParameterLength(0,3),sS=Mn(am,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let z9=null;class gne extends am{static get type(){return"ViewportDepthTextureNode"}constructor(e=N1,t=null){z9===null&&(z9=new Ka),super(e,t,z9)}getTextureForReference(){return z9}}const aS=Mn(gne).setParameterLength(0,2);class ka extends jt{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===ka.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let r=null;if(t===ka.DEPTH_BASE)n!==null&&(r=gI().assign(n));else if(t===ka.DEPTH)e.isPerspectiveCamera?r=mI(Fr.z,wu,Ru):r=_5(Fr.z,wu,Ru);else if(t===ka.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=oS(n,wu,Ru);r=_5(s,wu,Ru)}else r=n;else r=_5(Fr.z,wu,Ru);return r}}ka.DEPTH_BASE="depthBase";ka.DEPTH="depth";ka.LINEAR_DEPTH="linearDepth";const _5=(i,e,t)=>i.add(e).div(e.sub(t)),yne=(i,e,t)=>e.sub(t).mul(i).sub(e),mI=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),oS=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),lS=(i,e,t)=>{e=e.max(1e-6).toVar();const n=Rl(i.negate().div(e)),r=Rl(t.div(e));return n.div(r)},vne=(i,e,t)=>{const n=i.mul(Qp(t.div(e)));return ue(Math.E).pow(n).mul(e).negate()},gI=Mn(ka,ka.DEPTH_BASE),uS=Nt(ka,ka.DEPTH),VA=Mn(ka,ka.LINEAR_DEPTH).setParameterLength(0,1),_ne=VA(aS());uS.assign=i=>gI(i);class Ko extends jt{static get type(){return"ClippingNode"}constructor(e=Ko.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:r}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===Ko.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,r):this.scope===Ko.HARDWARE?this.setupHardwareClipping(r,e):this.setupDefault(n,r)}setupAlphaToCoverage(e,t){return Te(()=>{const n=ue().toVar("distanceToPlane"),r=ue().toVar("distanceToGradient"),s=ue(1).toVar("clipOpacity"),a=t.length;if(this.hardwareClipping===!1&&a>0){const l=ra(t).setGroup(rn);Oi(a,({i:u})=>{const c=l.element(u);n.assign(Fr.dot(c.xyz).negate().add(c.w)),r.assign(n.fwidth().div(2)),s.mulAssign(Ol(r.negate(),r,n))})}const o=e.length;if(o>0){const l=ra(e).setGroup(rn),u=ue(1).toVar("intersectionClipOpacity");Oi(o,({i:c})=>{const p=l.element(c);n.assign(Fr.dot(p.xyz).negate().add(p.w)),r.assign(n.fwidth().div(2)),u.mulAssign(Ol(r.negate(),r,n).oneMinus())}),s.mulAssign(u.oneMinus())}Mi.a.mulAssign(s),Mi.a.equal(0).discard()})()}setupDefault(e,t){return Te(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const s=ra(t).setGroup(rn);Oi(n,({i:a})=>{const o=s.element(a);Fr.dot(o.xyz).greaterThan(o.w).discard()})}const r=e.length;if(r>0){const s=ra(e).setGroup(rn),a=t0(!0).toVar("clipped");Oi(r,({i:o})=>{const l=s.element(o);a.assign(Fr.dot(l.xyz).greaterThan(l.w).and(a))}),a.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),Te(()=>{const r=ra(e).setGroup(rn),s=W1(t.getClipDistance());Oi(n,({i:a})=>{const o=r.element(a),l=Fr.dot(o.xyz).sub(o.w).negate();s.element(a).assign(l)})})()}}Ko.ALPHA_TO_COVERAGE="alphaToCoverage";Ko.DEFAULT="default";Ko.HARDWARE="hardware";const xne=()=>$e(new Ko),bne=()=>$e(new Ko(Ko.ALPHA_TO_COVERAGE)),Sne=()=>$e(new Ko(Ko.HARDWARE)),Tne=.05,Cw=Te(([i])=>H1(Pn(1e4,To(Pn(17,i.x).add(Pn(.1,i.y)))).mul(kr(.1,tr(To(Pn(13,i.y).add(i.x))))))),Nw=Te(([i])=>Cw(Ze(Cw(i.xy),i.z))),Mne=Te(([i])=>{const e=Mr(Nl(Db(i.xyz)),Nl(Bb(i.xyz))),t=ue(1).div(ue(Tne).mul(e)).toVar("pixScale"),n=Ze(W5(Cl(Rl(t))),W5($p(Rl(t)))),r=Ze(Nw(Cl(n.x.mul(i.xyz))),Nw(Cl(n.y.mul(i.xyz)))),s=H1(Rl(t)),a=kr(Pn(s.oneMinus(),r.x),Pn(s,r.y)),o=Ja(s,s.oneMinus()),l=be(a.mul(a).div(Pn(2,o).mul(oi(1,o))),a.sub(Pn(.5,o)).div(oi(1,o)),oi(1,oi(1,a).mul(oi(1,a)).div(Pn(2,o).mul(oi(1,o))))),u=a.lessThan(o.oneMinus()).select(a.lessThan(o).select(l.x,l.y),l.z);return n0(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class Ene extends tL{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let r;return n===!0?r=super.generate(e):r=e.generateConst(this.nodeType,new an(1,1,1,1)),r}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const yI=(i=0)=>$e(new Ene(i)),vI=Te(([i,e])=>Ja(1,i.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),_I=Te(([i,e])=>Ja(i.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),xI=Te(([i,e])=>i.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),bI=Te(([i,e])=>xi(i.mul(2).mul(e),i.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),Zp(.5,i))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),wne=Te(([i,e])=>{const t=e.a.add(i.a.mul(e.a.oneMinus()));return un(e.rgb.mul(e.a).add(i.rgb.mul(i.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),SI=Te(([i])=>un(i.rgb.mul(i.a),i.a),{color:"vec4",return:"vec4"}),Rne=Te(([i])=>(_n(i.a.equal(0),()=>un(0)),un(i.rgb.div(i.a),i.a)),{color:"vec4",return:"vec4"}),Cne=(...i)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),vI(i)),Nne=(...i)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),_I(i)),Pne=(...i)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),xI(i)),Dne=(...i)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),bI(i));class Vr extends Ss{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{console.warn('THREE.NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}customProgramCacheKey(){return this.type+fD(this)}build(e){this.setup(e)}setupObserver(e){return new iee(e)}setup(e){e.context.setupNormal=()=>v5(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const r=v5(this.setupVertex(e),"VERTEX"),s=this.vertexNode||r;e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);o!==null&&e.stack.add(o);const u=un(l,Mi.a).max(0);a=this.setupOutput(e,u),y5.assign(a);const c=this.outputNode!==null;if(c&&(a=this.outputNode),n!==null){const p=t.getMRT(),y=this.mrtNode;p!==null?(c&&y5.assign(a),a=p,y!==null&&(a=p.merge(y))):y!==null&&(a=y)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=un(l)),a=this.setupOutput(e,l)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let r=null;if(t.length>0||n.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?r=bne():e.stack.add(xne())}return r}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(Sne()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let r=this.depthNode;if(r===null){const s=t.getMRT();s&&s.has("depth")?r=s.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?r=lS(Fr.z,wu,Ru):r=_5(Fr.z,wu,Ru))}r!==null&&uS.assign(r).toStack()}setupPositionView(){return y3.mul(Or).xyz}setupModelViewProjection(){return s8.mul(Fr)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),rS}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&AI(t).toStack(),t.isSkinnedMesh===!0&&fI(t).toStack(),this.displacementMap){const r=_1("displacementMap","texture"),s=_1("displacementScale","float"),a=_1("displacementBias","float");Or.addAssign(eo.normalize().mul(r.x.mul(s).add(a)))}return t.isBatchedMesh&&cI(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&uI(t).toStack(),this.positionNode!==null&&Or.assign(v5(this.positionNode,"POSITION","vec3")),Or}setupDiffuseColor({object:e,geometry:t}){this.maskNode!==null&&t0(this.maskNode).not().discard();let n=this.colorNode?un(this.colorNode):NL;this.vertexColors===!0&&t.hasAttribute("color")&&(n=n.mul(yI())),e.instanceColor&&(n=G6("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=G6("vec3","vBatchColor").mul(n)),Mi.assign(n);const r=this.opacityNode?ue(this.opacityNode):nS;Mi.a.assign(Mi.a.mul(r));let s=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(s=this.alphaTestNode!==null?ue(this.alphaTestNode):CL,Mi.a.lessThanEqual(s).discard()),this.alphaHash===!0&&Mi.a.lessThan(Mne(Or)).discard(),this.transparent===!1&&this.blending===aa&&this.alphaToCoverage===!1?Mi.a.assign(1):s===null&&Mi.a.lessThanEqual(0).discard()}setupVariants(){}setupOutgoingLight(){return this.lights===!0?be(0):Mi.rgb}setupNormal(){return this.normalNode?be(this.normalNode):OL}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?_1("envMap","cubeTexture"):_1("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new pne(iS)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),this.aoNode!==null||e.material.aoMap){const a=this.aoNode!==null?this.aoNode:sI;t.push(new dne(a))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:r,emissiveNode:s}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(o&&o.getScope().hasLights){const u=this.setupLightingModel(e)||null;l=pI(o,u,n,r)}else n!==null&&(l=be(r!==null?xi(l,n,r):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(u_.assign(be(s||DL)),l=l.add(u_)),l}setupFog(e,t){const n=e.fogNode;return n&&(y5.assign(t),t=un(n.toVar())),t}setupPremultipliedAlpha(e,t){return SI(t)}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),this.premultipliedAlpha===!0&&(t=this.setupPremultipliedAlpha(e,t)),t}setDefaultValues(e){for(const n in e){const r=e[n];this[n]===void 0&&(this[n]=r,r&&r.clone&&(this[n]=r.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=Ss.prototype.toJSON.call(this,e),r=NA(this);n.inputNodes={};for(const{property:a,childNode:o}of r)n.inputNodes[a]=o.toJSON(e).uuid;function s(a){const o=[];for(const l in a){const u=a[l];delete u.metadata,o.push(u)}return o}if(t){const a=s(e.textures),o=s(e.images),l=s(e.nodes);a.length>0&&(n.textures=a),o.length>0&&(n.images=o),l.length>0&&(n.nodes=l)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const Bne=new ls;class Lne extends Vr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(Bne),this.setValues(e)}}const Ine=new Cx;class Une extends Vr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(Ine),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?ue(this.offsetNode):nI,t=this.dashScaleNode?ue(this.dashScaleNode):JL,n=this.dashSizeNode?ue(this.dashSizeNode):eI,r=this.gapSizeNode?ue(this.gapSizeNode):tI;Rd.assign(n),c_.assign(r);const s=Hl(k1("lineDistance").mul(t));(e?s.add(e):s).mod(Rd.add(c_)).greaterThan(Rd).discard()}}let G9=null;class One extends am{static get type(){return"ViewportSharedTextureNode"}constructor(e=N1,t=null){G9===null&&(G9=new fx),super(e,t,G9)}getTextureForReference(){return G9}updateReference(){return this}}const Fne=Mn(One).setParameterLength(0,2),TI=i=>$e(i).mul(.5).add(.5),Vne=i=>$e(i).mul(2).sub(1),zne=new Mx;class Gne extends Vr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(zne),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?ue(this.opacityNode):nS;Mi.assign(em(un(TI(Ui),e),Qr))}}const cS=Te(([i=$b])=>{const e=i.z.atan(i.x).mul(1/(Math.PI*2)).add(.5),t=i.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Ze(e,t)});class MI extends ux{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new ql(5,5,5),a=cS($b),o=new Vr;o.colorNode=si(t,a,0),o.side=Fi,o.blending=ja;const l=new Jn(s,o),u=new h3;u.add(l),t.minFilter===Fs&&(t.minFilter=Qi);const c=new lx(1,10,this),p=e.getMRT();return e.setMRT(null),c.update(e,u),e.setMRT(p),t.minFilter=n,t.currentGenerateMipmaps=r,l.geometry.dispose(),l.material.dispose(),this}}const d6=new WeakMap;class qne extends zr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=X5(null);const t=new Wu;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=kn.RENDER}updateBefore(e){const{renderer:t,material:n}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const s=r.isTextureNode?r.value:n[r.property];if(s&&s.isTexture){const a=s.mapping;if(a===Fu||a===Vu){if(d6.has(s)){const o=d6.get(s);Pw(o,s.mapping),this._cubeTexture=o}else{const o=s.image;if(kne(o)){const l=new MI(o.height);l.fromEquirectangularTexture(t,s),Pw(l.texture,s.mapping),this._cubeTexture=l.texture,d6.set(s,l.texture),s.addEventListener("dispose",EI)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function kne(i){return i==null?!1:i.height>0}function EI(i){const e=i.target;e.removeEventListener("dispose",EI);const t=d6.get(e);t!==void 0&&(d6.delete(e),t.dispose())}function Pw(i,e){e===Fu?i.mapping=Eo:e===Vu&&(i.mapping=Zo)}const wI=Mn(qne).setParameterLength(1);class hS extends o8{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=wI(this.envNode)}}class Hne extends o8{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=ue(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class om{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class RI extends om{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,n=e.reflectedLight,r=e.irradianceLightMap;n.indirectDiffuse.assign(un(0)),r?n.indirectDiffuse.addAssign(r):n.indirectDiffuse.addAssign(un(1,1,1,0)),n.indirectDiffuse.mulAssign(t),n.indirectDiffuse.mulAssign(Mi.rgb)}finish(e){const{material:t,context:n}=e,r=n.outgoingLight,s=e.context.environment;if(s)switch(t.combine){case J5:r.rgb.assign(xi(r.rgb,r.rgb.mul(s.rgb),f6.mul(Dd)));break;case Q_:r.rgb.assign(xi(r.rgb,s.rgb,f6.mul(Dd)));break;case $_:r.rgb.addAssign(s.rgb.mul(f6.mul(Dd)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const Wne=new Os;class jne extends Vr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Wne),this.setValues(e)}setupNormal(){return a8(j5)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new hS(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Hne(iS)),t}setupOutgoingLight(){return Mi.rgb}setupLightingModel(){return new RI}}const Y5=Te(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),r3=Te(i=>i.diffuseColor.mul(1/Math.PI)),Xne=()=>ue(.25),Yne=Te(({dotNH:i})=>LA.mul(ue(.5)).add(1).mul(ue(1/Math.PI)).mul(i.pow(LA))),Qne=Te(({lightDirection:i})=>{const e=i.add(fr).normalize(),t=Ui.dot(e).clamp(),n=fr.dot(e).clamp(),r=Y5({f0:Oa,f90:1,dotVH:n}),s=Xne(),a=Yne({dotNH:t});return r.mul(s).mul(a)});class CI extends RI{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Ui.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(r3({diffuseColor:Mi.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(Qne({lightDirection:e})).mul(f6))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(r3({diffuseColor:Mi}))),r.indirectDiffuse.mulAssign(t)}}const $ne=new j0;class Kne extends Vr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues($ne),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new hS(t):null}setupLightingModel(){return new CI(!1)}}const Zne=new Bp;class Jne extends Vr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(Zne),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new hS(t):null}setupLightingModel(){return new CI}setupVariants(){const e=(this.shininessNode?ue(this.shininessNode):PL).max(1e-4);LA.assign(e);const t=this.specularNode||BL;Oa.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const NI=Te(i=>{if(i.geometry.hasAttribute("normal")===!1)return ue(0);const e=j5.dFdx().abs().max(j5.dFdy().abs());return e.x.max(e.y).max(e.z)}),fS=Te(i=>{const{roughness:e}=i,t=NI();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),PI=Te(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),r=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return Co(.5,r.add(s).max(rB))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),eie=Te(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:r,dotBL:s,dotNV:a,dotNL:o})=>{const l=o.mul(be(i.mul(t),e.mul(n),a).length()),u=a.mul(be(i.mul(r),e.mul(s),o).length());return Co(.5,l.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),DI=Te(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),tie=ue(1/Math.PI),nie=Te(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:r})=>{const s=i.mul(e),a=be(e.mul(n),i.mul(r),s.mul(t)),o=a.dot(a),l=s.div(o);return tie.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),v_=Te(({lightDirection:i,f0:e,f90:t,roughness:n,f:r,normalView:s=Ui,USE_IRIDESCENCE:a,USE_ANISOTROPY:o})=>{const l=n.pow2(),u=i.add(fr).normalize(),c=s.dot(i).clamp(),p=s.dot(fr).clamp(),y=s.dot(u).clamp(),_=fr.dot(u).clamp();let b=Y5({f0:e,f90:t,dotVH:_}),w,E;if(V6(a)&&(b=Xp.mix(b,r)),V6(o)){const M=u6.dot(i),P=u6.dot(fr),D=u6.dot(u),B=Sc.dot(i),U=Sc.dot(fr),O=Sc.dot(u);w=eie({alphaT:BA,alphaB:l,dotTV:P,dotBV:U,dotTL:M,dotBL:B,dotNV:p,dotNL:c}),E=nie({alphaT:BA,alphaB:l,dotNH:y,dotTH:D,dotBH:O})}else w=PI({alpha:l,dotNL:c,dotNV:p}),E=DI({alpha:l,dotNH:y});return b.mul(w).mul(E)}),dS=Te(({roughness:i,dotNV:e})=>{const t=un(-1,-.0275,-.572,.022),n=un(1,.0425,1.04,-.04),r=i.mul(t).add(n),s=r.x.mul(r.x).min(e.mul(-9.28).exp2()).mul(r.x).add(r.y);return Ze(-1.04,1.04).mul(s).add(r.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),BI=Te(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:r}=i,s=dS({dotNV:e,roughness:r});return t.mul(s.x).add(n.mul(s.y))}),LI=Te(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),r=n.mul(n),s=n.mul(r,r).clamp(0,.9999);return i.sub(be(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),iie=Te(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=ue(1).div(t),s=e.pow2().oneMinus().max(.0078125);return ue(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),rie=Te(({dotNV:i,dotNL:e})=>ue(1).div(ue(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),sie=Te(({lightDirection:i})=>{const e=i.add(fr).normalize(),t=Ui.dot(i).clamp(),n=Ui.dot(fr).clamp(),r=Ui.dot(e).clamp(),s=iie({roughness:jp,dotNH:r}),a=rie({dotNV:n,dotNL:t});return Ac.mul(s).mul(a)}),aie=Te(({N:i,V:e,roughness:t})=>{const s=.0078125,a=i.dot(e).saturate(),o=Ze(t,a.oneMinus().sqrt());return o.assign(o.mul(.984375).add(s)),o}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),oie=Te(({f:i})=>{const e=i.length();return Mr(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),q9=Te(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),r=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),a=r.div(s),o=t.greaterThan(0).select(a,Mr(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(a));return i.cross(e).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),Dw=Te(({N:i,V:e,P:t,mInv:n,p0:r,p1:s,p2:a,p3:o})=>{const l=s.sub(r).toVar(),u=o.sub(r).toVar(),c=l.cross(u),p=be().toVar();return _n(c.dot(t.sub(r)).greaterThanEqual(0),()=>{const y=e.sub(i.mul(e.dot(i))).normalize(),_=i.cross(y).negate(),b=n.mul(ca(y,_,i).transpose()).toVar(),w=b.mul(r.sub(t)).normalize().toVar(),E=b.mul(s.sub(t)).normalize().toVar(),M=b.mul(a.sub(t)).normalize().toVar(),P=b.mul(o.sub(t)).normalize().toVar(),D=be(0).toVar();D.addAssign(q9({v1:w,v2:E})),D.addAssign(q9({v1:E,v2:M})),D.addAssign(q9({v1:M,v2:P})),D.addAssign(q9({v1:P,v2:w})),p.assign(be(oie({f:D})))}),p}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),lm=1/6,II=i=>Pn(lm,Pn(i,Pn(i,i.negate().add(3)).sub(3)).add(1)),__=i=>Pn(lm,Pn(i,Pn(i,Pn(3,i).sub(6))).add(4)),UI=i=>Pn(lm,Pn(i,Pn(i,Pn(-3,i).add(3)).add(3)).add(1)),x_=i=>Pn(lm,Yo(i,3)),Bw=i=>II(i).add(__(i)),Lw=i=>UI(i).add(x_(i)),Iw=i=>kr(-1,__(i).div(II(i).add(__(i)))),Uw=i=>kr(1,x_(i).div(UI(i).add(x_(i)))),Ow=(i,e,t)=>{const n=i.uvNode,r=Pn(n,e.zw).add(.5),s=Cl(r),a=H1(r),o=Bw(a.x),l=Lw(a.x),u=Iw(a.x),c=Uw(a.x),p=Iw(a.y),y=Uw(a.y),_=Ze(s.x.add(u),s.y.add(p)).sub(.5).mul(e.xy),b=Ze(s.x.add(c),s.y.add(p)).sub(.5).mul(e.xy),w=Ze(s.x.add(u),s.y.add(y)).sub(.5).mul(e.xy),E=Ze(s.x.add(c),s.y.add(y)).sub(.5).mul(e.xy),M=Bw(a.y).mul(kr(o.mul(i.sample(_).level(t)),l.mul(i.sample(b).level(t)))),P=Lw(a.y).mul(kr(o.mul(i.sample(w).level(t)),l.mul(i.sample(E).level(t))));return M.add(P)},AS=Te(([i,e])=>{const t=Ze(i.size(me(e))),n=Ze(i.size(me(e.add(1)))),r=Co(1,t),s=Co(1,n),a=Ow(i,un(r,t),Cl(e)),o=Ow(i,un(s,n),$p(e));return H1(e).mix(a,o)}),lie=Te(([i,e])=>{const t=e.mul(Wb(i));return AS(i,t)}),Fw=Te(([i,e,t,n,r])=>{const s=be(Fb(e.negate(),G1(i),Co(1,n))),a=be(Nl(r[0].xyz),Nl(r[1].xyz),Nl(r[2].xyz));return G1(s).mul(t.mul(a))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),uie=Te(([i,e])=>i.mul(n0(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),cie=sS(),hie=sS(),Vw=Te(([i,e,t],{material:n})=>{const s=(n.side===Fi?cie:hie).sample(i),a=Rl(i3.x).mul(uie(e,t));return AS(s,a)}),zw=Te(([i,e,t])=>(_n(t.notEqual(0),()=>{const n=Qp(e).negate().div(t);return Cb(n.negate().mul(i))}),be(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),fie=Te(([i,e,t,n,r,s,a,o,l,u,c,p,y,_,b])=>{let w,E;if(b){w=un().toVar(),E=be().toVar();const U=c.sub(1).mul(b.mul(.025)),O=be(c.sub(U),c,c.add(U));Oi({start:0,end:3},({i:z})=>{const q=O.element(z),F=Fw(i,e,p,q,o),G=a.add(F),j=u.mul(l.mul(un(G,1))),$=Ze(j.xy.div(j.w)).toVar();$.addAssign(1),$.divAssign(2),$.assign(Ze($.x,$.y.oneMinus()));const K=Vw($,t,q);w.element(z).assign(K.element(z)),w.a.addAssign(K.a),E.element(z).assign(n.element(z).mul(zw(Nl(F),y,_).element(z)))}),w.a.divAssign(3)}else{const U=Fw(i,e,p,c,o),O=a.add(U),z=u.mul(l.mul(un(O,1))),q=Ze(z.xy.div(z.w)).toVar();q.addAssign(1),q.divAssign(2),q.assign(Ze(q.x,q.y.oneMinus())),w=Vw(q,t,c),E=n.mul(zw(Nl(U),y,_))}const M=E.rgb.mul(w.rgb),P=i.dot(e).clamp(),D=be(BI({dotNV:P,specularColor:r,specularF90:s,roughness:t})),B=E.r.add(E.g,E.b).div(3);return un(D.oneMinus().mul(M),w.a.oneMinus().mul(B).oneMinus())}),die=ca(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),Aie=i=>{const e=i.sqrt();return be(1).add(e).div(be(1).sub(e))},Gw=(i,e)=>i.sub(e).div(i.add(e)).pow2(),pie=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=be(54856e-17,44201e-17,52481e-17),r=be(1681e3,1795300,2208400),s=be(43278e5,93046e5,66121e5),a=ue(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let o=n.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return o=be(o.x.add(a),o.y,o.z).div(10685e-11),die.mul(o)},mie=Te(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:r})=>{const s=xi(i,e,Ol(0,.03,n)),o=i.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();_n(o.lessThan(0),()=>be(1));const l=o.sqrt(),u=Gw(s,i),c=Y5({f0:u,f90:1,dotVH:t}),p=c.oneMinus(),y=s.lessThan(i).select(Math.PI,0),_=ue(Math.PI).sub(y),b=Aie(r.clamp(0,.9999)),w=Gw(b,s.toVec3()),E=Y5({f0:w,f90:1,dotVH:l}),M=be(b.x.lessThan(s).select(Math.PI,0),b.y.lessThan(s).select(Math.PI,0),b.z.lessThan(s).select(Math.PI,0)),P=s.mul(n,l,2),D=be(_).add(M),B=c.mul(E).clamp(1e-5,.9999),U=B.sqrt(),O=p.pow2().mul(E).div(be(1).sub(B)),q=c.add(O).toVar(),F=O.sub(p).toVar();return Oi({start:1,end:2,condition:"<=",name:"m"},({m:G})=>{F.mulAssign(U);const j=pie(ue(G).mul(P),ue(G).mul(D)).mul(2);q.addAssign(F.mul(j))}),q.max(be(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),gie=Te(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),r=t.pow2(),s=xs(t.lessThan(.25),ue(-339.2).mul(r).add(ue(161.4).mul(t)).sub(25.9),ue(-8.48).mul(r).add(ue(14.3).mul(t)).sub(9.95)),a=xs(t.lessThan(.25),ue(44).mul(r).sub(ue(23.7).mul(t)).add(3.26),ue(1.97).mul(r).sub(ue(3.27).mul(t)).add(.72));return xs(t.lessThan(.25),0,ue(.1).mul(t).sub(.025)).add(s.mul(n).add(a).exp()).mul(1/Math.PI).saturate()}),uy=be(.04),cy=ue(1);class OI extends om{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,a=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=r,this.transmission=s,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=be().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=be().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=be().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=be().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=be().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=Ui.dot(fr).clamp();this.iridescenceFresnel=mie({outsideIOR:ue(1),eta2:_b,cosTheta1:t,thinFilmThickness:xb,baseF0:Oa}),this.iridescenceF0=LI({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=Pl,n=rL.sub(Pl).normalize(),r=Ku,s=e.context;s.backdrop=fie(r,n,xl,Mi,Oa,H6,t,Qo,c0,s8,c6,bb,Tb,Sb,this.dispersion?Mb:null),s.backdropAlpha=IA,Mi.a.mulAssign(xi(1,s.backdrop.a,IA))}super.start(e)}computeMultiscattering(e,t,n){const r=Ui.dot(fr).clamp(),s=dS({roughness:xl,dotNV:r}),o=(this.iridescenceF0?Xp.mix(Oa,this.iridescenceF0):Oa).mul(s.x).add(n.mul(s.y)),u=s.x.add(s.y).oneMinus(),c=Oa.add(Oa.oneMinus().mul(.047619)),p=o.mul(c).div(u.mul(c).oneMinus());e.addAssign(o),t.addAssign(p.mul(u))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Ui.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(sie({lightDirection:e}))),this.clearcoat===!0){const o=pc.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(o.mul(v_({lightDirection:e,f0:uy,f90:cy,roughness:k6,normalView:pc})))}n.directDiffuse.addAssign(s.mul(r3({diffuseColor:Mi.rgb}))),n.directSpecular.addAssign(s.mul(v_({lightDirection:e,f0:Oa,f90:1,roughness:xl,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:r,reflectedLight:s,ltc_1:a,ltc_2:o}){const l=t.add(n).sub(r),u=t.sub(n).sub(r),c=t.sub(n).add(r),p=t.add(n).add(r),y=Ui,_=fr,b=Fr.toVar(),w=aie({N:y,V:_,roughness:xl}),E=a.sample(w).toVar(),M=o.sample(w).toVar(),P=ca(be(E.x,0,E.y),be(0,1,0),be(E.z,0,E.w)).toVar(),D=Oa.mul(M.x).add(Oa.oneMinus().mul(M.y)).toVar();s.directSpecular.addAssign(e.mul(D).mul(Dw({N:y,V:_,P:b,mInv:P,p0:l,p1:u,p2:c,p3:p}))),s.directDiffuse.addAssign(e.mul(Mi).mul(Dw({N:y,V:_,P:b,mInv:ca(1,0,0,0,1,0,0,0,1),p0:l,p1:u,p2:c,p3:p})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:n}=e.context;n.indirectDiffuse.addAssign(t.mul(r3({diffuseColor:Mi})))}indirectSpecular(e){const{radiance:t,iblIrradiance:n,reflectedLight:r}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(n.mul(Ac,gie({normal:Ui,viewDir:fr,roughness:jp}))),this.clearcoat===!0){const c=pc.dot(fr).clamp(),p=BI({dotNV:c,specularColor:uy,specularF90:cy,roughness:k6});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(p))}const s=be().toVar("singleScattering"),a=be().toVar("multiScattering"),o=n.mul(1/Math.PI);this.computeMultiscattering(s,a,H6);const l=s.add(a),u=Mi.mul(l.r.max(l.g).max(l.b).oneMinus());r.indirectSpecular.addAssign(t.mul(s)),r.indirectSpecular.addAssign(a.mul(o)),r.indirectDiffuse.addAssign(u.mul(o))}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:n}=e.context,s=Ui.dot(fr).clamp().add(t),a=xl.mul(-16).oneMinus().negate().exp2(),o=t.sub(s.pow(a).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(o)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=pc.dot(fr).clamp(),r=Y5({dotVH:n,f0:uy,f90:cy}),s=t.mul(DA.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(DA));t.assign(s)}if(this.sheen===!0){const n=Ac.r.max(Ac.g).max(Ac.b).mul(.157).oneMinus(),r=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}const qw=ue(1),b_=ue(-2),k9=ue(.8),hy=ue(-1),H9=ue(.4),fy=ue(2),W9=ue(.305),dy=ue(3),kw=ue(.21),yie=ue(4),Hw=ue(4),vie=ue(16),_ie=Te(([i])=>{const e=be(tr(i)).toVar(),t=ue(-1).toVar();return _n(e.x.greaterThan(e.z),()=>{_n(e.x.greaterThan(e.y),()=>{t.assign(xs(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign(xs(i.y.greaterThan(0),1,4))})}).Else(()=>{_n(e.z.greaterThan(e.y),()=>{t.assign(xs(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign(xs(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),xie=Te(([i,e])=>{const t=Ze().toVar();return _n(e.equal(0),()=>{t.assign(Ze(i.z,i.y).div(tr(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(Ze(i.x.negate(),i.z.negate()).div(tr(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(Ze(i.x.negate(),i.y).div(tr(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(Ze(i.z.negate(),i.y).div(tr(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(Ze(i.x.negate(),i.z).div(tr(i.y)))}).Else(()=>{t.assign(Ze(i.x,i.y).div(tr(i.z)))}),Pn(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),bie=Te(([i])=>{const e=ue(0).toVar();return _n(i.greaterThanEqual(k9),()=>{e.assign(qw.sub(i).mul(hy.sub(b_)).div(qw.sub(k9)).add(b_))}).ElseIf(i.greaterThanEqual(H9),()=>{e.assign(k9.sub(i).mul(fy.sub(hy)).div(k9.sub(H9)).add(hy))}).ElseIf(i.greaterThanEqual(W9),()=>{e.assign(H9.sub(i).mul(dy.sub(fy)).div(H9.sub(W9)).add(fy))}).ElseIf(i.greaterThanEqual(kw),()=>{e.assign(W9.sub(i).mul(yie.sub(dy)).div(W9.sub(kw)).add(dy))}).Else(()=>{e.assign(ue(-2).mul(Rl(Pn(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),FI=Te(([i,e])=>{const t=i.toVar();t.assign(Pn(2,t).sub(1));const n=be(t,1).toVar();return _n(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),VI=Te(([i,e,t,n,r,s])=>{const a=ue(t),o=be(e),l=n0(bie(a),b_,s),u=H1(l),c=Cl(l),p=be(S_(i,o,c,n,r,s)).toVar();return _n(u.notEqual(0),()=>{const y=be(S_(i,o,c.add(1),n,r,s)).toVar();p.assign(xi(p,y,u))}),p}),S_=Te(([i,e,t,n,r,s])=>{const a=ue(t).toVar(),o=be(e),l=ue(_ie(o)).toVar(),u=ue(Mr(Hw.sub(a),0)).toVar();a.assign(Mr(a,Hw));const c=ue(W5(a)).toVar(),p=Ze(xie(o,l).mul(c.sub(2)).add(1)).toVar();return _n(l.greaterThan(2),()=>{p.y.addAssign(c),l.subAssign(3)}),p.x.addAssign(l.mul(c)),p.x.addAssign(u.mul(Pn(3,vie))),p.y.addAssign(Pn(4,W5(s).sub(c))),p.x.mulAssign(n),p.y.mulAssign(r),i.sample(p).grad(Ze(),Ze())}),Ay=Te(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:r,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:a,CUBEUV_MAX_MIP:o})=>{const l=g1(n),u=t.mul(l).add(r.cross(t).mul(To(n))).add(r.mul(r.dot(t).mul(l.oneMinus())));return S_(i,u,e,s,a,o)}),zI=Te(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:r,samples:s,dTheta:a,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:p})=>{const y=be(xs(e,t,Jp(t,n))).toVar();_n(y.equal(be(0)),()=>{y.assign(be(n.z,0,n.x.negate()))}),y.assign(G1(y));const _=be().toVar();return _.addAssign(r.element(0).mul(Ay({theta:0,axis:y,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:p}))),Oi({start:me(1),end:i},({i:b})=>{_n(b.greaterThanEqual(s),()=>{dI()});const w=ue(a.mul(ue(b))).toVar();_.addAssign(r.element(b).mul(Ay({theta:w.mul(-1),axis:y,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:p}))),_.addAssign(r.element(b).mul(Ay({theta:w,axis:y,outputDirection:n,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:p})))}),un(_,1)}),f5=4,Ww=[.125,.215,.35,.446,.526,.582],rc=20,py=new Ml(-1,1,1,-1,0,1),Sie=new ar(90,1),jw=new Dt;let my=null,gy=0,yy=0;const nc=(1+Math.sqrt(5))/2,k4=1/nc,Xw=[new te(-nc,k4,0),new te(nc,k4,0),new te(-k4,0,nc),new te(k4,0,nc),new te(0,nc,-k4),new te(0,nc,k4),new te(-1,1,-1),new te(1,1,-1),new te(-1,1,1),new te(1,1,1)],Tie=new te,GI=new WeakMap,Mie=[3,1,5,0,4,2],vy=FI(qi(),k1("faceIndex")).normalize(),pS=be(vy.x,vy.y,vy.z);class Eie{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,r=100,s={}){const{size:a=256,position:o=Tie,renderTarget:l=null}=s;if(this._setSize(a),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const c=l||this._allocateTarget();return s.renderTarget=c,this.fromSceneAsync(e,t,n,r,s),c}my=this._renderer.getRenderTarget(),gy=this._renderer.getActiveCubeFace(),yy=this._renderer.getActiveMipmapLevel();const u=l||this._allocateTarget();return u.depthBuffer=!0,this._init(u),this._sceneToCubeUV(e,n,r,u,o),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}async fromSceneAsync(e,t=0,n=.1,r=100,s={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,r,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Qw(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=$w(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===Eo||e.mapping===Zo?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(my,gy,yy),e.scissorTest=!1,j9(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),my=this._renderer.getRenderTarget(),gy=this._renderer.getActiveCubeFace(),yy=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTarget();return this._init(n),this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize;return Yw(e,t)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Yw(e.width,e.height);const{_lodMax:t}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=wie(t)),this._blurMaterial=Rie(t,e.width,e.height)}}async _compileMaterial(e){const t=new Jn(this._lodPlanes[0],e);await this._renderer.compile(t,py)}_sceneToCubeUV(e,t,n,r,s){const a=Sie;a.near=t,a.far=n;const o=[1,1,1,1,-1,1],l=[1,-1,1,-1,1,-1],u=this._renderer,c=u.autoClear;u.getClearColor(jw),u.autoClear=!1;let p=this._backgroundBox;if(p===null){const b=new Os({name:"PMREM.Background",side:Fi,depthWrite:!1,depthTest:!1});p=new Jn(new ql,b)}let y=!1;const _=e.background;_?_.isColor&&(p.material.color.copy(_),e.background=null,y=!0):(p.material.color.copy(jw),y=!0),u.setRenderTarget(r),u.clear(),y&&u.render(p,a);for(let b=0;b<6;b++){const w=b%3;w===0?(a.up.set(0,o[b],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x+l[b],s.y,s.z)):w===1?(a.up.set(0,0,o[b]),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y+l[b],s.z)):(a.up.set(0,o[b],0),a.position.set(s.x,s.y,s.z),a.lookAt(s.x,s.y,s.z+l[b]));const E=this._cubeSize;j9(r,w*E,b>2?E:0,E,E),u.render(e,a)}u.autoClear=c,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Eo||e.mapping===Zo;r?this._cubemapMaterial===null&&(this._cubemapMaterial=Qw(e)):this._equirectMaterial===null&&(this._equirectMaterial=$w(e));const s=r?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const a=this._lodMeshes[0];a.material=s;const o=this._cubeSize;j9(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,py)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=Xw[(r-s-1)%Xw.length];this._blur(e,s-1,s,a,o)}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,p=this._lodMeshes[r];p.material=u;const y=GI.get(u),_=this._sizeLods[n]-1,b=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*rc-1),w=s/b,E=isFinite(s)?1+Math.floor(c*w):rc;E>rc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${rc}`);const M=[];let P=0;for(let z=0;z<rc;++z){const q=z/w,F=Math.exp(-q*q/2);M.push(F),z===0?P+=F:z<E&&(P+=2*F)}for(let z=0;z<M.length;z++)M[z]=M[z]/P;e.texture.frame=(e.texture.frame||0)+1,y.envMap.value=e.texture,y.samples.value=E,y.weights.array=M,y.latitudinal.value=a==="latitudinal"?1:0,o&&(y.poleAxis.value=o);const{_lodMax:D}=this;y.dTheta.value=b,y.mipInt.value=D-n;const B=this._sizeLods[r],U=3*B*(r>D-f5?r-D+f5:0),O=4*(this._cubeSize-B);j9(t,U,O,3*B,2*B),l.setRenderTarget(t),l.render(p,py)}}function wie(i){const e=[],t=[],n=[],r=[];let s=i;const a=i-f5+1+Ww.length;for(let o=0;o<a;o++){const l=Math.pow(2,s);t.push(l);let u=1/l;o>i-f5?u=Ww[o-i+f5-1]:o===0&&(u=0),n.push(u);const c=1/(l-2),p=-c,y=1+c,_=[p,p,y,p,y,y,p,p,y,y,p,y],b=6,w=6,E=3,M=2,P=1,D=new Float32Array(E*w*b),B=new Float32Array(M*w*b),U=new Float32Array(P*w*b);for(let z=0;z<b;z++){const q=z%3*2/3-1,F=z>2?0:-1,G=[q,F,0,q+2/3,F,0,q+2/3,F+1,0,q,F,0,q+2/3,F+1,0,q,F+1,0],j=Mie[z];D.set(G,E*w*j),B.set(_,M*w*j);const $=[j,j,j,j,j,j];U.set($,P*w*j)}const O=new Tn;O.setAttribute("position",new li(D,E)),O.setAttribute("uv",new li(B,M)),O.setAttribute("faceIndex",new li(U,P)),e.push(O),r.push(new Jn(O,null)),s>f5&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:r}}function Yw(i,e){const t={magFilter:Qi,minFilter:Qi,generateMipmaps:!1,type:$r,format:nr,colorSpace:Ll},n=new W0(i,e,t);return n.texture.mapping=D1,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function j9(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function mS(i){const e=new Vr;return e.depthTest=!1,e.depthWrite=!1,e.blending=ja,e.name=`PMREM_${i}`,e}function Rie(i,e,t){const n=ra(new Array(rc).fill(0)),r=on(new te(0,1,0)),s=on(0),a=ue(rc),o=on(0),l=on(1),u=si(null),c=on(0),p=ue(1/e),y=ue(1/t),_=ue(i),b={n:a,latitudinal:o,weights:n,poleAxis:r,outputDirection:pS,dTheta:s,samples:l,envMap:u,mipInt:c,CUBEUV_TEXEL_WIDTH:p,CUBEUV_TEXEL_HEIGHT:y,CUBEUV_MAX_MIP:_},w=mS("blur");return w.fragmentNode=zI({...b,latitudinal:o.equal(1)}),GI.set(w,b),w}function Qw(i){const e=mS("cubemap");return e.fragmentNode=X5(i,pS),e}function $w(i){const e=mS("equirect");return e.fragmentNode=si(i,cS(pS),0),e}const Kw=new WeakMap;function Cie(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:t,maxMip:e}}function Nie(i,e,t){const n=Pie(e);let r=n.get(i);if((r!==void 0?r.pmremVersion:-1)!==i.pmremVersion){const a=i.image;if(i.isCubeTexture)if(Bie(a))r=t.fromCubemap(i,r);else return null;else if(Lie(a))r=t.fromEquirectangular(i,r);else return null;r.pmremVersion=i.pmremVersion,n.set(i,r)}return r.texture}function Pie(i){let e=Kw.get(i);return e===void 0&&(e=new WeakMap,Kw.set(i,e)),e}class Die extends zr{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const r=new mr;r.isRenderTargetTexture=!0,this._texture=si(r),this._width=on(0),this._height=on(0),this._maxMip=on(0),this.updateBeforeType=kn.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=Cie(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const n=t?t.pmremVersion:-1,r=this._value;n!==r.pmremVersion&&(r.isPMREMTexture===!0?t=r:t=Nie(r,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new Eie(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this)),t=Jb.mul(be(t.x,t.y.negate(),t.z));let n=this.levelNode;return n===null&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),VI(this._texture,t,n,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function Bie(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function Lie(i){return i==null?!1:i.height>0}const gS=Mn(Die).setParameterLength(1,3),Zw=new WeakMap;class Iie extends o8{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const p=n.isTextureNode?n.value:t[n.property];let y=Zw.get(p);y===void 0&&(y=gS(p),Zw.set(p,y)),n=y}const s=t.useAnisotropy===!0||t.anisotropy>0?RL:Ui,a=n.context(Jw(xl,s)).mul(Pd),o=n.context(Uie(Ku)).mul(Math.PI).mul(Pd),l=h6(a),u=h6(o);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(u);const c=e.context.lightingModel.clearcoatRadiance;if(c){const p=n.context(Jw(k6,pc)).mul(Pd),y=h6(p);c.addAssign(y)}}}const Jw=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=fr.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection(c0)),t),getTextureLevel:()=>i}},Uie=i=>({getUV:()=>i,getTextureLevel:()=>ue(1)}),Oie=new Dp;class qI extends Vr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(Oie),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new Iie(t):null}setupLightingModel(){return new OI}setupSpecular(){const e=xi(be(.04),Mi.rgb,q6);Oa.assign(e),H6.assign(1)}setupVariants(){const e=this.metalnessNode?ue(this.metalnessNode):UL;q6.assign(e);let t=this.roughnessNode?ue(this.roughnessNode):IL;t=fS({roughness:t}),xl.assign(t),this.setupSpecular(),Mi.assign(un(Mi.rgb.mul(e.oneMinus()),Mi.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const Fie=new Sx;class Vie extends qI{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(Fie),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?ue(this.iorNode):$L;c6.assign(e),Oa.assign(xi(Ja(Ib(c6.sub(1).div(c6.add(1))).mul(LL),be(1)).mul(y_),Mi.rgb,q6)),H6.assign(xi(y_,1,q6))}setupLightingModel(){return new OI(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?ue(this.clearcoatNode):FL,n=this.clearcoatRoughnessNode?ue(this.clearcoatRoughnessNode):VL;DA.assign(t),k6.assign(fS({roughness:n}))}if(this.useSheen){const t=this.sheenNode?be(this.sheenNode):qL,n=this.sheenRoughnessNode?ue(this.sheenRoughnessNode):kL;Ac.assign(t),jp.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?ue(this.iridescenceNode):WL,n=this.iridescenceIORNode?ue(this.iridescenceIORNode):jL,r=this.iridescenceThicknessNode?ue(this.iridescenceThicknessNode):XL;Xp.assign(t),_b.assign(n),xb.assign(r)}if(this.useAnisotropy){const t=(this.anisotropyNode?Ze(this.anisotropyNode):HL).toVar();Mu.assign(t.length()),_n(Mu.equal(0),()=>{t.assign(Ze(1,0))}).Else(()=>{t.divAssign(Ze(Mu)),Mu.assign(Mu.saturate())}),BA.assign(Mu.pow2().mix(xl.pow2(),1)),u6.assign(mc[0].mul(t.x).add(mc[1].mul(t.y))),Sc.assign(mc[1].mul(t.x).sub(mc[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?ue(this.transmissionNode):YL,n=this.thicknessNode?ue(this.thicknessNode):QL,r=this.attenuationDistanceNode?ue(this.attenuationDistanceNode):KL,s=this.attenuationColorNode?be(this.attenuationColorNode):ZL;if(IA.assign(t),bb.assign(n),Sb.assign(r),Tb.assign(s),this.useDispersion){const a=this.dispersionNode?ue(this.dispersionNode):rI;Mb.assign(a)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?be(this.clearcoatNormalNode):zL}setup(e){e.context.setupClearcoatNormal=()=>v5(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const zie=Te(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),r=Ze(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=_1("gradientMap","texture").context({getUV:()=>r});return be(s.r)}else{const s=r.fwidth().mul(.5);return xi(be(.7),be(1),Ol(ue(.7).sub(s.x),ue(.7).add(s.x),r.x))}});class Gie extends om{direct({lightDirection:e,lightColor:t,reflectedLight:n},r){const s=zie({normal:tm,lightDirection:e,builder:r}).mul(t);n.directDiffuse.addAssign(s.mul(r3({diffuseColor:Mi.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(r3({diffuseColor:Mi}))),r.indirectDiffuse.mulAssign(t)}}const qie=new Tx;class kie extends Vr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(qie),this.setValues(e)}setupLightingModel(){return new Gie}}const kI=Te(()=>{const i=be(fr.z,0,fr.x.negate()).normalize(),e=fr.cross(i);return Ze(i.dot(Ui),e.dot(Ui)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),Hie=new Rx;class Wie extends Vr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(Hie),this.setValues(e)}setupVariants(e){const t=kI;let n;e.material.matcap?n=_1("matcap","texture").context({getUV:()=>t}):n=be(xi(.2,.8,t.y)),Mi.rgb.mulAssign(n.rgb)}}class jie extends zr{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),a=t.sin();return Wp(s,a,a.negate(),s).mul(n)}else{const s=t,a=bc(un(1,0,0,0),un(0,g1(s.x),To(s.x).negate(),0),un(0,To(s.x),g1(s.x),0),un(0,0,0,1)),o=bc(un(g1(s.y),0,To(s.y),0),un(0,1,0,0),un(To(s.y).negate(),0,g1(s.y),0),un(0,0,0,1)),l=bc(un(g1(s.z),To(s.z).negate(),0,0),un(To(s.z),g1(s.z),0,0),un(0,0,1,0),un(0,0,0,1));return a.mul(o).mul(l).mul(un(n,1)).xyz}}}const w7=Mn(jie).setParameterLength(2),Xie=new vp;class HI extends Vr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(Xie),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,{positionNode:r,rotationNode:s,scaleNode:a,sizeAttenuation:o}=this,l=y3.mul(be(r||0));let u=Ze(Qo[0].xyz.length(),Qo[1].xyz.length());a!==null&&(u=u.mul(Ze(a))),n.isPerspectiveCamera&&o===!1&&(u=u.mul(l.z.negate()));let c=M7.xy;if(t.center&&t.center.isVector2===!0){const _=Yee("center","vec2",t);c=c.sub(_.sub(.5))}c=c.mul(u);const p=ue(s||GL),y=w7(c,p);return un(l.xy.add(y),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const Yie=new o7,Qie=new He;class $ie extends HI{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(Yie),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return y3.mul(be(e||Or)).xyz}setupVertexSprite(e){const{material:t,camera:n}=e,{rotationNode:r,scaleNode:s,sizeNode:a,sizeAttenuation:o}=this;let l=super.setupVertex(e);if(t.isNodeMaterial!==!0)return l;let u=a!==null?Ze(a):iI;u=u.mul(nL),n.isPerspectiveCamera&&o===!0&&(u=u.mul(Kie.div(Fr.z.negate()))),s&&s.isNode&&(u=u.mul(Ze(s)));let c=M7.xy;if(r&&r.isNode){const p=ue(r);c=w7(c,p)}return c=c.mul(u),c=c.div(Qb.div(2)),c=c.mul(l.w),l=l.add(un(c,0,0)),l}setupVertex(e){return e.object.isPoints?super.setupVertex(e):this.setupVertexSprite(e)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}const Kie=on(1).onFrameUpdate(function({renderer:i}){const e=i.getSize(Qie);this.value=.5*e.y});class Zie extends om{constructor(){super(),this.shadowNode=ue(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){Mi.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(Mi.rgb)}}const Jie=new bx;class ere extends Vr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(Jie),this.setValues(e)}setupLightingModel(){return new Zie}}C1("vec3");C1("vec3");C1("vec3");class tre{constructor(e,t){this.nodes=e,this.info=t,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class H0{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let r=0;r<e.length-1;r++){const s=e[r];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let nre=0;function ire(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const r in n)if(n[r]!==void 0){const s=n[r];s&&typeof s.get=="function"&&e.push(r)}t=Object.getPrototypeOf(t)}return e}class rre{constructor(e,t,n,r,s,a,o,l,u,c){this.id=nre++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=r,this.material=s,this.scene=a,this.camera=o,this.lightsNode=l,this.context=u,this.geometry=r.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=c,this.clippingContextCacheKey=c!==null?c.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],r=new Set,s={};for(const a of e){let o;if(a.node&&a.node.attribute?o=a.node.attribute:(o=t.getAttribute(a.name),s[a.name]=o.version),o===void 0)continue;n.push(o);const l=o.isInterleavedBufferAttribute?o.data:o;r.add(l)}return this.attributes=n,this.attributesId=s,this.vertexBuffers=Array.from(r.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:r,drawRange:s}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),o=this.getIndex(),l=o!==null;let u=1;if(n.isInstancedBufferGeometry===!0?u=n.instanceCount:e.count!==void 0&&(u=Math.max(0,e.count)),u===0)return null;if(a.instanceCount=u,e.isBatchedMesh===!0)return a;let c=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(c=2);let p=s.start*c,y=(s.start+s.count)*c;r!==null&&(p=Math.max(p,r.start*c),y=Math.min(y,(r.start+r.count)*c));const _=n.attributes.position;let b=1/0;l?b=o.count:_!=null&&(b=_.count),p=Math.max(p,0),y=Math.min(y,b);const w=y-p;return w<0||w===1/0?null:(a.vertexCount=w,a.firstVertex=p,a)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const r=e.attributes[n];t+=n+",",r.data&&(t+=r.data.stride+","),r.offset&&(t+=r.offset+","),r.itemSize&&(t+=r.itemSize+","),r.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const r=e.morphAttributes[n];t+="morph-"+n+",";for(let s=0,a=r.length;s<a;s++){const o=r[s];t+=o.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t,renderer:n}=this;let r=t.customProgramCacheKey();for(const s of ire(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(s))continue;const a=t[s];let o;if(a!==null){const l=typeof a;l==="number"?o=a!==0?"1":"0":l==="object"?(o="{",a.isTexture&&(o+=a.mapping,n.backend.isWebGPUBackend===!0&&(o+=a.magFilter,o+=a.minFilter,o+=a.wrapS,o+=a.wrapT,o+=a.wrapR)),o+="}"):o=String(a)}else o=String(a);r+=o+","}return r+=this.clippingContextCacheKey+",",e.geometry&&(r+=this.getGeometryCacheKey()),e.skeleton&&(r+=e.skeleton.bones.length+","),e.isBatchedMesh&&(r+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(r+=e._colorsTexture.uuid+",")),(e.isInstancedMesh||e.count>1)&&(r+=e.uuid+","),r+=e.receiveShadow+",",hD(r)}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(this.attributes!==null){const e=this.attributesId;for(const t in e){const n=this.geometry.getAttribute(t);if(n===void 0||e[t]!==n.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=CA(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=CA(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}const H2=[];class sre{constructor(e,t,n,r,s,a){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=r,this.bindings=s,this.info=a,this.chainMaps={}}get(e,t,n,r,s,a,o,l){const u=this.getChainMap(l);H2[0]=e,H2[1]=t,H2[2]=a,H2[3]=s;let c=u.get(H2);return c===void 0?(c=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,s,a,o,l),u.set(H2,c)):(c.updateClipping(o),c.needsGeometryUpdate&&c.setGeometry(e.geometry),(c.version!==t.version||c.needsUpdate)&&(c.initialCacheKey!==c.getCacheKey()?(c.dispose(),c=this.get(e,t,n,r,s,a,o,l)):c.version=t.version)),H2.length=0,c}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new H0)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,r,s,a,o,l,u,c,p){const y=this.getChainMap(p),_=new rre(e,t,n,r,s,a,o,l,u,c);return _.onDispose=()=>{this.pipelines.delete(_),this.bindings.delete(_),this.nodes.delete(_),y.delete(_.getChainArray())},_}}class Zu{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const $o={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Cu=16,are=211,ore=212;class lre extends Zu{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===$o.VERTEX?this.backend.createAttribute(e):t===$o.INDEX?this.backend.createIndexAttribute(e):t===$o.STORAGE?this.backend.createStorageAttribute(e):t===$o.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const r=this._getBufferAttribute(e);(n.version<r.version||r.usage===uc)&&(this.backend.updateAttribute(e),n.version=r.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function WI(i){return i.index!==null?i.index.version:i.attributes.position.version}function eR(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const s=t.array;for(let a=0,o=s.length;a<o;a+=3){const l=s[a+0],u=s[a+1],c=s[a+2];e.push(l,u,u,c,c,l)}}else{const s=n.array;for(let a=0,o=s.length/3-1;a<o;a+=3){const l=a+0,u=a+1,c=a+2;e.push(l,u,u,c,c,l)}}const r=new(sx(e)?mp:pp)(e,1);return r.version=WI(i),r}class ure extends Zu{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const r=()=>{this.info.memory.geometries--;const s=t.index,a=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of a)this.attributes.delete(l);const o=this.wireframes.get(t);o!==void 0&&this.attributes.delete(o),t.removeEventListener("dispose",r)};t.addEventListener("dispose",r)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,$o.STORAGE):this.updateAttribute(s,$o.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,$o.INDEX);const r=e.geometry.indirect;r!==null&&this.updateAttribute(r,$o.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let r=t.index;if(n.wireframe===!0){const s=this.wireframes;let a=s.get(t);a===void 0?(a=eR(t),s.set(t,a)):a.version!==WI(t)&&(this.attributes.delete(a),a=eR(t),s.set(t,a)),r=a}return r}}class cre{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class jI{constructor(e){this.cacheKey=e,this.usedTimes=0}}class hre extends jI{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class fre extends jI{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let dre=0;class _y{constructor(e,t,n,r=null,s=null){this.id=dre++,this.code=e,this.stage=t,this.name=n,this.transforms=r,this.attributes=s,this.usedTimes=0}}class Are extends Zu{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,r=this.get(e);if(this._needsComputeUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const a=this.nodes.getForCompute(e);let o=this.programs.compute.get(a.computeShader);o===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),o=new _y(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,o),n.createProgram(o));const l=this._getComputeCacheKey(e,o);let u=this.caches.get(l);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,o,l,t)),u.usedTimes++,o.usedTimes++,r.version=e.version,r.pipeline=u}return r.pipeline}getForRender(e,t=null){const{backend:n}=this,r=this.get(e);if(this._needsRenderUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const a=e.getNodeBuilderState(),o=e.material?e.material.name:"";let l=this.programs.vertex.get(a.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new _y(a.vertexShader,"vertex",o),this.programs.vertex.set(a.vertexShader,l),n.createProgram(l));let u=this.programs.fragment.get(a.fragmentShader);u===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),u=new _y(a.fragmentShader,"fragment",o),this.programs.fragment.set(a.fragmentShader,u),n.createProgram(u));const c=this._getRenderCacheKey(e,l,u);let p=this.caches.get(c);p===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),p=this._getRenderPipeline(e,l,u,c,t)):e.pipeline=p,p.usedTimes++,l.usedTimes++,u.usedTimes++,r.pipeline=p}return r.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,r){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new fre(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,r)),s}_getRenderPipeline(e,t,n,r,s){r=r||this._getRenderCacheKey(e,t,n);let a=this.caches.get(r);return a===void 0&&(a=new hre(r,t,n),this.caches.set(r,a),e.pipeline=a,this.backend.createRenderPipeline(e,s)),a}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class pre extends Zu{constructor(e,t,n,r,s,a){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=r,this.nodes=t,this.info=a,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,r=n.isIndirectStorageBufferAttribute?$o.INDIRECT:$o.STORAGE;this.attributes.update(n,r)}}_update(e,t){const{backend:n}=this;let r=!1,s=!0,a=0,o=0;for(const l of e.bindings)if(!(l.isNodeUniformsGroup&&this.nodes.updateGroup(l)===!1)){if(l.isStorageBuffer){const u=l.attribute,c=u.isIndirectStorageBufferAttribute?$o.INDIRECT:$o.STORAGE;this.attributes.update(u,c)}if(l.isUniformBuffer)l.update()&&n.updateBinding(l);else if(l.isSampledTexture){const u=l.update(),c=l.texture,p=this.textures.get(c);if(u&&(this.textures.updateTexture(c),l.generation!==p.generation&&(l.generation=p.generation,r=!0,s=!1)),n.get(c).externalTexture!==void 0||p.isDefaultTexture?s=!1:(a=a*10+c.id,o+=c.version),c.isStorageTexture===!0){const _=this.get(c);l.store===!0?_.needsMipmap=!0:this.textures.needsMipmaps(c)&&_.needsMipmap===!0&&(this.backend.generateMipmaps(c),_.needsMipmap=!1)}}else l.isSampler&&l.update()}r===!0&&this.backend.updateBindings(e,t,s?a:0,o)}}function mre(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?i.z-e.z:i.id-e.id}function tR(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function nR(i){return(i.transmission>0||i.transmissionNode)&&i.side===Ur&&i.forceSinglePass===!1}class gre{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,r,s,a,o){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:s,group:a,clippingContext:o},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.groupOrder=r,l.renderOrder=e.renderOrder,l.z=s,l.group=a,l.clippingContext=o),this.renderItemsIndex++,l}push(e,t,n,r,s,a,o){const l=this.getNextRenderItem(e,t,n,r,s,a,o);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(nR(n)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,t,n,r,s,a,o){const l=this.getNextRenderItem(e,t,n,r,s,a,o);n.transparent===!0||n.transmission>0?(nR(n)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||mre),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||tR),this.transparent.length>1&&this.transparent.sort(t||tR)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const wh=[];class yre{constructor(e){this.lighting=e,this.lists=new H0}get(e,t){const n=this.lists;wh[0]=e,wh[1]=t;let r=n.get(wh);return r===void 0&&(r=new gre(this.lighting,e,t),n.set(wh,r)),wh.length=0,r}dispose(){this.lists=new H0}}let vre=0;class _re{constructor(){this.id=vre++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new an,this.scissor=!1,this.scissorValue=new an,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return XI(this)}}function XI(i){const{textures:e,activeCubeFace:t,activeMipmapLevel:n}=i,r=[t,n];for(const s of e)r.push(s.id);return Vp(r)}const Rh=[],xre=new h3,bre=new c3;class Sre{constructor(){this.chainMaps={}}get(e,t,n=null){Rh[0]=e,Rh[1]=t;let r;if(n===null)r="default";else{const o=n.texture.format;r=`${n.textures.length}:${o}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(r);let a=s.get(Rh);return a===void 0&&(a=new _re,s.set(Rh,a)),Rh.length=0,n!==null&&(a.sampleCount=n.samples===0?1:n.samples),a}getForClear(e=null){return this.get(xre,bre,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new H0)}dispose(){this.chainMaps={}}}const Tre=new te;class Mre extends Zu{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),r=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),a=e.textures,o=this.getSize(a[0]),l=o.width>>t,u=o.height>>t;let c=e.depthTexture||s[t];const p=e.depthBuffer===!0||e.stencilBuffer===!0;let y=!1;c===void 0&&p&&(c=new Ka,c.format=e.stencilBuffer?Qa:Ya,c.type=e.stencilBuffer?Xa:zi,c.image.width=l,c.image.height=u,c.image.depth=o.depth,c.isArrayTexture=e.multiview===!0&&o.depth>1,s[t]=c),(n.width!==o.width||o.height!==n.height)&&(y=!0,c&&(c.needsUpdate=!0,c.image.width=l,c.image.height=u,c.image.depth=c.isArrayTexture?c.image.depth:1)),n.width=o.width,n.height=o.height,n.textures=a,n.depthTexture=c||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==r&&(y=!0,c&&(c.needsUpdate=!0),n.sampleCount=r);const _={sampleCount:r};if(e.isXRRenderTarget!==!0){for(let b=0;b<a.length;b++){const w=a[b];y&&(w.needsUpdate=!0),this.updateTexture(w,_)}c&&this.updateTexture(c,_)}if(n.initialized!==!0){n.initialized=!0;const b=()=>{e.removeEventListener("dispose",b);for(let w=0;w<a.length;w++)this._destroyTexture(a[w]);c&&this._destroyTexture(c),this.delete(e),this.backend.delete(e)};e.addEventListener("dispose",b)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const r=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(r&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=Ar}const{width:a,height:o,depth:l}=this.getSize(e);if(t.width=a,t.height=o,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,a,o):1,e.isCubeTexture&&e.mipmaps.length>0&&t.levels++,r||e.isStorageTexture===!0||e.isExternalTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const c=e.image;if(c===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(c.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const p=[];for(const y of e.images)p.push(y);t.images=p}else t.image=c;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e),e.onUpdate&&e.onUpdate(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++,e.isVideoTexture&&gn.getTransfer(e.colorSpace)!==Ht&&console.warn("WebGPURenderer: Video textures must use a color space with a sRGB transfer function, e.g. SRGBColorSpace.");const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e)};e.addEventListener("dispose",u)}n.version=e.version}getSize(e,t=Tre){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?(t.width=n.videoWidth||1,t.height=n.videoHeight||1,t.depth=1):n instanceof VideoFrame?(t.width=n.displayWidth||1,t.height=n.displayHeight||1,t.depth=1):(t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1)):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let r;return e.mipmaps.length>0?r=e.mipmaps.length:e.isCompressedTexture===!0?r=1:r=Math.floor(Math.log2(Math.max(t,n)))+1,r}needsMipmaps(e){return e.generateMipmaps===!0||e.mipmaps.length>0}_destroyTexture(e){this.has(e)===!0&&(this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e),this.info.memory.textures--)}}class yS extends Dt{constructor(e,t,n,r=1){super(e,t,n),this.a=r}set(e,t,n,r=1){return this.a=r,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class YI extends Di{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const Ere=(i,e)=>$e(new YI(i,e));class wre extends jt{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getNodeType(e){return this.hasOutput?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.hasOutput?this.outputNode.getMemberType(e,t):"void"}add(e){return e.isNode!==!0?(console.error("THREE.TSL: Invalid node added to stack."),this):(this.nodes.push(e),this)}If(e,t){const n=new h5(t);return this._currentCond=xs(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new h5(t),r=xs(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new h5(e),this}Switch(e){return this._expressionNode=$e(e),this}Case(...e){const t=[];if(e.length>=2)for(let o=0;o<e.length-1;o++)t.push(this._expressionNode.equal($e(e[o])));else console.error("THREE.TSL: Invalid parameter length. Case() requires at least two parameters.");const n=e[e.length-1],r=new h5(n);let s=t[0];for(let o=1;o<t.length;o++)s=s.or(t[o]);const a=xs(s,r);return this._currentCond===null?(this._currentCond=a,this.add(this._currentCond)):(this._currentCond.elseNode=a,this._currentCond=a,this)}Default(e){return this.Else(e),this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())r.isVarNode&&r.intent===!0&&e.getNodeProperties(r).assign!==!0||(t["node"+n++]=r);return t.outputNode||null}get hasOutput(){return this.outputNode&&this.outputNode.isNode}build(e,...t){const n=e.currentStack,r=kp();z6(this),e.currentStack=this;const s=e.buildStage;for(const o of this.nodes)if(!(o.isVarNode&&o.intent===!0&&e.getNodeProperties(o).assign!==!0)){if(s==="setup")o.build(e);else if(s==="analyze")o.build(e,this);else if(s==="generate"){const l=e.getDataFromNode(o,"any").stages,u=l&&l[e.shaderStage];if(o.isVarNode&&u&&u.length===1&&u[0]&&u[0].isStackNode)continue;o.build(e,"void")}}let a;return this.hasOutput?a=this.outputNode.build(e,...t):a=super.build(e,...t),z6(r),e.currentStack=n,a}}const Bd=Mn(wre).setParameterLength(0,1);function Rre(i){return Object.entries(i).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class Cre extends jt{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=Rre(e),this.name=t,this.isStructLayoutNode=!0}getLength(){const t=Float32Array.BYTES_PER_ELEMENT;let n=0;for(const r of this.membersLayout){const s=r.type,a=see(s)*t,o=aee(s),l=n%8,u=l%o,c=l+u;n+=u,c!==0&&8-c<a&&(n+=8-c),n+=a}return Math.ceil(n/8)*8/t}getMemberType(e,t){const n=this.membersLayout.find(r=>r.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.getStructTypeFromNode(this,this.membersLayout,this.name),e.addInclude(this)}generate(e){return this.getNodeType(e)}}class Nre extends jt{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structTypeNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structTypeNode.getNodeType(e)}getMemberType(e,t){return this.structTypeNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,r=e.getPropertyName(t);return e.addLineFlowCode(`${r} = ${e.generateStruct(n,this.structTypeNode.membersLayout,this.values)}`,this),t.name}}const Pre=(i,e=null)=>{const t=new Cre(i,e),n=(...r)=>{let s=null;if(r.length>0)if(r[0].isNode){s={};const a=Object.keys(i);for(let o=0;o<r.length;o++)s[a[o]]=r[o]}else s=r[0];return $e(new Nre(t,s))};return n.layout=t,n.isStruct=!0,n};class QI extends jt{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,r=[];for(let s=0;s<n.length;s++){const a="m"+s,o=n[s].getNodeType(e);r.push({name:a,type:o,index:s})}t.membersLayout=r,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,r=t!==""?t+".":"";for(let s=0;s<n.length;s++){const a=n[s].build(e);e.addLineFlowCode(`${r}m${s} = ${a}`,this)}return t}}const Dre=Mn(QI);function $I(i,e){for(let t=0;t<i.length;t++)if(i[t].name===e)return t;return-1}class Bre extends QI{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return KI(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),r=[],s=n.textures;for(const a in t){const o=$I(s,a);r[o]=un(t[a])}return this.members=r,super.setup(e)}}const KI=Mn(Bre);class R7 extends zr{static get type(){return"BitcastNode"}constructor(e,t,n=null){super(),this.valueNode=e,this.conversionType=t,this.inputType=n,this.isBitcastNode=!0}getNodeType(e){if(this.inputType!==null){const t=this.valueNode.getNodeType(e),n=e.getTypeLength(t);return e.getTypeFromLength(n,this.conversionType)}return this.conversionType}generate(e){const t=this.getNodeType(e);let n="";if(this.inputType!==null){const r=this.valueNode.getNodeType(e);n=e.getTypeLength(r)===1?this.inputType:e.changeComponentType(r,this.inputType)}else n=this.valueNode.getNodeType(e);return`${e.getBitcastMethod(t,n)}( ${this.valueNode.build(e,n)} )`}}const Lre=Et(R7).setParameterLength(2),Ire=i=>new R7(i,"int","float"),Ure=i=>new R7(i,"uint","float"),Ore=i=>new R7(i,"float","int"),Fre=i=>new R7(i,"float","uint"),Vre=Te(([i])=>{const e=i.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),T_=(i,e)=>Yo(Pn(4,i.mul(oi(1,i))),e),zre=(i,e)=>i.lessThan(.5)?T_(i.mul(2),e).div(2):oi(1,T_(Pn(oi(1,i),2),e).div(2)),Gre=(i,e,t)=>Yo(Co(Yo(i,e),kr(Yo(i,e),Yo(oi(1,i),t))),1/e),qre=(i,e)=>To(UA.mul(e.mul(i).sub(1))).div(UA.mul(e.mul(i).sub(1))),y1=Te(([i])=>i.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),kre=Te(([i])=>be(y1(i.z.add(y1(i.y.mul(1)))),y1(i.z.add(y1(i.x.mul(1)))),y1(i.y.add(y1(i.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),Hre=Te(([i,e,t])=>{const n=be(i).toVar(),r=ue(1.4).toVar(),s=ue(0).toVar(),a=be(n).toVar();return Oi({start:ue(0),end:ue(3),type:"float",condition:"<="},()=>{const o=be(kre(a.mul(2))).toVar();n.addAssign(o.add(t.mul(ue(.1).mul(e)))),a.mulAssign(1.8),r.mulAssign(1.5),n.mulAssign(1.2);const l=ue(y1(n.z.add(y1(n.x.add(y1(n.y)))))).toVar();s.addAssign(l.div(r)),a.addAssign(.14)}),s}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class Wre extends jt{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let r=null,s=-1;for(const a of this.functionNodes){const l=a.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const u=l.inputs;if(t.length===u.length){let c=0;for(let p=0;p<t.length;p++){const y=t[p],_=u[p];y.getNodeType(e)===_.type?c++:c=0}c>s&&(r=a,s=c)}}this._candidateFnCall=n=r(...t)}return n}}const jre=Mn(Wre),Ws=i=>(...e)=>jre(i,...e),l8=on(0).setGroup(rn).onRenderUpdate(i=>i.time),Xre=on(0).setGroup(rn).onRenderUpdate(i=>i.deltaTime),ZI=on(0,"uint").setGroup(rn).onRenderUpdate(i=>i.frameId),Yre=(i=l8)=>i.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),Qre=(i=l8)=>i.fract().round(),$re=(i=l8)=>i.add(.5).fract().mul(2).sub(1).abs(),Kre=(i=l8)=>i.fract(),Zre=Te(([i,e,t=Ze(.5)])=>w7(i.sub(t),e).add(t)),Jre=Te(([i,e,t=Ze(.5)])=>{const n=i.sub(t),r=n.dot(n),a=r.mul(r).mul(e);return i.add(n.mul(a))}),ese=Te(({position:i=null,horizontal:e=!0,vertical:t=!1})=>{let n;i!==null?(n=Qo.toVar(),n[3][0]=i.x,n[3][1]=i.y,n[3][2]=i.z):n=Qo;const r=c0.mul(n);return V6(e)&&(r[0][0]=Qo[0].length(),r[0][1]=0,r[0][2]=0),V6(t)&&(r[1][0]=0,r[1][1]=Qo[1].length(),r[1][2]=0),r[2][0]=0,r[2][1]=0,r[2][2]=1,s8.mul(r).mul(Or)}),tse=Te(([i=null])=>{const e=VA();return VA(aS(i)).sub(e).lessThan(0).select(N1,i)});class nse extends jt{static get type(){return"SpriteSheetUVNode"}constructor(e,t=qi(),n=ue(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:r,height:s}=n,a=e.mod(r.mul(s)).floor(),o=a.mod(r),l=s.sub(a.add(1).div(r).ceil()),u=n.reciprocal(),c=Ze(o,l);return t.add(c).mul(u)}}const ise=Mn(nse).setParameterLength(3),JI=Te(([i,e=null,t=null,n=ue(1),r=Or,s=eo])=>{let a=s.abs().normalize();a=a.div(a.dot(be(1)));const o=r.yz.mul(n),l=r.zx.mul(n),u=r.xy.mul(n),c=i.value,p=e!==null?e.value:c,y=t!==null?t.value:c,_=si(c,o).mul(a.x),b=si(p,l).mul(a.y),w=si(y,u).mul(a.z);return kr(_,b,w)}),rse=(...i)=>JI(...i),H4=new I0,W2=new te,W4=new te,xy=new te,Ch=new $t,X9=new te(0,0,-1),dl=new an,Nh=new te,Y9=new te,Ph=new an,Q9=new He,zA=new W0,sse=N1.flipX();zA.depthTexture=new Ka(1,1);let $9=!1;class vS extends Fl{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||zA.texture,sse),this._reflectorBaseNode=e.reflector||new ase(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=$e(new vS({defaultTexture:zA.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e._reflectorBaseNode=this._reflectorBaseNode,e}dispose(){super.dispose(),this._reflectorBaseNode.dispose()}}class ase extends jt{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new yi,resolutionScale:r=1,generateMipmaps:s=!1,bounces:a=!0,depth:o=!1,samples:l=0}=t;this.textureNode=e,this.target=n,this.resolutionScale=r,t.resolution!==void 0&&(la('THREE.ReflectorNode: The "resolution" parameter has been renamed to "resolutionScale".'),this.resolutionScale=t.resolution),this.generateMipmaps=s,this.bounces=a,this.depth=o,this.samples=l,this.updateBeforeType=a?kn.RENDER:kn.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new Map,this.forceUpdate=!1,this.hasOutput=!1}_updateResolution(e,t){const n=this.resolutionScale;t.getDrawingBufferSize(Q9),e.setSize(Math.round(Q9.width*n),Math.round(Q9.height*n))}setup(e){return this._updateResolution(zA,e.renderer),super.setup(e)}dispose(){super.dispose();for(const e of this.renderTargets.values())e.dispose()}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new W0(0,0,{type:$r,samples:this.samples}),this.generateMipmaps===!0&&(t.texture.minFilter=PC,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new Ka),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&$9)return!1;$9=!0;const{scene:t,camera:n,renderer:r,material:s}=e,{target:a}=this,o=this.getVirtualCamera(n),l=this.getRenderTarget(o);r.getDrawingBufferSize(Q9),this._updateResolution(l,r),W4.setFromMatrixPosition(a.matrixWorld),xy.setFromMatrixPosition(n.matrixWorld),Ch.extractRotation(a.matrixWorld),W2.set(0,0,1),W2.applyMatrix4(Ch),Nh.subVectors(W4,xy);const u=Nh.dot(W2)>0;let c=!1;if(u===!0&&this.forceUpdate===!1){if(this.hasOutput===!1){$9=!1;return}c=!0}Nh.reflect(W2).negate(),Nh.add(W4),Ch.extractRotation(n.matrixWorld),X9.set(0,0,-1),X9.applyMatrix4(Ch),X9.add(xy),Y9.subVectors(W4,X9),Y9.reflect(W2).negate(),Y9.add(W4),o.coordinateSystem=n.coordinateSystem,o.position.copy(Nh),o.up.set(0,1,0),o.up.applyMatrix4(Ch),o.up.reflect(W2),o.lookAt(Y9),o.near=n.near,o.far=n.far,o.updateMatrixWorld(),o.projectionMatrix.copy(n.projectionMatrix),H4.setFromNormalAndCoplanarPoint(W2,W4),H4.applyMatrix4(o.matrixWorldInverse),dl.set(H4.normal.x,H4.normal.y,H4.normal.z,H4.constant);const p=o.projectionMatrix;Ph.x=(Math.sign(dl.x)+p.elements[8])/p.elements[0],Ph.y=(Math.sign(dl.y)+p.elements[9])/p.elements[5],Ph.z=-1,Ph.w=(1+p.elements[10])/p.elements[14],dl.multiplyScalar(1/dl.dot(Ph));const y=0;p.elements[2]=dl.x,p.elements[6]=dl.y,p.elements[10]=r.coordinateSystem===Jo?dl.z-y:dl.z+1-y,p.elements[14]=dl.w,this.textureNode.value=l.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=l.depthTexture),s.visible=!1;const _=r.getRenderTarget(),b=r.getMRT(),w=r.autoClear;r.setMRT(null),r.setRenderTarget(l),r.autoClear=!0,c?(r.clear(),this.hasOutput=!1):(r.render(t,o),this.hasOutput=!0),r.setMRT(b),r.setRenderTarget(_),r.autoClear=w,s.visible=!0,$9=!1,this.forceUpdate=!1}get resolution(){return la('THREE.ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale}set resolution(e){la('THREE.ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale=e}}const ose=i=>$e(new vS(i)),by=new Ml(-1,1,1,-1,0,1);class lse extends Tn{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Yt([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Yt(t,2))}}const use=new lse;class um extends Jn{constructor(e=null){super(use,e),this.camera=by,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,by)}render(e){e.render(this,by)}}const cse=new He;class hse extends Fl{static get type(){return"RTTNode"}constructor(e,t=null,n=null,r={type:$r}){const s=new W0(t,n,r);super(s.texture,qi()),this.isRTTNode=!0,this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=s,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new um(new Vr),this.updateBeforeType=kn.RENDER}get autoResize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,r=t*this.pixelRatio;this.renderTarget.setSize(n,r),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoResize===!0){const n=e.getPixelRatio(),r=e.getSize(cse),s=r.width*n,a=r.height*n;(s!==this.renderTarget.width||a!==this.renderTarget.height)&&(this.renderTarget.setSize(s,a),this.textureNeedsUpdate=!0)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new Fl(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const eU=(i,...e)=>$e(new hse($e(i),...e)),fse=(i,...e)=>i.isSampleNode||i.isTextureNode?i:i.isPassNode?i.getTextureNode():eU(i,...e),r5=Te(([i,e,t],n)=>{let r;n.renderer.coordinateSystem===Jo?(i=Ze(i.x,i.y.oneMinus()).mul(2).sub(1),r=un(be(i,e),1)):r=un(be(i.x,i.y.oneMinus(),e).mul(2).sub(1),1);const s=un(t.mul(r));return s.xyz.div(s.w)}),dse=Te(([i,e])=>{const t=e.mul(un(i,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return Ze(n.x,n.y.oneMinus())}),Ase=Te(([i,e,t])=>{const n=Uu(Br(e)),r=is(i.mul(n)).toVar(),s=Br(e,r).toVar(),a=Br(e,r.sub(is(2,0))).toVar(),o=Br(e,r.sub(is(1,0))).toVar(),l=Br(e,r.add(is(1,0))).toVar(),u=Br(e,r.add(is(2,0))).toVar(),c=Br(e,r.add(is(0,2))).toVar(),p=Br(e,r.add(is(0,1))).toVar(),y=Br(e,r.sub(is(0,1))).toVar(),_=Br(e,r.sub(is(0,2))).toVar(),b=tr(oi(ue(2).mul(o).sub(a),s)).toVar(),w=tr(oi(ue(2).mul(l).sub(u),s)).toVar(),E=tr(oi(ue(2).mul(p).sub(c),s)).toVar(),M=tr(oi(ue(2).mul(y).sub(_),s)).toVar(),P=r5(i,s,t).toVar(),D=b.lessThan(w).select(P.sub(r5(i.sub(Ze(ue(1).div(n.x),0)),o,t)),P.negate().add(r5(i.add(Ze(ue(1).div(n.x),0)),l,t))),B=E.lessThan(M).select(P.sub(r5(i.add(Ze(0,ue(1).div(n.y))),p,t)),P.negate().add(r5(i.sub(Ze(0,ue(1).div(n.y))),y,t)));return G1(Jp(D,B))});class pse extends jt{static get type(){return"SampleNode"}constructor(e,t=null){super(),this.callback=e,this.uvNode=t,this.isSampleNode=!0}setup(){return this.sample(qi())}sample(e){return this.callback(e)}}const mse=(i,e=null)=>$e(new pse(i,$e(e)));class qu extends jt{static get type(){return"EventNode"}constructor(e,t){super("void"),this.eventType=e,this.callback=t,e===qu.OBJECT?this.updateType=kn.OBJECT:e===qu.MATERIAL&&(this.updateType=kn.RENDER)}update(e){this.callback(e)}}qu.OBJECT="object";qu.MATERIAL="material";const tU=(i,e)=>$e(new qu(i,e)).toStack(),gse=i=>tU(qu.OBJECT,i),yse=i=>tU(qu.MATERIAL,i);class Ld extends $a{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageInstancedBufferAttribute=!0}}class vse extends li{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageBufferAttribute=!0}}const _se=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=PA("float")):(t=AD(e),n=PA(e));const r=new vse(i,t,n);return Tc(r,e,i)},xse=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=PA("float")):(t=AD(e),n=PA(e));const r=new Ld(i,t,n);return Tc(r,e,i)};class bse extends jt{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const Sse=Nt(bse),Dh=new bs,Sy=new $t;class Ha extends jt{static get type(){return"SceneNode"}constructor(e=Ha.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let r;return t===Ha.BACKGROUND_BLURRINESS?r=ji("backgroundBlurriness","float",n):t===Ha.BACKGROUND_INTENSITY?r=ji("backgroundIntensity","float",n):t===Ha.BACKGROUND_ROTATION?r=on("mat4").setName("backgroundRotation").setGroup(rn).onRenderUpdate(()=>{const s=n.background;return s!==null&&s.isTexture&&s.mapping!==$6?(Dh.copy(n.backgroundRotation),Dh.x*=-1,Dh.y*=-1,Dh.z*=-1,Sy.makeRotationFromEuler(Dh)):Sy.identity(),Sy}):console.error("THREE.SceneNode: Unknown scope:",t),r}}Ha.BACKGROUND_BLURRINESS="backgroundBlurriness";Ha.BACKGROUND_INTENSITY="backgroundIntensity";Ha.BACKGROUND_ROTATION="backgroundRotation";const nU=Nt(Ha,Ha.BACKGROUND_BLURRINESS),M_=Nt(Ha,Ha.BACKGROUND_INTENSITY),iU=Nt(Ha,Ha.BACKGROUND_ROTATION);class Tse extends Fl{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=zs.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);return t.storeNode=this.storeNode,t}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(zs.READ_WRITE)}toReadOnly(){return this.setAccess(zs.READ_ONLY)}toWriteOnly(){return this.setAccess(zs.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:r,depthNode:s}=t,a=super.generate(e,"property"),o=n.build(e,this.value.is3DTexture===!0?"uvec3":"uvec2"),l=r.build(e,"vec4"),u=s?s.build(e,"int"):null,c=e.generateTextureStore(e,a,o,u,l);e.addLineFlowCode(c,this)}clone(){const e=super.clone();return e.storeNode=this.storeNode,e}}const rU=Mn(Tse).setParameterLength(1,3),Mse=(i,e,t)=>{const n=rU(i,e,t);return t!==null&&n.toStack(),n},Ese=Te(({texture:i,uv:e})=>{const n=be().toVar();return _n(e.x.lessThan(1e-4),()=>{n.assign(be(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(be(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(be(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(be(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(be(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(be(0,0,-1))}).Else(()=>{const s=i.sample(e.add(be(-.01,0,0))).r.sub(i.sample(e.add(be(.01,0,0))).r),a=i.sample(e.add(be(0,-.01,0))).r.sub(i.sample(e.add(be(0,.01,0))).r),o=i.sample(e.add(be(0,0,-.01))).r.sub(i.sample(e.add(be(0,0,.01))).r);n.assign(be(s,a,o))}),n.normalize()});class wse extends Fl{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return be(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(me(Uu(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}generateOffset(e,t){return t.build(e,"ivec3")}normal(e){return Ese({texture:this,uv:e})}}const sU=Mn(wse).setParameterLength(1,3);class Rse extends nm{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const Cse=(i,e,t)=>$e(new Rse(i,e,t)),iR=new WeakMap;class Nse extends zr{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=kn.OBJECT,this.updateAfterType=kn.OBJECT,this.previousModelWorldMatrix=on(new $t),this.previousProjectionMatrix=on(new $t).setGroup(rn),this.previousCameraViewMatrix=on(new $t)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const r=rR(n);this.previousModelWorldMatrix.value.copy(r);const s=aU(t);s.frameId!==e&&(s.frameId=e,s.previousProjectionMatrix===void 0?(s.previousProjectionMatrix=new $t,s.previousCameraViewMatrix=new $t,s.currentProjectionMatrix=new $t,s.currentCameraViewMatrix=new $t,s.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(s.previousProjectionMatrix.copy(s.currentProjectionMatrix),s.previousCameraViewMatrix.copy(s.currentCameraViewMatrix)),s.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(s.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(s.previousCameraViewMatrix))}updateAfter({object:e}){rR(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?s8:on(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(y3).mul(Or),r=this.previousProjectionMatrix.mul(t).mul(FA),s=n.xy.div(n.w),a=r.xy.div(r.w);return oi(s,a)}}function aU(i){let e=iR.get(i);return e===void 0&&(e={},iR.set(i,e)),e}function rR(i,e=0){const t=aU(i);let n=t[e];return n===void 0&&(t[e]=n=new $t,t[e].copy(i.matrixWorld)),n}const Pse=Nt(Nse),Dse=Te(([i])=>_S(i.rgb)),Bse=Te(([i,e=ue(1)])=>e.mix(_S(i.rgb),i.rgb)),Lse=Te(([i,e=ue(1)])=>{const t=kr(i.r,i.g,i.b).div(3),n=i.r.max(i.g.max(i.b)),r=n.sub(t).mul(e).mul(-3);return xi(i.rgb,n,r)}),Ise=Te(([i,e=ue(1)])=>{const t=be(.57735,.57735,.57735),n=e.cos();return be(i.rgb.mul(n).add(t.cross(i.rgb).mul(e.sin()).add(t.mul(Qu(t,i.rgb).mul(n.oneMinus())))))}),_S=(i,e=be(gn.getLuminanceCoefficients(new te)))=>Qu(i,e),Use=Te(([i,e=be(1),t=be(0),n=be(1),r=ue(1),s=be(gn.getLuminanceCoefficients(new te,Ll))])=>{const a=i.rgb.dot(be(s)),o=Mr(i.rgb.mul(e).add(t),0).toVar(),l=o.pow(n).toVar();return _n(o.r.greaterThan(0),()=>{o.r.assign(l.r)}),_n(o.g.greaterThan(0),()=>{o.g.assign(l.g)}),_n(o.b.greaterThan(0),()=>{o.b.assign(l.b)}),o.assign(a.add(o.sub(a).mul(r))),un(o.rgb,i.a)});class Ose extends zr{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const Fse=Mn(Ose).setParameterLength(2),K9=new He;class oU extends Fl{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class sR extends oU{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){const e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e}}class Vl extends zr{static get type(){return"PassNode"}constructor(e,t,n,r={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=r,this._pixelRatio=1,this._width=1,this._height=1;const s=new Ka;s.isRenderTargetTexture=!0,s.name="depth";const a=new W0(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:$r,...r});a.texture.name="output",a.depthTexture=s,this.renderTarget=a,this._textures={output:a.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=on(0),this._cameraFar=on(0),this._mrt=null,this._layers=null,this._resolution=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=kn.FRAME,this.global=!0}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=$e(new sR(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=$e(new sR(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=oS(this.getTextureNode(e),n,r)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=_5(s,n,r)}return t}async compileAsync(e){const t=e.getRenderTarget(),n=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(t),e.setMRT(n)}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,this.renderTarget.texture.type=e.getColorBufferType(),this.scope===Vl.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let r,s;const a=t.getOutputRenderTarget();a&&a.isXRRenderTarget===!0?(s=1,r=t.xr.getCamera(),t.xr.updateCamera(r),K9.set(a.width,a.height)):(r=this.camera,s=t.getPixelRatio(),t.getSize(K9)),this._pixelRatio=s,this.setSize(K9.width,K9.height);const o=t.getRenderTarget(),l=t.getMRT(),u=r.layers.mask;this._cameraNear.value=r.near,this._cameraFar.value=r.far,this._layers!==null&&(r.layers.mask=this._layers.mask);for(const c in this._previousTextures)this.toggleTexture(c);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(o),t.setMRT(l),r.layers.mask=u}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,r=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,r),this._scissor!==null&&this.renderTarget.scissor.copy(this._scissor),this._viewport!==null&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,t,n,r){e===null?this._scissor=null:(this._scissor===null&&(this._scissor=new an),e.isVector4?this._scissor.copy(e):this._scissor.set(e,t,n,r),this._scissor.multiplyScalar(this._pixelRatio*this._resolution).floor())}setViewport(e,t,n,r){e===null?this._viewport=null:(this._viewport===null&&(this._viewport=new an),e.isVector4?this._viewport.copy(e):this._viewport.set(e,t,n,r),this._viewport.multiplyScalar(this._pixelRatio*this._resolution).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}Vl.COLOR="color";Vl.DEPTH="depth";const Vse=(i,e,t)=>$e(new Vl(Vl.COLOR,i,e,t)),zse=(i,e)=>$e(new oU(i,e)),Gse=(i,e,t)=>$e(new Vl(Vl.DEPTH,i,e,t));class qse extends Vl{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,r,s){super(Vl.COLOR,e,t),this.colorNode=n,this.thicknessNode=r,this.alphaNode=s,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((r,s,a,o,l,u,c,p)=>{if((l.isMeshToonMaterial||l.isMeshToonNodeMaterial)&&l.wireframe===!1){const y=this._getOutlineMaterial(l);t.renderObject(r,s,a,o,y,u,c,p)}t.renderObject(r,s,a,o,l,u,c,p)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new Vr;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=Fi;const t=eo.negate(),n=s8.mul(y3),r=ue(1),s=n.mul(un(Or,1)),a=n.mul(un(Or.add(t),1)),o=G1(s.sub(a));return e.vertexNode=s.add(o.mul(this.thicknessNode).mul(s.w).mul(r)),e.colorNode=un(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const kse=(i,e,t=new Dt(0,0,0),n=.003,r=1)=>$e(new qse(i,e,$e(t),$e(n),$e(r))),lU=Te(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),uU=Te(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),cU=Te(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Hse=Te(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),hU=Te(([i,e])=>{const t=ca(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=ca(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=Hse(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),Wse=ca(be(1.6605,-.1246,-.0182),be(-.5876,1.1329,-.1006),be(-.0728,-.0083,1.1187)),jse=ca(be(.6274,.0691,.0164),be(.3293,.9195,.088),be(.0433,.0113,.8956)),Xse=Te(([i])=>{const e=be(i).toVar(),t=be(e.mul(e)).toVar(),n=be(t.mul(t)).toVar();return ue(15.5).mul(n.mul(t)).sub(Pn(40.14,n.mul(e))).add(Pn(31.96,n).sub(Pn(6.868,t.mul(e))).add(Pn(.4298,t).add(Pn(.1191,e).sub(.00232))))}),fU=Te(([i,e])=>{const t=be(i).toVar(),n=ca(be(.856627153315983,.137318972929847,.11189821299995),be(.0951212405381588,.761241990602591,.0767994186031903),be(.0482516061458583,.101439036467562,.811302368396859)),r=ca(be(1.1271005818144368,-.1413297634984383,-.14132976349843826),be(-.11060664309660323,1.157823702216272,-.11060664309660294),be(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=ue(-12.47393),a=ue(4.026069);return t.mulAssign(e),t.assign(jse.mul(t)),t.assign(n.mul(t)),t.assign(Mr(t,1e-10)),t.assign(Rl(t)),t.assign(t.sub(s).div(a.sub(s))),t.assign(n0(t,0,1)),t.assign(Xse(t)),t.assign(r.mul(t)),t.assign(Yo(Mr(be(0),t),be(2.2))),t.assign(Wse.mul(t)),t.assign(n0(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),dU=Te(([i,e])=>{const t=ue(.76),n=ue(.15);i=i.mul(e);const r=Ja(i.r,Ja(i.g,i.b)),s=xs(r.lessThan(.08),r.sub(Pn(6.25,r.mul(r))),.04);i.subAssign(s);const a=Mr(i.r,Mr(i.g,i.b));_n(a.lessThan(t),()=>i);const o=oi(1,t),l=oi(1,o.mul(o).div(a.add(o.sub(t))));i.mulAssign(l.div(a));const u=oi(1,Co(1,n.mul(a.sub(l)).add(1)));return xi(i,be(l),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class na extends jt{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=n}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const r of t)r.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const cm=Mn(na).setParameterLength(1,3),Yse=(i,e)=>cm(i,e,"js"),Qse=(i,e)=>cm(i,e,"wgsl"),$se=(i,e)=>cm(i,e,"glsl");class AU extends na{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getMemberType(e,t){const n=this.getNodeType(e);return e.getStructTypeNode(n).getMemberType(e,t)}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),r=n.name,s=n.type,a=e.getCodeFromNode(this,s);r!==""&&(a.name=r);const o=e.getPropertyName(a),l=this.getNodeFunction(e).getCode(o);return a.code=l+`
`,t==="property"?o:e.format(`${o}()`,s,t)}}const pU=(i,e=[],t="")=>{for(let s=0;s<e.length;s++){const a=e[s];typeof a=="function"&&(e[s]=a.functionNode)}const n=$e(new AU(i,e,t)),r=(...s)=>n.call(...s);return r.functionNode=n,r},Kse=(i,e)=>pU(i,e,"glsl"),Zse=(i,e)=>pU(i,e,"wgsl");class Jse extends jt{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new No,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:ue()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=mD(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=gD(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const Id=Mn(Jse).setParameterLength(1);class mU extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const r=t(...n);return this.set(e,r),r}}}class eae{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const Ud=new mU;class tae extends jt{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new mU,this._output=Id(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=Id(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=Id(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r(...t)}async callAsync(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r.constructor.name==="AsyncFunction"?await r(...t):r(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(u,c)=>this.setOutput(u,c),n=new eae(this),r=Ud.get("THREE"),s=Ud.get("TSL"),a=this.getMethod(),o=[n,this._local,Ud,e,t,r,s];this._object=a(...o);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const u of l.elements){const c=u.id||u.name;u.inputType&&(this.getParameter(c)===void 0&&this.setParameter(c,null),this.getParameter(c).inputType=u.inputType),u.outputType&&(this.getOutput(c)===void 0&&this.setOutput(c,null),this.getOutput(c).outputType=u.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:ue()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),r="var "+n+`; var output = {};
`,s=`
return { ...output, `+n+" };",a=r+this.codeNode.code+s;return this._method=new Function(...e,a),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[hD(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return Vp(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const nae=Mn(tae).setParameterLength(1,2);function gU(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||Fr.z).negate()}const xS=Te(([i,e],t)=>{const n=gU(t);return Ol(i,e,n)}),bS=Te(([i],e)=>{const t=gU(e);return i.mul(i,t,t).negate().exp().oneMinus()}),j6=Te(([i,e])=>un(e.toFloat().mix(y5.rgb,i.toVec3()),y5.a));function iae(i,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),j6(i,xS(e,t))}function rae(i,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),j6(i,bS(e))}let j2=null,X2=null;class sae extends jt{static get type(){return"RangeNode"}constructor(e=ue(),t=ue()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(Du(this.minNode.value)),n=e.getTypeLength(Du(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const r=this.minNode.value,s=this.maxNode.value,a=e.getTypeLength(Du(r)),o=e.getTypeLength(Du(s));j2=j2||new an,X2=X2||new an,j2.setScalar(0),X2.setScalar(0),a===1?j2.setScalar(r):r.isColor?j2.set(r.r,r.g,r.b,1):j2.set(r.x,r.y,r.z||0,r.w||0),o===1?X2.setScalar(s):s.isColor?X2.set(s.r,s.g,s.b,1):X2.set(s.x,s.y,s.z||0,s.w||0);const l=4,u=l*t.count,c=new Float32Array(u);for(let y=0;y<u;y++){const _=y%l,b=j2.getComponent(_),w=X2.getComponent(_);c[y]=dp.lerp(b,w,Math.random())}const p=this.getNodeType(e);if(t.count<=4096)n=S7(c,"vec4",t.count).element(Ou).convert(p);else{const y=new $a(c,4);e.geometry.setAttribute("__range"+this.id,y),n=OA(y).convert(p)}}else n=ue(0);return n}}const aae=Mn(sae).setParameterLength(2);class oae extends jt{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),r=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,r,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(r))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const C7=(i,e)=>$e(new oae(i,e)),lae=C7("numWorkgroups","uvec3"),uae=C7("workgroupId","uvec3"),cae=C7("globalId","uvec3"),hae=C7("localId","uvec3"),fae=C7("subgroupSize","uint");class dae extends jt{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const SS=Mn(dae),Aae=()=>SS("workgroup").toStack(),pae=()=>SS("storage").toStack(),mae=()=>SS("texture").toStack();class gae extends g3{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const r=e.context.assign;if(n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}class yae extends jt{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e,this.name=""}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return $e(new gae(this,e))}generate(e){const t=this.name!==""?this.name:`${this.scope}Array_${this.id}`;return e.getScopedArray(t,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const vae=(i,e)=>$e(new yae("Workgroup",i,e));class us extends jt{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=e.getNodeProperties(this),n=t.parents,r=this.method,s=this.getNodeType(e),a=this.getInputType(e),o=this.pointerNode,l=this.valueNode,u=[];u.push(`&${o.build(e,a)}`),l!==null&&u.push(l.build(e,a));const c=`${e.getMethod(r,s)}( ${u.join(", ")} )`;if(n?n.length===1&&n[0].isStackNode===!0:!1)e.addLineFlowCode(c,this);else return t.constNode===void 0&&(t.constNode=q1(c,s).toConst()),t.constNode.build(e)}}us.ATOMIC_LOAD="atomicLoad";us.ATOMIC_STORE="atomicStore";us.ATOMIC_ADD="atomicAdd";us.ATOMIC_SUB="atomicSub";us.ATOMIC_MAX="atomicMax";us.ATOMIC_MIN="atomicMin";us.ATOMIC_AND="atomicAnd";us.ATOMIC_OR="atomicOr";us.ATOMIC_XOR="atomicXor";const _ae=Mn(us),Wl=(i,e,t)=>_ae(i,e,t).toStack(),xae=i=>Wl(us.ATOMIC_LOAD,i,null),bae=(i,e)=>Wl(us.ATOMIC_STORE,i,e),Sae=(i,e)=>Wl(us.ATOMIC_ADD,i,e),Tae=(i,e)=>Wl(us.ATOMIC_SUB,i,e),Mae=(i,e)=>Wl(us.ATOMIC_MAX,i,e),Eae=(i,e)=>Wl(us.ATOMIC_MIN,i,e),wae=(i,e)=>Wl(us.ATOMIC_AND,i,e),Rae=(i,e)=>Wl(us.ATOMIC_OR,i,e),Cae=(i,e)=>Wl(us.ATOMIC_XOR,i,e);class Ot extends zr{static get type(){return"SubgroupFunctionNode"}constructor(e,t=null,n=null){super(),this.method=e,this.aNode=t,this.bNode=n}getInputType(e){const t=this.aNode?this.aNode.getNodeType(e):null,n=this.bNode?this.bNode.getNodeType(e):null,r=e.isMatrix(t)?0:e.getTypeLength(t),s=e.isMatrix(n)?0:e.getTypeLength(n);return r>s?t:n}getNodeType(e){const t=this.method;return t===Ot.SUBGROUP_ELECT?"bool":t===Ot.SUBGROUP_BALLOT?"uvec4":this.getInputType(e)}generate(e,t){const n=this.method,r=this.getNodeType(e),s=this.getInputType(e),a=this.aNode,o=this.bNode,l=[];if(n===Ot.SUBGROUP_BROADCAST||n===Ot.SUBGROUP_SHUFFLE||n===Ot.QUAD_BROADCAST){const c=o.getNodeType(e);l.push(a.build(e,r),o.build(e,c==="float"?"int":r))}else n===Ot.SUBGROUP_SHUFFLE_XOR||n===Ot.SUBGROUP_SHUFFLE_DOWN||n===Ot.SUBGROUP_SHUFFLE_UP?l.push(a.build(e,r),o.build(e,"uint")):(a!==null&&l.push(a.build(e,s)),o!==null&&l.push(o.build(e,s)));const u=l.length===0?"()":`( ${l.join(", ")} )`;return e.format(`${e.getMethod(n,r)}${u}`,r,t)}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Ot.SUBGROUP_ELECT="subgroupElect";Ot.SUBGROUP_BALLOT="subgroupBallot";Ot.SUBGROUP_ADD="subgroupAdd";Ot.SUBGROUP_INCLUSIVE_ADD="subgroupInclusiveAdd";Ot.SUBGROUP_EXCLUSIVE_AND="subgroupExclusiveAdd";Ot.SUBGROUP_MUL="subgroupMul";Ot.SUBGROUP_INCLUSIVE_MUL="subgroupInclusiveMul";Ot.SUBGROUP_EXCLUSIVE_MUL="subgroupExclusiveMul";Ot.SUBGROUP_AND="subgroupAnd";Ot.SUBGROUP_OR="subgroupOr";Ot.SUBGROUP_XOR="subgroupXor";Ot.SUBGROUP_MIN="subgroupMin";Ot.SUBGROUP_MAX="subgroupMax";Ot.SUBGROUP_ALL="subgroupAll";Ot.SUBGROUP_ANY="subgroupAny";Ot.SUBGROUP_BROADCAST_FIRST="subgroupBroadcastFirst";Ot.QUAD_SWAP_X="quadSwapX";Ot.QUAD_SWAP_Y="quadSwapY";Ot.QUAD_SWAP_DIAGONAL="quadSwapDiagonal";Ot.SUBGROUP_BROADCAST="subgroupBroadcast";Ot.SUBGROUP_SHUFFLE="subgroupShuffle";Ot.SUBGROUP_SHUFFLE_XOR="subgroupShuffleXor";Ot.SUBGROUP_SHUFFLE_UP="subgroupShuffleUp";Ot.SUBGROUP_SHUFFLE_DOWN="subgroupShuffleDown";Ot.QUAD_BROADCAST="quadBroadcast";const Nae=Et(Ot,Ot.SUBGROUP_ELECT).setParameterLength(0),Pae=Et(Ot,Ot.SUBGROUP_BALLOT).setParameterLength(1),Dae=Et(Ot,Ot.SUBGROUP_ADD).setParameterLength(1),Bae=Et(Ot,Ot.SUBGROUP_INCLUSIVE_ADD).setParameterLength(1),Lae=Et(Ot,Ot.SUBGROUP_EXCLUSIVE_AND).setParameterLength(1),Iae=Et(Ot,Ot.SUBGROUP_MUL).setParameterLength(1),Uae=Et(Ot,Ot.SUBGROUP_INCLUSIVE_MUL).setParameterLength(1),Oae=Et(Ot,Ot.SUBGROUP_EXCLUSIVE_MUL).setParameterLength(1),Fae=Et(Ot,Ot.SUBGROUP_AND).setParameterLength(1),Vae=Et(Ot,Ot.SUBGROUP_OR).setParameterLength(1),zae=Et(Ot,Ot.SUBGROUP_XOR).setParameterLength(1),Gae=Et(Ot,Ot.SUBGROUP_MIN).setParameterLength(1),qae=Et(Ot,Ot.SUBGROUP_MAX).setParameterLength(1),kae=Et(Ot,Ot.SUBGROUP_ALL).setParameterLength(0),Hae=Et(Ot,Ot.SUBGROUP_ANY).setParameterLength(0),Wae=Et(Ot,Ot.SUBGROUP_BROADCAST_FIRST).setParameterLength(2),jae=Et(Ot,Ot.QUAD_SWAP_X).setParameterLength(1),Xae=Et(Ot,Ot.QUAD_SWAP_Y).setParameterLength(1),Yae=Et(Ot,Ot.QUAD_SWAP_DIAGONAL).setParameterLength(1),Qae=Et(Ot,Ot.SUBGROUP_BROADCAST).setParameterLength(2),$ae=Et(Ot,Ot.SUBGROUP_SHUFFLE).setParameterLength(2),Kae=Et(Ot,Ot.SUBGROUP_SHUFFLE_XOR).setParameterLength(2),Zae=Et(Ot,Ot.SUBGROUP_SHUFFLE_UP).setParameterLength(2),Jae=Et(Ot,Ot.SUBGROUP_SHUFFLE_DOWN).setParameterLength(2),eoe=Et(Ot,Ot.QUAD_BROADCAST).setParameterLength(1);let Z9;function hm(i){Z9=Z9||new WeakMap;let e=Z9.get(i);return e===void 0&&Z9.set(i,e={}),e}function fm(i){const e=hm(i);return e.shadowMatrix||(e.shadowMatrix=on("mat4").setGroup(rn).onRenderUpdate(t=>((i.castShadow!==!0||t.renderer.shadowMap.enabled===!1)&&i.shadow.updateMatrices(i),i.shadow.matrix)))}function yU(i,e=Pl){const t=fm(i).mul(e);return t.xyz.div(t.w)}function TS(i){const e=hm(i);return e.position||(e.position=on(new te).setGroup(rn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function vU(i){const e=hm(i);return e.targetPosition||(e.targetPosition=on(new te).setGroup(rn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function MS(i){const e=hm(i);return e.viewPosition||(e.viewPosition=on(new te).setGroup(rn).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new te,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const ES=i=>c0.transformDirection(TS(i).sub(vU(i))),toe=i=>i.sort((e,t)=>e.id-t.id),noe=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},Ty=new WeakMap,Bh=[];class wS extends jt{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=C1("vec3","totalDiffuse"),this.totalSpecularNode=C1("vec3","totalSpecular"),this.outgoingLightNode=C1("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let n=0;n<e.length;n++){const r=e[n];if(Bh.push(r.id),Bh.push(r.castShadow?1:0),r.isSpotLight===!0){const s=r.map!==null?r.map.id:-1,a=r.colorNode?r.colorNode.getCacheKey():-1;Bh.push(s,a)}}const t=Vp(Bh);return Bh.length=0,t}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getNodeProperties(this);for(const n of t.nodes)n.build(e);t.outputNode.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,r=toe(this._lights),s=e.renderer.library;for(const a of r)if(a.isNode)t.push($e(a));else{let o=null;if(n!==null&&(o=noe(a.id,n)),o===null){const l=s.getLightNodeClass(a.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${a.constructor.name}`);continue}let u=null;Ty.has(a)?u=Ty.get(a):(u=$e(new l(a)),Ty.set(a,u)),t.push(u)}}this._lightNodes=t}setupDirectLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.direct({...n,lightNode:t,reflectedLight:s},e)}setupDirectRectAreaLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.directRectArea({...n,lightNode:t,reflectedLight:s},e)}setupLights(e,t){for(const n of t)n.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let n=this.outgoingLightNode;const r=e.context,s=r.lightingModel,a=e.getNodeProperties(this);if(s){const{totalDiffuseNode:o,totalSpecularNode:l}=this;r.outgoingLight=n;const u=e.addStack();a.nodes=u.nodes,s.start(e);const{backdrop:c,backdropAlpha:p}=r,{directDiffuse:y,directSpecular:_,indirectDiffuse:b,indirectSpecular:w}=r.reflectedLight;let E=y.add(b);c!==null&&(p!==null?E=be(p.mix(E,c)):E=be(c),r.material.transparent=!0),o.assign(E),l.assign(_.add(w)),n.assign(o.add(l)),s.finish(e),n=n.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=t,n}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const ioe=(i=[])=>$e(new wS).setLights(i);class roe extends jt{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=kn.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){RS.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||Pl)}}const RS=C1("vec3","shadowPositionWorld");function soe(i,e={}){return e.toneMapping=i.toneMapping,e.toneMappingExposure=i.toneMappingExposure,e.outputColorSpace=i.outputColorSpace,e.renderTarget=i.getRenderTarget(),e.activeCubeFace=i.getActiveCubeFace(),e.activeMipmapLevel=i.getActiveMipmapLevel(),e.renderObjectFunction=i.getRenderObjectFunction(),e.pixelRatio=i.getPixelRatio(),e.mrt=i.getMRT(),e.clearColor=i.getClearColor(e.clearColor||new Dt),e.clearAlpha=i.getClearAlpha(),e.autoClear=i.autoClear,e.scissorTest=i.getScissorTest(),e}function aoe(i,e){return e=soe(i,e),i.setMRT(null),i.setRenderObjectFunction(null),i.setClearColor(0,1),i.autoClear=!0,e}function ooe(i,e){i.toneMapping=e.toneMapping,i.toneMappingExposure=e.toneMappingExposure,i.outputColorSpace=e.outputColorSpace,i.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),i.setRenderObjectFunction(e.renderObjectFunction),i.setPixelRatio(e.pixelRatio),i.setMRT(e.mrt),i.setClearColor(e.clearColor,e.clearAlpha),i.autoClear=e.autoClear,i.setScissorTest(e.scissorTest)}function loe(i,e={}){return e.background=i.background,e.backgroundNode=i.backgroundNode,e.overrideMaterial=i.overrideMaterial,e}function uoe(i,e){return e=loe(i,e),i.background=null,i.backgroundNode=null,i.overrideMaterial=null,e}function coe(i,e){i.background=e.background,i.backgroundNode=e.backgroundNode,i.overrideMaterial=e.overrideMaterial}function hoe(i,e,t){return t=aoe(i,t),t=uoe(e,t),t}function foe(i,e,t){ooe(i,t),coe(e,t)}const aR=new WeakMap,_U=Te(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{let n=si(i,e.xy).setName("t_basic");return i.isArrayTexture&&(n=n.depth(t)),n.compare(e.z)}),xU=Te(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const r=(E,M)=>{let P=si(i,E);return i.isArrayTexture&&(P=P.depth(n)),P.compare(M)},s=ji("mapSize","vec2",t).setGroup(rn),a=ji("radius","float",t).setGroup(rn),o=Ze(1).div(s),l=o.x.negate().mul(a),u=o.y.negate().mul(a),c=o.x.mul(a),p=o.y.mul(a),y=l.div(2),_=u.div(2),b=c.div(2),w=p.div(2);return kr(r(e.xy.add(Ze(l,u)),e.z),r(e.xy.add(Ze(0,u)),e.z),r(e.xy.add(Ze(c,u)),e.z),r(e.xy.add(Ze(y,_)),e.z),r(e.xy.add(Ze(0,_)),e.z),r(e.xy.add(Ze(b,_)),e.z),r(e.xy.add(Ze(l,0)),e.z),r(e.xy.add(Ze(y,0)),e.z),r(e.xy,e.z),r(e.xy.add(Ze(b,0)),e.z),r(e.xy.add(Ze(c,0)),e.z),r(e.xy.add(Ze(y,w)),e.z),r(e.xy.add(Ze(0,w)),e.z),r(e.xy.add(Ze(b,w)),e.z),r(e.xy.add(Ze(l,p)),e.z),r(e.xy.add(Ze(0,p)),e.z),r(e.xy.add(Ze(c,p)),e.z)).mul(1/17)}),bU=Te(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const r=(p,y)=>{let _=si(i,p);return i.isArrayTexture&&(_=_.depth(n)),_.compare(y)},s=ji("mapSize","vec2",t).setGroup(rn),a=Ze(1).div(s),o=a.x,l=a.y,u=e.xy,c=H1(u.mul(s).add(.5));return u.subAssign(c.mul(a)),kr(r(u,e.z),r(u.add(Ze(o,0)),e.z),r(u.add(Ze(0,l)),e.z),r(u.add(a),e.z),xi(r(u.add(Ze(o.negate(),0)),e.z),r(u.add(Ze(o.mul(2),0)),e.z),c.x),xi(r(u.add(Ze(o.negate(),l)),e.z),r(u.add(Ze(o.mul(2),l)),e.z),c.x),xi(r(u.add(Ze(0,l.negate())),e.z),r(u.add(Ze(0,l.mul(2))),e.z),c.y),xi(r(u.add(Ze(o,l.negate())),e.z),r(u.add(Ze(o,l.mul(2))),e.z),c.y),xi(xi(r(u.add(Ze(o.negate(),l.negate())),e.z),r(u.add(Ze(o.mul(2),l.negate())),e.z),c.x),xi(r(u.add(Ze(o.negate(),l.mul(2))),e.z),r(u.add(Ze(o.mul(2),l.mul(2))),e.z),c.x),c.y)).mul(1/9)}),SU=Te(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{const n=ue(1).toVar();let r=si(i).sample(e.xy);i.isArrayTexture&&(r=r.depth(t)),r=r.rg;const s=Zp(e.z,r.x);return _n(s.notEqual(ue(1)),()=>{const a=e.z.sub(r.x),o=Mr(0,r.y.mul(r.y));let l=o.div(o.add(a.mul(a)));l=n0(oi(l,.3).div(.95-.3)),n.assign(n0(Mr(s,l)))}),n}),doe=Te(([i,e,t])=>{let n=Pl.sub(i).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),Aoe=i=>{const e=i.shadow.camera,t=ji("near","float",e).setGroup(rn),n=ji("far","float",e).setGroup(rn),r=sL(i);return doe(r,t,n)},TU=i=>{let e=aR.get(i);if(e===void 0){const t=i.isPointLight?Aoe(i):null;e=new Vr,e.colorNode=un(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,aR.set(i,e)}return e},oR=new H0,j4=[],MU=(i,e,t,n)=>{j4[0]=i,j4[1]=e;let r=oR.get(j4);return(r===void 0||r.shadowType!==t||r.useVelocity!==n)&&(r=(s,a,o,l,u,c,...p)=>{(s.castShadow===!0||s.receiveShadow&&t===xa)&&(n&&(pD(s).useVelocity=!0),s.onBeforeShadow(i,s,o,e.camera,l,a.overrideMaterial,c),i.renderObject(s,a,o,l,u,c,...p),s.onAfterShadow(i,s,o,e.camera,l,a.overrideMaterial,c))},r.shadowType=t,r.useVelocity=n,oR.set(j4,r)),j4[0]=null,j4[1]=null,r},poe=Te(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:r})=>{const s=ue(0).toVar("meanVertical"),a=ue(0).toVar("squareMeanVertical"),o=i.lessThanEqual(ue(1)).select(ue(0),ue(2).div(i.sub(1))),l=i.lessThanEqual(ue(1)).select(ue(0),ue(-1));Oi({start:me(0),end:me(i),type:"int",condition:"<"},({i:c})=>{const p=l.add(ue(c).mul(o));let y=n.sample(kr(T7.xy,Ze(0,p).mul(e)).div(t));n.value.isArrayTexture&&(y=y.depth(r)),y=y.x,s.addAssign(y),a.addAssign(y.mul(y))}),s.divAssign(i),a.divAssign(i);const u=kl(a.sub(s.mul(s)));return Ze(s,u)}),moe=Te(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:r})=>{const s=ue(0).toVar("meanHorizontal"),a=ue(0).toVar("squareMeanHorizontal"),o=i.lessThanEqual(ue(1)).select(ue(0),ue(2).div(i.sub(1))),l=i.lessThanEqual(ue(1)).select(ue(0),ue(-1));Oi({start:me(0),end:me(i),type:"int",condition:"<"},({i:c})=>{const p=l.add(ue(c).mul(o));let y=n.sample(kr(T7.xy,Ze(p,0).mul(e)).div(t));n.value.isArrayTexture&&(y=y.depth(r)),s.addAssign(y.x),a.addAssign(kr(y.y.mul(y.y),y.x.mul(y.x)))}),s.divAssign(i),a.divAssign(i);const u=kl(a.sub(s.mul(s)));return Ze(s,u)}),goe=[_U,xU,bU,SU];let My;const J9=new um;class EU extends roe{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:r,shadow:s,depthLayer:a}){const o=r.x.greaterThanEqual(0).and(r.x.lessThanEqual(1)).and(r.y.greaterThanEqual(0)).and(r.y.lessThanEqual(1)).and(r.z.lessThanEqual(1)),l=t({depthTexture:n,shadowCoord:r,shadow:s,depthLayer:a});return o.select(l,ue(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:r}=e,s=ji("bias","float",n).setGroup(rn);let a=t,o;if(n.camera.isOrthographicCamera||r.logarithmicDepthBuffer!==!0)a=a.xyz.div(a.w),o=a.z,r.coordinateSystem===Jo&&(o=o.mul(2).sub(1));else{const l=a.w;a=a.xy.div(l);const u=ji("near","float",n.camera).setGroup(rn),c=ji("far","float",n.camera).setGroup(rn);o=lS(l.negate(),u,c)}return a=be(a.x,a.y.oneMinus(),o.add(s)),a}getShadowFilterFn(e){return goe[e]}setupRenderTarget(e,t){const n=new Ka(e.mapSize.width,e.mapSize.height);n.name="ShadowDepthTexture",n.compareFunction=n7;const r=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return r.texture.name="ShadowMap",r.texture.type=e.mapType,r.depthTexture=n,{shadowMap:r,depthTexture:n}}setupShadow(e){const{renderer:t}=e,{light:n,shadow:r}=this,s=t.shadowMap.type,{depthTexture:a,shadowMap:o}=this.setupRenderTarget(r,e);if(r.camera.updateProjectionMatrix(),s===xa&&r.isPointLightShadow!==!0){a.compareFunction=null,o.depth>1?(o._vsmShadowMapVertical||(o._vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:Sl,type:$r,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=o._vsmShadowMapVertical,o._vsmShadowMapHorizontal||(o._vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:Sl,type:$r,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=o._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:Sl,type:$r,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:Sl,type:$r,depthBuffer:!1}));let M=si(a);a.isArrayTexture&&(M=M.depth(this.depthLayer));let P=si(this.vsmShadowMapVertical.texture);a.isArrayTexture&&(P=P.depth(this.depthLayer));const D=ji("blurSamples","float",r).setGroup(rn),B=ji("radius","float",r).setGroup(rn),U=ji("mapSize","vec2",r).setGroup(rn);let O=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Vr);O.fragmentNode=poe({samples:D,radius:B,size:U,shadowPass:M,depthLayer:this.depthLayer}).context(e.getSharedContext()),O.name="VSMVertical",O=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Vr),O.fragmentNode=moe({samples:D,radius:B,size:U,shadowPass:P,depthLayer:this.depthLayer}).context(e.getSharedContext()),O.name="VSMHorizontal"}const l=ji("intensity","float",r).setGroup(rn),u=ji("normalBias","float",r).setGroup(rn),c=fm(n).mul(RS.add(Ku.mul(u))),p=this.setupShadowCoord(e,c),y=r.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(y===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const _=s===xa&&r.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:a,b=this.setupShadowFilter(e,{filterFn:y,shadowTexture:o.texture,depthTexture:_,shadowCoord:p,shadow:r,depthLayer:this.depthLayer});let w=si(o.texture,p);a.isArrayTexture&&(w=w.depth(this.depthLayer));const E=xi(1,b.rgb.mix(w,1),l.mul(w.a)).toVar();return this.shadowMap=o,this.shadow.map=o,E}setup(e){if(e.renderer.shadowMap.enabled!==!1)return Te(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:a}=e;t.updateMatrices(r),n.setSize(t.mapSize.width,t.mapSize.height,n.depth),s.render(a,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:r}=this,{renderer:s,scene:a,camera:o}=e,l=s.shadowMap.type,u=t.depthTexture.version;this._depthVersionCached=u;const c=r.camera.layers.mask;(r.camera.layers.mask&4294967294)===0&&(r.camera.layers.mask=o.layers.mask);const p=s.getRenderObjectFunction(),y=s.getMRT(),_=y?y.has("velocity"):!1;My=hoe(s,a,My),a.overrideMaterial=TU(n),s.setRenderObjectFunction(MU(s,r,l,_)),s.setClearColor(0,0),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(p),l===xa&&r.isPointLightShadow!==!0&&this.vsmPass(s),r.camera.layers.mask=c,foe(s,a,My)}vsmPass(e){const{shadow:t}=this,n=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,n),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,n),e.setRenderTarget(this.vsmShadowMapVertical),J9.material=this.vsmMaterialVertical,J9.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),J9.material=this.vsmMaterialHorizontal,J9.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;let n=t.needsUpdate||t.autoUpdate;n&&(this._cameraFrameId[e.camera]===e.frameId&&(n=!1),this._cameraFrameId[e.camera]=e.frameId),n&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const wU=(i,e)=>$e(new EU(i,e)),yoe=new Dt,L0=Te(([i,e])=>{const t=i.toVar(),n=tr(t),r=Co(1,Mr(n.x,Mr(n.y,n.z)));n.mulAssign(r),t.mulAssign(r.mul(e.mul(2).oneMinus()));const s=Ze(t.xy).toVar(),o=e.mul(1.5).oneMinus();return _n(n.z.greaterThanEqual(o),()=>{_n(t.z.greaterThan(0),()=>{s.x.assign(oi(4,t.x))})}).ElseIf(n.x.greaterThanEqual(o),()=>{const l=W6(t.x);s.x.assign(t.z.mul(l).add(l.mul(2)))}).ElseIf(n.y.greaterThanEqual(o),()=>{const l=W6(t.y);s.x.assign(t.x.add(l.mul(2)).add(2)),s.y.assign(t.z.mul(l).sub(2))}),Ze(.125,.25).mul(s).add(Ze(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),RU=Te(({depthTexture:i,bd3D:e,dp:t,texelSize:n})=>si(i,L0(e,n.y)).compare(t)),CU=Te(({depthTexture:i,bd3D:e,dp:t,texelSize:n,shadow:r})=>{const s=ji("radius","float",r).setGroup(rn),a=Ze(-1,1).mul(s).mul(n.y);return si(i,L0(e.add(a.xyy),n.y)).compare(t).add(si(i,L0(e.add(a.yyy),n.y)).compare(t)).add(si(i,L0(e.add(a.xyx),n.y)).compare(t)).add(si(i,L0(e.add(a.yyx),n.y)).compare(t)).add(si(i,L0(e,n.y)).compare(t)).add(si(i,L0(e.add(a.xxy),n.y)).compare(t)).add(si(i,L0(e.add(a.yxy),n.y)).compare(t)).add(si(i,L0(e.add(a.xxx),n.y)).compare(t)).add(si(i,L0(e.add(a.yxx),n.y)).compare(t)).mul(1/9)}),voe=Te(({filterFn:i,depthTexture:e,shadowCoord:t,shadow:n})=>{const r=t.xyz.toVar(),s=r.length(),a=on("float").setGroup(rn).onRenderUpdate(()=>n.camera.near),o=on("float").setGroup(rn).onRenderUpdate(()=>n.camera.far),l=ji("bias","float",n).setGroup(rn),u=on(n.mapSize).setGroup(rn),c=ue(1).toVar();return _n(s.sub(o).lessThanEqual(0).and(s.sub(a).greaterThanEqual(0)),()=>{const p=s.sub(a).div(o.sub(a)).toVar();p.addAssign(l);const y=r.normalize(),_=Ze(1).div(u.mul(Ze(4,2)));c.assign(i({depthTexture:e,bd3D:y,dp:p,texelSize:_,shadow:n}))}),c}),lR=new an,X4=new He,Lh=new He;class _oe extends EU{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===j_?RU:CU}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:a}){return voe({filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:a})}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:a}=e,o=t.getFrameExtents();Lh.copy(t.mapSize),Lh.multiply(o),n.setSize(Lh.width,Lh.height),X4.copy(t.mapSize);const l=s.autoClear,u=s.getClearColor(yoe),c=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha),s.clear();const p=t.getViewportCount();for(let y=0;y<p;y++){const _=t.getViewport(y),b=X4.x*_.x,w=Lh.y-X4.y-X4.y*_.y;lR.set(b,w,X4.x*_.z,X4.y*_.w),n.viewport.copy(lR),t.updateMatrices(r,y),s.render(a,t.camera)}s.autoClear=l,s.setClearColor(u,c)}}const NU=(i,e)=>$e(new _oe(i,e));class v3 extends o8{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Dt,this.colorNode=e&&e.colorNode||on(this.color).setGroup(rn),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=kn.FRAME}getHash(){return this.light.uuid}getLightVector(e){return MS(this.light).sub(e.context.positionView||Fr)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return wU(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const r=this.light.shadow.shadowNode;let s;r!==void 0?s=$e(r):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=n=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),n=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),n&&e.lightsNode.setupDirectRectAreaLight(e,this,n)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const CS=Te(({lightDistance:i,cutoffDistance:e,decayExponent:t})=>{const n=i.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(n.mul(i.div(e).pow4().oneMinus().clamp().pow2()),n)}),PU=({color:i,lightVector:e,cutoffDistance:t,decayExponent:n})=>{const r=e.normalize(),s=e.length(),a=CS({lightDistance:s,cutoffDistance:t,decayExponent:n}),o=i.mul(a);return{lightDirection:r,lightColor:o}};class xoe extends v3{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=on(0).setGroup(rn),this.decayExponentNode=on(2).setGroup(rn)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return NU(this.light)}setupDirect(e){return PU({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}const boe=Te(([i=qi()])=>{const e=i.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),Soe=Te(([i=qi()],{renderer:e,material:t})=>{const n=Ub(i.mul(2).sub(1));let r;if(t.alphaToCoverage&&e.samples>1){const s=ue(n.fwidth()).toVar();r=Ol(s.oneMinus(),s.add(1),n).oneMinus()}else r=xs(n.greaterThan(1),0,1);return r}),A6=Te(([i,e,t])=>{const n=ue(t).toVar(),r=ue(e).toVar(),s=t0(i).toVar();return xs(s,r,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),GA=Te(([i,e])=>{const t=t0(e).toVar(),n=ue(i).toVar();return xs(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),qr=Te(([i])=>{const e=ue(i).toVar();return me(Cl(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),gr=Te(([i,e])=>{const t=ue(i).toVar();return e.assign(qr(t)),t.sub(ue(e))}),Toe=Te(([i,e,t,n,r,s])=>{const a=ue(s).toVar(),o=ue(r).toVar(),l=ue(n).toVar(),u=ue(t).toVar(),c=ue(e).toVar(),p=ue(i).toVar(),y=ue(oi(1,o)).toVar();return oi(1,a).mul(p.mul(y).add(c.mul(o))).add(a.mul(u.mul(y).add(l.mul(o))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),Moe=Te(([i,e,t,n,r,s])=>{const a=ue(s).toVar(),o=ue(r).toVar(),l=be(n).toVar(),u=be(t).toVar(),c=be(e).toVar(),p=be(i).toVar(),y=ue(oi(1,o)).toVar();return oi(1,a).mul(p.mul(y).add(c.mul(o))).add(a.mul(u.mul(y).add(l.mul(o))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),DU=Ws([Toe,Moe]),Eoe=Te(([i,e,t,n,r,s,a,o,l,u,c])=>{const p=ue(c).toVar(),y=ue(u).toVar(),_=ue(l).toVar(),b=ue(o).toVar(),w=ue(a).toVar(),E=ue(s).toVar(),M=ue(r).toVar(),P=ue(n).toVar(),D=ue(t).toVar(),B=ue(e).toVar(),U=ue(i).toVar(),O=ue(oi(1,_)).toVar(),z=ue(oi(1,y)).toVar();return ue(oi(1,p)).toVar().mul(z.mul(U.mul(O).add(B.mul(_))).add(y.mul(D.mul(O).add(P.mul(_))))).add(p.mul(z.mul(M.mul(O).add(E.mul(_))).add(y.mul(w.mul(O).add(b.mul(_))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),woe=Te(([i,e,t,n,r,s,a,o,l,u,c])=>{const p=ue(c).toVar(),y=ue(u).toVar(),_=ue(l).toVar(),b=be(o).toVar(),w=be(a).toVar(),E=be(s).toVar(),M=be(r).toVar(),P=be(n).toVar(),D=be(t).toVar(),B=be(e).toVar(),U=be(i).toVar(),O=ue(oi(1,_)).toVar(),z=ue(oi(1,y)).toVar();return ue(oi(1,p)).toVar().mul(z.mul(U.mul(O).add(B.mul(_))).add(y.mul(D.mul(O).add(P.mul(_))))).add(p.mul(z.mul(M.mul(O).add(E.mul(_))).add(y.mul(w.mul(O).add(b.mul(_))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),BU=Ws([Eoe,woe]),Roe=Te(([i,e,t])=>{const n=ue(t).toVar(),r=ue(e).toVar(),s=zt(i).toVar(),a=zt(s.bitAnd(zt(7))).toVar(),o=ue(A6(a.lessThan(zt(4)),r,n)).toVar(),l=ue(Pn(2,A6(a.lessThan(zt(4)),n,r))).toVar();return GA(o,t0(a.bitAnd(zt(1)))).add(GA(l,t0(a.bitAnd(zt(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),Coe=Te(([i,e,t,n])=>{const r=ue(n).toVar(),s=ue(t).toVar(),a=ue(e).toVar(),o=zt(i).toVar(),l=zt(o.bitAnd(zt(15))).toVar(),u=ue(A6(l.lessThan(zt(8)),a,s)).toVar(),c=ue(A6(l.lessThan(zt(4)),s,A6(l.equal(zt(12)).or(l.equal(zt(14))),a,r))).toVar();return GA(u,t0(l.bitAnd(zt(1)))).add(GA(c,t0(l.bitAnd(zt(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),_s=Ws([Roe,Coe]),Noe=Te(([i,e,t])=>{const n=ue(t).toVar(),r=ue(e).toVar(),s=r8(i).toVar();return be(_s(s.x,r,n),_s(s.y,r,n),_s(s.z,r,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),Poe=Te(([i,e,t,n])=>{const r=ue(n).toVar(),s=ue(t).toVar(),a=ue(e).toVar(),o=r8(i).toVar();return be(_s(o.x,a,s,r),_s(o.y,a,s,r),_s(o.z,a,s,r))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),Wo=Ws([Noe,Poe]),Doe=Te(([i])=>{const e=ue(i).toVar();return Pn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Boe=Te(([i])=>{const e=ue(i).toVar();return Pn(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Loe=Te(([i])=>{const e=be(i).toVar();return Pn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),LU=Ws([Doe,Loe]),Ioe=Te(([i])=>{const e=be(i).toVar();return Pn(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),IU=Ws([Boe,Ioe]),bo=Te(([i,e])=>{const t=me(e).toVar(),n=zt(i).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(me(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),UU=Te(([i,e,t])=>{i.subAssign(t),i.bitXorAssign(bo(t,me(4))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(bo(i,me(6))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(bo(e,me(8))),e.addAssign(i),i.subAssign(t),i.bitXorAssign(bo(t,me(16))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(bo(i,me(19))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(bo(e,me(4))),e.addAssign(i)}),N7=Te(([i,e,t])=>{const n=zt(t).toVar(),r=zt(e).toVar(),s=zt(i).toVar();return n.bitXorAssign(r),n.subAssign(bo(r,me(14))),s.bitXorAssign(n),s.subAssign(bo(n,me(11))),r.bitXorAssign(s),r.subAssign(bo(s,me(25))),n.bitXorAssign(r),n.subAssign(bo(r,me(16))),s.bitXorAssign(n),s.subAssign(bo(n,me(4))),r.bitXorAssign(s),r.subAssign(bo(s,me(14))),n.bitXorAssign(r),n.subAssign(bo(r,me(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),ua=Te(([i])=>{const e=zt(i).toVar();return ue(e).div(ue(zt(me(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),Dl=Te(([i])=>{const e=ue(i).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),Uoe=Te(([i])=>{const e=me(i).toVar(),t=zt(zt(1)).toVar(),n=zt(zt(me(3735928559)).add(t.shiftLeft(zt(2))).add(zt(13))).toVar();return N7(n.add(zt(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),Ooe=Te(([i,e])=>{const t=me(e).toVar(),n=me(i).toVar(),r=zt(zt(2)).toVar(),s=zt().toVar(),a=zt().toVar(),o=zt().toVar();return s.assign(a.assign(o.assign(zt(me(3735928559)).add(r.shiftLeft(zt(2))).add(zt(13))))),s.addAssign(zt(n)),a.addAssign(zt(t)),N7(s,a,o)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Foe=Te(([i,e,t])=>{const n=me(t).toVar(),r=me(e).toVar(),s=me(i).toVar(),a=zt(zt(3)).toVar(),o=zt().toVar(),l=zt().toVar(),u=zt().toVar();return o.assign(l.assign(u.assign(zt(me(3735928559)).add(a.shiftLeft(zt(2))).add(zt(13))))),o.addAssign(zt(s)),l.addAssign(zt(r)),u.addAssign(zt(n)),N7(o,l,u)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Voe=Te(([i,e,t,n])=>{const r=me(n).toVar(),s=me(t).toVar(),a=me(e).toVar(),o=me(i).toVar(),l=zt(zt(4)).toVar(),u=zt().toVar(),c=zt().toVar(),p=zt().toVar();return u.assign(c.assign(p.assign(zt(me(3735928559)).add(l.shiftLeft(zt(2))).add(zt(13))))),u.addAssign(zt(o)),c.addAssign(zt(a)),p.addAssign(zt(s)),UU(u,c,p),u.addAssign(zt(r)),N7(u,c,p)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),zoe=Te(([i,e,t,n,r])=>{const s=me(r).toVar(),a=me(n).toVar(),o=me(t).toVar(),l=me(e).toVar(),u=me(i).toVar(),c=zt(zt(5)).toVar(),p=zt().toVar(),y=zt().toVar(),_=zt().toVar();return p.assign(y.assign(_.assign(zt(me(3735928559)).add(c.shiftLeft(zt(2))).add(zt(13))))),p.addAssign(zt(u)),y.addAssign(zt(l)),_.addAssign(zt(o)),UU(p,y,_),p.addAssign(zt(a)),y.addAssign(zt(s)),N7(p,y,_)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),Ii=Ws([Uoe,Ooe,Foe,Voe,zoe]),Goe=Te(([i,e])=>{const t=me(e).toVar(),n=me(i).toVar(),r=zt(Ii(n,t)).toVar(),s=r8().toVar();return s.x.assign(r.bitAnd(me(255))),s.y.assign(r.shiftRight(me(8)).bitAnd(me(255))),s.z.assign(r.shiftRight(me(16)).bitAnd(me(255))),s}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),qoe=Te(([i,e,t])=>{const n=me(t).toVar(),r=me(e).toVar(),s=me(i).toVar(),a=zt(Ii(s,r,n)).toVar(),o=r8().toVar();return o.x.assign(a.bitAnd(me(255))),o.y.assign(a.shiftRight(me(8)).bitAnd(me(255))),o.z.assign(a.shiftRight(me(16)).bitAnd(me(255))),o}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),jo=Ws([Goe,qoe]),koe=Te(([i])=>{const e=Ze(i).toVar(),t=me().toVar(),n=me().toVar(),r=ue(gr(e.x,t)).toVar(),s=ue(gr(e.y,n)).toVar(),a=ue(Dl(r)).toVar(),o=ue(Dl(s)).toVar(),l=ue(DU(_s(Ii(t,n),r,s),_s(Ii(t.add(me(1)),n),r.sub(1),s),_s(Ii(t,n.add(me(1))),r,s.sub(1)),_s(Ii(t.add(me(1)),n.add(me(1))),r.sub(1),s.sub(1)),a,o)).toVar();return LU(l)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),Hoe=Te(([i])=>{const e=be(i).toVar(),t=me().toVar(),n=me().toVar(),r=me().toVar(),s=ue(gr(e.x,t)).toVar(),a=ue(gr(e.y,n)).toVar(),o=ue(gr(e.z,r)).toVar(),l=ue(Dl(s)).toVar(),u=ue(Dl(a)).toVar(),c=ue(Dl(o)).toVar(),p=ue(BU(_s(Ii(t,n,r),s,a,o),_s(Ii(t.add(me(1)),n,r),s.sub(1),a,o),_s(Ii(t,n.add(me(1)),r),s,a.sub(1),o),_s(Ii(t.add(me(1)),n.add(me(1)),r),s.sub(1),a.sub(1),o),_s(Ii(t,n,r.add(me(1))),s,a,o.sub(1)),_s(Ii(t.add(me(1)),n,r.add(me(1))),s.sub(1),a,o.sub(1)),_s(Ii(t,n.add(me(1)),r.add(me(1))),s,a.sub(1),o.sub(1)),_s(Ii(t.add(me(1)),n.add(me(1)),r.add(me(1))),s.sub(1),a.sub(1),o.sub(1)),l,u,c)).toVar();return IU(p)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),NS=Ws([koe,Hoe]),Woe=Te(([i])=>{const e=Ze(i).toVar(),t=me().toVar(),n=me().toVar(),r=ue(gr(e.x,t)).toVar(),s=ue(gr(e.y,n)).toVar(),a=ue(Dl(r)).toVar(),o=ue(Dl(s)).toVar(),l=be(DU(Wo(jo(t,n),r,s),Wo(jo(t.add(me(1)),n),r.sub(1),s),Wo(jo(t,n.add(me(1))),r,s.sub(1)),Wo(jo(t.add(me(1)),n.add(me(1))),r.sub(1),s.sub(1)),a,o)).toVar();return LU(l)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),joe=Te(([i])=>{const e=be(i).toVar(),t=me().toVar(),n=me().toVar(),r=me().toVar(),s=ue(gr(e.x,t)).toVar(),a=ue(gr(e.y,n)).toVar(),o=ue(gr(e.z,r)).toVar(),l=ue(Dl(s)).toVar(),u=ue(Dl(a)).toVar(),c=ue(Dl(o)).toVar(),p=be(BU(Wo(jo(t,n,r),s,a,o),Wo(jo(t.add(me(1)),n,r),s.sub(1),a,o),Wo(jo(t,n.add(me(1)),r),s,a.sub(1),o),Wo(jo(t.add(me(1)),n.add(me(1)),r),s.sub(1),a.sub(1),o),Wo(jo(t,n,r.add(me(1))),s,a,o.sub(1)),Wo(jo(t.add(me(1)),n,r.add(me(1))),s.sub(1),a,o.sub(1)),Wo(jo(t,n.add(me(1)),r.add(me(1))),s,a.sub(1),o.sub(1)),Wo(jo(t.add(me(1)),n.add(me(1)),r.add(me(1))),s.sub(1),a.sub(1),o.sub(1)),l,u,c)).toVar();return IU(p)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),P7=Ws([Woe,joe]),Xoe=Te(([i])=>{const e=ue(i).toVar(),t=me(qr(e)).toVar();return ua(Ii(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),Yoe=Te(([i])=>{const e=Ze(i).toVar(),t=me(qr(e.x)).toVar(),n=me(qr(e.y)).toVar();return ua(Ii(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),Qoe=Te(([i])=>{const e=be(i).toVar(),t=me(qr(e.x)).toVar(),n=me(qr(e.y)).toVar(),r=me(qr(e.z)).toVar();return ua(Ii(t,n,r))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),$oe=Te(([i])=>{const e=un(i).toVar(),t=me(qr(e.x)).toVar(),n=me(qr(e.y)).toVar(),r=me(qr(e.z)).toVar(),s=me(qr(e.w)).toVar();return ua(Ii(t,n,r,s))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),Koe=Ws([Xoe,Yoe,Qoe,$oe]),Zoe=Te(([i])=>{const e=ue(i).toVar(),t=me(qr(e)).toVar();return be(ua(Ii(t,me(0))),ua(Ii(t,me(1))),ua(Ii(t,me(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),Joe=Te(([i])=>{const e=Ze(i).toVar(),t=me(qr(e.x)).toVar(),n=me(qr(e.y)).toVar();return be(ua(Ii(t,n,me(0))),ua(Ii(t,n,me(1))),ua(Ii(t,n,me(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),e0e=Te(([i])=>{const e=be(i).toVar(),t=me(qr(e.x)).toVar(),n=me(qr(e.y)).toVar(),r=me(qr(e.z)).toVar();return be(ua(Ii(t,n,r,me(0))),ua(Ii(t,n,r,me(1))),ua(Ii(t,n,r,me(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),t0e=Te(([i])=>{const e=un(i).toVar(),t=me(qr(e.x)).toVar(),n=me(qr(e.y)).toVar(),r=me(qr(e.z)).toVar(),s=me(qr(e.w)).toVar();return be(ua(Ii(t,n,r,s,me(0))),ua(Ii(t,n,r,s,me(1))),ua(Ii(t,n,r,s,me(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),dm=Ws([Zoe,Joe,e0e,t0e]),qA=Te(([i,e,t,n])=>{const r=ue(n).toVar(),s=ue(t).toVar(),a=me(e).toVar(),o=be(i).toVar(),l=ue(0).toVar(),u=ue(1).toVar();return Oi(a,()=>{l.addAssign(u.mul(NS(o))),u.mulAssign(r),o.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Am=Te(([i,e,t,n])=>{const r=ue(n).toVar(),s=ue(t).toVar(),a=me(e).toVar(),o=be(i).toVar(),l=be(0).toVar(),u=ue(1).toVar();return Oi(a,()=>{l.addAssign(u.mul(P7(o))),u.mulAssign(r),o.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),n0e=Te(([i,e,t,n])=>{const r=ue(n).toVar(),s=ue(t).toVar(),a=me(e).toVar(),o=be(i).toVar();return Ze(qA(o,a,s,r),qA(o.add(be(me(19),me(193),me(17))),a,s,r))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),i0e=Te(([i,e,t,n])=>{const r=ue(n).toVar(),s=ue(t).toVar(),a=me(e).toVar(),o=be(i).toVar(),l=be(Am(o,a,s,r)).toVar(),u=ue(qA(o.add(be(me(19),me(193),me(17))),a,s,r)).toVar();return un(l,u)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),r0e=Te(([i,e,t,n,r,s,a])=>{const o=me(a).toVar(),l=ue(s).toVar(),u=me(r).toVar(),c=me(n).toVar(),p=me(t).toVar(),y=me(e).toVar(),_=Ze(i).toVar(),b=be(dm(Ze(y.add(c),p.add(u)))).toVar(),w=Ze(b.x,b.y).toVar();w.subAssign(.5),w.mulAssign(l),w.addAssign(.5);const E=Ze(Ze(ue(y),ue(p)).add(w)).toVar(),M=Ze(E.sub(_)).toVar();return _n(o.equal(me(2)),()=>tr(M.x).add(tr(M.y))),_n(o.equal(me(3)),()=>Mr(tr(M.x),tr(M.y))),Qu(M,M)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),s0e=Te(([i,e,t,n,r,s,a,o,l])=>{const u=me(l).toVar(),c=ue(o).toVar(),p=me(a).toVar(),y=me(s).toVar(),_=me(r).toVar(),b=me(n).toVar(),w=me(t).toVar(),E=me(e).toVar(),M=be(i).toVar(),P=be(dm(be(E.add(_),w.add(y),b.add(p)))).toVar();P.subAssign(.5),P.mulAssign(c),P.addAssign(.5);const D=be(be(ue(E),ue(w),ue(b)).add(P)).toVar(),B=be(D.sub(M)).toVar();return _n(u.equal(me(2)),()=>tr(B.x).add(tr(B.y)).add(tr(B.z))),_n(u.equal(me(3)),()=>Mr(tr(B.x),tr(B.y),tr(B.z))),Qu(B,B)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),u8=Ws([r0e,s0e]),a0e=Te(([i,e,t])=>{const n=me(t).toVar(),r=ue(e).toVar(),s=Ze(i).toVar(),a=me().toVar(),o=me().toVar(),l=Ze(gr(s.x,a),gr(s.y,o)).toVar(),u=ue(1e6).toVar();return Oi({start:-1,end:me(1),name:"x",condition:"<="},({x:c})=>{Oi({start:-1,end:me(1),name:"y",condition:"<="},({y:p})=>{const y=ue(u8(l,c,p,a,o,r,n)).toVar();u.assign(Ja(u,y))})}),_n(n.equal(me(0)),()=>{u.assign(kl(u))}),u}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),o0e=Te(([i,e,t])=>{const n=me(t).toVar(),r=ue(e).toVar(),s=Ze(i).toVar(),a=me().toVar(),o=me().toVar(),l=Ze(gr(s.x,a),gr(s.y,o)).toVar(),u=Ze(1e6,1e6).toVar();return Oi({start:-1,end:me(1),name:"x",condition:"<="},({x:c})=>{Oi({start:-1,end:me(1),name:"y",condition:"<="},({y:p})=>{const y=ue(u8(l,c,p,a,o,r,n)).toVar();_n(y.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(y)}).ElseIf(y.lessThan(u.y),()=>{u.y.assign(y)})})}),_n(n.equal(me(0)),()=>{u.assign(kl(u))}),u}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),l0e=Te(([i,e,t])=>{const n=me(t).toVar(),r=ue(e).toVar(),s=Ze(i).toVar(),a=me().toVar(),o=me().toVar(),l=Ze(gr(s.x,a),gr(s.y,o)).toVar(),u=be(1e6,1e6,1e6).toVar();return Oi({start:-1,end:me(1),name:"x",condition:"<="},({x:c})=>{Oi({start:-1,end:me(1),name:"y",condition:"<="},({y:p})=>{const y=ue(u8(l,c,p,a,o,r,n)).toVar();_n(y.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(y)}).ElseIf(y.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(y)}).ElseIf(y.lessThan(u.z),()=>{u.z.assign(y)})})}),_n(n.equal(me(0)),()=>{u.assign(kl(u))}),u}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),u0e=Te(([i,e,t])=>{const n=me(t).toVar(),r=ue(e).toVar(),s=be(i).toVar(),a=me().toVar(),o=me().toVar(),l=me().toVar(),u=be(gr(s.x,a),gr(s.y,o),gr(s.z,l)).toVar(),c=ue(1e6).toVar();return Oi({start:-1,end:me(1),name:"x",condition:"<="},({x:p})=>{Oi({start:-1,end:me(1),name:"y",condition:"<="},({y})=>{Oi({start:-1,end:me(1),name:"z",condition:"<="},({z:_})=>{const b=ue(u8(u,p,y,_,a,o,l,r,n)).toVar();c.assign(Ja(c,b))})})}),_n(n.equal(me(0)),()=>{c.assign(kl(c))}),c}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),c0e=Ws([a0e,u0e]),h0e=Te(([i,e,t])=>{const n=me(t).toVar(),r=ue(e).toVar(),s=be(i).toVar(),a=me().toVar(),o=me().toVar(),l=me().toVar(),u=be(gr(s.x,a),gr(s.y,o),gr(s.z,l)).toVar(),c=Ze(1e6,1e6).toVar();return Oi({start:-1,end:me(1),name:"x",condition:"<="},({x:p})=>{Oi({start:-1,end:me(1),name:"y",condition:"<="},({y})=>{Oi({start:-1,end:me(1),name:"z",condition:"<="},({z:_})=>{const b=ue(u8(u,p,y,_,a,o,l,r,n)).toVar();_n(b.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(b)}).ElseIf(b.lessThan(c.y),()=>{c.y.assign(b)})})})}),_n(n.equal(me(0)),()=>{c.assign(kl(c))}),c}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),f0e=Ws([o0e,h0e]),d0e=Te(([i,e,t])=>{const n=me(t).toVar(),r=ue(e).toVar(),s=be(i).toVar(),a=me().toVar(),o=me().toVar(),l=me().toVar(),u=be(gr(s.x,a),gr(s.y,o),gr(s.z,l)).toVar(),c=be(1e6,1e6,1e6).toVar();return Oi({start:-1,end:me(1),name:"x",condition:"<="},({x:p})=>{Oi({start:-1,end:me(1),name:"y",condition:"<="},({y})=>{Oi({start:-1,end:me(1),name:"z",condition:"<="},({z:_})=>{const b=ue(u8(u,p,y,_,a,o,l,r,n)).toVar();_n(b.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(b)}).ElseIf(b.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(b)}).ElseIf(b.lessThan(c.z),()=>{c.z.assign(b)})})})}),_n(n.equal(me(0)),()=>{c.assign(kl(c))}),c}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),PS=Ws([l0e,d0e]),A0e=Te(([i,e,t,n,r,s,a,o,l,u,c])=>{const p=me(i).toVar(),y=Ze(e).toVar(),_=Ze(t).toVar(),b=Ze(n).toVar(),w=ue(r).toVar(),E=ue(s).toVar(),M=ue(a).toVar(),P=t0(o).toVar(),D=me(l).toVar(),B=ue(u).toVar(),U=ue(c).toVar(),O=y.mul(_).add(b),z=ue(0).toVar();return _n(p.equal(me(0)),()=>{z.assign(P7(O))}),_n(p.equal(me(1)),()=>{z.assign(dm(O))}),_n(p.equal(me(2)),()=>{z.assign(PS(O,w,me(0)))}),_n(p.equal(me(3)),()=>{z.assign(Am(be(O,0),D,B,U))}),z.assign(z.mul(M.sub(E)).add(E)),_n(P,()=>{z.assign(n0(z,E,M))}),z}).setLayout({name:"mx_unifiednoise2d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"texcoord",type:"vec2"},{name:"freq",type:"vec2"},{name:"offset",type:"vec2"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),p0e=Te(([i,e,t,n,r,s,a,o,l,u,c])=>{const p=me(i).toVar(),y=be(e).toVar(),_=be(t).toVar(),b=be(n).toVar(),w=ue(r).toVar(),E=ue(s).toVar(),M=ue(a).toVar(),P=t0(o).toVar(),D=me(l).toVar(),B=ue(u).toVar(),U=ue(c).toVar(),O=y.mul(_).add(b),z=ue(0).toVar();return _n(p.equal(me(0)),()=>{z.assign(P7(O))}),_n(p.equal(me(1)),()=>{z.assign(dm(O))}),_n(p.equal(me(2)),()=>{z.assign(PS(O,w,me(0)))}),_n(p.equal(me(3)),()=>{z.assign(Am(O,D,B,U))}),z.assign(z.mul(M.sub(E)).add(E)),_n(P,()=>{z.assign(n0(z,E,M))}),z}).setLayout({name:"mx_unifiednoise3d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"position",type:"vec3"},{name:"freq",type:"vec3"},{name:"offset",type:"vec3"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),m0e=Te(([i])=>{const e=i.y,t=i.z,n=be().toVar();return _n(e.lessThan(1e-4),()=>{n.assign(be(t,t,t))}).Else(()=>{let r=i.x;r=r.sub(Cl(r)).mul(6).toVar();const s=me(Lb(r)),a=r.sub(ue(s)),o=t.mul(e.oneMinus()),l=t.mul(e.mul(a).oneMinus()),u=t.mul(e.mul(a.oneMinus()).oneMinus());_n(s.equal(me(0)),()=>{n.assign(be(t,u,o))}).ElseIf(s.equal(me(1)),()=>{n.assign(be(l,t,o))}).ElseIf(s.equal(me(2)),()=>{n.assign(be(o,t,u))}).ElseIf(s.equal(me(3)),()=>{n.assign(be(o,l,t))}).ElseIf(s.equal(me(4)),()=>{n.assign(be(u,o,t))}).Else(()=>{n.assign(be(t,o,l))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),g0e=Te(([i])=>{const e=be(i).toVar(),t=ue(e.x).toVar(),n=ue(e.y).toVar(),r=ue(e.z).toVar(),s=ue(Ja(t,Ja(n,r))).toVar(),a=ue(Mr(t,Mr(n,r))).toVar(),o=ue(a.sub(s)).toVar(),l=ue().toVar(),u=ue().toVar(),c=ue().toVar();return c.assign(a),_n(a.greaterThan(0),()=>{u.assign(o.div(a))}).Else(()=>{u.assign(0)}),_n(u.lessThanEqual(0),()=>{l.assign(0)}).Else(()=>{_n(t.greaterThanEqual(a),()=>{l.assign(n.sub(r).div(o))}).ElseIf(n.greaterThanEqual(a),()=>{l.assign(kr(2,r.sub(t).div(o)))}).Else(()=>{l.assign(kr(4,t.sub(n).div(o)))}),l.mulAssign(1/6),_n(l.lessThan(0),()=>{l.addAssign(1)})}),be(l,u,c)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),y0e=Te(([i])=>{const e=be(i).toVar(),t=vb(Rb(e,be(.04045))).toVar(),n=be(e.div(12.92)).toVar(),r=be(Yo(Mr(e.add(be(.055)),be(0)).div(1.055),be(2.4))).toVar();return xi(n,r,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),OU=(i,e)=>{i=ue(i),e=ue(e);const t=Ze(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return Ol(i.sub(t),i.add(t),e)},FU=(i,e,t,n)=>xi(i,e,t[n].clamp()),v0e=(i,e,t=qi())=>FU(i,e,t,"x"),_0e=(i,e,t=qi())=>FU(i,e,t,"y"),x0e=(i,e,t,n,r=qi())=>{const s=r.x.clamp(),a=r.y.clamp(),o=xi(i,e,s),l=xi(t,n,s);return xi(o,l,a)},VU=(i,e,t,n,r)=>xi(i,e,OU(t,n[r])),b0e=(i,e,t,n=qi())=>VU(i,e,t,n,"x"),S0e=(i,e,t,n=qi())=>VU(i,e,t,n,"y"),T0e=(i=1,e=0,t=qi())=>t.mul(i).add(e),M0e=(i,e=1)=>(i=ue(i),i.abs().pow(e).mul(i.sign())),E0e=(i,e=1,t=.5)=>ue(i).sub(t).mul(e).add(t),w0e=(i=qi(),e=1,t=0)=>NS(i.convert("vec2|vec3")).mul(e).add(t),R0e=(i=qi(),e=1,t=0)=>P7(i.convert("vec2|vec3")).mul(e).add(t),C0e=(i=qi(),e=1,t=0)=>(i=i.convert("vec2|vec3"),un(P7(i),NS(i.add(Ze(19,73)))).mul(e).add(t)),N0e=(i,e=qi(),t=Ze(1,1),n=Ze(0,0),r=1,s=0,a=1,o=!1,l=1,u=2,c=.5)=>A0e(i,e.convert("vec2|vec3"),t,n,r,s,a,o,l,u,c),P0e=(i,e=qi(),t=Ze(1,1),n=Ze(0,0),r=1,s=0,a=1,o=!1,l=1,u=2,c=.5)=>p0e(i,e.convert("vec2|vec3"),t,n,r,s,a,o,l,u,c),D0e=(i=qi(),e=1)=>c0e(i.convert("vec2|vec3"),e,me(1)),B0e=(i=qi(),e=1)=>f0e(i.convert("vec2|vec3"),e,me(1)),L0e=(i=qi(),e=1)=>PS(i.convert("vec2|vec3"),e,me(1)),I0e=(i=qi())=>Koe(i.convert("vec2|vec3")),U0e=(i=qi(),e=3,t=2,n=.5,r=1)=>qA(i,me(e),t,n).mul(r),O0e=(i=qi(),e=3,t=2,n=.5,r=1)=>n0e(i,me(e),t,n).mul(r),F0e=(i=qi(),e=3,t=2,n=.5,r=1)=>Am(i,me(e),t,n).mul(r),V0e=(i=qi(),e=3,t=2,n=.5,r=1)=>i0e(i,me(e),t,n).mul(r),z0e=(i,e=ue(0))=>kr(i,e),G0e=(i,e=ue(0))=>oi(i,e),q0e=(i,e=ue(1))=>Pn(i,e),k0e=(i,e=ue(1))=>Co(i,e),H0e=(i,e=ue(1))=>_7(i,e),W0e=(i,e=ue(1))=>Yo(i,e),j0e=(i=ue(0),e=ue(1))=>Kp(i,e),X0e=()=>l8,Y0e=()=>ZI,Q0e=(i,e=ue(1))=>oi(e,i),$0e=(i,e,t,n)=>i.greaterThan(e).mix(t,n),K0e=(i,e,t,n)=>i.greaterThanEqual(e).mix(t,n),Z0e=(i,e,t,n)=>i.equal(e).mix(t,n),J0e=(i,e=null)=>{if(typeof e=="string"){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},n=e.replace(/^out/,"").toLowerCase();if(t[n]!==void 0)return i.element(t[n])}if(typeof e=="number")return i.element(e);if(typeof e=="string"&&e.length===1){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3};if(t[e]!==void 0)return i.element(t[e])}return i},ele=(i,e=Ze(.5,.5),t=Ze(1,1),n=ue(0),r=Ze(0,0))=>{let s=i;if(e&&(s=s.sub(e)),t&&(s=s.mul(t)),n){const a=n.mul(Math.PI/180),o=a.cos(),l=a.sin();s=Ze(s.x.mul(o).sub(s.y.mul(l)),s.x.mul(l).add(s.y.mul(o)))}return e&&(s=s.add(e)),r&&(s=s.add(r)),s},tle=(i,e)=>{i=Ze(i),e=ue(e);const t=e.mul(Math.PI/180);return w7(i,t)},nle=(i,e,t)=>{i=be(i),e=ue(e),t=be(t);const n=e.mul(Math.PI/180),r=t.normalize(),s=n.cos(),a=n.sin(),o=ue(1).sub(s);return i.mul(s).add(r.cross(i).mul(a)).add(r.mul(r.dot(i)).mul(o))},ile=(i,e)=>(i=be(i),e=ue(e),tS(i,e)),rle=Te(([i,e,t])=>{const n=G1(i).toVar(),r=oi(ue(.5).mul(e.sub(t)),Pl).div(n).toVar(),s=oi(ue(-.5).mul(e.sub(t)),Pl).div(n).toVar(),a=be().toVar();a.x=n.x.greaterThan(ue(0)).select(r.x,s.x),a.y=n.y.greaterThan(ue(0)).select(r.y,s.y),a.z=n.z.greaterThan(ue(0)).select(r.z,s.z);const o=Ja(a.x,a.y,a.z).toVar();return Pl.add(n.mul(o)).toVar().sub(t)}),zU=Te(([i,e])=>{const t=i.x,n=i.y,r=i.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(r)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(6).mul(r.mul(r).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(8).mul(.429043).mul(Pn(t,t).sub(Pn(n,n)))),s});var k=Object.freeze({__proto__:null,BRDF_GGX:v_,BRDF_Lambert:r3,BasicPointShadowFilter:RU,BasicShadowFilter:_U,Break:dI,Const:UB,Continue:cne,DFGApprox:dS,D_GGX:DI,Discard:ZB,EPSILON:rB,F_Schlick:Y5,Fn:Te,INFINITY:Fee,If:_n,Loop:Oi,NodeAccess:zs,NodeShaderStage:Kh,NodeType:oee,NodeUpdateType:kn,OnMaterialUpdate:yse,OnObjectUpdate:gse,PCFShadowFilter:xU,PCFSoftShadowFilter:bU,PI:UA,PI2:Vee,PointShadowFilter:CU,Return:tte,Schlick_to_F0:LI,ScriptableNodeResources:Ud,ShaderNode:h5,Stack:Hp,Switch:Cee,TBNViewMatrix:mc,VSMShadowFilter:SU,V_GGX_SmithCorrelated:PI,Var:IB,VarIntent:OB,abs:tr,acesFilmicToneMapping:hU,acos:Pb,add:kr,addMethodChaining:je,addNodeElement:rte,agxToneMapping:fU,all:sB,alphaT:BA,and:kD,anisotropy:Mu,anisotropyB:Sc,anisotropyT:u6,any:aB,append:Bee,array:UD,arrayBuffer:Pee,asin:cB,assign:OD,atan:Kp,atan2:PB,atomicAdd:Sae,atomicAnd:wae,atomicFunc:Wl,atomicLoad:xae,atomicMax:Mae,atomicMin:Eae,atomicOr:Rae,atomicStore:bae,atomicSub:Tae,atomicXor:Cae,attenuationColor:Tb,attenuationDistance:Sb,attribute:k1,attributeArray:_se,backgroundBlurriness:nU,backgroundIntensity:M_,backgroundRotation:iU,batch:cI,bentNormalView:RL,billboarding:ese,bitAnd:XD,bitNot:YD,bitOr:QD,bitXor:$D,bitangentGeometry:kte,bitangentLocal:Hte,bitangentView:EL,bitangentWorld:Wte,bitcast:Lre,blendBurn:vI,blendColor:wne,blendDodge:_I,blendOverlay:bI,blendScreen:xI,blur:zI,bool:t0,buffer:S7,bufferAttribute:b7,builtin:W1,bumpMap:tS,burn:Cne,bvec2:ED,bvec3:vb,bvec4:ND,bypass:YB,cache:h6,call:FD,cameraFar:Ru,cameraIndex:$u,cameraNear:wu,cameraNormalMatrix:yte,cameraPosition:rL,cameraProjectionMatrix:s8,cameraProjectionMatrixInverse:mte,cameraViewMatrix:c0,cameraViewport:vte,cameraWorldMatrix:gte,cbrt:EB,cdl:Use,ceil:$p,checker:boe,cineonToneMapping:cU,clamp:n0,clearcoat:DA,clearcoatNormalView:pc,clearcoatRoughness:k6,code:cm,color:TD,colorSpaceToWorking:em,colorToDirection:Vne,compute:XB,computeKernel:Hb,computeSkinning:lne,context:x7,convert:DD,convertColorSpace:jee,convertToTexture:fse,cos:g1,cross:Jp,cubeTexture:X5,cubeTextureBase:eS,cubeToUV:L0,dFdx:Db,dFdy:Bb,dashSize:Rd,debug:eL,decrement:nB,decrementBefore:eB,defaultBuildStages:s_,defaultShaderStages:yD,defined:V6,degrees:lB,deltaTime:Xre,densityFog:rae,densityFogFactor:bS,depth:uS,depthPass:Gse,determinant:gB,difference:bB,diffuseColor:Mi,directPointLight:PU,directionToColor:TI,directionToFaceDirection:a8,dispersion:Mb,distance:xB,div:Co,dodge:Nne,dot:Qu,drawIndex:oI,dynamicBufferAttribute:jB,element:PD,emissive:u_,equal:wb,equals:vB,equirectUV:cS,exp:Cb,exp2:W5,expression:q1,faceDirection:Kb,faceForward:Vb,faceforward:zee,float:ue,floatBitsToInt:Ire,floatBitsToUint:Ure,floor:Cl,fog:j6,fract:H1,frameGroup:ID,frameId:ZI,frontFacing:lL,fwidth:pB,gain:zre,gapSize:c_,getConstNodeType:SD,getCurrentStack:kp,getDirection:FI,getDistanceAttenuation:CS,getGeometryRoughness:NI,getNormalFromDepth:Ase,getParallaxCorrectNormal:rle,getRoughness:fS,getScreenPosition:dse,getShIrradianceAt:zU,getShadowMaterial:TU,getShadowRenderObjectFunction:MU,getTextureIndex:$I,getViewPosition:r5,globalId:cae,glsl:$se,glslFn:Kse,grayscale:Dse,greaterThan:Rb,greaterThanEqual:qD,hash:Vre,highpModelNormalViewMatrix:d_,highpModelViewMatrix:f_,hue:Ise,increment:tB,incrementBefore:JD,instance:tne,instanceIndex:Ou,instancedArray:xse,instancedBufferAttribute:OA,instancedDynamicBufferAttribute:h_,instancedMesh:uI,int:me,intBitsToFloat:Ore,inverse:yB,inverseSqrt:Nb,inversesqrt:Gee,invocationLocalIndex:ene,invocationSubgroupIndex:Jte,ior:c6,iridescence:Xp,iridescenceIOR:_b,iridescenceThickness:xb,ivec2:is,ivec3:wD,ivec4:RD,js:Yse,label:LB,length:Nl,lengthSq:Ub,lessThan:zD,lessThanEqual:GD,lightPosition:TS,lightProjectionUV:yU,lightShadowMatrix:fm,lightTargetDirection:ES,lightTargetPosition:vU,lightViewPosition:MS,lightingContext:pI,lights:ioe,linearDepth:VA,linearToneMapping:lU,localId:hae,log:Qp,log2:Rl,logarithmicDepthToViewZ:vne,luminance:_S,mat2:Wp,mat3:ca,mat4:bc,matcapUV:kI,materialAO:sI,materialAlphaTest:CL,materialAnisotropy:HL,materialAnisotropyVector:i5,materialAttenuationColor:ZL,materialAttenuationDistance:KL,materialClearcoat:FL,materialClearcoatNormal:zL,materialClearcoatRoughness:VL,materialColor:NL,materialDispersion:rI,materialEmissive:DL,materialEnvIntensity:Pd,materialEnvRotation:Jb,materialIOR:$L,materialIridescence:WL,materialIridescenceIOR:jL,materialIridescenceThickness:XL,materialLightMap:iS,materialLineDashOffset:nI,materialLineDashSize:eI,materialLineGapSize:tI,materialLineScale:JL,materialLineWidth:Kte,materialMetalness:UL,materialNormal:OL,materialOpacity:nS,materialPointSize:iI,materialReference:_1,materialReflectivity:Dd,materialRefractionRatio:fL,materialRotation:GL,materialRoughness:IL,materialSheen:qL,materialSheenRoughness:kL,materialShininess:PL,materialSpecular:BL,materialSpecularColor:LL,materialSpecularIntensity:y_,materialSpecularStrength:f6,materialThickness:QL,materialTransmission:YL,max:Mr,maxMipLevel:Wb,mediumpModelViewMatrix:oL,metalness:q6,min:Ja,mix:xi,mixElement:RB,mod:_7,modInt:iB,modelDirection:Mte,modelNormalMatrix:aL,modelPosition:Ete,modelRadius:Cte,modelScale:wte,modelViewMatrix:y3,modelViewPosition:Rte,modelViewProjection:rS,modelWorldMatrix:Qo,modelWorldMatrixInverse:Nte,morphReference:AI,mrt:KI,mul:Pn,mx_aastep:OU,mx_add:z0e,mx_atan2:j0e,mx_cell_noise_float:I0e,mx_contrast:E0e,mx_divide:k0e,mx_fractal_noise_float:U0e,mx_fractal_noise_vec2:O0e,mx_fractal_noise_vec3:F0e,mx_fractal_noise_vec4:V0e,mx_frame:Y0e,mx_heighttonormal:ile,mx_hsvtorgb:m0e,mx_ifequal:Z0e,mx_ifgreater:$0e,mx_ifgreatereq:K0e,mx_invert:Q0e,mx_modulo:H0e,mx_multiply:q0e,mx_noise_float:w0e,mx_noise_vec3:R0e,mx_noise_vec4:C0e,mx_place2d:ele,mx_power:W0e,mx_ramp4:x0e,mx_ramplr:v0e,mx_ramptb:_0e,mx_rgbtohsv:g0e,mx_rotate2d:tle,mx_rotate3d:nle,mx_safepower:M0e,mx_separate:J0e,mx_splitlr:b0e,mx_splittb:S0e,mx_srgb_texture_to_lin_rec709:y0e,mx_subtract:G0e,mx_timer:X0e,mx_transform_uv:T0e,mx_unifiednoise2d:N0e,mx_unifiednoise3d:P0e,mx_worley_noise_float:D0e,mx_worley_noise_vec2:B0e,mx_worley_noise_vec3:L0e,negate:hB,neutralToneMapping:dU,nodeArray:xc,nodeImmutable:Nt,nodeObject:$e,nodeObjectIntent:Zh,nodeObjects:qp,nodeProxy:Mn,nodeProxyIntent:Et,normalFlat:uL,normalGeometry:tm,normalLocal:eo,normalMap:g_,normalView:Ui,normalViewGeometry:j5,normalWorld:Ku,normalWorldGeometry:cL,normalize:G1,not:WD,notEqual:VD,numWorkgroups:lae,objectDirection:_te,objectGroup:Eb,objectPosition:sL,objectRadius:Tte,objectScale:bte,objectViewPosition:Ste,objectWorldMatrix:xte,oneMinus:fB,or:HD,orthographicDepthToViewZ:yne,oscSawtooth:Kre,oscSine:Yre,oscSquare:Qre,oscTriangle:$re,output:y5,outputStruct:Dre,overlay:Dne,overloadingFn:Ws,parabola:T_,parallaxDirection:wL,parallaxUV:jte,parameter:Ere,pass:Vse,passTexture:zse,pcurve:Gre,perspectiveDepthToViewZ:oS,pmremTexture:gS,pointShadow:NU,pointUV:Sse,pointWidth:Lee,positionGeometry:M7,positionLocal:Or,positionPrevious:FA,positionView:Fr,positionViewDirection:fr,positionWorld:Pl,positionWorldDirection:$b,posterize:Fse,pow:Yo,pow2:Ib,pow3:SB,pow4:TB,premultiplyAlpha:SI,property:C1,quadBroadcast:eoe,quadSwapDiagonal:Yae,quadSwapX:jae,quadSwapY:Xae,radians:oB,rand:wB,range:aae,rangeFog:iae,rangeFogFactor:xS,reciprocal:AB,reference:ji,referenceBuffer:A_,reflect:_B,reflectVector:pL,reflectView:dL,reflector:ose,refract:Fb,refractVector:mL,refractView:AL,reinhardToneMapping:uU,remap:$B,remapClamp:KB,renderGroup:rn,renderOutput:JB,rendererReference:kB,rotate:w7,rotateUV:Zre,roughness:xl,round:dB,rtt:eU,sRGBTransferEOTF:VB,sRGBTransferOETF:zB,sample:mse,sampler:ute,samplerComparison:cte,saturate:Ob,saturation:Bse,screen:Pne,screenCoordinate:T7,screenDPR:nL,screenSize:i3,screenUV:N1,scriptable:nae,scriptableValue:Id,select:xs,setCurrentStack:z6,setName:zb,shaderStages:a_,shadow:wU,shadowPositionWorld:RS,shapeCircle:Soe,sharedUniformGroup:Yp,sheen:Ac,sheenRoughness:jp,shiftLeft:KD,shiftRight:ZD,shininess:LA,sign:W6,sin:To,sinc:qre,skinning:fI,smoothstep:Ol,smoothstepElement:CB,specularColor:Oa,specularF90:H6,spherizeUV:Jre,split:Dee,spritesheetUV:ise,sqrt:kl,stack:Bd,step:Zp,stepElement:NB,storage:Tc,storageBarrier:pae,storageObject:one,storageTexture:rU,string:Nee,struct:Pre,sub:oi,subBuild:v5,subgroupAdd:Dae,subgroupAll:kae,subgroupAnd:Fae,subgroupAny:Hae,subgroupBallot:Pae,subgroupBroadcast:Qae,subgroupBroadcastFirst:Wae,subgroupElect:Nae,subgroupExclusiveAdd:Lae,subgroupExclusiveMul:Oae,subgroupInclusiveAdd:Bae,subgroupInclusiveMul:Uae,subgroupIndex:Zte,subgroupMax:qae,subgroupMin:Gae,subgroupMul:Iae,subgroupOr:Vae,subgroupShuffle:$ae,subgroupShuffleDown:Jae,subgroupShuffleUp:Zae,subgroupShuffleXor:Kae,subgroupSize:fae,subgroupXor:zae,tan:uB,tangentGeometry:im,tangentLocal:E7,tangentView:rm,tangentWorld:ML,texture:si,texture3D:sU,textureBarrier:mae,textureBicubic:lie,textureBicubicLevel:AS,textureCubeUV:VI,textureLoad:Br,textureSize:Uu,textureStore:Mse,thickness:bb,time:l8,toneMapping:HB,toneMappingExposure:WB,toonOutlinePass:kse,transformDirection:MB,transformNormal:hL,transformNormalToView:Zb,transformedClearcoatNormalView:Lte,transformedNormalView:Dte,transformedNormalWorld:Bte,transmission:IA,transpose:mB,triNoise3D:Hre,triplanarTexture:rse,triplanarTextures:JI,trunc:Lb,uint:zt,uintBitsToFloat:Fre,uniform:on,uniformArray:ra,uniformCubeTexture:Ute,uniformFlow:BB,uniformGroup:LD,uniformTexture:lte,unpremultiplyAlpha:Rne,userData:Cse,uv:qi,uvec2:MD,uvec3:r8,uvec4:CD,varying:Hl,varyingProperty:G6,vec2:Ze,vec3:be,vec4:un,vectorComponents:m3,velocity:Pse,vertexColor:yI,vertexIndex:aI,vertexStage:FB,vibrance:Lse,viewZToLogarithmicDepth:lS,viewZToOrthographicDepth:_5,viewZToPerspectiveDepth:mI,viewport:Yb,viewportCoordinate:iL,viewportDepthTexture:aS,viewportLinearDepth:_ne,viewportMipTexture:sS,viewportResolution:pte,viewportSafeUV:tse,viewportSharedTexture:Fne,viewportSize:Qb,viewportTexture:mne,viewportUV:Ate,wgsl:Qse,wgslFn:Zse,workgroupArray:vae,workgroupBarrier:Aae,workgroupId:uae,workingToColorSpace:GB,xor:jD});const C0=new yS;class sle extends Zu{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const r=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let a=!1;if(s===null)r._clearColor.getRGB(C0),C0.a=r._clearColor.a;else if(s.isColor===!0)s.getRGB(C0),C0.a=1,a=!0;else if(s.isNode===!0){const l=this.get(e),u=s;C0.copy(r._clearColor);let c=l.backgroundMesh;if(c===void 0){let w=function(){s.removeEventListener("dispose",w),c.material.dispose(),c.geometry.dispose()};const y=x7(un(u).mul(M_),{getUV:()=>iU.mul(cL),getTextureLevel:()=>nU});let _=rS;_=_.setZ(_.w);const b=new Vr;b.name="Background.material",b.side=Fi,b.depthTest=!1,b.depthWrite=!1,b.allowOverride=!1,b.fog=!1,b.lights=!1,b.vertexNode=_,b.colorNode=y,l.backgroundMeshNode=y,l.backgroundMesh=c=new Jn(new o0(1,32,32),b),c.frustumCulled=!1,c.name="Background.mesh",c.onBeforeRender=function(E,M,P){this.matrixWorld.copyPosition(P.matrixWorld)},s.addEventListener("dispose",w)}const p=u.getCacheKey();l.backgroundCacheKey!==p&&(l.backgroundMeshNode.node=un(u).mul(M_),l.backgroundMeshNode.needsUpdate=!0,c.material.needsUpdate=!0,l.backgroundCacheKey=p),t.unshift(c,c.geometry,c.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);const o=r.xr.getEnvironmentBlendMode();if(o==="additive"?C0.set(0,0,0,1):o==="alpha-blend"&&C0.set(0,0,0,0),r.autoClear===!0||a===!0){const l=n.clearColorValue;l.r=C0.r,l.g=C0.g,l.b=C0.b,l.a=C0.a,(r.backend.isWebGLBackend===!0||r.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=r.autoClearColor===!0,n.clearDepth=r.autoClearDepth===!0,n.clearStencil=r.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let ale=0;class E_{constructor(e="",t=[],n=0,r=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=r,this.id=ale++}}class ole{constructor(e,t,n,r,s,a,o,l,u,c=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=c,this.nodeAttributes=r,this.bindings=s,this.updateNodes=a,this.updateBeforeNodes=o,this.updateAfterNodes=l,this.observer=u,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const r=new E_(t.name,[],t.index,t.bindingsReference);e.push(r);for(const s of t.bindings)r.bindings.push(s.clone())}else e.push(t);return e}}class uR{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class lle{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class GU{constructor(e,t,n=!1,r=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=r}}class ule extends GU{constructor(e,t,n=null,r=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=n,this.interpolationSampling=r}}class cle{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let hle=0;class Ey{constructor(e=null){this.id=hle++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class fle{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class Ju{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class dle extends Ju{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class Ale extends Ju{constructor(e,t=new He){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class ple extends Ju{constructor(e,t=new te){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class mle extends Ju{constructor(e,t=new an){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class gle extends Ju{constructor(e,t=new Dt){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class yle extends Ju{constructor(e,t=new p7){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class vle extends Ju{constructor(e,t=new Vn){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class _le extends Ju{constructor(e,t=new $t){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class xle extends dle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class ble extends Ale{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Sle extends ple{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Tle extends mle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Mle extends gle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Ele extends yle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class wle extends vle{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Rle extends _le{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const cR=new WeakMap,Cle=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),ed=i=>/e/g.test(i)?String(i).replace(/\+/g,""):(i=Number(i),i+(i%1?"":".0"));class qU{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.types={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=Bd(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new Ey,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.currentStack=null,this.subBuildFn=null}getBindGroupsCache(){let e=cR.get(this.renderer);return e===void 0&&(e=new H0,cR.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new W0(e,t,n)}createCubeRenderTarget(e,t){return new MI(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),r=[];let s=!0;for(const o of t)r.push(o),s=s&&o.groupNode.shared!==!0;let a;return s?(a=n.get(r),a===void 0&&(a=new E_(e,r,this.bindingsIndexes[e].group,r),n.set(r,a))):a=new E_(e,r,this.bindingsIndexes[e].group,r),a}getBindGroupArray(e,t){const n=this.bindings[t];let r=n[e];return r===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const r of a_)for(const s in n[r]){const a=n[r][s];(t[s]||(t[s]=[])).push(...a)}e=[];for(const r in t){const s=t[r],a=this._getBindGroup(r,s);e.push(a)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==kn.NONE&&this.updateNodes.push(e);for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==kn.NONE&&this.updateBeforeNodes.push(e),n!==kn.NONE&&this.updateAfterNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Qi||e.magFilter===Bu||e.magFilter===O0||e.magFilter===Fs||e.minFilter===Qi||e.minFilter===Bu||e.minFilter===O0||e.minFilter===Fs}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getTernary(){return null}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new Ey(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let r=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const a=n?n[s]:null;a!==null?r+=a.build(this,e):r+=this.generateConst(e),s<t-1&&(r+=", ")}return r+=" )",r}generateStruct(e,t,n=null){const r=[];for(const s of t){const{name:a,type:o}=s;n&&n[a]&&n[a].isNode?r.push(n[a].build(this,o)):r.push(this.generateConst(o))}return e+"( "+r.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Dt:e==="vec2"?t=new He:e==="vec3"?t=new te:e==="vec4"&&(t=new an)),e==="float")return ed(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${ed(t.r)}, ${ed(t.g)}, ${ed(t.b)} )`;const n=this.getTypeLength(e),r=this.getComponentType(e),s=a=>this.generateConst(r,a);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4&&e!=="mat2")return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const r=new uR(e,t);return this.registerDeclaration(r),n.push(r),r}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===rs)return"int";if(t===zi)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=dD(e);const r=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),r+n}getTypeFromArray(e){return Cle.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,r=e.itemSize,s=e.normalized;let a;return!(e instanceof ox)&&s!==!0&&(a=this.getTypeFromArray(n)),this.getTypeFromLength(r,a)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){this.stack=Bd(this.stack);const e=kp();return this.stacks.push(e),z6(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,z6(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let r=n.getData(e);r===void 0&&(r={},n.setData(e,r)),r[t]===void 0&&(r[t]={});let s=r[t];const a=r.any?r.any.subBuilds:null,o=this.getClosestSubBuild(a);return o&&(s.subBuildsCache===void 0&&(s.subBuildsCache={}),s=s.subBuildsCache[o]||(s.subBuildsCache[o]={}),s.subBuilds=a),s}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let r=n.bufferAttribute;if(r===void 0){const s=this.uniforms.index++;r=new uR("nodeAttribute"+s,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}getStructTypeNode(e,t=this.shaderStage){return this.types[t][e]||null}getStructTypeFromNode(e,t,n=null,r=this.shaderStage){const s=this.getDataFromNode(e,r,this.globalCache);let a=s.structType;if(a===void 0){const o=this.structs.index++;n===null&&(n="StructType"+o),a=new fle(n,t),this.structs[r].push(a),this.types[r][n]=e,s.structType=a}return a}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,r=null){const s=this.getDataFromNode(e,n,this.globalCache);let a=s.uniform;if(a===void 0){const o=this.uniforms.index++;a=new lle(r||"nodeUniform"+o,t,e),this.uniforms[n].push(a),this.registerDeclaration(a),s.uniform=a}return a}getVarFromNode(e,t=null,n=e.getNodeType(this),r=this.shaderStage,s=!1){const a=this.getDataFromNode(e,r),o=this.getSubBuildProperty("variable",a.subBuilds);let l=a[o];if(l===void 0){const u=s?"_const":"_var",c=this.vars[r]||(this.vars[r]=[]),p=this.vars[u]||(this.vars[u]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+p,this.vars[u]++),o!=="variable"&&(t=this.getSubBuildProperty(t,a.subBuilds));const y=e.getArrayCount(this);l=new GU(t,n,s,y),s||c.push(l),this.registerDeclaration(l),a[o]=l}return l}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this),r=null,s=null){const a=this.getDataFromNode(e,"any"),o=this.getSubBuildProperty("varying",a.subBuilds);let l=a[o];if(l===void 0){const u=this.varyings,c=u.length;t===null&&(t="nodeVarying"+c),o!=="varying"&&(t=this.getSubBuildProperty(t,a.subBuilds)),l=new ule(t,n,r,s),u.push(l),this.registerDeclaration(l),a[o]=l}return l}registerDeclaration(e){const t=this.shaderStage,n=this.declarations[t]||(this.declarations[t]={}),r=this.getPropertyName(e);let s=1,a=r;for(;n[a]!==void 0;)a=r+"_"+s++;s>1&&(e.name=a,console.warn(`THREE.TSL: Declaration name '${r}' of '${e.type}' already in use. Renamed to '${a}'.`)),n[a]=e}getCodeFromNode(e,t,n=this.shaderStage){const r=this.getDataFromNode(e);let s=r.code;if(s===void 0){const a=this.codes[n]||(this.codes[n]=[]),o=a.length;s=new cle("nodeCode"+o,t),a.push(s),r.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:r}=this.getDataFromNode(e);let s=!0,a=t;for(;a;){if(r.get(a)===!0){s=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(s)for(const o of n)this.addLineFlowCode(o)}addLineFlowCodeBlock(e,t,n){const r=this.getDataFromNode(e),s=r.flowCodes||(r.flowCodes=[]),a=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);s.push(t),a.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new AU,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let a=0;const o=Object.values(this);return{next:()=>({value:o[a],done:a++>=o.length})}}};for(const a of t.inputs)n[a.name]=new YI(a.type,a.name);e.layout=null;const r=e.call(n),s=this.flowStagesNode(r,t.type);return e.layout=t,s}flowBuildStage(e,t,n=null){const r=this.getBuildStage();this.setBuildStage(t);const s=e.build(this,n);return this.setBuildStage(r),s}flowStagesNode(e,t=null){const n=this.flow,r=this.vars,s=this.declarations,a=this.cache,o=this.buildStage,l=this.stack,u={code:""};this.flow=u,this.vars={},this.declarations={},this.cache=new Ey,this.stack=Bd();for(const c of s_)this.setBuildStage(c),u.result=e.build(this,t);return u.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.declarations=s,this.cache=a,this.stack=l,this.setBuildStage(o),u}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,t=null){const n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}flowNodeFromShaderStage(e,t,n=null,r=null){const s=this.tab,a=this.cache,o=this.shaderStage,l=this.context;this.setShaderStage(e);const u={...this.context};delete u.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=u;let c=null;if(this.buildStage==="generate"){const p=this.flowChildNode(t,n);r!==null&&(p.code+=`${this.tab+r} = ${p.result};
`),this.flowCode[e]=this.flowCode[e]+p.code,c=p}else c=t.build(this);return this.setShaderStage(o),this.cache=a,this.tab=s,this.context=l,c}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const r of n)t+=`${this.getVar(r.type,r.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const r of t)n+=r.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let t;if(e&&e.isNode?e.isShaderCallNodeInternal?t=e.shaderNode.subBuilds:e.isStackNode?t=[e.subBuild]:t=this.getDataFromNode(e,"any").subBuilds:e instanceof Set?t=[...e]:t=e,!t)return null;const n=this.subBuildLayers;for(let r=t.length-1;r>=0;r--){const s=t[r];if(n.includes(s))return s}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",t=null){let n;t!==null?n=this.getClosestSubBuild(t):n=this.subBuildFn;let r;return n?r=e?n+"_"+e:n:r=e,r}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let r=n.library.fromMaterial(t);r===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),r=new Vr),r.build(this)}else this.addFlow("compute",e);for(const r of s_){this.setBuildStage(r),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of a_){this.setShaderStage(s);const a=this.flowNodes[s];for(const o of a)r==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new xle(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new ble(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new Sle(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new Tle(e);if(t==="color")return new Mle(e);if(t==="mat2")return new Ele(e);if(t==="mat3")return new wle(e);if(t==="mat4")return new Rle(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const r=this.getTypeLength(t),s=this.getTypeLength(n);return r===16&&s===9?`${this.getType(n)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:r===9&&s===4?`${this.getType(n)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:r>4||s>4||s===0?e:r===s?`${this.getType(n)}( ${e} )`:r>s?(e=n==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,s)}`,this.format(e,this.getTypeFromLength(s,this.getComponentType(t)),n)):s===4&&r>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:r===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(r===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${Z5} - Node System
`}}class hR{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===kn.FRAME){const{frameMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&r.set(n,this.frameId)}else if(t===kn.RENDER){const{renderMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&r.set(n,this.renderId)}else t===kn.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===kn.FRAME){const{frameMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&r.set(n,this.frameId)}else if(t===kn.RENDER){const{renderMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&r.set(n,this.renderId)}else t===kn.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===kn.FRAME){const{frameMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.frameId&&e.update(this)!==!1&&r.set(n,this.frameId)}else if(t===kn.RENDER){const{renderMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.renderId&&e.update(this)!==!1&&r.set(n,this.renderId)}else t===kn.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class DS{constructor(e,t,n=null,r="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=r,this.isConst=s}}DS.isNodeFunctionInput=!0;class Nle extends v3{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:ES(this.light),lightColor:e}}}const wy=new $t,td=new $t;let Ih=null;class Ple extends v3{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=on(new te).setGroup(rn),this.halfWidth=on(new te).setGroup(rn),this.updateType=kn.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;td.identity(),wy.copy(t.matrixWorld),wy.premultiply(n),td.extractRotation(wy),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(td),this.halfHeight.value.applyMatrix4(td)}setupDirectRectArea(e){let t,n;e.isAvailable("float32Filterable")?(t=si(Ih.LTC_FLOAT_1),n=si(Ih.LTC_FLOAT_2)):(t=si(Ih.LTC_HALF_1),n=si(Ih.LTC_HALF_2));const{colorNode:r,light:s}=this,a=MS(s);return{lightColor:r,lightPosition:a,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:n}}static setLTC(e){Ih=e}}class BS extends v3{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=on(0).setGroup(rn),this.penumbraCosNode=on(0).setGroup(rn),this.cutoffDistanceNode=on(0).setGroup(rn),this.decayExponentNode=on(0).setGroup(rn),this.colorNode=on(this.color).setGroup(rn)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){const{coneCosNode:n,penumbraCosNode:r}=this;return Ol(n,r,t)}getLightCoord(e){const t=e.getNodeProperties(this);let n=t.projectionUV;return n===void 0&&(n=yU(this.light,e.context.positionWorld),t.projectionUV=n),n}setupDirect(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:r,light:s}=this,a=this.getLightVector(e),o=a.normalize(),l=o.dot(ES(s)),u=this.getSpotAttenuation(e,l),c=a.length(),p=CS({lightDistance:c,cutoffDistance:n,decayExponent:r});let y=t.mul(u).mul(p),_,b;return s.colorNode?(b=this.getLightCoord(e),_=s.colorNode(b)):s.map&&(b=this.getLightCoord(e),_=si(s.map,b.xy).onRenderUpdate(()=>s.map)),_&&(y=b.mul(2).sub(1).abs().lessThan(1).all().select(y.mul(_),y)),{lightColor:y,lightDirection:o}}}class Dle extends BS{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){const n=this.light.iesMap;let r=null;if(n&&n.isTexture===!0){const s=t.acos().mul(1/Math.PI);r=si(n,Ze(s,0),0).r}else r=super.getSpotAttenuation(t);return r}}const Ble=Te(([i,e])=>{const t=i.abs().sub(e);return Nl(Mr(t,0)).add(Ja(Mr(t.x,t.y),0))});class Lle extends BS{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),t.aspect===null){let n=1;t.map!==null&&(n=t.map.width/t.map.height),t.shadow.aspect=n}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){const t=ue(0),n=this.penumbraCosNode,r=fm(this.light).mul(e.context.positionWorld||Pl);return _n(r.w.greaterThan(0),()=>{const s=r.xyz.div(r.w),a=Ble(s.xy.sub(Ze(.5)),Ze(.5)),o=Co(-1,oi(1,Pb(n)).sub(1));t.assign(Ob(a.mul(-2).mul(o)))}),t}}class Ile extends v3{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class Ule extends v3{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=TS(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=on(new Dt).setGroup(rn)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:r}=this,a=Ku.dot(r).mul(.5).add(.5),o=xi(n,t,a);e.context.irradiance.addAssign(o)}}class Ole extends v3{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new te);this.lightProbe=ra(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=zU(Ku,this.lightProbe);e.context.irradiance.addAssign(t)}}class kU{parseFunction(){console.warn("Abstract function.")}}class LS{constructor(e,t,n="",r=""){this.type=e,this.inputs=t,this.name=n,this.precision=r}getCode(){console.warn("Abstract function.")}}LS.isNodeFunction=!0;const Fle=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,Vle=/[a-z_0-9]+/ig,fR="#pragma main",zle=i=>{i=i.trim();const e=i.indexOf(fR),t=e!==-1?i.slice(e+fR.length):i,n=t.match(Fle);if(n!==null&&n.length===5){const r=n[4],s=[];let a=null;for(;(a=Vle.exec(r))!==null;)s.push(a);const o=[];let l=0;for(;l<s.length;){const b=s[l][0]==="const";b===!0&&l++;let w=s[l][0];w==="in"||w==="out"||w==="inout"?l++:w="";const E=s[l++][0];let M=Number.parseInt(s[l][0]);Number.isNaN(M)===!1?l++:M=null;const P=s[l++][0];o.push(new DS(E,P,M,w,b))}const u=t.substring(n[0].length),c=n[3]!==void 0?n[3]:"",p=n[2],y=n[1]!==void 0?n[1]:"",_=e!==-1?i.slice(0,e):"";return{type:p,inputs:o,name:c,precision:y,inputsCode:r,blockCode:u,headerCode:_}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class Gle extends LS{constructor(e){const{type:t,inputs:n,name:r,precision:s,inputsCode:a,blockCode:o,headerCode:l}=zle(e);super(t,n,r,s),this.inputsCode=a,this.blockCode=o,this.headerCode=l}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:r,inputsCode:s,headerCode:a,precision:o}=this;let l=`${r} ${e} ( ${s.trim()} )`;o!==""&&(l=`${o} ${l}`),t=a+l+n}else t="";return t}}class qle extends kU{parseFunction(e){return new Gle(e)}}const dR=new WeakMap,Al=[],Y2=[];class kle extends Zu{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new hR,this.nodeBuilderCache=new Map,this.callHashCache=new H0,this.groupsData=new H0,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===Eb.name)return!0;if(n===rn.name){const s=this.get(e),a=this.nodeFrame.renderId;return s.renderId!==a?(s.renderId=a,!0):!1}if(n===ID.name){const s=this.get(e),a=this.nodeFrame.frameId;return s.frameId!==a?(s.frameId=a,!0):!1}Al[0]=t,Al[1]=e;let r=this.groupsData.get(Al);return r===void 0&&this.groupsData.set(Al,r={}),Al.length=0,r.version!==t.version?(r.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:r}=this,s=this.getForRenderCacheKey(e);if(n=r.get(s),n===void 0){const a=this.backend.createNodeBuilder(e.object,this.renderer);a.scene=e.scene,a.material=e.material,a.camera=e.camera,a.context.material=e.material,a.lightsNode=e.lightsNode,a.environmentNode=this.getEnvironmentNode(e.scene),a.fogNode=this.getFogNode(e.scene),a.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&a.enableMultiview(),a.build(),n=this._createNodeBuilderState(a),r.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new ole(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){Al[0]=e,Al[1]=t;const n=this.renderer.info.calls,r=this.callHashCache.get(Al)||{};if(r.callId!==n){const s=this.getEnvironmentNode(e),a=this.getFogNode(e);t&&Y2.push(t.getCacheKey(!0)),s&&Y2.push(s.getCacheKey()),a&&Y2.push(a.getCacheKey()),Y2.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),Y2.push(this.renderer.shadowMap.enabled?1:0),r.callId=n,r.cacheKey=Vp(Y2),this.callHashCache.set(Al,r),Y2.length=0}return Al.length=0,r.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const r=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||r){const s=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===Fu||n.mapping===Vu||n.mapping===D1){if(e.backgroundBlurriness>0||n.mapping===D1)return gS(n);{let a;return n.isCubeTexture===!0?a=X5(n):a=si(n),wI(a)}}else{if(n.isTexture===!0)return si(n,N1.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},r);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,r=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let a=s.get(t);return(a===void 0||r)&&(a=n(),s.set(t,a)),a}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const r=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const s=ji("color","color",n).setGroup(rn),a=ji("density","float",n).setGroup(rn);return j6(s,bS(a))}else if(n.isFog){const s=ji("color","color",n).setGroup(rn),a=ji("near","float",n).setGroup(rn),o=ji("far","float",n).setGroup(rn);return j6(s,xS(a,o))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const r=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return X5(n);if(n.isTexture===!0)return si(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,r=null,s=null){const a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=n,a.camera=r,a.material=s,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return dR.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),r=e.isArrayTexture?sU(e,be(N1,W1("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):si(e,N1).renderOutput(t.toneMapping,t.currentColorSpace);return dR.set(e,n),r}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const r of n.updateNodes)t.updateNode(r)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const r of n.updateNodes)t.updateNode(r)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new hR,this.nodeBuilderCache=new Map,this.cacheLib={}}}const Ry=new I0;class kA{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Vn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const r=e.length;for(let s=0;s<r;s++){Ry.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const a=t[n+s],o=Ry.normal;a.x=-o.x,a.y=-o.y,a.z=-o.z,a.w=Ry.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const r=t.clippingPlanes,s=r.length;let a,o;if(this.clipIntersection?(a=this.intersectionPlanes,o=e.intersectionPlanes.length):(a=this.unionPlanes,o=e.unionPlanes.length),a.length!==o+s){a.length=o+s;for(let l=0;l<s;l++)a[o+l]=new an;n=!0}this.projectPlanes(r,a,o),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new kA(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class Hle{constructor(e,t){this.bundleGroup=e,this.camera=t}}const Uh=[];class Wle{constructor(){this.bundles=new H0}get(e,t){const n=this.bundles;Uh[0]=e,Uh[1]=t;let r=n.get(Uh);return r===void 0&&(r=new Hle(e,t),n.set(Uh,r)),Uh.length=0,r}dispose(){this.bundles=new H0}}class HU{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const r in e)t[r]=e[r]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const jle=new wS,Oh=[];class Xle extends H0{constructor(){super()}createNode(e=[]){return new wS().setLights(e)}getNode(e,t){if(e.isQuadMesh)return jle;Oh[0]=e,Oh[1]=t;let n=this.get(Oh);return n===void 0&&(n=this.createNode(),this.set(Oh,n)),Oh.length=0,n}}class Jh extends W0{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}const AR=new te,pR=new te;class Yle extends No{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new ar,this._cameraL.viewport=new an,this._cameraR=new ar,this._cameraR.viewport=new an,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new Hx,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._sessionUsesLayers=!1,this._supportsGlBinding=typeof XRWebGLBinding<"u",this._frameBufferTargets=null,this._createXRLayer=e1e.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new He,this._onSessionEvent=Kle.bind(this),this._onSessionEnd=Zle.bind(this),this._onInputSourcesChange=Jle.bind(this),this._onAnimationFrame=t1e.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._supportsLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getBinding(){return this._glBinding===null&&this._supportsGlBinding&&(this._glBinding=new XRWebGLBinding(this._session,this._gl)),this._glBinding}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,n,r,s,a,o,l={}){const u=new d3(e,t),c=new Jh(s,a,{format:nr,type:Ar,depthTexture:new Ka(s,a,l.stencil?Xa:zi,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?Qa:Ya),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});c._autoAllocateDepthBuffer=!0;const p=new Os({color:16777215,side:Wa});p.map=c.texture,p.map.offset.y=1,p.map.repeat.y=-1;const y=new Jn(u,p);y.position.copy(n),y.quaternion.copy(r);const _={type:"quad",width:e,height:t,translation:n,quaternion:r,pixelwidth:s,pixelheight:a,plane:y,material:p,rendercall:o,renderTarget:c};if(this._layers.push(_),this._session!==null){_.plane.material=new Os({color:16777215,side:Wa}),_.plane.material.blending=gc,_.plane.material.blendEquation=Us,_.plane.material.blendSrc=yl,_.plane.material.blendDst=yl,_.xrlayer=this._createXRLayer(_);const b=this._session.renderState.layers;b.unshift(_.xrlayer),this._session.updateRenderState({layers:b})}else c.isXRRenderTarget=!1;return y}createCylinderLayer(e,t,n,r,s,a,o,l,u={}){const c=new f3(e,e,e*t/n,64,64,!0,Math.PI-t/2,t),p=new Jh(a,o,{format:nr,type:Ar,depthTexture:new Ka(a,o,u.stencil?Xa:zi,void 0,void 0,void 0,void 0,void 0,void 0,u.stencil?Qa:Ya),stencilBuffer:u.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});p._autoAllocateDepthBuffer=!0;const y=new Os({color:16777215,side:Fi});y.map=p.texture,y.map.offset.y=1,y.map.repeat.y=-1;const _=new Jn(c,y);_.position.copy(r),_.quaternion.copy(s);const b={type:"cylinder",radius:e,centralAngle:t,aspectratio:n,translation:r,quaternion:s,pixelwidth:a,pixelheight:o,plane:_,material:y,rendercall:l,renderTarget:p};if(this._layers.push(b),this._session!==null){b.plane.material=new Os({color:16777215,side:Fi}),b.plane.material.blending=gc,b.plane.material.blendEquation=Us,b.plane.material.blendSrc=yl,b.plane.material.blendDst=yl,b.xrlayer=this._createXRLayer(b);const w=this._session.renderState.layers;w.unshift(b.xrlayer),this._session.updateRenderState({layers:w})}else p.isXRRenderTarget=!1;return _}renderLayers(){const e=new te,t=new Gs,n=this._renderer,r=this.isPresenting,s=n.getOutputRenderTarget(),a=n._frameBufferTarget;this.isPresenting=!1;const o=new He;n.getSize(o);const l=n._quad;for(const u of this._layers)if(u.renderTarget.isXRRenderTarget=this._session!==null,u.renderTarget._hasExternalTextures=u.renderTarget.isXRRenderTarget,u.renderTarget.isXRRenderTarget&&this._sessionUsesLayers){u.xrlayer.transform=new XRRigidTransform(u.plane.getWorldPosition(e),u.plane.getWorldQuaternion(t));const c=this._glBinding.getSubImage(u.xrlayer,this._xrFrame);n.backend.setXRRenderTargetTextures(u.renderTarget,c.colorTexture,void 0),n._setXRLayerSize(u.renderTarget.width,u.renderTarget.height),n.setOutputRenderTarget(u.renderTarget),n.setRenderTarget(null),n._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:p,quad:y}=this._frameBufferTargets.get(u.renderTarget)||{frameBufferTarget:null,quad:null};p?(n._frameBufferTarget=p,n._quad=y):(n._quad=new um(new Vr),this._frameBufferTargets.set(u.renderTarget,{frameBufferTarget:n._getFrameBufferTarget(),quad:n._quad})),u.rendercall(),n._frameBufferTarget=null}else n.setRenderTarget(u.renderTarget),u.rendercall();n.setRenderTarget(null),n.setOutputRenderTarget(s),n._frameBufferTarget=a,n._setXRLayerSize(o.x,o.y),n._quad=l,this.isPresenting=r}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend;this._gl=t.getContext();const r=this._gl,s=r.getContextAttributes();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._supportsLayers===!0){let a=null,o=null,l=null;t.depth&&(l=t.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,a=t.stencil?Qa:Ya,o=t.stencil?Xa:zi);const u={colorFormat:r.RGBA8,depthFormat:l,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(u.textureType="texture-array",this._useMultiview=!0),this._glBinding=this.getBinding();const c=this._glBinding.createProjectionLayer(u),p=[c];this._glProjLayer=c,t.setPixelRatio(1),t._setXRLayerSize(c.textureWidth,c.textureHeight);const y=this._useMultiview?2:1,_=new Ka(c.textureWidth,c.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,a,y);if(this._xrRenderTarget=new Jh(c.textureWidth,c.textureHeight,{format:nr,type:Ar,colorSpace:t.outputColorSpace,depthTexture:_,stencilBuffer:t.stencil,samples:s.antialias?4:0,resolveDepthBuffer:c.ignoreDepthValues===!1,resolveStencilBuffer:c.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._sessionUsesLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._sessionUsesLayers)for(const b of this._layers)b.plane.material=new Os({color:16777215,side:b.type==="cylinder"?Fi:Wa}),b.plane.material.blending=gc,b.plane.material.blendEquation=Us,b.plane.material.blendSrc=yl,b.plane.material.blendDst=yl,b.xrlayer=this._createXRLayer(b),p.unshift(b.xrlayer);e.updateRenderState({layers:p})}else{const a={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},o=new XRWebGLLayer(e,r,a);this._glBaseLayer=o,e.updateRenderState({baseLayer:o}),t.setPixelRatio(1),t._setXRLayerSize(o.framebufferWidth,o.framebufferHeight),this._xrRenderTarget=new Jh(o.framebufferWidth,o.framebufferHeight,{format:nr,type:Ar,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:o.ignoreDepthValues===!1,resolveStencilBuffer:o.ignoreDepthValues===!1}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,r=e.far,s=this._cameraXR,a=this._cameraL,o=this._cameraR;s.near=o.near=a.near=n,s.far=o.far=a.far=r,s.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),s.layers.mask=e.layers.mask|6,a.layers.mask=s.layers.mask&3,o.layers.mask=s.layers.mask&5;const l=e.parent,u=s.cameras;mR(s,l);for(let c=0;c<u.length;c++)mR(u[c],l);u.length===2?Qle(s,a,o):s.projectionMatrix.copy(a.projectionMatrix),$le(e,s,l)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new n6,this._controllers[e]=t),t}}function Qle(i,e,t){AR.setFromMatrixPosition(e.matrixWorld),pR.setFromMatrixPosition(t.matrixWorld);const n=AR.distanceTo(pR),r=e.projectionMatrix.elements,s=t.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],p=(s[8]+1)/s[0],y=a*c,_=a*p,b=n/(-c+p),w=b*-c;if(e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(w),i.translateZ(b),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert(),r[10]===-1)i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const E=a+b,M=o+b,P=y-w,D=_+(n-w),B=l*o/M*E,U=u*o/M*E;i.projectionMatrix.makePerspective(P,D,B,U,E,M),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}}function mR(i,e){e===null?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(e.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}function $le(i,e,t){t===null?i.matrix.copy(e.matrixWorld):(i.matrix.copy(t.matrixWorld),i.matrix.invert(),i.matrix.multiply(e.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse),i.isPerspectiveCamera&&(i.fov=Zc*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1)}function Kle(i){const e=this._controllerInputSources.indexOf(i.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(i.inputSource,i.frame,n),t.dispatchEvent({type:i.type,data:i.inputSource})}}function Zle(){const i=this._session,e=this._renderer;i.removeEventListener("select",this._onSessionEvent),i.removeEventListener("selectstart",this._onSessionEvent),i.removeEventListener("selectend",this._onSessionEvent),i.removeEventListener("squeeze",this._onSessionEvent),i.removeEventListener("squeezestart",this._onSessionEvent),i.removeEventListener("squeezeend",this._onSessionEvent),i.removeEventListener("end",this._onSessionEnd),i.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._sessionUsesLayers===!0)for(const t of this._layers)t.renderTarget=new Jh(t.pixelwidth,t.pixelheight,{format:nr,type:Ar,depthTexture:new Ka(t.pixelwidth,t.pixelheight,t.stencilBuffer?Xa:zi,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?Qa:Ya),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,t.material.map.offset.y=1,t.material.map.repeat.y=-1,delete t.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function Jle(i){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<i.removed.length;n++){const r=i.removed[n],s=t.indexOf(r);s>=0&&(t[s]=null,e[s].disconnect(r))}for(let n=0;n<i.added.length;n++){const r=i.added[n];let s=t.indexOf(r);if(s===-1){for(let o=0;o<e.length;o++)if(o>=t.length){t.push(r),s=o;break}else if(t[o]===null){t[o]=r,s=o;break}if(s===-1)break}const a=e[s];a&&a.connect(r)}}function e1e(i){return i.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(i.translation,i.quaternion),width:i.width/2,height:i.height/2,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(i.translation,i.quaternion),radius:i.radius,centralAngle:i.centralAngle,aspectRatio:i.aspectRatio,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1})}function t1e(i,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,r=n.backend,s=this._glBaseLayer,a=this.getReferenceSpace(),o=e.getViewerPose(a);if(this._xrFrame=e,o!==null){const l=o.views;this._glBaseLayer!==null&&r.setXRTarget(s.framebuffer);let u=!1;l.length!==t.cameras.length&&(t.cameras.length=0,u=!0);for(let c=0;c<l.length;c++){const p=l[c];let y;if(this._supportsLayers===!0){const b=this._glBinding.getViewSubImage(this._glProjLayer,p);y=b.viewport,c===0&&r.setXRRenderTargetTextures(this._xrRenderTarget,b.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:b.depthStencilTexture)}else y=s.getViewport(p);let _=this._cameras[c];_===void 0&&(_=new ar,_.layers.enable(c),_.viewport=new an,this._cameras[c]=_),_.matrix.fromArray(p.transform.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale),_.projectionMatrix.fromArray(p.projectionMatrix),_.projectionMatrixInverse.copy(_.projectionMatrix).invert(),_.viewport.set(y.x,y.y,y.width,y.height),c===0&&(t.matrix.copy(_.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),u===!0&&t.cameras.push(_)}n.setOutputRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const u=this._controllerInputSources[l],c=this._controllers[l];u!==null&&c!==void 0&&c.update(u,e,a)}this._currentAnimationLoop&&this._currentAnimationLoop(i,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const gR=new h3,Y4=new He,Cy=new an,Ny=new ju,Py=new a7,nd=new $t,d1=new an;class n1e{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:r=!0,depth:s=!0,stencil:a=!1,antialias:o=!1,samples:l=0,getFallback:u=null,colorBufferType:c=$r,multiview:p=!1}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||o===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=r,this.logarithmicDepthBuffer=n,this.outputColorSpace=Qr,this.toneMapping=oa,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=a,this.info=new cre,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new HU,this.lighting=new Xle,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new an(0,0,this._width,this._height),this._scissor=new an(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new um(new Vr),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const y=this.alpha===!0?0:1;this._clearColor=new yS(0,0,0,y),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=c,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:Q6},this.xr=new Yle(this,p),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(_,b,w)=>{await this.compileAsync(_,b);const E=this._renderLists.get(_,b),M=this._renderContexts.get(_,b,this._renderTarget),P=_.overrideMaterial||w.material,D=this._objects.get(w,P,_,b,E.lightsNode,M,M.clippingContext),{fragmentShader:B,vertexShader:U}=D.getNodeBuilderState();return{fragmentShader:B,vertexShader:U}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(r){if(this._getFallback!==null)try{this.backend=n=this._getFallback(r),await n.init(this)}catch(s){t(s);return}else{t(r);return}}this._nodes=new kle(this,n),this._animation=new tre(this._nodes,this.info),this._attributes=new lre(n),this._background=new sle(this,this._nodes),this._geometries=new ure(this._attributes,this.info),this._textures=new Mre(this,n,this.info),this._pipelines=new Are(n,this._nodes),this._bindings=new pre(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new sre(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new yre(this.lighting),this._bundles=new Wle,this._renderContexts=new Sre,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const r=this._nodes.nodeFrame,s=r.renderId,a=this._currentRenderContext,o=this._currentRenderObjectFunction,l=this._compilationPromises,u=e.isScene===!0?e:gR;n===null&&(n=e);const c=this._renderTarget,p=this._renderContexts.get(n,t,c),y=this._activeMipmapLevel,_=[];this._currentRenderContext=p,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=_,r.renderId++,r.update(),p.depth=this.depth,p.stencil=this.stencil,p.clippingContext||(p.clippingContext=new kA),p.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,c);const b=this._renderLists.get(e,t);if(b.begin(),this._projectObject(e,t,0,b,p.clippingContext),n!==e&&n.traverseVisible(function(D){D.isLight&&D.layers.test(t.layers)&&b.pushLight(D)}),b.finish(),c!==null){this._textures.updateRenderTarget(c,y);const D=this._textures.get(c);p.textures=D.textures,p.depthTexture=D.depthTexture}else p.textures=null,p.depthTexture=null;this._background.update(u,b,p);const w=b.opaque,E=b.transparent,M=b.transparentDoublePass,P=b.lightsNode;this.opaque===!0&&w.length>0&&this._renderObjects(w,t,u,P),this.transparent===!0&&E.length>0&&this._renderTransparents(E,M,t,u,P),r.renderId=s,this._currentRenderContext=a,this._currentRenderObjectFunction=o,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(_)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}set highPrecision(e){e===!0?(this.overrideNodes.modelViewMatrix=f_,this.overrideNodes.modelNormalViewMatrix=d_):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===f_&&this.overrideNodes.modelNormalViewMatrix===d_}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:r,camera:s,renderList:a}=e,o=this._currentRenderContext,l=this._bundles.get(r,s),u=this.backend.get(l);u.renderContexts===void 0&&(u.renderContexts=new Set);const c=r.version!==u.version,p=u.renderContexts.has(o)===!1||c;if(u.renderContexts.add(o),p){this.backend.beginBundle(o),(u.renderObjects===void 0||c)&&(u.renderObjects=[]),this._currentRenderBundle=l;const{transparentDoublePass:y,transparent:_,opaque:b}=a;this.opaque===!0&&b.length>0&&this._renderObjects(b,s,t,n),this.transparent===!0&&_.length>0&&this._renderTransparents(_,y,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(o,l),u.version=r.version}else{const{renderObjects:y}=u;for(let _=0,b=y.length;_<b;_++){const w=y[_];this._nodes.needsRefresh(w)&&(this._nodes.updateBefore(w),this._nodes.updateForRender(w),this._bindings.updateForRender(w),this._nodes.updateAfter(w))}}this.backend.addBundle(o,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this,n=e!==oa,r=t!==gn.workingColorSpace;if(n===!1&&r===!1)return null;const{width:s,height:a}=this.getDrawingBufferSize(Y4),{depth:o,stencil:l}=this;let u=this._frameBufferTarget;u===null&&(u=new W0(s,a,{depthBuffer:o,stencilBuffer:l,type:this._colorBufferType,format:nr,colorSpace:gn.workingColorSpace,generateMipmaps:!1,minFilter:Qi,magFilter:Qi,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u);const c=this.getOutputRenderTarget();return u.depthBuffer=o,u.stencilBuffer=l,c!==null?u.setSize(c.width,c.height,c.depth):u.setSize(s,a,1),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u.multiview=c!==null?c.multiview:!1,u.resolveDepthBuffer=c!==null?c.resolveDepthBuffer:!0,u._autoAllocateDepthBuffer=c!==null?c._autoAllocateDepthBuffer:!1,u}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const r=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,a=s.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,u=e.isScene===!0?e:gR,c=this._renderTarget||this._outputRenderTarget,p=this._activeCubeFace,y=this._activeMipmapLevel;let _;r!==null?(_=r,this.setRenderTarget(_)):_=c;const b=this._renderContexts.get(e,t,_);this._currentRenderContext=b,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const w=this.coordinateSystem,E=this.xr;if(t.coordinateSystem!==w&&E.isPresenting===!1&&(t.coordinateSystem=w,t.updateProjectionMatrix(),t.isArrayCamera))for(const K of t.cameras)K.coordinateSystem=w,K.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),E.enabled===!0&&E.isPresenting===!0&&(E.cameraAutoUpdate===!0&&E.updateCamera(t),t=E.getCamera());let M=this._viewport,P=this._scissor,D=this._pixelRatio;_!==null&&(M=_.viewport,P=_.scissor,D=1),this.getDrawingBufferSize(Y4),Cy.set(0,0,Y4.width,Y4.height);const B=M.minDepth===void 0?0:M.minDepth,U=M.maxDepth===void 0?1:M.maxDepth;b.viewportValue.copy(M).multiplyScalar(D).floor(),b.viewportValue.width>>=y,b.viewportValue.height>>=y,b.viewportValue.minDepth=B,b.viewportValue.maxDepth=U,b.viewport=b.viewportValue.equals(Cy)===!1,b.scissorValue.copy(P).multiplyScalar(D).floor(),b.scissor=this._scissorTest&&b.scissorValue.equals(Cy)===!1,b.scissorValue.width>>=y,b.scissorValue.height>>=y,b.clippingContext||(b.clippingContext=new kA),b.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,_);const O=t.isArrayCamera?Py:Ny;t.isArrayCamera||(nd.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),O.setFromProjectionMatrix(nd,t.coordinateSystem,t.reversedDepth));const z=this._renderLists.get(e,t);if(z.begin(),this._projectObject(e,t,0,z,b.clippingContext),z.finish(),this.sortObjects===!0&&z.sort(this._opaqueSort,this._transparentSort),_!==null){this._textures.updateRenderTarget(_,y);const K=this._textures.get(_);b.textures=K.textures,b.depthTexture=K.depthTexture,b.width=K.width,b.height=K.height,b.renderTarget=_,b.depth=_.depthBuffer,b.stencil=_.stencilBuffer}else b.textures=null,b.depthTexture=null,b.width=Y4.width,b.height=Y4.height,b.depth=this.depth,b.stencil=this.stencil;b.width>>=y,b.height>>=y,b.activeCubeFace=p,b.activeMipmapLevel=y,b.occlusionQueryCount=z.occlusionQueryCount,b.scissorValue.max(d1.set(0,0,0,0)),b.scissorValue.x+b.scissorValue.width>b.width&&(b.scissorValue.width=Math.max(b.width-b.scissorValue.x,0)),b.scissorValue.y+b.scissorValue.height>b.height&&(b.scissorValue.height=Math.max(b.height-b.scissorValue.y,0)),this._background.update(u,z,b),b.camera=t,this.backend.beginRender(b);const{bundles:q,lightsNode:F,transparentDoublePass:G,transparent:j,opaque:$}=z;return q.length>0&&this._renderBundles(q,u,F),this.opaque===!0&&$.length>0&&this._renderObjects($,t,u,F),this.transparent===!0&&j.length>0&&this._renderTransparents(j,G,t,u,F),this.backend.finishRender(b),s.renderId=a,this._currentRenderContext=o,this._currentRenderObjectFunction=l,r!==null&&(this.setRenderTarget(c,p,y),this._renderOutput(_)),u.onAfterRender(this,e,t,_),b}_setXRLayerSize(e,t){this._width=e,this._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const n=this.autoClear,r=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=n,this.xr.enabled=r}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setSize(e,t,n=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,r){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,r)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,r,s=0,a=1){const o=this._viewport;e.isVector4?o.copy(e):o.set(e,t,n,r),o.minDepth=s,o.maxDepth=a}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const r=this._renderTarget||this._getFrameBufferTarget();let s=null;if(r!==null){this._textures.updateRenderTarget(r);const a=this._textures.get(r);s=this._renderContexts.getForClear(r),s.textures=a.textures,s.depthTexture=a.depthTexture,s.width=a.width,s.height=a.height,s.renderTarget=r,s.depth=r.depthBuffer,s.stencil=r.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,n,s),r!==null&&this._renderTarget===null&&this._renderOutput(r)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:oa}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:gn.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this._initialized===!0&&(this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()})),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,t=null){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const n=this._nodes.nodeFrame,r=n.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,n.renderId=this.info.calls;const s=this.backend,a=this._pipelines,o=this._bindings,l=this._nodes,u=Array.isArray(e)?e:[e];if(u[0]===void 0||u[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");s.beginCompute(e);for(const c of u){if(a.has(c)===!1){const _=()=>{c.removeEventListener("dispose",_),a.delete(c),o.delete(c),l.delete(c)};c.addEventListener("dispose",_);const b=c.onInitFunction;b!==null&&b.call(c,{renderer:this})}l.updateForCompute(c),o.updateForCompute(c);const p=o.getForCompute(c),y=a.getForCompute(c,p);s.compute(e,c,p,y,t)}s.finishCompute(e),n.renderId=r}async computeAsync(e,t=null){this._initialized===!1&&await this.init(),this.compute(e,t)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=d1.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=d1.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=d1.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,r;n!==null?r=n.renderTarget:(r=this._renderTarget||this._getFrameBufferTarget(),r!==null&&(this._textures.updateRenderTarget(r),n=this._textures.get(r))),this._textures.updateTexture(e,{renderTarget:r}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,s,a)}async readRenderTargetPixelsAsync(e,t,n,r,s,a=0,o=0){return this.backend.copyTextureToBuffer(e.textures[a],t,n,r,s,o)}_projectObject(e,t,n,r,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){const l=t.isArrayCamera?Py:Ny;if(!e.frustumCulled||l.intersectsSprite(e,t)){this.sortObjects===!0&&d1.setFromMatrixPosition(e.matrixWorld).applyMatrix4(nd);const{geometry:u,material:c}=e;c.visible&&r.push(e,u,c,n,d1.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const l=t.isArrayCamera?Py:Ny;if(!e.frustumCulled||l.intersectsObject(e,t)){const{geometry:u,material:c}=e;if(this.sortObjects===!0&&(u.boundingSphere===null&&u.computeBoundingSphere(),d1.copy(u.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(nd)),Array.isArray(c)){const p=u.groups;for(let y=0,_=p.length;y<_;y++){const b=p[y],w=c[b.materialIndex];w&&w.visible&&r.push(e,u,w,n,d1.z,b,s)}}else c.visible&&r.push(e,u,c,n,d1.z,null,s)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=r;r=this._renderLists.get(e,t),r.begin(),l.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}const o=e.children;for(let l=0,u=o.length;l<u;l++)this._projectObject(o[l],t,n,r,s)}_renderBundles(e,t,n){for(const r of e)this._renderBundle(r,t,n)}_renderTransparents(e,t,n,r,s){if(t.length>0){for(const{material:a}of t)a.side=Fi;this._renderObjects(t,n,r,s,"backSide");for(const{material:a}of t)a.side=Wa;this._renderObjects(e,n,r,s);for(const{material:a}of t)a.side=Ur}else this._renderObjects(e,n,r,s)}_renderObjects(e,t,n,r,s=null){for(let a=0,o=e.length;a<o;a++){const{object:l,geometry:u,material:c,group:p,clippingContext:y}=e[a];this._currentRenderObjectFunction(l,n,t,u,c,p,r,y,s)}}renderObject(e,t,n,r,s,a,o,l=null,u=null){let c,p,y;if(e.onBeforeRender(this,t,n,r,s,a),s.allowOverride===!0&&t.overrideMaterial!==null){const _=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(c=_.positionNode,_.positionNode=s.positionNode),_.alphaTest=s.alphaTest,_.alphaMap=s.alphaMap,_.transparent=s.transparent||s.transmission>0,_.isShadowPassMaterial&&(_.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(y=_.depthNode,_.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(p=_.colorNode,_.colorNode=s.castShadowNode),s.castShadowPositionNode&&s.castShadowPositionNode.isNode&&(c=_.positionNode,_.positionNode=s.castShadowPositionNode)),s=_}s.transparent===!0&&s.side===Ur&&s.forceSinglePass===!1?(s.side=Fi,this._handleObjectFunction(e,s,t,n,o,a,l,"backSide"),s.side=Wa,this._handleObjectFunction(e,s,t,n,o,a,l,u),s.side=Ur):this._handleObjectFunction(e,s,t,n,o,a,l,u),c!==void 0&&(t.overrideMaterial.positionNode=c),y!==void 0&&(t.overrideMaterial.depthNode=y),p!==void 0&&(t.overrideMaterial.colorNode=p),e.onAfterRender(this,t,n,r,s,a)}_renderObjectDirect(e,t,n,r,s,a,o,l){const u=this._objects.get(e,t,n,r,s,this._currentRenderContext,o,l);u.drawRange=e.geometry.drawRange,u.group=a;const c=this._nodes.needsRefresh(u);c&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(u,this.info),c&&this._nodes.updateAfter(u)}_createObjectPipeline(e,t,n,r,s,a,o,l){const u=this._objects.get(e,t,n,r,s,this._currentRenderContext,o,l);u.drawRange=e.geometry.drawRange,u.group=a,this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u),this._pipelines.getForRender(u,this._compilationPromises),this._nodes.updateAfter(u)}get compile(){return this.compileAsync}}class WU{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function i1e(i){return i+(Cu-i%Cu)%Cu}class jU extends WU{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return i1e(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class XU extends jU{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let r1e=0;class YU extends XU{constructor(e,t){super("UniformBuffer_"+r1e++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class s1e extends XU{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let t=0;for(let n=0,r=this.uniforms.length;n<r;n++){const s=this.uniforms[n],a=s.boundary,o=s.itemSize*e,l=t%Cu,u=l%a,c=l+u;t+=u,c!==0&&Cu-c<o&&(t+=Cu-c),s.offset=t/e,t+=o}return Math.ceil(t/Cu)*Cu}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s]!==r){const o=this._getBufferForType(a);o[s]=n[s]=r,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,a=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z||n[s+4]!==r.w){const o=this._getBufferForType(a);o[s+0]=n[s+0]=r.x,o[s+1]=n[s+1]=r.y,o[s+2]=n[s+2]=r.z,o[s+3]=n[s+3]=r.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.r||n[s+1]!==r.g||n[s+2]!==r.b){const a=this.buffer;a[s+0]=n[s+0]=r.r,a[s+1]=n[s+1]=r.g,a[s+2]=n[s+2]=r.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;if(n[s+0]!==r[0]||n[s+1]!==r[1]||n[s+2]!==r[2]||n[s+4]!==r[3]||n[s+5]!==r[4]||n[s+6]!==r[5]||n[s+8]!==r[6]||n[s+9]!==r[7]||n[s+10]!==r[8]){const a=this.buffer;a[s+0]=n[s+0]=r[0],a[s+1]=n[s+1]=r[1],a[s+2]=n[s+2]=r[2],a[s+4]=n[s+4]=r[3],a[s+5]=n[s+5]=r[4],a[s+6]=n[s+6]=r[5],a[s+8]=n[s+8]=r[6],a[s+9]=n[s+9]=r[7],a[s+10]=n[s+10]=r[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;return o1e(n,r,s)===!1&&(this.buffer.set(r,s),a1e(n,r,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function a1e(i,e,t){for(let n=0,r=e.length;n<r;n++)i[t+n]=e[n]}function o1e(i,e,t){for(let n=0,r=e.length;n<r;n++)if(i[t+n]!==e[n])return!1;return!0}let l1e=0;class QU extends s1e{constructor(e,t){super(e),this.id=l1e++,this.groupNode=t,this.isNodeUniformsGroup=!0}}class $U extends WU{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.generation=null,this.isSampler=!0}set texture(e){if(this._texture===e)return;const t=()=>{this._texture=null,this.generation=null,this.version=0};this._texture&&this._texture.removeEventListener("dispose",t),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",t)}get texture(){return this._texture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}clone(){const e=super.clone();return e._texture=null,e.texture=this.texture,e}}let u1e=0;class c1e extends $U{constructor(e,t){super(e,t),this.id=u1e++,this.store=!1,this.isSampledTexture=!0}}class pm extends c1e{constructor(e,t,n,r=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=r}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class KU extends pm{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledCubeTexture=!0}}class w_ extends pm{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledTexture3D=!0}}const yR={textureDimensions:"textureSize",equals:"equal",bitcast_float_int:"floatBitsToInt",bitcast_int_float:"intBitsToFloat",bitcast_uint_float:"uintBitsToFloat",bitcast_float_uint:"floatBitsToUint"},h1e={low:"lowp",medium:"mediump",high:"highp"},vR={swizzleAssign:!0,storageBuffer:!1},_R={perspective:"smooth",linear:"noperspective"},xR={centroid:"centroid"},bR=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class f1e extends qU{constructor(e,t){super(e,t,new qle),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Ea}getMethod(e){return yR[e]||e}getBitcastMethod(e,t){return yR[`bitcast_${t}_${e}`]}getTernary(e,t,n){return`${e} ? ${t} : ${n}`}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const a of t.inputs)r.push(this.getType(a.type)+" "+a.name);return`${this.getType(t.type)} ${t.name}( ${r.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,r=t.count*t.itemSize,{itemSize:s}=t,a=t.array.constructor.name.toLowerCase().includes("int");let o=a?Hu:a3;s===2?o=a?o3:Sl:s===3?o=a?DC:e8:s===4&&(o=a?l3:nr);const l={Float32Array:or,Uint8Array:Ar,Uint16Array:Xo,Uint32Array:zi,Int8Array:Lu,Int16Array:Iu,Int32Array:rs,Uint8ClampedArray:Ar},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/s))));let c=Math.ceil(r/s/u);u*c*s<r&&c++;const p=u*c*s,y=new n.constructor(p);y.set(n,0),t.array=y;const _=new G0(t.array,u,c,o,l[t.array.constructor.name]||or);_.needsUpdate=!0,_.isPBOTexture=!0;const b=new Fl(_,null,null);b.setPrecision("high"),t.pboNode=b,t.pbo=b.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,r=t.value;if(this.renderer.backend.has(r)){const c=this.renderer.backend.get(r);c.pbo=r.pbo}const s=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.nodeName),a=this.getPropertyName(s);this.increaseUsage(n);const o=n.build(this,"uint"),l=this.getDataFromNode(e);let u=l.propertyName;if(u===void 0){const c=this.getVarFromNode(e);u=this.getPropertyName(c);const p=this.getDataFromNode(t);let y=p.propertySizeName;y===void 0&&(y=u+"Size",this.getVarFromNode(t,y,"uint"),this.addLineFlowCode(`${y} = uint( textureSize( ${a}, 0 ).x )`,e),p.propertySizeName=y);const{itemSize:_}=r,b="."+m3.join("").slice(0,_),w=`ivec2(${o} % ${y}, ${o} / ${y})`,E=this.generateTextureLoad(null,a,w,null,null,"0");let M="vec4";r.pbo.type===zi?M="uvec4":r.pbo.type===rs&&(M="ivec4"),this.addLineFlowCode(`${u} = ${M}(${E})${b}`,e),l.propertyName=u}return u}generateTextureLoad(e,t,n,r,s,a="0"){let o;return r?s?o=`texelFetchOffset( ${t}, ivec3( ${n}, ${r} ), ${a}, ${s} )`:o=`texelFetch( ${t}, ivec3( ${n}, ${r} ), ${a} )`:s?o=`texelFetchOffset( ${t}, ${n}, ${a}, ${s} )`:o=`texelFetch( ${t}, ${n}, ${a} )`,e!==null&&e.isDepthTexture&&(o+=".x"),o}generateTexture(e,t,n,r,s){return r&&(n=`vec3( ${n}, ${r} )`),e.isDepthTexture?s?`textureOffset( ${t}, ${n}, ${s} ).x`:`texture( ${t}, ${n} ).x`:s?`textureOffset( ${t}, ${n}, ${s} )`:`texture( ${t}, ${n} )`}generateTextureLevel(e,t,n,r,s){return s?`textureLodOffset( ${t}, ${n}, ${r}, ${s} )`:`textureLod( ${t}, ${n}, ${r} )`}generateTextureBias(e,t,n,r,s){return s?`textureOffset( ${t}, ${n}, ${s}, ${r} )`:`texture( ${t}, ${n}, ${r} )`}generateTextureGrad(e,t,n,r,s){return s?`textureGradOffset( ${t}, ${n}, ${r[0]}, ${r[1]}, ${s} )`:`textureGrad( ${t}, ${n}, ${r[0]}, ${r[1]} )`}generateTextureCompare(e,t,n,r,s,a,o=this.shaderStage){if(o==="fragment")return s?a?`textureOffset( ${t}, vec4( ${n}, ${s}, ${r} ), ${a} )`:`texture( ${t}, vec4( ${n}, ${s}, ${r} ) )`:a?`textureOffset( ${t}, vec3( ${n}, ${r} ), ${a} )`:`texture( ${t}, vec3( ${n}, ${r} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`${this.getVar(r.type,r.name,r.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],r={};for(const a of t){let o=null,l=!1;if(a.type==="texture"||a.type==="texture3D"){const c=a.node.value;let p="";(c.isDataTexture===!0||c.isData3DTexture===!0)&&(c.type===zi?p="u":c.type===rs&&(p="i")),a.type==="texture3D"&&c.isArrayTexture===!1?o=`${p}sampler3D ${a.name};`:c.compareFunction?c.isArrayTexture===!0?o=`sampler2DArrayShadow ${a.name};`:o=`sampler2DShadow ${a.name};`:c.isArrayTexture===!0||c.isDataArrayTexture===!0||c.isCompressedArrayTexture===!0?o=`${p}sampler2DArray ${a.name};`:o=`${p}sampler2D ${a.name};`}else if(a.type==="cubeTexture")o=`samplerCube ${a.name};`;else if(a.type==="buffer"){const c=a.node,p=this.getType(c.bufferType),y=c.bufferCount,_=y>0?y:"";o=`${c.name} {
	${p} ${a.name}[${_}];
};
`}else o=`${this.getVectorType(a.type)} ${this.getPropertyName(a,e)};`,l=!0;const u=a.node.precision;if(u!==null&&(o=h1e[u]+" "+o),l){o="	"+o;const c=a.groupNode.name;(r[c]||(r[c]=[])).push(o)}else o="uniform "+o,n.push(o)}let s="";for(const a in r){const o=r[a];s+=this._getGLSLUniformStruct(e+"_"+a,o.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==rs){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array;r instanceof Uint32Array||r instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let r=0;for(const s of n)t+=`layout( location = ${r++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],r=[];for(const s of n)if(s.output)for(const a of s.members)r.push(`layout( location = ${a.index} ) out ${a.type} ${a.name};`);else{let a="struct "+s.name+` {
`;a+=this.getStructMembers(s),a+=`
};
`,t.push(a)}return r.length===0&&r.push("layout( location = 0 ) out vec4 fragColor;"),`
`+r.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const r of n){e==="compute"&&(r.needsInterpolation=!0);const s=this.getType(r.type);if(r.needsInterpolation)if(r.interpolationType){const a=_R[r.interpolationType]||r.interpolationType,o=xR[r.interpolationSampling]||"";t+=`${a} ${o} out ${s} ${r.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}out ${s} ${r.name};
`}else t+=`${s} ${r.name};
`}else if(e==="fragment"){for(const r of n)if(r.needsInterpolation){const s=this.getType(r.type);if(r.interpolationType){const a=_R[r.interpolationType]||r.interpolationType,o=xR[r.interpolationSampling]||"";t+=`${a} ${o} in ${s} ${r.name};
`}else{const a=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${a}in ${s} ${r.name};
`}}}for(const r of this.builtins[e])t+=`${r};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,r)=>n*r,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const r=this.extensions[n]||(this.extensions[n]=new Map);r.has(e)===!1&&r.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const r=this.renderer.backend.extensions;this.object.isBatchedMesh&&r.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:r,behavior:s}of n.values())t.push(`#extension ${r} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=vR[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const r=this.renderer.backend.extensions;r.has(n)&&(r.get(n),t=!0)}vR[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const r=e[n],s=this.getPropertyName(r.attributeNode);s&&(t+=`${r.varyingName} = ${s};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${bR}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${bR}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const r=this.flowNodes[t],s=r[r.length-1];for(const o of r){const l=this.getFlowData(o),u=o.name;u&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${u}
	`),n+=`${l.code}
	`,o===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${l.result};`):t==="fragment"&&(o.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${l.result};`)))}const a=e[t];a.extensions=this.getExtensions(t),a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.vars=this.getVars(t),a.structs=this.getStructs(t),a.codes=this.getCodes(t),a.transforms=this.getTransforms(t),a.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),a=this.getDataFromNode(e,n,this.globalCache);let o=a.uniformGPU;if(o===void 0){const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,n);if(t==="texture")o=new pm(s.name,s.node,l),c.push(o);else if(t==="cubeTexture")o=new KU(s.name,s.node,l),c.push(o);else if(t==="texture3D")o=new w_(s.name,s.node,l),c.push(o);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const p=new YU(e,l);p.name=e.name,c.push(p),o=p}else{const p=this.uniformGroups[n]||(this.uniformGroups[n]={});let y=p[u];y===void 0&&(y=new QU(n+"_"+u,l),p[u]=y,c.push(y)),o=this.getNodeUniform(s,t),y.addUniform(o)}a.uniformGPU=o}return s}}let Dy=null,Q4=null;class ZU{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}getTimestampUID(e){const t=this.get(e);let n=e.isComputeNode===!0?"c":"r";return n+=":"+t.frameCalls+":"+e.id,n}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){la("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){la(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return Dy=Dy||new He,this.renderer.getDrawingBufferSize(Dy)}setScissorTest(){}getClearColor(){const e=this.renderer;return Q4=Q4||new yS,e.getClearColor(Q4),Q4.getRGB(Q4),Q4}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:ax(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Z5} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let d1e=0;class A1e{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class p1e{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:r}=n,s=e.array,a=e.usage||r.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,l=n.get(o);let u=l.bufferGPU;u===void 0&&(u=this._createBuffer(r,t,s,a),l.bufferGPU=u,l.bufferType=t,l.version=o.version);let c;if(s instanceof Float32Array)c=r.FLOAT;else if(typeof Float16Array<"u"&&s instanceof Float16Array)c=r.HALF_FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?c=r.HALF_FLOAT:c=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)c=r.SHORT;else if(s instanceof Uint32Array)c=r.UNSIGNED_INT;else if(s instanceof Int32Array)c=r.INT;else if(s instanceof Int8Array)c=r.BYTE;else if(s instanceof Uint8Array)c=r.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)c=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let p={bufferGPU:u,bufferType:t,type:c,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:c===r.INT||c===r.UNSIGNED_INT||e.gpuType===rs,id:d1e++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const y=this._createBuffer(r,t,s,a);p=new A1e(p,y)}n.set(e,p)}updateAttribute(e){const t=this.backend,{gl:n}=t,r=e.array,s=e.isInterleavedBufferAttribute?e.data:e,a=t.get(s),o=a.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(o,a.bufferGPU),l.length===0)n.bufferSubData(o,0,r);else{for(let u=0,c=l.length;u<c;u++){const p=l[u];n.bufferSubData(o,p.start*r.BYTES_PER_ELEMENT,r,p.start,p.count)}s.clearUpdateRanges()}n.bindBuffer(o,null),a.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,r=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(r),a=e.array,o=a.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const l=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.bufferData(n.COPY_WRITE_BUFFER,o,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,o),await t.utils._clientWaitAsync();const u=new e.array.constructor(a.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,u),n.deleteBuffer(l),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,t,n,r){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,r),e.bindBuffer(t,null),s}}let By,Fh;class m1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;By={[Us]:e.FUNC_ADD,[YA]:e.FUNC_SUBTRACT,[QA]:e.FUNC_REVERSE_SUBTRACT},Fh={[yl]:e.ZERO,[$A]:e.ONE,[KA]:e.SRC_COLOR,[x5]:e.SRC_ALPHA,[ip]:e.SRC_ALPHA_SATURATE,[tp]:e.DST_COLOR,[JA]:e.DST_ALPHA,[ZA]:e.ONE_MINUS_SRC_COLOR,[b5]:e.ONE_MINUS_SRC_ALPHA,[np]:e.ONE_MINUS_DST_COLOR,[ep]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new an().fromArray(t),this.currentViewport=new an().fromArray(n),this._tempVec4=new an}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==H_?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===Vd?t.cullFace(t.BACK):e===W_?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,r,s,a,o,l){const{gl:u}=this;if(e===ja){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==gc){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Us||this.currentBlendEquationAlpha!==Us)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=Us,this.currentBlendEquationAlpha=Us),l)switch(e){case aa:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Ec:u.blendFunc(u.ONE,u.ONE);break;case wc:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Rc:u.blendFuncSeparate(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA,u.ZERO,u.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case aa:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Ec:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case wc:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Rc:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,a=a||n,o=o||r,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(By[t],By[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||r!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||o!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(Fh[n],Fh[r],Fh[a],Fh[o]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=o),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case S5:t.depthFunc(t.NEVER);break;case T5:t.depthFunc(t.ALWAYS);break;case M5:t.depthFunc(t.LESS);break;case P1:t.depthFunc(t.LEQUAL);break;case E5:t.depthFunc(t.EQUAL);break;case w5:t.depthFunc(t.GEQUAL);break;case R5:t.depthFunc(t.GREATER);break;case C5:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentScissor.equals(s)===!1){const{gl:a}=this;a.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentViewport.equals(s)===!1){const{gl:a}=this;a.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:r}=this;e.side===Ur?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let s=e.side===Fi;t&&(s=!s),this.setFlipSided(s),e.blending===aa&&e.transparent===!1?this.setBlending(ja):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let l=0;l<8;l++)l<n?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,t,n){const{gl:r}=this;e?(this.enable(r.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const n=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(n.bindVertexArray(e),t!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:r}=this;return r[e]!==t?(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let r=[],s=!1;if(e.textures!==null){r=this.currentDrawbuffers.get(t),r===void 0&&(r=[],this.currentDrawbuffers.set(t,r));const a=e.textures;if(r.length!==a.length||r[0]!==n.COLOR_ATTACHMENT0){for(let o=0,l=a.length;o<l;o++)r[o]=n.COLOR_ATTACHMENT0+o;r.length=a.length,s=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,s=!0);s&&n.drawBuffers(r)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:r}=this;e===void 0&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:r,currentTextureSlot:s,currentBoundTextures:a,maxTextures:o}=this;n===void 0&&(s===null?n=r.TEXTURE0+o-1:n=s);let l=a[n];l===void 0&&(l={type:void 0,texture:void 0},a[n]=l),(l.type!==e||l.texture!==t)&&(s!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,n){const{gl:r}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,r=n[t];r!==void 0&&r.type!==void 0&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)}}class g1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=Ea){const{gl:n,extensions:r}=this;let s;const a=gn.getTransfer(t);if(e===Ar)return n.UNSIGNED_BYTE;if(e===Z6)return n.UNSIGNED_SHORT_4_4_4_4;if(e===J6)return n.UNSIGNED_SHORT_5_5_5_1;if(e===e7)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===t7)return n.UNSIGNED_INT_10F_11F_11F_REV;if(e===Lu)return n.BYTE;if(e===Iu)return n.SHORT;if(e===Xo)return n.UNSIGNED_SHORT;if(e===rs)return n.INT;if(e===zi)return n.UNSIGNED_INT;if(e===or)return n.FLOAT;if(e===$r)return n.HALF_FLOAT;if(e===sp)return n.ALPHA;if(e===e8)return n.RGB;if(e===nr)return n.RGBA;if(e===Ya)return n.DEPTH_COMPONENT;if(e===Qa)return n.DEPTH_STENCIL;if(e===a3)return n.RED;if(e===Hu)return n.RED_INTEGER;if(e===Sl)return n.RG;if(e===o3)return n.RG_INTEGER;if(e===l3)return n.RGBA_INTEGER;if(e===b1||e===S1||e===T1||e===M1)if(a===Ht)if(s=r.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===b1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===S1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===T1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===M1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=r.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===b1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===S1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===T1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===M1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===N5||e===P5||e===D5||e===B5)if(s=r.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===N5)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===P5)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===D5)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===B5)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Cc||e===Nc||e===Pc)if(s=r.get("WEBGL_compressed_texture_etc"),s!==null){if(e===Cc||e===Nc)return a===Ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===Pc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===Dc||e===Bc||e===Lc||e===Ic||e===Uc||e===Oc||e===Fc||e===Vc||e===zc||e===Gc||e===qc||e===kc||e===Hc||e===Wc)if(s=r.get("WEBGL_compressed_texture_astc"),s!==null){if(e===Dc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===Bc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Lc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Ic)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===Uc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===Oc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===Fc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Vc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===zc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Gc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===qc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===kc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Hc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Wc)return a===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===jc)if(s=r.get("EXT_texture_compression_bptc"),s!==null){if(e===jc)return a===Ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===Xc||e===Yc||e===Qc||e===$c)if(s=r.get("EXT_texture_compression_rgtc"),s!==null){if(e===Xc)return s.COMPRESSED_RED_RGTC1_EXT;if(e===Yc)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===Qc)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===$c)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Xa?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,r)=>{function s(){const a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(t),r();return}if(a===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let SR=!1,id,Ly,TR;class y1e{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},SR===!1&&(this._init(),SR=!0)}_init(){const e=this.gl;id={[B1]:e.REPEAT,[Ra]:e.CLAMP_TO_EDGE,[L1]:e.MIRRORED_REPEAT},Ly={[Xi]:e.NEAREST,[K6]:e.NEAREST_MIPMAP_NEAREST,[O0]:e.NEAREST_MIPMAP_LINEAR,[Qi]:e.LINEAR,[Bu]:e.LINEAR_MIPMAP_NEAREST,[Fs]:e.LINEAR_MIPMAP_LINEAR},TR={[op]:e.NEVER,[fp]:e.ALWAYS,[n7]:e.LESS,[i7]:e.LEQUAL,[lp]:e.EQUAL,[hp]:e.GEQUAL,[up]:e.GREATER,[cp]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,r,s=!1){const{gl:a,extensions:o}=this;if(e!==null){if(a[e]!==void 0)return a[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;if(t===a.RED&&(n===a.FLOAT&&(l=a.R32F),n===a.HALF_FLOAT&&(l=a.R16F),n===a.UNSIGNED_BYTE&&(l=a.R8),n===a.UNSIGNED_SHORT&&(l=a.R16),n===a.UNSIGNED_INT&&(l=a.R32UI),n===a.BYTE&&(l=a.R8I),n===a.SHORT&&(l=a.R16I),n===a.INT&&(l=a.R32I)),t===a.RED_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.R8UI),n===a.UNSIGNED_SHORT&&(l=a.R16UI),n===a.UNSIGNED_INT&&(l=a.R32UI),n===a.BYTE&&(l=a.R8I),n===a.SHORT&&(l=a.R16I),n===a.INT&&(l=a.R32I)),t===a.RG&&(n===a.FLOAT&&(l=a.RG32F),n===a.HALF_FLOAT&&(l=a.RG16F),n===a.UNSIGNED_BYTE&&(l=a.RG8),n===a.UNSIGNED_SHORT&&(l=a.RG16),n===a.UNSIGNED_INT&&(l=a.RG32UI),n===a.BYTE&&(l=a.RG8I),n===a.SHORT&&(l=a.RG16I),n===a.INT&&(l=a.RG32I)),t===a.RG_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RG8UI),n===a.UNSIGNED_SHORT&&(l=a.RG16UI),n===a.UNSIGNED_INT&&(l=a.RG32UI),n===a.BYTE&&(l=a.RG8I),n===a.SHORT&&(l=a.RG16I),n===a.INT&&(l=a.RG32I)),t===a.RGB){const u=s?Kc:gn.getTransfer(r);n===a.FLOAT&&(l=a.RGB32F),n===a.HALF_FLOAT&&(l=a.RGB16F),n===a.UNSIGNED_BYTE&&(l=a.RGB8),n===a.UNSIGNED_SHORT&&(l=a.RGB16),n===a.UNSIGNED_INT&&(l=a.RGB32UI),n===a.BYTE&&(l=a.RGB8I),n===a.SHORT&&(l=a.RGB16I),n===a.INT&&(l=a.RGB32I),n===a.UNSIGNED_BYTE&&(l=u===Ht?a.SRGB8:a.RGB8),n===a.UNSIGNED_SHORT_5_6_5&&(l=a.RGB565),n===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1),n===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGB4),n===a.UNSIGNED_INT_5_9_9_9_REV&&(l=a.RGB9_E5),n===a.UNSIGNED_INT_10F_11F_11F_REV&&(l=a.R11F_G11F_B10F)}if(t===a.RGB_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RGB8UI),n===a.UNSIGNED_SHORT&&(l=a.RGB16UI),n===a.UNSIGNED_INT&&(l=a.RGB32UI),n===a.BYTE&&(l=a.RGB8I),n===a.SHORT&&(l=a.RGB16I),n===a.INT&&(l=a.RGB32I)),t===a.RGBA){const u=s?Kc:gn.getTransfer(r);n===a.FLOAT&&(l=a.RGBA32F),n===a.HALF_FLOAT&&(l=a.RGBA16F),n===a.UNSIGNED_BYTE&&(l=a.RGBA8),n===a.UNSIGNED_SHORT&&(l=a.RGBA16),n===a.UNSIGNED_INT&&(l=a.RGBA32UI),n===a.BYTE&&(l=a.RGBA8I),n===a.SHORT&&(l=a.RGBA16I),n===a.INT&&(l=a.RGBA32I),n===a.UNSIGNED_BYTE&&(l=u===Ht?a.SRGB8_ALPHA8:a.RGBA8),n===a.UNSIGNED_SHORT_4_4_4_4&&(l=a.RGBA4),n===a.UNSIGNED_SHORT_5_5_5_1&&(l=a.RGB5_A1)}return t===a.RGBA_INTEGER&&(n===a.UNSIGNED_BYTE&&(l=a.RGBA8UI),n===a.UNSIGNED_SHORT&&(l=a.RGBA16UI),n===a.UNSIGNED_INT&&(l=a.RGBA32UI),n===a.BYTE&&(l=a.RGBA8I),n===a.SHORT&&(l=a.RGBA16I),n===a.INT&&(l=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(n===a.UNSIGNED_SHORT&&(l=a.DEPTH_COMPONENT16),n===a.UNSIGNED_INT&&(l=a.DEPTH_COMPONENT24),n===a.FLOAT&&(l=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&n===a.UNSIGNED_INT_24_8&&(l=a.DEPTH24_STENCIL8),(l===a.R16F||l===a.R32F||l===a.RG16F||l===a.RG32F||l===a.RGBA16F||l===a.RGBA32F)&&o.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:n,extensions:r,backend:s}=this,a=gn.getPrimaries(gn.workingColorSpace),o=t.colorSpace===Ea?null:gn.getPrimaries(t.colorSpace),l=t.colorSpace===Ea||a===o?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,l),n.texParameteri(e,n.TEXTURE_WRAP_S,id[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,id[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&(t.isArrayTexture||n.texParameteri(e,n.TEXTURE_WRAP_R,id[t.wrapR])),n.texParameteri(e,n.TEXTURE_MAG_FILTER,Ly[t.magFilter]);const u=t.mipmaps!==void 0&&t.mipmaps.length>0,c=t.minFilter===Qi&&u?Fs:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,Ly[c]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,TR[t.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Xi||t.minFilter!==O0&&t.minFilter!==Fs||t.type===or&&r.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const p=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,p.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:r}=this,s=this.getGLTextureType(e);let a=r[s];a===void 0&&(a=t.createTexture(),n.state.bindTexture(s,a),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),r[s]=a),n.set(e,{textureGPU:a,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:r}=this,{levels:s,width:a,height:o,depth:l}=t,u=r.utils.convert(e.format,e.colorSpace),c=r.utils.convert(e.type),p=this.getInternalFormat(e.internalFormat,u,c,e.colorSpace,e.isVideoTexture),y=n.createTexture(),_=this.getGLTextureType(e);r.state.bindTexture(_,y),this.setTextureParameters(_,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,p,a,o,l):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,p,a,o,l):e.isVideoTexture||n.texStorage2D(_,s,p,a,o),r.set(e,{textureGPU:y,glTextureType:_,glFormat:u,glType:c,glInternalFormat:p})}copyBufferToTexture(e,t){const{gl:n,backend:r}=this,{textureGPU:s,glTextureType:a,glFormat:o,glType:l}=r.get(t),{width:u,height:c}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(a,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(a,0,0,0,u,c,o,l,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:r,height:s}=t,{textureGPU:a,glTextureType:o,glFormat:l,glType:u,glInternalFormat:c}=this.backend.get(e);if(!(e.isRenderTargetTexture||a===void 0))if(this.backend.state.bindTexture(o,a),this.setTextureParameters(o,e),e.isCompressedTexture){const p=e.mipmaps,y=t.image;for(let _=0;_<p.length;_++){const b=p[_];e.isCompressedArrayTexture?e.format!==n.RGBA?l!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_,0,0,0,b.width,b.height,y.depth,l,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,_,0,0,0,b.width,b.height,y.depth,l,u,b.data):l!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,_,0,0,b.width,b.height,l,b.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const p=t.images,y=e.mipmaps;for(let _=0;_<6;_++){const b=rd(p[_]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_,0,0,0,r,s,l,u,b);for(let w=0;w<y.length;w++){const E=y[w],M=rd(E.images[_]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+_,w+1,0,0,M.width,M.height,l,u,M)}}}else if(e.isDataArrayTexture||e.isArrayTexture){const p=t.image;if(e.layerUpdates.size>0){const y=Yd(p.width,p.height,e.format,e.type);for(const _ of e.layerUpdates){const b=p.data.subarray(_*y/p.data.BYTES_PER_ELEMENT,(_+1)*y/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,_,p.width,p.height,1,l,u,b)}e.clearLayerUpdates()}else n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,l,u,p.data)}else if(e.isData3DTexture){const p=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,l,u,p.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(o,0,c,l,u,t.image);else{const p=e.mipmaps;if(p.length>0)for(let y=0,_=p.length;y<_;y++){const b=p[y],w=rd(b);n.texSubImage2D(o,y,0,0,b.width,b.height,l,u,w)}else{const y=rd(t.image);n.texSubImage2D(o,0,0,0,r,s,l,u,y)}}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:r,glTextureType:s}=n.get(e);n.state.bindTexture(s,r),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(const s in r.framebuffers)t.deleteFramebuffer(r.framebuffers[s]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(let s=0;s<r.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(r.msaaRenderbuffers[s]);delete r.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:r,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(r),n.delete(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){const{gl:o,backend:l}=this,{state:u}=this.backend,{textureGPU:c,glTextureType:p,glType:y,glFormat:_}=l.get(t);u.bindTexture(p,c);let b,w,E,M,P,D,B,U,O;const z=e.isCompressedTexture?e.mipmaps[a]:e.image;if(n!==null)b=n.max.x-n.min.x,w=n.max.y-n.min.y,E=n.isBox3?n.max.z-n.min.z:1,M=n.min.x,P=n.min.y,D=n.isBox3?n.min.z:0;else{const ie=Math.pow(2,-s);b=Math.floor(z.width*ie),w=Math.floor(z.height*ie),e.isDataArrayTexture||e.isArrayTexture?E=z.depth:e.isData3DTexture?E=Math.floor(z.depth*ie):E=1,M=0,P=0,D=0}r!==null?(B=r.x,U=r.y,O=r.z):(B=0,U=0,O=0),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t.flipY),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),o.pixelStorei(o.UNPACK_ALIGNMENT,t.unpackAlignment);const q=o.getParameter(o.UNPACK_ROW_LENGTH),F=o.getParameter(o.UNPACK_IMAGE_HEIGHT),G=o.getParameter(o.UNPACK_SKIP_PIXELS),j=o.getParameter(o.UNPACK_SKIP_ROWS),$=o.getParameter(o.UNPACK_SKIP_IMAGES);o.pixelStorei(o.UNPACK_ROW_LENGTH,z.width),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,z.height),o.pixelStorei(o.UNPACK_SKIP_PIXELS,M),o.pixelStorei(o.UNPACK_SKIP_ROWS,P),o.pixelStorei(o.UNPACK_SKIP_IMAGES,D);const K=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const ie=l.get(e),ee=l.get(t),X=l.get(ie.renderTarget),re=l.get(ee.renderTarget),se=X.framebuffers[ie.cacheKey],Ae=re.framebuffers[ee.cacheKey];u.bindFramebuffer(o.READ_FRAMEBUFFER,se),u.bindFramebuffer(o.DRAW_FRAMEBUFFER,Ae);let Se=o.COLOR_BUFFER_BIT;e.isDepthTexture&&(Se=o.DEPTH_BUFFER_BIT),o.blitFramebuffer(M,P,b,w,B,U,b,w,Se,o.NEAREST),u.bindFramebuffer(o.READ_FRAMEBUFFER,null),u.bindFramebuffer(o.DRAW_FRAMEBUFFER,null)}else K?e.isDataTexture||e.isData3DTexture?o.texSubImage3D(p,a,B,U,O,b,w,E,_,y,z.data):t.isCompressedArrayTexture?o.compressedTexSubImage3D(p,a,B,U,O,b,w,E,_,z.data):o.texSubImage3D(p,a,B,U,O,b,w,E,_,y,z):e.isDataTexture?o.texSubImage2D(p,a,B,U,b,w,_,y,z.data):e.isCompressedTexture?o.compressedTexSubImage2D(p,a,B,U,z.width,z.height,_,z.data):o.texSubImage2D(p,a,B,U,b,w,_,y,z);o.pixelStorei(o.UNPACK_ROW_LENGTH,q),o.pixelStorei(o.UNPACK_IMAGE_HEIGHT,F),o.pixelStorei(o.UNPACK_SKIP_PIXELS,G),o.pixelStorei(o.UNPACK_SKIP_ROWS,j),o.pixelStorei(o.UNPACK_SKIP_IMAGES,$),a===0&&t.generateMipmaps&&o.generateMipmap(p),u.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:r}=this,{state:s}=this.backend,{textureGPU:a}=this.backend.get(e),{x:o,y:l,z:u,w:c}=n,p=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,y=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(p){const _=o!==0||l!==0;let b,w;if(e.isDepthTexture===!0?(b=r.DEPTH_BUFFER_BIT,w=r.DEPTH_ATTACHMENT,t.stencil&&(b|=r.STENCIL_BUFFER_BIT)):(b=r.COLOR_BUFFER_BIT,w=r.COLOR_ATTACHMENT0),_){const E=this.backend.get(t.renderTarget),M=E.framebuffers[t.getCacheKey()],P=E.msaaFrameBuffer;s.bindFramebuffer(r.DRAW_FRAMEBUFFER,M),s.bindFramebuffer(r.READ_FRAMEBUFFER,P);const D=y-l-c;r.blitFramebuffer(o,D,o+u,D+c,o,D,o+u,D+c,b,r.NEAREST),s.bindFramebuffer(r.READ_FRAMEBUFFER,M),s.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,D,u,c),s.unbindTexture()}else{const E=r.createFramebuffer();s.bindFramebuffer(r.DRAW_FRAMEBUFFER,E),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,w,r.TEXTURE_2D,a,0),r.blitFramebuffer(0,0,u,c,0,0,u,c,b,r.NEAREST),r.deleteFramebuffer(E)}}else s.bindTexture(r.TEXTURE_2D,a),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,o,y-c-l,u,c),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,r=!1){const{gl:s}=this,a=t.renderTarget,{depthTexture:o,depthBuffer:l,stencilBuffer:u,width:c,height:p}=a;if(s.bindRenderbuffer(s.RENDERBUFFER,e),l&&!u){let y=s.DEPTH_COMPONENT24;r===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,a.samples,y,c,p):n>0?(o&&o.isDepthTexture&&o.type===s.FLOAT&&(y=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,n,y,c,p)):s.renderbufferStorage(s.RENDERBUFFER,y,c,p),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else l&&u&&(n>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,s.DEPTH24_STENCIL8,c,p):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,c,p),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e));s.bindRenderbuffer(s.RENDERBUFFER,null)}async copyTextureToBuffer(e,t,n,r,s,a){const{backend:o,gl:l}=this,{textureGPU:u,glFormat:c,glType:p}=this.backend.get(e),y=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,y);const _=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+a:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,_,u,0);const b=this._getTypedArrayType(p),w=this._getBytesPerTexel(p,c),M=r*s*w,P=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,P),l.bufferData(l.PIXEL_PACK_BUFFER,M,l.STREAM_READ),l.readPixels(t,n,r,s,c,p,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await o.utils._clientWaitAsync();const D=new b(M/b.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,P),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,D),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(y),D}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let r=0;if(e===n.UNSIGNED_BYTE&&(r=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(r=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(r=4),t===n.RGBA)return r*4;if(t===n.RGB)return r*3;if(t===n.ALPHA)return r}}function rd(i){return i.isDataTexture?i.image.data:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?i:i.data}class v1e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class _1e{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const MR={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class x1e{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:r,object:s,type:a,info:o,index:l}=this;l!==0?n.drawElements(r,t,a,e):n.drawArrays(r,e,t),o.update(s,t,1)}renderInstances(e,t,n){const{gl:r,mode:s,type:a,index:o,object:l,info:u}=this;n!==0&&(o!==0?r.drawElementsInstanced(s,t,a,e,n):r.drawArraysInstanced(s,e,t,n),u.update(l,t,n))}renderMultiDraw(e,t,n){const{extensions:r,mode:s,object:a,info:o}=this;if(n===0)return;const l=r.get("WEBGL_multi_draw");if(l===null)for(let u=0;u<n;u++)this.render(e[u],t[u]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):l.multiDrawArraysWEBGL(s,e,0,t,0,n);let u=0;for(let c=0;c<n;c++)u+=t[c];o.update(a,u,1)}}renderMultiDrawInstances(e,t,n,r){const{extensions:s,mode:a,object:o,info:l}=this;if(n===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let c=0;c<n;c++)this.renderInstances(e[c],t[c],r[c]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,r,0,n):u.multiDrawArraysInstancedWEBGL(a,e,0,t,0,r,0,n);let c=0;for(let p=0;p<n;p++)c+=t[p]*r[p];l.update(o,c,1)}}}class JU{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class b1e extends JU{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let r=0;r<this.maxQueries;r++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return la(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(r){console.error("Error in beginQuery:",r),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[r,s]of this.queryStates)if(s==="ended"){const a=this.queries[r];e.push(this.resolveQuery(a))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((r,s)=>r+s,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,r=!1;const s=()=>{n&&(clearTimeout(n),n=null)},a=l=>{r||(r=!0,s(),t(l))},o=()=>{if(this.isDisposed){a(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){a(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(o,1);return}const c=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(c)/1e6)}catch(l){console.error("Error checking query:",l),t(this.lastValue)}};o()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class ER extends ZU{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},r=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function s(a){a.preventDefault();const o={api:"WebGL",message:a.statusMessage||"Unknown reason",reason:null,originalEvent:a};e.onDeviceLost(o)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=r,this.extensions=new v1e(this),this.capabilities=new _1e(this),this.attributeUtils=new p1e(this),this.textureUtils=new y1e(this),this.bufferRenderer=new x1e(this),this.state=new m1e(this),this.utils=new g1e(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return Vs}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,n=null){const r=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:r.RGBA8}),n!==null){const s=e.stencilBuffer?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer===!0&&e.multiview===!1&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new b1e(this.gl,e,2048));const n=this.timestampQueryPool[e];n.allocateQueriesForContext(t)!==null&&n.beginQuery(t)}prepareTimestampBuffer(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e].endQuery(t)}getContext(){return this.gl}beginRender(e){const{state:t}=this,n=this.get(e);if(n.frameCalls=this.renderer.info.render.frameCalls,e.viewport)this.updateViewport(e);else{const{width:s,height:a}=this.getDrawingBufferSize();t.viewport(0,0,s,a)}if(e.scissor){const{x:s,y:a,width:o,height:l}=e.scissorValue;t.scissor(s,e.height-l-a,o,l)}this.initTimestampQuery(cc.RENDER,this.getTimestampUID(e)),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const r=e.occlusionQueryCount;r>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(r),n.occlusionQueryObjects=new Array(r),n.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,r=this.get(e),s=r.previousContext;n.resetVertexState();const a=e.occlusionQueryCount;a>0&&(a>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const o=e.textures;if(o!==null)for(let l=0;l<o.length;l++){const u=o[l];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=s,this._resolveRenderTarget(e),s!==null)if(this._setFramebuffer(s),s.viewport)this.updateViewport(s);else{const{width:l,height:u}=this.getDrawingBufferSize();n.viewport(0,0,l,u)}this.prepareTimestampBuffer(cc.RENDER,this.getTimestampUID(e))}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet,{gl:a}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const o=()=>{let l=0;for(let u=0;u<n.length;u++){const c=n[u];c!==null&&a.getQueryParameter(c,a.QUERY_RESULT_AVAILABLE)&&(a.getQueryParameter(c,a.QUERY_RESULT)===0&&s.add(r[u]),n[u]=null,a.deleteQuery(c),l++)}l<n.length?requestAnimationFrame(o):t.occluded=s};o()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:r,width:s,height:a}=e.viewportValue;t.viewport(n,e.height-a-r,s,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,n,r=null,s=!0,a=!0){const{gl:o,renderer:l}=this;r===null&&(r={textures:null,clearColorValue:this.getClearColor()});let u=0;if(e&&(u|=o.COLOR_BUFFER_BIT),t&&(u|=o.DEPTH_BUFFER_BIT),n&&(u|=o.STENCIL_BUFFER_BIT),u!==0){let c;r.clearColorValue?c=r.clearColorValue:c=this.getClearColor();const p=l.getClearDepth(),y=l.getClearStencil();if(t&&this.state.setDepthMask(!0),r.textures===null)o.clearColor(c.r,c.g,c.b,c.a),o.clear(u);else{if(s&&this._setFramebuffer(r),e)for(let _=0;_<r.textures.length;_++)_===0?o.clearBufferfv(o.COLOR,_,[c.r,c.g,c.b,c.a]):o.clearBufferfv(o.COLOR,_,[0,0,0,1]);t&&n?o.clearBufferfi(o.DEPTH_STENCIL,0,p,y):t?o.clearBufferfv(o.DEPTH,0,[p]):n&&o.clearBufferiv(o.STENCIL,0,[y]),s&&a&&this._resolveRenderTarget(r)}}}beginCompute(e){const{state:t,gl:n}=this,r=this.get(e);r.frameCalls=this.renderer.info.compute.frameCalls,t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(cc.COMPUTE,this.getTimestampUID(e))}compute(e,t,n,r,s=null){const{state:a,gl:o}=this;this.discard===!1&&(o.enable(o.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:u,attributes:c}=this.get(r),p=this._getVaoKey(c),y=this.vaoCache[p];y===void 0?this.vaoCache[p]=this._createVao(c):a.setVertexState(y),a.useProgram(l),this._bindUniforms(n);const _=this._getTransformFeedback(u);o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,_),o.beginTransformFeedback(o.POINTS),s=s!==null?s:t.count,Array.isArray(s)&&(la("WebGLBackend.compute(): The count parameter must be a single number, not an array."),s=s[0]),c[0].isStorageInstancedBufferAttribute?o.drawArraysInstanced(o.POINTS,0,1,s):o.drawArrays(o.POINTS,0,s),o.endTransformFeedback(),o.bindTransformFeedback(o.TRANSFORM_FEEDBACK,null);for(let b=0;b<u.length;b++){const w=u[b];w.pbo&&this.has(w.pbo)&&this.textureUtils.copyBufferToTexture(w.transformBuffer,w.pbo),w.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(cc.COMPUTE,this.getTimestampUID(e)),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:t,pipeline:n,material:r,context:s,hardwareClippingPlanes:a}=e,{programGPU:o}=this.get(n),{gl:l,state:u}=this,c=this.get(s),p=e.getDrawParameters();if(p===null)return;this._bindUniforms(e.getBindings());const y=t.isMesh&&t.matrixWorld.determinant()<0;u.setMaterial(r,y,a),u.useProgram(o);const _=e.getAttributes(),b=this.get(_);let w=b.vaoGPU;if(w===void 0){const q=this._getVaoKey(_);w=this.vaoCache[q],w===void 0&&(w=this._createVao(_),this.vaoCache[q]=w,b.vaoGPU=w)}const E=e.getIndex(),M=E!==null?this.get(E).bufferGPU:null;u.setVertexState(w,M);const P=c.lastOcclusionObject;if(P!==t&&P!==void 0){if(P!==null&&P.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),c.occlusionQueryIndex++),t.occlusionTest===!0){const q=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,q),c.occlusionQueries[c.occlusionQueryIndex]=q,c.occlusionQueryObjects[c.occlusionQueryIndex]=t}c.lastOcclusionObject=t}const D=this.bufferRenderer;t.isPoints?D.mode=l.POINTS:t.isLineSegments?D.mode=l.LINES:t.isLine?D.mode=l.LINE_STRIP:t.isLineLoop?D.mode=l.LINE_LOOP:r.wireframe===!0?(u.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),D.mode=l.LINES):D.mode=l.TRIANGLES;const{vertexCount:B,instanceCount:U}=p;let{firstVertex:O}=p;if(D.object=t,E!==null){O*=E.array.BYTES_PER_ELEMENT;const q=this.get(E);D.index=E.count,D.type=q.type}else D.index=0;const z=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?(la("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),D.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?D.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):la("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):U>1?D.renderInstances(O,B,U):D.render(O,B)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const q=this.get(e.camera),F=e.camera.cameras,G=e.getBindingGroup("cameraIndex").bindings[0];if(q.indexesGPU===void 0||q.indexesGPU.length!==F.length){const X=new Uint32Array([0,0,0,0]),re=[];for(let se=0,Ae=F.length;se<Ae;se++){const Se=l.createBuffer();X[0]=se,l.bindBuffer(l.UNIFORM_BUFFER,Se),l.bufferData(l.UNIFORM_BUFFER,X,l.STATIC_DRAW),re.push(Se)}q.indexesGPU=re}const j=this.get(G),$=this.renderer.getPixelRatio(),K=this._currentContext.renderTarget,ie=this._isRenderCameraDepthArray(this._currentContext),ee=this._currentContext.activeCubeFace;if(ie){const X=this.get(K.depthTexture);if(X.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){X.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:re}=K;for(let se=0,Ae=F.length;se<Ae;se++)this.renderer._activeCubeFace=se,this._currentContext.activeCubeFace=se,this._setFramebuffer(this._currentContext),this.clear(!1,!0,re,this._currentContext,!1,!1);this.renderer._activeCubeFace=ee,this._currentContext.activeCubeFace=ee}}for(let X=0,re=F.length;X<re;X++){const se=F[X];if(t.layers.test(se.layers)){ie&&(this.renderer._activeCubeFace=X,this._currentContext.activeCubeFace=X,this._setFramebuffer(this._currentContext));const Ae=se.viewport;if(Ae!==void 0){const Se=Ae.x*$,Ce=Ae.y*$,Ye=Ae.width*$,it=Ae.height*$;u.viewport(Math.floor(Se),Math.floor(e.context.height-it-Ce),Math.floor(Ye),Math.floor(it))}u.bindBufferBase(l.UNIFORM_BUFFER,j.index,q.indexesGPU[X]),z()}this._currentContext.activeCubeFace=ee,this.renderer._activeCubeFace=ee}}else z()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,a)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new f1e(e,t)}createProgram(e){const t=this.gl,{stage:n,code:r}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,r),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,r=e.pipeline,{fragmentProgram:s,vertexProgram:a}=r,o=n.createProgram(),l=this.get(s).shaderGPU,u=this.get(a).shaderGPU;if(n.attachShader(o,l),n.attachShader(o,u),n.linkProgram(o),this.set(r,{programGPU:o,fragmentShader:l,vertexShader:u}),t!==null&&this.parallel){const c=new Promise(p=>{const y=this.parallel,_=()=>{n.getProgramParameter(o,y.COMPLETION_STATUS_KHR)?(this._completeCompile(e,r),p()):requestAnimationFrame(_)};_()});t.push(c);return}this._completeCompile(e,r)}_handleSource(e,t){const n=e.split(`
`),r=[],s=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=s;o<a;o++){const l=o+1;r.push(`${l===t?">":" "} ${l}: ${n[o]}`)}return r.join(`
`)}_getShaderErrors(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),a=(e.getShaderInfoLog(t)||"").trim();if(r&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const l=parseInt(o[1]);return n.toUpperCase()+`

`+a+`

`+this._handleSource(e.getShaderSource(t),l)}else return a}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const r=this.gl,a=(r.getProgramInfoLog(e)||"").trim();if(r.getProgramParameter(e,r.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(r,e,n,t);else{const o=this._getShaderErrors(r,n,"vertex"),l=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+`

Program Info Log: `+a+`
`+o+`
`+l)}else a!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",a)}}_completeCompile(e,t){const{state:n,gl:r}=this,s=this.get(t),{programGPU:a,fragmentShader:o,vertexShader:l}=s;r.getProgramParameter(a,r.LINK_STATUS)===!1&&this._logProgramError(a,o,l),n.useProgram(a);const u=e.getBindings();this._setupBindings(u,a),this.set(t,{programGPU:a})}createComputePipeline(e,t){const{state:n,gl:r}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:a}=e,o=r.createProgram(),l=this.get(s).shaderGPU,u=this.get(a).shaderGPU,c=a.transforms,p=[],y=[];for(let E=0;E<c.length;E++){const M=c[E];p.push(M.varyingName),y.push(M.attributeNode)}r.attachShader(o,l),r.attachShader(o,u),r.transformFeedbackVaryings(o,p,r.SEPARATE_ATTRIBS),r.linkProgram(o),r.getProgramParameter(o,r.LINK_STATUS)===!1&&this._logProgramError(o,l,u),n.useProgram(o),this._setupBindings(t,o);const _=a.attributes,b=[],w=[];for(let E=0;E<_.length;E++){const M=_[E].node.attribute;b.push(M),this.has(M)||this.attributeUtils.createAttribute(M,r.ARRAY_BUFFER)}for(let E=0;E<y.length;E++){const M=y[E].attribute;this.has(M)||this.attributeUtils.createAttribute(M,r.ARRAY_BUFFER);const P=this.get(M);w.push(P)}this.set(e,{programGPU:o,transformBuffers:w,attributes:b})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,r=0;for(const s of t){this.set(s,{textures:r,uniformBuffers:n});for(const a of s.bindings)a.isUniformBuffer&&n++,a.isSampledTexture&&r++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let r=n.uniformBuffers,s=n.textures;for(const a of e.bindings){const o=this.get(a);if(a.isUniformsGroup||a.isUniformBuffer){const l=a.buffer;let{bufferGPU:u}=this.get(l);u===void 0?(u=t.createBuffer(),t.bindBuffer(t.UNIFORM_BUFFER,u),t.bufferData(t.UNIFORM_BUFFER,l,t.DYNAMIC_DRAW),this.set(l,{bufferGPU:u})):(t.bindBuffer(t.UNIFORM_BUFFER,u),t.bufferSubData(t.UNIFORM_BUFFER,0,l)),o.index=r++,o.bufferGPU=u,this.set(a,o)}else if(a.isSampledTexture){const{textureGPU:l,glTextureType:u}=this.get(a.texture);o.index=s++,o.textureGPU=l,o.glTextureType=u,this.set(a,o)}}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const r=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(MR).filter(r=>MR[r]===e),n=this.extensions;for(let r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){this.textureUtils.copyTextureToTexture(e,t,n,r,s,a)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let r=null;if(e.textures!==null){const s=e.renderTarget,a=this.get(s),{samples:o,depthBuffer:l,stencilBuffer:u}=s,c=s.isWebGLCubeRenderTarget===!0,p=s.isRenderTarget3D===!0,y=s.depth>1,_=s.isXRRenderTarget===!0,b=_===!0&&s._hasExternalTextures===!0;let w=a.msaaFrameBuffer,E=a.depthRenderbuffer;const M=this.extensions.get("WEBGL_multisampled_render_to_texture"),P=this.extensions.get("OVR_multiview2"),D=this._useMultisampledExtension(s),B=XI(e);let U;if(c?(a.cubeFramebuffers||(a.cubeFramebuffers={}),U=a.cubeFramebuffers[B]):_&&b===!1?U=this._xrFramebuffer:(a.framebuffers||(a.framebuffers={}),U=a.framebuffers[B]),U===void 0){U=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,U);const O=e.textures,z=[];if(c){a.cubeFramebuffers[B]=U;const{textureGPU:F}=this.get(O[0]),G=this.renderer._activeCubeFace,j=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+G,F,j)}else{a.framebuffers[B]=U;for(let F=0;F<O.length;F++){const G=O[F],j=this.get(G);j.renderTarget=e.renderTarget,j.cacheKey=B;const $=t.COLOR_ATTACHMENT0+F;if(s.multiview)P.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,$,j.textureGPU,0,o,0,2);else if(p||y){const K=this.renderer._activeCubeFace,ie=this.renderer._activeMipmapLevel;t.framebufferTextureLayer(t.FRAMEBUFFER,$,j.textureGPU,ie,K)}else if(D)M.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,$,t.TEXTURE_2D,j.textureGPU,0,o);else{const K=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,$,t.TEXTURE_2D,j.textureGPU,K)}}}const q=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const F=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(F,e,0,D),a.xrDepthRenderbuffer=F,z.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,F),t.framebufferRenderbuffer(t.FRAMEBUFFER,q,t.RENDERBUFFER,F)}else if(e.depthTexture!==null){z.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);const F=this.get(e.depthTexture);if(F.renderTarget=e.renderTarget,F.cacheKey=B,s.multiview)P.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,q,F.textureGPU,0,o,0,2);else if(b&&D)M.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,q,t.TEXTURE_2D,F.textureGPU,0,o);else if(e.depthTexture.isArrayTexture){const G=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,q,F.textureGPU,0,G)}else t.framebufferTexture2D(t.FRAMEBUFFER,q,t.TEXTURE_2D,F.textureGPU,0)}a.depthInvalidationArray=z}else{if(this._isRenderCameraDepthArray(e)){n.bindFramebuffer(t.FRAMEBUFFER,U);const z=this.renderer._activeCubeFace,q=this.get(e.depthTexture),F=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,F,q.textureGPU,0,z)}if((_||D||s.multiview)&&s._isOpaqueFramebuffer!==!0){n.bindFramebuffer(t.FRAMEBUFFER,U);const z=this.get(e.textures[0]);s.multiview?P.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,z.textureGPU,0,o,0,2):D?M.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,z.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,z.textureGPU,0);const q=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const F=a.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,F),t.framebufferRenderbuffer(t.FRAMEBUFFER,q,t.RENDERBUFFER,F)}else{const F=this.get(e.depthTexture);s.multiview?P.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,q,F.textureGPU,0,o,0,2):D?M.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,q,t.TEXTURE_2D,F.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,q,t.TEXTURE_2D,F.textureGPU,0)}}}if(o>0&&D===!1&&!s.multiview){if(w===void 0){const O=[];w=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,w);const z=[],q=e.textures;for(let F=0;F<q.length;F++){z[F]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,z[F]),O.push(t.COLOR_ATTACHMENT0+F);const G=e.textures[F],j=this.get(G);t.renderbufferStorageMultisample(t.RENDERBUFFER,o,j.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+F,t.RENDERBUFFER,z[F])}if(t.bindRenderbuffer(t.RENDERBUFFER,null),a.msaaFrameBuffer=w,a.msaaRenderbuffers=z,l&&E===void 0){E=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(E,e,o),a.depthRenderbuffer=E;const F=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;O.push(F)}a.invalidationArray=O}r=a.msaaFrameBuffer}else r=U;n.drawBuffers(e,U)}n.bindFramebuffer(t.FRAMEBUFFER,r)}_getVaoKey(e){let t="";for(let n=0;n<e.length;n++){const r=this.get(e[n]);t+=":"+r.id}return t}_createVao(e){const{gl:t}=this,n=t.createVertexArray();t.bindVertexArray(n);for(let r=0;r<e.length;r++){const s=e[r],a=this.get(s);t.bindBuffer(t.ARRAY_BUFFER,a.bufferGPU),t.enableVertexAttribArray(r);let o,l;s.isInterleavedBufferAttribute===!0?(o=s.data.stride*a.bytesPerElement,l=s.offset*a.bytesPerElement):(o=0,l=0),a.isInteger?t.vertexAttribIPointer(r,s.itemSize,a.type,o,l):t.vertexAttribPointer(r,s.itemSize,a.type,s.normalized,o,l),s.isInstancedBufferAttribute&&!s.isInterleavedBufferAttribute?t.vertexAttribDivisor(r,s.meshPerAttribute):s.isInterleavedBufferAttribute&&s.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(r,s.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),n}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:r}=this;n=r.createTransformFeedback(),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const a=e[s];r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,s,a.transformBuffer)}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const r of e)for(const s of r.bindings){const o=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,l,o)}else if(s.isSampledTexture){const l=n.getUniformLocation(t,s.name);n.uniform1i(l,o)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const r of e)for(const s of r.bindings){const a=this.get(s),o=a.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,o,a.bufferGPU):s.isSampledTexture&&n.bindTexture(a.glTextureType,a.textureGPU,t.TEXTURE0+o)}}_resolveRenderTarget(e){const{gl:t,state:n}=this,r=e.renderTarget;if(e.textures!==null&&r){const s=this.get(r);if(r.samples>0&&this._useMultisampledExtension(r)===!1){const a=s.framebuffers[e.getCacheKey()];let o=t.COLOR_BUFFER_BIT;r.resolveDepthBuffer&&(r.depthBuffer&&(o|=t.DEPTH_BUFFER_BIT),r.stencilBuffer&&r.resolveStencilBuffer&&(o|=t.STENCIL_BUFFER_BIT));const l=s.msaaFrameBuffer,u=s.msaaRenderbuffers,c=e.textures,p=c.length>1;if(n.bindFramebuffer(t.READ_FRAMEBUFFER,l),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),p)for(let y=0;y<c.length;y++)t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+y,t.RENDERBUFFER,null),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+y,t.TEXTURE_2D,null,0);for(let y=0;y<c.length;y++){if(p){const{textureGPU:_}=this.get(c[y]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u[y]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,_,0)}if(e.scissor){const{x:_,y:b,width:w,height:E}=e.scissorValue,M=e.height-E-b;t.blitFramebuffer(_,M,_+w,M+E,_,M,_+w,M+E,o,t.NEAREST)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,o,t.NEAREST)}if(p)for(let y=0;y<c.length;y++){const{textureGPU:_}=this.get(c[y]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+y,t.RENDERBUFFER,u[y]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+y,t.TEXTURE_2D,_,0)}this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,s.invalidationArray)}else if(r.resolveDepthBuffer===!1&&s.framebuffers){const a=s.framebuffers[e.getCacheKey()];n.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,s.depthInvalidationArray)}}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const d5={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Ds={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},_a={Store:"store"},Pi={Load:"load",Clear:"clear"},wR={CCW:"ccw",CW:"cw"},RR={None:"none",Back:"back"},Q5={Uint16:"uint16",Uint32:"uint32"},ve={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rg11b10ufloat",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-unorm-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},Iy={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},sc={Linear:"linear",Nearest:"nearest"},gi={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Q2={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},CR={None:0,All:15},_u={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},Uy={Storage:"storage",ReadOnlyStorage:"read-only-storage"},Oy={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},NR={NonFiltering:"non-filtering",Comparison:"comparison"},$2={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},PR={TwoD:"2d",ThreeD:"3d"},Yr={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},S1e={All:"all"},sd={Vertex:"vertex",Instance:"instance"},R_={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"};class T1e extends $U{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class M1e extends jU{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let E1e=0;class w1e extends M1e{constructor(e,t){super("StorageBuffer_"+E1e++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:zs.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class R1e extends Zu{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:sc.Linear}),this.flipYSampler=e.createSampler({minFilter:sc.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:r})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:d5.TriangleStrip,stripIndexFormat:Q5.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:d5.TriangleStrip,stripIndexFormat:Q5.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const r=t.format,{width:s,height:a}=t.size,o=this.getTransferPipeline(r),l=this.getFlipYPipeline(r),u=this.device.createTexture({size:{width:s,height:a,depthOrArrayLayers:1},format:r,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),c=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Yr.TwoD,baseArrayLayer:n}),p=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:Yr.TwoD,baseArrayLayer:0}),y=this.device.createCommandEncoder({}),_=(b,w,E)=>{const M=b.getBindGroupLayout(0),P=this.device.createBindGroup({layout:M,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:w}]}),D=y.beginRenderPass({colorAttachments:[{view:E,loadOp:Pi.Clear,storeOp:_a.Store,clearValue:[0,0,0,0]}]});D.setPipeline(b),D.setBindGroup(0,P),D.draw(4,1,0,0),D.end()};_(o,c,p),_(l,p,c),this.device.queue.submit([y.finish()]),u.destroy()}generateMipmaps(e,t,n=0){const r=this.get(e);r.useCount===void 0&&(r.useCount=0,r.layers=[]);const s=r.layers[n]||this._mipmapCreateBundles(e,t,n),a=this.device.createCommandEncoder({});this._mipmapRunBundles(a,s),this.device.queue.submit([a.finish()]),r.useCount!==0&&(r.layers[n]=s),r.useCount++}_mipmapCreateBundles(e,t,n){const r=this.getTransferPipeline(t.format),s=r.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Yr.TwoD,baseArrayLayer:n});const o=[];for(let l=1;l<t.mipLevelCount;l++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),c=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:Yr.TwoD,baseArrayLayer:n}),p={colorAttachments:[{view:c,loadOp:Pi.Clear,storeOp:_a.Store,clearValue:[0,0,0,0]}]},y=this.device.createRenderBundleEncoder({colorFormats:[t.format]});y.setPipeline(r),y.setBindGroup(0,u),y.draw(4,1,0,0),o.push({renderBundles:[y.finish()],passDescriptor:p}),a=c}return o}_mipmapRunBundles(e,t){const n=t.length;for(let r=0;r<n;r++){const s=t[r],a=e.beginRenderPass(s.passDescriptor);a.executeBundles(s.renderBundles),a.end()}}}const C1e={[op]:"never",[n7]:"less",[lp]:"equal",[i7]:"less-equal",[up]:"greater",[hp]:"greater-equal",[fp]:"always",[cp]:"not-equal"},N1e=[0,1,3,2,4,5];class P1e{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Ka,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,r=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===sc.Linear&&s.minFilter===sc.Linear&&s.mipmapFilter===sc.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=C1e[e.compareFunction]),r.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=C_(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");if(e.isExternalTexture){r.texture=e.sourceTexture,r.initialized=!0;return}t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:a,depth:o,levels:l}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),c=e.internalFormat||t.format||C_(e,n.device);r.format=c;const{samples:p,primarySamples:y,isMSAA:_}=n.utils.getTextureSampleData(e);let b=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(b|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&c!==ve.RGB9E5UFloat&&(b|=GPUTextureUsage.RENDER_ATTACHMENT);const w={label:e.name,size:{width:s,height:a,depthOrArrayLayers:o},mipLevelCount:l,sampleCount:y,dimension:u,format:c,usage:b};if(c===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(w.textureBindingViewDimension=Yr.Cube),r.texture=n.device.createTexture(w),_){const E=Object.assign({},w);E.label=E.label+"-msaa",E.sampleCount=p,E.mipLevelCount=1,r.msaaTexture=n.device.createTexture(E)}r.initialized=!0,r.textureDescriptorGPU=w}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let r=0;r<n;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:r,height:s}=n.getDrawingBufferSize(),a=this.depthTexture,o=n.get(a).texture;let l,u;if(t?(l=Qa,u=Xa):e&&(l=Ya,u=zi),o!==void 0){if(a.image.width===r&&a.image.height===s&&a.format===l&&a.type===u)return o;this.destroyTexture(a)}return a.name="depthBuffer",a.format=l,a.type=u,a.image.width=r,a.image.height=s,this.createTexture(a,{width:r,height:s}),n.get(a).texture}updateTexture(e,t){const n=this.backend.get(e),r=e.mipmaps,{textureDescriptorGPU:s}=n;if(!(e.isRenderTargetTexture||s===void 0)){if(e.isDataTexture)if(r.length>0)for(let a=0,o=r.length;a<o;a++){const l=r[a];this._copyBufferToTexture(l,n.texture,s,0,e.flipY,0,a)}else this._copyBufferToTexture(t.image,n.texture,s,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let a=0;a<t.image.depth;a++)this._copyBufferToTexture(t.image,n.texture,s,a,e.flipY,a);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,n.texture,s);else if(e.isCubeTexture)this._copyCubeMapToTexture(e,n.texture,s);else if(r.length>0)for(let a=0,o=r.length;a<o;a++){const l=r[a];this._copyImageToTexture(l,n.texture,s,0,e.flipY,e.premultiplyAlpha,a)}else this._copyImageToTexture(t.image,n.texture,s,0,e.flipY,e.premultiplyAlpha);n.version=e.version}}async copyTextureToBuffer(e,t,n,r,s,a){const o=this.backend.device,l=this.backend.get(e),u=l.texture,c=l.textureDescriptorGPU.format,p=this._getBytesPerTexel(c);let y=r*p;y=Math.ceil(y/256)*256;const _=o.createBuffer({size:(s-1)*y+r*p,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),b=o.createCommandEncoder();b.copyTextureToBuffer({texture:u,origin:{x:t,y:n,z:a}},{buffer:_,bytesPerRow:y},{width:r,height:s});const w=this._getTypedArrayType(c);o.queue.submit([b.finish()]),await _.mapAsync(GPUMapMode.READ);const E=_.getMappedRange();return new w(E)}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new mr;n.minFilter=Xi,n.magFilter=Xi,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new Wu;n.minFilter=Xi,n.magFilter=Xi,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_copyCubeMapToTexture(e,t,n){const r=e.images,s=e.mipmaps;for(let a=0;a<6;a++){const o=r[a],l=e.flipY===!0?N1e[a]:a;o.isDataTexture?this._copyBufferToTexture(o.image,t,n,l,e.flipY):this._copyImageToTexture(o,t,n,l,e.flipY,e.premultiplyAlpha);for(let u=0;u<s.length;u++){const p=s[u].images[a];p.isDataTexture?this._copyBufferToTexture(p.image,t,n,l,e.flipY,0,u+1):this._copyImageToTexture(p,t,n,l,e.flipY,e.premultiplyAlpha,u+1)}}}_copyImageToTexture(e,t,n,r,s,a,o=0){const l=this.backend.device,u=o>0?e.width:n.size.width,c=o>0?e.height:n.size.height;l.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:o,origin:{x:0,y:0,z:r},premultipliedAlpha:a},{width:u,height:c,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new R1e(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,r,s,a=0,o=0){const l=this.backend.device,u=e.data,c=this._getBytesPerTexel(n.format),p=e.width*c;l.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:r}},u,{offset:e.width*e.height*c*a,bytesPerRow:p},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_copyCompressedBufferToTexture(e,t,n){const r=this.backend.device,s=this._getBlockData(n.format),a=n.size.depthOrArrayLayers>1;for(let o=0;o<e.length;o++){const l=e[o],u=l.width,c=l.height,p=a?n.size.depthOrArrayLayers:1,y=Math.ceil(u/s.width)*s.byteLength,_=y*Math.ceil(c/s.height);for(let b=0;b<p;b++)r.queue.writeTexture({texture:t,mipLevel:o,origin:{x:0,y:0,z:b}},l.data,{offset:b*_,bytesPerRow:y,rowsPerImage:Math.ceil(c/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(c/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===ve.BC1RGBAUnorm||e===ve.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===ve.BC2RGBAUnorm||e===ve.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ve.BC3RGBAUnorm||e===ve.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ve.BC4RUnorm||e===ve.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===ve.BC5RGUnorm||e===ve.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===ve.BC6HRGBUFloat||e===ve.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===ve.BC7RGBAUnorm||e===ve.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===ve.ETC2RGB8Unorm||e===ve.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ve.ETC2RGB8A1Unorm||e===ve.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===ve.ETC2RGBA8Unorm||e===ve.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ve.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===ve.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===ve.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===ve.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===ve.ASTC4x4Unorm||e===ve.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===ve.ASTC5x4Unorm||e===ve.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===ve.ASTC5x5Unorm||e===ve.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===ve.ASTC6x5Unorm||e===ve.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===ve.ASTC6x6Unorm||e===ve.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===ve.ASTC8x5Unorm||e===ve.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===ve.ASTC8x6Unorm||e===ve.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===ve.ASTC8x8Unorm||e===ve.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===ve.ASTC10x5Unorm||e===ve.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===ve.ASTC10x6Unorm||e===ve.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===ve.ASTC10x8Unorm||e===ve.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===ve.ASTC10x10Unorm||e===ve.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===ve.ASTC12x10Unorm||e===ve.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===ve.ASTC12x12Unorm||e===ve.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=Iy.ClampToEdge;return e===B1?t=Iy.Repeat:e===L1&&(t=Iy.MirrorRepeat),t}_convertFilterMode(e){let t=sc.Linear;return(e===Xi||e===K6||e===O0)&&(t=sc.Nearest),t}_getBytesPerTexel(e){if(e===ve.R8Unorm||e===ve.R8Snorm||e===ve.R8Uint||e===ve.R8Sint)return 1;if(e===ve.R16Uint||e===ve.R16Sint||e===ve.R16Float||e===ve.RG8Unorm||e===ve.RG8Snorm||e===ve.RG8Uint||e===ve.RG8Sint)return 2;if(e===ve.R32Uint||e===ve.R32Sint||e===ve.R32Float||e===ve.RG16Uint||e===ve.RG16Sint||e===ve.RG16Float||e===ve.RGBA8Unorm||e===ve.RGBA8UnormSRGB||e===ve.RGBA8Snorm||e===ve.RGBA8Uint||e===ve.RGBA8Sint||e===ve.BGRA8Unorm||e===ve.BGRA8UnormSRGB||e===ve.RGB9E5UFloat||e===ve.RGB10A2Unorm||e===ve.RG11B10UFloat||e===ve.Depth32Float||e===ve.Depth24Plus||e===ve.Depth24PlusStencil8||e===ve.Depth32FloatStencil8)return 4;if(e===ve.RG32Uint||e===ve.RG32Sint||e===ve.RG32Float||e===ve.RGBA16Uint||e===ve.RGBA16Sint||e===ve.RGBA16Float)return 8;if(e===ve.RGBA32Uint||e===ve.RGBA32Sint||e===ve.RGBA32Float)return 16}_getTypedArrayType(e){if(e===ve.R8Uint)return Uint8Array;if(e===ve.R8Sint)return Int8Array;if(e===ve.R8Unorm)return Uint8Array;if(e===ve.R8Snorm)return Int8Array;if(e===ve.RG8Uint)return Uint8Array;if(e===ve.RG8Sint)return Int8Array;if(e===ve.RG8Unorm)return Uint8Array;if(e===ve.RG8Snorm)return Int8Array;if(e===ve.RGBA8Uint)return Uint8Array;if(e===ve.RGBA8Sint)return Int8Array;if(e===ve.RGBA8Unorm||e===ve.RGBA8UnormSRGB)return Uint8Array;if(e===ve.RGBA8Snorm)return Int8Array;if(e===ve.R16Uint)return Uint16Array;if(e===ve.R16Sint)return Int16Array;if(e===ve.RG16Uint)return Uint16Array;if(e===ve.RG16Sint)return Int16Array;if(e===ve.RGBA16Uint)return Uint16Array;if(e===ve.RGBA16Sint)return Int16Array;if(e===ve.R16Float||e===ve.RG16Float||e===ve.RGBA16Float)return Uint16Array;if(e===ve.R32Uint)return Uint32Array;if(e===ve.R32Sint)return Int32Array;if(e===ve.R32Float)return Float32Array;if(e===ve.RG32Uint)return Uint32Array;if(e===ve.RG32Sint)return Int32Array;if(e===ve.RG32Float)return Float32Array;if(e===ve.RGBA32Uint)return Uint32Array;if(e===ve.RGBA32Sint)return Int32Array;if(e===ve.RGBA32Float)return Float32Array;if(e===ve.BGRA8Unorm||e===ve.BGRA8UnormSRGB)return Uint8Array;if(e===ve.RGB10A2Unorm||e===ve.RGB9E5UFloat||e===ve.RG11B10UFloat)return Uint32Array;if(e===ve.Depth32Float)return Float32Array;if(e===ve.Depth24Plus||e===ve.Depth24PlusStencil8)return Uint32Array;if(e===ve.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.is3DTexture||e.isData3DTexture?t=PR.ThreeD:t=PR.TwoD,t}}function C_(i,e=null){const t=i.format,n=i.type,r=i.colorSpace,s=gn.getTransfer(r);let a;if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case b1:case S1:a=s===Ht?ve.BC1RGBAUnormSRGB:ve.BC1RGBAUnorm;break;case T1:a=s===Ht?ve.BC2RGBAUnormSRGB:ve.BC2RGBAUnorm;break;case M1:a=s===Ht?ve.BC3RGBAUnormSRGB:ve.BC3RGBAUnorm;break;case Xc:a=ve.BC4RUnorm;break;case Yc:a=ve.BC4RSnorm;break;case Qc:a=ve.BC5RGUnorm;break;case $c:a=ve.BC5RGSnorm;break;case jc:a=s===Ht?ve.BC7RGBAUnormSRGB:ve.BC7RGBAUnorm;break;case Nc:case Cc:a=s===Ht?ve.ETC2RGB8UnormSRGB:ve.ETC2RGB8Unorm;break;case Pc:a=s===Ht?ve.ETC2RGBA8UnormSRGB:ve.ETC2RGBA8Unorm;break;case Dc:a=s===Ht?ve.ASTC4x4UnormSRGB:ve.ASTC4x4Unorm;break;case Bc:a=s===Ht?ve.ASTC5x4UnormSRGB:ve.ASTC5x4Unorm;break;case Lc:a=s===Ht?ve.ASTC5x5UnormSRGB:ve.ASTC5x5Unorm;break;case Ic:a=s===Ht?ve.ASTC6x5UnormSRGB:ve.ASTC6x5Unorm;break;case Uc:a=s===Ht?ve.ASTC6x6UnormSRGB:ve.ASTC6x6Unorm;break;case Oc:a=s===Ht?ve.ASTC8x5UnormSRGB:ve.ASTC8x5Unorm;break;case Fc:a=s===Ht?ve.ASTC8x6UnormSRGB:ve.ASTC8x6Unorm;break;case Vc:a=s===Ht?ve.ASTC8x8UnormSRGB:ve.ASTC8x8Unorm;break;case zc:a=s===Ht?ve.ASTC10x5UnormSRGB:ve.ASTC10x5Unorm;break;case Gc:a=s===Ht?ve.ASTC10x6UnormSRGB:ve.ASTC10x6Unorm;break;case qc:a=s===Ht?ve.ASTC10x8UnormSRGB:ve.ASTC10x8Unorm;break;case kc:a=s===Ht?ve.ASTC10x10UnormSRGB:ve.ASTC10x10Unorm;break;case Hc:a=s===Ht?ve.ASTC12x10UnormSRGB:ve.ASTC12x10Unorm;break;case Wc:a=s===Ht?ve.ASTC12x12UnormSRGB:ve.ASTC12x12Unorm;break;case nr:a=s===Ht?ve.RGBA8UnormSRGB:ve.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case nr:switch(n){case Lu:a=ve.RGBA8Snorm;break;case Iu:a=ve.RGBA16Sint;break;case Xo:a=ve.RGBA16Uint;break;case zi:a=ve.RGBA32Uint;break;case rs:a=ve.RGBA32Sint;break;case Ar:a=s===Ht?ve.RGBA8UnormSRGB:ve.RGBA8Unorm;break;case $r:a=ve.RGBA16Float;break;case or:a=ve.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case e8:switch(n){case e7:a=ve.RGB9E5UFloat;break;case t7:a=ve.RG11B10UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case a3:switch(n){case Lu:a=ve.R8Snorm;break;case Iu:a=ve.R16Sint;break;case Xo:a=ve.R16Uint;break;case zi:a=ve.R32Uint;break;case rs:a=ve.R32Sint;break;case Ar:a=ve.R8Unorm;break;case $r:a=ve.R16Float;break;case or:a=ve.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case Sl:switch(n){case Lu:a=ve.RG8Snorm;break;case Iu:a=ve.RG16Sint;break;case Xo:a=ve.RG16Uint;break;case zi:a=ve.RG32Uint;break;case rs:a=ve.RG32Sint;break;case Ar:a=ve.RG8Unorm;break;case $r:a=ve.RG16Float;break;case or:a=ve.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case Ya:switch(n){case Xo:a=ve.Depth16Unorm;break;case zi:a=ve.Depth24Plus;break;case or:a=ve.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case Qa:switch(n){case Xa:a=ve.Depth24PlusStencil8;break;case or:e&&e.features.has(R_.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),a=ve.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case Hu:switch(n){case rs:a=ve.R32Sint;break;case zi:a=ve.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case o3:switch(n){case rs:a=ve.RG32Sint;break;case zi:a=ve.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case l3:switch(n){case rs:a=ve.RGBA32Sint;break;case zi:a=ve.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return a}const D1e=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,B1e=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,DR={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},L1e=i=>{i=i.trim();const e=i.match(D1e);if(e!==null&&e.length===4){const t=e[2],n=[];let r=null;for(;(r=B1e.exec(t))!==null;)n.push({name:r[1],type:r[2]});const s=[];for(let c=0;c<n.length;c++){const{name:p,type:y}=n[c];let _=y;_.startsWith("ptr")?_="pointer":(_.startsWith("texture")&&(_=y.split("<")[0]),_=DR[_]),s.push(new DS(_,p))}const a=i.substring(e[0].length),o=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:DR[o]||o,inputs:s,name:l,inputsCode:t,blockCode:a,outputType:o}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class I1e extends LS{constructor(e){const{type:t,inputs:n,name:r,inputsCode:s,blockCode:a,outputType:o}=L1e(e);super(t,n,r),this.inputsCode=s,this.blockCode=a,this.outputType=o}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class U1e extends kU{parseFunction(e){return new I1e(e)}}const $4=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},O1e={[zs.READ_ONLY]:"read",[zs.WRITE_ONLY]:"write",[zs.READ_WRITE]:"read_write"},BR={[B1]:"repeat",[Ra]:"clamp",[L1]:"mirror"},ad={vertex:$4?$4.VERTEX:1,fragment:$4?$4.FRAGMENT:2,compute:$4?$4.COMPUTE:4},LR={instance:!0,swizzleAssign:!1,storageBuffer:!0},F1e={"^^":"tsl_xor"},V1e={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},IR={},Vh={tsl_xor:new na("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new na("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new na("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new na("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new na("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new na("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new na("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new na("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new na("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new na("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new na("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new na("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new na(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},z1e={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};let eO="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(eO+=`diagnostic( off, derivative_uniformity );
`);class G1e extends qU{constructor(e,t){super(e,t,new U1e),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,t,n,r,s,a=this.shaderStage){return a==="fragment"?r?s?`textureSample( ${t}, ${t}_sampler, ${n}, ${r}, ${s} )`:`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:s?`textureSample( ${t}, ${t}_sampler, ${n}, ${s} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.generateTextureSampleLevel(e,t,n,"0",r)}generateTextureSampleLevel(e,t,n,r,s,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,a,r):this.generateTextureLod(e,t,n,s,a,r)}generateWrapFunction(e){const t=`tsl_coord_${BR[e.wrapS]}S_${BR[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=IR[t];if(n===void 0){const r=[],s=e.isData3DTexture?"vec3f":"vec2f";let a=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const o=(l,u)=>{l===B1?(r.push(Vh.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${u} )`):l===Ra?(r.push(Vh.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${u} )`):l===L1?(r.push(Vh.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${u} )`):(a+=`		coord.${u}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};o(e.wrapS,"x"),a+=`,
`,o(e.wrapT,"y"),e.isData3DTexture&&(a+=`,
`,o(e.wrapR,"z")),a+=`
	);

}
`,IR[t]=n=new na(a,r)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const r=this.getDataFromNode(e,this.shaderStage,this.globalCache);r.dimensionsSnippet===void 0&&(r.dimensionsSnippet={});let s=r.dimensionsSnippet[n];if(r.dimensionsSnippet[n]===void 0){let a,o;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),u=l>1;e.isData3DTexture?o="vec3<u32>":o="vec2<u32>",u||e.isStorageTexture?a=t:a=`${t}${n?`, u32( ${n} )`:""}`,s=new Cd(new Nd(`textureDimensions( ${a} )`,o)),r.dimensionsSnippet[n]=s,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(r.arrayLayerCount=new Cd(new Nd(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(r.cubeFaceCount=new Cd(new Nd("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,n,r,s="0u"){this._include("biquadraticTexture");const a=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,s);return r&&(n=`${n} + vec2<f32>(${r}) / ${o}`),`tsl_biquadraticTexture( ${t}, ${a}( ${n} ), ${o}, u32( ${s} ) )`}generateTextureLod(e,t,n,r,s,a="0u"){const o=this.generateWrapFunction(e),l=this.generateTextureDimension(e,t,a),u=e.isData3DTexture?"vec3":"vec2";s&&(n=`${n} + ${u}<f32>(${s}) / ${u}<f32>( ${l} )`);const c=`${u}<u32>( ${o}( ${n} ) * ${u}<f32>( ${l} ) )`;return this.generateTextureLoad(e,t,c,r,null,a)}generateTextureLoad(e,t,n,r,s,a="0u"){let o;return s&&(n=`${n} + ${s}`),r?o=`textureLoad( ${t}, ${n}, ${r}, u32( ${a} ) )`:(o=`textureLoad( ${t}, ${n}, u32( ${a} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(o+=".x")),o}generateTextureStore(e,t,n,r,s){let a;return r?a=`textureStore( ${t}, ${n}, ${r}, ${s} )`:a=`textureStore( ${t}, ${n}, ${s} )`,a}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===or||this.isSampleCompare(e)===!1&&e.minFilter===Xi&&e.magFilter===Xi||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,r,s,a=this.shaderStage){let o=null;return this.isUnfilterable(e)?o=this.generateTextureLod(e,t,n,r,s,"0",a):o=this._generateTextureSample(e,t,n,r,s,a),o}generateTextureGrad(e,t,n,r,s,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]}, ${a} )`:`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,n,r,s,a,o=this.shaderStage){if(o==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?a?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${r}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${r} )`:a?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,n,r,s,a){return this.isUnfilterable(e)===!1?a?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,a,r):this.generateTextureLod(e,t,n,s,a,r)}generateTextureBias(e,t,n,r,s,a,o=this.shaderStage){if(o==="fragment")return a?`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r}, ${a} )`:`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,r=e.type;return r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"?n:r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=F1e[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?e.isAtomic===!0?(console.warn("WebGPURenderer: Atomic operations are only supported in compute shaders."),zs.READ_WRITE):zs.READ_ONLY:e.access}getStorageAccess(e,t){return O1e[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),a=this.getDataFromNode(e,n,this.globalCache);if(a.uniformGPU===void 0){let o;const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let p=null;const y=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?e.value.is3DTexture===!0?p=new w_(s.name,s.node,l,y):p=new pm(s.name,s.node,l,y):t==="cubeTexture"?p=new KU(s.name,s.node,l,y):t==="texture3D"&&(p=new w_(s.name,s.node,l,y)),p.store=e.isStorageTextureNode===!0,p.setVisibility(ad[n]),this.isUnfilterable(e.value)===!1&&p.store===!1){const _=new T1e(`${s.name}_sampler`,s.node,l);_.setVisibility(ad[n]),c.push(_,p),o=[_,p]}else c.push(p),o=[p]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const p=t==="buffer"?YU:w1e,y=new p(e,l);y.setVisibility(ad[n]),c.push(y),o=y,s.name=r||"NodeBuffer_"+s.id}else{const p=this.uniformGroups[n]||(this.uniformGroups[n]={});let y=p[u];y===void 0&&(y=new QU(u,l),y.setVisibility(ad[n]),p[u]=y,c.push(y)),o=this.getNodeUniform(s,t),y.addUniform(o)}a.uniformGPU=o}return s}getBuiltin(e,t,n,r=this.shaderStage){const s=this.builtins[r]||(this.builtins[r]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const a of t.inputs)r.push(a.name+" : "+this.getType(a.type));let s=`fn ${t.name}( ${r.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const r of n)t.push(`enable ${r};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:r,property:s,type:a}of n.values())t.push(`@builtin( ${r} ) ${s} : ${a}`);return t.join(`,
	`)}getScopedArray(e,t,n,r){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:r,bufferType:s,bufferCount:a}of this.scopedArrays.values()){const o=this.getType(s);t.push(`var<${r}> ${n}: array< ${o}, ${a} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const r=this.getAttributesArray();for(let s=0,a=r.length;s<a;s++){const o=r[s],l=o.name,u=this.getType(o.type);t.push(`@location( ${s} ) ${l} : ${u}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const r=e.output?"@location( "+n.index+" ) ":"";let s=this.getType(n.type);n.atomic&&(s="atomic< "+s+" >"),t.push(`	${r+n.name} : ${s}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const r=[];for(const s of n){let a=`struct ${s.name} {
`;a+=this.getStructMembers(s),a+=`
};`,r.push(a)}t=`
`+r.join(`

`)+`
`}return t}getVar(e,t,n=null){let r=`var ${t} : `;return n!==null?r+=this.generateArrayDeclaration(e,n):r+=this.getType(e),r}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`	${this.getVar(r.type,r.name,r.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,a=this.vars[e];for(let o=0;o<s.length;o++){const l=s[o];if(l.needsInterpolation){let u=`@location( ${o} )`;if(l.interpolationType){const c=l.interpolationSampling!==null?`, ${l.interpolationSampling} )`:" )";u+=` @interpolate( ${l.interpolationType}${c}`}else/^(int|uint|ivec|uvec)/.test(l.type)&&(u+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${u} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&a.includes(l)===!1&&a.push(l)}}const n=this.getBuiltins(e);n&&t.push(n);const r=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+r):r}isCustomStruct(e){const t=e.value,n=e.node,r=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&n.structTypeNode!==null,s=n.value&&n.value.array&&typeof n.value.itemSize=="number"&&n.value.array.length>n.value.itemSize;return r&&!s}getUniforms(e){const t=this.uniforms[e],n=[],r=[],s=[],a={};for(const l of t){const u=l.groupNode.name,c=this.bindingsIndexes[u];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const p=l.node.value;this.isUnfilterable(p)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(p)?n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler_comparison;`):n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler;`));let y,_="";const{primarySamples:b}=this.renderer.backend.utils.getTextureSampleData(p);if(b>1&&(_="_multisampled"),p.isCubeTexture===!0)y="texture_cube<f32>";else if(p.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&p.compareFunction===null?y=`texture${_}_2d<f32>`:y=`texture_depth${_}_2d${p.isArrayTexture===!0?"_array":""}`;else if(l.node.isStorageTextureNode===!0){const w=C_(p),E=this.getStorageAccess(l.node,e),M=l.node.value.is3DTexture,P=l.node.value.isArrayTexture;y=`texture_storage_${M?"3d":`2d${P?"_array":""}`}<${w}, ${E}>`}else if(p.isArrayTexture===!0||p.isDataArrayTexture===!0||p.isCompressedArrayTexture===!0)y="texture_2d_array<f32>";else if(p.is3DTexture===!0||p.isData3DTexture===!0)y="texture_3d<f32>";else{const w=this.getComponentTypeFromTexture(p).charAt(0);y=`texture${_}_2d<${w}32>`}n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name} : ${y};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const p=l.node,y=this.getType(p.getNodeType(this)),_=p.bufferCount,b=_>0&&l.type==="buffer"?", "+_:"",w=p.isStorageBufferNode?`storage, ${this.getStorageAccess(p,e)}`:"uniform";if(this.isCustomStruct(l))r.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var<${w}> ${l.name} : ${y};`);else{const M=`	value : array< ${p.isAtomic?`atomic<${y}>`:`${y}`}${b} >`;r.push(this._getWGSLStructBinding(l.name,M,w,c.binding++,c.group))}}else{const p=this.getType(this.getVectorType(l.type)),y=l.groupNode.name;(a[y]||(a[y]={index:c.binding++,id:c.group,snippets:[]})).snippets.push(`	${l.name} : ${p}`)}}for(const l in a){const u=a[l];s.push(this._getWGSLStructBinding(l,u.snippets.join(`,
`),"uniform",u.index,u.id))}let o=n.join(`
`);return o+=r.join(`
`),o+=s.join(`
`),o}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let r=`// code

`;r+=this.flowCode[t];const s=this.flowNodes[t],a=s[s.length-1],o=a.outputNode,l=o!==void 0&&o.isOutputStructNode===!0;for(const u of s){const c=this.getFlowData(u),p=u.name;if(p&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${p}
`),r+=`${c.code}
	`,u===a&&t!=="compute"){if(r+=`// result

	`,t==="vertex")r+=`varyings.Vertex = ${c.result};`;else if(t==="fragment")if(l)n.returnType=o.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",r+=`return ${c.result};`;else{let y="	@location(0) color: vec4<f32>";const _=this.getBuiltins("output");_&&(y+=`,
	`+_),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",y),n.structs+=`
var<private> output : OutputStruct;`,r+=`output.color = ${c.result};

	return output;`}}}n.flow=r}if(this.shaderStage=null,this.material!==null)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{const t=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,t)}}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getBitcastMethod(e){return`bitcast<${this.getType(e)}>`}getTernary(e,t,n){return`select( ${n}, ${t}, ${e} )`}getType(e){return V1e[e]||e}isAvailable(e){let t=LR[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),LR[e]=t),t}_getWGSLMethod(e){return Vh[e]!==void 0&&this._include(e),z1e[e]}_include(e){const t=Vh[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${eO}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){const[n,r,s]=t;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${n}, ${r}, ${s} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${n} * numWorkgroups.x )
		+ globalId.z * ( ${n} * numWorkgroups.x ) * ( ${r} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,r=0,s=0){const a=e+"Struct";return`${this._getWGSLStruct(a,t)}
@binding( ${r} ) @group( ${s} )
var<${n}> ${e} : ${a};`}}class q1e{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=ve.Depth24PlusStencil8:e.depth&&(t=ve.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,a=s.getRenderTarget();t=a?a.samples:s.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return d5.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return d5.LineList;if(e.isLine)return d5.LineStrip;if(e.isMesh)return d5.TriangleList}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===Ar)return ve.BGRA8Unorm;if(e===$r)return ve.RGBA16Float;throw new Error("Unsupported outputType")}}const tO=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);typeof Float16Array<"u"&&tO.set(Float16Array,["float16"]);const k1e=new Map([[ox,["float16"]]]),H1e=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class W1e{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),r=this.backend,s=r.get(n);let a=s.buffer;if(a===void 0){const o=r.device;let l=n.array;if(e.normalized===!1){if(l.constructor===Int16Array||l.constructor===Int8Array)l=new Int32Array(l);else if((l.constructor===Uint16Array||l.constructor===Uint8Array)&&(l=new Uint32Array(l),t&GPUBufferUsage.INDEX))for(let p=0;p<l.length;p++)l[p]===65535&&(l[p]=4294967295)}if(n.array=l,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){l=new l.constructor(n.count*4);for(let p=0;p<n.count;p++)l.set(n.array.subarray(p*3,p*3+3),p*4);n.itemSize=4,n.array=l,s._force3to4BytesAlignment=!0}const u=l.byteLength,c=u+(4-u%4)%4;a=o.createBuffer({label:n.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(a.getMappedRange()).set(l),a.unmap(),s.buffer=a}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,r=n.device,s=n.get(t),a=n.get(t).buffer;let o=t.array;if(s._force3to4BytesAlignment===!0){o=new o.constructor(t.count*4);for(let c=0;c<t.count;c++)o.set(t.array.subarray(c*3,c*3+3),c*4);t.array=o}const l=this._isTypedArray(o),u=t.updateRanges;if(u.length===0)r.queue.writeBuffer(a,0,o,0);else{const c=l?1:o.BYTES_PER_ELEMENT;for(let p=0,y=u.length;p<y;p++){const _=u[p];let b,w;if(s._force3to4BytesAlignment===!0){const M=Math.floor(_.start/3),P=Math.ceil(_.count/3);b=M*4*c,w=P*4*c}else b=_.start*c,w=_.count*c;const E=b*(l?o.BYTES_PER_ELEMENT:1);r.queue.writeBuffer(a,E,o,b,w)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let r=0;r<t.length;r++){const s=t[r],a=s.array.BYTES_PER_ELEMENT,o=this._getBufferAttribute(s);let l=n.get(o);if(l===void 0){let p,y;s.isInterleavedBufferAttribute===!0?(p=s.data.stride*a,y=s.data.isInstancedInterleavedBuffer?sd.Instance:sd.Vertex):(p=s.itemSize*a,y=s.isInstancedBufferAttribute?sd.Instance:sd.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(p=4),l={arrayStride:p,attributes:[],stepMode:y},n.set(o,l)}const u=this._getVertexFormat(s),c=s.isInterleavedBufferAttribute===!0?s.offset*a:0;l.attributes.push({shaderLocation:r,offset:c,format:u})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,a=s.size,o=n.createBuffer({label:`${e.name}_readback`,size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=n.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(s,0,o,0,a);const u=l.finish();n.queue.submit([u]),await o.mapAsync(GPUMapMode.READ);const c=o.getMappedRange(),p=new e.array.constructor(c.slice(0));return o.unmap(),p.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,r=e.array.constructor,s=e.constructor;let a;if(t===1)a=H1e.get(r);else{const l=(k1e.get(s)||tO.get(r))[n?1:0];if(l){const u=r.BYTES_PER_ELEMENT*t,p=Math.floor((u+3)/4)*4/r.BYTES_PER_ELEMENT;if(p%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");a=`${l}x${p}`}}return a||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),a}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class j1e{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,r=[];let s=0;for(const a of e.bindings){const o={binding:s++,visibility:a.visibility};if(a.isUniformBuffer||a.isStorageBuffer){const l={};a.isStorageBuffer&&(a.visibility&4&&(a.access===zs.READ_WRITE||a.access===zs.WRITE_ONLY)?l.type=Uy.Storage:l.type=Uy.ReadOnlyStorage),o.buffer=l}else if(a.isSampledTexture&&a.store){const l={};l.format=this.backend.get(a.texture).texture.format;const u=a.access;u===zs.READ_WRITE?l.access=Oy.ReadWrite:u===zs.WRITE_ONLY?l.access=Oy.WriteOnly:l.access=Oy.ReadOnly,a.texture.isArrayTexture?l.viewDimension=Yr.TwoDArray:a.texture.is3DTexture&&(l.viewDimension=Yr.ThreeD),o.storageTexture=l}else if(a.isSampledTexture){const l={},{primarySamples:u}=t.utils.getTextureSampleData(a.texture);if(u>1&&(l.multisampled=!0,a.texture.isDepthTexture||(l.sampleType=$2.UnfilterableFloat)),a.texture.isDepthTexture)t.compatibilityMode&&a.texture.compareFunction===null?l.sampleType=$2.UnfilterableFloat:l.sampleType=$2.Depth;else if(a.texture.isDataTexture||a.texture.isDataArrayTexture||a.texture.isData3DTexture){const c=a.texture.type;c===rs?l.sampleType=$2.SInt:c===zi?l.sampleType=$2.UInt:c===or&&(this.backend.hasFeature("float32-filterable")?l.sampleType=$2.Float:l.sampleType=$2.UnfilterableFloat)}a.isSampledCubeTexture?l.viewDimension=Yr.Cube:a.texture.isArrayTexture||a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?l.viewDimension=Yr.TwoDArray:a.isSampledTexture3D&&(l.viewDimension=Yr.ThreeD),o.texture=l}else if(a.isSampler){const l={};a.texture.isDepthTexture&&(a.texture.compareFunction!==null?l.type=NR.Comparison:t.compatibilityMode&&(l.type=NR.NonFiltering)),o.sampler=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${a}".`);r.push(o)}return n.createBindGroupLayout({entries:r})}createBindings(e,t,n,r=0){const{backend:s,bindGroupLayoutCache:a}=this,o=s.get(e);let l=a.get(e.bindingsReference);l===void 0&&(l=this.createBindingsLayout(e),a.set(e.bindingsReference,l));let u;n>0&&(o.groups===void 0&&(o.groups=[],o.versions=[]),o.versions[n]===r&&(u=o.groups[n])),u===void 0&&(u=this.createBindGroup(e,l),n>0&&(o.groups[n]=u,o.versions[n]=r)),o.group=u,o.layout=l}updateBinding(e){const t=this.backend,n=t.device,r=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,r,0)}createBindGroupIndex(e,t){const r=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,a=e[0],o=r.createBuffer({label:"bindingCameraIndex_"+a,size:16,usage:s});r.queue.writeBuffer(o,0,e,0);const l=[{binding:0,resource:{buffer:o}}];return r.createBindGroup({label:"bindGroupCameraIndex_"+a,layout:t,entries:l})}createBindGroup(e,t){const n=this.backend,r=n.device;let s=0;const a=[];for(const o of e.bindings){if(o.isUniformBuffer){const l=n.get(o);if(l.buffer===void 0){const u=o.byteLength,c=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,p=r.createBuffer({label:"bindingBuffer_"+o.name,size:u,usage:c});l.buffer=p}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isStorageBuffer){const l=n.get(o);if(l.buffer===void 0){const u=o.attribute;l.buffer=n.get(u).buffer}a.push({binding:s,resource:{buffer:l.buffer}})}else if(o.isSampledTexture){const l=n.get(o.texture);let u;if(l.externalTexture!==void 0)u=r.importExternalTexture({source:l.externalTexture});else{const c=o.store?1:l.texture.mipLevelCount;let p=`view-${l.texture.width}-${l.texture.height}`;if(l.texture.depthOrArrayLayers>1&&(p+=`-${l.texture.depthOrArrayLayers}`),p+=`-${c}`,u=l[p],u===void 0){const y=S1e.All;let _;o.isSampledCubeTexture?_=Yr.Cube:o.isSampledTexture3D?_=Yr.ThreeD:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?_=Yr.TwoDArray:_=Yr.TwoD,u=l[p]=l.texture.createView({aspect:y,dimension:_,mipLevelCount:c})}}a.push({binding:s,resource:u})}else if(o.isSampler){const l=n.get(o.texture);a.push({binding:s,resource:l.sampler})}s++}return r.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:a})}}class X1e{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:r,geometry:s,pipeline:a}=e,{vertexProgram:o,fragmentProgram:l}=a,u=this.backend,c=u.device,p=u.utils,y=u.get(a),_=[];for(const K of e.getBindings()){const ie=u.get(K);_.push(ie.layout)}const b=u.attributeUtils.createShaderVertexBuffers(e);let w;r.blending!==ja&&(r.blending!==aa||r.transparent!==!1)&&(w=this._getBlending(r));let E={};r.stencilWrite===!0&&(E={compare:this._getStencilCompare(r),failOp:this._getStencilOperation(r.stencilFail),depthFailOp:this._getStencilOperation(r.stencilZFail),passOp:this._getStencilOperation(r.stencilZPass)});const M=this._getColorWriteMask(r),P=[];if(e.context.textures!==null){const K=e.context.textures;for(let ie=0;ie<K.length;ie++){const ee=p.getTextureFormatGPU(K[ie]);P.push({format:ee,blend:w,writeMask:M})}}else{const K=p.getCurrentColorFormat(e.context);P.push({format:K,blend:w,writeMask:M})}const D=u.get(o).module,B=u.get(l).module,U=this._getPrimitiveState(n,s,r),O=this._getDepthCompare(r),z=p.getCurrentDepthStencilFormat(e.context),q=this._getSampleCount(e.context),F={label:`renderPipeline_${r.name||r.type}_${r.id}`,vertex:Object.assign({},D,{buffers:b}),fragment:Object.assign({},B,{targets:P}),primitive:U,multisample:{count:q,alphaToCoverageEnabled:r.alphaToCoverage&&q>1},layout:c.createPipelineLayout({bindGroupLayouts:_})},G={},j=e.context.depth,$=e.context.stencil;if((j===!0||$===!0)&&(j===!0&&(G.format=z,G.depthWriteEnabled=r.depthWrite,G.depthCompare=O),$===!0&&(G.stencilFront=E,G.stencilBack={},G.stencilReadMask=r.stencilFuncMask,G.stencilWriteMask=r.stencilWriteMask),r.polygonOffset===!0&&(G.depthBias=r.polygonOffsetUnits,G.depthBiasSlopeScale=r.polygonOffsetFactor,G.depthBiasClamp=0),F.depthStencil=G),t===null)y.pipeline=c.createRenderPipeline(F);else{const K=new Promise(ie=>{c.createRenderPipelineAsync(F).then(ee=>{y.pipeline=ee,ie()})});t.push(K)}}createBundleEncoder(e,t="renderBundleEncoder"){const n=this.backend,{utils:r,device:s}=n,a=r.getCurrentDepthStencilFormat(e),o=r.getCurrentColorFormat(e),l=this._getSampleCount(e),u={label:t,colorFormats:[o],depthStencilFormat:a,sampleCount:l};return s.createRenderBundleEncoder(u)}createComputePipeline(e,t){const n=this.backend,r=n.device,s=n.get(e.computeProgram).module,a=n.get(e),o=[];for(const l of t){const u=n.get(l);o.push(u.layout)}a.pipeline=r.createComputePipeline({compute:s,layout:r.createPipelineLayout({bindGroupLayouts:o})})}_getBlending(e){let t,n;const r=e.blending,s=e.blendSrc,a=e.blendDst,o=e.blendEquation;if(r===gc){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:a,c=e.blendEquationAlpha!==null?e.blendEquationAlpha:o;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(o)},n={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(c)}}else{const l=e.premultipliedAlpha,u=(c,p,y,_)=>{t={srcFactor:c,dstFactor:p,operation:Q2.Add},n={srcFactor:y,dstFactor:_,operation:Q2.Add}};if(l)switch(r){case aa:u(gi.One,gi.OneMinusSrcAlpha,gi.One,gi.OneMinusSrcAlpha);break;case Ec:u(gi.One,gi.One,gi.One,gi.One);break;case wc:u(gi.Zero,gi.OneMinusSrc,gi.Zero,gi.One);break;case Rc:u(gi.Dst,gi.OneMinusSrcAlpha,gi.Zero,gi.One);break}else switch(r){case aa:u(gi.SrcAlpha,gi.OneMinusSrcAlpha,gi.One,gi.OneMinusSrcAlpha);break;case Ec:u(gi.SrcAlpha,gi.One,gi.One,gi.One);break;case wc:console.error("THREE.WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Rc:console.error("THREE.WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true");break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}_getBlendFactor(e){let t;switch(e){case yl:t=gi.Zero;break;case $A:t=gi.One;break;case KA:t=gi.Src;break;case ZA:t=gi.OneMinusSrc;break;case x5:t=gi.SrcAlpha;break;case b5:t=gi.OneMinusSrcAlpha;break;case tp:t=gi.Dst;break;case np:t=gi.OneMinusDst;break;case JA:t=gi.DstAlpha;break;case ep:t=gi.OneMinusDstAlpha;break;case ip:t=gi.SrcAlphaSaturated;break;case are:t=gi.Constant;break;case ore:t=gi.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case XC:t=Ds.Never;break;case kd:t=Ds.Always;break;case YC:t=Ds.Less;break;case $C:t=Ds.LessEqual;break;case QC:t=Ds.Equal;break;case JC:t=Ds.GreaterEqual;break;case KC:t=Ds.Greater;break;case ZC:t=Ds.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case Su:t=_u.Keep;break;case zC:t=_u.Zero;break;case GC:t=_u.Replace;break;case jC:t=_u.Invert;break;case qC:t=_u.IncrementClamp;break;case kC:t=_u.DecrementClamp;break;case HC:t=_u.IncrementWrap;break;case WC:t=_u.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Us:t=Q2.Add;break;case YA:t=Q2.Subtract;break;case QA:t=Q2.ReverseSubtract;break;case X_:t=Q2.Min;break;case Y_:t=Q2.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const r={},s=this.backend.utils;r.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?Q5.Uint16:Q5.Uint32);let a=n.side===Fi;return e.isMesh&&e.matrixWorld.determinant()<0&&(a=!a),r.frontFace=a===!0?wR.CW:wR.CCW,r.cullMode=n.side===Ur?RR.None:RR.Back,r}_getColorWriteMask(e){return e.colorWrite===!0?CR.All:CR.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Ds.Always;else{const n=e.depthFunc;switch(n){case S5:t=Ds.Never;break;case T5:t=Ds.Always;break;case M5:t=Ds.Less;break;case P1:t=Ds.LessEqual;break;case E5:t=Ds.Equal;break;case w5:t=Ds.GreaterEqual;break;case R5:t=Ds.Greater;break;case C5:t=Ds.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class Y1e extends JU{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const r=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return la(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const r=this.device.createCommandEncoder();r.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),r.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const s=r.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const a=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let o=0;for(const[,l]of e){const u=a[l],c=a[l+1],p=Number(c-u)/1e6;o+=p}return this.resultBuffer.unmap(),this.lastValue=o,o}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class Q1e extends ZU{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new q1e(this),this.attributeUtils=new W1e(this),this.bindingUtils=new j1e(this),this.pipelineUtils=new X1e(this),this.textureUtils=new P1e(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const o={powerPreference:t.powerPreference,featureLevel:t.compatibilityMode?"compatibility":void 0},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(o):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const u=Object.values(R_),c=[];for(const y of u)l.features.has(y)&&c.push(y);const p={requiredFeatures:c,requiredLimits:t.requiredLimits};n=await l.requestDevice(p)}else n=t.device;n.lost.then(o=>{const l={api:"WebGPU",message:o.message||"Unknown reason",reason:o.reason||null,originalEvent:o};e.onDeviceLost(l)});const r=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=r;const s=t.alpha?"premultiplied":"opaque",a=gn.getToneMappingMode(this.renderer.outputColorSpace);this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s,toneMapping:{mode:a}}),this.trackTimestamp=this.trackTimestamp&&this.hasFeature(R_.TimestampQuery),this.updateSize()}get coordinateSystem(){return Jo}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const r=e.colorAttachments[0];this.renderer.samples>0?r.view=this.colorBuffer.createView():r.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,r=this.get(n);let s=r.descriptors;(s===void 0||r.width!==n.width||r.height!==n.height||r.samples!==n.samples)&&(s={},r.descriptors=s);const a=e.getCacheKey();let o=s[a];if(o===void 0){const u=e.textures,c=[];let p;const y=this._isRenderCameraDepthArray(e);for(let _=0;_<u.length;_++){const b=this.get(u[_]),w={label:`colorAttachment_${_}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:Yr.TwoD};if(n.isRenderTarget3D)p=e.activeCubeFace,w.baseArrayLayer=0,w.dimension=Yr.ThreeD,w.depthOrArrayLayers=u[_].image.depth;else if(n.isRenderTarget&&u[_].image.depth>1)if(y===!0){const E=e.camera.cameras;for(let M=0;M<E.length;M++){const P={...w,baseArrayLayer:M,arrayLayerCount:1,dimension:Yr.TwoD},D=b.texture.createView(P);c.push({view:D,resolveTarget:void 0,depthSlice:void 0})}}else w.dimension=Yr.TwoDArray,w.depthOrArrayLayers=u[_].image.depth;if(y!==!0){const E=b.texture.createView(w);let M,P;b.msaaTexture!==void 0?(M=b.msaaTexture.createView(),P=E):(M=E,P=void 0),c.push({view:M,resolveTarget:P,depthSlice:p})}}if(o={textureViews:c},e.depth){const _=this.get(e.depthTexture),b={};e.depthTexture.isArrayTexture&&(b.dimension=Yr.TwoD,b.arrayLayerCount=1,b.baseArrayLayer=e.activeCubeFace),o.depthStencilView=_.texture.createView(b)}s[a]=o,r.width=n.width,r.height=n.height,r.samples=n.samples,r.activeMipmapLevel=e.activeMipmapLevel,r.activeCubeFace=e.activeCubeFace}const l={colorAttachments:[]};for(let u=0;u<o.textureViews.length;u++){const c=o.textureViews[u];let p={r:0,g:0,b:0,a:1};u===0&&t.clearValue&&(p=t.clearValue),l.colorAttachments.push({view:c.view,depthSlice:c.depthSlice,resolveTarget:c.resolveTarget,loadOp:t.loadOp||Pi.Load,storeOp:t.storeOp||_a.Store,clearValue:p})}return o.depthStencilView&&(l.depthStencilAttachment={view:o.depthStencilView}),l}beginRender(e){const t=this.get(e);t.frameCalls=this.renderer.info.render.frameCalls;const n=this.device,r=e.occlusionQueryCount;let s;r>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:r,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(r),t.lastOcclusionObject=null);let a;e.textures===null?a=this._getDefaultRenderPassDescriptor():a=this._getRenderPassDescriptor(e,{loadOp:Pi.Load}),this.initTimestampQuery(cc.RENDER,this.getTimestampUID(e),a),a.occlusionQuerySet=s;const o=a.depthStencilAttachment;if(e.textures!==null){const u=a.colorAttachments;for(let c=0;c<u.length;c++){const p=u[c];e.clearColor?(p.clearValue=c===0?e.clearColorValue:{r:0,g:0,b:0,a:1},p.loadOp=Pi.Clear):p.loadOp=Pi.Load,p.storeOp=_a.Store}}else{const u=a.colorAttachments[0];e.clearColor?(u.clearValue=e.clearColorValue,u.loadOp=Pi.Clear):u.loadOp=Pi.Load,u.storeOp=_a.Store}e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=Pi.Clear):o.depthLoadOp=Pi.Load,o.depthStoreOp=_a.Store),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=Pi.Clear):o.stencilLoadOp=Pi.Load,o.stencilStoreOp=_a.Store);const l=n.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const u=e.camera.cameras;!t.layerDescriptors||t.layerDescriptors.length!==u.length?this._createDepthLayerDescriptors(e,t,a,u):this._updateDepthLayerDescriptors(e,t,u),t.bundleEncoders=[],t.bundleSets=[];for(let c=0;c<u.length;c++){const p=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+c),y={attributes:{},bindingGroups:[],pipeline:null,index:null};t.bundleEncoders.push(p),t.bundleSets.push(y)}t.currentPass=null}else{const u=l.beginRenderPass(a);if(t.currentPass=u,e.viewport&&this.updateViewport(e),e.scissor){const{x:c,y:p,width:y,height:_}=e.scissorValue;u.setScissorRect(c,p,y,_)}}t.descriptor=a,t.encoder=l,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[]}_createDepthLayerDescriptors(e,t,n,r){const s=n.depthStencilAttachment;t.layerDescriptors=[];const a=this.get(e.depthTexture);a.viewCache||(a.viewCache=[]);for(let o=0;o<r.length;o++){const l={...n,colorAttachments:[{...n.colorAttachments[0],view:n.colorAttachments[o].view}]};if(n.depthStencilAttachment){const u=o;a.viewCache[u]||(a.viewCache[u]=a.texture.createView({dimension:Yr.TwoD,baseArrayLayer:o,arrayLayerCount:1})),l.depthStencilAttachment={view:a.viewCache[u],depthLoadOp:s.depthLoadOp||Pi.Clear,depthStoreOp:s.depthStoreOp||_a.Store,depthClearValue:s.depthClearValue||1},e.stencil&&(l.depthStencilAttachment.stencilLoadOp=s.stencilLoadOp,l.depthStencilAttachment.stencilStoreOp=s.stencilStoreOp,l.depthStencilAttachment.stencilClearValue=s.stencilClearValue)}else l.depthStencilAttachment={...s};t.layerDescriptors.push(l)}}_updateDepthLayerDescriptors(e,t,n){for(let r=0;r<n.length;r++){const s=t.layerDescriptors[r];if(s.depthStencilAttachment){const a=s.depthStencilAttachment;e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=Pi.Clear):a.depthLoadOp=Pi.Load),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=Pi.Clear):a.stencilLoadOp=Pi.Load)}}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();const r=t.encoder;if(this._isRenderCameraDepthArray(e)===!0){const s=[];for(let a=0;a<t.bundleEncoders.length;a++){const o=t.bundleEncoders[a];s.push(o.finish())}for(let a=0;a<t.layerDescriptors.length;a++)if(a<s.length){const o=t.layerDescriptors[a],l=r.beginRenderPass(o);if(e.viewport){const{x:u,y:c,width:p,height:y,minDepth:_,maxDepth:b}=e.viewportValue;l.setViewport(u,c,p,y,_,b)}if(e.scissor){const{x:u,y:c,width:p,height:y}=e.scissorValue;l.setScissorRect(u,c,p,y)}l.executeBundles([s[a]]),l.end()}}else t.currentPass&&t.currentPass.end();if(n>0){const s=n*8;let a=this.occludedResolveCache.get(s);a===void 0&&(a=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,a));const o=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,a,0),t.encoder.copyBufferToBuffer(a,0,o,0,s),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const s=e.textures;for(let a=0;a<s.length;a++){const o=s[a];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const a=n.getMappedRange(),o=new BigUint64Array(a);for(let l=0;l<r.length;l++)o[l]===BigInt(0)&&s.add(r[l]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:r,width:s,height:a,minDepth:o,maxDepth:l}=e.viewportValue;t.setViewport(n,r,s,a,o,l)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,n,r=null){const s=this.device,a=this.renderer;let o=[],l,u,c,p;if(e){const b=this.getClearColor();u={r:b.r,g:b.g,b:b.b,a:b.a}}if(r===null){c=a.depth,p=a.stencil;const b=this._getDefaultRenderPassDescriptor();if(e){o=b.colorAttachments;const w=o[0];w.clearValue=u,w.loadOp=Pi.Clear,w.storeOp=_a.Store}(c||p)&&(l=b.depthStencilAttachment)}else{c=r.depth,p=r.stencil;const b={loadOp:e?Pi.Clear:Pi.Load,clearValue:e?u:void 0};c&&(b.depthLoadOp=t?Pi.Clear:Pi.Load,b.depthClearValue=t?a.getClearDepth():void 0,b.depthStoreOp=_a.Store),p&&(b.stencilLoadOp=n?Pi.Clear:Pi.Load,b.stencilClearValue=n?a.getClearStencil():void 0,b.stencilStoreOp=_a.Store);const w=this._getRenderPassDescriptor(r,b);o=w.colorAttachments,l=w.depthStencilAttachment}c&&l&&(t?(l.depthLoadOp=Pi.Clear,l.depthClearValue=a.getClearDepth(),l.depthStoreOp=_a.Store):(l.depthLoadOp=Pi.Load,l.depthStoreOp=_a.Store)),p&&l&&(n?(l.stencilLoadOp=Pi.Clear,l.stencilClearValue=a.getClearStencil(),l.stencilStoreOp=_a.Store):(l.stencilLoadOp=Pi.Load,l.stencilStoreOp=_a.Store));const y=s.createCommandEncoder({label:"clear"});y.beginRenderPass({colorAttachments:o,depthStencilAttachment:l}).end(),s.queue.submit([y.finish()])}beginCompute(e){const t=this.get(e);t.frameCalls=this.renderer.info.compute.frameCalls;const n={label:"computeGroup_"+e.id};this.initTimestampQuery(cc.COMPUTE,this.getTimestampUID(e),n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,r,s=null){const a=this.get(t),{passEncoderGPU:o}=this.get(e),l=this.get(r).pipeline;this.pipelineUtils.setPipeline(o,l);for(let c=0,p=n.length;c<p;c++){const y=n[c],_=this.get(y);o.setBindGroup(c,_.group)}let u;if(s===null&&(s=t.count),typeof s=="number"){const c=s;if(a.dispatchSize===void 0||a.count!==c){a.dispatchSize=[0,1,1],a.count=c;const p=t.workgroupSize;let y=p[0];for(let w=1;w<p.length;w++)y*=p[w];const _=Math.ceil(c/y),b=this.device.limits.maxComputeWorkgroupsPerDimension;u=[_,1,1],_>b&&(u[0]=Math.min(_,b),u[1]=Math.ceil(_/b)),a.dispatchSize=u}u=a.dispatchSize}else u=s;o.dispatchWorkgroups(u[0],u[1]||1,u[2]||1)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,material:r,context:s,pipeline:a}=e,o=e.getBindings(),l=this.get(s),u=this.get(a).pipeline,c=e.getIndex(),p=c!==null,y=e.getDrawParameters();if(y===null)return;const _=(w,E)=>{this.pipelineUtils.setPipeline(w,u),E.pipeline=u;const M=E.bindingGroups;for(let D=0,B=o.length;D<B;D++){const U=o[D],O=this.get(U);M[U.index]!==U.id&&(w.setBindGroup(U.index,O.group),M[U.index]=U.id)}if(p===!0&&E.index!==c){const D=this.get(c).buffer,B=c.array instanceof Uint16Array?Q5.Uint16:Q5.Uint32;w.setIndexBuffer(D,B),E.index=c}const P=e.getVertexBuffers();for(let D=0,B=P.length;D<B;D++){const U=P[D];if(E.attributes[D]!==U){const O=this.get(U).buffer;w.setVertexBuffer(D,O),E.attributes[D]=U}}s.stencil===!0&&r.stencilWrite===!0&&l.currentStencilRef!==r.stencilRef&&(w.setStencilReference(r.stencilRef),l.currentStencilRef=r.stencilRef)},b=(w,E)=>{if(_(w,E),n.isBatchedMesh===!0){const M=n._multiDrawStarts,P=n._multiDrawCounts,D=n._multiDrawCount,B=n._multiDrawInstances;B!==null&&la("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let U=0;U<D;U++){const O=B?B[U]:1,z=O>1?0:U;p===!0?w.drawIndexed(P[U],O,M[U]/c.array.BYTES_PER_ELEMENT,0,z):w.draw(P[U],O,M[U],z),t.update(n,P[U],O)}}else if(p===!0){const{vertexCount:M,instanceCount:P,firstVertex:D}=y,B=e.getIndirect();if(B!==null){const U=this.get(B).buffer;w.drawIndexedIndirect(U,0)}else w.drawIndexed(M,P,D,0,0);t.update(n,M,P)}else{const{vertexCount:M,instanceCount:P,firstVertex:D}=y,B=e.getIndirect();if(B!==null){const U=this.get(B).buffer;w.drawIndirect(U,0)}else w.draw(M,P,D,0);t.update(n,M,P)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const w=this.get(e.camera),E=e.camera.cameras,M=e.getBindingGroup("cameraIndex");if(w.indexesGPU===void 0||w.indexesGPU.length!==E.length){const D=this.get(M),B=[],U=new Uint32Array([0,0,0,0]);for(let O=0,z=E.length;O<z;O++){U[0]=O;const q=this.bindingUtils.createBindGroupIndex(U,D.layout);B.push(q)}w.indexesGPU=B}const P=this.renderer.getPixelRatio();for(let D=0,B=E.length;D<B;D++){const U=E[D];if(n.layers.test(U.layers)){const O=U.viewport;let z=l.currentPass,q=l.currentSets;if(l.bundleEncoders){const F=l.bundleEncoders[D],G=l.bundleSets[D];z=F,q=G}O&&z.setViewport(Math.floor(O.x*P),Math.floor(O.y*P),Math.floor(O.width*P),Math.floor(O.height*P),s.viewportValue.minDepth,s.viewportValue.maxDepth),M&&w.indexesGPU&&(z.setBindGroup(M.index,w.indexesGPU[D]),q.bindingGroups[M.index]=M.id),b(z,q)}}}else if(l.currentPass){if(l.occlusionQuerySet!==void 0){const w=l.lastOcclusionObject;w!==n&&(w!==null&&w.occlusionTest===!0&&(l.currentPass.endOcclusionQuery(),l.occlusionQueryIndex++),n.occlusionTest===!0&&(l.currentPass.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=n),l.lastOcclusionObject=n)}b(l.currentPass,l.currentSets)}}needsRenderUpdate(e){const t=this.get(e),{object:n,material:r}=e,s=this.utils,a=s.getSampleCountRenderContext(e.context),o=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),c=s.getPrimitiveTopology(n,r);let p=!1;return(t.material!==r||t.materialVersion!==r.version||t.transparent!==r.transparent||t.blending!==r.blending||t.premultipliedAlpha!==r.premultipliedAlpha||t.blendSrc!==r.blendSrc||t.blendDst!==r.blendDst||t.blendEquation!==r.blendEquation||t.blendSrcAlpha!==r.blendSrcAlpha||t.blendDstAlpha!==r.blendDstAlpha||t.blendEquationAlpha!==r.blendEquationAlpha||t.colorWrite!==r.colorWrite||t.depthWrite!==r.depthWrite||t.depthTest!==r.depthTest||t.depthFunc!==r.depthFunc||t.stencilWrite!==r.stencilWrite||t.stencilFunc!==r.stencilFunc||t.stencilFail!==r.stencilFail||t.stencilZFail!==r.stencilZFail||t.stencilZPass!==r.stencilZPass||t.stencilFuncMask!==r.stencilFuncMask||t.stencilWriteMask!==r.stencilWriteMask||t.side!==r.side||t.alphaToCoverage!==r.alphaToCoverage||t.sampleCount!==a||t.colorSpace!==o||t.colorFormat!==l||t.depthStencilFormat!==u||t.primitiveTopology!==c||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=a,t.colorSpace=o,t.colorFormat=l,t.depthStencilFormat=u,t.primitiveTopology=c,t.clippingContextCacheKey=e.clippingContextCacheKey,p=!0),p}getRenderCacheKey(e){const{object:t,material:n}=e,r=this.utils,s=e.context,a=t.isMesh&&t.matrixWorld.determinant()<0;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,a,r.getSampleCountRenderContext(s),r.getCurrentColorSpace(s),r.getCurrentColorFormat(s),r.getCurrentDepthStencilFormat(s),r.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,a){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,a)}initTimestampQuery(e,t,n){if(!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new Y1e(this.device,e,2048));const r=this.timestampQueryPool[e],s=r.allocateQueriesForContext(t);n.timestampWrites={querySet:r.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new G1e(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){let t=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(t|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,t)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,a=0){let o=0,l=0,u=0,c=0,p=0,y=0,_=e.image.width,b=e.image.height,w=1;n!==null&&(n.isBox3===!0?(c=n.min.x,p=n.min.y,y=n.min.z,_=n.max.x-n.min.x,b=n.max.y-n.min.y,w=n.max.z-n.min.z):(c=n.min.x,p=n.min.y,_=n.max.x-n.min.x,b=n.max.y-n.min.y,w=1)),r!==null&&(o=r.x,l=r.y,u=r.z||0);const E=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),M=this.get(e).texture,P=this.get(t).texture;E.copyTextureToTexture({texture:M,mipLevel:s,origin:{x:c,y:p,z:y}},{texture:P,mipLevel:a,origin:{x:o,y:l,z:u}},[_,b,w]),this.device.queue.submit([E.finish()]),a===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,n){const r=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const a=this.get(e).texture;if(s.format!==a.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,a.format);return}let o;if(r.currentPass?(r.currentPass.end(),o=r.encoder):o=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),o.copyTextureToTexture({texture:s,origin:[n.x,n.y,0]},{texture:a},[n.z,n.w]),r.currentPass){const{descriptor:l}=r;for(let u=0;u<l.colorAttachments.length;u++)l.colorAttachments[u].loadOp=Pi.Load;if(t.depth&&(l.depthStencilAttachment.depthLoadOp=Pi.Load),t.stencil&&(l.depthStencilAttachment.stencilLoadOp=Pi.Load),r.currentPass=o.beginRenderPass(l),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:u,y:c,width:p,height:y}=t.scissorValue;r.currentPass.setScissorRect(u,c,p,y)}}else this.device.queue.submit([o.finish()]);e.generateMipmaps&&this.textureUtils.generateMipmaps(e)}}class $1e extends A7{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class K1e extends A7{constructor(e,t,n,r,s,a){super(e,t,n,r,s,a),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class Z1e extends HU{constructor(){super(),this.addMaterial(Jne,"MeshPhongMaterial"),this.addMaterial(qI,"MeshStandardMaterial"),this.addMaterial(Vie,"MeshPhysicalMaterial"),this.addMaterial(kie,"MeshToonMaterial"),this.addMaterial(jne,"MeshBasicMaterial"),this.addMaterial(Kne,"MeshLambertMaterial"),this.addMaterial(Gne,"MeshNormalMaterial"),this.addMaterial(Wie,"MeshMatcapMaterial"),this.addMaterial(Lne,"LineBasicMaterial"),this.addMaterial(Une,"LineDashedMaterial"),this.addMaterial($ie,"PointsMaterial"),this.addMaterial(HI,"SpriteMaterial"),this.addMaterial(ere,"ShadowMaterial"),this.addLight(xoe,Ox),this.addLight(Nle,Fx),this.addLight(Ple,zx),this.addLight(BS,A7),this.addLight(Ile,Vx),this.addLight(Ule,Ix),this.addLight(Ole,Gx),this.addLight(Dle,$1e),this.addLight(Lle,K1e),this.addToneMapping(lU,K_),this.addToneMapping(uU,Z_),this.addToneMapping(cU,J_),this.addToneMapping(hU,rp),this.addToneMapping(fU,ex),this.addToneMapping(dU,tx)}}class J1e extends n1e{constructor(e={}){let t;e.forceWebGL?t=ER:(t=Q1e,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new ER(e)));const n=new t(e);super(n,e),this.library=new Z1e,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */k.BRDF_GGX;k.BRDF_Lambert;k.BasicPointShadowFilter;k.BasicShadowFilter;k.Break;k.Const;k.Continue;k.DFGApprox;k.D_GGX;k.Discard;k.EPSILON;k.F_Schlick;const eue=k.Fn;k.INFINITY;const tue=k.If,nue=k.Loop;k.NodeAccess;k.NodeShaderStage;k.NodeType;k.NodeUpdateType;k.PCFShadowFilter;k.PCFSoftShadowFilter;k.PI;k.PI2;k.PointShadowFilter;k.Return;k.Schlick_to_F0;k.ScriptableNodeResources;k.ShaderNode;k.Stack;k.Switch;k.TBNViewMatrix;k.VSMShadowFilter;k.V_GGX_SmithCorrelated;k.Var;k.VarIntent;k.abs;k.acesFilmicToneMapping;k.acos;k.add;k.addMethodChaining;k.addNodeElement;k.agxToneMapping;k.all;k.alphaT;k.and;k.anisotropy;k.anisotropyB;k.anisotropyT;k.any;k.append;k.array;k.arrayBuffer;const iue=k.asin;k.assign;k.atan;k.atan2;k.atomicAdd;k.atomicAnd;k.atomicFunc;k.atomicLoad;k.atomicMax;k.atomicMin;k.atomicOr;k.atomicStore;k.atomicSub;k.atomicXor;k.attenuationColor;k.attenuationDistance;k.attribute;k.attributeArray;k.backgroundBlurriness;k.backgroundIntensity;k.backgroundRotation;k.batch;k.bentNormalView;k.billboarding;k.bitAnd;k.bitNot;k.bitOr;k.bitXor;k.bitangentGeometry;k.bitangentLocal;k.bitangentView;k.bitangentWorld;k.bitcast;k.blendBurn;k.blendColor;k.blendDodge;k.blendOverlay;k.blendScreen;k.blur;k.bool;k.buffer;k.bufferAttribute;k.bumpMap;k.burn;k.builtin;k.bvec2;k.bvec3;k.bvec4;k.bypass;k.cache;k.call;k.cameraFar;k.cameraIndex;k.cameraNear;k.cameraNormalMatrix;k.cameraPosition;k.cameraProjectionMatrix;k.cameraProjectionMatrixInverse;k.cameraViewMatrix;k.cameraViewport;k.cameraWorldMatrix;k.cbrt;k.cdl;k.ceil;k.checker;k.cineonToneMapping;k.clamp;k.clearcoat;k.clearcoatNormalView;k.clearcoatRoughness;k.code;k.color;k.colorSpaceToWorking;k.colorToDirection;k.compute;k.computeKernel;k.computeSkinning;k.context;k.convert;k.convertColorSpace;k.convertToTexture;const rue=k.cos;k.cross;k.cubeTexture;k.cubeTextureBase;k.cubeToUV;k.dFdx;k.dFdy;k.dashSize;k.debug;k.decrement;k.decrementBefore;k.defaultBuildStages;k.defaultShaderStages;k.defined;k.degrees;k.deltaTime;k.densityFog;k.densityFogFactor;k.depth;k.depthPass;k.determinant;k.difference;k.diffuseColor;k.directPointLight;k.directionToColor;k.directionToFaceDirection;k.dispersion;k.distance;k.div;k.dodge;k.dot;k.drawIndex;k.dynamicBufferAttribute;k.element;k.emissive;k.equal;k.equals;k.equirectUV;const sue=k.exp;k.exp2;k.expression;k.faceDirection;k.faceForward;k.faceforward;const aue=k.float;k.floatBitsToInt;k.floatBitsToUint;k.floor;k.fog;k.fract;k.frameGroup;k.frameId;k.frontFacing;k.fwidth;k.gain;k.gapSize;k.getConstNodeType;k.getCurrentStack;k.getDirection;k.getDistanceAttenuation;k.getGeometryRoughness;k.getNormalFromDepth;k.getParallaxCorrectNormal;k.getRoughness;k.getScreenPosition;k.getShIrradianceAt;k.getShadowMaterial;k.getShadowRenderObjectFunction;k.getTextureIndex;k.getViewPosition;k.globalId;k.glsl;k.glslFn;k.grayscale;k.greaterThan;k.greaterThanEqual;k.hash;k.highpModelNormalViewMatrix;k.highpModelViewMatrix;k.hue;k.increment;k.incrementBefore;k.instance;const oue=k.instanceIndex;k.instancedArray;k.instancedBufferAttribute;k.instancedDynamicBufferAttribute;k.instancedMesh;k.int;k.intBitsToFloat;k.inverse;k.inverseSqrt;k.inversesqrt;k.invocationLocalIndex;k.invocationSubgroupIndex;k.ior;k.iridescence;k.iridescenceIOR;k.iridescenceThickness;k.ivec2;k.ivec3;k.ivec4;k.js;k.label;k.length;k.lengthSq;k.lessThan;k.lessThanEqual;k.lightPosition;k.lightProjectionUV;k.lightShadowMatrix;k.lightTargetDirection;k.lightTargetPosition;k.lightViewPosition;k.lightingContext;k.lights;k.linearDepth;k.linearToneMapping;k.localId;k.log;k.log2;k.logarithmicDepthToViewZ;k.luminance;k.mat2;k.mat3;k.mat4;k.matcapUV;k.materialAO;k.materialAlphaTest;k.materialAnisotropy;k.materialAnisotropyVector;k.materialAttenuationColor;k.materialAttenuationDistance;k.materialClearcoat;k.materialClearcoatNormal;k.materialClearcoatRoughness;k.materialColor;k.materialDispersion;k.materialEmissive;k.materialEnvIntensity;k.materialEnvRotation;k.materialIOR;k.materialIridescence;k.materialIridescenceIOR;k.materialIridescenceThickness;k.materialLightMap;k.materialLineDashOffset;k.materialLineDashSize;k.materialLineGapSize;k.materialLineScale;k.materialLineWidth;k.materialMetalness;k.materialNormal;k.materialOpacity;k.materialPointSize;k.materialReference;k.materialReflectivity;k.materialRefractionRatio;k.materialRotation;k.materialRoughness;k.materialSheen;k.materialSheenRoughness;k.materialShininess;k.materialSpecular;k.materialSpecularColor;k.materialSpecularIntensity;k.materialSpecularStrength;k.materialThickness;k.materialTransmission;k.max;k.maxMipLevel;k.mediumpModelViewMatrix;k.metalness;k.min;k.mix;k.mixElement;k.mod;k.modInt;k.modelDirection;k.modelNormalMatrix;k.modelPosition;k.modelRadius;k.modelScale;k.modelViewMatrix;k.modelViewPosition;k.modelViewProjection;k.modelWorldMatrix;k.modelWorldMatrixInverse;k.morphReference;k.mrt;k.mul;k.mx_aastep;k.mx_add;k.mx_atan2;k.mx_cell_noise_float;k.mx_contrast;k.mx_divide;k.mx_fractal_noise_float;k.mx_fractal_noise_vec2;k.mx_fractal_noise_vec3;k.mx_fractal_noise_vec4;k.mx_frame;k.mx_heighttonormal;k.mx_hsvtorgb;k.mx_ifequal;k.mx_ifgreater;k.mx_ifgreatereq;k.mx_invert;k.mx_modulo;k.mx_multiply;k.mx_noise_float;k.mx_noise_vec3;k.mx_noise_vec4;k.mx_place2d;k.mx_power;k.mx_ramp4;k.mx_ramplr;k.mx_ramptb;k.mx_rgbtohsv;k.mx_rotate2d;k.mx_rotate3d;k.mx_safepower;k.mx_separate;k.mx_splitlr;k.mx_splittb;k.mx_srgb_texture_to_lin_rec709;k.mx_subtract;k.mx_timer;k.mx_transform_uv;k.mx_unifiednoise2d;k.mx_unifiednoise3d;k.mx_worley_noise_float;k.mx_worley_noise_vec2;k.mx_worley_noise_vec3;const lue=k.negate;k.neutralToneMapping;k.nodeArray;k.nodeImmutable;k.nodeObject;k.nodeObjectIntent;k.nodeObjects;k.nodeProxy;k.nodeProxyIntent;k.normalFlat;k.normalGeometry;k.normalLocal;k.normalMap;k.normalView;k.normalViewGeometry;k.normalWorld;k.normalWorldGeometry;k.normalize;k.not;k.notEqual;k.numWorkgroups;k.objectDirection;k.objectGroup;k.objectPosition;k.objectRadius;k.objectScale;k.objectViewPosition;k.objectWorldMatrix;k.OnObjectUpdate;k.OnMaterialUpdate;k.oneMinus;k.or;k.orthographicDepthToViewZ;k.oscSawtooth;k.oscSine;k.oscSquare;k.oscTriangle;k.output;k.outputStruct;k.overlay;k.overloadingFn;k.parabola;k.parallaxDirection;k.parallaxUV;k.parameter;k.pass;k.passTexture;k.pcurve;k.perspectiveDepthToViewZ;k.pmremTexture;k.pointShadow;k.pointUV;k.pointWidth;k.positionGeometry;k.positionLocal;k.positionPrevious;k.positionView;k.positionViewDirection;k.positionWorld;k.positionWorldDirection;k.posterize;k.pow;k.pow2;k.pow3;k.pow4;k.premultiplyAlpha;k.property;k.radians;k.rand;k.range;k.rangeFog;k.rangeFogFactor;k.reciprocal;k.reference;k.referenceBuffer;k.reflect;k.reflectVector;k.reflectView;k.reflector;k.refract;k.refractVector;k.refractView;k.reinhardToneMapping;k.remap;k.remapClamp;k.renderGroup;k.renderOutput;k.rendererReference;k.rotate;k.rotateUV;k.roughness;k.round;k.rtt;k.sRGBTransferEOTF;k.sRGBTransferOETF;k.sample;k.sampler;k.samplerComparison;k.saturate;k.saturation;k.screen;k.screenCoordinate;k.screenDPR;k.screenSize;k.screenUV;k.scriptable;k.scriptableValue;k.select;k.setCurrentStack;k.setName;k.shaderStages;k.shadow;k.shadowPositionWorld;k.shapeCircle;k.sharedUniformGroup;k.sheen;k.sheenRoughness;k.shiftLeft;k.shiftRight;k.shininess;k.sign;const uue=k.sin;k.sinc;k.skinning;k.smoothstep;k.smoothstepElement;k.specularColor;k.specularF90;k.spherizeUV;k.split;k.spritesheetUV;const cue=k.sqrt;k.stack;k.step;k.stepElement;const hue=k.storage;k.storageBarrier;k.storageObject;k.storageTexture;k.string;k.struct;k.sub;k.subgroupAdd;k.subgroupAll;k.subgroupAnd;k.subgroupAny;k.subgroupBallot;k.subgroupBroadcast;k.subgroupBroadcastFirst;k.subBuild;k.subgroupElect;k.subgroupExclusiveAdd;k.subgroupExclusiveMul;k.subgroupInclusiveAdd;k.subgroupInclusiveMul;k.subgroupIndex;k.subgroupMax;k.subgroupMin;k.subgroupMul;k.subgroupOr;k.subgroupShuffle;k.subgroupShuffleDown;k.subgroupShuffleUp;k.subgroupShuffleXor;k.subgroupSize;k.subgroupXor;k.tan;k.tangentGeometry;k.tangentLocal;k.tangentView;k.tangentWorld;k.texture;k.texture3D;k.textureBarrier;k.textureBicubic;k.textureBicubicLevel;k.textureCubeUV;k.textureLoad;k.textureSize;k.textureStore;k.thickness;k.time;k.toneMapping;k.toneMappingExposure;k.toonOutlinePass;k.transformDirection;k.transformNormal;k.transformNormalToView;k.transformedClearcoatNormalView;k.transformedNormalView;k.transformedNormalWorld;k.transmission;k.transpose;k.triNoise3D;k.triplanarTexture;k.triplanarTextures;k.trunc;k.uint;k.uintBitsToFloat;const fue=k.uniform;k.uniformArray;k.uniformCubeTexture;k.uniformGroup;k.uniformFlow;k.uniformTexture;k.unpremultiplyAlpha;k.userData;k.uv;k.uvec2;k.uvec3;k.uvec4;k.varying;k.varyingProperty;k.vec2;k.vec3;k.vec4;k.vectorComponents;k.velocity;k.vertexColor;k.vertexIndex;k.vertexStage;k.vibrance;k.viewZToLogarithmicDepth;k.viewZToOrthographicDepth;k.viewZToPerspectiveDepth;k.viewport;k.viewportCoordinate;k.viewportDepthTexture;k.viewportLinearDepth;k.viewportMipTexture;k.viewportResolution;k.viewportSafeUV;k.viewportSharedTexture;k.viewportSize;k.viewportTexture;k.viewportUV;k.wgsl;k.wgslFn;k.workgroupArray;k.workgroupBarrier;k.workgroupId;k.workingToColorSpace;k.xor;const UR=new ss,od=new te;class nO extends qx{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Yt(e,3)),this.setAttribute("uv",new Yt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new E6(t,6,1);return this.setAttribute("instanceStart",new Ca(n,3,0)),this.setAttribute("instanceEnd",new Ca(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new E6(t,6,1);return this.setAttribute("instanceColorStart",new Ca(n,3,0)),this.setAttribute("instanceColorEnd",new Ca(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new xx(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ss);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),UR.setFromBufferAttribute(t),this.boundingBox.union(UR))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)od.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(od)),od.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(od));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}Vt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new He(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ba.line={uniforms:gp.merge([Vt.common,Vt.fog,Vt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class IS extends Na{constructor(e){super({type:"LineMaterial",uniforms:gp.clone(ba.line.uniforms),vertexShader:ba.line.vertexShader,fragmentShader:ba.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const Fy=new an,OR=new te,FR=new te,Bs=new an,Ls=new an,pl=new an,Vy=new te,zy=new $t,Is=new LN,VR=new te,ld=new ss,ud=new Kr,ml=new an;let bl,Mc;function zR(i,e,t){return ml.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),ml.multiplyScalar(1/ml.w),ml.x=Mc/t.width,ml.y=Mc/t.height,ml.applyMatrix4(i.projectionMatrixInverse),ml.multiplyScalar(1/ml.w),Math.abs(Math.max(ml.x,ml.y))}function due(i,e){const t=i.matrixWorld,n=i.geometry,r=n.attributes.instanceStart,s=n.attributes.instanceEnd,a=Math.min(n.instanceCount,r.count);for(let o=0,l=a;o<l;o++){Is.start.fromBufferAttribute(r,o),Is.end.fromBufferAttribute(s,o),Is.applyMatrix4(t);const u=new te,c=new te;bl.distanceSqToSegment(Is.start,Is.end,c,u),c.distanceTo(u)<Mc*.5&&e.push({point:c,pointOnLine:u,distance:bl.origin.distanceTo(c),object:i,face:null,faceIndex:o,uv:null,uv1:null})}}function Aue(i,e,t){const n=e.projectionMatrix,s=i.material.resolution,a=i.matrixWorld,o=i.geometry,l=o.attributes.instanceStart,u=o.attributes.instanceEnd,c=Math.min(o.instanceCount,l.count),p=-e.near;bl.at(1,pl),pl.w=1,pl.applyMatrix4(e.matrixWorldInverse),pl.applyMatrix4(n),pl.multiplyScalar(1/pl.w),pl.x*=s.x/2,pl.y*=s.y/2,pl.z=0,Vy.copy(pl),zy.multiplyMatrices(e.matrixWorldInverse,a);for(let y=0,_=c;y<_;y++){if(Bs.fromBufferAttribute(l,y),Ls.fromBufferAttribute(u,y),Bs.w=1,Ls.w=1,Bs.applyMatrix4(zy),Ls.applyMatrix4(zy),Bs.z>p&&Ls.z>p)continue;if(Bs.z>p){const D=Bs.z-Ls.z,B=(Bs.z-p)/D;Bs.lerp(Ls,B)}else if(Ls.z>p){const D=Ls.z-Bs.z,B=(Ls.z-p)/D;Ls.lerp(Bs,B)}Bs.applyMatrix4(n),Ls.applyMatrix4(n),Bs.multiplyScalar(1/Bs.w),Ls.multiplyScalar(1/Ls.w),Bs.x*=s.x/2,Bs.y*=s.y/2,Ls.x*=s.x/2,Ls.y*=s.y/2,Is.start.copy(Bs),Is.start.z=0,Is.end.copy(Ls),Is.end.z=0;const w=Is.closestPointToPointParameter(Vy,!0);Is.at(w,VR);const E=dp.lerp(Bs.z,Ls.z,w),M=E>=-1&&E<=1,P=Vy.distanceTo(VR)<Mc*.5;if(M&&P){Is.start.fromBufferAttribute(l,y),Is.end.fromBufferAttribute(u,y),Is.start.applyMatrix4(a),Is.end.applyMatrix4(a);const D=new te,B=new te;bl.distanceSqToSegment(Is.start,Is.end,B,D),t.push({point:B,pointOnLine:D,distance:bl.origin.distanceTo(B),object:i,face:null,faceIndex:y,uv:null,uv1:null})}}}class pue extends Jn{constructor(e=new nO,t=new IS({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,o=0,l=t.count;a<l;a++,o+=2)OR.fromBufferAttribute(t,a),FR.fromBufferAttribute(n,a),r[o]=o===0?0:r[o-1],r[o+1]=r[o]+OR.distanceTo(FR);const s=new E6(r,2,1);return e.setAttribute("instanceDistanceStart",new Ca(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ca(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;bl=e.ray;const a=this.matrixWorld,o=this.geometry,l=this.material;Mc=l.linewidth+s,o.boundingSphere===null&&o.computeBoundingSphere(),ud.copy(o.boundingSphere).applyMatrix4(a);let u;if(n)u=Mc*.5;else{const p=Math.max(r.near,ud.distanceToPoint(bl.origin));u=zR(r,p,l.resolution)}if(ud.radius+=u,bl.intersectsSphere(ud)===!1)return;o.boundingBox===null&&o.computeBoundingBox(),ld.copy(o.boundingBox).applyMatrix4(a);let c;if(n)c=Mc*.5;else{const p=Math.max(r.near,ld.distanceToPoint(bl.origin));c=zR(r,p,l.resolution)}ld.expandByScalar(c),bl.intersectsBox(ld)!==!1&&(n?due(this,t):Aue(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Fy),this.material.uniforms.resolution.value.set(Fy.z,Fy.w))}}class iO extends nO{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let r=0;r<t;r++)n[6*r]=e[r].x,n[6*r+1]=e[r].y,n[6*r+2]=e[r].z||0,n[6*r+3]=e[r+1].x,n[6*r+4]=e[r+1].y,n[6*r+5]=e[r+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class mue extends pue{constructor(e=new iO,t=new IS({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class GR extends u7{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const r=n.generateShapes(e,t.size);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class gue{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=yue(e,t,this.data);for(let s=0,a=r.length;s<a;s++)n.push(...r[s].toShapes());return n}}function yue(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,a=[];let o=0,l=0;for(let u=0;u<n.length;u++){const c=n[u];if(c===`
`)o=0,l-=s;else{const p=vue(c,r,o,l,t);o+=p.offsetX,a.push(p.path)}}return a}function vue(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const a=new UN;let o,l,u,c,p,y,_,b;if(s.o){const w=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let E=0,M=w.length;E<M;)switch(w[E++]){case"m":o=w[E++]*e+t,l=w[E++]*e+n,a.moveTo(o,l);break;case"l":o=w[E++]*e+t,l=w[E++]*e+n,a.lineTo(o,l);break;case"q":u=w[E++]*e+t,c=w[E++]*e+n,p=w[E++]*e+t,y=w[E++]*e+n,a.quadraticCurveTo(p,y,u,c);break;case"b":u=w[E++]*e+t,c=w[E++]*e+n,p=w[E++]*e+t,y=w[E++]*e+n,_=w[E++]*e+t,b=w[E++]*e+n,a.bezierCurveTo(p,y,_,b,u,c);break}}return{offsetX:s.ha*e,path:a}}class _ue extends yi{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new He(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}new te;new $t;new $t;new te;new te;function N_(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function xue(i){if(Array.isArray(i))return i}function bue(i){if(Array.isArray(i))return N_(i)}function rO(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Sue(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qR(i,e,t,n,r,s,a){try{var o=i[s](a),l=o.value}catch(u){return void t(u)}o.done?e(l):Promise.resolve(l).then(n,r)}function Tue(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function a(l){qR(s,n,r,a,o,"next",l)}function o(l){qR(s,n,r,a,o,"throw",l)}a(void 0)})}}function mm(i,e,t){return e=$5(e),Bue(i,OS()?Reflect.construct(e,t||[],$5(i).constructor):e.apply(i,t))}function Mue(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gm(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function zh(i,e){return i.get(rO(i,e))}function Gy(i,e,t){Mue(i,e),e.set(i,t)}function qy(i,e,t){return i.set(rO(i,e),t),t}function US(i,e,t){if(OS())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return r}function Eue(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,sO(n.key),n)}}function ym(i,e,t){return e&&Eue(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ts(i,e,t){return(e=sO(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function P_(){return P_=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,t){var n=Lue(i,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},P_.apply(null,arguments)}function $5(i){return $5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$5(i)}function vm(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&B_(i,e)}function OS(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OS=function(){return!!i})()}function wue(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Rue(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,a,o=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw r}}return o}}function Cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kR(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Li(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(t),!0).forEach(function(n){Ts(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):kR(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Pue(i,e){if(i==null)return{};var t,n,r=Due(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function Due(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function Bue(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sue(i)}function D_(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var i,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function s(_,b,w,E){var M=b&&b.prototype instanceof o?b:o,P=Object.create(M.prototype);return vo(P,"_invoke",(function(D,B,U){var O,z,q,F=0,G=U||[],j=!1,$={p:0,n:0,v:i,a:K,f:K.bind(i,4),d:function(ie,ee){return O=ie,z=0,q=i,$.n=ee,a}};function K(ie,ee){for(z=ie,q=ee,e=0;!j&&F&&!X&&e<G.length;e++){var X,re=G[e],se=$.p,Ae=re[2];ie>3?(X=Ae===ee)&&(q=re[(z=re[4])?5:(z=3,3)],re[4]=re[5]=i):re[0]<=se&&((X=ie<2&&se<re[1])?(z=0,$.v=ee,$.n=re[1]):se<Ae&&(X=ie<3||re[0]>ee||ee>Ae)&&(re[4]=ie,re[5]=ee,$.n=Ae,z=0))}if(X||ie>1)return a;throw j=!0,ee}return function(ie,ee,X){if(F>1)throw TypeError("Generator is already running");for(j&&ee===1&&K(ee,X),z=ee,q=X;(e=z<2?i:q)||!j;){O||(z?z<3?(z>1&&($.n=-1),K(z,q)):$.n=q:$.v=q);try{if(F=2,O){if(z||(ie="next"),e=O[ie]){if(!(e=e.call(O,q)))throw TypeError("iterator result is not an object");if(!e.done)return e;q=e.value,z<2&&(z=0)}else z===1&&(e=O.return)&&e.call(O),z<2&&(q=TypeError("The iterator does not provide a '"+ie+"' method"),z=1);O=i}else if((e=(j=$.n<0)?q:D.call(B,$))!==a)break}catch(re){O=i,z=1,q=re}finally{F=1}}return{value:e,done:j}}})(_,w,E),!0),P}var a={};function o(){}function l(){}function u(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(vo(e={},n,function(){return this}),e),p=u.prototype=o.prototype=Object.create(c);function y(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,u):(_.__proto__=u,vo(_,r,"GeneratorFunction")),_.prototype=Object.create(p),_}return l.prototype=u,vo(p,"constructor",u),vo(u,"constructor",l),l.displayName="GeneratorFunction",vo(u,r,"GeneratorFunction"),vo(p),vo(p,r,"Generator"),vo(p,n,function(){return this}),vo(p,"toString",function(){return"[object Generator]"}),(D_=function(){return{w:s,m:y}})()}function vo(i,e,t,n){var r=Object.defineProperty;try{r({},"",{})}catch{r=0}vo=function(s,a,o,l){function u(c,p){vo(s,c,function(y){return this._invoke(c,p,y)})}a?r?r(s,a,{value:o,enumerable:!l,configurable:!l,writable:!l}):s[a]=o:(u("next",0),u("throw",1),u("return",2))},vo(i,e,t,n)}function B_(i,e){return B_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},B_(i,e)}function pr(i,e){return xue(i)||Rue(i,e)||aO(i,e)||Cue()}function Lue(i,e){for(;!{}.hasOwnProperty.call(i,e)&&(i=$5(i))!==null;);return i}function ky(i,e,t,n){var r=P_($5(i.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function Gi(i){return bue(i)||wue(i)||aO(i)||Nue()}function Iue(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function sO(i){var e=Iue(i,"string");return typeof e=="symbol"?e:e+""}function aO(i,e){if(i){if(typeof i=="string")return N_(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N_(i,e):void 0}}var oO=function(e){e instanceof Array?e.forEach(oO):(e.map&&e.map.dispose(),e.dispose())},FS=function(e){e.geometry&&e.geometry.dispose(),e.material&&oO(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(FS)},Yi=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),FS(t)}};function Pa(i,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(a,o){o[i][r](a)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var a=s[i],o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];var c=a[r].apply(a,l);return c===a?this:c}}}}var lr=100;function HR(){return lr}function r0(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180,s=lr*(1+t),a=Math.sin(n);return{x:s*a*Math.cos(r),y:s*Math.cos(n),z:s*a*Math.sin(r)}}function lO(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),a=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-a*180/Math.PI-(a<-Math.PI/2?360:0),altitude:r/lr-1}}function ac(i){return i*Math.PI/180}var X6=window.THREE?window.THREE:{BackSide:Fi,BufferAttribute:li,Color:Dt,Mesh:Jn,ShaderMaterial:Na},Uue=`
uniform float hollowRadius;

varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {    
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  
  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
  vCameraDistanceToObjCenter = length(objCenterViewPosition);
  
  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);
  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));
  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;

  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,Oue=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
uniform float hollowRadius;

varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {
  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius
  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius

  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`;function Fue(i,e,t,n){return new X6.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:Uue,fragmentShader:Oue,uniforms:{coefficient:{value:i},color:{value:new X6.Color(e)},power:{value:t},hollowRadius:{value:n}}})}function Vue(i,e){for(var t=i.clone(),n=new Float32Array(i.attributes.position.count*3),r=0,s=n.length;r<s;r++){var a=i.attributes.normal.array[r],o=i.attributes.position.array[r];n[r]=o+a*e}return t.setAttribute("position",new X6.BufferAttribute(n,3)),t}var zue=(function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.color,a=s===void 0?"gold":s,o=r.size,l=o===void 0?2:o,u=r.coefficient,c=u===void 0?.5:u,p=r.power,y=p===void 0?1:p,_=r.hollowRadius,b=_===void 0?0:_,w=r.backside,E=w===void 0?!0:w;gm(this,e),n=mm(this,e);var M=Vue(t,l),P=Fue(c,a,y,b);return E&&(P.side=X6.BackSide),n.geometry=M,n.material=P,n}return vm(e,i),ym(e)})(X6.Mesh),gl=window.THREE?window.THREE:{Color:Dt,Group:sa,LineBasicMaterial:ls,LineSegments:s0,Mesh:Jn,MeshPhongMaterial:Bp,SphereGeometry:o0,SRGBColorSpace:Qr,TextureLoader:Lx},uO=ha({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeCurvatureResolution:{default:4},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){Yi(e.globeObj),Yi(e.tileEngine),Yi(e.graticulesObj)}},stateInit:function(){var e=new gl.MeshPhongMaterial({color:0}),t=new gl.Mesh(void 0,e);t.rotation.y=-Math.PI/2;var n=new x$(lr),r=new gl.Group;r.__globeObjType="globe",r.add(t),r.add(n);var s=new gl.LineSegments(new kP(VQ(),lr,2),new gl.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeGroup:r,globeObj:t,graticulesObj:s,defaultGlobeMaterial:e,tileEngine:n}},init:function(e,t){Yi(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeCurvatureResolution")){var r;(r=e.globeObj.geometry)===null||r===void 0||r.dispose();var s=Math.max(4,Math.round(360/e.globeCurvatureResolution));e.globeObj.geometry=new gl.SphereGeometry(lr,s,s/2),e.tileEngine.curvatureResolution=e.globeCurvatureResolution}if(t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new gl.TextureLoader().load(e.globeImageUrl,function(o){o.colorSpace=gl.SRGBColorSpace,n.map=o,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new gl.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new gl.TextureLoader().load(e.bumpImageUrl,function(o){n.bumpMap=o,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),Yi(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var a=e.atmosphereObj=new zue(e.globeObj.geometry,{color:e.atmosphereColor,size:lr*e.atmosphereAltitude,hollowRadius:lr,coefficient:.1,power:3.5});a.visible=!!e.showAtmosphere,a.__globeObjType="atmosphere",e.scene.add(a)}!e.ready&&(!e.globeImageUrl||e.globeTileEngineUrl)&&(e.ready=!0,e.onReady())}}),zl=function(e){return isNaN(e)?parseInt(vn(e).toHex(),16):e},q0=function(e){return e&&isNaN(e)?e3(e).opacity:1},ku=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r,s=1,a=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(a){var o=a.slice(1),l=pr(o,4),u=l[0],c=l[1],p=l[2],y=l[3];r=new Dt("rgb(".concat(+u,",").concat(+c,",").concat(+p,")")),s=Math.min(+y,1)}else r=new Dt(e);n&&r.convertLinearToSRGB();var _=r.toArray();return t?[].concat(Gi(_),[s]):_};function Gue(i,e,t){return i.opacity=e,i.transparent=e<1,i.depthWrite=e>=1,i}var WR=window.THREE?window.THREE:{BufferAttribute:li};function Gl(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array;if(e===1)return new WR.BufferAttribute(new t(i),e);for(var n=new WR.BufferAttribute(new t(i.length*e),e),r=0,s=i.length;r<s;r++)n.set(i[r],r*e);return n}function que(i){for(var e=i.itemSize,t=[],n=0;n<i.count;n++)t.push(i.array.slice(n*e,(n+1)*e));return t}var Hy=new WeakMap,cd=new WeakMap,hd=new WeakMap,no=(function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.dataBindAttr,a=s===void 0?"__data":s,o=r.objBindAttr,l=o===void 0?"__threeObj":o,u=r.removeDelay,c=u===void 0?0:u;return gm(this,e),n=mm(this,e),Ts(n,"scene",void 0),Gy(n,Hy,void 0),Gy(n,cd,void 0),Gy(n,hd,void 0),n.scene=t,qy(Hy,n,a),qy(cd,n,l),qy(hd,n,c),n.onRemoveObj(function(){}),n}return vm(e,i),ym(e,[{key:"onCreateObj",value:function(n){var r=this;return ky(e,"onCreateObj",this)([function(s){var a=n(s);return s[zh(cd,r)]=a,a[zh(Hy,r)]=s,r.scene.add(a),a}]),this}},{key:"onRemoveObj",value:function(n){var r=this;return ky(e,"onRemoveObj",this)([function(s,a){var o=ky(e,"getData",r)([s]);n(s,a);var l=function(){r.scene.remove(s),Yi(s),delete o[zh(cd,r)]};zh(hd,r)?setTimeout(l,zh(hd,r)):l()}]),this}}])})($K),N0=window.THREE?window.THREE:{BufferGeometry:Tn,CylinderGeometry:f3,Matrix4:$t,Mesh:Jn,MeshLambertMaterial:j0,Object3D:yi,Vector3:te},jR=Object.assign({},ob),XR=jR.BufferGeometryUtils||jR,cO=ha({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=dt(e.pointLat),r=dt(e.pointLng),s=dt(e.pointAltitude),a=dt(e.pointRadius),o=dt(e.pointColor),l=new N0.CylinderGeometry(1,1,1,e.pointResolution);l.applyMatrix4(new N0.Matrix4().makeRotationX(Math.PI/2)),l.applyMatrix4(new N0.Matrix4().makeTranslation(0,0,-.5));var u=2*Math.PI*lr/360,c={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&Yi(e.scene),e.dataMapper.scene=e.pointsMerge?new N0.Object3D:e.scene,e.dataMapper.onCreateObj(_).onUpdateObj(b).digest(e.pointsData),e.pointsMerge){var p=e.pointsData.length?(XR.mergeGeometries||XR.mergeBufferGeometries)(e.pointsData.map(function(w){var E=e.dataMapper.getObj(w),M=E.geometry.clone();E.updateMatrix(),M.applyMatrix4(E.matrix);var P=ku(o(w));return M.setAttribute("color",Gl(Array(M.getAttribute("position").count).fill(P),4)),M})):new N0.BufferGeometry,y=new N0.Mesh(p,new N0.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));y.__globeObjType="points",y.__data=e.pointsData,e.dataMapper.clear(),Yi(e.scene),e.scene.add(y)}function _(){var w=new N0.Mesh(l);return w.__globeObjType="point",w}function b(w,E){var M=function(q){var F=w.__currentTargetD=q,G=F.r,j=F.alt,$=F.lat,K=F.lng;Object.assign(w.position,r0($,K));var ie=e.pointsMerge?new N0.Vector3(0,0,0):e.scene.localToWorld(new N0.Vector3(0,0,0));w.lookAt(ie),w.scale.x=w.scale.y=Math.min(30,G)*u,w.scale.z=Math.max(j*lr,.1)},P={alt:+s(E),r:+a(E),lat:+n(E),lng:+r(E)},D=w.__currentTargetD||Object.assign({},P,{alt:-.001});if(Object.keys(P).some(function(z){return D[z]!==P[z]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?M(P):e.tweenGroup.add(new wo(D).to(P,e.pointsTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(M).start())),!e.pointsMerge){var B=o(E),U=B?q0(B):0,O=!!U;w.visible=O,O&&(c.hasOwnProperty(B)||(c[B]=new N0.MeshLambertMaterial({color:zl(B),transparent:U<1,opacity:U})),w.material=c[B])}}}}),hO=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    `.concat(Xn.common,`
    `).concat(Xn.logdepthbuf_pars_vertex,`
  
    uniform float dashTranslate; 

    attribute vec4 color;
    varying vec4 vColor;
    
    attribute float relDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = color;
      vRelDistance = relDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  
      `).concat(Xn.logdepthbuf_vertex,`
    }
  `),fragmentShader:`
    `.concat(Xn.logdepthbuf_pars_fragment,`

    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
  
      `).concat(Xn.logdepthbuf_fragment,`
    }
  `)}},L_=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=(`attribute float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join(`
`)),e.fragmentShader=(`uniform float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join(`
`)),e},kue=function(e){return e.vertexShader=`
    attribute float r;
    
    const float PI = 3.1415926535897932384626433832795;
    float toRad(in float a) {
      return a * PI / 180.0;
    }
    
    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]
      float phi = toRad(90.0 - c.x);
      float theta = toRad(90.0 - c.y);
      float r = c.z;
      return vec3( // x,y,z
        r * sin(phi) * cos(theta),
        r * cos(phi),
        r * sin(phi) * sin(theta)
      );
    }
    
    vec2 Cartesian2Polar(in vec3 p) {
      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);
      float phi = acos(p.y / r);
      float theta = atan(p.z, p.x);
      return vec2( // lat,lng
        90.0 - phi * 180.0 / PI,
        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)
      );
    }
    `.concat(e.vertexShader.replace("}",`                  
        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      }
    `),`
  `),e},VS=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},Hue=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(r){return r};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(r){n(r),t(r.uniforms)}}},Wue=["stroke"],P0=window.THREE?window.THREE:{BufferGeometry:Tn,CubicBezierCurve3:mx,Curve:a0,Group:sa,Line:k0,Mesh:Jn,NormalBlending:aa,ShaderMaterial:Na,TubeGeometry:h7,Vector3:te},jue=k5.default||k5,fO=ha({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcStartAltitude:{default:0},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcEndAltitude:{default:0},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new jue,sharedMaterial:new P0.ShaderMaterial(Li(Li({},hO()),{},{transparent:!0,blending:P0.NormalBlending}))}},init:function(e,t){Yi(e),t.scene=e,t.dataMapper=new no(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var n=new P0.Group;return n.__globeObjType="arc",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var a=pr(s,2),o=a[1];return o}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var a=s.children[0],o=a.__dashAnimateStep*r,l=a.material.uniforms.dashTranslate.value%1e9;a.material.uniforms.dashTranslate.value=l+o})})},update:function(e){var t=dt(e.arcStartLat),n=dt(e.arcStartLng),r=dt(e.arcStartAltitude),s=dt(e.arcEndLat),a=dt(e.arcEndLng),o=dt(e.arcEndAltitude),l=dt(e.arcAltitude),u=dt(e.arcAltitudeAutoScale),c=dt(e.arcStroke),p=dt(e.arcColor),y=dt(e.arcDashLength),_=dt(e.arcDashGap),b=dt(e.arcDashInitialGap),w=dt(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(D,B){var U=c(B),O=U!=null;if(!D.children.length||O!==(D.children[0].type==="Mesh")){Yi(D);var z=O?new P0.Mesh:new P0.Line(new P0.BufferGeometry);z.material=e.sharedMaterial.clone(),D.add(z)}var q=D.children[0];Object.assign(q.material.uniforms,{dashSize:{value:y(B)},gapSize:{value:_(B)},dashOffset:{value:b(B)}});var F=w(B);q.__dashAnimateStep=F>0?1e3/F:0;var G=M(p(B),e.arcCurveResolution,O?e.arcCircularResolution+1:1),j=P(e.arcCurveResolution,O?e.arcCircularResolution+1:1,!0);q.geometry.setAttribute("color",G),q.geometry.setAttribute("relDistance",j);var $=function(X){var re=D.__currentTargetD=X,se=re.stroke,Ae=Pue(re,Wue),Se=E(Ae);O?(q.geometry&&q.geometry.dispose(),q.geometry=new P0.TubeGeometry(Se,e.arcCurveResolution,se/2,e.arcCircularResolution),q.geometry.setAttribute("color",G),q.geometry.setAttribute("relDistance",j)):q.geometry.setFromPoints(Se.getPoints(e.arcCurveResolution))},K={stroke:U,alt:l(B),altAutoScale:+u(B),startLat:+t(B),startLng:+n(B),startAlt:+r(B),endLat:+s(B),endLng:+a(B),endAlt:+o(B)},ie=D.__currentTargetD||Object.assign({},K,{altAutoScale:-.001});Object.keys(K).some(function(ee){return ie[ee]!==K[ee]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?$(K):e.tweenGroup.add(new wo(ie).to(K,e.arcsTransitionDuration).easing(qs.Quadratic.InOut).onUpdate($).start()))}).digest(e.arcsData);function E(D){var B=D.alt,U=D.altAutoScale,O=D.startLat,z=D.startLng,q=D.startAlt,F=D.endLat,G=D.endLng,j=D.endAlt,$=function(Oe){var Xe=pr(Oe,3),Tt=Xe[0],Ft=Xe[1],Pt=Xe[2],ln=r0(Ft,Tt,Pt),Dn=ln.x,pe=ln.y,Je=ln.z;return new P0.Vector3(Dn,pe,Je)},K=[z,O],ie=[G,F],ee=B;if(ee==null&&(ee=zu(K,ie)/2*U+Math.max(q,j)),ee||q||j){var X=nb(K,ie),re=function(Oe,Xe){return Xe+(Xe-Oe)*(Oe<Xe?.5:.25)},se=[.25,.75].map(function(yt){return[].concat(Gi(X(yt)),[re(yt<.5?q:j,ee)])}),Ae=pr(se,2),Se=Ae[0],Ce=Ae[1],Ye=US(P0.CubicBezierCurve3,Gi([[].concat(K,[q]),Se,Ce,[].concat(ie,[j])].map($)));return Ye}else{var it=.001;return pt.apply(void 0,Gi([[].concat(K,[it]),[].concat(ie,[it])].map($)))}function pt(yt,Oe){var Xe=yt.angleTo(Oe),Tt=Xe===0?function(){return yt.clone()}:function(Pt){return new P0.Vector3().addVectors(yt.clone().multiplyScalar(Math.sin((1-Pt)*Xe)),Oe.clone().multiplyScalar(Math.sin(Pt*Xe))).divideScalar(Math.sin(Xe))},Ft=new P0.Curve;return Ft.getPoint=Tt,Ft}}function M(D,B){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,O=B+1,z;if(D instanceof Array||D instanceof Function){var q=D instanceof Array?U1().domain(D.map(function(ee,X){return X/(D.length-1)})).range(D):D;z=function(X){return ku(q(X),!0,!0)}}else{var F=ku(D,!0,!0);z=function(){return F}}for(var G=[],j=0,$=O;j<$;j++)for(var K=z(j/($-1)),ie=0;ie<U;ie++)G.push(K);return Gl(G,4)}function P(D){for(var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,O=D+1,z=[],q=0,F=O;q<F;q++)for(var G=q/(F-1),j=0;j<B;j++)z.push(G);return U&&z.reverse(),Gl(z,1)}}}),xu=window.THREE?window.THREE:{BufferGeometry:Tn,DoubleSide:Ur,Mesh:Jn,MeshLambertMaterial:j0,Object3D:yi},YR=Object.assign({},ob),QR=YR.BufferGeometryUtils||YR,dO=ha({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=dt(e.hexBinPointLat),r=dt(e.hexBinPointLng),s=dt(e.hexBinPointWeight),a=dt(e.hexAltitude),o=dt(e.hexTopColor),l=dt(e.hexSideColor),u=dt(e.hexMargin),c=yJ(e.hexBinPointsData.map(function(P){return Li(Li({},P),{},{h3Idx:JJ(n(P),r(P),e.hexBinResolution)})}),"h3Idx"),p=Object.entries(c).map(function(P){var D=pr(P,2),B=D[0],U=D[1];return{h3Idx:B,points:U,sumWeight:U.reduce(function(O,z){return O+ +s(z)},0)}}),y={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&Yi(e.scene),e.dataMapper.scene=e.hexBinMerge?new xu.Object3D:e.scene,e.dataMapper.id(function(P){return P.h3Idx}).onCreateObj(E).onUpdateObj(M).digest(p),e.hexBinMerge){var _=p.length?(QR.mergeGeometries||QR.mergeBufferGeometries)(p.map(function(P){var D=e.dataMapper.getObj(P),B=D.geometry.toNonIndexed();D.updateMatrix(),B.applyMatrix4(D.matrix);var U=ku(o(P)),O=ku(l(P)),z=B.getAttribute("position").count,q=B.groups[0].count;return B.setAttribute("color",Gl(Gi(new Array(z)).map(function(F,G){return G>=q?U:O}),4)),B})):new xu.BufferGeometry,b=new xu.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:xu.DoubleSide});b.onBeforeCompile=function(P){b.userData.shader=L_(P)};var w=new xu.Mesh(_,b);w.__globeObjType="hexBinPoints",w.__data=p,e.dataMapper.clear(),Yi(e.scene),e.scene.add(w)}function E(P){var D=new xu.Mesh;D.__hexCenter=lD(P.h3Idx),D.__hexGeoJson=uD(P.h3Idx,!0).reverse();var B=D.__hexCenter[1];return D.__hexGeoJson.forEach(function(U){var O=U[0];Math.abs(B-O)>170&&(U[0]+=B>O?360:-360)}),D.__globeObjType="hexbin",D}function M(P,D){var B=function(re,se,Ae){return re-(re-se)*Ae},U=Math.max(0,Math.min(1,+u(D))),O=pr(P.__hexCenter,2),z=O[0],q=O[1],F=U===0?P.__hexGeoJson:P.__hexGeoJson.map(function(X){var re=pr(X,2),se=re[0],Ae=re[1];return[[se,q],[Ae,z]].map(function(Se){var Ce=pr(Se,2),Ye=Ce[0],it=Ce[1];return B(Ye,it,U)})}),G=e.hexTopCurvatureResolution;P.geometry&&P.geometry.dispose(),P.geometry=new fb([F],0,lr,!1,!0,!0,G);var j={alt:+a(D)},$=function(re){var se=P.__currentTargetD=re,Ae=se.alt;P.scale.x=P.scale.y=P.scale.z=1+Ae;var Se=lr/(Ae+1);P.geometry.setAttribute("surfaceRadius",Gl(Array(P.geometry.getAttribute("position").count).fill(Se),1))},K=P.__currentTargetD||Object.assign({},j,{alt:-.001});if(Object.keys(j).some(function(X){return K[X]!==j[X]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?$(j):e.tweenGroup.add(new wo(K).to(j,e.hexTransitionDuration).easing(qs.Quadratic.InOut).onUpdate($).start())),!e.hexBinMerge){var ie=l(D),ee=o(D);[ie,ee].forEach(function(X){if(!y.hasOwnProperty(X)){var re=q0(X);y[X]=VS(new xu.MeshLambertMaterial({color:zl(X),transparent:re<1,opacity:re,side:xu.DoubleSide}),L_)}}),P.material=[ie,ee].map(function(X){return y[X]})}}}}),AO=function(e){return e*e},x1=function(e){return e*Math.PI/180};function Xue(i,e){var t=Math.sqrt,n=Math.cos,r=function(c){return AO(Math.sin(c/2))},s=x1(i[1]),a=x1(e[1]),o=x1(i[0]),l=x1(e[0]);return 2*Math.asin(t(r(a-s)+n(s)*n(a)*r(l-o)))}var Yue=Math.sqrt(2*Math.PI);function Que(i,e){return Math.exp(-AO(i/e)/2)/(e*Yue)}var $ue=function(e){var t=pr(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.lngAccessor,l=o===void 0?function(E){return E[0]}:o,u=a.latAccessor,c=u===void 0?function(E){return E[1]}:u,p=a.weightAccessor,y=p===void 0?function(){return 1}:p,_=a.bandwidth,b=[n,r],w=_*Math.PI/180;return pY(s.map(function(E){var M=y(E);if(!M)return 0;var P=Xue(b,[l(E),c(E)]);return Que(P,w)*M}))},Kue=(function(){var i=Tue(D_().m(function e(t){var n,r,s,a,o,l,u,c,p,y,_,b,w,E,M,P,D,B,U,O,z,q,F,G,j,$,K,ie,ee,X,re,se,Ae,Se,Ce,Ye,it,pt,yt,Oe,Xe=arguments,Tt,Ft,Pt,ln;return D_().w(function(Dn){for(;;)switch(Dn.n){case 0:if(r=Xe.length>1&&Xe[1]!==void 0?Xe[1]:[],s=Xe.length>2&&Xe[2]!==void 0?Xe[2]:{},a=s.lngAccessor,o=a===void 0?function(pe){return pe[0]}:a,l=s.latAccessor,u=l===void 0?function(pe){return pe[1]}:l,c=s.weightAccessor,p=c===void 0?function(){return 1}:c,y=s.bandwidth,(n=navigator)!==null&&n!==void 0&&n.gpu){Dn.n=1;break}return console.warn("WebGPU not enabled in browser. Please consider enabling it to improve performance."),Dn.a(2,t.map(function(pe){return $ue(pe,r,{lngAccessor:o,latAccessor:u,weightAccessor:p,bandwidth:y})}));case 1:return _=4,b=eue,w=tue,E=fue,M=hue,P=aue,D=oue,B=nue,U=cue,O=uue,z=rue,q=iue,F=sue,G=lue,j=M(new Ld(new Float32Array(t.flat().map(x1)),2),"vec2",t.length),$=M(new Ld(new Float32Array(r.map(function(pe){return[x1(o(pe)),x1(u(pe)),p(pe)]}).flat()),3),"vec3",r.length),K=new Ld(t.length,1),ie=M(K,"float",t.length),ee=P(Math.PI),X=U(ee.mul(2)),re=function(Je){return Je.mul(Je)},se=function(Je){return re(O(Je.div(2)))},Ae=function(Je,et){var tt=P(Je[1]),ke=P(et[1]),xt=P(Je[0]),ft=P(et[0]);return P(2).mul(q(U(se(ke.sub(tt)).add(z(tt).mul(z(ke)).mul(se(ft.sub(xt)))))))},Se=function(Je,et){return F(G(re(Je.div(et)).div(2))).div(et.mul(X))},Ce=E(x1(y)),Ye=E(x1(y*_)),it=E(r.length),pt=b(function(){var pe=j.element(D),Je=ie.element(D);Je.assign(0),B(it,function(et){var tt=et.i,ke=$.element(tt),xt=ke.z;w(xt,function(){var ft=Ae(ke.xy,pe.xy);w(ft&&ft.lessThan(Ye),function(){Je.addAssign(Se(ft,Ce).mul(xt))})})})}),yt=pt().compute(t.length),Oe=new J1e,Dn.n=2,Oe.computeAsync(yt);case 2:return Tt=Array,Ft=Float32Array,Dn.n=3,Oe.getArrayBufferAsync(K);case 3:return Pt=Dn.v,ln=new Ft(Pt),Dn.a(2,Tt.from.call(Tt,ln))}},e)}));return function(t){return i.apply(this,arguments)}})(),fd=window.THREE?window.THREE:{Mesh:Jn,MeshLambertMaterial:j0,SphereGeometry:o0},Zue=3.5,Jue=.1,$R=100,e2e=function(e){var t=e3(tee(e));return t.opacity=Math.cbrt(e),t.formatRgb()},pO=ha({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return e2e}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var s=new fd.Mesh(new fd.SphereGeometry(lr),VS(new fd.MeshLambertMaterial({vertexColors:!0,transparent:!0}),kue));return s.__globeObjType="heatmap",s})},update:function(e){var t=dt(e.heatmapPoints),n=dt(e.heatmapPointLat),r=dt(e.heatmapPointLng),s=dt(e.heatmapPointWeight),a=dt(e.heatmapBandwidth),o=dt(e.heatmapColorFn),l=dt(e.heatmapColorSaturation),u=dt(e.heatmapBaseAltitude),c=dt(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(p,y){var _=a(y),b=o(y),w=l(y),E=u(y),M=c(y),P=t(y).map(function(z){var q=n(z),F=r(z),G=r0(q,F),j=G.x,$=G.y,K=G.z;return{x:j,y:$,z:K,lat:q,lng:F,weight:s(z)}}),D=Math.max(Jue,_/Zue),B=Math.ceil(360/(D||-1));p.geometry.parameters.widthSegments!==B&&(p.geometry.dispose(),p.geometry=new fd.SphereGeometry(lr,B,B/2));var U=que(p.geometry.getAttribute("position")),O=U.map(function(z){var q=pr(z,3),F=q[0],G=q[1],j=q[2],$=lO({x:F,y:G,z:j}),K=$.lng,ie=$.lat;return[K,ie]});Kue(O,P,{latAccessor:function(q){return q.lat},lngAccessor:function(q){return q.lng},weightAccessor:function(q){return q.weight},bandwidth:_}).then(function(z){var q=Gi(new Array($R)).map(function($,K){return ku(b(K/($R-1)))}),F=function(K){var ie=p.__currentTargetD=K,ee=ie.kdeVals,X=ie.topAlt,re=ie.saturation,se=fY(ee.map(Math.abs))||1e-15,Ae=uP([0,se/re],q);p.geometry.setAttribute("color",Gl(ee.map(function(Ce){return Ae(Math.abs(Ce))}),4));var Se=U1([0,se],[lr*(1+E),lr*(1+(X||E))]);p.geometry.setAttribute("r",Gl(ee.map(Se)))},G={kdeVals:z,topAlt:M,saturation:w},j=p.__currentTargetD||Object.assign({},G,{kdeVals:z.map(function(){return 0}),topAlt:M&&E,saturation:.5});j.kdeVals.length!==z.length&&(j.kdeVals=z.slice()),Object.keys(G).some(function($){return j[$]!==G[$]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?F(G):e.tweenGroup.add(new wo(j).to(G,e.heatmapsTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(F).start()))})}).digest(e.heatmapsData)}}),bu=window.THREE?window.THREE:{DoubleSide:Ur,Group:sa,LineBasicMaterial:ls,LineSegments:s0,Mesh:Jn,MeshBasicMaterial:Os},mO=ha({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjPolygon"}).id(function(s){return s.id}).onCreateObj(function(){var s=new bu.Group;return s.__defaultSideMaterial=VS(new bu.MeshBasicMaterial({side:bu.DoubleSide,depthWrite:!0}),L_),s.__defaultCapMaterial=new bu.MeshBasicMaterial({side:bu.DoubleSide,depthWrite:!0}),s.add(new bu.Mesh(void 0,[s.__defaultSideMaterial,s.__defaultCapMaterial])),s.add(new bu.LineSegments(void 0,new bu.LineBasicMaterial)),s.__globeObjType="polygon",s})},update:function(e){var t=dt(e.polygonGeoJsonGeometry),n=dt(e.polygonAltitude),r=dt(e.polygonCapCurvatureResolution),s=dt(e.polygonCapColor),a=dt(e.polygonCapMaterial),o=dt(e.polygonSideColor),l=dt(e.polygonSideMaterial),u=dt(e.polygonStrokeColor),c=[];e.polygonsData.forEach(function(p){var y={data:p,capColor:s(p),capMaterial:a(p),sideColor:o(p),sideMaterial:l(p),strokeColor:u(p),altitude:+n(p),capCurvatureResolution:+r(p)},_=t(p),b=p.__id||"".concat(Math.round(Math.random()*1e9));p.__id=b,_.type==="Polygon"?c.push(Li({id:"".concat(b,"_0"),coords:_.coordinates},y)):_.type==="MultiPolygon"?c.push.apply(c,Gi(_.coordinates.map(function(w,E){return Li({id:"".concat(b,"_").concat(E),coords:w},y)}))):console.warn("Unsupported GeoJson geometry type: ".concat(_.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(p,y){var _=y.coords,b=y.capColor,w=y.capMaterial,E=y.sideColor,M=y.sideMaterial,P=y.strokeColor,D=y.altitude,B=y.capCurvatureResolution,U=pr(p.children,2),O=U[0],z=U[1],q=!!P;z.visible=q;var F=!!(b||w),G=!!(E||M);t2e(O.geometry.parameters||{},{polygonGeoJson:_,curvatureResolution:B,closedTop:F,includeSides:G})||(O.geometry&&O.geometry.dispose(),O.geometry=new fb(_,0,lr,!1,F,G,B)),q&&(!z.geometry.parameters||z.geometry.parameters.geoJson.coordinates!==_||z.geometry.parameters.resolution!==B)&&(z.geometry&&z.geometry.dispose(),z.geometry=new kP({type:"Polygon",coordinates:_},lr,B));var j=G?0:-1,$=F?G?1:0:-1;if(j>=0&&(O.material[j]=M||p.__defaultSideMaterial),$>=0&&(O.material[$]=w||p.__defaultCapMaterial),[[!M&&E,j],[!w&&b,$]].forEach(function(se){var Ae=pr(se,2),Se=Ae[0],Ce=Ae[1];if(!(!Se||Ce<0)){var Ye=O.material[Ce],it=q0(Se);Ye.color.set(zl(Se)),Ye.transparent=it<1,Ye.opacity=it}}),q){var K=z.material,ie=q0(P);K.color.set(zl(P)),K.transparent=ie<1,K.opacity=ie}var ee={alt:D},X=function(Ae){var Se=p.__currentTargetD=Ae,Ce=Se.alt;O.scale.x=O.scale.y=O.scale.z=1+Ce,q&&(z.scale.x=z.scale.y=z.scale.z=1+Ce+1e-4),Hue(p.__defaultSideMaterial,function(Ye){return Ye.surfaceRadius.value=lr/(Ce+1)})},re=p.__currentTargetD||Object.assign({},ee,{alt:-.001});Object.keys(ee).some(function(se){return re[se]!==ee[se]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||re.alt===ee.alt?X(ee):e.tweenGroup.add(new wo(re).to(ee,e.polygonsTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(X).start()))}).digest(c)}});function t2e(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,r){return n===r}};return Object.entries(e).every(function(n){var r=pr(n,2),s=r[0],a=r[1];return i.hasOwnProperty(s)&&t(s)(i[s],a)})}var K4=window.THREE?window.THREE:{BufferGeometry:Tn,DoubleSide:Ur,Mesh:Jn,MeshLambertMaterial:j0,Vector3:te},KR=Object.assign({},ob),ZR=KR.BufferGeometryUtils||KR,gO=ha({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var s=new K4.Mesh(void 0,new K4.MeshLambertMaterial({side:K4.DoubleSide}));return s.__globeObjType="hexPolygon",s})},update:function(e){var t=dt(e.hexPolygonGeoJsonGeometry),n=dt(e.hexPolygonColor),r=dt(e.hexPolygonAltitude),s=dt(e.hexPolygonResolution),a=dt(e.hexPolygonMargin),o=dt(e.hexPolygonUseDots),l=dt(e.hexPolygonCurvatureResolution),u=dt(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(c,p){var y=t(p),_=s(p),b=r(p),w=Math.max(0,Math.min(1,+a(p))),E=o(p),M=l(p),P=u(p),D=n(p),B=q0(D);c.material.color.set(zl(D)),c.material.transparent=B<1,c.material.opacity=B;var U={alt:b,margin:w,curvatureResolution:M},O={geoJson:y,h3Res:_},z=c.__currentTargetD||Object.assign({},U,{alt:-.001}),q=c.__currentMemD||O;if(Object.keys(U).some(function($){return z[$]!==U[$]})||Object.keys(O).some(function($){return q[$]!==O[$]})){c.__currentMemD=O;var F=[];y.type==="Polygon"?mw(y.coordinates,_,!0).forEach(function($){return F.push($)}):y.type==="MultiPolygon"?y.coordinates.forEach(function($){return mw($,_,!0).forEach(function(K){return F.push(K)})}):console.warn("Unsupported GeoJson geometry type: ".concat(y.type,". Skipping geometry..."));var G=F.map(function($){var K=lD($),ie=uD($,!0).reverse(),ee=K[1];return ie.forEach(function(X){var re=X[0];Math.abs(ee-re)>170&&(X[0]+=ee>re?360:-360)}),{h3Idx:$,hexCenter:K,hexGeoJson:ie}}),j=function(K){var ie=c.__currentTargetD=K,ee=ie.alt,X=ie.margin,re=ie.curvatureResolution;c.geometry&&c.geometry.dispose(),c.geometry=G.length?(ZR.mergeGeometries||ZR.mergeBufferGeometries)(G.map(function(se){var Ae=pr(se.hexCenter,2),Se=Ae[0],Ce=Ae[1];if(E){var Ye=r0(Se,Ce,ee),it=r0(se.hexGeoJson[0][1],se.hexGeoJson[0][0],ee),pt=.85*(1-X)*new K4.Vector3(Ye.x,Ye.y,Ye.z).distanceTo(new K4.Vector3(it.x,it.y,it.z)),yt=new n8(pt,P);return yt.rotateX(ac(-Se)),yt.rotateY(ac(Ce)),yt.translate(Ye.x,Ye.y,Ye.z),yt}else{var Oe=function(Ft,Pt,ln){return Ft-(Ft-Pt)*ln},Xe=X===0?se.hexGeoJson:se.hexGeoJson.map(function(Tt){var Ft=pr(Tt,2),Pt=Ft[0],ln=Ft[1];return[[Pt,Ce],[ln,Se]].map(function(Dn){var pe=pr(Dn,2),Je=pe[0],et=pe[1];return Oe(Je,et,X)})});return new fb([Xe],lr,lr*(1+ee),!1,!0,!1,re)}})):new K4.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?j(U):e.tweenGroup.add(new wo(z).to(U,e.hexPolygonsTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(j).start())}}).digest(e.hexPolygonsData)}}),n2e=window.THREE?window.THREE:{Vector3:te};function i2e(i,e){var t=function(a,o){var l=a[a.length-1];return[].concat(Gi(a),Gi(Array(o-a.length).fill(l)))},n=Math.max(i.length,e.length),r=PY.apply(void 0,Gi([i,e].map(function(s){return s.map(function(a){var o=a.x,l=a.y,u=a.z;return[o,l,u]})}).map(function(s){return t(s,n)})));return function(s){return s===0?i:s===1?e:r(s).map(function(a){var o=pr(a,3),l=o[0],u=o[1],c=o[2];return new n2e.Vector3(l,u,c)})}}var K2=window.THREE?window.THREE:{BufferGeometry:Tn,Color:Dt,Group:sa,Line:k0,NormalBlending:aa,ShaderMaterial:Na,Vector3:te},r2e=k5.default||k5,yO=ha({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new r2e,sharedMaterial:new K2.ShaderMaterial(Li(Li({},hO()),{},{transparent:!0,blending:K2.NormalBlending}))}},init:function(e,t){Yi(e),t.scene=e,t.dataMapper=new no(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var n=new K2.Group;return n.__globeObjType="path",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var a=pr(s,2),o=a[1];return o}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var a=s.children[0],o=a.__dashAnimateStep*r;if(a.type==="Line"){var l=a.material.uniforms.dashTranslate.value%1e9;a.material.uniforms.dashTranslate.value=l+o}else if(a.type==="Line2"){for(var u=a.material.dashOffset-o,c=a.material.dashSize+a.material.gapSize;u<=-c;)u+=c;a.material.dashOffset=u}})})},update:function(e){var t=dt(e.pathPoints),n=dt(e.pathPointLat),r=dt(e.pathPointLng),s=dt(e.pathPointAlt),a=dt(e.pathStroke),o=dt(e.pathColor),l=dt(e.pathDashLength),u=dt(e.pathDashGap),c=dt(e.pathDashInitialGap),p=dt(e.pathDashAnimateTime);e.dataMapper.onUpdateObj(function(E,M){var P=a(M),D=P!=null;if(!E.children.length||D===(E.children[0].type==="Line")){Yi(E);var B=D?new mue(new iO,new IS):new K2.Line(new K2.BufferGeometry,e.sharedMaterial.clone());E.add(B)}var U=E.children[0],O=_(t(M),n,r,s,e.pathResolution),z=p(M);if(U.__dashAnimateStep=z>0?1e3/z:0,D){U.material.resolution=e.rendererSize;{var G=l(M),j=u(M),$=c(M);U.material.dashed=j>0,U.material.dashed?U.material.defines.USE_DASH="":delete U.material.defines.USE_DASH,U.material.dashed&&(U.material.dashScale=1/y(O),U.material.dashSize=G,U.material.gapSize=j,U.material.dashOffset=-$)}{var K=o(M);if(K instanceof Array){var ie=b(o(M),O.length-1,1,!1);U.geometry.setColors(ie.array),U.material.vertexColors=!0}else{var ee=K,X=q0(ee);U.material.color=new K2.Color(zl(ee)),U.material.transparent=X<1,U.material.opacity=X,U.material.vertexColors=!1}}U.material.needsUpdate=!0}else{Object.assign(U.material.uniforms,{dashSize:{value:l(M)},gapSize:{value:u(M)},dashOffset:{value:c(M)}});var q=b(o(M),O.length),F=w(O.length,1,!0);U.geometry.setAttribute("color",q),U.geometry.setAttribute("relDistance",F)}var re=i2e(E.__currentTargetD&&E.__currentTargetD.points||[O[0]],O),se=function(Ye){var it=E.__currentTargetD=Ye,pt=it.stroke,yt=it.interpolK,Oe=E.__currentTargetD.points=re(yt);if(D){var Xe;U.geometry.setPositions((Xe=[]).concat.apply(Xe,Gi(Oe.map(function(Tt){var Ft=Tt.x,Pt=Tt.y,ln=Tt.z;return[Ft,Pt,ln]})))),U.material.linewidth=pt,U.material.dashed&&U.computeLineDistances()}else U.geometry.setFromPoints(Oe),U.geometry.computeBoundingSphere()},Ae={stroke:P,interpolK:1},Se=Object.assign({},E.__currentTargetD||Ae,{interpolK:0});Object.keys(Ae).some(function(Ce){return Se[Ce]!==Ae[Ce]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?se(Ae):e.tweenGroup.add(new wo(Se).to(Ae,e.pathTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(se).start()))}).digest(e.pathsData);function y(E){var M=0,P;return E.forEach(function(D){P&&(M+=P.distanceTo(D)),P=D}),M}function _(E,M,P,D,B){var U=function(F,G,j){for(var $=[],K=1;K<=j;K++)$.push(F+(G-F)*K/(j+1));return $},O=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,j=[],$=null;return F.forEach(function(K){if($){for(;Math.abs($[1]-K[1])>180;)$[1]+=360*($[1]<K[1]?1:-1);var ie=Math.sqrt(Math.pow(K[0]-$[0],2)+Math.pow(K[1]-$[1],2));if(ie>G)for(var ee=Math.floor(ie/G),X=U($[0],K[0],ee),re=U($[1],K[1],ee),se=U($[2],K[2],ee),Ae=0,Se=X.length;Ae<Se;Ae++)j.push([X[Ae],re[Ae],se[Ae]])}j.push($=K)}),j},z=function(F){var G=pr(F,3),j=G[0],$=G[1],K=G[2],ie=r0(j,$,K),ee=ie.x,X=ie.y,re=ie.z;return new K2.Vector3(ee,X,re)};return O(E.map(function(q){return[M(q),P(q),D(q)]}),B).map(z)}function b(E,M){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,B=M+1,U;if(E instanceof Array||E instanceof Function){var O=E instanceof Array?U1().domain(E.map(function(K,ie){return ie/(E.length-1)})).range(E):E;U=function(ie){return ku(O(ie),D,!0)}}else{var z=ku(E,D,!0);U=function(){return z}}for(var q=[],F=0,G=B;F<G;F++)for(var j=U(F/(G-1)),$=0;$<P;$++)q.push(j);return Gl(q,D?4:3)}function w(E){for(var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,D=E+1,B=[],U=0,O=D;U<O;U++)for(var z=U/(O-1),q=0;q<M;q++)B.push(z);return P&&B.reverse(),Gl(B,1)}}}),dd=window.THREE?window.THREE:{Euler:bs,Mesh:Jn,MeshLambertMaterial:j0,SphereGeometry:o0},vO=ha({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new dd.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var s=new dd.Mesh;return s.__globeObjType="tile",s})},update:function(e){var t=dt(e.tileLat),n=dt(e.tileLng),r=dt(e.tileAltitude),s=dt(e.tileWidth),a=dt(e.tileHeight),o=dt(e.tileUseGlobeProjection),l=dt(e.tileMaterial),u=dt(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(c,p){c.material=l(p);var y=o(p),_=u(p),b=function(P){var D=c.__currentTargetD=P,B=D.lat,U=D.lng,O=D.alt,z=D.width,q=D.height,F=Z4(U),G=Z4(-B);c.geometry&&c.geometry.dispose(),c.geometry=new dd.SphereGeometry(lr*(1+O),Math.ceil(z/(_||-1)),Math.ceil(q/(_||-1)),Z4(90-z/2)+(y?F:0),Z4(z),Z4(90-q/2)+(y?G:0),Z4(q)),y||c.setRotationFromEuler(new dd.Euler(G,F,0,"YXZ"))},w={lat:+t(p),lng:+n(p),alt:+r(p),width:+s(p),height:+a(p)},E=c.__currentTargetD||Object.assign({},w,{width:0,height:0});Object.keys(w).some(function(M){return E[M]!==w[M]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?b(w):e.tweenGroup.add(new wo(E).to(w,e.tilesTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(b).start()))}).digest(e.tilesData)}}),Z4=function(e){return e*Math.PI/180},Gh=window.THREE?window.THREE:{BufferGeometry:Tn,Color:Dt,Points:hx,PointsMaterial:o7},_O=ha({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){Yi(e),t.scene=e,t.dataMapper=new no(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var n=new Gh.Points(new Gh.BufferGeometry,new Gh.PointsMaterial);return n.__globeObjType="particles",n}).onUpdateObj(function(n,r){var s=dt(t.particlesList),a=dt(t.particleLat),o=dt(t.particleLng),l=dt(t.particleAltitude);n.geometry.setAttribute("position",Gl(s(r).map(function(u){return Object.values(r0(a(u),o(u),l(u)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(o){return t.hasOwnProperty(o)})&&e.dataMapper.digest(e.particlesData);var n=dt(e.particlesColor),r=dt(e.particlesSize),s=dt(e.particlesSizeAttenuation),a=dt(e.particlesTexture);e.dataMapper.entries().forEach(function(o){var l=pr(o,2),u=l[0],c=l[1];if(c.material.size=r(u),c.material.sizeAttenuation=s(u),e.particlesTexture)c.material.color=new Gh.Color(16777215),c.material.transparent=!1,c.material.alphaTest=.5,c.material.map=a(u);else{var p=n(u),y=q0(p);c.material.color=new Gh.Color(zl(p)),c.material.transparent=y<1,c.material.opacity=y,c.material.alphaTest=0}})}}),s2e=window.THREE?window.THREE:{BufferGeometry:Tn},a2e=(function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;gm(this,e),t=mm(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:r};for(var s=[],a=0;a<=r;a++){var o=(a/r-.25)*Math.PI*2;s.push({x:Math.cos(o)*n,y:Math.sin(o)*n,z:0})}return t.setFromPoints(s),t}return vm(e,i),ym(e)})(s2e.BufferGeometry),J4=window.THREE?window.THREE:{Color:Dt,Group:sa,Line:k0,LineBasicMaterial:ls,Vector3:te},o2e=k5.default||k5,xO=ha({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var s=new J4.Group;return s.__globeObjType="ring",s}),t.ticker=new o2e,t.ticker.onTick.add(function(s){if(t.ringsData.length){var a=dt(t.ringColor),o=dt(t.ringAltitude),l=dt(t.ringMaxRadius),u=dt(t.ringPropagationSpeed),c=dt(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(p){var y=pr(p,2),_=y[1];return _}).forEach(function(p){var y=pr(p,2),_=y[0],b=y[1];if((b.__nextRingTime||0)<=s){var w=c(_)/1e3;b.__nextRingTime=s+(w<=0?1/0:w);var E=new J4.Line(new a2e(1,t.ringResolution),new J4.LineBasicMaterial),M=a(_),P=M instanceof Array||M instanceof Function,D;P?M instanceof Array?(D=U1().domain(M.map(function(j,$){return $/(M.length-1)})).range(M),E.material.transparent=M.some(function(j){return q0(j)<1})):(D=M,E.material.transparent=!0):(E.material.color=new J4.Color(zl(M)),Gue(E.material,q0(M)));var B=lr*(1+o(_)),U=l(_),O=U*Math.PI/180,z=u(_),q=z<=0,F=function($){var K=$.t,ie=(q?1-K:K)*O;if(E.scale.x=E.scale.y=B*Math.sin(ie),E.position.z=B*(1-Math.cos(ie)),P){var ee=D(K);E.material.color=new J4.Color(zl(ee)),E.material.transparent&&(E.material.opacity=q0(ee))}};if(z===0)F({t:0}),b.add(E);else{var G=Math.abs(U/z)*1e3;t.tweenGroup.add(new wo({t:0}).to({t:1},G).onUpdate(F).onStart(function(){return b.add(E)}).onComplete(function(){b.remove(E),FS(E)}).start())}}})}})},update:function(e){var t=dt(e.ringLat),n=dt(e.ringLng),r=dt(e.ringAltitude),s=e.scene.localToWorld(new J4.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(a,o){var l=t(o),u=n(o),c=r(o);Object.assign(a.position,r0(l,u,c)),a.lookAt(s)}).digest(e.ringsData)}}),l2e={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},ο:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"¦":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},Τ:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},Π:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},ΐ:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"²":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"–":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},Κ:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},ƒ:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},ό:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"»":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"©":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},ώ:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"«":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"∙":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},ÿ:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},µ:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},Ι:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},Ύ:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"’":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},Ν:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},ς:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},Ψ:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},ι:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},Ά:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},ε:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},Δ:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"‰":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"—":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},ρ:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"¯":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},Η:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},Α:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"…":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},ν:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"¶":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},β:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},Μ:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},Ό:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ή:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"•":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"¥":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},γ:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},α:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"­":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},Χ:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"†":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"°":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},Ξ:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "}," ":{x_min:0,x_max:0,ha:853},Ϋ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"”":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},Ί:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},Β:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},υ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},χ:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},ί:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},Ζ:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"¨":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"‹":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"„":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},δ:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},έ:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},ω:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"´":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"±":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},ϋ:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"§":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},Ω:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},ύ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"™":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},ή:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},Θ:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"®":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},Ε:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"³":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},σ:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},ζ:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},θ:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},Ο:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},Γ:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},Έ:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ώ:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},Ϊ:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"½":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},Ρ:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},ª:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"΅":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},Φ:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"⁋":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},Σ:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"›":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"£":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"¬":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},λ:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},τ:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},ξ:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},Λ:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},ΰ:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"·":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},Υ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},μ:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},φ:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"“":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"‘":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},ϊ:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},π:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},ά:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"¤":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},κ:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"‡":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},ψ:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},η:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},u2e="normal",c2e=1189,h2e=-100,f2e="normal",d2e={yMin:-334,xMin:-111,yMax:1189,xMax:1672},A2e=1e3,p2e={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) Μagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"Μagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"Μagenta ltd",font_sub_family_name:"Regular"},m2e=-334,g2e="Helvetiker",y2e=1522,v2e=50,_2e={glyphs:l2e,cssFontWeight:u2e,ascender:c2e,underlinePosition:h2e,cssFontStyle:f2e,boundingBox:d2e,resolution:A2e,original_font_information:p2e,descender:m2e,familyName:g2e,lineHeight:y2e,underlineThickness:v2e},D0=Li(Li({},window.THREE?window.THREE:{BoxGeometry:ql,CircleGeometry:n8,DoubleSide:Ur,Group:sa,Mesh:Jn,MeshLambertMaterial:j0,TextGeometry:GR,Vector3:te}),{},{Font:gue,TextGeometry:GR}),bO=ha({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:.002},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:_2e,onChange:function(e,t){t.font=new D0.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r;var s=new D0.CircleGeometry(1,32);t.dataMapper=new no(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var a=new D0.MeshLambertMaterial;a.side=Ur;var o=new D0.Group;o.add(new D0.Mesh(s,a));var l=new D0.Mesh(void 0,a);o.add(l);var u=new D0.Mesh;return u.visible=!1,l.add(u),o.__globeObjType="label",o})},update:function(e){var t=dt(e.labelLat),n=dt(e.labelLng),r=dt(e.labelAltitude),s=dt(e.labelText),a=dt(e.labelSize),o=dt(e.labelRotation),l=dt(e.labelColor),u=dt(e.labelIncludeDot),c=dt(e.labelDotRadius),p=dt(e.labelDotOrientation),y=new Set(["right","top","bottom"]),_=2*Math.PI*lr/360;e.dataMapper.onUpdateObj(function(b,w){var E=pr(b.children,2),M=E[0],P=E[1],D=pr(P.children,1),B=D[0],U=l(w),O=q0(U);P.material.color.set(zl(U)),P.material.transparent=O<1,P.material.opacity=O;var z=u(w),q=p(w);!z||!y.has(q)&&(q="bottom");var F=z?+c(w)*_:1e-12;M.scale.x=M.scale.y=F;var G=+a(w)*_;if(P.geometry&&P.geometry.dispose(),P.geometry=new D0.TextGeometry(s(w),{font:e.font,size:G,depth:0,bevelEnabled:!0,bevelThickness:0,bevelSize:0,curveSegments:e.labelResolution}),B.geometry&&B.geometry.dispose(),P.geometry.computeBoundingBox(),B.geometry=US(D0.BoxGeometry,Gi(new D0.Vector3().subVectors(P.geometry.boundingBox.max,P.geometry.boundingBox.min).clampScalar(0,1/0).toArray())),q!=="right"&&P.geometry.center(),z){var j=F+G/2;q==="right"&&(P.position.x=j),P.position.y={right:-G/2,top:j+G/2,bottom:-j-G/2}[q]}var $=function(X){var re=b.__currentTargetD=X,se=re.lat,Ae=re.lng,Se=re.alt,Ce=re.rot,Ye=re.scale;Object.assign(b.position,r0(se,Ae,Se)),b.lookAt(e.scene.localToWorld(new D0.Vector3(0,0,0))),b.rotateY(Math.PI),b.rotateZ(-Ce*Math.PI/180),b.scale.x=b.scale.y=b.scale.z=Ye},K={lat:+t(w),lng:+n(w),alt:+r(w),rot:+o(w),scale:1},ie=b.__currentTargetD||Object.assign({},K,{scale:1e-12});Object.keys(K).some(function(ee){return ie[ee]!==K[ee]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?$(K):e.tweenGroup.add(new wo(ie).to(K,e.labelsTransitionDuration).easing(qs.Quadratic.InOut).onUpdate($).start()))}).digest(e.labelsData)}}),x2e=Li(Li({},window.THREE?window.THREE:{}),{},{CSS2DObject:_ue}),SO=ha({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlElementVisibilityModifier:{triggerUpdate:!1},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){if(e.dataMapper){var n=t?[t]:e.dataMapper.entries().map(function(r){var s=pr(r,2),a=s[1];return a}).filter(function(r){return r});n.forEach(function(r){var s=!e.isBehindGlobe||!e.isBehindGlobe(r.position);e.htmlElementVisibilityModifier?(r.visible=!0,e.htmlElementVisibilityModifier(r.element,s)):r.visible=s})}}},init:function(e,t,n){var r=n.tweenGroup;Yi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new no(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(s){var a=dt(t.htmlElement)(s),o=new x2e.CSS2DObject(a);return o.__globeObjType="html",o})},update:function(e,t){var n=this,r=dt(e.htmlLat),s=dt(e.htmlLng),a=dt(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(o,l){var u=function(y){var _=o.__currentTargetD=y,b=_.alt,w=_.lat,E=_.lng;Object.assign(o.position,r0(w,E,b)),n.updateObjVisibility(o)},c={lat:+r(l),lng:+s(l),alt:+a(l)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!o.__currentTargetD?u(c):e.tweenGroup.add(new wo(o.__currentTargetD).to(c,e.htmlTransitionDuration).easing(qs.Quadratic.InOut).onUpdate(u).start())}).digest(e.htmlElementsData)}}),Ad=window.THREE?window.THREE:{Group:sa,Mesh:Jn,MeshLambertMaterial:j0,SphereGeometry:o0},TO=ha({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new Ad.Mesh(new Ad.SphereGeometry(1,16,8),new Ad.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){Yi(e),t.scene=e,t.dataMapper=new no(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(n){var r=dt(t.objectThreeObject)(n);t.objectThreeObject===r&&(r=r.clone());var s=new Ad.Group;return s.add(r),s.__globeObjType="object",s})},update:function(e,t){var n=dt(e.objectLat),r=dt(e.objectLng),s=dt(e.objectAltitude),a=dt(e.objectFacesSurface),o=dt(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(l,u){var c=+n(u),p=+r(u),y=+s(u);Object.assign(l.position,r0(c,p,y)),a(u)?l.setRotationFromEuler(new bs(ac(-c),ac(p),0,"YXZ")):l.rotation.set(0,0,0);var _=l.children[0],b=o(u);b&&_.setRotationFromEuler(new bs(ac(b.x||0),ac(b.y||0),ac(b.z||0)))}).digest(e.objectsData)}}),MO=ha({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){Yi(e),t.scene=e,t.dataMapper=new no(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(n){var r=dt(t.customThreeObject)(n,lr);return r&&(t.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r})},update:function(e,t){e.customThreeObjectUpdate||Yi(e.scene);var n=dt(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(r,s){return n(r,s,lr)}).digest(e.customLayerData)}}),pd=window.THREE?window.THREE:{Camera:c3,Group:sa,Vector2:He,Vector3:te},b2e=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],EO=Pa("globeLayer",uO),S2e=Object.assign.apply(Object,Gi(["globeImageUrl","bumpImageUrl","globeCurvatureResolution","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(i){return Ts({},i,EO.linkProp(i))}))),T2e=Object.assign.apply(Object,Gi(["globeMaterial"].map(function(i){return Ts({},i,EO.linkMethod(i))}))),M2e=Pa("pointsLayer",cO),E2e=Object.assign.apply(Object,Gi(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(i){return Ts({},i,M2e.linkProp(i))}))),w2e=Pa("arcsLayer",fO),R2e=Object.assign.apply(Object,Gi(["arcsData","arcStartLat","arcStartLng","arcStartAltitude","arcEndLat","arcEndLng","arcEndAltitude","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(i){return Ts({},i,w2e.linkProp(i))}))),C2e=Pa("hexBinLayer",dO),N2e=Object.assign.apply(Object,Gi(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(i){return Ts({},i,C2e.linkProp(i))}))),P2e=Pa("heatmapsLayer",pO),D2e=Object.assign.apply(Object,Gi(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(i){return Ts({},i,P2e.linkProp(i))}))),B2e=Pa("hexedPolygonsLayer",gO),L2e=Object.assign.apply(Object,Gi(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(i){return Ts({},i,B2e.linkProp(i))}))),I2e=Pa("polygonsLayer",mO),U2e=Object.assign.apply(Object,Gi(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(i){return Ts({},i,I2e.linkProp(i))}))),O2e=Pa("pathsLayer",yO),F2e=Object.assign.apply(Object,Gi(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(i){return Ts({},i,O2e.linkProp(i))}))),V2e=Pa("tilesLayer",vO),z2e=Object.assign.apply(Object,Gi(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(i){return Ts({},i,V2e.linkProp(i))}))),G2e=Pa("particlesLayer",_O),q2e=Object.assign.apply(Object,Gi(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(i){return Ts({},i,G2e.linkProp(i))}))),k2e=Pa("ringsLayer",xO),H2e=Object.assign.apply(Object,Gi(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(i){return Ts({},i,k2e.linkProp(i))}))),W2e=Pa("labelsLayer",bO),j2e=Object.assign.apply(Object,Gi(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(i){return Ts({},i,W2e.linkProp(i))}))),X2e=Pa("htmlElementsLayer",SO),Y2e=Object.assign.apply(Object,Gi(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration"].map(function(i){return Ts({},i,X2e.linkProp(i))}))),Q2e=Pa("objectsLayer",TO),$2e=Object.assign.apply(Object,Gi(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(i){return Ts({},i,Q2e.linkProp(i))}))),K2e=Pa("customLayer",MO),Z2e=Object.assign.apply(Object,Gi(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return Ts({},i,K2e.linkProp(i))}))),J2e=ha({props:Li(Li(Li(Li(Li(Li(Li(Li(Li(Li(Li(Li(Li(Li(Li({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new pd.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},S2e),E2e),R2e),N2e),D2e),U2e),L2e),F2e),z2e),q2e),H2e),j2e),Y2e),$2e),Z2e),methods:Li({getGlobeRadius:HR,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return r0.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lO.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof pd.Camera?t.position:t,r=HR(),s=void 0;if(e.scene&&n){var a,o,l,u;s=function(p){a===void 0&&(a=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),o===void 0&&(o=a.length()),l===void 0&&(l=Math.sqrt(Math.pow(o,2)-Math.pow(r,2))),u===void 0&&(u=Math.acos(l/o));var y=a.distanceTo(p);if(y<l)return!1;var _=p.length(),b=Math.acos((Math.pow(o,2)+Math.pow(y,2)-Math.pow(_,2))/(2*o*y));return b<u}}e.layersThatNeedUpdatePov.forEach(function(c){return c.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(c){return c.isBehindGlobe(s)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},T2e),stateInit:function(){var e=new jN,t={tweenGroup:e},n={globeLayer:uO(t),pointsLayer:cO(t),arcsLayer:fO(t),hexBinLayer:dO(t),heatmapsLayer:pO(t),polygonsLayer:mO(t),hexedPolygonsLayer:gO(t),pathsLayer:yO(t),tilesLayer:vO(t),particlesLayer:_O(t),ringsLayer:xO(t),labelsLayer:bO(t),htmlElementsLayer:SO(t),objectsLayer:TO(t),customLayer:MO(t)};return Li(Li({tweenGroup:e},n),{},{layersThatNeedUpdatePov:Object.values(n).filter(function(r){return r.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(r){return r.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var r=n.animateIn,s=r===void 0?!0:r,a=n.waitForGlobeReady,o=a===void 0?!0:a;Yi(e),t.scene=e,t.scene.visible=!1,b2e.forEach(function(u){var c=new pd.Group;t.scene.add(c),t[u](c)});var l=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new wo({k:1e-6}).to({k:1},600).easing(qs.Quadratic.Out).onUpdate(function(p){var y=p.k;return t.scene.scale.set(y,y,y)}).start());var c=new pd.Vector3(0,1,0);t.tweenGroup.add(new wo({rot:Math.PI*2}).to({rot:0},1200).easing(qs.Quintic.Out).onUpdate(function(p){var y=p.rot;return t.scene.setRotationFromAxisAngle(c,y)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};o?t.globeLayer.onReady(l):l(),this._animationCycle()},update:function(e){}});function ece(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=(function(r){function s(){var a;gm(this,s);for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return a=mm(this,s,[].concat(l)),a.__kapsuleInstance=US(i,[].concat(Gi(t?[a]:[]),l)),a}return vm(s,r),ym(s)})(e);return Object.keys(i()).forEach(function(r){return n.prototype[r]=function(){var s,a=(s=this.__kapsuleInstance)[r].apply(s,arguments);return a===this.__kapsuleInstance?this:a}}),n}var tce=window.THREE?window.THREE:{Group:sa},wO=ece(J2e,tce.Group,!0),Wy={exports:{}},A1={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JR;function nce(){return JR||(JR=1,A1.ConcurrentRoot=1,A1.ContinuousEventPriority=8,A1.DefaultEventPriority=32,A1.DiscreteEventPriority=2,A1.IdleEventPriority=268435456,A1.LegacyRoot=0,A1.NoEventPriority=0),A1}var eC;function ice(){return eC||(eC=1,Wy.exports=nce()),Wy.exports}var Od=ice(),jy={exports:{}},Xy={},Yy={exports:{}},Qy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function rce(){if(tC)return Qy;tC=1;var i=k_();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,r=i.useEffect,s=i.useLayoutEffect,a=i.useDebugValue;function o(p,y){var _=y(),b=n({inst:{value:_,getSnapshot:y}}),w=b[0].inst,E=b[1];return s(function(){w.value=_,w.getSnapshot=y,l(w)&&E({inst:w})},[p,_,y]),r(function(){return l(w)&&E({inst:w}),p(function(){l(w)&&E({inst:w})})},[p]),a(_),_}function l(p){var y=p.getSnapshot;p=p.value;try{var _=y();return!t(p,_)}catch{return!0}}function u(p,y){return y()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Qy.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:c,Qy}var nC;function sce(){return nC||(nC=1,Yy.exports=rce()),Yy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC;function ace(){if(iC)return Xy;iC=1;var i=k_(),e=sce();function t(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=i.useRef,a=i.useEffect,o=i.useMemo,l=i.useDebugValue;return Xy.useSyncExternalStoreWithSelector=function(u,c,p,y,_){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=o(function(){function M(O){if(!P){if(P=!0,D=O,O=y(O),_!==void 0&&w.hasValue){var z=w.value;if(_(z,O))return B=z}return B=O}if(z=B,n(D,O))return z;var q=y(O);return _!==void 0&&_(z,q)?(D=O,z):(D=O,B=q)}var P=!1,D,B,U=p===void 0?null:p;return[function(){return M(c())},U===null?void 0:function(){return M(U())}]},[c,p,y,_]);var E=r(u,b[0],b[1]);return a(function(){w.hasValue=!0,w.value=E},[E]),l(E),E},Xy}var rC;function oce(){return rC||(rC=1,jy.exports=ace()),jy.exports}var lce=oce();const uce=q_(lce),sC=i=>{let e;const t=new Set,n=(u,c)=>{const p=typeof u=="function"?u(e):u;if(!Object.is(p,e)){const y=e;e=c??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(_=>_(e,y))}},r=()=>e,o={setState:n,getState:r,getInitialState:()=>l,subscribe:u=>(t.add(u),()=>t.delete(u))},l=e=i(n,r,o);return o},cce=(i=>i?sC(i):sC),{useSyncExternalStoreWithSelector:hce}=uce,fce=i=>i;function dce(i,e=fce,t){const n=hce(i.subscribe,i.getState,i.getInitialState,e,t);return hV.useDebugValue(n),n}const aC=(i,e)=>{const t=cce(i),n=(r,s=e)=>dce(t,r,s);return Object.assign(n,t),n},Ace=((i,e)=>i?aC(i,e):aC);var $y={exports:{}},Ky={exports:{}},Zy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function pce(){return oC||(oC=1,(function(i){function e(X,re){var se=X.length;X.push(re);e:for(;0<se;){var Ae=se-1>>>1,Se=X[Ae];if(0<r(Se,re))X[Ae]=re,X[se]=Se,se=Ae;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var re=X[0],se=X.pop();if(se!==re){X[0]=se;e:for(var Ae=0,Se=X.length,Ce=Se>>>1;Ae<Ce;){var Ye=2*(Ae+1)-1,it=X[Ye],pt=Ye+1,yt=X[pt];if(0>r(it,se))pt<Se&&0>r(yt,it)?(X[Ae]=yt,X[pt]=se,Ae=pt):(X[Ae]=it,X[Ye]=se,Ae=Ye);else if(pt<Se&&0>r(yt,se))X[Ae]=yt,X[pt]=se,Ae=pt;else break e}}return re}function r(X,re){var se=X.sortIndex-re.sortIndex;return se!==0?se:X.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,p=null,y=3,_=!1,b=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var re=t(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=X)n(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(u)}}function B(X){if(w=!1,D(X),!b)if(t(l)!==null)b=!0,ie();else{var re=t(u);re!==null&&ee(B,re.startTime-X)}}var U=!1,O=-1,z=5,q=-1;function F(){return!(i.unstable_now()-q<z)}function G(){if(U){var X=i.unstable_now();q=X;var re=!0;try{e:{b=!1,w&&(w=!1,M(O),O=-1),_=!0;var se=y;try{t:{for(D(X),p=t(l);p!==null&&!(p.expirationTime>X&&F());){var Ae=p.callback;if(typeof Ae=="function"){p.callback=null,y=p.priorityLevel;var Se=Ae(p.expirationTime<=X);if(X=i.unstable_now(),typeof Se=="function"){p.callback=Se,D(X),re=!0;break t}p===t(l)&&n(l),D(X)}else n(l);p=t(l)}if(p!==null)re=!0;else{var Ce=t(u);Ce!==null&&ee(B,Ce.startTime-X),re=!1}}break e}finally{p=null,y=se,_=!1}re=void 0}}finally{re?j():U=!1}}}var j;if(typeof P=="function")j=function(){P(G)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=G,j=function(){K.postMessage(null)}}else j=function(){E(G,0)};function ie(){U||(U=!0,j())}function ee(X,re){O=E(function(){X(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,ie())},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(X){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var se=y;y=re;try{return X()}finally{y=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=y;y=X;try{return re()}finally{y=se}},i.unstable_scheduleCallback=function(X,re,se){var Ae=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ae+se:Ae):se=Ae,X){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,X={id:c++,callback:re,priorityLevel:X,startTime:se,expirationTime:Se,sortIndex:-1},se>Ae?(X.sortIndex=se,e(u,X),t(l)===null&&X===t(u)&&(w?(M(O),O=-1):w=!0,ee(B,se-Ae))):(X.sortIndex=Se,e(l,X),b||_||(b=!0,ie())),X},i.unstable_shouldYield=F,i.unstable_wrapCallback=function(X){var re=y;return function(){var se=y;y=re;try{return X.apply(this,arguments)}finally{y=se}}}})(Jy)),Jy}var lC;function mce(){return lC||(lC=1,Zy.exports=pce()),Zy.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function gce(){return uC||(uC=1,(function(i){i.exports=function(e){function t(A,g,T,N){return new Pm(A,g,T,N)}function n(){}function r(A){var g="https://react.dev/errors/"+A;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+A+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(A){return A===null||typeof A!="object"?null:(A=v&&A[v]||A["@@iterator"],typeof A=="function"?A:null)}function a(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===x?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case lt:return"Fragment";case Jl:return"Portal";case Q3:return"Profiler";case St:return"StrictMode";case Lo:return"Suspense";case $3:return"SuspenseList"}if(typeof A=="object")switch(A.$$typeof){case lo:return(A.displayName||"Context")+".Provider";case m2:return(A._context.displayName||"Context")+".Consumer";case il:var g=A.render;return A=A.displayName,A||(A=g.displayName||g.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case Io:return g=A.displayName||null,g!==null?g:a(A.type)||"Memo";case h:g=A._payload,A=A._init;try{return a(A(g))}catch{}}return null}function o(A){if(R===void 0)try{throw Error()}catch(T){var g=T.stack.trim().match(/\n( *(at )?)/);R=g&&g[1]||"",C=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+R+A+C}function l(A,g){if(!A||L)return"";L=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var N={DetermineComponentFrameRoot:function(){try{if(g){var Wt=function(){throw Error()};if(Object.defineProperty(Wt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Wt,[])}catch(Kn){var Kt=Kn}Reflect.construct(A,[],Wt)}else{try{Wt.call()}catch(Kn){Kt=Kn}A.call(Wt.prototype)}}else{try{throw Error()}catch(Kn){Kt=Kn}(Wt=A())&&typeof Wt.catch=="function"&&Wt.catch(function(){})}}catch(Kn){if(Kn&&Kt&&typeof Kn.stack=="string")return[Kn.stack,Kt.stack]}return[null,null]}};N.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(N.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(N.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var H=N.DetermineComponentFrameRoot(),oe=H[0],ye=H[1];if(oe&&ye){var Ie=oe.split(`
`),st=ye.split(`
`);for(I=N=0;N<Ie.length&&!Ie[N].includes("DetermineComponentFrameRoot");)N++;for(;I<st.length&&!st[I].includes("DetermineComponentFrameRoot");)I++;if(N===Ie.length||I===st.length)for(N=Ie.length-1,I=st.length-1;1<=N&&0<=I&&Ie[N]!==st[I];)I--;for(;1<=N&&0<=I;N--,I--)if(Ie[N]!==st[I]){if(N!==1||I!==1)do if(N--,I--,0>I||Ie[N]!==st[I]){var Bt=`
`+Ie[N].replace(" at new "," at ");return A.displayName&&Bt.includes("<anonymous>")&&(Bt=Bt.replace("<anonymous>",A.displayName)),Bt}while(1<=N&&0<=I);break}}}finally{L=!1,Error.prepareStackTrace=T}return(T=A?A.displayName||A.name:"")?o(T):""}function u(A){switch(A.tag){case 26:case 27:case 5:return o(A.type);case 16:return o("Lazy");case 13:return o("Suspense");case 19:return o("SuspenseList");case 0:case 15:return A=l(A.type,!1),A;case 11:return A=l(A.type.render,!1),A;case 1:return A=l(A.type,!0),A;default:return""}}function c(A){try{var g="";do g+=u(A),A=A.return;while(A);return g}catch(T){return`
Error generating stack: `+T.message+`
`+T.stack}}function p(A){var g=A,T=A;if(A.alternate)for(;g.return;)g=g.return;else{A=g;do g=A,(g.flags&4098)!==0&&(T=g.return),A=g.return;while(A)}return g.tag===3?T:null}function y(A){if(p(A)!==A)throw Error(r(188))}function _(A){var g=A.alternate;if(!g){if(g=p(A),g===null)throw Error(r(188));return g!==A?null:A}for(var T=A,N=g;;){var I=T.return;if(I===null)break;var H=I.alternate;if(H===null){if(N=I.return,N!==null){T=N;continue}break}if(I.child===H.child){for(H=I.child;H;){if(H===T)return y(I),A;if(H===N)return y(I),g;H=H.sibling}throw Error(r(188))}if(T.return!==N.return)T=I,N=H;else{for(var oe=!1,ye=I.child;ye;){if(ye===T){oe=!0,T=I,N=H;break}if(ye===N){oe=!0,N=I,T=H;break}ye=ye.sibling}if(!oe){for(ye=H.child;ye;){if(ye===T){oe=!0,T=H,N=I;break}if(ye===N){oe=!0,N=H,T=I;break}ye=ye.sibling}if(!oe)throw Error(r(189))}}if(T.alternate!==N)throw Error(r(190))}if(T.tag!==3)throw Error(r(188));return T.stateNode.current===T?A:g}function b(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(g=b(A),g!==null)return g;A=A.sibling}return null}function w(A){var g=A.tag;if(g===5||g===26||g===27||g===6)return A;for(A=A.child;A!==null;){if(A.tag!==4&&(g=w(A),g!==null))return g;A=A.sibling}return null}function E(A){return{current:A}}function M(A){0>Z3||(A.current=Im[Z3],Im[Z3]=null,Z3--)}function P(A,g){Z3++,Im[Z3]=A.current,A.current=g}function D(A){return A>>>=0,A===0?32:31-(QF(A)/$F|0)|0}function B(A){var g=A&42;if(g!==0)return g;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function U(A,g){var T=A.pendingLanes;if(T===0)return 0;var N=0,I=A.suspendedLanes,H=A.pingedLanes,oe=A.warmLanes;A=A.finishedLanes!==0;var ye=T&134217727;return ye!==0?(T=ye&~I,T!==0?N=B(T):(H&=ye,H!==0?N=B(H):A||(oe=ye&~oe,oe!==0&&(N=B(oe))))):(ye=T&~I,ye!==0?N=B(ye):H!==0?N=B(H):A||(oe=T&~oe,oe!==0&&(N=B(oe)))),N===0?0:g!==0&&g!==N&&(g&I)===0&&(I=N&-N,oe=g&-g,I>=oe||I===32&&(oe&4194176)!==0)?g:N}function O(A,g){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&g)===0}function z(A,g){switch(A){case 1:case 2:case 4:case 8:return g+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q(){var A=Af;return Af<<=1,(Af&4194176)===0&&(Af=128),A}function F(){var A=pf;return pf<<=1,(pf&62914560)===0&&(pf=4194304),A}function G(A){for(var g=[],T=0;31>T;T++)g.push(A);return g}function j(A,g){A.pendingLanes|=g,g!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function $(A,g,T,N,I,H){var oe=A.pendingLanes;A.pendingLanes=T,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=T,A.entangledLanes&=T,A.errorRecoveryDisabledLanes&=T,A.shellSuspendCounter=0;var ye=A.entanglements,Ie=A.expirationTimes,st=A.hiddenUpdates;for(T=oe&~T;0<T;){var Bt=31-uo(T),Wt=1<<Bt;ye[Bt]=0,Ie[Bt]=-1;var Kt=st[Bt];if(Kt!==null)for(st[Bt]=null,Bt=0;Bt<Kt.length;Bt++){var Kn=Kt[Bt];Kn!==null&&(Kn.lane&=-536870913)}T&=~Wt}N!==0&&K(A,N,0),H!==0&&I===0&&A.tag!==0&&(A.suspendedLanes|=H&~(oe&~g))}function K(A,g,T){A.pendingLanes|=g,A.suspendedLanes&=~g;var N=31-uo(g);A.entangledLanes|=g,A.entanglements[N]=A.entanglements[N]|1073741824|T&4194218}function ie(A,g){var T=A.entangledLanes|=g;for(A=A.entanglements;T;){var N=31-uo(T),I=1<<N;I&g|A[N]&g&&(A[N]|=g),T&=~I}}function ee(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function X(A){if(co&&typeof co.onCommitFiberRoot=="function")try{co.onCommitFiberRoot(Q8,A,void 0,(A.current.flags&128)===128)}catch{}}function re(A){if(typeof tV=="function"&&nV(A),co&&typeof co.setStrictMode=="function")try{co.setStrictMode(Q8,A)}catch{}}function se(A,g){return A===g&&(A!==0||1/A===1/g)||A!==A&&g!==g}function Ae(A,g){if(typeof A=="object"&&A!==null){var T=cT.get(A);return T!==void 0?T:(g={value:A,source:g,stack:c(g)},cT.set(A,g),g)}return{value:A,source:g,stack:c(g)}}function Se(A,g){e4[t4++]=yf,e4[t4++]=gf,gf=A,yf=g}function Ce(A,g,T){Oo[Fo++]=e1,Oo[Fo++]=t1,Oo[Fo++]=y2,y2=A;var N=e1;A=t1;var I=32-uo(N)-1;N&=~(1<<I),T+=1;var H=32-uo(g)+I;if(30<H){var oe=I-I%5;H=(N&(1<<oe)-1).toString(32),N>>=oe,I-=oe,e1=1<<32-uo(g)+I|T<<I|N,t1=H+A}else e1=1<<H|T<<I|N,t1=A}function Ye(A){A.return!==null&&(Se(A,1),Ce(A,1,0))}function it(A){for(;A===gf;)gf=e4[--t4],e4[t4]=null,yf=e4[--t4],e4[t4]=null;for(;A===y2;)y2=Oo[--Fo],Oo[Fo]=null,t1=Oo[--Fo],Oo[Fo]=null,e1=Oo[--Fo],Oo[Fo]=null}function pt(A,g){P(ru,g),P($8,A),P(Ps,null),A=fe(g),M(Ps),P(Ps,A)}function yt(){M(Ps),M($8),M(ru)}function Oe(A){A.memoizedState!==null&&P(vf,A);var g=Ps.current,T=_e(g,A.type);g!==T&&(P($8,A),P(Ps,T))}function Xe(A){$8.current===A&&(M(Ps),M($8)),vf.current===A&&(M(vf),Nn?g2._currentValue=K3:g2._currentValue2=K3)}function Tt(A){var g=Error(r(418,""));throw pe(Ae(g,A)),Fm}function Ft(A,g){if(!ct)throw Error(r(175));PF(A.stateNode,A.type,A.memoizedProps,g,A)||Tt(A)}function Pt(A){for(ma=A.return;ma;)switch(ma.tag){case 3:case 27:rl=!0;return;case 5:case 13:rl=!1;return;default:ma=ma.return}}function ln(A){if(!ct||A!==ma)return!1;if(!Ei)return Pt(A),Ei=!0,!1;var g=!1;if(Qs?A.tag!==3&&A.tag!==27&&(A.tag!==5||JS(A.type)&&!mt(A.type,A.memoizedProps))&&(g=!0):A.tag!==3&&(A.tag!==5||JS(A.type)&&!mt(A.type,A.memoizedProps))&&(g=!0),g&&$s&&Tt(A),Pt(A),A.tag===13){if(!ct)throw Error(r(316));if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));$s=LF(A)}else $s=ma?KS(A.stateNode):null;return!0}function Dn(){ct&&($s=ma=null,Ei=!1)}function pe(A){T0===null?T0=[A]:T0.push(A)}function Je(){for(var A=n4,g=Vm=n4=0;g<A;){var T=Vo[g];Vo[g++]=null;var N=Vo[g];Vo[g++]=null;var I=Vo[g];Vo[g++]=null;var H=Vo[g];if(Vo[g++]=null,N!==null&&I!==null){var oe=N.pending;oe===null?I.next=I:(I.next=oe.next,oe.next=I),N.pending=I}H!==0&&xt(T,I,H)}}function et(A,g,T,N){Vo[n4++]=A,Vo[n4++]=g,Vo[n4++]=T,Vo[n4++]=N,Vm|=N,A.lanes|=N,A=A.alternate,A!==null&&(A.lanes|=N)}function tt(A,g,T,N){return et(A,g,T,N),ft(A)}function ke(A,g){return et(A,null,null,g),ft(A)}function xt(A,g,T){A.lanes|=T;var N=A.alternate;N!==null&&(N.lanes|=T);for(var I=!1,H=A.return;H!==null;)H.childLanes|=T,N=H.alternate,N!==null&&(N.childLanes|=T),H.tag===22&&(A=H.stateNode,A===null||A._visibility&1||(I=!0)),A=H,H=H.return;I&&g!==null&&A.tag===3&&(H=A.stateNode,I=31-uo(T),H=H.hiddenUpdates,A=H[I],A===null?H[I]=[g]:A.push(g),g.lane=T|536870912)}function ft(A){if(50<sh)throw sh=0,tg=null,Error(r(185));for(var g=A.return;g!==null;)A=g,g=A.return;return A.tag===3?A.stateNode:null}function wt(A){A!==i4&&A.next===null&&(i4===null?_f=i4=A:i4=i4.next=A),xf=!0,zm||(zm=!0,We(Sn))}function cn(A,g){if(!Gm&&xf){Gm=!0;do for(var T=!1,N=_f;N!==null;){if(A!==0){var I=N.pendingLanes;if(I===0)var H=0;else{var oe=N.suspendedLanes,ye=N.pingedLanes;H=(1<<31-uo(42|A)+1)-1,H&=I&~(oe&~ye),H=H&201326677?H&201326677|1:H?H|2:0}H!==0&&(T=!0,Le(N,H))}else H=_i,H=U(N,N===rr?H:0),(H&3)===0||O(N,H)||(T=!0,Le(N,H));N=N.next}while(T);Gm=!1}}function Sn(){xf=zm=!1;var A=0;r4!==0&&(df()&&(A=r4),r4=0);for(var g=S0(),T=null,N=_f;N!==null;){var I=N.next,H=de(N,g);H===0?(N.next=null,T===null?_f=I:T.next=I,I===null&&(i4=T)):(T=N,(A!==0||(H&3)!==0)&&(xf=!0)),N=I}cn(A)}function de(A,g){for(var T=A.suspendedLanes,N=A.pingedLanes,I=A.expirationTimes,H=A.pendingLanes&-62914561;0<H;){var oe=31-uo(H),ye=1<<oe,Ie=I[oe];Ie===-1?((ye&T)===0||(ye&N)!==0)&&(I[oe]=z(ye,g)):Ie<=g&&(A.expiredLanes|=ye),H&=~ye}if(g=rr,T=_i,T=U(A,A===g?T:0),N=A.callbackNode,T===0||A===g&&sr===2||A.cancelPendingCommit!==null)return N!==null&&N!==null&&Um(N),A.callbackNode=null,A.callbackPriority=0;if((T&3)===0||O(A,T)){if(g=T&-T,g===A.callbackPriority)return g;switch(N!==null&&Um(N),ee(T)){case 2:case 8:T=JF;break;case 32:T=Om;break;case 268435456:T=eV;break;default:T=Om}return N=J.bind(null,A),T=mf(T,N),A.callbackPriority=g,A.callbackNode=T,g}return N!==null&&N!==null&&Um(N),A.callbackPriority=2,A.callbackNode=null,2}function J(A,g){var T=A.callbackNode;if(el()&&A.callbackNode!==T)return null;var N=_i;return N=U(A,A===rr?N:0),N===0?null:(rf(A,N,g),de(A,S0()),A.callbackNode!=null&&A.callbackNode===T?J.bind(null,A):null)}function Le(A,g){if(el())return null;rf(A,g,!0)}function We(A){ZO?JO(function(){(Wi&6)!==0?mf(uT,A):A()}):mf(uT,A)}function ht(){return r4===0&&(r4=q()),r4}function Qe(A,g){if(K8===null){var T=K8=[];qm=0,s4=ht(),a4={status:"pending",value:void 0,then:function(N){T.push(N)}}}return qm++,g.then(nn,nn),g}function nn(){if(--qm===0&&K8!==null){a4!==null&&(a4.status="fulfilled");var A=K8;K8=null,s4=0,a4=null;for(var g=0;g<A.length;g++)(0,A[g])()}}function Ct(A,g){var T=[],N={status:"pending",value:null,reason:null,then:function(I){T.push(I)}};return A.then(function(){N.status="fulfilled",N.value=g;for(var I=0;I<T.length;I++)(0,T[I])(g)},function(I){for(N.status="rejected",N.reason=I,I=0;I<T.length;I++)(0,T[I])(void 0)}),N}function Zt(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function en(A,g){A=A.updateQueue,g.updateQueue===A&&(g.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function At(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Lt(A,g,T){var N=A.updateQueue;if(N===null)return null;if(N=N.shared,(Wi&2)!==0){var I=N.pending;return I===null?g.next=g:(g.next=I.next,I.next=g),N.pending=g,g=ft(A),xt(A,null,T),g}return et(A,N,g,T),ft(A)}function dn(A,g,T){if(g=g.updateQueue,g!==null&&(g=g.shared,(T&4194176)!==0)){var N=g.lanes;N&=A.pendingLanes,T|=N,g.lanes=T,ie(A,T)}}function ge(A,g){var T=A.updateQueue,N=A.alternate;if(N!==null&&(N=N.updateQueue,T===N)){var I=null,H=null;if(T=T.firstBaseUpdate,T!==null){do{var oe={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};H===null?I=H=oe:H=H.next=oe,T=T.next}while(T!==null);H===null?I=H=g:H=H.next=g}else I=H=g;T={baseState:N.baseState,firstBaseUpdate:I,lastBaseUpdate:H,shared:N.shared,callbacks:N.callbacks},A.updateQueue=T;return}A=T.lastBaseUpdate,A===null?T.firstBaseUpdate=g:A.next=g,T.lastBaseUpdate=g}function Ue(){if(km){var A=a4;if(A!==null)throw A}}function Mt(A,g,T,N){km=!1;var I=A.updateQueue;su=!1;var H=I.firstBaseUpdate,oe=I.lastBaseUpdate,ye=I.shared.pending;if(ye!==null){I.shared.pending=null;var Ie=ye,st=Ie.next;Ie.next=null,oe===null?H=st:oe.next=st,oe=Ie;var Bt=A.alternate;Bt!==null&&(Bt=Bt.updateQueue,ye=Bt.lastBaseUpdate,ye!==oe&&(ye===null?Bt.firstBaseUpdate=st:ye.next=st,Bt.lastBaseUpdate=Ie))}if(H!==null){var Wt=I.baseState;oe=0,Bt=st=Ie=null,ye=H;do{var Kt=ye.lane&-536870913,Kn=Kt!==ye.lane;if(Kn?(_i&Kt)===Kt:(N&Kt)===Kt){Kt!==0&&Kt===s4&&(km=!0),Bt!==null&&(Bt=Bt.next={lane:0,tag:ye.tag,payload:ye.payload,callback:null,next:null});e:{var qo=A,ah=ye;Kt=g;var w2=T;switch(ah.tag){case 1:if(qo=ah.payload,typeof qo=="function"){Wt=qo.call(w2,Wt,Kt);break e}Wt=qo;break e;case 3:qo.flags=qo.flags&-65537|128;case 0:if(qo=ah.payload,Kt=typeof qo=="function"?qo.call(w2,Wt,Kt):qo,Kt==null)break e;Wt=wr({},Wt,Kt);break e;case 2:su=!0}}Kt=ye.callback,Kt!==null&&(A.flags|=64,Kn&&(A.flags|=8192),Kn=I.callbacks,Kn===null?I.callbacks=[Kt]:Kn.push(Kt))}else Kn={lane:Kt,tag:ye.tag,payload:ye.payload,callback:ye.callback,next:null},Bt===null?(st=Bt=Kn,Ie=Wt):Bt=Bt.next=Kn,oe|=Kt;if(ye=ye.next,ye===null){if(ye=I.shared.pending,ye===null)break;Kn=ye,ye=Kn.next,Kn.next=null,I.lastBaseUpdate=Kn,I.shared.pending=null}}while(!0);Bt===null&&(Ie=Wt),I.baseState=Ie,I.firstBaseUpdate=st,I.lastBaseUpdate=Bt,H===null&&(I.shared.lanes=0),lu|=oe,A.lanes=oe,A.memoizedState=Wt}}function le(A,g){if(typeof A!="function")throw Error(r(191,A));A.call(g)}function ut(A,g){var T=A.callbacks;if(T!==null)for(A.callbacks=null,A=0;A<T.length;A++)le(T[A],g)}function bt(A,g){if(ho(A,g))return!0;if(typeof A!="object"||A===null||typeof g!="object"||g===null)return!1;var T=Object.keys(A),N=Object.keys(g);if(T.length!==N.length)return!1;for(N=0;N<T.length;N++){var I=T[N];if(!iV.call(g,I)||!ho(A[I],g[I]))return!1}return!0}function Gt(A){return A=A.status,A==="fulfilled"||A==="rejected"}function vt(){}function at(A,g,T){switch(T=A[T],T===void 0?A.push(g):T!==g&&(g.then(vt,vt),g=T),g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,A===Z8?Error(r(483)):A;default:if(typeof g.status=="string")g.then(vt,vt);else{if(A=rr,A!==null&&100<A.shellSuspendCounter)throw Error(r(482));A=g,A.status="pending",A.then(function(N){if(g.status==="pending"){var I=g;I.status="fulfilled",I.value=N}},function(N){if(g.status==="pending"){var I=g;I.status="rejected",I.reason=N}})}switch(g.status){case"fulfilled":return g.value;case"rejected":throw A=g.reason,A===Z8?Error(r(483)):A}throw o4=g,Z8}}function qt(){if(o4===null)throw Error(r(459));var A=o4;return o4=null,A}function hn(A){var g=J8;return J8+=1,l4===null&&(l4=[]),at(l4,A,g)}function ei(A,g){g=g.props.ref,A.ref=g!==void 0?g:null}function Hn(A,g){throw g.$$typeof===iu?Error(r(525)):(A=Object.prototype.toString.call(g),Error(r(31,A==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":A)))}function Er(A){var g=A._init;return g(A._payload)}function ur(A){function g(ze,Ne){if(A){var qe=ze.deletions;qe===null?(ze.deletions=[Ne],ze.flags|=16):qe.push(Ne)}}function T(ze,Ne){if(!A)return null;for(;Ne!==null;)g(ze,Ne),Ne=Ne.sibling;return null}function N(ze){for(var Ne=new Map;ze!==null;)ze.key!==null?Ne.set(ze.key,ze):Ne.set(ze.index,ze),ze=ze.sibling;return Ne}function I(ze,Ne){return ze=x0(ze,Ne),ze.index=0,ze.sibling=null,ze}function H(ze,Ne,qe){return ze.index=qe,A?(qe=ze.alternate,qe!==null?(qe=qe.index,qe<Ne?(ze.flags|=33554434,Ne):qe):(ze.flags|=33554434,Ne)):(ze.flags|=1048576,Ne)}function oe(ze){return A&&ze.alternate===null&&(ze.flags|=33554434),ze}function ye(ze,Ne,qe,Rt){return Ne===null||Ne.tag!==6?(Ne=W8(qe,ze.mode,Rt),Ne.return=ze,Ne):(Ne=I(Ne,qe),Ne.return=ze,Ne)}function Ie(ze,Ne,qe,Rt){var bn=qe.type;return bn===lt?Bt(ze,Ne,qe.props.children,Rt,qe.key):Ne!==null&&(Ne.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===h&&Er(bn)===Ne.type)?(Ne=I(Ne,qe.props),ei(Ne,qe),Ne.return=ze,Ne):(Ne=p2(qe.type,qe.key,qe.props,null,ze.mode,Rt),ei(Ne,qe),Ne.return=ze,Ne)}function st(ze,Ne,qe,Rt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==qe.containerInfo||Ne.stateNode.implementation!==qe.implementation?(Ne=j8(qe,ze.mode,Rt),Ne.return=ze,Ne):(Ne=I(Ne,qe.children||[]),Ne.return=ze,Ne)}function Bt(ze,Ne,qe,Rt,bn){return Ne===null||Ne.tag!==7?(Ne=Zl(qe,ze.mode,Rt,bn),Ne.return=ze,Ne):(Ne=I(Ne,qe),Ne.return=ze,Ne)}function Wt(ze,Ne,qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=W8(""+Ne,ze.mode,qe),Ne.return=ze,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case b0:return qe=p2(Ne.type,Ne.key,Ne.props,null,ze.mode,qe),ei(qe,Ne),qe.return=ze,qe;case Jl:return Ne=j8(Ne,ze.mode,qe),Ne.return=ze,Ne;case h:var Rt=Ne._init;return Ne=Rt(Ne._payload),Wt(ze,Ne,qe)}if(V(Ne)||s(Ne))return Ne=Zl(Ne,ze.mode,qe,null),Ne.return=ze,Ne;if(typeof Ne.then=="function")return Wt(ze,hn(Ne),qe);if(Ne.$$typeof===lo)return Wt(ze,y0(ze,Ne),qe);Hn(ze,Ne)}return null}function Kt(ze,Ne,qe,Rt){var bn=Ne!==null?Ne.key:null;if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return bn!==null?null:ye(ze,Ne,""+qe,Rt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case b0:return qe.key===bn?Ie(ze,Ne,qe,Rt):null;case Jl:return qe.key===bn?st(ze,Ne,qe,Rt):null;case h:return bn=qe._init,qe=bn(qe._payload),Kt(ze,Ne,qe,Rt)}if(V(qe)||s(qe))return bn!==null?null:Bt(ze,Ne,qe,Rt,null);if(typeof qe.then=="function")return Kt(ze,Ne,hn(qe),Rt);if(qe.$$typeof===lo)return Kt(ze,Ne,y0(ze,qe),Rt);Hn(ze,qe)}return null}function Kn(ze,Ne,qe,Rt,bn){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return ze=ze.get(qe)||null,ye(Ne,ze,""+Rt,bn);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case b0:return ze=ze.get(Rt.key===null?qe:Rt.key)||null,Ie(Ne,ze,Rt,bn);case Jl:return ze=ze.get(Rt.key===null?qe:Rt.key)||null,st(Ne,ze,Rt,bn);case h:var hr=Rt._init;return Rt=hr(Rt._payload),Kn(ze,Ne,qe,Rt,bn)}if(V(Rt)||s(Rt))return ze=ze.get(qe)||null,Bt(Ne,ze,Rt,bn,null);if(typeof Rt.then=="function")return Kn(ze,Ne,qe,hn(Rt),bn);if(Rt.$$typeof===lo)return Kn(ze,Ne,qe,y0(Ne,Rt),bn);Hn(Ne,Rt)}return null}function qo(ze,Ne,qe,Rt){for(var bn=null,hr=null,qn=Ne,wi=Ne=0,gs=null;qn!==null&&wi<qe.length;wi++){qn.index>wi?(gs=qn,qn=null):gs=qn.sibling;var Ri=Kt(ze,qn,qe[wi],Rt);if(Ri===null){qn===null&&(qn=gs);break}A&&qn&&Ri.alternate===null&&g(ze,qn),Ne=H(Ri,Ne,wi),hr===null?bn=Ri:hr.sibling=Ri,hr=Ri,qn=gs}if(wi===qe.length)return T(ze,qn),Ei&&Se(ze,wi),bn;if(qn===null){for(;wi<qe.length;wi++)qn=Wt(ze,qe[wi],Rt),qn!==null&&(Ne=H(qn,Ne,wi),hr===null?bn=qn:hr.sibling=qn,hr=qn);return Ei&&Se(ze,wi),bn}for(qn=N(qn);wi<qe.length;wi++)gs=Kn(qn,ze,wi,qe[wi],Rt),gs!==null&&(A&&gs.alternate!==null&&qn.delete(gs.key===null?wi:gs.key),Ne=H(gs,Ne,wi),hr===null?bn=gs:hr.sibling=gs,hr=gs);return A&&qn.forEach(function(cu){return g(ze,cu)}),Ei&&Se(ze,wi),bn}function ah(ze,Ne,qe,Rt){if(qe==null)throw Error(r(151));for(var bn=null,hr=null,qn=Ne,wi=Ne=0,gs=null,Ri=qe.next();qn!==null&&!Ri.done;wi++,Ri=qe.next()){qn.index>wi?(gs=qn,qn=null):gs=qn.sibling;var cu=Kt(ze,qn,Ri.value,Rt);if(cu===null){qn===null&&(qn=gs);break}A&&qn&&cu.alternate===null&&g(ze,qn),Ne=H(cu,Ne,wi),hr===null?bn=cu:hr.sibling=cu,hr=cu,qn=gs}if(Ri.done)return T(ze,qn),Ei&&Se(ze,wi),bn;if(qn===null){for(;!Ri.done;wi++,Ri=qe.next())Ri=Wt(ze,Ri.value,Rt),Ri!==null&&(Ne=H(Ri,Ne,wi),hr===null?bn=Ri:hr.sibling=Ri,hr=Ri);return Ei&&Se(ze,wi),bn}for(qn=N(qn);!Ri.done;wi++,Ri=qe.next())Ri=Kn(qn,ze,wi,Ri.value,Rt),Ri!==null&&(A&&Ri.alternate!==null&&qn.delete(Ri.key===null?wi:Ri.key),Ne=H(Ri,Ne,wi),hr===null?bn=Ri:hr.sibling=Ri,hr=Ri);return A&&qn.forEach(function(cV){return g(ze,cV)}),Ei&&Se(ze,wi),bn}function w2(ze,Ne,qe,Rt){if(typeof qe=="object"&&qe!==null&&qe.type===lt&&qe.key===null&&(qe=qe.props.children),typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case b0:e:{for(var bn=qe.key;Ne!==null;){if(Ne.key===bn){if(bn=qe.type,bn===lt){if(Ne.tag===7){T(ze,Ne.sibling),Rt=I(Ne,qe.props.children),Rt.return=ze,ze=Rt;break e}}else if(Ne.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===h&&Er(bn)===Ne.type){T(ze,Ne.sibling),Rt=I(Ne,qe.props),ei(Rt,qe),Rt.return=ze,ze=Rt;break e}T(ze,Ne);break}else g(ze,Ne);Ne=Ne.sibling}qe.type===lt?(Rt=Zl(qe.props.children,ze.mode,Rt,qe.key),Rt.return=ze,ze=Rt):(Rt=p2(qe.type,qe.key,qe.props,null,ze.mode,Rt),ei(Rt,qe),Rt.return=ze,ze=Rt)}return oe(ze);case Jl:e:{for(bn=qe.key;Ne!==null;){if(Ne.key===bn)if(Ne.tag===4&&Ne.stateNode.containerInfo===qe.containerInfo&&Ne.stateNode.implementation===qe.implementation){T(ze,Ne.sibling),Rt=I(Ne,qe.children||[]),Rt.return=ze,ze=Rt;break e}else{T(ze,Ne);break}else g(ze,Ne);Ne=Ne.sibling}Rt=j8(qe,ze.mode,Rt),Rt.return=ze,ze=Rt}return oe(ze);case h:return bn=qe._init,qe=bn(qe._payload),w2(ze,Ne,qe,Rt)}if(V(qe))return qo(ze,Ne,qe,Rt);if(s(qe)){if(bn=s(qe),typeof bn!="function")throw Error(r(150));return qe=bn.call(qe),ah(ze,Ne,qe,Rt)}if(typeof qe.then=="function")return w2(ze,Ne,hn(qe),Rt);if(qe.$$typeof===lo)return w2(ze,Ne,y0(ze,qe),Rt);Hn(ze,qe)}return typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint"?(qe=""+qe,Ne!==null&&Ne.tag===6?(T(ze,Ne.sibling),Rt=I(Ne,qe),Rt.return=ze,ze=Rt):(T(ze,Ne),Rt=W8(qe,ze.mode,Rt),Rt.return=ze,ze=Rt),oe(ze)):T(ze,Ne)}return function(ze,Ne,qe,Rt){try{J8=0;var bn=w2(ze,Ne,qe,Rt);return l4=null,bn}catch(qn){if(qn===Z8)throw qn;var hr=t(29,qn,null,ze.mode);return hr.lanes=Rt,hr.return=ze,hr}finally{}}}function Ve(A,g){A=s1,P(Sf,A),P(u4,g),s1=A|g.baseLanes}function nt(){P(Sf,s1),P(u4,u4.current)}function It(){s1=Sf.current,M(u4),M(Sf)}function rt(A){var g=A.alternate;P(ns,ns.current&1),P(zo,A),sl===null&&(g===null||u4.current!==null||g.memoizedState!==null)&&(sl=A)}function f(A){if(A.tag===22){if(P(ns,ns.current),P(zo,A),sl===null){var g=A.alternate;g!==null&&g.memoizedState!==null&&(sl=A)}}else Q()}function Q(){P(ns,ns.current),P(zo,zo.current)}function Gn(A){M(zo),sl===A&&(sl=null),M(ns)}function ii(A){for(var g=A;g!==null;){if(g.tag===13){var T=g.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||Dm(T)||Bm(T)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}function $n(){throw Error(r(321))}function Bn(A,g){if(g===null)return!1;for(var T=0;T<g.length&&T<A.length;T++)if(!ho(A[T],g[T]))return!1;return!0}function ri(A,g,T,N,I,H){return au=H,ai=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,S.H=A===null||A.memoizedState===null?x2:ou,_2=!1,H=T(N,I),_2=!1,c4&&(H=fi(g,T,N,I)),io(A),H}function io(A){S.H=al;var g=Hi!==null&&Hi.next!==null;if(au=0,Wr=Hi=ai=null,Tf=!1,eh=0,h4=null,g)throw Error(r(300));A===null||ps||(A=A.dependencies,A!==null&&N3(A)&&(ps=!0))}function fi(A,g,T,N){ai=A;var I=0;do{if(c4&&(h4=null),eh=0,c4=!1,25<=I)throw Error(r(301));if(I+=1,Wr=Hi=null,A.updateQueue!=null){var H=A.updateQueue;H.lastEffect=null,H.events=null,H.stores=null,H.memoCache!=null&&(H.memoCache.index=0)}S.H=b2,H=g(T,N)}while(c4);return H}function Wn(){var A=S.H,g=A.useState()[0];return g=typeof g.then=="function"?Ge(g):g,A=A.useState()[0],(Hi!==null?Hi.memoizedState:null)!==A&&(ai.flags|=1024),g}function cs(){var A=Mf!==0;return Mf=0,A}function X0(A,g,T){g.updateQueue=A.updateQueue,g.flags&=-2053,A.lanes&=~T}function ae(A){if(Tf){for(A=A.memoizedState;A!==null;){var g=A.queue;g!==null&&(g.pending=null),A=A.next}Tf=!1}au=0,Wr=Hi=ai=null,c4=!1,eh=Mf=0,h4=null}function Ee(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wr===null?ai.memoizedState=Wr=A:Wr=Wr.next=A,Wr}function Pe(){if(Hi===null){var A=ai.alternate;A=A!==null?A.memoizedState:null}else A=Hi.next;var g=Wr===null?ai.memoizedState:Wr.next;if(g!==null)Wr=g,Hi=A;else{if(A===null)throw ai.alternate===null?Error(r(467)):Error(r(310));Hi=A,A={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},Wr===null?ai.memoizedState=Wr=A:Wr=Wr.next=A}return Wr}function Ge(A){var g=eh;return eh+=1,h4===null&&(h4=[]),A=at(h4,A,g),g=ai,(Wr===null?g.memoizedState:Wr.next)===null&&(g=g.alternate,S.H=g===null||g.memoizedState===null?x2:ou),A}function we(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return Ge(A);if(A.$$typeof===lo)return ts(A)}throw Error(r(438,String(A)))}function _t(A){var g=null,T=ai.updateQueue;if(T!==null&&(g=T.memoCache),g==null){var N=ai.alternate;N!==null&&(N=N.updateQueue,N!==null&&(N=N.memoCache,N!=null&&(g={data:N.data.map(function(I){return I.slice()}),index:0})))}if(g==null&&(g={data:[],index:0}),T===null&&(T=Wm(),ai.updateQueue=T),T.memoCache=g,T=g.data[g.index],T===void 0)for(T=g.data[g.index]=Array(A),N=0;N<A;N++)T[N]=m;return g.index++,T}function Ut(A,g){return typeof g=="function"?g(A):g}function kt(A){var g=Pe();return ot(g,Hi,A)}function ot(A,g,T){var N=A.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=T;var I=A.baseQueue,H=N.pending;if(H!==null){if(I!==null){var oe=I.next;I.next=H.next,H.next=oe}g.baseQueue=I=H,N.pending=null}if(H=A.baseState,I===null)A.memoizedState=H;else{g=I.next;var ye=oe=null,Ie=null,st=g,Bt=!1;do{var Wt=st.lane&-536870913;if(Wt!==st.lane?(_i&Wt)===Wt:(au&Wt)===Wt){var Kt=st.revertLane;if(Kt===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),Wt===s4&&(Bt=!0);else if((au&Kt)===Kt){st=st.next,Kt===s4&&(Bt=!0);continue}else Wt={lane:0,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Ie===null?(ye=Ie=Wt,oe=H):Ie=Ie.next=Wt,ai.lanes|=Kt,lu|=Kt;Wt=st.action,_2&&T(H,Wt),H=st.hasEagerState?st.eagerState:T(H,Wt)}else Kt={lane:Wt,revertLane:st.revertLane,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null},Ie===null?(ye=Ie=Kt,oe=H):Ie=Ie.next=Kt,ai.lanes|=Wt,lu|=Wt;st=st.next}while(st!==null&&st!==g);if(Ie===null?oe=H:Ie.next=ye,!ho(H,A.memoizedState)&&(ps=!0,Bt&&(T=a4,T!==null)))throw T;A.memoizedState=H,A.baseState=oe,A.baseQueue=Ie,N.lastRenderedState=H}return I===null&&(N.lanes=0),[A.memoizedState,N.dispatch]}function Z(A){var g=Pe(),T=g.queue;if(T===null)throw Error(r(311));T.lastRenderedReducer=A;var N=T.dispatch,I=T.pending,H=g.memoizedState;if(I!==null){T.pending=null;var oe=I=I.next;do H=A(H,oe.action),oe=oe.next;while(oe!==I);ho(H,g.memoizedState)||(ps=!0),g.memoizedState=H,g.baseQueue===null&&(g.baseState=H),T.lastRenderedState=H}return[H,N]}function gt(A,g,T){var N=ai,I=Pe(),H=Ei;if(H){if(T===void 0)throw Error(r(407));T=T()}else T=g();var oe=!ho((Hi||I).memoizedState,T);if(oe&&(I.memoizedState=T,ps=!0),I=I.queue,h8(bi.bind(null,N,I,A),[A]),I.getSnapshot!==g||oe||Wr!==null&&Wr.memoizedState.tag&1){if(N.flags|=2048,js(9,ti.bind(null,N,I,T,g),{destroy:void 0},null),rr===null)throw Error(r(349));H||(au&60)!==0||mn(N,g,T)}return T}function mn(A,g,T){A.flags|=16384,A={getSnapshot:g,value:T},g=ai.updateQueue,g===null?(g=Wm(),ai.updateQueue=g,g.stores=[A]):(T=g.stores,T===null?g.stores=[A]:T.push(A))}function ti(A,g,T,N){g.value=T,g.getSnapshot=N,Ki(g)&&Bi(A)}function bi(A,g,T){return T(function(){Ki(g)&&Bi(A)})}function Ki(A){var g=A.getSnapshot;A=A.value;try{var T=g();return!ho(A,T)}catch{return!0}}function Bi(A){var g=ke(A,2);g!==null&&Rs(g,A,2)}function Y(A){var g=Ee();if(typeof A=="function"){var T=A;if(A=T(),_2){re(!0);try{T()}finally{re(!1)}}}return g.memoizedState=g.baseState=A,g.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ut,lastRenderedState:A},g}function xn(A,g,T,N){return A.baseState=T,ot(A,Hi,typeof N=="function"?N:Ut)}function Zi(A,g,T,N,I){if(n2(A))throw Error(r(485));if(A=g.action,A!==null){var H={payload:I,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){H.listeners.push(oe)}};S.T!==null?T(!0):H.isTransition=!1,N(H),T=g.pending,T===null?(H.next=g.pending=H,di(g,H)):(H.next=T.next,g.pending=T.next=H)}}function di(A,g){var T=g.action,N=g.payload,I=A.state;if(g.isTransition){var H=S.T,oe={};S.T=oe;try{var ye=T(I,N),Ie=S.S;Ie!==null&&Ie(oe,ye),hs(A,g,ye)}catch(st){Jr(A,g,st)}finally{S.T=H}}else try{H=T(I,N),hs(A,g,H)}catch(st){Jr(A,g,st)}}function hs(A,g,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(N){h0(A,g,N)},function(N){return Jr(A,g,N)}):h0(A,g,T)}function h0(A,g,T){g.status="fulfilled",g.value=T,f0(g),A.state=T,g=A.pending,g!==null&&(T=g.next,T===g?A.pending=null:(T=T.next,g.next=T,di(A,T)))}function Jr(A,g,T){var N=A.pending;if(A.pending=null,N!==null){N=N.next;do g.status="rejected",g.reason=T,f0(g),g=g.next;while(g!==N)}A.action=null}function f0(A){A=A.listeners;for(var g=0;g<A.length;g++)(0,A[g])()}function Vi(A,g){return g}function fs(A,g){if(Ei){var T=rr.formState;if(T!==null){e:{var N=ai;if(Ei){if($s){var I=TF($s,rl);if(I){$s=KS(I),N=MF(I);break e}}Tt(N)}N=!1}N&&(g=T[0])}}T=Ee(),T.memoizedState=T.baseState=g,N={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:g},T.queue=N,T=E3.bind(null,ai,N),N.dispatch=T,N=Y(!1);var H=w3.bind(null,ai,!1,N.queue);return N=Ee(),I={state:g,dispatch:null,action:A,pending:null},N.queue=I,T=Zi.bind(null,ai,I,H,T),I.dispatch=T,N.memoizedState=A,[g,T,!1]}function ir(A){var g=Pe();return Ai(g,Hi,A)}function Ai(A,g,T){g=ot(A,g,Vi)[0],A=kt(Ut)[0],g=typeof g=="object"&&g!==null&&typeof g.then=="function"?Ge(g):g;var N=Pe(),I=N.queue,H=I.dispatch;return T!==N.memoizedState&&(ai.flags|=2048,js(9,ds.bind(null,I,T),{destroy:void 0},null)),[g,H,A]}function ds(A,g){A.action=g}function jl(A){var g=Pe(),T=Hi;if(T!==null)return Ai(g,T,A);Pe(),g=g.memoizedState,T=Pe();var N=T.queue.dispatch;return T.memoizedState=A,[g,N,!1]}function js(A,g,T,N){return A={tag:A,create:g,inst:T,deps:N,next:null},g=ai.updateQueue,g===null&&(g=Wm(),ai.updateQueue=g),T=g.lastEffect,T===null?g.lastEffect=A.next=A:(N=T.next,T.next=A,A.next=N,g.lastEffect=A),A}function _3(){return Pe().memoizedState}function x3(A,g,T,N){var I=Ee();ai.flags|=A,I.memoizedState=js(1|g,T,{destroy:void 0},N===void 0?null:N)}function e2(A,g,T,N){var I=Pe();N=N===void 0?null:N;var H=I.memoizedState.inst;Hi!==null&&N!==null&&Bn(N,Hi.memoizedState.deps)?I.memoizedState=js(g,T,H,N):(ai.flags|=A,I.memoizedState=js(1|g,T,H,N))}function B7(A,g){x3(8390656,8,A,g)}function h8(A,g){e2(2048,8,A,g)}function L7(A,g){return e2(4,2,A,g)}function ki(A,g){return e2(4,4,A,g)}function b3(A,g){if(typeof g=="function"){A=A();var T=g(A);return function(){typeof T=="function"?T():g(null)}}if(g!=null)return A=A(),g.current=A,function(){g.current=null}}function f8(A,g,T){T=T!=null?T.concat([A]):null,e2(4,4,b3.bind(null,g,A),T)}function d8(){}function I7(A,g){var T=Pe();g=g===void 0?null:g;var N=T.memoizedState;return g!==null&&Bn(g,N[1])?N[0]:(T.memoizedState=[A,g],A)}function U7(A,g){var T=Pe();g=g===void 0?null:g;var N=T.memoizedState;if(g!==null&&Bn(g,N[1]))return N[0];if(N=A(),_2){re(!0);try{A()}finally{re(!1)}}return T.memoizedState=[N,g],N}function S3(A,g,T){return T===void 0||(au&1073741824)!==0?A.memoizedState=g:(A.memoizedState=T,A=nf(),ai.lanes|=A,lu|=A,T)}function T3(A,g,T,N){return ho(T,g)?T:u4.current!==null?(A=S3(A,T,N),ho(A,g)||(ps=!0),A):(au&42)===0?(ps=!0,A.memoizedState=T):(A=nf(),ai.lanes|=A,lu|=A,g)}function M3(A,g,T,N,I){var H=pi();pn(H!==0&&8>H?H:8);var oe=S.T,ye={};S.T=ye,w3(A,!1,g,T);try{var Ie=I(),st=S.S;if(st!==null&&st(ye,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var Bt=Ct(Ie,N);t2(A,g,Bt,Aa(A))}else t2(A,g,N,Aa(A))}catch(Wt){t2(A,g,{then:function(){},status:"rejected",reason:Wt},Aa())}finally{pn(H),S.T=oe}}function O7(A){var g=A.memoizedState;if(g!==null)return g;g={memoizedState:K3,baseState:K3,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ut,lastRenderedState:K3},next:null};var T={};return g.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ut,lastRenderedState:T},next:null},A.memoizedState=g,A=A.alternate,A!==null&&(A.memoizedState=g),g}function A8(){return ts(g2)}function F7(){return Pe().memoizedState}function p8(){return Pe().memoizedState}function xm(A){for(var g=A.return;g!==null;){switch(g.tag){case 24:case 3:var T=Aa();A=At(T);var N=Lt(g,A,T);N!==null&&(Rs(N,g,T),dn(N,g,T)),g={cache:o2()},A.payload=g;return}g=g.return}}function m8(A,g,T){var N=Aa();T={lane:N,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null},n2(A)?g8(g,T):(T=tt(A,g,T,N),T!==null&&(Rs(T,A,N),V7(T,g,N)))}function E3(A,g,T){var N=Aa();t2(A,g,T,N)}function t2(A,g,T,N){var I={lane:N,revertLane:0,action:T,hasEagerState:!1,eagerState:null,next:null};if(n2(A))g8(g,I);else{var H=A.alternate;if(A.lanes===0&&(H===null||H.lanes===0)&&(H=g.lastRenderedReducer,H!==null))try{var oe=g.lastRenderedState,ye=H(oe,T);if(I.hasEagerState=!0,I.eagerState=ye,ho(ye,oe))return et(A,g,I,0),rr===null&&Je(),!1}catch{}finally{}if(T=tt(A,g,I,N),T!==null)return Rs(T,A,N),V7(T,g,N),!0}return!1}function w3(A,g,T,N){if(N={lane:2,revertLane:ht(),action:N,hasEagerState:!1,eagerState:null,next:null},n2(A)){if(g)throw Error(r(479))}else g=tt(A,T,N,2),g!==null&&Rs(g,A,2)}function n2(A){var g=A.alternate;return A===ai||g!==null&&g===ai}function g8(A,g){c4=Tf=!0;var T=A.pending;T===null?g.next=g:(g.next=T.next,T.next=g),A.pending=g}function V7(A,g,T){if((T&4194176)!==0){var N=g.lanes;N&=A.pendingLanes,T|=N,g.lanes=T,ie(A,T)}}function y8(A,g,T,N){g=A.memoizedState,T=T(N,g),T=T==null?g:wr({},g,T),A.memoizedState=T,A.lanes===0&&(A.updateQueue.baseState=T)}function z7(A,g,T,N,I,H,oe){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(N,H,oe):g.prototype&&g.prototype.isPureReactComponent?!bt(T,N)||!bt(I,H):!0}function G7(A,g,T,N){A=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(T,N),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(T,N),g.state!==A&&jm.enqueueReplaceState(g,g.state,null)}function yr(A,g){var T=g;if("ref"in g){T={};for(var N in g)N!=="ref"&&(T[N]=g[N])}if(A=A.defaultProps){T===g&&(T=wr({},T));for(var I in A)T[I]===void 0&&(T[I]=A[I])}return T}function Po(A,g){try{var T=A.onUncaughtError;T(g.value,{componentStack:g.stack})}catch(N){setTimeout(function(){throw N})}}function As(A,g,T){try{var N=A.onCaughtError;N(T.value,{componentStack:T.stack,errorBoundary:g.tag===1?g.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function i2(A,g,T){return T=At(T),T.tag=3,T.payload={element:null},T.callback=function(){Po(A,g)},T}function v8(A){return A=At(A),A.tag=3,A}function r2(A,g,T,N){var I=T.type.getDerivedStateFromError;if(typeof I=="function"){var H=N.value;A.payload=function(){return I(H)},A.callback=function(){As(g,T,N)}}var oe=T.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(A.callback=function(){As(g,T,N),typeof I!="function"&&(uu===null?uu=new Set([this]):uu.add(this));var ye=N.stack;this.componentDidCatch(N.value,{componentStack:ye!==null?ye:""})})}function bm(A,g,T,N,I){if(T.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){if(g=T.alternate,g!==null&&m0(g,T,I,!0),T=zo.current,T!==null){switch(T.tag){case 13:return sl===null?A2():T.alternate===null&&Nr===0&&(Nr=3),T.flags&=-257,T.flags|=65536,T.lanes=I,N===bf?T.flags|=16384:(g=T.updateQueue,g===null?T.updateQueue=new Set([N]):g.add(N),k8(A,N,I)),!1;case 22:return T.flags|=65536,N===bf?T.flags|=16384:(g=T.updateQueue,g===null?(g={transitions:null,markerInstances:null,retryQueue:new Set([N])},T.updateQueue=g):(T=g.retryQueue,T===null?g.retryQueue=new Set([N]):T.add(N)),k8(A,N,I)),!1}throw Error(r(435,T.tag))}return k8(A,N,I),A2(),!1}if(Ei)return g=zo.current,g!==null?((g.flags&65536)===0&&(g.flags|=256),g.flags|=65536,g.lanes=I,N!==Fm&&(A=Error(r(422),{cause:N}),pe(Ae(A,T)))):(N!==Fm&&(g=Error(r(423),{cause:N}),pe(Ae(g,T))),A=A.current.alternate,A.flags|=65536,I&=-I,A.lanes|=I,N=Ae(N,T),I=i2(A.stateNode,N,I),ge(A,I),Nr!==4&&(Nr=2)),!1;var H=Error(r(520),{cause:N});if(H=Ae(H,T),nh===null?nh=[H]:nh.push(H),Nr!==4&&(Nr=2),g===null)return!0;N=Ae(N,T),T=g;do{switch(T.tag){case 3:return T.flags|=65536,A=I&-I,T.lanes|=A,A=i2(T.stateNode,N,A),ge(T,A),!1;case 1:if(g=T.type,H=T.stateNode,(T.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(uu===null||!uu.has(H))))return T.flags|=65536,I&=-I,T.lanes|=I,I=v8(I),r2(I,A,T,N),ge(T,I),!1}T=T.return}while(T!==null);return!1}function es(A,g,T,N){g.child=A===null?hT(g,null,T,N):v2(g,A.child,T,N)}function q7(A,g,T,N,I){T=T.render;var H=g.ref;if("ref"in N){var oe={};for(var ye in N)ye!=="ref"&&(oe[ye]=N[ye])}else oe=N;return g0(g),N=ri(A,g,T,oe,H,I),ye=cs(),A!==null&&!ps?(X0(A,g,I),A0(A,g,I)):(Ei&&ye&&Ye(g),g.flags|=1,es(A,g,N,I),g.child)}function _8(A,g,T,N,I){if(A===null){var H=T.type;return typeof H=="function"&&!X3(H)&&H.defaultProps===void 0&&T.compare===null?(g.tag=15,g.type=H,s2(A,g,H,N,I)):(A=p2(T.type,null,N,g,g.mode,I),A.ref=g.ref,A.return=g,g.child=A)}if(H=A.child,!E8(A,I)){var oe=H.memoizedProps;if(T=T.compare,T=T!==null?T:bt,T(oe,N)&&A.ref===g.ref)return A0(A,g,I)}return g.flags|=1,A=x0(H,N),A.ref=g.ref,A.return=g,g.child=A}function s2(A,g,T,N,I){if(A!==null){var H=A.memoizedProps;if(bt(H,N)&&A.ref===g.ref)if(ps=!1,g.pendingProps=N=H,E8(A,I))(A.flags&131072)!==0&&(ps=!0);else return g.lanes=A.lanes,A0(A,g,I)}return X1(A,g,T,N,I)}function Y0(A,g,T){var N=g.pendingProps,I=N.children,H=(g.stateNode._pendingVisibility&2)!==0,oe=A!==null?A.memoizedState:null;if(j1(A,g),N.mode==="hidden"||H){if((g.flags&128)!==0){if(N=oe!==null?oe.baseLanes|T:T,A!==null){for(I=g.child=A.child,H=0;I!==null;)H=H|I.lanes|I.childLanes,I=I.sibling;g.childLanes=H&~N}else g.childLanes=0,g.child=null;return x8(A,g,N,T)}if((T&536870912)!==0)g.memoizedState={baseLanes:0,cachePool:null},A!==null&&l2(g,oe!==null?oe.cachePool:null),oe!==null?Ve(g,oe):nt(),f(g);else return g.lanes=g.childLanes=536870912,x8(A,g,oe!==null?oe.baseLanes|T:T,T)}else oe!==null?(l2(g,oe.cachePool),Ve(g,oe),Q(),g.memoizedState=null):(A!==null&&l2(g,null),nt(),Q());return es(A,g,I,T),g.child}function x8(A,g,T,N){var I=C8();return I=I===null?null:{parent:Nn?Rr._currentValue:Rr._currentValue2,pool:I},g.memoizedState={baseLanes:T,cachePool:I},A!==null&&l2(g,null),nt(),f(g),A!==null&&m0(A,g,N,!0),null}function j1(A,g){var T=g.ref;if(T===null)A!==null&&A.ref!==null&&(g.flags|=2097664);else{if(typeof T!="function"&&typeof T!="object")throw Error(r(284));(A===null||A.ref!==T)&&(g.flags|=2097664)}}function X1(A,g,T,N,I){return g0(g),T=ri(A,g,T,N,void 0,I),N=cs(),A!==null&&!ps?(X0(A,g,I),A0(A,g,I)):(Ei&&N&&Ye(g),g.flags|=1,es(A,g,T,I),g.child)}function Q0(A,g,T,N,I,H){return g0(g),g.updateQueue=null,T=fi(g,N,T,I),io(A),N=cs(),A!==null&&!ps?(X0(A,g,H),A0(A,g,H)):(Ei&&N&&Ye(g),g.flags|=1,es(A,g,T,H),g.child)}function d0(A,g,T,N,I){if(g0(g),g.stateNode===null){var H=J3,oe=T.contextType;typeof oe=="object"&&oe!==null&&(H=ts(oe)),H=new T(N,H),g.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,H.updater=jm,g.stateNode=H,H._reactInternals=g,H=g.stateNode,H.props=N,H.state=g.memoizedState,H.refs={},Zt(g),oe=T.contextType,H.context=typeof oe=="object"&&oe!==null?ts(oe):J3,H.state=g.memoizedState,oe=T.getDerivedStateFromProps,typeof oe=="function"&&(y8(g,T,oe,N),H.state=g.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(oe=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),oe!==H.state&&jm.enqueueReplaceState(H,H.state,null),Mt(g,N,H,I),Ue(),H.state=g.memoizedState),typeof H.componentDidMount=="function"&&(g.flags|=4194308),N=!0}else if(A===null){H=g.stateNode;var ye=g.memoizedProps,Ie=yr(T,ye);H.props=Ie;var st=H.context,Bt=T.contextType;oe=J3,typeof Bt=="object"&&Bt!==null&&(oe=ts(Bt));var Wt=T.getDerivedStateFromProps;Bt=typeof Wt=="function"||typeof H.getSnapshotBeforeUpdate=="function",ye=g.pendingProps!==ye,Bt||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(ye||st!==oe)&&G7(g,H,N,oe),su=!1;var Kt=g.memoizedState;H.state=Kt,Mt(g,N,H,I),Ue(),st=g.memoizedState,ye||Kt!==st||su?(typeof Wt=="function"&&(y8(g,T,Wt,N),st=g.memoizedState),(Ie=su||z7(g,T,Ie,N,Kt,st,oe))?(Bt||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount()),typeof H.componentDidMount=="function"&&(g.flags|=4194308)):(typeof H.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=N,g.memoizedState=st),H.props=N,H.state=st,H.context=oe,N=Ie):(typeof H.componentDidMount=="function"&&(g.flags|=4194308),N=!1)}else{H=g.stateNode,en(A,g),oe=g.memoizedProps,Bt=yr(T,oe),H.props=Bt,Wt=g.pendingProps,Kt=H.context,st=T.contextType,Ie=J3,typeof st=="object"&&st!==null&&(Ie=ts(st)),ye=T.getDerivedStateFromProps,(st=typeof ye=="function"||typeof H.getSnapshotBeforeUpdate=="function")||typeof H.UNSAFE_componentWillReceiveProps!="function"&&typeof H.componentWillReceiveProps!="function"||(oe!==Wt||Kt!==Ie)&&G7(g,H,N,Ie),su=!1,Kt=g.memoizedState,H.state=Kt,Mt(g,N,H,I),Ue();var Kn=g.memoizedState;oe!==Wt||Kt!==Kn||su||A!==null&&A.dependencies!==null&&N3(A.dependencies)?(typeof ye=="function"&&(y8(g,T,ye,N),Kn=g.memoizedState),(Bt=su||z7(g,T,Bt,N,Kt,Kn,Ie)||A!==null&&A.dependencies!==null&&N3(A.dependencies))?(st||typeof H.UNSAFE_componentWillUpdate!="function"&&typeof H.componentWillUpdate!="function"||(typeof H.componentWillUpdate=="function"&&H.componentWillUpdate(N,Kn,Ie),typeof H.UNSAFE_componentWillUpdate=="function"&&H.UNSAFE_componentWillUpdate(N,Kn,Ie)),typeof H.componentDidUpdate=="function"&&(g.flags|=4),typeof H.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof H.componentDidUpdate!="function"||oe===A.memoizedProps&&Kt===A.memoizedState||(g.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||oe===A.memoizedProps&&Kt===A.memoizedState||(g.flags|=1024),g.memoizedProps=N,g.memoizedState=Kn),H.props=N,H.state=Kn,H.context=Ie,N=Bt):(typeof H.componentDidUpdate!="function"||oe===A.memoizedProps&&Kt===A.memoizedState||(g.flags|=4),typeof H.getSnapshotBeforeUpdate!="function"||oe===A.memoizedProps&&Kt===A.memoizedState||(g.flags|=1024),N=!1)}return H=N,j1(A,g),N=(g.flags&128)!==0,H||N?(H=g.stateNode,T=N&&typeof T.getDerivedStateFromError!="function"?null:H.render(),g.flags|=1,A!==null&&N?(g.child=v2(g,A.child,null,I),g.child=v2(g,null,T,I)):es(A,g,T,I),g.memoizedState=H.state,A=g.child):A=A0(A,g,I),A}function b8(A,g,T,N){return Dn(),g.flags|=256,es(A,g,T,N),g.child}function R3(A){return{baseLanes:A,cachePool:P3()}}function a2(A,g,T){return A=A!==null?A.childLanes&~T:0,g&&(A|=Go),A}function k7(A,g,T){var N=g.pendingProps,I=!1,H=(g.flags&128)!==0,oe;if((oe=H)||(oe=A!==null&&A.memoizedState===null?!1:(ns.current&2)!==0),oe&&(I=!0,g.flags&=-129),oe=(g.flags&32)!==0,g.flags&=-33,A===null){if(Ei){if(I?rt(g):Q(),Ei){var ye=$s,Ie;(Ie=ye)&&(ye=NF(ye,rl),ye!==null?(g.memoizedState={dehydrated:ye,treeContext:y2!==null?{id:e1,overflow:t1}:null,retryLane:536870912},Ie=t(18,null,null,0),Ie.stateNode=ye,Ie.return=g,g.child=Ie,ma=g,$s=null,Ie=!0):Ie=!1),Ie||Tt(g)}if(ye=g.memoizedState,ye!==null&&(ye=ye.dehydrated,ye!==null))return Bm(ye)?g.lanes=16:g.lanes=536870912,null;Gn(g)}return ye=N.children,N=N.fallback,I?(Q(),I=g.mode,ye=C3({mode:"hidden",children:ye},I),N=Zl(N,I,T,null),ye.return=g,N.return=g,ye.sibling=N,g.child=ye,I=g.child,I.memoizedState=R3(T),I.childLanes=a2(A,oe,T),g.memoizedState=Xm,N):(rt(g),S8(g,ye))}if(Ie=A.memoizedState,Ie!==null&&(ye=Ie.dehydrated,ye!==null)){if(H)g.flags&256?(rt(g),g.flags&=-257,g=T8(A,g,T)):g.memoizedState!==null?(Q(),g.child=A.child,g.flags|=128,g=null):(Q(),I=N.fallback,ye=g.mode,N=C3({mode:"visible",children:N.children},ye),I=Zl(I,ye,T,null),I.flags|=2,N.return=g,I.return=g,N.sibling=I,g.child=N,v2(g,A.child,null,T),N=g.child,N.memoizedState=R3(T),N.childLanes=a2(A,oe,T),g.memoizedState=Xm,g=I);else if(rt(g),Bm(ye))oe=bF(ye).digest,N=Error(r(419)),N.stack="",N.digest=oe,pe({value:N,source:null,stack:null}),g=T8(A,g,T);else if(ps||m0(A,g,T,!1),oe=(T&A.childLanes)!==0,ps||oe){if(oe=rr,oe!==null){if(N=T&-T,(N&42)!==0)N=1;else switch(N){case 2:N=1;break;case 8:N=4;break;case 32:N=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:N=64;break;case 268435456:N=134217728;break;default:N=0}if(N=(N&(oe.suspendedLanes|T))!==0?0:N,N!==0&&N!==Ie.retryLane)throw Ie.retryLane=N,ke(A,N),Rs(oe,A,N),dT}Dm(ye)||A2(),g=T8(A,g,T)}else Dm(ye)?(g.flags|=128,g.child=A.child,g=La.bind(null,A),SF(ye,g),g=null):(A=Ie.treeContext,ct&&($s=wF(ye),ma=g,Ei=!0,T0=null,rl=!1,A!==null&&(Oo[Fo++]=e1,Oo[Fo++]=t1,Oo[Fo++]=y2,e1=A.id,t1=A.overflow,y2=g)),g=S8(g,N.children),g.flags|=4096);return g}return I?(Q(),I=N.fallback,ye=g.mode,Ie=A.child,H=Ie.sibling,N=x0(Ie,{mode:"hidden",children:N.children}),N.subtreeFlags=Ie.subtreeFlags&31457280,H!==null?I=x0(H,I):(I=Zl(I,ye,T,null),I.flags|=2),I.return=g,N.return=g,N.sibling=I,g.child=N,N=I,I=g.child,ye=A.child.memoizedState,ye===null?ye=R3(T):(Ie=ye.cachePool,Ie!==null?(H=Nn?Rr._currentValue:Rr._currentValue2,Ie=Ie.parent!==H?{parent:H,pool:H}:Ie):Ie=P3(),ye={baseLanes:ye.baseLanes|T,cachePool:Ie}),I.memoizedState=ye,I.childLanes=a2(A,oe,T),g.memoizedState=Xm,N):(rt(g),T=A.child,A=T.sibling,T=x0(T,{mode:"visible",children:N.children}),T.return=g,T.sibling=null,A!==null&&(oe=g.deletions,oe===null?(g.deletions=[A],g.flags|=16):oe.push(A)),g.child=T,g.memoizedState=null,T)}function S8(A,g){return g=C3({mode:"visible",children:g},A.mode),g.return=A,A.child=g}function C3(A,g){return hf(A,g,0,null)}function T8(A,g,T){return v2(g,A.child,null,T),A=S8(g,g.pendingProps.children),A.flags|=2,g.memoizedState=null,A}function H7(A,g,T){A.lanes|=g;var N=A.alternate;N!==null&&(N.lanes|=g),w8(A.return,g,T)}function M8(A,g,T,N,I){var H=A.memoizedState;H===null?A.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:N,tail:T,tailMode:I}:(H.isBackwards=g,H.rendering=null,H.renderingStartTime=0,H.last=N,H.tail=T,H.tailMode=I)}function W7(A,g,T){var N=g.pendingProps,I=N.revealOrder,H=N.tail;if(es(A,g,N.children,T),N=ns.current,(N&2)!==0)N=N&1|2,g.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=g.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&H7(A,T,g);else if(A.tag===19)H7(A,T,g);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===g)break e;for(;A.sibling===null;){if(A.return===null||A.return===g)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}N&=1}switch(P(ns,N),I){case"forwards":for(T=g.child,I=null;T!==null;)A=T.alternate,A!==null&&ii(A)===null&&(I=T),T=T.sibling;T=I,T===null?(I=g.child,g.child=null):(I=T.sibling,T.sibling=null),M8(g,!1,I,T,H);break;case"backwards":for(T=null,I=g.child,g.child=null;I!==null;){if(A=I.alternate,A!==null&&ii(A)===null){g.child=I;break}A=I.sibling,I.sibling=T,T=I,I=A}M8(g,!0,T,null,H);break;case"together":M8(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function A0(A,g,T){if(A!==null&&(g.dependencies=A.dependencies),lu|=g.lanes,(T&g.childLanes)===0)if(A!==null){if(m0(A,g,T,!1),(T&g.childLanes)===0)return null}else return null;if(A!==null&&g.child!==A.child)throw Error(r(153));if(g.child!==null){for(A=g.child,T=x0(A,A.pendingProps),g.child=T,T.return=g;A.sibling!==null;)A=A.sibling,T=T.sibling=x0(A,A.pendingProps),T.return=g;T.sibling=null}return g.child}function E8(A,g){return(A.lanes&g)!==0?!0:(A=A.dependencies,!!(A!==null&&N3(A)))}function Sm(A,g,T){switch(g.tag){case 3:pt(g,g.stateNode.containerInfo),ro(g,Rr,A.memoizedState.cache),Dn();break;case 27:case 5:Oe(g);break;case 4:pt(g,g.stateNode.containerInfo);break;case 10:ro(g,g.type,g.memoizedProps.value);break;case 13:var N=g.memoizedState;if(N!==null)return N.dehydrated!==null?(rt(g),g.flags|=128,null):(T&g.child.childLanes)!==0?k7(A,g,T):(rt(g),A=A0(A,g,T),A!==null?A.sibling:null);rt(g);break;case 19:var I=(A.flags&128)!==0;if(N=(T&g.childLanes)!==0,N||(m0(A,g,T,!1),N=(T&g.childLanes)!==0),I){if(N)return W7(A,g,T);g.flags|=128}if(I=g.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),P(ns,ns.current),N)break;return null;case 22:case 23:return g.lanes=0,Y0(A,g,T);case 24:ro(g,Rr,A.memoizedState.cache)}return A0(A,g,T)}function j7(A,g,T){if(A!==null)if(A.memoizedProps!==g.pendingProps)ps=!0;else{if(!E8(A,T)&&(g.flags&128)===0)return ps=!1,Sm(A,g,T);ps=(A.flags&131072)!==0}else ps=!1,Ei&&(g.flags&1048576)!==0&&Ce(g,yf,g.index);switch(g.lanes=0,g.tag){case 16:e:{A=g.pendingProps;var N=g.elementType,I=N._init;if(N=I(N._payload),g.type=N,typeof N=="function")X3(N)?(A=yr(N,A),g.tag=1,g=d0(null,g,N,A,T)):(g.tag=0,g=X1(null,g,N,A,T));else{if(N!=null){if(I=N.$$typeof,I===il){g.tag=11,g=q7(null,g,N,A,T);break e}else if(I===Io){g.tag=14,g=_8(null,g,N,A,T);break e}}throw g=a(N)||N,Error(r(306,g,""))}}return g;case 0:return X1(A,g,g.type,g.pendingProps,T);case 1:return N=g.type,I=yr(N,g.pendingProps),d0(A,g,N,I,T);case 3:e:{if(pt(g,g.stateNode.containerInfo),A===null)throw Error(r(387));var H=g.pendingProps;I=g.memoizedState,N=I.element,en(A,g),Mt(g,H,null,T);var oe=g.memoizedState;if(H=oe.cache,ro(g,Rr,H),H!==I.cache&&R8(g,[Rr],T,!0),Ue(),H=oe.element,ct&&I.isDehydrated)if(I={element:H,isDehydrated:!1,cache:oe.cache},g.updateQueue.baseState=I,g.memoizedState=I,g.flags&256){g=b8(A,g,H,T);break e}else if(H!==N){N=Ae(Error(r(424)),g),pe(N),g=b8(A,g,H,T);break e}else for(ct&&($s=EF(g.stateNode.containerInfo),ma=g,Ei=!0,T0=null,rl=!0),T=hT(g,null,H,T),g.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(Dn(),H===N){g=A0(A,g,T);break e}es(A,g,H,T)}g=g.child}return g;case 26:if(Uo)return j1(A,g),A===null?(T=tT(g.type,null,g.pendingProps,null))?g.memoizedState=T:Ei||(g.stateNode=qF(g.type,g.pendingProps,ru.current,g)):g.memoizedState=tT(g.type,A.memoizedProps,g.pendingProps,A.memoizedState),null;case 27:if(Qs)return Oe(g),A===null&&Qs&&Ei&&(N=g.stateNode=oT(g.type,g.pendingProps,ru.current,Ps.current,!1),ma=g,rl=!0,$s=ZS(N)),N=g.pendingProps.children,A!==null||Ei?es(A,g,N,T):g.child=v2(g,null,N,T),j1(A,g),g.child;case 5:return A===null&&Ei&&(VF(g.type,g.pendingProps,Ps.current),(I=N=$s)&&(N=RF(N,g.type,g.pendingProps,rl),N!==null?(g.stateNode=N,ma=g,$s=ZS(N),rl=!1,I=!0):I=!1),I||Tt(g)),Oe(g),I=g.type,H=g.pendingProps,oe=A!==null?A.memoizedProps:null,N=H.children,mt(I,H)?N=null:oe!==null&&mt(I,oe)&&(g.flags|=32),g.memoizedState!==null&&(I=ri(A,g,Wn,null,null,T),Nn?g2._currentValue=I:g2._currentValue2=I),j1(A,g),es(A,g,N,T),g.child;case 6:return A===null&&Ei&&(zF(g.pendingProps,Ps.current),(A=T=$s)&&(T=CF(T,g.pendingProps,rl),T!==null?(g.stateNode=T,ma=g,$s=null,A=!0):A=!1),A||Tt(g)),null;case 13:return k7(A,g,T);case 4:return pt(g,g.stateNode.containerInfo),N=g.pendingProps,A===null?g.child=v2(g,null,N,T):es(A,g,N,T),g.child;case 11:return q7(A,g,g.type,g.pendingProps,T);case 7:return es(A,g,g.pendingProps,T),g.child;case 8:return es(A,g,g.pendingProps.children,T),g.child;case 12:return es(A,g,g.pendingProps.children,T),g.child;case 10:return N=g.pendingProps,ro(g,g.type,N.value),es(A,g,N.children,T),g.child;case 9:return I=g.type._context,N=g.pendingProps.children,g0(g),I=ts(I),N=N(I),g.flags|=1,es(A,g,N,T),g.child;case 14:return _8(A,g,g.type,g.pendingProps,T);case 15:return s2(A,g,g.type,g.pendingProps,T);case 19:return W7(A,g,T);case 22:return Y0(A,g,T);case 24:return g0(g),N=ts(Rr),A===null?(I=C8(),I===null&&(I=rr,H=o2(),I.pooledCache=H,H.refCount++,H!==null&&(I.pooledCacheLanes|=T),I=H),g.memoizedState={parent:N,cache:I},Zt(g),ro(g,Rr,I)):((A.lanes&T)!==0&&(en(A,g),Mt(g,null,null,T),Ue()),I=A.memoizedState,H=g.memoizedState,I.parent!==N?(I={parent:N,cache:N},g.memoizedState=I,g.lanes===0&&(g.memoizedState=g.updateQueue.baseState=I),ro(g,Rr,N)):(N=H.cache,ro(g,Rr,N),N!==I.cache&&R8(g,[Rr],T,!0))),es(A,g,g.pendingProps.children,T),g.child;case 29:throw g.pendingProps}throw Error(r(156,g.tag))}function ro(A,g,T){Nn?(P(Ef,g._currentValue),g._currentValue=T):(P(Ef,g._currentValue2),g._currentValue2=T)}function p0(A){var g=Ef.current;Nn?A._currentValue=g:A._currentValue2=g,M(Ef)}function w8(A,g,T){for(;A!==null;){var N=A.alternate;if((A.childLanes&g)!==g?(A.childLanes|=g,N!==null&&(N.childLanes|=g)):N!==null&&(N.childLanes&g)!==g&&(N.childLanes|=g),A===T)break;A=A.return}}function R8(A,g,T,N){var I=A.child;for(I!==null&&(I.return=A);I!==null;){var H=I.dependencies;if(H!==null){var oe=I.child;H=H.firstContext;e:for(;H!==null;){var ye=H;H=I;for(var Ie=0;Ie<g.length;Ie++)if(ye.context===g[Ie]){H.lanes|=T,ye=H.alternate,ye!==null&&(ye.lanes|=T),w8(H.return,T,A),N||(oe=null);break e}H=ye.next}}else if(I.tag===18){if(oe=I.return,oe===null)throw Error(r(341));oe.lanes|=T,H=oe.alternate,H!==null&&(H.lanes|=T),w8(oe,T,A),oe=null}else oe=I.child;if(oe!==null)oe.return=I;else for(oe=I;oe!==null;){if(oe===A){oe=null;break}if(I=oe.sibling,I!==null){I.return=oe.return,oe=I;break}oe=oe.return}I=oe}}function m0(A,g,T,N){A=null;for(var I=g,H=!1;I!==null;){if(!H){if((I.flags&524288)!==0)H=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var oe=I.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var ye=I.type;ho(I.pendingProps.value,oe.value)||(A!==null?A.push(ye):A=[ye])}}else if(I===vf.current){if(oe=I.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(A!==null?A.push(g2):A=[g2])}I=I.return}A!==null&&R8(g,A,T,N),g.flags|=262144}function N3(A){for(A=A.firstContext;A!==null;){var g=A.context;if(!ho(Nn?g._currentValue:g._currentValue2,A.memoizedValue))return!0;A=A.next}return!1}function g0(A){S2=A,n1=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function ts(A){return X7(S2,A)}function y0(A,g){return S2===null&&g0(A),X7(A,g)}function X7(A,g){var T=Nn?g._currentValue:g._currentValue2;if(g={context:g,memoizedValue:T,next:null},n1===null){if(A===null)throw Error(r(308));n1=g,A.dependencies={lanes:0,firstContext:g},A.flags|=524288}else n1=n1.next=g;return T}function o2(){return{controller:new sV,data:new Map,refCount:0}}function Y1(A){A.refCount--,A.refCount===0&&aV(oV,function(){A.controller.abort()})}function C8(){var A=T2.current;return A!==null?A:rr.pooledCache}function l2(A,g){g===null?P(T2,T2.current):P(T2,g.pool)}function P3(){var A=C8();return A===null?null:{parent:Nn?Rr._currentValue:Rr._currentValue2,pool:A}}function Ms(A){A.flags|=4}function D3(A,g){if(A!==null&&A.child===g.child)return!1;if((g.flags&16)!==0)return!0;for(A=g.child;A!==null;){if((A.flags&13878)!==0||(A.subtreeFlags&13878)!==0)return!0;A=A.sibling}return!1}function Xl(A,g,T,N){if(tn)for(T=g.child;T!==null;){if(T.tag===5||T.tag===6)Re(A,T.stateNode);else if(!(T.tag===4||Qs&&T.tag===27)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else if(Qt)for(var I=g.child;I!==null;){if(I.tag===5){var H=I.stateNode;T&&N&&(H=QS(H,I.type,I.memoizedProps)),Re(A,H)}else if(I.tag===6)H=I.stateNode,T&&N&&(H=$S(H,I.memoizedProps)),Re(A,H);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)H=I.child,H!==null&&(H.return=I),Xl(A,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===g)break;for(;I.sibling===null;){if(I.return===null||I.return===g)return;I=I.return}I.sibling.return=I.return,I=I.sibling}}function Ci(A,g,T,N){if(Qt)for(var I=g.child;I!==null;){if(I.tag===5){var H=I.stateNode;T&&N&&(H=QS(H,I.type,I.memoizedProps)),XS(A,H)}else if(I.tag===6)H=I.stateNode,T&&N&&(H=$S(H,I.memoizedProps)),XS(A,H);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)H=I.child,H!==null&&(H.return=I),Ci(A,I,!(I.memoizedProps!==null&&I.memoizedProps.mode==="manual"),!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===g)break;for(;I.sibling===null;){if(I.return===null||I.return===g)return;I=I.return}I.sibling.return=I.return,I=I.sibling}}function Y7(A,g){if(Qt&&D3(A,g)){A=g.stateNode;var T=A.containerInfo,N=jS();Ci(N,g,!1,!1),A.pendingChildren=N,Ms(g),xF(T,N)}}function B3(A,g,T,N){if(tn)A.memoizedProps!==N&&Ms(g);else if(Qt){var I=A.stateNode,H=A.memoizedProps;if((A=D3(A,g))||H!==N){var oe=Ps.current;H=_F(I,T,H,N,!A,null),H===I?g.stateNode=I:(xe(H,T,N,oe)&&Ms(g),g.stateNode=H,A?Xl(H,g,!1,!1):Ms(g))}else g.stateNode=I}}function L3(A,g,T){if(YO(g,T)){if(A.flags|=16777216,!kS(g,T))if(G8())A.flags|=8192;else throw o4=bf,Hm}else A.flags&=-16777217}function Q7(A,g){if(HF(g)){if(A.flags|=16777216,!aT(g))if(G8())A.flags|=8192;else throw o4=bf,Hm}else A.flags&=-16777217}function I3(A,g){g!==null&&(A.flags|=4),A.flags&16384&&(g=A.tag!==22?F():536870912,A.lanes|=g,A4|=g)}function u2(A,g){if(!Ei)switch(A.tailMode){case"hidden":g=A.tail;for(var T=null;g!==null;)g.alternate!==null&&(T=g),g=g.sibling;T===null?A.tail=null:T.sibling=null;break;case"collapsed":T=A.tail;for(var N=null;T!==null;)T.alternate!==null&&(N=T),T=T.sibling;N===null?g||A.tail===null?A.tail=null:A.tail.sibling=null:N.sibling=null}}function cr(A){var g=A.alternate!==null&&A.alternate.child===A.child,T=0,N=0;if(g)for(var I=A.child;I!==null;)T|=I.lanes|I.childLanes,N|=I.subtreeFlags&31457280,N|=I.flags&31457280,I.return=A,I=I.sibling;else for(I=A.child;I!==null;)T|=I.lanes|I.childLanes,N|=I.subtreeFlags,N|=I.flags,I.return=A,I=I.sibling;return A.subtreeFlags|=N,A.childLanes=T,g}function Xs(A,g,T){var N=g.pendingProps;switch(it(g),g.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(g),null;case 1:return cr(g),null;case 3:return T=g.stateNode,N=null,A!==null&&(N=A.memoizedState.cache),g.memoizedState.cache!==N&&(g.flags|=2048),p0(Rr),yt(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(A===null||A.child===null)&&(ln(g)?Ms(g):A===null||A.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,T0!==null&&(Bo(T0),T0=null))),Y7(A,g),cr(g),null;case 26:if(Uo){T=g.type;var I=g.memoizedState;return A===null?(Ms(g),I!==null?(cr(g),Q7(g,I)):(cr(g),L3(g,T,N))):I?I!==A.memoizedState?(Ms(g),cr(g),Q7(g,I)):(cr(g),g.flags&=-16777217):(tn?A.memoizedProps!==N&&Ms(g):B3(A,g,T,N),cr(g),L3(g,T,N)),null}case 27:if(Qs){if(Xe(g),T=ru.current,I=g.type,A!==null&&g.stateNode!=null)tn?A.memoizedProps!==N&&Ms(g):B3(A,g,I,N);else{if(!N){if(g.stateNode===null)throw Error(r(166));return cr(g),null}A=Ps.current,ln(g)?Ft(g,A):(A=oT(I,N,T,A,!0),g.stateNode=A,Ms(g))}return cr(g),null}case 5:if(Xe(g),T=g.type,A!==null&&g.stateNode!=null)B3(A,g,T,N);else{if(!N){if(g.stateNode===null)throw Error(r(166));return cr(g),null}A=Ps.current,ln(g)?Ft(g,A):(I=De(T,N,ru.current,A,g),Xl(I,g,!1,!1),g.stateNode=I,xe(I,T,N,A)&&Ms(g))}return cr(g),L3(g,g.type,g.pendingProps),null;case 6:if(A&&g.stateNode!=null)T=A.memoizedProps,tn?T!==N&&Ms(g):Qt&&(T!==N?(g.stateNode=sn(N,ru.current,Ps.current,g),Ms(g)):g.stateNode=A.stateNode);else{if(typeof N!="string"&&g.stateNode===null)throw Error(r(166));if(A=ru.current,T=Ps.current,ln(g)){if(!ct)throw Error(r(176));if(A=g.stateNode,T=g.memoizedProps,N=null,I=ma,I!==null)switch(I.tag){case 27:case 5:N=I.memoizedProps}DF(A,T,g,N)||Tt(g)}else g.stateNode=sn(N,A,T,g)}return cr(g),null;case 13:if(N=g.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(I=ln(g),N!==null&&N.dehydrated!==null){if(A===null){if(!I)throw Error(r(318));if(!ct)throw Error(r(344));if(I=g.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(r(317));BF(I,g)}else Dn(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;cr(g),I=!1}else T0!==null&&(Bo(T0),T0=null),I=!0;if(!I)return g.flags&256?(Gn(g),g):(Gn(g),null)}if(Gn(g),(g.flags&128)!==0)return g.lanes=T,g;if(T=N!==null,A=A!==null&&A.memoizedState!==null,T){N=g.child,I=null,N.alternate!==null&&N.alternate.memoizedState!==null&&N.alternate.memoizedState.cachePool!==null&&(I=N.alternate.memoizedState.cachePool.pool);var H=null;N.memoizedState!==null&&N.memoizedState.cachePool!==null&&(H=N.memoizedState.cachePool.pool),H!==I&&(N.flags|=2048)}return T!==A&&T&&(g.child.flags|=8192),I3(g,g.updateQueue),cr(g),null;case 4:return yt(),Y7(A,g),A===null&&Ni(g.stateNode.containerInfo),cr(g),null;case 10:return p0(g.type),cr(g),null;case 19:if(M(ns),I=g.memoizedState,I===null)return cr(g),null;if(N=(g.flags&128)!==0,H=I.rendering,H===null)if(N)u2(I,!1);else{if(Nr!==0||A!==null&&(A.flags&128)!==0)for(A=g.child;A!==null;){if(H=ii(A),H!==null){for(g.flags|=128,u2(I,!1),A=H.updateQueue,g.updateQueue=A,I3(g,A),g.subtreeFlags=0,A=T,T=g.child;T!==null;)H8(T,A),T=T.sibling;return P(ns,ns.current&1|2),g.child}A=A.sibling}I.tail!==null&&S0()>ih&&(g.flags|=128,N=!0,u2(I,!1),g.lanes=4194304)}else{if(!N)if(A=ii(H),A!==null){if(g.flags|=128,N=!0,A=A.updateQueue,g.updateQueue=A,I3(g,A),u2(I,!0),I.tail===null&&I.tailMode==="hidden"&&!H.alternate&&!Ei)return cr(g),null}else 2*S0()-I.renderingStartTime>ih&&T!==536870912&&(g.flags|=128,N=!0,u2(I,!1),g.lanes=4194304);I.isBackwards?(H.sibling=g.child,g.child=H):(A=I.last,A!==null?A.sibling=H:g.child=H,I.last=H)}return I.tail!==null?(g=I.tail,I.rendering=g,I.tail=g.sibling,I.renderingStartTime=S0(),g.sibling=null,A=ns.current,P(ns,N?A&1|2:A&1),g):(cr(g),null);case 22:case 23:return Gn(g),It(),N=g.memoizedState!==null,A!==null?A.memoizedState!==null!==N&&(g.flags|=8192):N&&(g.flags|=8192),N?(T&536870912)!==0&&(g.flags&128)===0&&(cr(g),g.subtreeFlags&6&&(g.flags|=8192)):cr(g),T=g.updateQueue,T!==null&&I3(g,T.retryQueue),T=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(T=A.memoizedState.cachePool.pool),N=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(N=g.memoizedState.cachePool.pool),N!==T&&(g.flags|=2048),A!==null&&M(T2),null;case 24:return T=null,A!==null&&(T=A.memoizedState.cache),g.memoizedState.cache!==T&&(g.flags|=2048),p0(Rr),cr(g),null;case 25:return null}throw Error(r(156,g.tag))}function N8(A,g){switch(it(g),g.tag){case 1:return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 3:return p0(Rr),yt(),A=g.flags,(A&65536)!==0&&(A&128)===0?(g.flags=A&-65537|128,g):null;case 26:case 27:case 5:return Xe(g),null;case 13:if(Gn(g),A=g.memoizedState,A!==null&&A.dehydrated!==null){if(g.alternate===null)throw Error(r(340));Dn()}return A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 19:return M(ns),null;case 4:return yt(),null;case 10:return p0(g.type),null;case 22:case 23:return Gn(g),It(),A!==null&&M(T2),A=g.flags,A&65536?(g.flags=A&-65537|128,g):null;case 24:return p0(Rr),null;case 25:return null;default:return null}}function $0(A,g){switch(it(g),g.tag){case 3:p0(Rr),yt();break;case 26:case 27:case 5:Xe(g);break;case 4:yt();break;case 13:Gn(g);break;case 19:M(ns);break;case 10:p0(g.type);break;case 22:case 23:Gn(g),It(),A!==null&&M(T2);break;case 24:p0(Rr)}}function c2(A,g){try{var T=g.updateQueue,N=T!==null?T.lastEffect:null;if(N!==null){var I=N.next;T=I;do{if((T.tag&A)===A){N=void 0;var H=T.create,oe=T.inst;N=H(),oe.destroy=N}T=T.next}while(T!==I)}}catch(ye){Rn(g,g.return,ye)}}function Do(A,g,T){try{var N=g.updateQueue,I=N!==null?N.lastEffect:null;if(I!==null){var H=I.next;N=H;do{if((N.tag&A)===A){var oe=N.inst,ye=oe.destroy;if(ye!==void 0){oe.destroy=void 0,I=g;var Ie=T;try{ye()}catch(st){Rn(I,Ie,st)}}}N=N.next}while(N!==H)}}catch(st){Rn(g,g.return,st)}}function $7(A){var g=A.updateQueue;if(g!==null){var T=A.stateNode;try{ut(g,T)}catch(N){Rn(A,A.return,N)}}}function fa(A,g,T){T.props=yr(A.type,A.memoizedProps),T.state=A.memoizedState;try{T.componentWillUnmount()}catch(N){Rn(A,g,N)}}function v0(A,g){try{var T=A.ref;if(T!==null){var N=A.stateNode;switch(A.tag){case 26:case 27:case 5:var I=ce(N);break;default:I=N}typeof T=="function"?A.refCleanup=T(I):T.current=I}}catch(H){Rn(A,g,H)}}function Es(A,g){var T=A.ref,N=A.refCleanup;if(T!==null)if(typeof N=="function")try{N()}catch(I){Rn(A,g,I)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(I){Rn(A,g,I)}else T.current=null}function Yl(A){var g=A.type,T=A.memoizedProps,N=A.stateNode;try{uF(N,g,T,A)}catch(I){Rn(A,A.return,I)}}function K0(A,g,T){try{cF(A.stateNode,A.type,T,g,A)}catch(N){Rn(A,A.return,N)}}function Ql(A){return A.tag===5||A.tag===3||(Uo?A.tag===26:!1)||(Qs?A.tag===27:!1)||A.tag===4}function P8(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||Ql(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&(!Qs||A.tag!==27)&&A.tag!==18;){if(A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function U3(A,g,T){var N=A.tag;if(N===5||N===6)A=A.stateNode,g?fF(T,A,g):oF(T,A);else if(!(N===4||Qs&&N===27)&&(A=A.child,A!==null))for(U3(A,g,T),A=A.sibling;A!==null;)U3(A,g,T),A=A.sibling}function O3(A,g,T){var N=A.tag;if(N===5||N===6)A=A.stateNode,g?hF(T,A,g):aF(T,A);else if(!(N===4||Qs&&N===27)&&(A=A.child,A!==null))for(O3(A,g,T),A=A.sibling;A!==null;)O3(A,g,T),A=A.sibling}function F3(A,g,T){A=A.containerInfo;try{YS(A,T)}catch(N){Rn(g,g.return,N)}}function Tm(A,g){for(Me(A.containerInfo),ms=g;ms!==null;)if(A=ms,g=A.child,(A.subtreeFlags&1028)!==0&&g!==null)g.return=A,ms=g;else for(;ms!==null;){A=ms;var T=A.alternate;switch(g=A.flags,A.tag){case 0:break;case 11:case 15:break;case 1:if((g&1024)!==0&&T!==null){g=void 0;var N=A,I=T.memoizedProps;T=T.memoizedState;var H=N.stateNode;try{var oe=yr(N.type,I,N.elementType===N.type);g=H.getSnapshotBeforeUpdate(oe,T),H.__reactInternalSnapshotBeforeUpdate=g}catch(ye){Rn(N,N.return,ye)}}break;case 3:(g&1024)!==0&&tn&&vF(A.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(r(163))}if(g=A.sibling,g!==null){g.return=A.return,ms=g;break}ms=A.return}return oe=mT,mT=!1,oe}function K7(A,g,T){var N=T.flags;switch(T.tag){case 0:case 11:case 15:_0(A,T),N&4&&c2(5,T);break;case 1:if(_0(A,T),N&4)if(A=T.stateNode,g===null)try{A.componentDidMount()}catch(ye){Rn(T,T.return,ye)}else{var I=yr(T.type,g.memoizedProps);g=g.memoizedState;try{A.componentDidUpdate(I,g,A.__reactInternalSnapshotBeforeUpdate)}catch(ye){Rn(T,T.return,ye)}}N&64&&$7(T),N&512&&v0(T,T.return);break;case 3:if(_0(A,T),N&64&&(N=T.updateQueue,N!==null)){if(A=null,T.child!==null)switch(T.child.tag){case 27:case 5:A=ce(T.child.stateNode);break;case 1:A=T.child.stateNode}try{ut(N,A)}catch(ye){Rn(T,T.return,ye)}}break;case 26:if(Uo){_0(A,T),N&512&&v0(T,T.return);break}case 27:case 5:_0(A,T),g===null&&N&4&&Yl(T),N&512&&v0(T,T.return);break;case 12:_0(A,T);break;case 13:_0(A,T),N&4&&Q1(A,T);break;case 22:if(I=T.memoizedState!==null||i1,!I){g=g!==null&&g.memoizedState!==null||Cr;var H=i1,oe=Cr;i1=I,(Cr=g)&&!oe?Z0(A,T,(T.subtreeFlags&8772)!==0):_0(A,T),i1=H,Cr=oe}N&512&&(T.memoizedProps.mode==="manual"?v0(T,T.return):Es(T,T.return));break;default:_0(A,T)}}function V3(A){var g=A.alternate;g!==null&&(A.alternate=null,V3(g)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(g=A.stateNode,g!==null&&XO(g)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function Da(A,g,T){for(T=T.child;T!==null;)h2(A,g,T),T=T.sibling}function h2(A,g,T){if(co&&typeof co.onCommitFiberUnmount=="function")try{co.onCommitFiberUnmount(Q8,T)}catch{}switch(T.tag){case 26:if(Uo){Cr||Es(T,g),Da(A,g,T),T.memoizedState?iT(T.memoizedState):T.stateNode&&sT(T.stateNode);break}case 27:if(Qs){Cr||Es(T,g);var N=jr,I=fo;jr=T.stateNode,Da(A,g,T),YF(T.stateNode),jr=N,fo=I;break}case 5:Cr||Es(T,g);case 6:if(tn){if(N=jr,I=fo,jr=null,Da(A,g,T),jr=N,fo=I,jr!==null)if(fo)try{AF(jr,T.stateNode)}catch(H){Rn(T,g,H)}else try{dF(jr,T.stateNode)}catch(H){Rn(T,g,H)}}else Da(A,g,T);break;case 18:tn&&jr!==null&&(fo?FF(jr,T.stateNode):OF(jr,T.stateNode));break;case 4:tn?(N=jr,I=fo,jr=T.stateNode.containerInfo,fo=!0,Da(A,g,T),jr=N,fo=I):(Qt&&F3(T.stateNode,T,jS()),Da(A,g,T));break;case 0:case 11:case 14:case 15:Cr||Do(2,T,g),Cr||Do(4,T,g),Da(A,g,T);break;case 1:Cr||(Es(T,g),N=T.stateNode,typeof N.componentWillUnmount=="function"&&fa(T,g,N)),Da(A,g,T);break;case 21:Da(A,g,T);break;case 22:Cr||Es(T,g),Cr=(N=Cr)||T.memoizedState!==null,Da(A,g,T),Cr=N;break;default:Da(A,g,T)}}function Q1(A,g){if(ct&&g.memoizedState===null&&(A=g.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{UF(A)}catch(T){Rn(g,g.return,T)}}function $1(A){switch(A.tag){case 13:case 19:var g=A.stateNode;return g===null&&(g=A.stateNode=new pT),g;case 22:return A=A.stateNode,g=A._retryCache,g===null&&(g=A._retryCache=new pT),g;default:throw Error(r(435,A.tag))}}function ws(A,g){var T=$1(A);g.forEach(function(N){var I=Cm.bind(null,A,N);T.has(N)||(T.add(N),N.then(I,I))})}function Ys(A,g){var T=g.deletions;if(T!==null)for(var N=0;N<T.length;N++){var I=T[N],H=A,oe=g;if(tn){var ye=oe;e:for(;ye!==null;){switch(ye.tag){case 27:case 5:jr=ye.stateNode,fo=!1;break e;case 3:jr=ye.stateNode.containerInfo,fo=!0;break e;case 4:jr=ye.stateNode.containerInfo,fo=!0;break e}ye=ye.return}if(jr===null)throw Error(r(160));h2(H,oe,I),jr=null,fo=!1}else h2(H,oe,I);H=I.alternate,H!==null&&(H.return=null),I.return=null}if(g.subtreeFlags&13878)for(g=g.child;g!==null;)K1(g,A),g=g.sibling}function K1(A,g){var T=A.alternate,N=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Ys(g,A),da(A),N&4&&(Do(3,A,A.return),c2(3,A),Do(5,A,A.return));break;case 1:Ys(g,A),da(A),N&512&&(Cr||T===null||Es(T,T.return)),N&64&&i1&&(A=A.updateQueue,A!==null&&(N=A.callbacks,N!==null&&(T=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=T===null?N:T.concat(N))));break;case 26:if(Uo){var I=M0;Ys(g,A),da(A),N&512&&(Cr||T===null||Es(T,T.return)),N&4&&(N=T!==null?T.memoizedState:null,g=A.memoizedState,T===null?g===null?A.stateNode===null?A.stateNode=GF(I,A.type,A.memoizedProps,A):rT(I,A.type,A.stateNode):A.stateNode=nT(I,g,A.memoizedProps):N!==g?(N===null?T.stateNode!==null&&sT(T.stateNode):iT(N),g===null?rT(I,A.type,A.stateNode):nT(I,g,A.memoizedProps)):g===null&&A.stateNode!==null&&K0(A,A.memoizedProps,T.memoizedProps));break}case 27:if(Qs&&N&4&&A.alternate===null){I=A.stateNode;var H=A.memoizedProps;try{jF(I),XF(A.type,H,I,A)}catch(Bt){Rn(A,A.return,Bt)}}case 5:if(Ys(g,A),da(A),N&512&&(Cr||T===null||Es(T,T.return)),tn){if(A.flags&32){g=A.stateNode;try{WS(g)}catch(Bt){Rn(A,A.return,Bt)}}N&4&&A.stateNode!=null&&(g=A.memoizedProps,K0(A,g,T!==null?T.memoizedProps:g)),N&1024&&(Ym=!0)}break;case 6:if(Ys(g,A),da(A),N&4&&tn){if(A.stateNode===null)throw Error(r(162));N=A.memoizedProps,T=T!==null?T.memoizedProps:N,g=A.stateNode;try{lF(g,T,N)}catch(Bt){Rn(A,A.return,Bt)}}break;case 3:if(Uo?(kF(),I=M0,M0=Lm(g.containerInfo),Ys(g,A),M0=I):Ys(g,A),da(A),N&4){if(tn&&ct&&T!==null&&T.memoizedState.isDehydrated)try{IF(g.containerInfo)}catch(Bt){Rn(A,A.return,Bt)}if(Qt){N=g.containerInfo,T=g.pendingChildren;try{YS(N,T)}catch(Bt){Rn(A,A.return,Bt)}}}Ym&&(Ym=!1,Z7(A));break;case 4:Uo?(T=M0,M0=Lm(A.stateNode.containerInfo),Ys(g,A),da(A),M0=T):(Ys(g,A),da(A)),N&4&&Qt&&F3(A.stateNode,A,A.stateNode.pendingChildren);break;case 12:Ys(g,A),da(A);break;case 13:Ys(g,A),da(A),A.child.flags&8192&&A.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(Zm=S0()),N&4&&(N=A.updateQueue,N!==null&&(A.updateQueue=null,ws(A,N)));break;case 22:N&512&&(Cr||T===null||Es(T,T.return)),I=A.memoizedState!==null;var oe=T!==null&&T.memoizedState!==null,ye=i1,Ie=Cr;if(i1=ye||I,Cr=Ie||oe,Ys(g,A),Cr=Ie,i1=ye,da(A),g=A.stateNode,g._current=A,g._visibility&=-3,g._visibility|=g._pendingVisibility&2,N&8192&&(g._visibility=I?g._visibility&-2:g._visibility|1,I&&(g=i1||Cr,T===null||oe||g||$l(A)),tn&&(A.memoizedProps===null||A.memoizedProps.mode!=="manual"))){e:if(T=null,tn)for(g=A;;){if(g.tag===5||Uo&&g.tag===26||Qs&&g.tag===27){if(T===null){oe=T=g;try{H=oe.stateNode,I?pF(H):gF(oe.stateNode,oe.memoizedProps)}catch(Bt){Rn(oe,oe.return,Bt)}}}else if(g.tag===6){if(T===null){oe=g;try{var st=oe.stateNode;I?mF(st):yF(st,oe.memoizedProps)}catch(Bt){Rn(oe,oe.return,Bt)}}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===A)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break e;for(;g.sibling===null;){if(g.return===null||g.return===A)break e;T===g&&(T=null),g=g.return}T===g&&(T=null),g.sibling.return=g.return,g=g.sibling}}N&4&&(N=A.updateQueue,N!==null&&(T=N.retryQueue,T!==null&&(N.retryQueue=null,ws(A,T))));break;case 19:Ys(g,A),da(A),N&4&&(N=A.updateQueue,N!==null&&(A.updateQueue=null,ws(A,N)));break;case 21:break;default:Ys(g,A),da(A)}}function da(A){var g=A.flags;if(g&2){try{if(tn&&(!Qs||A.tag!==27)){e:{for(var T=A.return;T!==null;){if(Ql(T)){var N=T;break e}T=T.return}throw Error(r(160))}switch(N.tag){case 27:if(Qs){var I=N.stateNode,H=P8(A);O3(A,H,I);break}case 5:var oe=N.stateNode;N.flags&32&&(WS(oe),N.flags&=-33);var ye=P8(A);O3(A,ye,oe);break;case 3:case 4:var Ie=N.stateNode.containerInfo,st=P8(A);U3(A,st,Ie);break;default:throw Error(r(161))}}}catch(Bt){Rn(A,A.return,Bt)}A.flags&=-3}g&4096&&(A.flags&=-4097)}function Z7(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var g=A;Z7(g),g.tag===5&&g.flags&1024&&KO(g.stateNode),A=A.sibling}}function _0(A,g){if(g.subtreeFlags&8772)for(g=g.child;g!==null;)K7(A,g.alternate,g),g=g.sibling}function $l(A){for(A=A.child;A!==null;){var g=A;switch(g.tag){case 0:case 11:case 14:case 15:Do(4,g,g.return),$l(g);break;case 1:Es(g,g.return);var T=g.stateNode;typeof T.componentWillUnmount=="function"&&fa(g,g.return,T),$l(g);break;case 26:case 27:case 5:Es(g,g.return),$l(g);break;case 22:Es(g,g.return),g.memoizedState===null&&$l(g);break;default:$l(g)}A=A.sibling}}function Z0(A,g,T){for(T=T&&(g.subtreeFlags&8772)!==0,g=g.child;g!==null;){var N=g.alternate,I=A,H=g,oe=H.flags;switch(H.tag){case 0:case 11:case 15:Z0(I,H,T),c2(4,H);break;case 1:if(Z0(I,H,T),N=H,I=N.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(st){Rn(N,N.return,st)}if(N=H,I=N.updateQueue,I!==null){var ye=N.stateNode;try{var Ie=I.shared.hiddenCallbacks;if(Ie!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Ie.length;I++)le(Ie[I],ye)}catch(st){Rn(N,N.return,st)}}T&&oe&64&&$7(H),v0(H,H.return);break;case 26:case 27:case 5:Z0(I,H,T),T&&N===null&&oe&4&&Yl(H),v0(H,H.return);break;case 12:Z0(I,H,T);break;case 13:Z0(I,H,T),T&&oe&4&&Q1(I,H);break;case 22:H.memoizedState===null&&Z0(I,H,T),v0(H,H.return);break;default:Z0(I,H,T)}g=g.sibling}}function D8(A,g){var T=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(T=A.memoizedState.cachePool.pool),A=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==T&&(A!=null&&A.refCount++,T!=null&&Y1(T))}function B8(A,g){A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Y1(A))}function so(A,g,T,N){if(g.subtreeFlags&10256)for(g=g.child;g!==null;)L8(A,g,T,N),g=g.sibling}function L8(A,g,T,N){var I=g.flags;switch(g.tag){case 0:case 11:case 15:so(A,g,T,N),I&2048&&c2(9,g);break;case 3:so(A,g,T,N),I&2048&&(A=null,g.alternate!==null&&(A=g.alternate.memoizedState.cache),g=g.memoizedState.cache,g!==A&&(g.refCount++,A!=null&&Y1(A)));break;case 12:if(I&2048){so(A,g,T,N),A=g.stateNode;try{var H=g.memoizedProps,oe=H.id,ye=H.onPostCommit;typeof ye=="function"&&ye(oe,g.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Ie){Rn(g,g.return,Ie)}}else so(A,g,T,N);break;case 23:break;case 22:H=g.stateNode,g.memoizedState!==null?H._visibility&4?so(A,g,T,N):f2(A,g):H._visibility&4?so(A,g,T,N):(H._visibility|=4,J0(A,g,T,N,(g.subtreeFlags&10256)!==0)),I&2048&&D8(g.alternate,g);break;case 24:so(A,g,T,N),I&2048&&B8(g.alternate,g);break;default:so(A,g,T,N)}}function J0(A,g,T,N,I){for(I=I&&(g.subtreeFlags&10256)!==0,g=g.child;g!==null;){var H=A,oe=g,ye=T,Ie=N,st=oe.flags;switch(oe.tag){case 0:case 11:case 15:J0(H,oe,ye,Ie,I),c2(8,oe);break;case 23:break;case 22:var Bt=oe.stateNode;oe.memoizedState!==null?Bt._visibility&4?J0(H,oe,ye,Ie,I):f2(H,oe):(Bt._visibility|=4,J0(H,oe,ye,Ie,I)),I&&st&2048&&D8(oe.alternate,oe);break;case 24:J0(H,oe,ye,Ie,I),I&&st&2048&&B8(oe.alternate,oe);break;default:J0(H,oe,ye,Ie,I)}g=g.sibling}}function f2(A,g){if(g.subtreeFlags&10256)for(g=g.child;g!==null;){var T=A,N=g,I=N.flags;switch(N.tag){case 22:f2(T,N),I&2048&&D8(N.alternate,N);break;case 24:f2(T,N),I&2048&&B8(N.alternate,N);break;default:f2(T,N)}g=g.sibling}}function Kl(A){if(A.subtreeFlags&f4)for(A=A.child;A!==null;)J7(A),A=A.sibling}function J7(A){switch(A.tag){case 26:Kl(A),A.flags&f4&&(A.memoizedState!==null?WF(M0,A.memoizedState,A.memoizedProps):HS(A.type,A.memoizedProps));break;case 5:Kl(A),A.flags&f4&&HS(A.type,A.memoizedProps);break;case 3:case 4:if(Uo){var g=M0;M0=Lm(A.stateNode.containerInfo),Kl(A),M0=g}else Kl(A);break;case 22:A.memoizedState===null&&(g=A.alternate,g!==null&&g.memoizedState!==null?(g=f4,f4=16777216,Kl(A),f4=g):Kl(A));break;default:Kl(A)}}function ef(A){var g=A.alternate;if(g!==null&&(A=g.child,A!==null)){g.child=null;do g=A.sibling,A.sibling=null,A=g;while(A!==null)}}function d2(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var T=0;T<g.length;T++){var N=g[T];ms=N,I8(N,A)}ef(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)tf(A),A=A.sibling}function tf(A){switch(A.tag){case 0:case 11:case 15:d2(A),A.flags&2048&&Do(9,A,A.return);break;case 3:d2(A);break;case 12:d2(A);break;case 22:var g=A.stateNode;A.memoizedState!==null&&g._visibility&4&&(A.return===null||A.return.tag!==13)?(g._visibility&=-5,z3(A)):d2(A);break;default:d2(A)}}function z3(A){var g=A.deletions;if((A.flags&16)!==0){if(g!==null)for(var T=0;T<g.length;T++){var N=g[T];ms=N,I8(N,A)}ef(A)}for(A=A.child;A!==null;){switch(g=A,g.tag){case 0:case 11:case 15:Do(8,g,g.return),z3(g);break;case 22:T=g.stateNode,T._visibility&4&&(T._visibility&=-5,z3(g));break;default:z3(g)}A=A.sibling}}function I8(A,g){for(;ms!==null;){var T=ms;switch(T.tag){case 0:case 11:case 15:Do(8,T,g);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var N=T.memoizedState.cachePool.pool;N!=null&&N.refCount++}break;case 24:Y1(T.memoizedState.cache)}if(N=T.child,N!==null)N.return=T,ms=N;else e:for(T=A;ms!==null;){N=ms;var I=N.sibling,H=N.return;if(V3(N),N===T){ms=null;break e}if(I!==null){I.return=H,ms=I;break e}ms=H}}}function U8(A){var g=jn(A);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(r(364));return g}if(A=eF(A),A===null)throw Error(r(362));return A.stateNode.current}function G3(A,g){var T=A.tag;switch(g.$$typeof){case wf:if(A.type===g.value)return!0;break;case Rf:e:{for(g=g.value,A=[A,0],T=0;T<A.length;){var N=A[T++],I=N.tag,H=A[T++],oe=g[H];if(I!==5&&I!==26&&I!==27||!Y8(N)){for(;oe!=null&&G3(N,oe);)H++,oe=g[H];if(H===g.length){g=!0;break e}else for(N=N.child;N!==null;)A.push(N,H),N=N.sibling}}g=!1}return g;case Cf:if((T===5||T===26||T===27)&&iF(A.stateNode,g.value))return!0;break;case Pf:if((T===5||T===6||T===26||T===27)&&(A=nF(A),A!==null&&0<=A.indexOf(g.value)))return!0;break;case Nf:if((T===5||T===26||T===27)&&(A=A.memoizedProps["data-testname"],typeof A=="string"&&A.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function ao(A){switch(A.$$typeof){case wf:return"<"+(a(A.value)||"Unknown")+">";case Rf:return":has("+(ao(A)||"")+")";case Cf:return'[role="'+A.value+'"]';case Pf:return'"'+A.value+'"';case Nf:return'[data-testname="'+A.value+'"]';default:throw Error(r(365))}}function O8(A,g){var T=[];A=[A,0];for(var N=0;N<A.length;){var I=A[N++],H=I.tag,oe=A[N++],ye=g[oe];if(H!==5&&H!==26&&H!==27||!Y8(I)){for(;ye!=null&&G3(I,ye);)oe++,ye=g[oe];if(oe===g.length)T.push(I);else for(I=I.child;I!==null;)A.push(I,oe),I=I.sibling}}return T}function F8(A,g){if(!X8)throw Error(r(363));A=U8(A),A=O8(A,g),g=[],A=Array.from(A);for(var T=0;T<A.length;){var N=A[T++],I=N.tag;if(I===5||I===26||I===27)Y8(N)||g.push(N.stateNode);else for(N=N.child;N!==null;)A.push(N),N=N.sibling}return g}function Aa(){if((Wi&2)!==0&&_i!==0)return _i&-_i;if(S.T!==null){var A=s4;return A!==0?A:ht()}return Ns()}function nf(){Go===0&&(Go=(_i&536870912)===0||Ei?q():536870912);var A=zo.current;return A!==null&&(A.flags|=32),Go}function Rs(A,g,T){(A===rr&&sr===2||A.cancelPendingCommit!==null)&&(Z1(A,0),Ba(A,_i,Go,!1)),j(A,T),((Wi&2)===0||A!==rr)&&(A===rr&&((Wi&2)===0&&(M2|=T),Nr===4&&Ba(A,_i,Go,!1)),wt(A))}function rf(A,g,T){if((Wi&6)!==0)throw Error(r(327));var N=!T&&(g&60)===0&&(g&A.expiredLanes)===0||O(A,g),I=N?sf(A,g):H3(A,g,!0),H=N;do{if(I===0){d4&&!N&&Ba(A,g,0,!1);break}else if(I===6)Ba(A,g,0,!r1);else{if(T=A.current.alternate,H&&!Mm(T)){I=H3(A,g,!1),H=!1;continue}if(I===2){if(H=g,A.errorRecoveryDisabledLanes&H)var oe=0;else oe=A.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){g=oe;e:{var ye=A;I=nh;var Ie=ct&&ye.current.memoizedState.isDehydrated;if(Ie&&(Z1(ye,oe).flags|=256),oe=H3(ye,oe,!1),oe!==2){if(Qm&&!Ie){ye.errorRecoveryDisabledLanes|=H,M2|=H,I=4;break e}H=ol,ol=I,H!==null&&Bo(H)}I=oe}if(H=!1,I!==2)continue}}if(I===1){Z1(A,0),Ba(A,g,0,!0);break}e:{switch(N=A,I){case 0:case 1:throw Error(r(345));case 4:if((g&4194176)===g){Ba(N,g,Go,!r1);break e}break;case 2:ol=null;break;case 3:case 5:break;default:throw Error(r(329))}if(N.finishedWork=T,N.finishedLanes=g,(g&62914560)===g&&(H=Zm+300-S0(),10<H)){if(Ba(N,g,Go,!r1),U(N,0)!==0)break e;N.timeoutHandle=Xt(q3.bind(null,N,T,ol,Df,Km,g,Go,M2,A4,r1,2,-0,0),H);break e}q3(N,T,ol,Df,Km,g,Go,M2,A4,r1,0,-0,0)}}break}while(!0);wt(A)}function Bo(A){ol===null?ol=A:ol.push.apply(ol,A)}function q3(A,g,T,N,I,H,oe,ye,Ie,st,Bt,Wt,Kt){var Kn=g.subtreeFlags;if((Kn&8192||(Kn&16785408)===16785408)&&(QO(),J7(g),g=$O(),g!==null)){A.cancelPendingCommit=g(uf.bind(null,A,T,N,I,oe,ye,Ie,1,Wt,Kt)),Ba(A,H,oe,!st);return}uf(A,T,N,I,oe,ye,Ie,Bt,Wt,Kt)}function Mm(A){for(var g=A;;){var T=g.tag;if((T===0||T===11||T===15)&&g.flags&16384&&(T=g.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var N=0;N<T.length;N++){var I=T[N],H=I.getSnapshot;I=I.value;try{if(!ho(H(),I))return!1}catch{return!1}}if(T=g.child,g.subtreeFlags&16384&&T!==null)T.return=g,g=T;else{if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ba(A,g,T,N){g&=~$m,g&=~M2,A.suspendedLanes|=g,A.pingedLanes&=~g,N&&(A.warmLanes|=g),N=A.expirationTimes;for(var I=g;0<I;){var H=31-uo(I),oe=1<<H;N[H]=-1,I&=~oe}T!==0&&K(A,T,g)}function V8(){return(Wi&6)===0?(cn(0),!1):!0}function z8(){if(mi!==null){if(sr===0)var A=mi.return;else A=mi,n1=S2=null,ae(A),l4=null,J8=0,A=mi;for(;A!==null;)$0(A.alternate,A),A=A.return;mi=null}}function Z1(A,g){A.finishedWork=null,A.finishedLanes=0;var T=A.timeoutHandle;T!==Cn&&(A.timeoutHandle=Cn,Ln(T)),T=A.cancelPendingCommit,T!==null&&(A.cancelPendingCommit=null,T()),z8(),rr=A,mi=T=x0(A.current,null),_i=g,sr=0,Ao=null,r1=!1,d4=O(A,g),Qm=!1,A4=Go=$m=M2=lu=Nr=0,ol=nh=null,Km=!1,(g&8)!==0&&(g|=g&32);var N=A.entangledLanes;if(N!==0)for(A=A.entanglements,N&=g;0<N;){var I=31-uo(N),H=1<<I;g|=A[I],N&=~H}return s1=g,Je(),T}function J1(A,g){ai=null,S.H=al,g===Z8?(g=qt(),sr=3):g===Hm?(g=qt(),sr=4):sr=g===dT?8:g!==null&&typeof g=="object"&&typeof g.then=="function"?6:1,Ao=g,mi===null&&(Nr=1,Po(A,Ae(g,A.current)))}function G8(){var A=zo.current;return A===null?!0:(_i&4194176)===_i?sl===null:(_i&62914560)===_i||(_i&536870912)!==0?A===sl:!1}function eu(){var A=S.H;return S.H=al,A===null?al:A}function k3(){var A=S.A;return S.A=lV,A}function A2(){Nr=4,r1||(_i&4194176)!==_i&&zo.current!==null||(d4=!0),(lu&134217727)===0&&(M2&134217727)===0||rr===null||Ba(rr,_i,Go,!1)}function H3(A,g,T){var N=Wi;Wi|=2;var I=eu(),H=k3();(rr!==A||_i!==g)&&(Df=null,Z1(A,g)),g=!1;var oe=Nr;e:do try{if(sr!==0&&mi!==null){var ye=mi,Ie=Ao;switch(sr){case 8:z8(),oe=6;break e;case 3:case 2:case 6:zo.current===null&&(g=!0);var st=sr;if(sr=0,Ao=null,tu(A,ye,Ie,st),T&&d4){oe=0;break e}break;default:st=sr,sr=0,Ao=null,tu(A,ye,Ie,st)}}W3(),oe=Nr;break}catch(Bt){J1(A,Bt)}while(!0);return g&&A.shellSuspendCounter++,n1=S2=null,Wi=N,S.H=I,S.A=H,mi===null&&(rr=null,_i=0,Je()),oe}function W3(){for(;mi!==null;)af(mi)}function sf(A,g){var T=Wi;Wi|=2;var N=eu(),I=k3();rr!==A||_i!==g?(Df=null,ih=S0()+500,Z1(A,g)):d4=O(A,g);e:do try{if(sr!==0&&mi!==null){g=mi;var H=Ao;t:switch(sr){case 1:sr=0,Ao=null,tu(A,g,H,1);break;case 2:if(Gt(H)){sr=0,Ao=null,of(g);break}g=function(){sr===2&&rr===A&&(sr=7),wt(A)},H.then(g,g);break e;case 3:sr=7;break e;case 4:sr=5;break e;case 7:Gt(H)?(sr=0,Ao=null,of(g)):(sr=0,Ao=null,tu(A,g,H,7));break;case 5:var oe=null;switch(mi.tag){case 26:oe=mi.memoizedState;case 5:case 27:var ye=mi,Ie=ye.type,st=ye.pendingProps;if(oe?aT(oe):kS(Ie,st)){sr=0,Ao=null;var Bt=ye.sibling;if(Bt!==null)mi=Bt;else{var Wt=ye.return;Wt!==null?(mi=Wt,j3(Wt)):mi=null}break t}}sr=0,Ao=null,tu(A,g,H,5);break;case 6:sr=0,Ao=null,tu(A,g,H,6);break;case 8:z8(),Nr=6;break e;default:throw Error(r(462))}}Em();break}catch(Kt){J1(A,Kt)}while(!0);return n1=S2=null,S.H=N,S.A=I,Wi=T,mi!==null?0:(rr=null,_i=0,Je(),Nr)}function Em(){for(;mi!==null&&!KF();)af(mi)}function af(A){var g=j7(A.alternate,A,s1);A.memoizedProps=A.pendingProps,g===null?j3(A):mi=g}function of(A){var g=A,T=g.alternate;switch(g.tag){case 15:case 0:g=Q0(T,g,g.pendingProps,g.type,void 0,_i);break;case 11:g=Q0(T,g,g.pendingProps,g.type.render,g.ref,_i);break;case 5:ae(g);default:$0(T,g),g=mi=H8(g,s1),g=j7(T,g,s1)}A.memoizedProps=A.pendingProps,g===null?j3(A):mi=g}function tu(A,g,T,N){n1=S2=null,ae(g),l4=null,J8=0;var I=g.return;try{if(bm(A,I,g,T,_i)){Nr=1,Po(A,Ae(T,A.current)),mi=null;return}}catch(H){if(I!==null)throw mi=I,H;Nr=1,Po(A,Ae(T,A.current)),mi=null;return}g.flags&32768?(Ei||N===1?A=!0:d4||(_i&536870912)!==0?A=!1:(r1=A=!0,(N===2||N===3||N===6)&&(N=zo.current,N!==null&&N.tag===13&&(N.flags|=16384))),lf(g,A)):j3(g)}function j3(A){var g=A;do{if((g.flags&32768)!==0){lf(g,r1);return}A=g.return;var T=Xs(g.alternate,g,s1);if(T!==null){mi=T;return}if(g=g.sibling,g!==null){mi=g;return}mi=g=A}while(g!==null);Nr===0&&(Nr=5)}function lf(A,g){do{var T=N8(A.alternate,A);if(T!==null){T.flags&=32767,mi=T;return}if(T=A.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!g&&(A=A.sibling,A!==null)){mi=A;return}mi=A=T}while(A!==null);Nr=6,mi=null}function uf(A,g,T,N,I,H,oe,ye,Ie,st){var Bt=S.T,Wt=pi();try{pn(2),S.T=null,wm(A,g,T,N,Wt,I,H,oe,ye,Ie,st)}finally{S.T=Bt,pn(Wt)}}function wm(A,g,T,N,I,H,oe,ye){do el();while(E2!==null);if((Wi&6)!==0)throw Error(r(327));var Ie=A.finishedWork;if(N=A.finishedLanes,Ie===null)return null;if(A.finishedWork=null,A.finishedLanes=0,Ie===A.current)throw Error(r(177));A.callbackNode=null,A.callbackPriority=0,A.cancelPendingCommit=null;var st=Ie.lanes|Ie.childLanes;if(st|=Vm,$(A,N,st,H,oe,ye),A===rr&&(mi=rr=null,_i=0),(Ie.subtreeFlags&10256)===0&&(Ie.flags&10256)===0||Bf||(Bf=!0,Jm=st,eg=T,Nm(Om,function(){return el(),null})),T=(Ie.flags&15990)!==0,(Ie.subtreeFlags&15990)!==0||T?(T=S.T,S.T=null,H=pi(),pn(2),oe=Wi,Wi|=4,Tm(A,Ie),K1(Ie,A),Fe(A.containerInfo),A.current=Ie,K7(A,Ie.alternate,Ie),ZF(),Wi=oe,pn(H),S.T=T):A.current=Ie,Bf?(Bf=!1,E2=A,rh=N):cf(A,st),st=A.pendingLanes,st===0&&(uu=null),X(Ie.stateNode),wt(A),g!==null)for(I=A.onRecoverableError,Ie=0;Ie<g.length;Ie++)st=g[Ie],I(st.value,{componentStack:st.stack});return(rh&3)!==0&&el(),st=A.pendingLanes,(N&4194218)!==0&&(st&42)!==0?A===tg?sh++:(sh=0,tg=A):sh=0,cn(0),null}function cf(A,g){(A.pooledCacheLanes&=g)===0&&(g=A.pooledCache,g!=null&&(A.pooledCache=null,Y1(g)))}function el(){if(E2!==null){var A=E2,g=Jm;Jm=0;var T=ee(rh),N=32>T?32:T;T=S.T;var I=pi();try{if(pn(N),S.T=null,E2===null)var H=!1;else{N=eg,eg=null;var oe=E2,ye=rh;if(E2=null,rh=0,(Wi&6)!==0)throw Error(r(331));var Ie=Wi;if(Wi|=4,tf(oe.current),L8(oe,oe.current,ye,N),Wi=Ie,cn(0,!1),co&&typeof co.onPostCommitFiberRoot=="function")try{co.onPostCommitFiberRoot(Q8,oe)}catch{}H=!0}return H}finally{pn(I),S.T=T,cf(A,g)}}return!1}function q8(A,g,T){g=Ae(T,g),g=i2(A.stateNode,g,2),A=Lt(A,g,2),A!==null&&(j(A,2),wt(A))}function Rn(A,g,T){if(A.tag===3)q8(A,A,T);else for(;g!==null;){if(g.tag===3){q8(g,A,T);break}else if(g.tag===1){var N=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(uu===null||!uu.has(N))){A=Ae(T,A),T=v8(2),N=Lt(g,T,2),N!==null&&(r2(T,N,g,A),j(N,2),wt(N));break}}g=g.return}}function k8(A,g,T){var N=A.pingCache;if(N===null){N=A.pingCache=new uV;var I=new Set;N.set(g,I)}else I=N.get(g),I===void 0&&(I=new Set,N.set(g,I));I.has(T)||(Qm=!0,I.add(T),A=Rm.bind(null,A,g,T),g.then(A,A))}function Rm(A,g,T){var N=A.pingCache;N!==null&&N.delete(g),A.pingedLanes|=A.suspendedLanes&T,A.warmLanes&=~T,rr===A&&(_i&T)===T&&(Nr===4||Nr===3&&(_i&62914560)===_i&&300>S0()-Zm?(Wi&2)===0&&Z1(A,0):$m|=T,A4===_i&&(A4=0)),wt(A)}function nu(A,g){g===0&&(g=F()),A=ke(A,g),A!==null&&(j(A,g),wt(A))}function La(A){var g=A.memoizedState,T=0;g!==null&&(T=g.retryLane),nu(A,T)}function Cm(A,g){var T=0;switch(A.tag){case 13:var N=A.stateNode,I=A.memoizedState;I!==null&&(T=I.retryLane);break;case 19:N=A.stateNode;break;case 22:N=A.stateNode._retryCache;break;default:throw Error(r(314))}N!==null&&N.delete(g),nu(A,T)}function Nm(A,g){return mf(A,g)}function Pm(A,g,T,N){this.tag=A,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function X3(A){return A=A.prototype,!(!A||!A.isReactComponent)}function x0(A,g){var T=A.alternate;return T===null?(T=t(A.tag,g,A.key,A.mode),T.elementType=A.elementType,T.type=A.type,T.stateNode=A.stateNode,T.alternate=A,A.alternate=T):(T.pendingProps=g,T.type=A.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=A.flags&31457280,T.childLanes=A.childLanes,T.lanes=A.lanes,T.child=A.child,T.memoizedProps=A.memoizedProps,T.memoizedState=A.memoizedState,T.updateQueue=A.updateQueue,g=A.dependencies,T.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},T.sibling=A.sibling,T.index=A.index,T.ref=A.ref,T.refCleanup=A.refCleanup,T}function H8(A,g){A.flags&=31457282;var T=A.alternate;return T===null?(A.childLanes=0,A.lanes=g,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=T.childLanes,A.lanes=T.lanes,A.child=T.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=T.memoizedProps,A.memoizedState=T.memoizedState,A.updateQueue=T.updateQueue,A.type=T.type,g=T.dependencies,A.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),A}function p2(A,g,T,N,I,H){var oe=0;if(N=A,typeof A=="function")X3(A)&&(oe=1);else if(typeof A=="string")oe=Uo&&Qs?eT(A,T,Ps.current)?26:lT(A)?27:5:Uo?eT(A,T,Ps.current)?26:5:Qs&&lT(A)?27:5;else e:switch(A){case lt:return Zl(T.children,I,H,g);case St:oe=8,I|=24;break;case Q3:return A=t(12,T,g,I|2),A.elementType=Q3,A.lanes=H,A;case Lo:return A=t(13,T,g,I),A.elementType=Lo,A.lanes=H,A;case $3:return A=t(19,T,g,I),A.elementType=$3,A.lanes=H,A;case d:return hf(T,I,H,g);default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case ff:case lo:oe=10;break e;case m2:oe=9;break e;case il:oe=11;break e;case Io:oe=14;break e;case h:oe=16,N=null;break e}oe=29,T=Error(r(130,A===null?"null":typeof A,"")),N=null}return g=t(oe,T,g,I),g.elementType=A,g.type=N,g.lanes=H,g}function Zl(A,g,T,N){return A=t(7,A,N,g),A.lanes=T,A}function hf(A,g,T,N){A=t(22,A,N,g),A.elementType=d,A.lanes=T;var I={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var H=I._current;if(H===null)throw Error(r(456));if((I._pendingVisibility&2)===0){var oe=ke(H,2);oe!==null&&(I._pendingVisibility|=2,Rs(oe,H,2))}},attach:function(){var H=I._current;if(H===null)throw Error(r(456));if((I._pendingVisibility&2)!==0){var oe=ke(H,2);oe!==null&&(I._pendingVisibility&=-3,Rs(oe,H,2))}}};return A.stateNode=I,A}function W8(A,g,T){return A=t(6,A,null,g),A.lanes=T,A}function j8(A,g,T){return g=t(4,A.children!==null?A.children:[],A.key,g),g.lanes=T,g.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},g}function tl(A,g,T,N,I,H,oe,ye){this.tag=1,this.containerInfo=A,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Cn,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=G(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G(0),this.hiddenUpdates=G(null),this.identifierPrefix=N,this.onUncaughtError=I,this.onCaughtError=H,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ye,this.incompleteTransitions=new Map}function oo(A,g,T,N,I,H,oe,ye,Ie,st,Bt,Wt){return A=new tl(A,g,T,oe,ye,Ie,st,Wt),g=1,H===!0&&(g|=24),H=t(3,null,null,g),A.current=H,H.stateNode=A,g=o2(),g.refCount++,A.pooledCache=g,g.refCount++,H.memoizedState={element:N,isDehydrated:T,cache:g},Zt(H),A}function An(A){return A?(A=J3,A):J3}function Cs(A){var g=A._reactInternals;if(g===void 0)throw typeof A.render=="function"?Error(r(188)):(A=Object.keys(A).join(","),Error(r(268,A)));return A=_(g),A=A!==null?b(A):null,A===null?null:ce(A.stateNode)}function fn(A,g,T,N,I,H){I=An(I),N.context===null?N.context=I:N.pendingContext=I,N=At(g),N.payload={element:T},H=H===void 0?null:H,H!==null&&(N.callback=H),T=Lt(A,N,g),T!==null&&(Rs(T,A,g),dn(T,A,g))}function Hr(A,g){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var T=A.retryLane;A.retryLane=T!==0&&T<g?T:g}}function Y3(A,g){Hr(A,g),(A=A.alternate)&&Hr(A,g)}var ni={},nl=k_(),pa=mce(),wr=Object.assign,iu=Symbol.for("react.element"),b0=Symbol.for("react.transitional.element"),Jl=Symbol.for("react.portal"),lt=Symbol.for("react.fragment"),St=Symbol.for("react.strict_mode"),Q3=Symbol.for("react.profiler"),ff=Symbol.for("react.provider"),m2=Symbol.for("react.consumer"),lo=Symbol.for("react.context"),il=Symbol.for("react.forward_ref"),Lo=Symbol.for("react.suspense"),$3=Symbol.for("react.suspense_list"),Io=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.for("react.offscreen"),m=Symbol.for("react.memo_cache_sentinel"),v=Symbol.iterator,x=Symbol.for("react.client.reference"),S=nl.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R,C,L=!1,V=Array.isArray,W=e.rendererVersion,ne=e.rendererPackageName,he=e.extraDevToolsConfig,ce=e.getPublicInstance,fe=e.getRootHostContext,_e=e.getChildHostContext,Me=e.prepareForCommit,Fe=e.resetAfterCommit,De=e.createInstance,Re=e.appendInitialChild,xe=e.finalizeInitialChildren,mt=e.shouldSetTextContent,sn=e.createTextInstance,Xt=e.scheduleTimeout,Ln=e.cancelTimeout,Cn=e.noTimeout,Nn=e.isPrimaryRenderer;e.warnsIfNotActing;var tn=e.supportsMutation,Qt=e.supportsPersistence,ct=e.supportsHydration,jn=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Ni=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var pn=e.setCurrentUpdatePriority,pi=e.getCurrentUpdatePriority,Ns=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var df=e.shouldAttemptEagerTransition,XO=e.detachDeletedInstance;e.requestPostPaintCallback;var YO=e.maySuspendCommit,kS=e.preloadInstance,QO=e.startSuspendingCommit,HS=e.suspendInstance,$O=e.waitForCommitToBeReady,K3=e.NotPendingTransition,g2=e.HostTransitionContext,KO=e.resetFormInstance;e.bindToConsole;var ZO=e.supportsMicrotasks,JO=e.scheduleMicrotask,X8=e.supportsTestSelectors,eF=e.findFiberRoot,tF=e.getBoundingRect,nF=e.getTextContent,Y8=e.isHiddenSubtree,iF=e.matchAccessibilityRole,rF=e.setFocusIfFocusable,sF=e.setupIntersectionObserver,aF=e.appendChild,oF=e.appendChildToContainer,lF=e.commitTextUpdate,uF=e.commitMount,cF=e.commitUpdate,hF=e.insertBefore,fF=e.insertInContainerBefore,dF=e.removeChild,AF=e.removeChildFromContainer,WS=e.resetTextContent,pF=e.hideInstance,mF=e.hideTextInstance,gF=e.unhideInstance,yF=e.unhideTextInstance,vF=e.clearContainer,_F=e.cloneInstance,jS=e.createContainerChildSet,XS=e.appendChildToContainerChildSet,xF=e.finalizeContainerChildren,YS=e.replaceContainerChildren,QS=e.cloneHiddenInstance,$S=e.cloneHiddenTextInstance,Dm=e.isSuspenseInstancePending,Bm=e.isSuspenseInstanceFallback,bF=e.getSuspenseInstanceFallbackErrorDetails,SF=e.registerSuspenseInstanceRetry,TF=e.canHydrateFormStateMarker,MF=e.isFormStateMarkerMatching,KS=e.getNextHydratableSibling,ZS=e.getFirstHydratableChild,EF=e.getFirstHydratableChildWithinContainer,wF=e.getFirstHydratableChildWithinSuspenseInstance,RF=e.canHydrateInstance,CF=e.canHydrateTextInstance,NF=e.canHydrateSuspenseInstance,PF=e.hydrateInstance,DF=e.hydrateTextInstance,BF=e.hydrateSuspenseInstance,LF=e.getNextHydratableInstanceAfterSuspenseInstance,IF=e.commitHydratedContainer,UF=e.commitHydratedSuspenseInstance,OF=e.clearSuspenseBoundary,FF=e.clearSuspenseBoundaryFromContainer,JS=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var VF=e.validateHydratableInstance,zF=e.validateHydratableTextInstance,Uo=e.supportsResources,eT=e.isHostHoistableType,Lm=e.getHoistableRoot,tT=e.getResource,nT=e.acquireResource,iT=e.releaseResource,GF=e.hydrateHoistable,rT=e.mountHoistable,sT=e.unmountHoistable,qF=e.createHoistableInstance,kF=e.prepareToCommitHoistables,HF=e.mayResourceSuspendCommit,aT=e.preloadResource,WF=e.suspendResource,Qs=e.supportsSingletons,oT=e.resolveSingletonInstance,jF=e.clearSingleton,XF=e.acquireSingletonInstance,YF=e.releaseSingletonInstance,lT=e.isHostSingletonType,Im=[],Z3=-1,J3={},uo=Math.clz32?Math.clz32:D,QF=Math.log,$F=Math.LN2,Af=128,pf=4194304,mf=pa.unstable_scheduleCallback,Um=pa.unstable_cancelCallback,KF=pa.unstable_shouldYield,ZF=pa.unstable_requestPaint,S0=pa.unstable_now,uT=pa.unstable_ImmediatePriority,JF=pa.unstable_UserBlockingPriority,Om=pa.unstable_NormalPriority,eV=pa.unstable_IdlePriority,tV=pa.log,nV=pa.unstable_setDisableYieldValue,Q8=null,co=null,ho=typeof Object.is=="function"?Object.is:se,cT=new WeakMap,e4=[],t4=0,gf=null,yf=0,Oo=[],Fo=0,y2=null,e1=1,t1="",Ps=E(null),$8=E(null),ru=E(null),vf=E(null),ma=null,$s=null,Ei=!1,T0=null,rl=!1,Fm=Error(r(519)),Vo=[],n4=0,Vm=0,_f=null,i4=null,zm=!1,xf=!1,Gm=!1,r4=0,K8=null,qm=0,s4=0,a4=null,su=!1,km=!1,iV=Object.prototype.hasOwnProperty,Z8=Error(r(460)),Hm=Error(r(474)),bf={then:function(){}},o4=null,l4=null,J8=0,v2=ur(!0),hT=ur(!1),u4=E(null),Sf=E(0),zo=E(null),sl=null,ns=E(0),au=0,ai=null,Hi=null,Wr=null,Tf=!1,c4=!1,_2=!1,Mf=0,eh=0,h4=null,rV=0,Wm=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},al={readContext:ts,use:we,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useLayoutEffect:$n,useInsertionEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useSyncExternalStore:$n,useId:$n};al.useCacheRefresh=$n,al.useMemoCache=$n,al.useHostTransitionStatus=$n,al.useFormState=$n,al.useActionState=$n,al.useOptimistic=$n;var x2={readContext:ts,use:we,useCallback:function(A,g){return Ee().memoizedState=[A,g===void 0?null:g],A},useContext:ts,useEffect:B7,useImperativeHandle:function(A,g,T){T=T!=null?T.concat([A]):null,x3(4194308,4,b3.bind(null,g,A),T)},useLayoutEffect:function(A,g){return x3(4194308,4,A,g)},useInsertionEffect:function(A,g){x3(4,2,A,g)},useMemo:function(A,g){var T=Ee();g=g===void 0?null:g;var N=A();if(_2){re(!0);try{A()}finally{re(!1)}}return T.memoizedState=[N,g],N},useReducer:function(A,g,T){var N=Ee();if(T!==void 0){var I=T(g);if(_2){re(!0);try{T(g)}finally{re(!1)}}}else I=g;return N.memoizedState=N.baseState=I,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:I},N.queue=A,A=A.dispatch=m8.bind(null,ai,A),[N.memoizedState,A]},useRef:function(A){var g=Ee();return A={current:A},g.memoizedState=A},useState:function(A){A=Y(A);var g=A.queue,T=E3.bind(null,ai,g);return g.dispatch=T,[A.memoizedState,T]},useDebugValue:d8,useDeferredValue:function(A,g){var T=Ee();return S3(T,A,g)},useTransition:function(){var A=Y(!1);return A=M3.bind(null,ai,A.queue,!0,!1),Ee().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,g,T){var N=ai,I=Ee();if(Ei){if(T===void 0)throw Error(r(407));T=T()}else{if(T=g(),rr===null)throw Error(r(349));(_i&60)!==0||mn(N,g,T)}I.memoizedState=T;var H={value:T,getSnapshot:g};return I.queue=H,B7(bi.bind(null,N,H,A),[A]),N.flags|=2048,js(9,ti.bind(null,N,H,T,g),{destroy:void 0},null),T},useId:function(){var A=Ee(),g=rr.identifierPrefix;if(Ei){var T=t1,N=e1;T=(N&~(1<<32-uo(N)-1)).toString(32)+T,g=":"+g+"R"+T,T=Mf++,0<T&&(g+="H"+T.toString(32)),g+=":"}else T=rV++,g=":"+g+"r"+T.toString(32)+":";return A.memoizedState=g},useCacheRefresh:function(){return Ee().memoizedState=xm.bind(null,ai)}};x2.useMemoCache=_t,x2.useHostTransitionStatus=A8,x2.useFormState=fs,x2.useActionState=fs,x2.useOptimistic=function(A){var g=Ee();g.memoizedState=g.baseState=A;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return g.queue=T,g=w3.bind(null,ai,!0,T),T.dispatch=g,[A,g]};var ou={readContext:ts,use:we,useCallback:I7,useContext:ts,useEffect:h8,useImperativeHandle:f8,useInsertionEffect:L7,useLayoutEffect:ki,useMemo:U7,useReducer:kt,useRef:_3,useState:function(){return kt(Ut)},useDebugValue:d8,useDeferredValue:function(A,g){var T=Pe();return T3(T,Hi.memoizedState,A,g)},useTransition:function(){var A=kt(Ut)[0],g=Pe().memoizedState;return[typeof A=="boolean"?A:Ge(A),g]},useSyncExternalStore:gt,useId:F7};ou.useCacheRefresh=p8,ou.useMemoCache=_t,ou.useHostTransitionStatus=A8,ou.useFormState=ir,ou.useActionState=ir,ou.useOptimistic=function(A,g){var T=Pe();return xn(T,Hi,A,g)};var b2={readContext:ts,use:we,useCallback:I7,useContext:ts,useEffect:h8,useImperativeHandle:f8,useInsertionEffect:L7,useLayoutEffect:ki,useMemo:U7,useReducer:Z,useRef:_3,useState:function(){return Z(Ut)},useDebugValue:d8,useDeferredValue:function(A,g){var T=Pe();return Hi===null?S3(T,A,g):T3(T,Hi.memoizedState,A,g)},useTransition:function(){var A=Z(Ut)[0],g=Pe().memoizedState;return[typeof A=="boolean"?A:Ge(A),g]},useSyncExternalStore:gt,useId:F7};b2.useCacheRefresh=p8,b2.useMemoCache=_t,b2.useHostTransitionStatus=A8,b2.useFormState=jl,b2.useActionState=jl,b2.useOptimistic=function(A,g){var T=Pe();return Hi!==null?xn(T,Hi,A,g):(T.baseState=A,[A,T.queue.dispatch])};var jm={isMounted:function(A){return(A=A._reactInternals)?p(A)===A:!1},enqueueSetState:function(A,g,T){A=A._reactInternals;var N=Aa(),I=At(N);I.payload=g,T!=null&&(I.callback=T),g=Lt(A,I,N),g!==null&&(Rs(g,A,N),dn(g,A,N))},enqueueReplaceState:function(A,g,T){A=A._reactInternals;var N=Aa(),I=At(N);I.tag=1,I.payload=g,T!=null&&(I.callback=T),g=Lt(A,I,N),g!==null&&(Rs(g,A,N),dn(g,A,N))},enqueueForceUpdate:function(A,g){A=A._reactInternals;var T=Aa(),N=At(T);N.tag=2,g!=null&&(N.callback=g),g=Lt(A,N,T),g!==null&&(Rs(g,A,T),dn(g,A,T))}},fT=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var g=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(g))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},dT=Error(r(461)),ps=!1,Xm={dehydrated:null,treeContext:null,retryLane:0},Ef=E(null),S2=null,n1=null,sV=typeof AbortController<"u"?AbortController:function(){var A=[],g=this.signal={aborted:!1,addEventListener:function(T,N){A.push(N)}};this.abort=function(){g.aborted=!0,A.forEach(function(T){return T()})}},aV=pa.unstable_scheduleCallback,oV=pa.unstable_NormalPriority,Rr={$$typeof:lo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},AT=S.S;S.S=function(A,g){typeof g=="object"&&g!==null&&typeof g.then=="function"&&Qe(A,g),AT!==null&&AT(A,g)};var T2=E(null),i1=!1,Cr=!1,Ym=!1,pT=typeof WeakSet=="function"?WeakSet:Set,ms=null,mT=!1,jr=null,fo=!1,M0=null,f4=8192,lV={getCacheForType:function(A){var g=ts(Rr),T=g.data.get(A);return T===void 0&&(T=A(),g.data.set(A,T)),T}},wf=0,Rf=1,Cf=2,Nf=3,Pf=4;if(typeof Symbol=="function"&&Symbol.for){var th=Symbol.for;wf=th("selector.component"),Rf=th("selector.has_pseudo_class"),Cf=th("selector.role"),Nf=th("selector.test_id"),Pf=th("selector.text")}var uV=typeof WeakMap=="function"?WeakMap:Map,Wi=0,rr=null,mi=null,_i=0,sr=0,Ao=null,r1=!1,d4=!1,Qm=!1,s1=0,Nr=0,lu=0,M2=0,$m=0,Go=0,A4=0,nh=null,ol=null,Km=!1,Zm=0,ih=1/0,Df=null,uu=null,Bf=!1,E2=null,rh=0,Jm=0,eg=null,sh=0,tg=null;return ni.attemptContinuousHydration=function(A){if(A.tag===13){var g=ke(A,67108864);g!==null&&Rs(g,A,67108864),Y3(A,67108864)}},ni.attemptHydrationAtCurrentPriority=function(A){if(A.tag===13){var g=Aa(),T=ke(A,g);T!==null&&Rs(T,A,g),Y3(A,g)}},ni.attemptSynchronousHydration=function(A){switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var g=B(A.pendingLanes);if(g!==0){for(A.pendingLanes|=2,A.entangledLanes|=2;g;){var T=1<<31-uo(g);A.entanglements[1]|=T,g&=~T}wt(A),(Wi&6)===0&&(ih=S0()+500,cn(0))}}break;case 13:g=ke(A,2),g!==null&&Rs(g,A,2),V8(),Y3(A,2)}},ni.batchedUpdates=function(A,g){return A(g)},ni.createComponentSelector=function(A){return{$$typeof:wf,value:A}},ni.createContainer=function(A,g,T,N,I,H,oe,ye,Ie,st){return oo(A,g,!1,null,T,N,H,oe,ye,Ie,st,null)},ni.createHasPseudoClassSelector=function(A){return{$$typeof:Rf,value:A}},ni.createHydrationContainer=function(A,g,T,N,I,H,oe,ye,Ie,st,Bt,Wt,Kt){return A=oo(T,N,!0,A,I,H,ye,Ie,st,Bt,Wt,Kt),A.context=An(null),T=A.current,N=Aa(),I=At(N),I.callback=g??null,Lt(T,I,N),A.current.lanes=N,j(A,N),wt(A),A},ni.createPortal=function(A,g,T){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jl,key:N==null?null:""+N,children:A,containerInfo:g,implementation:T}},ni.createRoleSelector=function(A){return{$$typeof:Cf,value:A}},ni.createTestNameSelector=function(A){return{$$typeof:Nf,value:A}},ni.createTextSelector=function(A){return{$$typeof:Pf,value:A}},ni.defaultOnCaughtError=function(A){console.error(A)},ni.defaultOnRecoverableError=function(A){fT(A)},ni.defaultOnUncaughtError=function(A){fT(A)},ni.deferredUpdates=function(A){var g=S.T,T=pi();try{return pn(32),S.T=null,A()}finally{pn(T),S.T=g}},ni.discreteUpdates=function(A,g,T,N,I){var H=S.T,oe=pi();try{return pn(2),S.T=null,A(g,T,N,I)}finally{pn(oe),S.T=H,Wi===0&&(ih=S0()+500)}},ni.findAllNodes=F8,ni.findBoundingRects=function(A,g){if(!X8)throw Error(r(363));g=F8(A,g),A=[];for(var T=0;T<g.length;T++)A.push(tF(g[T]));for(g=A.length-1;0<g;g--){T=A[g];for(var N=T.x,I=N+T.width,H=T.y,oe=H+T.height,ye=g-1;0<=ye;ye--)if(g!==ye){var Ie=A[ye],st=Ie.x,Bt=st+Ie.width,Wt=Ie.y,Kt=Wt+Ie.height;if(N>=st&&H>=Wt&&I<=Bt&&oe<=Kt){A.splice(g,1);break}else if(N!==st||T.width!==Ie.width||Kt<H||Wt>oe){if(!(H!==Wt||T.height!==Ie.height||Bt<N||st>I)){st>N&&(Ie.width+=st-N,Ie.x=N),Bt<I&&(Ie.width=I-st),A.splice(g,1);break}}else{Wt>H&&(Ie.height+=Wt-H,Ie.y=H),Kt<oe&&(Ie.height=oe-Wt),A.splice(g,1);break}}}return A},ni.findHostInstance=Cs,ni.findHostInstanceWithNoPortals=function(A){return A=_(A),A=A!==null?w(A):null,A===null?null:ce(A.stateNode)},ni.findHostInstanceWithWarning=function(A){return Cs(A)},ni.flushPassiveEffects=el,ni.flushSyncFromReconciler=function(A){var g=Wi;Wi|=1;var T=S.T,N=pi();try{if(pn(2),S.T=null,A)return A()}finally{pn(N),S.T=T,Wi=g,(Wi&6)===0&&cn(0)}},ni.flushSyncWork=V8,ni.focusWithin=function(A,g){if(!X8)throw Error(r(363));for(A=U8(A),g=O8(A,g),g=Array.from(g),A=0;A<g.length;){var T=g[A++],N=T.tag;if(!Y8(T)){if((N===5||N===26||N===27)&&rF(T.stateNode))return!0;for(T=T.child;T!==null;)g.push(T),T=T.sibling}}return!1},ni.getFindAllNodesFailureDescription=function(A,g){if(!X8)throw Error(r(363));var T=0,N=[];A=[U8(A),0];for(var I=0;I<A.length;){var H=A[I++],oe=H.tag,ye=A[I++],Ie=g[ye];if((oe!==5&&oe!==26&&oe!==27||!Y8(H))&&(G3(H,Ie)&&(N.push(ao(Ie)),ye++,ye>T&&(T=ye)),ye<g.length))for(H=H.child;H!==null;)A.push(H,ye),H=H.sibling}if(T<g.length){for(A=[];T<g.length;T++)A.push(ao(g[T]));return`findAllNodes was able to match part of the selector:
  `+(N.join(" > ")+`

No matching component was found for:
  `)+A.join(" > ")}return null},ni.getPublicRootInstance=function(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 27:case 5:return ce(A.child.stateNode);default:return A.child.stateNode}},ni.injectIntoDevTools=function(){var A={bundleType:0,version:W,rendererPackageName:ne,currentDispatcherRef:S,findFiberByHostInstance:jn,reconcilerVersion:"19.0.0"};if(he!==null&&(A.rendererConfig=he),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")A=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)A=!0;else{try{Q8=g.inject(A),co=g}catch{}A=!!g.checkDCE}}return A},ni.isAlreadyRendering=function(){return!1},ni.observeVisibleRects=function(A,g,T,N){if(!X8)throw Error(r(363));A=F8(A,g);var I=sF(A,T,N).disconnect;return{disconnect:function(){I()}}},ni.shouldError=function(){return null},ni.shouldSuspend=function(){return!1},ni.startHostTransition=function(A,g,T,N){if(A.tag!==5)throw Error(r(476));var I=O7(A).queue;M3(A,I,g,K3,T===null?n:function(){var H=O7(A).next.queue;return t2(A,H,{},Aa()),T(N)})},ni.updateContainer=function(A,g,T,N){var I=g.current,H=Aa();return fn(I,H,A,g,T,N),H},ni.updateContainerSync=function(A,g,T,N){return g.tag===0&&el(),fn(g.current,2,A,g,T,N),2},ni},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})})(Ky)),Ky.exports}var cC;function yce(){return cC||(cC=1,$y.exports=gce()),$y.exports}var vce=yce();const _ce=q_(vce);var ev={exports:{}},tv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function xce(){return hC||(hC=1,(function(i){function e(X,re){var se=X.length;X.push(re);e:for(;0<se;){var Ae=se-1>>>1,Se=X[Ae];if(0<r(Se,re))X[Ae]=re,X[se]=Se,se=Ae;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var re=X[0],se=X.pop();if(se!==re){X[0]=se;e:for(var Ae=0,Se=X.length,Ce=Se>>>1;Ae<Ce;){var Ye=2*(Ae+1)-1,it=X[Ye],pt=Ye+1,yt=X[pt];if(0>r(it,se))pt<Se&&0>r(yt,it)?(X[Ae]=yt,X[pt]=se,Ae=pt):(X[Ae]=it,X[Ye]=se,Ae=Ye);else if(pt<Se&&0>r(yt,se))X[Ae]=yt,X[pt]=se,Ae=pt;else break e}}return re}function r(X,re){var se=X.sortIndex-re.sortIndex;return se!==0?se:X.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,p=null,y=3,_=!1,b=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function D(X){for(var re=t(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=X)n(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=t(u)}}function B(X){if(w=!1,D(X),!b)if(t(l)!==null)b=!0,ie();else{var re=t(u);re!==null&&ee(B,re.startTime-X)}}var U=!1,O=-1,z=5,q=-1;function F(){return!(i.unstable_now()-q<z)}function G(){if(U){var X=i.unstable_now();q=X;var re=!0;try{e:{b=!1,w&&(w=!1,M(O),O=-1),_=!0;var se=y;try{t:{for(D(X),p=t(l);p!==null&&!(p.expirationTime>X&&F());){var Ae=p.callback;if(typeof Ae=="function"){p.callback=null,y=p.priorityLevel;var Se=Ae(p.expirationTime<=X);if(X=i.unstable_now(),typeof Se=="function"){p.callback=Se,D(X),re=!0;break t}p===t(l)&&n(l),D(X)}else n(l);p=t(l)}if(p!==null)re=!0;else{var Ce=t(u);Ce!==null&&ee(B,Ce.startTime-X),re=!1}}break e}finally{p=null,y=se,_=!1}re=void 0}}finally{re?j():U=!1}}}var j;if(typeof P=="function")j=function(){P(G)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=G,j=function(){K.postMessage(null)}}else j=function(){E(G,0)};function ie(){U||(U=!0,j())}function ee(X,re){O=E(function(){X(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,ie())},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(X){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var se=y;y=re;try{return X()}finally{y=se}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=y;y=X;try{return re()}finally{y=se}},i.unstable_scheduleCallback=function(X,re,se){var Ae=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Ae+se:Ae):se=Ae,X){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=se+Se,X={id:c++,callback:re,priorityLevel:X,startTime:se,expirationTime:Se,sortIndex:-1},se>Ae?(X.sortIndex=se,e(u,X),t(l)===null&&X===t(u)&&(w?(M(O),O=-1):w=!0,ee(B,se-Ae))):(X.sortIndex=Se,e(l,X),b||_||(b=!0,ie())),X},i.unstable_shouldYield=F,i.unstable_wrapCallback=function(X){var re=y;return function(){var se=y;y=re;try{return X.apply(this,arguments)}finally{y=se}}}})(tv)),tv}var fC;function bce(){return fC||(fC=1,ev.exports=xce()),ev.exports}var dC=bce();function zS(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const r=zS(n,e,t);if(r)return r;n=e?null:n.sibling}}function RO(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const GS=RO(yn.createContext(null));class CO extends yn.Component{render(){return yn.createElement(GS.Provider,{value:this._reactInternals},this.props.children)}}function NO(){const i=yn.useContext(GS);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=yn.useId();return yn.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=zS(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(n)return n}},[i,e])}const Sce=Symbol.for("react.context"),Tce=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===Sce;function Mce(){const i=NO(),[e]=yn.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;Tce(n)&&n!==GS&&!e.has(n)&&e.set(n,yn.use(RO(n))),t=t.return}return e}function Ece(){const i=Mce();return yn.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>yn.createElement(e,null,yn.createElement(t.Provider,{...n,value:i.get(t)})),e=>yn.createElement(CO,{...e})),[i])}function PO(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const DO=i=>i&&i.isOrthographicCamera,wce=i=>i&&i.hasOwnProperty("current"),Rce=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),D7=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?yn.useLayoutEffect:yn.useEffect;function BO(i){const e=yn.useRef(i);return D7(()=>void(e.current=i),[i]),e}function Cce(){const i=NO(),e=Ece();return yn.useMemo(()=>({children:t})=>{const r=!!zS(i,!0,s=>s.type===yn.StrictMode)?yn.StrictMode:yn.Fragment;return Ir.jsx(r,{children:Ir.jsx(e,{children:t})})},[i,e])}function Nce({set:i}){return D7(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const Pce=(i=>(i=class extends yn.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function LO(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function e5(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const br={obj:i=>i===Object(i)&&!br.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(br.str(i)||br.num(i)||br.boo(i))return i===e;const s=br.obj(i);if(s&&n==="reference")return i===e;const a=br.arr(i);if(a&&t==="reference")return i===e;if((a||s)&&i===e)return!0;let o;for(o in i)if(!(o in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(o in r?e:i)if(!br.equ(i[o],e[o],{strict:r,objects:"reference"}))return!1}else for(o in r?e:i)if(i[o]!==e[o])return!1;if(br.und(o)){if(a&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function Dce(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const IO=["children","key","ref"];function Bce(i){const e={};for(const t in i)IO.includes(t)||(e[t]=i[t]);return e}function HA(i,e,t,n){const r=i;let s=r?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:Bce(n),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function Y6(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const r of e.split("-")){var n;e=r,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const AC=/-\d+$/;function WA(i,e){if(br.str(e.props.attach)){if(AC.test(e.props.attach)){const r=e.props.attach.replace(AC,""),{root:s,key:a}=Y6(i.object,r);Array.isArray(s[a])||(s[a]=[])}const{root:t,key:n}=Y6(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else br.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function jA(i,e){if(br.str(e.props.attach)){const{root:t,key:n}=Y6(i.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[n]:t[n]=r}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const I_=[...IO,"args","dispose","attach","object","onUpdate","dispose"],pC=new Map;function Lce(i){let e=pC.get(i.constructor);try{e||(e=new i.constructor,pC.set(i.constructor,e))}catch{}return e}function Ice(i,e){const t={};for(const n in e)if(!I_.includes(n)&&!br.equ(e[n],i.props[n])){t[n]=e[n];for(const r in e)r.startsWith(`${n}-`)&&(t[r]=e[r])}for(const n in i.props){if(I_.includes(n)||e.hasOwnProperty(n))continue;const{root:r,key:s}=Y6(i.object,n);if(r.constructor&&r.constructor.length===0){const a=Lce(r);br.und(a)||(t[s]=a[s])}else t[s]=0}return t}const Uce=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],Oce=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Nu(i,e){var t;const n=i.__r3f,r=n&&PO(n).getState(),s=n?.eventCount;for(const o in e){let l=e[o];if(I_.includes(o))continue;if(n&&Oce.test(o)){typeof l=="function"?n.handlers[o]=l:delete n.handlers[o],n.eventCount=Object.keys(n.handlers).length;continue}if(l===void 0)continue;let{root:u,key:c,target:p}=Y6(i,o);if(p instanceof I5&&l instanceof I5)p.mask=l.mask;else if(p instanceof Dt&&Rce(l))p.set(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof p.copy=="function"&&l!=null&&l.constructor&&p.constructor===l.constructor)p.copy(l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&Array.isArray(l))typeof p.fromArray=="function"?p.fromArray(l):p.set(...l);else if(p!==null&&typeof p=="object"&&typeof p.set=="function"&&typeof l=="number")typeof p.setScalar=="function"?p.setScalar(l):p.set(l);else{var a;u[c]=l,r&&!r.linear&&Uce.includes(c)&&(a=u[c])!=null&&a.isTexture&&u[c].format===nr&&u[c].type===Ar&&(u[c].colorSpace=Qr)}}if(n!=null&&n.parent&&r!=null&&r.internal&&(t=n.object)!=null&&t.isObject3D&&s!==n.eventCount){const o=n.object,l=r.internal.interaction.indexOf(o);l>-1&&r.internal.interaction.splice(l,1),n.eventCount&&o.raycast!==null&&r.internal.interaction.push(o)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&c8(n),i}function c8(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function Fce(i,e){i.manual||(DO(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const Fa=i=>i?.isObject3D;function md(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function UO(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function Vce(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{UO(t.capturedMap,e,n,r)})}function zce(i){function e(l){const{internal:u}=i.getState(),c=l.offsetX-u.initialClick[0],p=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+p*p))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var p;return(p=u.__r3f)==null?void 0:p.handlers["onPointer"+c]}))}function n(l,u){const c=i.getState(),p=new Set,y=[],_=u?u(c.internal.interaction):c.internal.interaction;for(let M=0;M<_.length;M++){const P=e5(_[M]);P&&(P.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function b(M){const P=e5(M);if(!P||!P.events.enabled||P.raycaster.camera===null)return[];if(P.raycaster.camera===void 0){var D;P.events.compute==null||P.events.compute(l,P,(D=P.previousRoot)==null?void 0:D.getState()),P.raycaster.camera===void 0&&(P.raycaster.camera=null)}return P.raycaster.camera?P.raycaster.intersectObject(M,!0):[]}let w=_.flatMap(b).sort((M,P)=>{const D=e5(M.object),B=e5(P.object);return!D||!B?M.distance-P.distance:B.events.priority-D.events.priority||M.distance-P.distance}).filter(M=>{const P=md(M);return p.has(P)?!1:(p.add(P),!0)});c.events.filter&&(w=c.events.filter(w,c));for(const M of w){let P=M.object;for(;P;){var E;(E=P.__r3f)!=null&&E.eventCount&&y.push({...M,eventObject:P}),P=P.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let M of c.internal.capturedMap.get(l.pointerId).values())p.has(md(M.intersection))||y.push(M.intersection);return y}function r(l,u,c,p){if(l.length){const y={stopped:!1};for(const _ of l){let b=e5(_.object);if(b||_.object.traverseAncestors(w=>{const E=e5(w);if(E)return b=E,!1}),b){const{raycaster:w,pointer:E,camera:M,internal:P}=b,D=new te(E.x,E.y,0).unproject(M),B=F=>{var G,j;return(G=(j=P.capturedMap.get(F))==null?void 0:j.has(_.eventObject))!=null?G:!1},U=F=>{const G={intersection:_,target:u.target};P.capturedMap.has(F)?P.capturedMap.get(F).set(_.eventObject,G):P.capturedMap.set(F,new Map([[_.eventObject,G]])),u.target.setPointerCapture(F)},O=F=>{const G=P.capturedMap.get(F);G&&UO(P.capturedMap,_.eventObject,G,F)};let z={};for(let F in u){let G=u[F];typeof G!="function"&&(z[F]=G)}let q={..._,...z,pointer:E,intersections:l,stopped:y.stopped,delta:c,unprojectedPoint:D,ray:w.ray,camera:M,stopPropagation(){const F="pointerId"in u&&P.capturedMap.get(u.pointerId);if((!F||F.has(_.eventObject))&&(q.stopped=y.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(G=>G.eventObject===_.eventObject))){const G=l.slice(0,l.indexOf(_));s([...G,_])}},target:{hasPointerCapture:B,setPointerCapture:U,releasePointerCapture:O},currentTarget:{hasPointerCapture:B,setPointerCapture:U,releasePointerCapture:O},nativeEvent:u};if(p(q),y.stopped===!0)break}}}return l}function s(l){const{internal:u}=i.getState();for(const c of u.hovered.values())if(!l.length||!l.find(p=>p.object===c.object&&p.index===c.index&&p.instanceId===c.instanceId)){const y=c.eventObject.__r3f;if(u.hovered.delete(md(c)),y!=null&&y.eventCount){const _=y.handlers,b={...c,intersections:l};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function a(l,u){for(let c=0;c<u.length;c++){const p=u[c].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=i.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:p,internal:y}=i.getState();y.lastEvent.current=c;const _=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",E=n(c,_?t:void 0),M=b?e(c):0;l==="onPointerDown"&&(y.initialClick=[c.offsetX,c.offsetY],y.initialHits=E.map(D=>D.eventObject)),b&&!E.length&&M<=2&&(a(c,y.interaction),p&&p(c)),_&&s(E);function P(D){const B=D.eventObject,U=B.__r3f;if(!(U!=null&&U.eventCount))return;const O=U.handlers;if(_){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const z=md(D),q=y.hovered.get(z);q?q.stopped&&D.stopPropagation():(y.hovered.set(z,D),O.onPointerOver==null||O.onPointerOver(D),O.onPointerEnter==null||O.onPointerEnter(D))}O.onPointerMove==null||O.onPointerMove(D)}else{const z=O[l];z?(!b||y.initialHits.includes(B))&&(a(c,y.interaction.filter(q=>!y.initialHits.includes(q))),z(D)):b&&y.initialHits.includes(B)&&a(c,y.interaction.filter(q=>!y.initialHits.includes(q)))}}r(E,c,M,P)}}return{handlePointer:o}}const mC=i=>!!(i!=null&&i.render),OO=yn.createContext(null),Gce=(i,e)=>{const t=Ace((o,l)=>{const u=new te,c=new te,p=new te;function y(M=l().camera,P=c,D=l().size){const{width:B,height:U,top:O,left:z}=D,q=B/U;P.isVector3?p.copy(P):p.set(...P);const F=M.getWorldPosition(u).distanceTo(p);if(DO(M))return{width:B/M.zoom,height:U/M.zoom,top:O,left:z,factor:1,distance:F,aspect:q};{const G=M.fov*Math.PI/180,j=2*Math.tan(G/2)*F,$=j*(B/U);return{width:$,height:j,top:O,left:z,factor:B/$,distance:F,aspect:q}}}let _;const b=M=>o(P=>({performance:{...P.performance,current:M}})),w=new He;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>i(l(),M),advance:(M,P)=>e(M,P,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Wx,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=l();_&&clearTimeout(_),M.performance.current!==M.performance.min&&b(M.performance.min),_=setTimeout(()=>b(l().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:M=>o(P=>({...P,events:{...P.events,...M}})),setSize:(M,P,D=0,B=0)=>{const U=l().camera,O={width:M,height:P,top:D,left:B};o(z=>({size:O,viewport:{...z.viewport,...y(U,c,O)}}))},setDpr:M=>o(P=>{const D=LO(M);return{viewport:{...P.viewport,dpr:D,initialDpr:P.viewport.initialDpr||D}}}),setFrameloop:(M="always")=>{const P=l().clock;P.stop(),P.elapsedTime=0,M!=="never"&&(P.start(),P.elapsedTime=0),o(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:yn.createRef(),active:!1,frames:0,priority:0,subscribe:(M,P,D)=>{const B=l().internal;return B.priority=B.priority+(P>0?1:0),B.subscribers.push({ref:M,priority:P,store:D}),B.subscribers=B.subscribers.sort((U,O)=>U.priority-O.priority),()=>{const U=l().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(P>0?1:0),U.subscribers=U.subscribers.filter(O=>O.ref!==M))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,a=n.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:c,set:p}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){r=l,s=u.dpr,Fce(o,l),u.dpr>0&&c.setPixelRatio(u.dpr);const y=typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,y)}o!==a&&(a=o,p(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>i(o)),t};function FO(){const i=yn.useContext(OO);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function p1(i=t=>t,e){return FO()(i,e)}function qce(i,e=0){const t=FO(),n=t.getState().internal.subscribe,r=BO(i);return D7(()=>n(r,e,t),[e,n,t]),null}function kce(i){const e=_ce(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:yn.version}),e}const VO=0,K5={},Hce=/^three(?=[A-Z])/,_m=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let Wce=0;const jce=i=>typeof i=="function";function zO(i){if(jce(i)){const e=`${Wce++}`;return K5[e]=i,e}else Object.assign(K5,i)}function GO(i,e){const t=_m(i),n=K5[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Xce(i,e,t){var n;return i=_m(i)in K5?i:i.replace(Hce,""),GO(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,HA(e.object,t,i,e)}function Yce(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?jA(i.parent,i):Fa(i.object)&&(i.object.visible=!1),i.isHidden=!0,c8(i)}}function qO(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?WA(i.parent,i):Fa(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,c8(i)}}function qS(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var r,s;const a=K5[_m(e.type)];e.object=(r=e.props.object)!=null?r:new a(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Nu(e.object,e.props),e.props.attach)WA(i,e);else if(Fa(e.object)&&Fa(i.object)){const a=i.object.children.indexOf(t?.object);if(t&&a!==-1){const o=i.object.children.indexOf(e.object);if(o!==-1){i.object.children.splice(o,1);const l=o<a?a-1:a;i.object.children.splice(l,0,e.object)}else e.object.parent=i.object,i.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const a of e.children)qS(e,a);c8(e)}}function nv(i,e){e&&(e.parent=i,i.children.push(e),qS(i,e))}function gC(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),qS(i,e,t)}function kO(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():dC.unstable_scheduleCallback(dC.unstable_IdlePriority,e)}}function U_(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?jA(i,e):Fa(e.object)&&Fa(i.object)&&(i.object.remove(e.object),Vce(PO(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const a=e.children[s];U_(e,a,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&kO(e.object),t===void 0&&c8(e)}function Qce(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const Fd=[];function $ce(){for(const[t]of Fd){const n=t.parent;if(n){t.props.attach?jA(n,t):Fa(t.object)&&Fa(n.object)&&n.object.remove(t.object);for(const r of t.children)r.props.attach?jA(t,r):Fa(r.object)&&Fa(t.object)&&t.object.remove(r.object)}t.isHidden&&qO(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&kO(t.object)}for(const[t,n,r]of Fd){t.props=n;const s=t.parent;if(s){var i,e;const a=K5[_m(t.type)];t.object=(i=t.props.object)!=null?i:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,Qce(r,t.object),Nu(t.object,t.props),t.props.attach?WA(s,t):Fa(t.object)&&Fa(s.object)&&s.object.add(t.object);for(const o of t.children)o.props.attach?WA(t,o):Fa(o.object)&&Fa(t.object)&&t.object.add(o.object);c8(t)}}Fd.length=0}const iv=()=>{},yC={};let gd=VO;const Kce=0,Zce=4,O_=kce({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Xce,removeChild:U_,appendChild:nv,appendInitialChild:nv,insertBefore:gC,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||nv(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||U_(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||gC(n,e,t)},getRootHostContext:()=>yC,getChildHostContext:()=>yC,commitUpdate(i,e,t,n,r){var s,a,o;GO(e,n);let l=!1;if((i.type==="primitive"&&t.object!==n.object||((s=n.args)==null?void 0:s.length)!==((a=t.args)==null?void 0:a.length)||(o=n.args)!=null&&o.some((c,p)=>{var y;return c!==((y=t.args)==null?void 0:y[p])}))&&(l=!0),l)Fd.push([i,{...n},r]);else{const c=Ice(i,n);Object.keys(c).length&&(Object.assign(i.props,c),Nu(i.object,c))}(r.sibling===null||(r.flags&Zce)===Kce)&&$ce()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>HA(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Yce,unhideInstance:qO,createTextInstance:iv,hideTextInstance:iv,unhideTextInstance:iv,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:yn.createContext(null),setCurrentUpdatePriority(i){gd=i},getCurrentUpdatePriority(){return gd},resolveUpdatePriority(){var i;if(gd!==VO)return gd;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Od.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Od.ContinuousEventPriority;default:return Od.DefaultEventPriority}},resetFormInstance(){}}),s3=new Map,t5={objects:"shallow",strict:!1};function Jce(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:r,left:s}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function e3e(i){const e=s3.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||Gce(z_,_C),a=t||O_.createContainer(s,Od.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||s3.set(i,{fiber:a,store:s});let o,l,u=!1,c=null;return{async configure(p={}){let y;c=new Promise(Ce=>y=Ce);let{gl:_,size:b,scene:w,events:E,onCreated:M,shadows:P=!1,linear:D=!1,flat:B=!1,legacy:U=!1,orthographic:O=!1,frameloop:z="always",dpr:q=[1,2],performance:F,raycaster:G,camera:j,onPointerMissed:$}=p,K=s.getState(),ie=K.gl;if(!K.gl){const Ce={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},Ye=typeof _=="function"?await _(Ce):_;mC(Ye)?ie=Ye:ie=new kN({...Ce,..._}),K.set({gl:ie})}let ee=K.raycaster;ee||K.set({raycaster:ee=new BN});const{params:X,...re}=G||{};if(br.equ(re,ee,t5)||Nu(ee,{...re}),br.equ(X,ee.params,t5)||Nu(ee,{params:{...ee.params,...X}}),!K.camera||K.camera===l&&!br.equ(l,j,t5)){l=j;const Ce=j?.isCamera,Ye=Ce?j:O?new Ml(0,0,0,0,.1,1e3):new ar(75,0,.1,1e3);Ce||(Ye.position.z=5,j&&(Nu(Ye,j),Ye.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(Ye.manual=!0,Ye.updateProjectionMatrix())),!K.camera&&!(j!=null&&j.rotation)&&Ye.lookAt(0,0,0)),K.set({camera:Ye}),ee.camera=Ye}if(!K.scene){let Ce;w!=null&&w.isScene?(Ce=w,HA(Ce,s,"",{})):(Ce=new h3,HA(Ce,s,"",{}),w&&Nu(Ce,w)),K.set({scene:Ce})}E&&!K.events.handlers&&K.set({events:E(s)});const se=Jce(i,b);if(br.equ(se,K.size,t5)||K.setSize(se.width,se.height,se.top,se.left),q&&K.viewport.dpr!==LO(q)&&K.setDpr(q),K.frameloop!==z&&K.setFrameloop(z),K.onPointerMissed||K.set({onPointerMissed:$}),F&&!br.equ(F,K.performance,t5)&&K.set(Ce=>({performance:{...Ce.performance,...F}})),!K.xr){var Ae;const Ce=(pt,yt)=>{const Oe=s.getState();Oe.frameloop!=="never"&&_C(pt,!0,Oe,yt)},Ye=()=>{const pt=s.getState();pt.gl.xr.enabled=pt.gl.xr.isPresenting,pt.gl.xr.setAnimationLoop(pt.gl.xr.isPresenting?Ce:null),pt.gl.xr.isPresenting||z_(pt)},it={connect(){const pt=s.getState().gl;pt.xr.addEventListener("sessionstart",Ye),pt.xr.addEventListener("sessionend",Ye)},disconnect(){const pt=s.getState().gl;pt.xr.removeEventListener("sessionstart",Ye),pt.xr.removeEventListener("sessionend",Ye)}};typeof((Ae=ie.xr)==null?void 0:Ae.addEventListener)=="function"&&it.connect(),K.set({xr:it})}if(ie.shadowMap){const Ce=ie.shadowMap.enabled,Ye=ie.shadowMap.type;if(ie.shadowMap.enabled=!!P,br.boo(P))ie.shadowMap.type=e6;else if(br.str(P)){var Se;const it={basic:j_,percentage:Q6,soft:e6,variance:xa};ie.shadowMap.type=(Se=it[P])!=null?Se:e6}else br.obj(P)&&Object.assign(ie.shadowMap,P);(Ce!==ie.shadowMap.enabled||Ye!==ie.shadowMap.type)&&(ie.shadowMap.needsUpdate=!0)}return gn.enabled=!U,u||(ie.outputColorSpace=D?Ll:Qr,ie.toneMapping=B?oa:rp),K.legacy!==U&&K.set(()=>({legacy:U})),K.linear!==D&&K.set(()=>({linear:D})),K.flat!==B&&K.set(()=>({flat:B})),_&&!br.fun(_)&&!mC(_)&&!br.equ(_,ie,t5)&&Nu(ie,_),o=M,u=!0,y(),this},render(p){return!u&&!c&&this.configure(),c.then(()=>{O_.updateContainer(Ir.jsx(t3e,{store:s,children:p,onCreated:o,rootElement:i}),a,null,()=>{})}),s},unmount(){HO(i)}}}function t3e({store:i,children:e,onCreated:t,rootElement:n}){return D7(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),Ir.jsx(OO.Provider,{value:i,children:e})}function HO(i,e){const t=s3.get(i),n=t?.fiber;if(n){const r=t?.store.getState();r&&(r.internal.active=!1),O_.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Dce(r.scene),s3.delete(i)}catch{}},500)})}}const n3e=new Set,i3e=new Set,r3e=new Set;function rv(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function p6(i,e){switch(i){case"before":return rv(n3e,e);case"after":return rv(i3e,e);case"tail":return rv(r3e,e)}}let sv,av;function F_(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),sv=e.internal.subscribers;for(let r=0;r<sv.length;r++)av=sv[r],av.ref.current(av.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let XA=!1,V_=!1,ov,vC,n5;function WO(i){vC=requestAnimationFrame(WO),XA=!0,ov=0,p6("before",i),V_=!0;for(const t of s3.values()){var e;n5=t.store.getState(),n5.internal.active&&(n5.frameloop==="always"||n5.internal.frames>0)&&!((e=n5.gl.xr)!=null&&e.isPresenting)&&(ov+=F_(i,n5))}if(V_=!1,p6("after",i),ov===0)return p6("tail",i),XA=!1,cancelAnimationFrame(vC)}function z_(i,e=1){var t;if(!i)return s3.forEach(n=>z_(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):V_?i.internal.frames=2:i.internal.frames=1,XA||(XA=!0,requestAnimationFrame(WO)))}function _C(i,e=!0,t,n){if(e&&p6("before",i),t)F_(i,t,n);else for(const r of s3.values())F_(i,r.store.getState());e&&p6("after",i)}const lv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function s3e(i){const{handlePointer:e}=zce(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(lv).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:n,events:r}=i.getState();if(r.disconnect==null||r.disconnect(),n(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const a=r.handlers[s],[o,l]=lv[s];t.addEventListener(o,a,{passive:l})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const r in n.handlers){const s=n.handlers[r],[a]=lv[r];n.connected.removeEventListener(a,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function xC(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function a3e({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=yn.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),o=yn.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,u=i?typeof i=="number"?i:i.resize:null,c=yn.useRef(!1);yn.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[p,y,_]=yn.useMemo(()=>{const M=()=>{if(!o.current.element)return;const{left:P,top:D,width:B,height:U,bottom:O,right:z,x:q,y:F}=o.current.element.getBoundingClientRect(),G={left:P,top:D,width:B,height:U,bottom:O,right:z,x:q,y:F};o.current.element instanceof HTMLElement&&n&&(G.height=o.current.element.offsetHeight,G.width=o.current.element.offsetWidth),Object.freeze(G),c.current&&!c3e(o.current.lastBounds,G)&&a(o.current.lastBounds=G)};return[M,u?xC(M,u):M,l?xC(M,l):M]},[a,n,l,u]);function b(){o.current.scrollContainers&&(o.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",_,!0)),o.current.scrollContainers=null),o.current.resizeObserver&&(o.current.resizeObserver.disconnect(),o.current.resizeObserver=null),o.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",o.current.orientationHandler))}function w(){o.current.element&&(o.current.resizeObserver=new r(_),o.current.resizeObserver.observe(o.current.element),e&&o.current.scrollContainers&&o.current.scrollContainers.forEach(M=>M.addEventListener("scroll",_,{capture:!0,passive:!0})),o.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",o.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",o.current.orientationHandler))}const E=M=>{!M||M===o.current.element||(b(),o.current.element=M,o.current.scrollContainers=jO(M),w())};return l3e(_,!!e),o3e(y),yn.useEffect(()=>{b(),w()},[e,_,y]),yn.useEffect(()=>b,[]),[E,s,p]}function o3e(i){yn.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function l3e(i,e){yn.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function jO(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...jO(i.parentElement)]}const u3e=["x","y","top","bottom","left","right","width","height"],c3e=(i,e)=>u3e.every(t=>i[t]===e[t]);function h3e({ref:i,children:e,fallback:t,resize:n,style:r,gl:s,events:a=s3e,eventSource:o,eventPrefix:l,shadows:u,linear:c,flat:p,legacy:y,orthographic:_,frameloop:b,dpr:w,performance:E,raycaster:M,camera:P,scene:D,onPointerMissed:B,onCreated:U,...O}){yn.useMemo(()=>zO(nX),[]);const z=Cce(),[q,F]=a3e({scroll:!0,debounce:{scroll:50,resize:0},...n}),G=yn.useRef(null),j=yn.useRef(null);yn.useImperativeHandle(i,()=>G.current);const $=BO(B),[K,ie]=yn.useState(!1),[ee,X]=yn.useState(!1);if(K)throw K;if(ee)throw ee;const re=yn.useRef(null);D7(()=>{const Ae=G.current;if(F.width>0&&F.height>0&&Ae){re.current||(re.current=e3e(Ae));async function Se(){await re.current.configure({gl:s,scene:D,events:a,shadows:u,linear:c,flat:p,legacy:y,orthographic:_,frameloop:b,dpr:w,performance:E,raycaster:M,camera:P,size:F,onPointerMissed:(...Ce)=>$.current==null?void 0:$.current(...Ce),onCreated:Ce=>{Ce.events.connect==null||Ce.events.connect(o?wce(o)?o.current:o:j.current),l&&Ce.setEvents({compute:(Ye,it)=>{const pt=Ye[l+"X"],yt=Ye[l+"Y"];it.pointer.set(pt/it.size.width*2-1,-(yt/it.size.height)*2+1),it.raycaster.setFromCamera(it.pointer,it.camera)}}),U?.(Ce)}}),re.current.render(Ir.jsx(z,{children:Ir.jsx(Pce,{set:X,children:Ir.jsx(yn.Suspense,{fallback:Ir.jsx(Nce,{set:ie}),children:e??null})})}))}Se()}}),yn.useEffect(()=>{const Ae=G.current;if(Ae)return()=>HO(Ae)},[]);const se=o?"none":"auto";return Ir.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:se,...r},...O,children:Ir.jsx("div",{ref:q,style:{width:"100%",height:"100%"},children:Ir.jsx("canvas",{ref:G,style:{display:"block"},children:t})})})}function f3e(i){return Ir.jsx(CO,{children:Ir.jsx(h3e,{...i})})}function G_(){return G_=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},G_.apply(null,arguments)}var d3e=Object.defineProperty,A3e=(i,e,t)=>e in i?d3e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,p3e=(i,e,t)=>(A3e(i,e+"",t),t);class m3e{constructor(){p3e(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var g3e=Object.defineProperty,y3e=(i,e,t)=>e in i?g3e(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,wn=(i,e,t)=>(y3e(i,typeof e!="symbol"?e+"":e,t),t);const yd=new u3,bC=new I0,v3e=Math.cos(70*(Math.PI/180)),SC=(i,e)=>(i%e+e)%e;let _3e=class extends m3e{constructor(e,t){super(),wn(this,"object"),wn(this,"domElement"),wn(this,"enabled",!0),wn(this,"target",new te),wn(this,"minDistance",0),wn(this,"maxDistance",1/0),wn(this,"minZoom",0),wn(this,"maxZoom",1/0),wn(this,"minPolarAngle",0),wn(this,"maxPolarAngle",Math.PI),wn(this,"minAzimuthAngle",-1/0),wn(this,"maxAzimuthAngle",1/0),wn(this,"enableDamping",!1),wn(this,"dampingFactor",.05),wn(this,"enableZoom",!0),wn(this,"zoomSpeed",1),wn(this,"enableRotate",!0),wn(this,"rotateSpeed",1),wn(this,"enablePan",!0),wn(this,"panSpeed",1),wn(this,"screenSpacePanning",!0),wn(this,"keyPanSpeed",7),wn(this,"zoomToCursor",!1),wn(this,"autoRotate",!1),wn(this,"autoRotateSpeed",2),wn(this,"reverseOrbit",!1),wn(this,"reverseHorizontalOrbit",!1),wn(this,"reverseVerticalOrbit",!1),wn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),wn(this,"mouseButtons",{LEFT:Z2.ROTATE,MIDDLE:Z2.DOLLY,RIGHT:Z2.PAN}),wn(this,"touches",{ONE:J2.ROTATE,TWO:J2.DOLLY_PAN}),wn(this,"target0"),wn(this,"position0"),wn(this,"zoom0"),wn(this,"_domElementKeyEvents",null),wn(this,"getPolarAngle"),wn(this,"getAzimuthalAngle"),wn(this,"setPolarAngle"),wn(this,"setAzimuthalAngle"),wn(this,"getDistance"),wn(this,"getZoomScale"),wn(this,"listenToKeyEvents"),wn(this,"stopListenToKeyEvents"),wn(this,"saveState"),wn(this,"reset"),wn(this,"update"),wn(this,"connect"),wn(this,"dispose"),wn(this,"dollyIn"),wn(this,"dollyOut"),wn(this,"getScale"),wn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ge=>{let Ue=SC(ge,2*Math.PI),Mt=c.phi;Mt<0&&(Mt+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let le=Math.abs(Ue-Mt);2*Math.PI-le<le&&(Ue<Mt?Ue+=2*Math.PI:Mt+=2*Math.PI),p.phi=Ue-Mt,n.update()},this.setAzimuthalAngle=ge=>{let Ue=SC(ge,2*Math.PI),Mt=c.theta;Mt<0&&(Mt+=2*Math.PI),Ue<0&&(Ue+=2*Math.PI);let le=Math.abs(Ue-Mt);2*Math.PI-le<le&&(Ue<Mt?Ue+=2*Math.PI:Mt+=2*Math.PI),p.theta=Ue-Mt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ge=>{ge.addEventListener("keydown",Qe),this._domElementKeyEvents=ge},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Qe),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=o.NONE},this.update=(()=>{const ge=new te,Ue=new te(0,1,0),Mt=new Gs().setFromUnitVectors(e.up,Ue),le=Mt.clone().invert(),ut=new te,bt=new Gs,Gt=2*Math.PI;return function(){const at=n.object.position;Mt.setFromUnitVectors(e.up,Ue),le.copy(Mt).invert(),ge.copy(at).sub(n.target),ge.applyQuaternion(Mt),c.setFromVector3(ge),n.autoRotate&&l===o.NONE&&ie($()),n.enableDamping?(c.theta+=p.theta*n.dampingFactor,c.phi+=p.phi*n.dampingFactor):(c.theta+=p.theta,c.phi+=p.phi);let qt=n.minAzimuthAngle,hn=n.maxAzimuthAngle;isFinite(qt)&&isFinite(hn)&&(qt<-Math.PI?qt+=Gt:qt>Math.PI&&(qt-=Gt),hn<-Math.PI?hn+=Gt:hn>Math.PI&&(hn-=Gt),qt<=hn?c.theta=Math.max(qt,Math.min(hn,c.theta)):c.theta=c.theta>(qt+hn)/2?Math.max(qt,c.theta):Math.min(hn,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&F||n.object.isOrthographicCamera?c.radius=it(c.radius):c.radius=it(c.radius*y),ge.setFromSpherical(c),ge.applyQuaternion(le),at.copy(n.target).add(ge),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),_.set(0,0,0));let ei=!1;if(n.zoomToCursor&&F){let Hn=null;if(n.object instanceof ar&&n.object.isPerspectiveCamera){const Er=ge.length();Hn=it(Er*y);const ur=Er-Hn;n.object.position.addScaledVector(z,ur),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Er=new te(q.x,q.y,0);Er.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix(),ei=!0;const ur=new te(q.x,q.y,0);ur.unproject(n.object),n.object.position.sub(ur).add(Er),n.object.updateMatrixWorld(),Hn=ge.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Hn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Hn).add(n.object.position):(yd.origin.copy(n.object.position),yd.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(yd.direction))<v3e?e.lookAt(n.target):(bC.setFromNormalAndCoplanarPoint(n.object.up,n.target),yd.intersectPlane(bC,n.target))))}else n.object instanceof Ml&&n.object.isOrthographicCamera&&(ei=y!==1,ei&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/y)),n.object.updateProjectionMatrix()));return y=1,F=!1,ei||ut.distanceToSquared(n.object.position)>u||8*(1-bt.dot(n.object.quaternion))>u?(n.dispatchEvent(r),ut.copy(n.object.position),bt.copy(n.object.quaternion),ei=!1,!0):!1}})(),this.connect=ge=>{n.domElement=ge,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",Zt),n.domElement.addEventListener("pointerdown",Sn),n.domElement.addEventListener("pointercancel",J),n.domElement.addEventListener("wheel",ht)},this.dispose=()=>{var ge,Ue,Mt,le,ut,bt;n.domElement&&(n.domElement.style.touchAction="auto"),(ge=n.domElement)==null||ge.removeEventListener("contextmenu",Zt),(Ue=n.domElement)==null||Ue.removeEventListener("pointerdown",Sn),(Mt=n.domElement)==null||Mt.removeEventListener("pointercancel",J),(le=n.domElement)==null||le.removeEventListener("wheel",ht),(ut=n.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",de),(bt=n.domElement)==null||bt.ownerDocument.removeEventListener("pointerup",J),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Qe)};const n=this,r={type:"change"},s={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,c=new yv,p=new yv;let y=1;const _=new te,b=new He,w=new He,E=new He,M=new He,P=new He,D=new He,B=new He,U=new He,O=new He,z=new te,q=new He;let F=!1;const G=[],j={};function $(){return 2*Math.PI/60/60*n.autoRotateSpeed}function K(){return Math.pow(.95,n.zoomSpeed)}function ie(ge){n.reverseOrbit||n.reverseHorizontalOrbit?p.theta+=ge:p.theta-=ge}function ee(ge){n.reverseOrbit||n.reverseVerticalOrbit?p.phi+=ge:p.phi-=ge}const X=(()=>{const ge=new te;return function(Mt,le){ge.setFromMatrixColumn(le,0),ge.multiplyScalar(-Mt),_.add(ge)}})(),re=(()=>{const ge=new te;return function(Mt,le){n.screenSpacePanning===!0?ge.setFromMatrixColumn(le,1):(ge.setFromMatrixColumn(le,0),ge.crossVectors(n.object.up,ge)),ge.multiplyScalar(Mt),_.add(ge)}})(),se=(()=>{const ge=new te;return function(Mt,le){const ut=n.domElement;if(ut&&n.object instanceof ar&&n.object.isPerspectiveCamera){const bt=n.object.position;ge.copy(bt).sub(n.target);let Gt=ge.length();Gt*=Math.tan(n.object.fov/2*Math.PI/180),X(2*Mt*Gt/ut.clientHeight,n.object.matrix),re(2*le*Gt/ut.clientHeight,n.object.matrix)}else ut&&n.object instanceof Ml&&n.object.isOrthographicCamera?(X(Mt*(n.object.right-n.object.left)/n.object.zoom/ut.clientWidth,n.object.matrix),re(le*(n.object.top-n.object.bottom)/n.object.zoom/ut.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function Ae(ge){n.object instanceof ar&&n.object.isPerspectiveCamera||n.object instanceof Ml&&n.object.isOrthographicCamera?y=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Se(ge){Ae(y/ge)}function Ce(ge){Ae(y*ge)}function Ye(ge){if(!n.zoomToCursor||!n.domElement)return;F=!0;const Ue=n.domElement.getBoundingClientRect(),Mt=ge.clientX-Ue.left,le=ge.clientY-Ue.top,ut=Ue.width,bt=Ue.height;q.x=Mt/ut*2-1,q.y=-(le/bt)*2+1,z.set(q.x,q.y,1).unproject(n.object).sub(n.object.position).normalize()}function it(ge){return Math.max(n.minDistance,Math.min(n.maxDistance,ge))}function pt(ge){b.set(ge.clientX,ge.clientY)}function yt(ge){Ye(ge),B.set(ge.clientX,ge.clientY)}function Oe(ge){M.set(ge.clientX,ge.clientY)}function Xe(ge){w.set(ge.clientX,ge.clientY),E.subVectors(w,b).multiplyScalar(n.rotateSpeed);const Ue=n.domElement;Ue&&(ie(2*Math.PI*E.x/Ue.clientHeight),ee(2*Math.PI*E.y/Ue.clientHeight)),b.copy(w),n.update()}function Tt(ge){U.set(ge.clientX,ge.clientY),O.subVectors(U,B),O.y>0?Se(K()):O.y<0&&Ce(K()),B.copy(U),n.update()}function Ft(ge){P.set(ge.clientX,ge.clientY),D.subVectors(P,M).multiplyScalar(n.panSpeed),se(D.x,D.y),M.copy(P),n.update()}function Pt(ge){Ye(ge),ge.deltaY<0?Ce(K()):ge.deltaY>0&&Se(K()),n.update()}function ln(ge){let Ue=!1;switch(ge.code){case n.keys.UP:se(0,n.keyPanSpeed),Ue=!0;break;case n.keys.BOTTOM:se(0,-n.keyPanSpeed),Ue=!0;break;case n.keys.LEFT:se(n.keyPanSpeed,0),Ue=!0;break;case n.keys.RIGHT:se(-n.keyPanSpeed,0),Ue=!0;break}Ue&&(ge.preventDefault(),n.update())}function Dn(){if(G.length==1)b.set(G[0].pageX,G[0].pageY);else{const ge=.5*(G[0].pageX+G[1].pageX),Ue=.5*(G[0].pageY+G[1].pageY);b.set(ge,Ue)}}function pe(){if(G.length==1)M.set(G[0].pageX,G[0].pageY);else{const ge=.5*(G[0].pageX+G[1].pageX),Ue=.5*(G[0].pageY+G[1].pageY);M.set(ge,Ue)}}function Je(){const ge=G[0].pageX-G[1].pageX,Ue=G[0].pageY-G[1].pageY,Mt=Math.sqrt(ge*ge+Ue*Ue);B.set(0,Mt)}function et(){n.enableZoom&&Je(),n.enablePan&&pe()}function tt(){n.enableZoom&&Je(),n.enableRotate&&Dn()}function ke(ge){if(G.length==1)w.set(ge.pageX,ge.pageY);else{const Mt=dn(ge),le=.5*(ge.pageX+Mt.x),ut=.5*(ge.pageY+Mt.y);w.set(le,ut)}E.subVectors(w,b).multiplyScalar(n.rotateSpeed);const Ue=n.domElement;Ue&&(ie(2*Math.PI*E.x/Ue.clientHeight),ee(2*Math.PI*E.y/Ue.clientHeight)),b.copy(w)}function xt(ge){if(G.length==1)P.set(ge.pageX,ge.pageY);else{const Ue=dn(ge),Mt=.5*(ge.pageX+Ue.x),le=.5*(ge.pageY+Ue.y);P.set(Mt,le)}D.subVectors(P,M).multiplyScalar(n.panSpeed),se(D.x,D.y),M.copy(P)}function ft(ge){const Ue=dn(ge),Mt=ge.pageX-Ue.x,le=ge.pageY-Ue.y,ut=Math.sqrt(Mt*Mt+le*le);U.set(0,ut),O.set(0,Math.pow(U.y/B.y,n.zoomSpeed)),Se(O.y),B.copy(U)}function wt(ge){n.enableZoom&&ft(ge),n.enablePan&&xt(ge)}function cn(ge){n.enableZoom&&ft(ge),n.enableRotate&&ke(ge)}function Sn(ge){var Ue,Mt;n.enabled!==!1&&(G.length===0&&((Ue=n.domElement)==null||Ue.ownerDocument.addEventListener("pointermove",de),(Mt=n.domElement)==null||Mt.ownerDocument.addEventListener("pointerup",J)),en(ge),ge.pointerType==="touch"?nn(ge):Le(ge))}function de(ge){n.enabled!==!1&&(ge.pointerType==="touch"?Ct(ge):We(ge))}function J(ge){var Ue,Mt,le;At(ge),G.length===0&&((Ue=n.domElement)==null||Ue.releasePointerCapture(ge.pointerId),(Mt=n.domElement)==null||Mt.ownerDocument.removeEventListener("pointermove",de),(le=n.domElement)==null||le.ownerDocument.removeEventListener("pointerup",J)),n.dispatchEvent(a),l=o.NONE}function Le(ge){let Ue;switch(ge.button){case 0:Ue=n.mouseButtons.LEFT;break;case 1:Ue=n.mouseButtons.MIDDLE;break;case 2:Ue=n.mouseButtons.RIGHT;break;default:Ue=-1}switch(Ue){case Z2.DOLLY:if(n.enableZoom===!1)return;yt(ge),l=o.DOLLY;break;case Z2.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enablePan===!1)return;Oe(ge),l=o.PAN}else{if(n.enableRotate===!1)return;pt(ge),l=o.ROTATE}break;case Z2.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enableRotate===!1)return;pt(ge),l=o.ROTATE}else{if(n.enablePan===!1)return;Oe(ge),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}function We(ge){if(n.enabled!==!1)switch(l){case o.ROTATE:if(n.enableRotate===!1)return;Xe(ge);break;case o.DOLLY:if(n.enableZoom===!1)return;Tt(ge);break;case o.PAN:if(n.enablePan===!1)return;Ft(ge);break}}function ht(ge){n.enabled===!1||n.enableZoom===!1||l!==o.NONE&&l!==o.ROTATE||(ge.preventDefault(),n.dispatchEvent(s),Pt(ge),n.dispatchEvent(a))}function Qe(ge){n.enabled===!1||n.enablePan===!1||ln(ge)}function nn(ge){switch(Lt(ge),G.length){case 1:switch(n.touches.ONE){case J2.ROTATE:if(n.enableRotate===!1)return;Dn(),l=o.TOUCH_ROTATE;break;case J2.PAN:if(n.enablePan===!1)return;pe(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(n.touches.TWO){case J2.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;et(),l=o.TOUCH_DOLLY_PAN;break;case J2.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;tt(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}function Ct(ge){switch(Lt(ge),l){case o.TOUCH_ROTATE:if(n.enableRotate===!1)return;ke(ge),n.update();break;case o.TOUCH_PAN:if(n.enablePan===!1)return;xt(ge),n.update();break;case o.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;wt(ge),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;cn(ge),n.update();break;default:l=o.NONE}}function Zt(ge){n.enabled!==!1&&ge.preventDefault()}function en(ge){G.push(ge)}function At(ge){delete j[ge.pointerId];for(let Ue=0;Ue<G.length;Ue++)if(G[Ue].pointerId==ge.pointerId){G.splice(Ue,1);return}}function Lt(ge){let Ue=j[ge.pointerId];Ue===void 0&&(Ue=new He,j[ge.pointerId]=Ue),Ue.set(ge.pageX,ge.pageY)}function dn(ge){const Ue=ge.pointerId===G[0].pointerId?G[1]:G[0];return j[Ue.pointerId]}this.dollyIn=(ge=K())=>{Ce(ge),n.update()},this.dollyOut=(ge=K())=>{Se(ge),n.update()},this.getScale=()=>y,this.setScale=ge=>{Ae(ge),n.update()},this.getZoomScale=()=>K(),t!==void 0&&this.connect(t),this.update()}};const x3e=yn.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:o,onEnd:l,...u},c)=>{const p=p1(O=>O.invalidate),y=p1(O=>O.camera),_=p1(O=>O.gl),b=p1(O=>O.events),w=p1(O=>O.setEvents),E=p1(O=>O.set),M=p1(O=>O.get),P=p1(O=>O.performance),D=e||y,B=n||b.connected||_.domElement,U=yn.useMemo(()=>new _3e(D),[D]);return qce(()=>{U.enabled&&U.update()},-1),yn.useEffect(()=>(s&&U.connect(s===!0?B:s),U.connect(B),()=>void U.dispose()),[s,B,t,U,p]),yn.useEffect(()=>{const O=F=>{p(),t&&P.regress(),a&&a(F)},z=F=>{o&&o(F)},q=F=>{l&&l(F)};return U.addEventListener("change",O),U.addEventListener("start",z),U.addEventListener("end",q),()=>{U.removeEventListener("start",z),U.removeEventListener("end",q),U.removeEventListener("change",O)}},[a,o,l,U,p,w]),yn.useEffect(()=>{if(i){const O=M().controls;return E({controls:U}),()=>E({controls:O})}},[i,U]),yn.createElement("primitive",G_({ref:c,object:U,enableDamping:r},u))}),b3e=JSON.parse(`[{"type":"Feature","properties":{"admin":"Afghanistan","name":"Afghanistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[61.2108170917257,35.6500723333092],[62.2306514830059,35.2706639674223],[62.9846623065766,35.4040408391676],[63.1935384459003,35.8571656357189],[63.9828959491587,36.0079574651466],[64.5464791197339,36.3120732691843],[64.7461051776774,37.1118177353333],[65.5889477883578,37.3052167831856],[65.7456307310668,37.6611640488121],[66.2173848814593,37.3937901881339],[66.5186068052887,37.3627843287588],[67.0757820982596,37.3561439072093],[67.8299996275595,37.1449940048647],[68.1355623717014,37.0231151393043],[68.8594458352459,37.3443358424306],[69.1962728209244,37.1511435003074],[69.518785434858,37.6089966904134],[70.1165784036103,37.5882227646321],[70.2705741718401,37.735164699854],[70.3763041523093,38.1383959010275],[70.8068205097329,38.4862816432164],[71.3481311379903,38.2589053411322],[71.2394039244482,37.9532650823419],[71.5419177590848,37.9057744410656],[71.4486934752302,37.0656448430805],[71.8446382994506,36.7381712916469],[72.1930408059624,36.9482876653457],[72.6368896829173,37.0475580917784],[73.260055779925,37.495256862939],[73.9486959166465,37.4215662704908],[74.9800024758954,37.4199901393059],[75.1580277851409,37.1330309107891],[74.575892775373,37.0208413762835],[74.0675517109178,36.8361756454884],[72.9200248554445,36.7200070256963],[71.8462919452839,36.5099423284299],[71.2623482603857,36.0743875188578],[71.4987679381211,35.650563259416],[71.6130762063507,35.1532034368229],[71.1150187519216,34.7331257187222],[71.1567733092135,34.3489114446321],[70.8818030129884,33.9888559026385],[69.9305432473596,34.0201201441751],[70.3235941913716,33.3585326197584],[69.6871472512649,33.1054989690412],[69.2625220071225,32.5019440780883],[69.3177641132426,31.9014122584244],[68.9266768736577,31.6201891138921],[68.5569320006093,31.713310044882],[67.7926892434448,31.5829304062096],[67.6833935891475,31.3031542017814],[66.9388912291185,31.3049112004793],[66.381457553986,30.7388992375865],[66.3464726093244,29.8879434270362],[65.0468620136161,29.4721806910319],[64.3504187356185,29.5600306259281],[64.1480021503312,29.340819200146],[63.5502608580112,29.4683307968262],[62.5498568052728,29.3185724960443],[60.8742484882088,29.8292389999526],[61.7812215513634,30.7358503280812],[61.6993144061808,31.3795061304927],[60.9419446145111,31.5480746526287],[60.863654819589,32.1829196233344],[60.5360779152908,32.9812688258116],[60.963700392506,33.5288323023763],[60.5284298033116,33.676446031218],[60.8031933938074,34.4041018743199],[61.2108170917257,35.6500723333092]]]}},{"type":"Feature","properties":{"admin":"Angola","name":"Angola","continent":"Africa"},"geometry":{"type":"MultiPolygon","coordinates":[[[[16.326528354567,-5.87747039146622],[16.5731799658961,-6.62264454511509],[16.8601908708452,-7.22229786542998],[17.0899959652472,-7.54568897871247],[17.4729700049623,-8.06855112064166],[18.134221632569,-7.98767750410487],[18.4641756527527,-7.84701425540648],[19.0167517432497,-7.98824594486014],[19.1666133968961,-7.73818368899972],[19.4175024756732,-7.15542856204428],[20.0377230160402,-7.11636117923166],[20.0916215349206,-6.94309010175695],[20.6018229509383,-6.93931772219969],[20.5147481625265,-7.29960580813866],[21.7281107927398,-7.29087249108132],[21.7464559262034,-7.92008473066711],[21.949130893652,-8.3059009741583],[21.801801385188,-8.90870655684299],[21.8751819190424,-9.52370777754856],[22.2087532894864,-9.89479623783653],[22.1552681820643,-11.0848011206538],[22.4027982927424,-10.9930754533357],[22.8373454118848,-11.0176217586743],[23.4567908057675,-10.8678634578925],[23.9122152035557,-10.9268262671375],[24.0178935075926,-11.2372982723471],[23.9041536801182,-11.7222815894063],[24.0799052263429,-12.1912968888873],[23.9309220720454,-12.5658476701388],[24.0161365088947,-12.9110462378486],[21.9338863461259,-12.8984371883694],[21.8878426449539,-16.0803101538769],[22.5624784685243,-16.8984514299218],[23.2150484555061,-17.523116143466],[21.3771761410456,-17.9306364885197],[18.9561869646036,-17.7890947404722],[18.2633093604342,-17.309950860262],[14.2097066585951,-17.3531006812257],[14.058501417709,-17.4233806291427],[13.46236209479,-16.9712118465887],[12.8140812516884,-16.9413428687241],[12.2154614600194,-17.1116683895581],[11.7341988460851,-17.3018893368245],[11.6400960628816,-16.6731421851292],[11.7785372249916,-15.7938160132507],[12.1235807634044,-14.8783163387679],[12.1756189307223,-14.4491435685839],[12.500095249083,-13.5476998836844],[12.7384786312454,-13.1379057756099],[13.3129138526018,-12.4836304663625],[13.6337211442698,-12.0386447078972],[13.7387276546869,-11.2978630509931],[13.6863794287753,-10.7310759416158],[13.3873279151022,-10.3735783830207],[13.1209875830699,-9.76689706791411],[12.8753695003866,-9.16693368900549],[12.9290613135378,-8.95909107832757],[13.2364327328099,-8.56262948978434],[12.9330403988243,-7.59653858808775],[12.7282983740839,-6.9271220841788],[12.2273470394464,-6.29444752362937],[12.3224316748636,-6.10009246177965],[12.7351713395787,-5.96568206138848],[13.024869419007,-5.98438892987811],[13.3755973649719,-5.86424122479956],[16.326528354567,-5.87747039146622]]],[[[12.4366882666609,-5.68430388755922],[12.1823368669203,-5.7899305151638],[11.9149630062421,-5.03798674888473],[12.3186076188739,-4.60623015708616],[12.6207597184845,-4.43802336997612],[12.9955172054652,-4.78110320396192],[12.6316117692658,-4.99127125409294],[12.4680041846298,-5.24836150474499],[12.4366882666609,-5.68430388755922]]]]}},{"type":"Feature","properties":{"admin":"Albania","name":"Albania","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.5902474301049,41.8554041611336],[20.4631750830992,41.5150890162753],[20.6051819190374,41.0862263046852],[21.0200403174764,40.8427269557259],[20.9999898617472,40.580003973954],[20.6749967790636,40.434999904943],[20.6150004411728,40.1100068222594],[20.1500159034105,39.624997666984],[19.9800004411701,39.6949933945234],[19.9600016618732,39.915005805006],[19.4060819841367,40.2507734238225],[19.3190588721571,40.7272301295536],[19.4035498389543,41.4095657415354],[19.5400272966371,41.7199860703128],[19.371768833095,41.8775475123706],[19.3044861182508,42.1957451442078],[19.7380513851796,42.6882473821656],[19.8016133968987,42.5000934921908],[20.0707,42.58863],[20.2837545101819,42.3202595078151],[20.52295,42.21787],[20.5902474301049,41.8554041611336]]]}},{"type":"Feature","properties":{"admin":"United Arab Emirates","name":"United Arab Emirates","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[51.5795186704633,24.2454971379511],[51.7574406268442,24.2940729843055],[51.7943892759329,24.0198261581325],[52.5770805194256,24.1774392766227],[53.4040067889601,24.1513168400992],[54.0080009295876,24.1217579208282],[54.6930237160486,24.7978923609351],[55.4390246926141,25.4391452092449],[56.0708207538145,26.055464178974],[56.261041701081,25.7146064315768],[56.396847365144,24.9247321639955],[55.886232537668,24.9208305933574],[55.8041186867562,24.2696041936153],[55.9812138202205,24.1305429143178],[55.5286316262082,23.9336040308535],[55.5258410988645,23.5248692896409],[55.2344893736029,23.1109927434153],[55.2083410988632,22.708329982997],[55.0068030129249,22.4969475367071],[52.0007332700743,23.0011544865789],[51.617707553927,24.0142192652288],[51.5795186704633,24.2454971379511]]]}},{"type":"Feature","properties":{"admin":"Argentina","name":"Argentina","continent":"South America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-65.5,-55.2],[-66.45,-55.25],[-66.95992,-54.89681],[-67.56244,-54.87001],[-68.63335,-54.8695],[-68.6340102275832,-52.6363704588745],[-68.25,-53.1],[-67.75,-53.85],[-66.45,-54.45],[-65.05,-54.7],[-65.5,-55.2]]],[[[-64.9648921372946,-22.0758615048123],[-64.3770210435423,-22.7980913225235],[-63.9868381415225,-21.993644301036],[-62.8464684719215,-22.0349854468695],[-62.6850571356579,-22.2490292294224],[-60.8465647040099,-23.8807125790383],[-60.028966030504,-24.0327963192732],[-58.8071284653949,-24.7714592424533],[-57.777217169818,-25.162339776309],[-57.6336600409111,-25.6036565080817],[-58.6181735907197,-27.1237187639471],[-57.6097596909761,-27.3958985328284],[-56.486701626193,-27.5484990373862],[-55.6958455063982,-27.3878370093908],[-54.788794928595,-26.6217855770961],[-54.6252906968235,-25.7392554664155],[-54.1300496079544,-25.5476392554772],[-53.6283489650487,-26.1248650041774],[-53.6487353175879,-26.9234725888161],[-54.4907252671355,-27.4747567685058],[-55.1622863429846,-27.8819153785334],[-56.2908996242391,-28.8527605120009],[-57.6251334295829,-30.2162948544542],[-57.8749373032819,-31.0165560849262],[-58.1424403550407,-32.0445036760762],[-58.1326476711214,-33.040566908502],[-58.3496111720988,-33.2631889788154],[-58.4270741441044,-33.9094544410575],[-58.4954420640265,-34.4314897600701],[-57.2258296372636,-35.2880266253079],[-57.3623587713787,-35.9773902320815],[-56.7374873521055,-36.4131259091666],[-56.7882852850483,-36.9015715471893],[-57.7491568670834,-38.1838705380799],[-59.2318570624019,-38.7202202288372],[-61.2374452378656,-38.9284245745411],[-62.3359569973101,-38.8277072080044],[-62.1257631089629,-39.4241049130849],[-62.3305309719194,-40.1725863584003],[-62.1459944322052,-40.6768966611367],[-62.745802781817,-41.0287614886121],[-63.7704947577325,-41.1667892392637],[-64.7320898098197,-40.8026770973351],[-65.1180352443916,-41.0643148740289],[-64.9785605536358,-42.0580009905693],[-64.3034079657425,-42.3590162086695],[-63.7559478420423,-42.0436866188245],[-63.4580590480959,-42.5631381162224],[-64.3788038804563,-42.8735584449996],[-65.1818039618397,-43.4953809547678],[-65.3288234117101,-44.5013660621937],[-65.5652689276616,-45.0367855771698],[-66.5099657863893,-45.0396277809458],[-67.2937939113924,-45.5518962542552],[-67.5805464341801,-46.3017729632425],[-66.5970664130173,-47.0339246559538],[-65.6410265774014,-47.2361345355119],[-65.9850882636007,-48.1332890765311],[-67.1661789618477,-48.6973373349969],[-67.8160876125665,-49.8696688779704],[-68.7287450832732,-50.2642184385189],[-69.1385391913478,-50.7325102679478],[-68.8155614895235,-51.7711040115941],[-68.1499948798204,-52.3499834061277],[-68.5715453762413,-52.2994438553463],[-69.4983621893961,-52.1427609126372],[-71.9148038397963,-52.0090223058659],[-72.329403856074,-51.4259563128724],[-72.3099735175323,-50.6770097796663],[-72.9757468329646,-50.7414502907343],[-73.3280509101145,-50.3787850889099],[-73.41543575712,-49.318436374713],[-72.6482474433149,-48.8786182594768],[-72.3311608547719,-48.2442383766618],[-72.4473553127803,-47.7385328102535],[-71.9172584703302,-46.8848381487918],[-71.5520094468912,-45.5607329241771],[-71.6593155585453,-44.9736886533414],[-71.2227788967597,-44.7842428525594],[-71.3298007880362,-44.4075216611517],[-71.7936226060719,-44.2071721331561],[-71.4640561591305,-43.7876111793783],[-71.9154239569839,-43.4085645485174],[-72.1488980780785,-42.2548881976014],[-71.7468037584155,-42.051386407236],[-71.9157340155775,-40.8323393694707],[-71.6807612779464,-39.8081641578781],[-71.413516608349,-38.9160222307911],[-70.8146642727347,-38.5529952939407],[-71.1186250474754,-37.5768274879472],[-71.1218806627098,-36.6581238746623],[-70.3647692532017,-36.0050887997899],[-70.3880494859491,-35.1696875953594],[-69.8173091295015,-34.1935714657983],[-69.8147769843192,-33.2738860002998],[-70.0743993801536,-33.091209812148],[-70.5350689358194,-31.3650102678703],[-69.9190083482519,-30.3363392066683],[-70.0135503811299,-29.3679228655185],[-69.6561303371831,-28.4591411272337],[-69.0012349107483,-27.5212138811361],[-68.2955415513704,-26.8993396949358],[-68.5947997707727,-26.5069088681113],[-68.3860011460973,-26.1850163713652],[-68.4176529608761,-24.5185547828169],[-67.3284429592441,-24.0253032365909],[-66.9852339341776,-22.9863485653628],[-67.1066735500636,-22.7359245744764],[-66.2733394029248,-21.8323104794207],[-64.9648921372946,-22.0758615048123]]]]}},{"type":"Feature","properties":{"admin":"Armenia","name":"Armenia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[43.5827458025927,41.0921432561826],[44.9724800962181,41.2481285670556],[45.1794958839793,40.9853539088514],[45.5603511899704,40.8122895371059],[45.3591748390582,40.5615038111935],[45.8919071795551,40.21847565364],[45.6100122414029,39.8999938014252],[46.0345341326807,39.6280207382731],[46.4834989764324,39.4641547714755],[46.505719842318,38.7706053736863],[46.1436230812488,38.7412014837122],[45.735379266143,39.3197191432197],[45.739978468617,39.4739991318271],[45.2981449725215,39.4717512070224],[45.0019873390567,39.7400035670496],[44.7939896990819,39.713002631177],[44.4000085792887,40.0050003118423],[43.6564363950409,40.2535639511662],[43.7526579119684,40.7402009140588],[43.5827458025927,41.0921432561826]]]}},{"type":"Feature","properties":{"admin":"French Southern and Antarctic Lands","name":"Fr. S. Antarctic Lands","continent":"Seven seas (open ocean)"},"geometry":{"type":"Polygon","coordinates":[[[68.935,-48.625],[69.58,-48.94],[70.525,-49.065],[70.56,-49.255],[70.28,-49.71],[68.745,-49.775],[68.72,-49.2425],[68.8675,-48.83],[68.935,-48.625]]]}},{"type":"Feature","properties":{"admin":"Australia","name":"Australia","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[145.397978143495,-40.7925485166059],[146.364120721624,-41.1376954078833],[146.908583612251,-41.0005461565807],[147.689259474884,-40.8082581520227],[148.289067824496,-40.8754375140021],[148.359864536736,-42.0624451637464],[148.017301467073,-42.4070236142686],[147.914051955354,-43.2115223121885],[147.564564243764,-42.9376888974739],[146.870343052355,-43.6345972633621],[146.663327264594,-43.5808537737785],[146.04837772032,-43.5497445615389],[145.431929559511,-42.6937761370563],[145.295090366802,-42.0336097145276],[144.718071323831,-41.1625517718157],[144.74375451068,-40.7039751116577],[145.397978143495,-40.7925485166059]]],[[[143.5618111513,-13.7636556942322],[143.922099237239,-14.548310642152],[144.563713820575,-14.1711760392859],[144.894908075134,-14.5944576961886],[145.374723748963,-14.9849764950183],[145.271991001567,-15.4282052547857],[145.485259637636,-16.2856722958048],[145.637033319277,-16.7849183081766],[145.888904250268,-16.9069263648176],[146.160308872664,-17.7616545549252],[146.063673944279,-18.2800725236773],[146.38747846902,-18.9582740210759],[147.471081577748,-19.4807227515467],[148.177601760042,-19.9559392229028],[148.848413527623,-20.3912098120973],[148.717465448196,-20.6334689266815],[149.289420200802,-21.2605107561111],[149.678337030231,-22.3425118954384],[150.077382440389,-22.1227837053333],[150.482939081015,-22.556142266533],[150.727265252891,-22.4024048804647],[150.899554478152,-23.4622368303387],[151.609175246384,-24.0762561988308],[152.073539666959,-24.4578866513062],[152.855197381806,-25.267501316023],[153.136162144177,-26.0711731910262],[153.16194868389,-26.6413192685024],[153.092908970349,-27.2602995744945],[153.569469028944,-28.1100668271021],[153.5121081891,-28.9950774065328],[153.339095493787,-29.4582015927324],[153.069241164359,-30.3502401669548],[153.089601678682,-30.9236418596654],[152.891577590139,-31.640445651986],[152.450002476205,-32.5500025367552],[151.709117466437,-33.0413420549863],[151.343971795862,-33.8160234514738],[151.010555454715,-34.3103602027779],[150.714139439089,-35.1734599749168],[150.328219842733,-35.6718791643719],[150.075212030232,-36.4202055803905],[149.946124302367,-37.1090524228412],[149.997283970336,-37.4252605120351],[149.423882277626,-37.7726811663335],[148.304622430616,-37.8090613746669],[147.381733026315,-38.2192172177675],[146.922122837511,-38.6065320777951],[146.317921991155,-39.0357565244114],[145.489652134381,-38.593767999019],[144.876976353128,-38.4174480120391],[145.032212355733,-37.896187839511],[144.485682407814,-38.0853235816993],[143.609973586196,-38.8094654274053],[142.745426873953,-38.5382675107375],[142.178329705982,-38.3800342750598],[141.606581659105,-38.3085140927679],[140.638578729413,-38.0193327776625],[139.992158237874,-37.4029362932851],[139.806588169514,-36.6436027971883],[139.574147577065,-36.1383623186707],[139.082808058834,-35.7327540016118],[138.120747918856,-35.6122962379394],[138.449461704665,-35.1272612444479],[138.207564325107,-34.3847225888459],[137.719170363516,-35.076825046531],[136.829405552315,-35.2605347633286],[137.352371047108,-34.7073385556441],[137.503886346588,-34.1302678362408],[137.890116001538,-33.6404786109783],[137.810327590079,-32.9000070126681],[136.99683719294,-33.7527714983486],[136.372069126532,-34.0947661272562],[135.989043410384,-34.8901180966605],[135.208212518454,-34.4786703427526],[135.239218377829,-33.947953383115],[134.613416782775,-33.2227780087631],[134.085903761939,-32.8480721982148],[134.273902622617,-32.617233575167],[132.99077680881,-32.0112240536802],[132.288080682505,-31.9826469866228],[131.326330601121,-31.495803318001],[129.53579389864,-31.5904228655275],[128.240937534702,-31.9484888648779],[127.102867466338,-32.282266941051],[126.148713820501,-32.2159660784206],[125.088623488466,-32.7287513160528],[124.221647983905,-32.9594865862361],[124.028946567889,-33.4838473447017],[123.659666782731,-33.8901791318127],[122.811036411634,-33.9144670549898],[122.183064406423,-34.0034021949642],[121.299190708503,-33.8210360654061],[120.580268182458,-33.9301766904066],[119.893695103028,-33.9760653622818],[119.298899367349,-34.509366143534],[119.007340936358,-34.4641492652785],[118.505717808101,-34.7468193499151],[118.02497195849,-35.0647327613747],[117.295507440257,-35.0254586728329],[116.625109084135,-35.0250969378068],[115.56434695848,-34.3864279111116],[115.02680870978,-34.1965170224389],[115.048616164207,-33.623425388322],[115.545123325667,-33.487257989233],[115.714673700017,-33.2595716285549],[115.679378696761,-32.9003687476941],[115.801645135564,-32.205062351207],[115.689610630355,-31.6124370256838],[115.160909051577,-30.6015943336225],[114.997043084779,-30.0307247860942],[115.040037876446,-29.4610954729408],[114.641974318502,-28.8102308082247],[114.616497837382,-28.516398614213],[114.173579136208,-28.1180766741073],[114.048883905088,-27.3347653134271],[113.477497593237,-26.5431340471479],[113.338953078262,-26.1165450985785],[113.77835778204,-26.5490251604292],[113.440962355607,-25.6212781714932],[113.936901076312,-25.9112346330829],[114.232852004047,-26.2984461402459],[114.216160516417,-25.7862810198011],[113.721255324358,-24.9989388974021],[113.625343866024,-24.6839710425831],[113.393523390763,-24.3847644996133],[113.502043898576,-23.8063501929703],[113.706992629045,-23.5602153459641],[113.843418410296,-23.0599874813787],[113.736551548316,-22.4754753557254],[114.149756300922,-21.755881036061],[114.225307244933,-22.5174882951786],[114.647762078919,-21.8295199520769],[115.460167270979,-21.4951734351485],[115.947372674627,-21.0686878394437],[116.711615431792,-20.7016818173068],[117.166316359528,-20.6235987281138],[117.441545037914,-20.7468986955622],[118.229558953933,-20.3742082658732],[118.836085239743,-20.2633106421748],[118.987807244952,-20.0442025692573],[119.252493931151,-19.9529419898298],[119.805225050945,-19.976506442955],[120.856220330897,-19.6837077775892],[121.399856398607,-19.2397555477697],[121.655137974129,-18.7053178850071],[122.241665480642,-18.1976486141718],[122.286623976736,-17.7986032040139],[122.312772251475,-17.2549671363034],[123.012574497572,-16.4051998836959],[123.433789097183,-17.2685580379962],[123.859344517107,-17.0690353329173],[123.503242222183,-16.5965060360404],[123.817073195492,-16.111316013252],[124.2582865744,-16.3279436174196],[124.379726190286,-15.567059828354],[124.92615278534,-15.0751001929353],[125.167275018414,-14.68039560309],[125.670086704614,-14.510070082256],[125.68579634003,-14.2306556128538],[126.125149367376,-14.347340996969],[126.14282270722,-14.0959868303012],[126.582589146024,-13.9527914364204],[127.065867140817,-13.8179676245709],[127.804633416862,-14.276906019755],[128.359689976109,-14.8691696102523],[128.985543247596,-14.8759908993147],[129.62147342338,-14.9697836239246],[129.409600050983,-14.420669854391],[129.888640578329,-13.6187033016535],[130.339465773643,-13.3573755835535],[130.183506300986,-13.1075200334223],[130.617795037967,-12.5363921037325],[131.22349450086,-12.1836487769081],[131.735091180549,-12.3024528947472],[132.575298293183,-12.114040622611],[132.557211541881,-11.6030123836767],[131.824698114144,-11.2737818335451],[132.357223748911,-11.1285193823726],[133.019560581596,-11.3764112280768],[133.550845981989,-11.7865153947451],[134.393068475482,-12.0423654110222],[134.678632440327,-11.9411829565947],[135.298491245668,-12.2486060522991],[135.882693312728,-11.9622669409698],[136.258380975489,-12.0493417293816],[136.492475213772,-11.8572087541204],[136.951620314685,-12.3519589168827],[136.685124953356,-12.8872234025621],[136.305406528875,-13.2912297502199],[135.961758254134,-13.3245093726159],[136.077616815333,-13.7242782528258],[135.783836297753,-14.2239893530882],[135.428664178611,-14.7154322241839],[135.500184360903,-14.9977405737944],[136.295174595281,-15.5502649878591],[137.065360142159,-15.8707622209334],[137.580470819245,-16.2150822892941],[138.303217401279,-16.8076042619527],[138.585164015863,-16.8066224097392],[139.108542922115,-17.0626791317454],[139.260574985918,-17.3716008439862],[140.215245396078,-17.7108049455501],[140.875463495039,-17.3690686988039],[141.071110467696,-16.8320472144267],[141.274095493739,-16.3888701310916],[141.398222284104,-15.8405315080426],[141.702183058845,-15.0449211564769],[141.563380161709,-14.5613331030895],[141.635520461188,-14.2703947892863],[141.519868605719,-13.6980783016538],[141.650920038011,-12.9446875952706],[141.842691278246,-12.7415475399312],[141.686990187751,-12.4076144344611],[141.928629185148,-11.8774659155788],[142.118488397388,-11.3280420874516],[142.143706496346,-11.0427365047681],[142.515260044525,-10.6681857235166],[142.797310011974,-11.1573548315915],[142.866763136974,-11.7847067196149],[143.115946893486,-11.9056295711779],[143.158631626559,-12.3256556128462],[143.5221236513,-12.8343584123274],[143.597157830988,-13.4004220516526],[143.5618111513,-13.7636556942322]]]]}},{"type":"Feature","properties":{"admin":"Austria","name":"Austria","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[16.979666782304,48.1234970159763],[16.9037541032673,47.7148656276283],[16.3405843441504,47.7129019232012],[16.5342676123804,47.4961709661691],[16.2022982113374,46.852385972677],[16.0116638526127,46.6836107448117],[15.137091912505,46.658702704447],[14.6324715511748,46.4318173284695],[13.8064754574215,46.5093061386912],[12.3764852230408,46.7675591090698],[12.1530880062431,47.1153931748264],[11.1648279150933,46.9415794948127],[11.0485559424365,46.7513585475463],[10.4427014502466,46.8935462509974],[9.93244835779666,46.920728054383],[9.47996951664902,47.1028099635634],[9.63293175623297,47.34760122333],[9.59422610844635,47.5250580918203],[9.89606814946319,47.5801968450757],[10.4020837744652,47.3024876979392],[10.5445040218616,47.5663992376538],[11.4264140153547,47.523766181013],[12.1413574561128,47.7030834010658],[12.6207597184845,47.6723876002844],[12.9326269873659,47.467645575544],[13.0258512712205,47.6375835231358],[12.8841028174439,48.2891458196879],[13.243357374737,48.416114813829],[13.5959456722644,48.8771719427371],[14.3388977393247,48.5553052842072],[14.9014473812541,48.9644017604458],[15.253415561594,49.0390742051076],[16.0296472510502,48.7338990342079],[16.4992826677188,48.7858080104451],[16.9602881201946,48.5969823268506],[16.879982944413,48.4700133327095],[16.979666782304,48.1234970159763]]]}},{"type":"Feature","properties":{"admin":"Azerbaijan","name":"Azerbaijan","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[45.0019873390568,39.7400035670496],[45.2981449725214,39.4717512070224],[45.739978468617,39.4739991318272],[45.7353792661431,39.3197191432198],[46.1436230812488,38.7412014837122],[45.4577217954387,38.8741391057831],[44.9526880226503,39.3357646754464],[44.793989699082,39.713002631177],[45.0019873390568,39.7400035670496]]],[[[47.3733154640662,41.2197323675113],[47.8156657244847,41.1514161240213],[47.987283156126,41.4058192001942],[48.5843526548263,41.8088695338547],[49.1102637062607,41.2822866888005],[49.6189148293096,40.57292430273],[50.0848295428531,40.5261571315058],[50.3928210793127,40.2565611842391],[49.5692021014448,40.1761009791607],[49.3952592303504,39.3994817164622],[49.2232283872507,39.0492188583879],[48.8565324237076,38.8154863551318],[48.8832491392025,38.3202452662626],[48.6343754412848,38.2703775091009],[48.0107442563865,38.7940147975145],[48.3555294126379,39.2887649602769],[48.0600952492253,39.5822354192624],[47.6850793800831,39.5083639593012],[46.505719842318,38.7706053736863],[46.4834989764324,39.4641547714755],[46.0345341326807,39.628020738273],[45.6100122414029,39.8999938014252],[45.8919071795551,40.21847565364],[45.3591748390582,40.5615038111935],[45.5603511899705,40.812289537106],[45.1794958839794,40.9853539088514],[44.9724800962182,41.2481285670556],[45.2174263852816,41.411451931314],[45.9626005389304,41.1238725856098],[46.501637404167,41.0644446884741],[46.6379081561206,41.1816726751282],[46.145431756379,41.7228024358726],[46.4049507993488,41.8606751572273],[46.6860705910167,41.8271371526699],[47.3733154640662,41.2197323675113]]]]}},{"type":"Feature","properties":{"admin":"Burundi","name":"Burundi","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[29.3399975929003,-4.49998341229409],[29.276383904749,-3.29390715903406],[29.0249263852168,-2.83925790773016],[29.6321761410786,-2.9178577612461],[29.9383590024079,-2.34848683025424],[30.469696079233,-2.41385751710346],[30.5276770362645,-2.80763193116753],[30.7430127296247,-3.03428476319969],[30.7522628110049,-3.35932952231557],[30.5055595232436,-3.56856739666536],[30.1163326352212,-4.09013762778724],[29.7535124040999,-4.45238941815328],[29.3399975929003,-4.49998341229409]]]}},{"type":"Feature","properties":{"admin":"Belgium","name":"Belgium","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[3.31497114422854,51.3457809515361],[4.04707116050753,51.2672586126686],[4.97399132652691,51.4750237086981],[5.60697594567,51.0372984889698],[6.15665815595878,50.8037210150106],[6.04307335778111,50.1280516627942],[5.78241743330091,50.0903278672212],[5.67405195478483,49.5294835475575],[4.79922163251581,49.9853730332364],[4.28602298342508,49.9074966497725],[3.58818444175569,50.3789924180036],[3.1232515804258,50.7803632676146],[2.65842207196027,50.7968480495157],[2.51357303224614,51.1485061712618],[3.31497114422854,51.3457809515361]]]}},{"type":"Feature","properties":{"admin":"Benin","name":"Benin","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[2.69170169435625,6.25881724692863],[1.86524051271232,6.14215770102973],[1.61895063640924,6.83203807212624],[1.66447757325838,9.12859039960938],[1.46304284018467,9.33462433515709],[1.42506066245014,9.825395412633],[1.07779503744874,10.175606594275],[0.772335646171484,10.4708082137424],[0.899563022474069,10.9973393823643],[1.24346967937649,11.1105107690835],[1.44717817547107,11.5477192244889],[1.93598554851988,11.6411502140726],[2.15447350424992,11.9401500513133],[2.49016360841793,12.2330520695437],[2.84864301922667,12.2356358911583],[3.61118045412556,11.660167141156],[3.57221642417747,11.3279393579515],[3.79711225751171,10.7347455916731],[3.6000700211828,10.3321861841194],[3.70543826662592,10.0632103540402],[3.2203515967021,9.4441525333997],[2.91230838381026,9.13760793704432],[2.72379275880951,8.50684540448971],[2.74906253420022,7.87073436119289],[2.69170169435625,6.25881724692863]]]}},{"type":"Feature","properties":{"admin":"Burkina Faso","name":"Burkina Faso","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-2.82749630371271,9.64246084231978],[-3.51189897298627,9.90032623945622],[-3.98044918457668,9.8623440617217],[-4.33024695476038,9.61083486575714],[-4.77988359213197,9.82198476810174],[-4.9546532861431,10.1527139347697],[-5.40434159994697,10.3707368026091],[-5.470564947929,10.951269842976],[-5.19784257650865,11.3751457788501],[-5.22094194174312,11.7138589543072],[-4.4271661035238,12.5426455754043],[-4.28040503581488,13.2284435083497],[-4.00639075358723,13.4724854598481],[-3.52280270019986,13.3376616479986],[-3.10370683431276,13.5412667912286],[-2.96769446452058,13.7981503361515],[-2.19182451009038,14.2464175480674],[-2.00103512206877,14.5590082870009],[-1.06636349120566,14.9738150090078],[-0.515854458000348,15.1161577417557],[-0.26625729003058,14.9243089868721],[0.374892205414682,14.9289081893461],[0.295646396495101,14.4442349308807],[0.429927605805517,13.9887330184439],[0.993045688490071,13.3357496200038],[1.02410322429748,12.8518256698066],[2.17710778159378,12.6250178084775],[2.15447350424992,11.9401500513133],[1.93598554851988,11.6411502140726],[1.44717817547107,11.5477192244889],[1.24346967937649,11.1105107690835],[0.899563022474069,10.9973393823643],[0.023802524423701,11.0186817489008],[-0.438701544588582,11.0983409692787],[-0.761575893548183,10.9369296330151],[-1.20335771321143,11.0098192407627],[-2.94040930827046,10.9626903345126],[-2.96389624674711,10.3953347843801],[-2.82749630371271,9.64246084231978]]]}},{"type":"Feature","properties":{"admin":"Bangladesh","name":"Bangladesh","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[92.6727209818256,22.0412389185412],[92.652257114638,21.3240475529785],[92.3032344909387,21.4754853378098],[92.3685535013556,20.6708832870253],[92.0828861836461,21.1921951359858],[92.0252152852084,21.7015697290868],[91.8348909850774,22.1829356958856],[91.4170870299977,22.7650190292212],[90.4960063008273,22.8050165878151],[90.586956821661,22.3927936874229],[90.2729708190555,21.8363677027201],[89.8474670755643,22.0391460230334],[89.7020495950949,21.8571157902853],[89.4188627461355,21.9661789006373],[89.0319612975662,22.055708319583],[88.8763118835031,22.8791464299378],[88.5297697285538,23.6311418726492],[88.6999402200909,24.2337149113886],[88.0844222350624,24.5016572128219],[88.306372511756,24.8660794133442],[88.9315539896231,25.2386923283848],[88.2097892598025,25.7680657007827],[88.5630493509497,26.4465255803427],[89.3550940286873,26.0144072535181],[89.8324809101996,25.9650820988955],[89.9206925801218,25.2697498641922],[90.8722107279121,25.1326006128895],[91.7995959818221,25.1474317489573],[92.3762016133348,24.976692816665],[91.9150928079944,24.1304137232371],[91.4677299336437,24.0726394719348],[91.1589632506997,23.5035269231044],[91.7064750508321,22.9852639836492],[91.8699276061713,23.6243464218028],[92.1460347839068,23.6274986841726],[92.6727209818256,22.0412389185412]]]}},{"type":"Feature","properties":{"admin":"Bulgaria","name":"Bulgaria","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.657149692483,44.2349230006613],[22.9448323910518,43.8237853053471],[23.3323022803763,43.8970108099047],[24.1006791521242,43.7410513372478],[25.5692716814269,43.6884447291747],[26.0651587256997,43.9434937607513],[27.2423995297409,44.1759860296324],[27.9701070492751,43.8124681666752],[28.558081495892,43.7074616562581],[28.0390950863847,43.2931716985742],[27.673897739378,42.5778923610062],[27.9967204119054,42.0073587102878],[27.1357393734905,42.1414848903013],[26.1170418637208,41.8269046087246],[26.1061381365072,41.3288988307278],[25.1972013689254,41.2344859889305],[24.492644891058,41.583896185872],[23.6920736019923,41.3090809189438],[22.9523771501664,41.3379938828111],[22.8813737321974,41.9992971868502],[22.3805257504246,42.3202595078151],[22.5450118344096,42.461362006188],[22.4365946794613,42.5803211533239],[22.6048014665713,42.8985187851611],[22.9860185075885,43.211161200527],[22.5001566911803,43.642814439461],[22.4104464047216,44.0080634629],[22.657149692483,44.2349230006613]]]}},{"type":"Feature","properties":{"admin":"The Bahamas","name":"Bahamas","continent":"North America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-77.53466,23.75975],[-77.78,23.71],[-78.03405,24.28615],[-78.40848,24.57564],[-78.19087,25.2103],[-77.89,25.17],[-77.54,24.34],[-77.53466,23.75975]]],[[[-77.82,26.58],[-78.91,26.42],[-78.98,26.79],[-78.51,26.87],[-77.85,26.84],[-77.82,26.58]]],[[[-77,26.59],[-77.17255,25.87918],[-77.35641,26.00735],[-77.34,26.53],[-77.78802,26.92516],[-77.79,27.04],[-77,26.59]]]]}},{"type":"Feature","properties":{"admin":"Bosnia and Herzegovina","name":"Bosnia and Herz.","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[19.0054862810101,44.8602336696091],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681000000001],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[17.674921502359,43.0285625270236],[17.2973734880345,43.4463406438874],[16.9161564470173,43.6677224798257],[16.4564429053489,44.0412397324313],[16.2396602718845,44.3511432968857],[15.750026075919,44.8187116562626],[15.9593673031334,45.2337767604309],[16.3181567725359,45.0041266953259],[16.5349394060002,45.2116075709777],[17.002146030351,45.2337767604309],[17.8617834815264,45.0677403834771],[18.5532141455916,45.0815896673315],[19.0054862810101,44.8602336696091]]]}},{"type":"Feature","properties":{"admin":"Belarus","name":"Belarus","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[23.4841276384498,53.9124976670411],[24.450683628037,53.9057022161948],[25.536353794057,54.2824234076025],[25.7684326514798,54.8469625921751],[26.5882792497904,55.1671756048717],[26.4943314958838,55.6151069199776],[27.1024597510945,55.7833137070877],[28.176709425578,56.1691299505788],[29.2295133806603,55.9183442246664],[29.3715718930307,55.6700906439362],[29.8962943865224,55.7894632025304],[30.87390913262,55.5509764675034],[30.9718359718131,55.081547756564],[30.7575338070987,54.8117709417843],[31.3844722836637,54.1570563828624],[31.7914241879622,53.9746385768721],[31.7312728207745,53.794029446012],[32.4055985857512,53.618045355842],[32.693643019346,53.3514208034321],[32.3045194841882,53.1327261419729],[31.4976436703829,53.1674268662569],[31.305200636528,53.0739958766732],[31.5400183448623,52.7420523138463],[31.7859981625716,52.1016779648854],[30.927549269339,52.0423534206144],[30.6194543800148,51.8228060980224],[30.5551172218115,51.3195034857156],[30.1573637224609,51.4161384141015],[29.2549381853479,51.3682343613669],[28.9928353207635,51.6020443792715],[28.6176127458922,51.4277139349348],[28.2416150245366,51.5722270778391],[27.4540661964084,51.5923033717845],[26.3379586117686,51.8322887233479],[25.327787713327,51.9106560329185],[24.5531063168395,51.8884610052492],[24.0050777523842,51.6174439560945],[23.5270707536844,51.5784540879302],[23.5080021501687,52.0236465521247],[23.1994938493862,52.4869774440537],[23.7991988461334,52.6910993516066],[23.8049349301178,53.0897313503061],[23.527535841575,53.4701215684065],[23.4841276384498,53.9124976670411]]]}},{"type":"Feature","properties":{"admin":"Belize","name":"Belize","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-89.1430804105033,17.8083189966493],[-89.1509093899955,17.9554676376004],[-89.0298573473518,18.0015113387725],[-88.8483438789266,17.8831981470402],[-88.4901228502793,18.4868305526416],[-88.3000310940937,18.4999822046599],[-88.2963362291848,18.3532728133833],[-88.1068129137544,18.3486736109093],[-88.1234785631685,18.076674709541],[-88.2853549873228,17.644142971258],[-88.1978667874526,17.4894754094085],[-88.3026407539244,17.1316936304357],[-88.2395179918799,17.0360663924796],[-88.3554282295106,16.5307742375296],[-88.5518245104358,16.2654674341431],[-88.7324336412959,16.2336347518514],[-88.9306127591352,15.8872734644151],[-89.2291216702693,15.8869375676052],[-89.1508060371309,17.0155766870758],[-89.1430804105033,17.8083189966493]]]}},{"type":"Feature","properties":{"admin":"Bolivia","name":"Bolivia","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-62.8464684719215,-22.0349854468694],[-63.9868381415225,-21.9936443010359],[-64.3770210435422,-22.7980913225235],[-64.9648921372946,-22.0758615048123],[-66.2733394029248,-21.8323104794207],[-67.1066735500636,-22.7359245744764],[-67.8281798977227,-22.8729187964822],[-68.2199130927113,-21.4943466122319],[-68.7571671210337,-20.3726579729045],[-68.4422251044309,-19.4050684546714],[-68.9668184068419,-18.9816834449041],[-69.1002469550195,-18.2601254208127],[-69.590423753524,-17.5800118954193],[-68.9596353827533,-16.5006979305713],[-69.3897641669347,-15.6601290829117],[-69.1603466457749,-15.323973890853],[-69.339534674747,-14.9531954891588],[-68.9488866848366,-14.4536394181933],[-68.9292238023495,-13.602683607643],[-68.88007951524,-12.8997290991767],[-68.6650797186896,-12.5613001440972],[-69.5296781073649,-10.9517343075022],[-68.7861575995495,-11.0363803035963],[-68.2712536281933,-11.0145211727368],[-68.0481923082054,-10.7120590145325],[-67.1738012356107,-10.3068124324996],[-66.6469083319628,-9.93133147546686],[-65.3384352281164,-9.76198780684639],[-65.4448370022054,-10.5114511043754],[-65.321898769783,-10.8958720841947],[-65.402281460213,-11.5662704403172],[-64.3163529120316,-12.4619780412322],[-63.1964987860506,-12.6270325659724],[-62.8030602687964,-13.0006531714427],[-62.1270808579864,-13.1987806128497],[-61.7132043117608,-13.48920216233],[-61.0841212632556,-13.4793836401946],[-60.5033040025111,-13.7759546851177],[-60.45919816755,-14.3540072567346],[-60.2643263413774,-14.6459790991836],[-60.2511488511429,-15.0772189266593],[-60.5429656642951,-15.0939104142896],[-60.158389655179,-16.2582837866901],[-58.2412198553667,-16.2995732560913],[-58.388058437724,-16.8771090633853],[-58.2808040025022,-17.271710300366],[-57.734558274961,-17.5524683570078],[-57.498371141171,-18.1741875139113],[-57.6760088771743,-18.961839694904],[-57.9499973211858,-19.4000041643068],[-57.8538016424745,-19.9699952124862],[-58.166392381408,-20.1767009416537],[-58.1834714422805,-19.8683993466004],[-59.1150424872061,-19.3569060197754],[-60.0435646226265,-19.3427466773274],[-61.7863264634538,-19.633736667563],[-62.2659612697708,-20.5137346330613],[-62.2911793687292,-21.0516346167874],[-62.6850571356579,-22.2490292294224],[-62.8464684719215,-22.0349854468694]]]}},{"type":"Feature","properties":{"admin":"Brazil","name":"Brazil","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-57.6251334295829,-30.2162948544543],[-56.2908996242391,-28.8527605120009],[-55.1622863429846,-27.8819153785335],[-54.4907252671355,-27.4747567685058],[-53.6487353175879,-26.9234725888161],[-53.6283489650487,-26.1248650041775],[-54.1300496079544,-25.5476392554772],[-54.6252906968236,-25.7392554664155],[-54.4289460923306,-25.1621847470122],[-54.2934763250774,-24.570799655864],[-54.2929595607545,-24.0210140927107],[-54.6528342352351,-23.839578138934],[-55.0279017808095,-24.0012736955752],[-55.4007472397954,-23.9569353166688],[-55.5176393296396,-23.5719975725266],[-55.6106827459811,-22.6556193986948],[-55.7979581366069,-22.3569296200478],[-56.4733174302294,-22.0863001441353],[-56.8815095689029,-22.2821538225215],[-57.9371557277613,-22.0901758765572],[-57.8706739976178,-20.7326876766819],[-58.166392381408,-20.1767009416537],[-57.8538016424745,-19.9699952124862],[-57.9499973211858,-19.4000041643068],[-57.6760088771743,-18.961839694904],[-57.498371141171,-18.1741875139113],[-57.734558274961,-17.5524683570078],[-58.2808040025022,-17.271710300366],[-58.388058437724,-16.8771090633853],[-58.2412198553667,-16.2995732560913],[-60.158389655179,-16.2582837866901],[-60.5429656642951,-15.0939104142896],[-60.2511488511429,-15.0772189266593],[-60.2643263413774,-14.6459790991836],[-60.45919816755,-14.3540072567346],[-60.5033040025111,-13.7759546851177],[-61.0841212632556,-13.4793836401946],[-61.7132043117608,-13.48920216233],[-62.1270808579864,-13.1987806128497],[-62.8030602687964,-13.0006531714427],[-63.1964987860506,-12.6270325659724],[-64.3163529120316,-12.4619780412322],[-65.402281460213,-11.5662704403172],[-65.321898769783,-10.8958720841947],[-65.4448370022054,-10.5114511043754],[-65.3384352281164,-9.76198780684639],[-66.6469083319628,-9.93133147546686],[-67.1738012356107,-10.3068124324996],[-68.0481923082054,-10.7120590145325],[-68.2712536281933,-11.0145211727368],[-68.7861575995495,-11.0363803035963],[-69.5296781073649,-10.9517343075022],[-70.0937522040469,-11.123971856331],[-70.5486856757284,-11.0091468237785],[-70.4818938869912,-9.49011809655884],[-71.3024122789215,-10.0794361304154],[-72.1848907131698,-10.0535979142694],[-72.5630330064656,-9.52019378015272],[-73.2267134263902,-9.46221282312123],[-73.0153826565325,-9.03283334720806],[-73.5710593329671,-8.42444670983583],[-73.9872354804297,-7.52382984785306],[-73.7234014553635,-7.34099863040441],[-73.7244866604416,-6.91859547285064],[-73.1200274319236,-6.62993092206824],[-73.2197112698146,-6.08918873456608],[-72.9645072089412,-5.74125131594489],[-72.8919276597872,-5.27456145591698],[-71.7484057278165,-4.59398284263301],[-70.9288433498836,-4.40159148521037],[-70.7947688463023,-4.2512647436733],[-69.8936352199966,-4.29818694419433],[-69.4441019354896,-1.55628712321982],[-69.4204858059322,-1.12261850342641],[-69.5770653957766,-0.549991957200163],[-70.02065589057,-0.185156345219539],[-70.0155657619893,0.541414292804205],[-69.4523960028725,0.706158758950693],[-69.252434048119,0.602650865070075],[-69.2186376614002,0.985676581217433],[-69.8045967271577,1.08908112223347],[-69.8169732326916,1.71480520263962],[-67.8685650295588,1.69245514567339],[-67.5378100246747,2.03716278727633],[-67.2599975246736,1.71999868408496],[-67.0650481838525,1.13011220947323],[-66.8763258531226,1.25336050048934],[-66.3257651434849,0.724452215982012],[-65.5482673814376,0.78925446207603],[-65.3547133042884,1.0952822941085],[-64.6110119289599,1.32873057698704],[-64.1993057928905,1.49285492594602],[-64.0830854966661,1.91636912679408],[-63.3687880113116,2.20089956299313],[-63.4228673977051,2.41106761312417],[-64.2699991522658,2.49700552002557],[-64.4088278876179,3.12678620036662],[-64.3684944322141,3.79721039470525],[-64.816064012294,4.05644521729742],[-64.6286594305875,4.14848094320925],[-63.8883428615741,4.02053009685457],[-63.0931975978991,3.77057119385878],[-62.8045330471167,4.00696503337795],[-62.0854296535591,4.16212352133431],[-60.9668932766015,4.53646759685664],[-60.6011791652719,4.91809804933213],[-60.7335741848037,5.2002772078619],[-60.2136834377313,5.2444863956876],[-59.9809586249049,5.01406118409814],[-60.1110023667674,4.57496653891408],[-59.7674057684587,4.42350291586661],[-59.5380399237312,3.95880259848194],[-59.8154131740579,3.60649852133209],[-59.9745249090845,2.75523265218806],[-59.7185457017267,2.24963043864436],[-59.6460436672212,1.78689382568679],[-59.0308615790026,1.31769765869272],[-58.5400129868783,1.26808828369252],[-58.429477098206,1.46394196207872],[-58.113449876525,1.50719513590703],[-57.6609710353774,1.68258494710564],[-57.3358229233969,1.94853770589576],[-56.7827042303608,1.86371084228865],[-56.5393857489145,1.89952260986692],[-55.9956980047717,1.8176671411166],[-55.9056001450709,2.02199575439866],[-56.0733418442903,2.2207949894255],[-55.9733221095894,2.51036387777302],[-55.569755011606,2.42150625244713],[-55.0975874497551,2.52374807373661],[-54.5247541977997,2.31184886312379],[-54.0880625067172,2.10555654541463],[-53.7785206772889,2.37670278565008],[-53.5548392401135,2.33489655192595],[-53.4184651352953,2.05338918701598],[-52.939657151895,2.12485769287564],[-52.5564247300184,2.50470530843705],[-52.2493375311239,3.24109446859624],[-51.6577974106789,4.15623240805303],[-51.3171463690108,4.20349050538395],[-51.0697712876297,3.65039765056403],[-50.5088752915336,1.90156382894246],[-49.974075893745,1.73648346598607],[-49.9471007960887,1.04618968343122],[-50.6992512680969,0.222984117021681],[-50.3882108221321,-0.078444512536819],[-48.6205667791563,-0.235489190271821],[-48.5844966294166,-1.237805271005],[-47.8249564275906,-0.5816179337628],[-46.5665836248512,-0.941027520352776],[-44.9057030909904,-1.55173959717813],[-44.4176191879937,-2.13775033936798],[-44.5815885076558,-2.69130828207852],[-43.4187912664402,-2.38311003988979],[-41.4726568263282,-2.91201832439712],[-39.978665330554,-2.87305429444904],[-38.5003834701966,-3.70065235760339],[-37.2232521225352,-4.82094573325892],[-36.4529373845764,-5.10940357831215],[-35.5977957830105,-5.14950448977065],[-35.2353889633476,-5.46493743248025],[-34.8960298324868,-6.73819304771971],[-34.729993455533,-7.34322071699297],[-35.1282120427742,-8.99640146244228],[-35.6369665186877,-9.64928150801781],[-37.046518724097,-11.0407211239088],[-37.6836116196074,-12.1711947567258],[-38.4238765121884,-13.0381185848543],[-38.6738870916165,-13.0576522762606],[-38.9532757228025,-13.7933696428],[-38.8822981430496,-15.6670537248388],[-39.1610924952643,-17.2084066708085],[-39.2673392400564,-17.8677462704205],[-39.5835214910342,-18.2622958309689],[-39.7608233302276,-19.5991134579274],[-40.7747407700103,-20.9045118140524],[-40.9447562322506,-21.9373169898378],[-41.7541641912382,-22.3706755510375],[-41.9882842677365,-22.9700704891909],[-43.0747037420247,-22.9676933733055],[-44.6478118556378,-23.3519593238278],[-45.3521357895599,-23.7968417294286],[-46.4720932684055,-24.0889686011745],[-47.6489723374206,-24.8851990699277],[-48.4954581365777,-25.8770248349056],[-48.6410048081277,-26.6236976050909],[-48.4747358872287,-27.1759119605619],[-48.6615203517476,-28.1861345354357],[-48.8884574041574,-28.6741150855679],[-49.5873294744727,-29.2244690894763],[-50.6968741522115,-30.984465020473],[-51.5762261623062,-31.7776982561532],[-52.256081305538,-32.2453699683947],[-52.7120999822977,-33.1965780575912],[-53.3736616684982,-33.7683777809008],[-53.6505439927181,-33.2020040829818],[-53.2095889959715,-32.7276661109747],[-53.7879516261822,-32.0472425269876],[-54.5724515448051,-31.4945114071937],[-55.6015101792493,-30.8538786760714],[-55.9732445949409,-30.8830758603163],[-56.9760257635647,-30.1096863746361],[-57.6251334295829,-30.2162948544543]]]}},{"type":"Feature","properties":{"admin":"Brunei","name":"Brunei","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[114.204016554828,4.52587392823681],[114.599961379049,4.90001129802997],[115.45071048387,5.44772980389153],[115.405700311344,4.95522756593384],[115.347460972151,4.31663605388701],[114.869557326315,4.34831370688192],[114.659595981914,4.00763682699775],[114.204016554828,4.52587392823681]]]}},{"type":"Feature","properties":{"admin":"Bhutan","name":"Bhutan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[91.6966565286967,27.7717418482517],[92.1037117858597,27.4526140406332],[92.0334835143751,26.8383104517636],[91.2175126484864,26.808648179628],[90.3732747741341,26.8757241887429],[89.7445276224388,26.71940298106],[88.8356425312894,27.0989663762438],[88.8142484883205,27.2993159042394],[89.4758101745211,28.0427588974064],[90.0158288919712,28.2964385035272],[90.7305139505678,28.0649539250758],[91.2588537943199,28.0406143254663],[91.6966565286967,27.7717418482517]]]}},{"type":"Feature","properties":{"admin":"Botswana","name":"Botswana","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[25.6491634457502,-18.536025892819],[25.8503914730947,-18.7144129370905],[26.1647908871585,-19.2930856258949],[27.2965047543505,-20.391519870691],[27.7247473487532,-20.4990585262904],[27.7272278175033,-20.8518018531147],[28.0213700701086,-21.4859750302006],[28.7946562029242,-21.6394540341074],[29.432188348109,-22.0913127580676],[28.0172359555252,-22.8277535946591],[27.1194096208862,-23.5743230119798],[26.7864066911974,-24.2406906063835],[26.4857532081233,-24.6163265927131],[25.9416520525222,-24.6963733863332],[25.7658488298652,-25.1748454729237],[25.6646663754377,-25.4868160946697],[25.0251705258258,-25.7196700985769],[24.2112667172288,-25.6702157528736],[23.7335697771227,-25.3901294898516],[23.3120967953502,-25.2686898739657],[22.8242712745149,-25.5004586727948],[22.5795316911806,-25.9794475237081],[22.1059688656579,-26.2802560360791],[21.6058960303694,-26.7265337053518],[20.8896090023717,-26.8285429826959],[20.6664701677354,-26.4774533017049],[20.7586092465118,-25.8681364885514],[20.1657255388272,-24.9179619280008],[19.8957678565344,-24.7677902157606],[19.8954577979407,-21.8491569963479],[20.8811340674759,-21.8143270809831],[20.9106413103145,-18.252218926672],[21.655040317479,-18.2191460100052],[23.1968583513393,-17.8690381812278],[23.5790055681377,-18.2812610816201],[24.2173645362392,-17.8893470191185],[24.5207051937925,-17.8871249325299],[25.0844433936646,-17.6618156877374],[25.264225701608,-17.7365398088314],[25.6491634457502,-18.536025892819]]]}},{"type":"Feature","properties":{"admin":"Central African Republic","name":"Central African Rep.","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[15.2794604834691,7.42192454673797],[16.1062317237068,7.4970879175065],[16.2905615576919,7.7543073592393],[16.4561845231873,7.73477366783297],[16.7059883968863,7.50832754152998],[17.9649296403809,7.89091400800287],[18.3895548845232,8.28130361575182],[18.9110217627805,8.63089468020635],[18.8120097185093,8.9829145369786],[19.094008009526,9.07484691002584],[20.0596854997643,9.01270600019485],[21.0008683610962,9.47598521569151],[21.7238216488595,10.567055568886],[22.2311291846688,10.9718887394605],[22.8641654802442,11.1423951278075],[22.9775435726926,10.7144625919985],[23.5543042335022,10.0892552759153],[23.5572497901428,9.68121816653868],[23.3947790870172,9.26506785729222],[23.459012892356,8.95428579348889],[23.8058134294667,8.66631887454243],[24.5673690121521,8.22918793378547],[25.1149324887168,7.82510407147917],[25.1241308936647,7.50008515057944],[25.7966479835112,6.97931590415807],[26.2134184099451,6.54660329836207],[26.4659094581232,5.94671743410187],[27.2134090512252,5.55095347739456],[27.3742261085175,5.23394440350006],[27.0440653826047,5.12785268800484],[26.4027608578625,5.15087453859087],[25.6504553565575,5.25608775473712],[25.2787984555143,5.17040822999719],[25.1288334490033,4.92724477784779],[24.8050289242624,4.89724660890235],[24.4105310401463,5.10878408448913],[23.2972139828501,4.60969310141422],[22.8414795264681,4.71012624757348],[22.7041235694363,4.63305084881016],[22.4051237321955,4.02916006104732],[21.65912275563,4.22434194581372],[20.9275911801063,4.32278554932974],[20.2906791521089,4.69167776124529],[19.4677836442931,5.03152781821278],[18.9323124528848,4.70950613038597],[18.5429822119978,4.20178518311832],[18.4530652198099,3.50438589112335],[17.8099003435053,3.56019643799857],[17.1330424333463,3.72819651937945],[16.5370581397241,3.19825470622628],[16.0128524105554,2.26763967529808],[15.9073808122476,2.55738943115861],[15.8627323747475,3.01353729899898],[15.4053959489644,3.33530060466434],[15.0362195166712,3.85136729574712],[14.9509534033897,4.21038930909492],[14.4783724300805,4.73260549562045],[14.5589359880235,5.03059764243153],[14.4594071794293,5.4517605656103],[14.5365600928411,6.22695872642069],[14.7765454444046,6.40849803306204],[15.2794604834691,7.42192454673797]]]}},{"type":"Feature","properties":{"admin":"Canada","name":"Canada","continent":"North America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-63.6645,46.55001],[-62.9393,46.41587],[-62.01208,46.44314],[-62.50391,46.03339],[-62.87433,45.96818],[-64.1428,46.39265],[-64.39261,46.72747],[-64.01486,47.03601],[-63.6645,46.55001]]],[[[-61.806305,49.10506],[-62.29318,49.08717],[-63.58926,49.40069],[-64.51912,49.87304],[-64.17322,49.95718],[-62.85829,49.70641],[-61.835585,49.28855],[-61.806305,49.10506]]],[[[-123.510001587551,48.5100108913034],[-124.012890788399,48.3708462591414],[-125.655012777338,48.8250045843385],[-125.954994466793,49.1799958359676],[-126.850004435872,49.5300003118804],[-127.029993449544,49.8149958359701],[-128.059336304366,49.9949590114266],[-128.444584107102,50.5391376816761],[-128.358413656255,50.7706480983437],[-127.30858109603,50.552573554072],[-126.695000977212,50.4009032252954],[-125.755006673823,50.2950182155294],[-125.415001587559,49.9500005153326],[-124.920768189119,49.4752749700834],[-123.922508708321,49.0624836289358],[-123.510001587551,48.5100108913034]]],[[[-56.1340358140171,50.6870097926793],[-56.7958817205953,49.8123086614909],[-56.1431050278843,50.1501174993828],[-55.4714922756029,49.9358153346685],[-55.8224010890809,49.5871286077791],[-54.9351425848457,49.3130109726868],[-54.4737753973438,49.5566911891592],[-53.4765494451913,49.2491389023741],[-53.7860137599712,48.5167805039336],[-53.0861339992263,48.6878036566035],[-52.9586482407622,48.1571642116145],[-52.6480987209042,47.5355484075755],[-53.0691582912183,46.6554987656449],[-53.521456264853,46.6182917343948],[-54.1789355129025,46.807065741557],[-53.9618686590605,47.6252070176019],[-54.2404821437621,47.7522793646076],[-55.4007730780115,46.8849938014531],[-55.9974808416858,46.9197203639533],[-55.2912190415528,47.389562486351],[-56.2507987127805,47.6325450709874],[-57.3252292547771,47.572807115258],[-59.2660151841468,47.6033478867425],[-59.4194941880537,47.8994538437749],[-58.7965864732074,48.2515253769795],[-59.2316245184565,48.5231883815378],[-58.3918049790652,49.1255805527642],[-57.358689744686,50.7182740342158],[-56.738650071832,51.2874382594785],[-55.8709769354353,51.6320942246492],[-55.4069742498866,51.5882726100657],[-55.6002182684421,51.3170746933979],[-56.1340358140171,50.6870097926793]]],[[[-133.180004041712,54.1699754909353],[-132.710007884431,54.0400093154235],[-131.749989584003,54.1200043809092],[-132.049480347351,52.9846214870245],[-131.179042521827,52.1804328476983],[-131.577829549823,52.1823707139092],[-132.180428426779,52.6397071396924],[-132.549992432314,53.1000149603321],[-133.054611178756,53.4114688177554],[-133.239664482793,53.8510802272624],[-133.180004041712,54.1699754909353]]],[[[-79.26582,62.158675],[-79.65752,61.63308],[-80.09956,61.7181],[-80.36215,62.01649],[-80.315395,62.085565],[-79.92939,62.3856],[-79.52002,62.36371],[-79.26582,62.158675]]],[[[-81.89825,62.7108],[-83.06857,62.15922],[-83.77462,62.18231],[-83.99367,62.4528],[-83.25048,62.91409],[-81.87699,62.90458],[-81.89825,62.7108]]],[[[-85.1613079495499,65.6572846543928],[-84.9757637194059,65.217518215589],[-84.4640120104195,65.3717723659802],[-83.8826263089197,65.1096178249635],[-82.7875768704388,64.7666930202747],[-81.6420137193925,64.4551358099869],[-81.5534403144443,63.9796092800371],[-80.8173612128789,64.057485663501],[-80.1034513007666,63.7259813503486],[-80.9910198635957,63.411246039475],[-82.547178107417,63.6517223171452],[-83.108797573565,64.1018757188397],[-84.1004166328139,63.569711819098],[-85.523404710619,63.0523790554241],[-85.8667687649823,63.6372529161035],[-87.2219832018367,63.5412381049052],[-86.3527597724713,64.0358332383707],[-86.2248864407651,64.8229169786083],[-85.8838478258549,65.738778388117],[-85.1613079495499,65.6572846543928]]],[[[-75.86588,67.14886],[-76.98687,67.09873],[-77.2364,67.58809],[-76.81166,68.14856],[-75.89521,68.28721],[-75.1145,68.01036],[-75.10333,67.58202],[-75.21597,67.44425],[-75.86588,67.14886]]],[[[-95.6476812038005,69.1076903583218],[-96.2695212038006,68.7570403583217],[-97.6174012038005,69.0600303583218],[-98.4318012038005,68.9507003583218],[-99.7974012038005,69.4000303583218],[-98.9174012038005,69.7100303583218],[-98.2182612038005,70.1435403583217],[-97.1574012038005,69.8600303583218],[-96.5574012038005,69.6800303583218],[-96.2574012038005,69.4900303583218],[-95.6476812038005,69.1076903583218]]],[[[-90.5471,69.49766],[-90.55151,68.47499],[-89.21515,69.25873],[-88.01966,68.61508],[-88.31749,67.87338],[-87.35017,67.19872],[-86.30607,67.92146],[-85.57664,68.78456],[-85.52197,69.88211],[-84.10081,69.80539],[-82.62258,69.65826],[-81.28043,69.16202],[-81.2202,68.66567],[-81.96436,68.13253],[-81.25928,67.59716],[-81.38653,67.11078],[-83.34456,66.41154],[-84.73542,66.2573],[-85.76943,66.55833],[-86.0676,66.05625],[-87.03143,65.21297],[-87.32324,64.77563],[-88.48296,64.09897],[-89.91444,64.03273],[-90.70398,63.61017],[-90.77004,62.96021],[-91.93342,62.83508],[-93.15698,62.02469],[-94.24153,60.89865],[-94.62931,60.11021],[-94.6846,58.94882],[-93.21502,58.78212],[-92.76462,57.84571],[-92.2970299999999,57.08709],[-90.89769,57.28468],[-89.03953,56.85172],[-88.03978,56.47162],[-87.32421,55.99914],[-86.07121,55.72383],[-85.01181,55.3026],[-83.36055,55.24489],[-82.27285,55.14832],[-82.4362,54.28227],[-82.12502,53.27703],[-81.40075,52.15788],[-79.91289,51.20842],[-79.14301,51.53393],[-78.60191,52.56208],[-79.12421,54.14145],[-79.82958,54.66772],[-78.22874,55.13645],[-77.0956,55.83741],[-76.54137,56.53423],[-76.62319,57.20263],[-77.30226,58.05209],[-78.51688,58.80458],[-77.33676,59.85261],[-77.77272,60.75788],[-78.10687,62.31964],[-77.41067,62.55053],[-75.69621,62.2784],[-74.6682,62.18111],[-73.83988,62.4438],[-72.90853,62.10507],[-71.67708,61.52535],[-71.37369,61.13717],[-69.59042,61.06141],[-69.62033,60.22125],[-69.2879,58.95736],[-68.37455,58.80106],[-67.64976,58.21206],[-66.20178,58.76731],[-65.24517,59.87071],[-64.58352,60.33558],[-63.80475,59.4426],[-62.50236,58.16708],[-61.39655,56.96745],[-61.79866,56.33945],[-60.46853,55.77548],[-59.56962,55.20407],[-57.97508,54.94549],[-57.3332,54.6265],[-56.93689,53.78032],[-56.15811,53.64749],[-55.75632,53.27036],[-55.68338,52.14664],[-56.40916,51.7707],[-57.12691,51.41972],[-58.77482,51.0643],[-60.03309,50.24277],[-61.72366,50.08046],[-63.86251,50.29099],[-65.36331,50.2982],[-66.39905,50.22897],[-67.23631,49.51156],[-68.51114,49.06836],[-69.95362,47.74488],[-71.10458,46.82171],[-70.25522,46.98606],[-68.65,48.3],[-66.55243,49.1331],[-65.05626,49.23278],[-64.17099,48.74248],[-65.11545,48.07085],[-64.79854,46.99297],[-64.47219,46.23849],[-63.17329,45.73902],[-61.52072,45.88377],[-60.51815,47.00793],[-60.4486,46.28264],[-59.80287,45.9204],[-61.03988,45.26525],[-63.25471,44.67014],[-64.24656,44.26553],[-65.36406,43.54523],[-66.1234,43.61867],[-66.16173,44.46512],[-64.42549,45.29204],[-66.02605,45.25931],[-67.13741,45.13753],[-67.79134,45.70281],[-67.79046,47.06636],[-68.23444,47.35486],[-68.905,47.185],[-69.237216,47.447781],[-69.99997,46.69307],[-70.305,45.915],[-70.66,45.46],[-71.08482,45.30524],[-71.405,45.255],[-71.50506,45.0082],[-73.34783,45.00738],[-74.867,45.00048],[-75.31821,44.81645],[-76.375,44.09631],[-76.5,44.0184588937587],[-76.8200341458056,43.6287842880938],[-77.7378850979577,43.6290555893633],[-78.7202799140424,43.6250894231849],[-79.1716735501119,43.4663394231842],[-79.01,43.27],[-78.92,42.965],[-78.9393621487437,42.863611355148],[-80.2474476793479,42.3661998561226],[-81.2777465481671,42.2090259873068],[-82.4392777167916,41.6751050888672],[-82.6900892809202,41.6751050888672],[-83.0298101468069,41.8327957220058],[-83.1419996813126,41.9756810572928],[-83.12,42.08],[-82.9,42.43],[-82.43,42.98],[-82.1376423815039,43.5710875514399],[-82.3377631254311,44.44],[-82.5509246487582,45.3475165879054],[-83.5928507148431,45.8168936224124],[-83.4695507473946,45.9946863877126],[-83.6161309475906,46.1169269882991],[-83.8907653470057,46.1169269882991],[-84.0918512641615,46.2754186061382],[-84.1421195136734,46.5122258571157],[-84.3367,46.40877],[-84.6049,46.4396],[-84.5437487454459,46.5386841904491],[-84.7792382473999,46.637101955749],[-84.8760798815149,46.9000833196824],[-85.6523632474034,47.2202188177305],[-86.4619908312283,47.553338019392],[-87.4397926233002,47.94],[-88.3781141832867,48.3029175888937],[-89.2729174466367,48.0198082545827],[-89.6,48.01],[-90.83,48.27],[-91.64,48.14],[-92.61,48.45],[-93.63087,48.60926],[-94.32914,48.67074],[-94.64,48.84],[-94.81758,49.38905],[-95.15609,49.38425],[-95.159069509172,49],[-97.2287200000048,49.0007],[-100.65,49],[-104.04826,48.99986],[-107.05,49],[-110.05,49],[-113,49],[-116.04818,49],[-117.03121,49],[-120,49],[-122.84,49],[-122.97421,49.0025377777778],[-124.91024,49.98456],[-125.62461,50.41656],[-127.43561,50.83061],[-127.99276,51.71583],[-127.85032,52.32961],[-129.12979,52.75538],[-129.30523,53.56159],[-130.51497,54.28757],[-130.53611,54.80278],[-129.98,55.285],[-130.00778,55.91583],[-131.70781,56.55212],[-132.73042,57.69289],[-133.35556,58.41028],[-134.27111,58.86111],[-134.945,59.27056],[-135.47583,59.78778],[-136.47972,59.46389],[-137.4525,58.905],[-138.34089,59.56211],[-139.039,60],[-140.013,60.27682],[-140.99778,60.30639],[-140.9925,66.00003],[-140.986,69.712],[-139.12052,69.47102],[-137.54636,68.99002],[-136.50358,68.89804],[-135.62576,69.31512],[-134.41464,69.62743],[-132.92925,69.50534],[-131.43136,69.94451],[-129.79471,70.19369],[-129.10773,69.77927],[-128.36156,70.01286],[-128.13817,70.48384],[-127.44712,70.37721],[-125.75632,69.48058],[-124.42483,70.1584],[-124.28968,69.39969],[-123.06108,69.56372],[-122.6835,69.85553],[-121.47226,69.79778],[-119.94288,69.37786],[-117.60268,69.01128],[-116.22643,68.84151],[-115.2469,68.90591],[-113.89794,68.3989],[-115.30489,67.90261],[-113.49727,67.68815],[-110.798,67.80612],[-109.94619,67.98104],[-108.8802,67.38144],[-107.79239,67.88736],[-108.81299,68.31164],[-108.16721,68.65392],[-106.95,68.7],[-106.15,68.8],[-105.34282,68.56122],[-104.33791,68.018],[-103.22115,68.09775],[-101.45433,67.64689],[-99.90195,67.80566],[-98.4432,67.78165],[-98.5586,68.40394],[-97.66948,68.57864],[-96.11991,68.23939],[-96.12588,67.29338],[-95.48943,68.0907],[-94.685,68.06383],[-94.23282,69.06903],[-95.30408,69.68571],[-96.47131,70.08976],[-96.39115,71.19482],[-95.2088,71.92053],[-93.88997,71.76015],[-92.87818,71.31869],[-91.51964,70.19129],[-92.40692,69.69997],[-90.5471,69.49766]]],[[[-114.16717,73.12145],[-114.66634,72.65277],[-112.44102,72.9554],[-111.05039,72.4504],[-109.92035,72.96113],[-109.00654,72.63335],[-108.18835,71.65089],[-107.68599,72.06548],[-108.39639,73.08953],[-107.51645,73.23598],[-106.52259,73.07601],[-105.40246,72.67259],[-104.77484,71.6984],[-104.46476,70.99297],[-102.78537,70.49776],[-100.98078,70.02432],[-101.08929,69.5844700000001],[-102.73116,69.50402],[-102.09329,69.11962],[-102.43024,68.75282],[-104.24,68.91],[-105.96,69.1800000000001],[-107.12254,69.11922],[-109,68.78],[-111.5341488752,68.6300591568179],[-113.3132,68.53554],[-113.85496,69.0074400000001],[-115.22,69.28],[-116.10794,69.16821],[-117.34,69.9600000000001],[-116.67473,70.06655],[-115.13112,70.2373],[-113.72141,70.19237],[-112.4161,70.36638],[-114.35,70.6],[-116.48684,70.52045],[-117.9048,70.5405600000001],[-118.43238,70.9092],[-116.11311,71.30918],[-117.65568,71.2952],[-119.40199,71.55859],[-118.56267,72.30785],[-117.86642,72.70594],[-115.18909,73.3145900000001],[-114.16717,73.12145]]],[[[-104.5,73.42],[-105.38,72.76],[-106.94,73.46],[-106.6,73.6],[-105.26,73.64],[-104.5,73.42]]],[[[-76.34,73.102684989953],[-76.2514038085937,72.8263854980469],[-77.3144378662109,72.8555450439453],[-78.3916702270508,72.8766555786133],[-79.4862518310546,72.7422027587891],[-79.7758331298828,72.8029022216797],[-80.8760986328125,73.3331832885742],[-80.8338851928711,73.6931838989258],[-80.3530578613281,73.7597198486328],[-78.0644378662109,73.6519317626953],[-76.34,73.102684989953]]],[[[-86.5621785143341,73.1574470079384],[-85.7743713040445,72.5341258816338],[-84.8501124742882,73.3402782253871],[-82.315590176101,73.7509508328106],[-80.6000876533076,72.7165436876242],[-80.7489416165244,72.0619066433508],[-78.7706385973108,72.3521731635342],[-77.8246239895596,72.749616604291],[-75.6058446926757,72.2436784939374],[-74.228616095665,71.7671442735579],[-74.0991407945577,71.3308401557176],[-72.2422257147976,71.5569245469945],[-71.2000154283352,70.9200125189972],[-68.7860542466849,70.5250237087742],[-67.9149704657569,70.1219475368976],[-66.9690333726542,69.1860873480919],[-68.8051228502005,68.7201984727644],[-66.4498660956339,68.067163397892],[-64.8623144191952,67.8475385606516],[-63.4249344549967,66.9284732123407],[-61.8519813706806,66.8621206732778],[-62.1631768459423,66.1602513698896],[-63.9184443833842,64.9986685248328],[-65.1488602362536,65.4260326198867],[-66.7212190415985,66.3880410834322],[-68.015016038674,66.2627257351244],[-68.1412874009792,65.6897891303044],[-67.0896461656234,65.108455105237],[-65.7320804510998,64.6484056667586],[-65.3201676093013,64.3827371283461],[-64.6694062974497,63.3929267442275],[-65.0138038804589,62.674185085696],[-66.2750447251905,62.9450987819861],[-68.7831862046927,63.7456700710518],[-67.369680752213,62.8839655625849],[-66.3282972886672,62.280074774822],[-66.1655682033802,61.9308971218259],[-68.8773665025446,62.3301492377128],[-71.0234370591938,62.9107081162958],[-72.235378587519,63.3978360052952],[-71.8862784491713,63.6799893256088],[-73.3783062405184,64.1939631211838],[-74.8344189114226,64.6790756293238],[-74.8185025702767,64.389093329518],[-77.70997982452,64.2295423448168],[-78.5559488593542,64.5729063991801],[-77.8972810533619,65.3091922064748],[-76.0182742987972,65.3269688991831],[-73.9597952948827,65.4547647162409],[-74.2938834296496,65.8117713487294],[-73.9449124823826,66.3105781114267],[-72.6511671617394,67.2845755072639],[-72.9260599433161,67.7269257676824],[-73.3116178046457,68.0694371609129],[-74.8433072577768,68.5546271837013],[-76.8691009182667,68.8947356228303],[-76.2286490546573,69.1477692735474],[-77.2873699612371,69.7695401068833],[-78.1686339993266,69.8264875352689],[-78.9572421943167,70.1668801947754],[-79.4924550035637,69.8718077663889],[-81.3054709540917,69.7431851264143],[-84.9447061835985,69.9666340196444],[-87.0600034248179,70.2600011257654],[-88.6817132230015,70.4107412787608],[-89.513419562523,70.762037665481],[-88.4677211168808,71.2181855333213],[-89.8881512112875,71.2225521918499],[-90.205160285182,72.2350743679608],[-89.4365767077049,73.1294642198524],[-88.4082415433128,73.5378889024712],[-85.8261510892009,73.8038158230452],[-86.5621785143341,73.1574470079384]]],[[[-100.35642,73.84389],[-99.16387,73.63339],[-97.38,73.76],[-97.12,73.47],[-98.05359,72.99052],[-96.54,72.56],[-96.72,71.66],[-98.35966,71.27285],[-99.32286,71.35639],[-100.01482,71.73827],[-102.5,72.51],[-102.48,72.83],[-100.43836,72.70588],[-101.54,73.36],[-100.35642,73.84389]]],[[[-93.1962955391002,72.7719924994733],[-94.2690465970473,72.024596259236],[-95.4098555163226,72.0618808051346],[-96.0337450833824,72.9402768012318],[-96.018267991911,73.4374299180958],[-95.495793423224,73.8624168972642],[-94.5036575996523,74.1349067247392],[-92.4200121732118,74.1000251329422],[-90.5097928535426,73.856732489712],[-92.0039652168299,72.9662442084585],[-93.1962955391002,72.7719924994733]]],[[[-120.46,71.3836017930876],[-123.09219,70.90164],[-123.62,71.34],[-125.928948737473,71.8686884630114],[-125.5,72.292260811795],[-124.80729,73.02256],[-123.94,73.6800000000001],[-124.91775,74.2927500000001],[-121.53788,74.44893],[-120.10978,74.24135],[-117.55564,74.18577],[-116.58442,73.89607],[-115.51081,73.47519],[-116.76794,73.22292],[-119.22,72.52],[-120.46,71.82],[-120.46,71.3836017930876]]],[[[-93.6127559069405,74.9799972602244],[-94.1569087389738,74.5923465033869],[-95.6086805895656,74.6668639187518],[-96.8209321764846,74.9276231960966],[-96.2885874092298,75.3778282742233],[-94.8508198717891,75.6472175157609],[-93.9777465482179,75.296489569796],[-93.6127559069405,74.9799972602244]]],[[[-98.5,76.72],[-97.735585,76.25656],[-97.704415,75.74344],[-98.16,75],[-99.80874,74.89744],[-100.88366,75.05736],[-100.86292,75.64075],[-102.50209,75.5638],[-102.56552,76.3366],[-101.48973,76.30537],[-99.98349,76.64634],[-98.57699,76.58859],[-98.5,76.72]]],[[[-108.21141,76.20168],[-107.81943,75.84552],[-106.92893,76.01282],[-105.881,75.9694],[-105.70498,75.47951],[-106.31347,75.00527],[-109.7,74.85],[-112.22307,74.41696],[-113.74381,74.39427],[-113.87135,74.72029],[-111.79421,75.1625],[-116.31221,75.04343],[-117.7104,75.2222],[-116.34602,76.19903],[-115.40487,76.47887],[-112.59056,76.14134],[-110.81422,75.54919],[-109.0671,75.47321],[-110.49726,76.42982],[-109.5811,76.79417],[-108.54859,76.67832],[-108.21141,76.20168]]],[[[-94.6840858629994,77.0978783230584],[-93.5739210680731,76.7762958849061],[-91.6050231595366,76.7785179714946],[-90.7418458727492,76.4495974799568],[-90.969661424508,76.0740131700594],[-89.8222379218992,75.8477737494856],[-89.1870828925998,75.6101655138076],[-87.8382763333496,75.5661888699272],[-86.3791922675887,75.4824213731822],[-84.7896252102906,75.6992040066465],[-82.7534445869101,75.7843150906312],[-81.1285308499244,75.713983466282],[-80.0575109524591,75.3368488634159],[-79.8339328681483,74.9231273464872],[-80.4577707587758,74.6573037787778],[-81.9488425361255,74.4424590115243],[-83.2288936022114,74.5640278184909],[-86.0974523587333,74.4100320502611],[-88.1503503079602,74.392307033985],[-89.7647220527584,74.5155553250011],[-92.4224409655294,74.837757880341],[-92.7682854886428,75.3868199734421],[-92.8899059720417,75.8826553412826],[-93.893824022176,76.3192436795005],[-95.9624574450358,76.4413809272224],[-97.1213789538295,76.7510777859476],[-96.7451228503123,77.1613886583451],[-94.6840858629994,77.0978783230584]]],[[[-116.198586595507,77.6452867703262],[-116.335813361458,76.8769615750106],[-117.106050584769,76.5300318468191],[-118.040412157038,76.4811717800871],[-119.899317586886,76.053213406062],[-121.499995077126,75.9000186225328],[-122.854924486159,76.1165428738357],[-122.854925293603,76.1165428738357],[-121.157535360328,76.8645075548283],[-119.103938971821,77.5122199571746],[-117.570130784966,77.4983189968881],[-116.198586595507,77.6452867703262]]],[[[-93.840003017944,77.5199972602345],[-94.2956082832452,77.4913426785287],[-96.1696541003101,77.5551113959769],[-96.4363044909361,77.8346292182436],[-94.4225772773864,77.820004787905],[-93.7206562975659,77.6343313666803],[-93.840003017944,77.5199972602345]]],[[[-110.186938035913,77.6970148790503],[-112.051191169058,77.4092288276168],[-113.534278937619,77.7322065294411],[-112.724586758254,78.0510501166819],[-111.264443325631,78.1529560411615],[-109.854451870547,77.9963247748848],[-110.186938035913,77.6970148790503]]],[[[-109.663145718203,78.6019725613457],[-110.881314256619,78.40691986766],[-112.542091437615,78.4079017198735],[-112.525890876092,78.5505545112152],[-111.500010342233,78.8499935981305],[-110.963660651476,78.8044408230652],[-109.663145718203,78.6019725613457]]],[[[-95.8302949694493,78.0569412299632],[-97.309842902398,77.8505972358218],[-98.124289313534,78.0828569607576],[-98.5528678047466,78.4581053738451],[-98.6319844225855,78.8719302436384],[-97.3372314115126,78.8319843614768],[-96.7543987699088,78.765812689927],[-95.5592779202946,78.4183145209803],[-95.8302949694493,78.0569412299632]]],[[[-100.060191820052,78.3247543403159],[-99.6709390938136,77.9075446642074],[-101.303940192453,78.0189848904448],[-102.949808722733,78.3432286648602],[-105.176132778732,78.3803323432457],[-104.210429450277,78.6774201524918],[-105.419580451259,78.9183356798364],[-105.492289191493,79.3015939399292],[-103.529282396238,79.1653490261916],[-100.825158047269,78.8004617377787],[-100.060191820052,78.3247543403159]]],[[[-87.02,79.66],[-85.81435,79.3369],[-87.18756,79.0393],[-89.03535,78.28723],[-90.80436,78.21533],[-92.87669,78.34333],[-93.95116,78.75099],[-93.93574,79.11373],[-93.14524,79.3801],[-94.974,79.37248],[-96.07614,79.70502],[-96.70972,80.15777],[-96.01644,80.60233],[-95.32345,80.90729],[-94.29843,80.97727],[-94.73542,81.20646],[-92.40984,81.25739],[-91.13289,80.72345],[-89.45,80.5093220338983],[-87.81,80.32],[-87.02,79.66]]],[[[-68.5,83.1063215167657],[-65.82735,83.02801],[-63.68,82.9],[-61.85,82.6286],[-61.89388,82.36165],[-64.334,81.92775],[-66.75342,81.72527],[-67.65755,81.50141],[-65.48031,81.50657],[-67.84,80.9],[-69.4697,80.61683],[-71.18,79.8],[-73.2428,79.63415],[-73.88,79.4301622048021],[-76.90773,79.32309],[-75.52924,79.19766],[-76.22046,79.01907],[-75.39345,78.52581],[-76.34354,78.18296],[-77.88851,77.89991],[-78.36269,77.50859],[-79.75951,77.20968],[-79.61965,76.98336],[-77.91089,77.022045],[-77.88911,76.777955],[-80.56125,76.17812],[-83.17439,76.45403],[-86.11184,76.29901],[-87.6,76.42],[-89.49068,76.47239],[-89.6161,76.95213],[-87.76739,77.17833],[-88.26,77.9],[-87.65,77.9702222222222],[-84.97634,77.53873],[-86.34,78.18],[-87.96192,78.37181],[-87.15198,78.75867],[-85.37868,78.9969],[-85.09495,79.34543],[-86.50734,79.73624],[-86.93179,80.25145],[-84.19844,80.20836],[-83.4086956521738,80.1],[-81.84823,80.46442],[-84.1,80.58],[-87.59895,80.51627],[-89.36663,80.85569],[-90.2,81.26],[-91.36786,81.5531],[-91.58702,81.89429],[-90.1,82.085],[-88.93227,82.11751],[-86.97024,82.27961],[-85.5,82.652273458057],[-84.260005,82.6],[-83.18,82.32],[-82.42,82.86],[-81.1,83.02],[-79.30664,83.13056],[-76.25,83.1720588235294],[-75.71878,83.06404],[-72.83153,83.23324],[-70.665765,83.1697807583828],[-68.5,83.1063215167657]]]]}},{"type":"Feature","properties":{"admin":"Switzerland","name":"Switzerland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[9.59422610844635,47.5250580918203],[9.63293175623297,47.34760122333],[9.47996951664902,47.1028099635634],[9.93244835779666,46.920728054383],[10.4427014502466,46.8935462509974],[10.3633781266786,46.4835712754099],[9.92283654139038,46.3148994004092],[9.18288170740305,46.440214748717],[8.9663057796678,46.0369318711112],[8.48995242680132,46.0051508652517],[8.31662967289438,46.1636424830909],[7.75599205895983,45.8244900579593],[7.27385094567666,45.7769477402508],[6.8435929704145,45.9911465521006],[6.50009972497042,46.4296727565294],[6.02260949059354,46.2729898138205],[6.037388950229,46.7257787135619],[6.76871382002361,47.2877082383037],[6.73657107913806,47.5418012558828],[7.19220218265551,47.449765529971],[7.46675906742223,47.6205819769118],[8.31730146651415,47.6135798203363],[8.52261193200977,47.8308275416913],[9.59422610844635,47.5250580918203]]]}},{"type":"Feature","properties":{"admin":"Chile","name":"Chile","continent":"South America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-68.6340102275832,-52.6363704588744],[-68.6333499999999,-54.8695],[-67.56244,-54.87001],[-66.95992,-54.89681],[-67.2910299999999,-55.30124],[-68.1486299999998,-55.61183],[-68.6399908108118,-55.5800179990869],[-69.2321,-55.49906],[-69.95809,-55.19843],[-71.00568,-55.05383],[-72.2639,-54.49514],[-73.2852,-53.9575199999999],[-74.66253,-52.83749],[-73.8381,-53.04743],[-72.43418,-53.7154],[-71.10773,-54.07433],[-70.5917799999998,-53.61583],[-70.26748,-52.93123],[-69.3456499999999,-52.5183],[-68.6340102275832,-52.6363704588744]]],[[[-68.2199130927112,-21.4943466122318],[-67.8281798977226,-22.8729187964822],[-67.1066735500636,-22.7359245744764],[-66.9852339341776,-22.9863485653628],[-67.3284429592441,-24.0253032365909],[-68.4176529608761,-24.5185547828169],[-68.3860011460973,-26.1850163713652],[-68.5947997707727,-26.5069088681113],[-68.2955415513704,-26.8993396949358],[-69.0012349107483,-27.5212138811361],[-69.6561303371831,-28.4591411272337],[-70.0135503811299,-29.3679228655185],[-69.9190083482519,-30.3363392066683],[-70.5350689358194,-31.3650102678703],[-70.0743993801536,-33.091209812148],[-69.8147769843192,-33.2738860002998],[-69.8173091295015,-34.1935714657983],[-70.3880494859491,-35.1696875953594],[-70.3647692532017,-36.0050887997899],[-71.1218806627098,-36.6581238746623],[-71.1186250474754,-37.5768274879472],[-70.8146642727347,-38.5529952939407],[-71.413516608349,-38.9160222307911],[-71.6807612779464,-39.8081641578781],[-71.9157340155775,-40.8323393694707],[-71.7468037584155,-42.051386407236],[-72.1488980780785,-42.2548881976014],[-71.9154239569839,-43.4085645485174],[-71.4640561591305,-43.7876111793783],[-71.7936226060719,-44.2071721331561],[-71.3298007880362,-44.4075216611517],[-71.2227788967597,-44.7842428525594],[-71.6593155585453,-44.9736886533414],[-71.5520094468912,-45.5607329241771],[-71.9172584703302,-46.8848381487918],[-72.4473553127803,-47.7385328102535],[-72.3311608547719,-48.2442383766618],[-72.6482474433149,-48.8786182594768],[-73.41543575712,-49.318436374713],[-73.3280509101145,-50.3787850889099],[-72.9757468329646,-50.7414502907343],[-72.3099735175323,-50.6770097796663],[-72.329403856074,-51.4259563128724],[-71.9148038397963,-52.0090223058659],[-69.4983621893961,-52.1427609126372],[-68.5715453762413,-52.2994438553463],[-69.4612843492266,-52.2919507726639],[-69.9427795071061,-52.5379305903732],[-70.8451016913545,-52.8992005285257],[-71.0063321601052,-53.8332520422013],[-71.4297946845209,-53.8564547603004],[-72.5579428778849,-53.5314100011845],[-73.7027567206629,-52.8350692686073],[-73.7027567206629,-52.8350700760515],[-74.9467634752252,-52.262753588419],[-75.2600260077785,-51.6293547503732],[-74.9766324530898,-51.0433956846157],[-75.4797541978835,-50.3783716774516],[-75.6080151028319,-48.6737728818718],[-75.1827697415021,-47.7119194476232],[-74.1265809801047,-46.9392534319951],[-75.6443953111654,-46.647643324572],[-74.6921536933231,-45.763976332381],[-74.3517093573843,-44.1030441220879],[-73.2403560045152,-44.4549606259956],[-72.7178039211798,-42.383355808279],[-73.3888999091382,-42.1175322405696],[-73.7013356187748,-43.3657764625797],[-74.3319431220326,-43.2249581845844],[-74.0179571194272,-41.7948129209068],[-73.6770993720299,-39.9422128232431],[-73.2175925360907,-39.2586886533185],[-73.505559455037,-38.2828825823511],[-73.5880608791911,-37.156284681956],[-73.1667170884993,-37.1237802060444],[-72.5531369696817,-35.508840020491],[-71.8617321438326,-33.9090927060315],[-71.4384504869299,-32.4188994280308],[-71.6687206692224,-30.9206446265925],[-71.3700825670077,-30.095682061485],[-71.4898943752765,-28.8614421526259],[-70.9051238674616,-27.6403797340012],[-70.724953986276,-25.7059241675872],[-70.403965827095,-23.6289966773445],[-70.0912458970807,-21.3933191871012],[-70.164419725206,-19.7564681942562],[-70.3725723944777,-18.3479753557089],[-69.8584435696058,-18.092693780187],[-69.590423753524,-17.5800118954193],[-69.1002469550194,-18.2601254208127],[-68.9668184068418,-18.9816834449041],[-68.4422251044309,-19.4050684546714],[-68.7571671210337,-20.3726579729045],[-68.2199130927112,-21.4943466122318]]]]}},{"type":"Feature","properties":{"admin":"China","name":"China","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[110.339187860152,18.6783950871476],[109.475209588664,18.1977009139686],[108.655207961056,18.5076819930714],[108.62621748254,19.367887885002],[109.119055617308,19.8210385197694],[110.211598748823,20.1012539738721],[110.786550734502,20.0775344914501],[111.010051304165,19.6959298771907],[110.570646600387,19.2558792180093],[110.339187860152,18.6783950871476]]],[[[127.657407261262,49.7602704941729],[129.39781782442,49.4406000840154],[130.582293328982,48.7296874049761],[130.987281528854,47.7901323512614],[132.5066719911,47.7889696315349],[133.373595819228,48.1834416774349],[135.026311476787,48.4782298854439],[134.500813836811,47.5784398463778],[134.112362095273,47.2124673528867],[133.769643996313,46.1169269882991],[133.097126906466,45.1440664739722],[131.88345421766,45.3211616074364],[131.025212030156,44.9679531927216],[131.288555129116,44.1115196803483],[131.144687941615,42.9299897324269],[130.63386640841,42.9030146347705],[130.640015903852,42.3950094671253],[129.994267205933,42.9853868678438],[129.596668735879,42.4249817978546],[128.052215203972,41.994284572918],[128.208433058791,41.4667715520825],[127.343782993683,41.503151760416],[126.86908328665,41.8165693222662],[126.182045119329,41.1073361272764],[125.079941847841,40.5698237167925],[124.265624627785,39.9284933538341],[122.867570428561,39.6377875839763],[122.131387974131,39.1704517685446],[121.054554478033,38.8974710149629],[121.585994907722,39.3608535833241],[121.376757033373,39.7502613388595],[122.168595005381,40.422442531896],[121.640358514494,40.9463898789033],[120.768628778162,40.5933881699176],[119.639602085449,39.8980559352142],[119.023463983233,39.2523330755111],[118.042748651198,39.2042739934797],[117.532702264477,38.7376358098841],[118.05969852099,38.0614755315611],[118.878149855628,37.8973253443859],[118.911636183754,37.4484638534987],[119.702802362142,37.1563886581851],[120.823457472824,37.870427761378],[121.711258579598,37.4811233587072],[122.357937453298,37.4544841578607],[122.519994744966,36.9306143255018],[121.104163853033,36.6513290471804],[120.637008905115,36.1114395208111],[119.664561802246,35.6097905543377],[119.151208123859,34.9098591171605],[120.227524855634,34.3603319361686],[120.620369093917,33.3767227239251],[121.22901411345,32.4603187118772],[121.90814578663,31.6921743840747],[121.89191938689,30.9493515080951],[121.264257440273,30.6762674016487],[121.503519321785,30.1429149439643],[122.092113885589,29.8325204534032],[121.938428175953,29.0180223658348],[121.684438511238,28.2255126002067],[121.125661248866,28.1356731226672],[120.395473260582,27.0532068954494],[119.58549686084,25.7407805445326],[118.656871372555,24.5473908554002],[117.281606479971,23.6245014510997],[115.890735304835,22.7828732365781],[114.763827345846,22.6680740422417],[114.152546828266,22.2237600773962],[113.806779819801,22.5483397486214],[113.241077915502,22.0513674992705],[111.843592157032,21.5504936792815],[110.785465529424,21.3971438664553],[110.444039341272,20.3410326197064],[109.889861281374,20.2824573837034],[109.627655063925,21.0082270370267],[109.864488153118,21.3950509709475],[108.522812941524,21.7152123072118],[108.050180291783,21.5523798690601],[107.043420037873,21.8118989120299],[106.567273390735,22.2182048609247],[106.725403273548,22.7942678898984],[105.811247186305,22.9768924016179],[105.329209425887,23.352063300057],[104.476858351664,22.8191500920469],[103.504514601661,22.7037566187392],[102.7069922221,22.7087950708877],[102.170435825614,22.4647531193893],[101.652017856862,22.3181987574096],[101.803119744883,21.1743667668451],[101.27002566936,21.2016519230952],[101.180005324308,21.4365729842941],[101.150032993578,21.849984442629],[100.416537713627,21.5588394230967],[99.9834892110216,21.7429367131365],[99.2408988789872,22.1183143173046],[99.5319922220874,22.9490388046126],[98.8987492207828,23.1427220728426],[98.6602624857558,24.06328603769],[97.604719679762,23.8974046900331],[97.7246090026791,25.083637193293],[98.6718380065892,25.9187025009135],[98.7120939473446,26.7435358749402],[98.6826900573705,27.5088121607507],[98.2462309102334,27.7472213811292],[97.9119877461694,28.3359451360144],[97.32711388549,28.2615827499463],[96.2488334492878,28.4110309921345],[96.5865906107475,28.8309795191544],[96.117678664131,29.4528020289225],[95.4048022806646,29.0317166203922],[94.5659904317029,29.27743805594],[93.4133476094327,28.6406293808072],[92.5031189310436,27.8968763290464],[91.6966565286967,27.7717418482516],[91.2588537943199,28.0406143254663],[90.7305139505678,28.0649539250757],[90.0158288919712,28.2964385035272],[89.4758101745212,28.0427588974064],[88.8142484883206,27.2993159042394],[88.7303259622785,28.0868647323676],[88.1204407083699,27.8765416529396],[86.9545170430006,27.9742617864035],[85.8233199401315,28.2035759546987],[85.0116382181231,28.6427739527474],[84.2345797057502,28.8398937037247],[83.8989929544467,29.3202261418776],[83.3371151061372,29.4637315943522],[82.3275126484509,30.1152680526882],[81.5258044778748,30.4227169866087],[81.1112561380293,30.1834809433134],[79.7213668151071,30.8827147486547],[78.738894484374,31.515906073527],[78.458446486326,32.6181643743127],[79.1761287779955,32.4837798121378],[79.2088916360685,32.9943946396137],[78.8110864602857,33.5061980250324],[78.9122689147132,34.3219363469758],[77.8374507994746,35.4940095077878],[76.1928483417857,35.8984034286879],[75.8968974140502,36.6668061386519],[75.158027785141,37.1330309107892],[74.9800024758954,37.4199901393059],[74.8299857929521,37.9900070257014],[74.8648157083168,38.3788463404816],[74.2575142760227,38.6065068629435],[73.9288521666464,38.5058153346227],[73.6753792662548,39.4312368841056],[73.9600130553184,39.6600084498617],[73.8222436868283,39.8939734970631],[74.776862420556,40.3664252792916],[75.4678279967307,40.5620722519487],[76.5263680357974,40.4279460719351],[76.9044844908771,41.0664859075497],[78.187196893226,41.1853158636048],[78.5436609231753,41.5822425400387],[80.1194303730514,42.1239407415382],[80.2599902688853,42.3499992945991],[80.1801501809944,42.9200678574268],[80.8662064961012,43.180362046881],[79.9661063984414,44.9175169948046],[81.9470707539181,45.3170274928531],[82.458925815769,45.5396495631665],[83.1804838398605,47.3300312363507],[85.1642903991132,47.0009557155161],[85.7204838398707,47.4529694687731],[85.7682328633084,48.4557506373969],[86.5987764831034,48.5491816269806],[87.3599703307627,49.2149807806292],[87.7512642760767,49.2971979844055],[88.0138322285517,48.5994627956006],[88.8542977233468,48.069081732773],[90.2808256367639,47.6935490993079],[90.970809360725,46.8881460638229],[90.5857682637183,45.7197160914875],[90.9455395853343,45.2860733099102],[92.1338908223182,45.1150759954564],[93.4807336771413,44.97547211362],[94.6889286641254,44.3523318548285],[95.3068754414715,44.2413308782655],[95.7624548685567,43.3194491643946],[96.3493957865278,42.7256352809286],[97.451757440178,42.7488896754601],[99.51581749878,42.5246914739617],[100.845865513108,42.6638044296914],[101.83304039918,42.5148729518263],[103.312278273535,41.9074681666676],[104.522281935649,41.9083466660166],[104.964993931093,41.5974095729163],[106.129315627062,42.1343277044289],[107.744772576938,42.4815158147819],[109.243595819131,42.5194463160842],[110.412103306115,42.871233628911],[111.12968224492,43.4068340114002],[111.829587843881,43.7431183945395],[111.667737257943,44.0731757675877],[111.348376906379,44.4574417181101],[111.8733061056,45.1020793727351],[112.436062453259,45.0116456162243],[113.463906691544,44.8088931341271],[114.460331658996,45.3398167994939],[115.9850964702,45.727235012386],[116.717868280099,46.3882024196152],[117.421701287914,46.6727328558142],[118.874325799639,46.8054120957236],[119.663269891439,46.6926799586789],[119.772823927898,47.0480587835501],[118.866574334795,47.7470600449462],[118.064142694167,48.0667304551037],[117.295507440257,47.6977090521074],[116.308952671373,47.8534101426028],[115.742837355616,47.7265445013263],[115.485282017073,48.1353825954034],[116.191802199368,49.1345980901991],[116.678800897286,49.8885313991214],[117.879244419426,49.5109833847969],[119.288460728026,50.142882798862],[119.279365675942,50.5829076198273],[120.182049595217,51.643566392618],[120.738191359542,51.9641153021246],[120.725789015792,52.5162263047308],[120.177088657717,52.7538862168412],[121.00308475147,53.2514010687312],[122.245747918793,53.4317259792137],[123.571506789241,53.4588044297346],[125.06821129771,53.1610448268688],[125.946348911646,52.7927985703569],[126.564399041857,51.7842554795327],[126.939156528838,51.3538941514059],[127.287455682485,50.7397972682654],[127.657407261262,49.7602704941729]]]]}},{"type":"Feature","properties":{"admin":"Ivory Coast","name":"Côte d'Ivoire","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-2.8561250472024,4.99447581625951],[-3.31108435710007,4.98429555909801],[-4.00881954590494,5.17981334067431],[-4.64991736491791,5.16826365805708],[-5.83449622234453,4.99370066977514],[-6.52876909018585,4.70508779542502],[-7.51894120933043,4.33828847901731],[-7.71215938966975,4.36456594483772],[-7.63536821128403,5.18815908448946],[-7.53971513511176,5.31334524171652],[-7.57015255373169,5.7073521997259],[-7.99369259279588,6.12618968345154],[-8.31134762209402,6.19303314862108],[-8.60288021486862,6.46756419517166],[-8.38545162600057,6.91180064536874],[-8.48544552248535,7.39520783124307],[-8.4392984684487,7.68604279218174],[-8.28070349774494,7.68717967369216],[-8.2217923649322,8.12332876223557],[-8.29904863120856,8.3164435897103],[-8.20349890790088,8.45545319257545],[-7.83210038901919,8.57570425051863],[-8.07911373537435,9.37622386315203],[-8.30961646161225,9.78953196862244],[-8.22933712404682,10.1290202905639],[-8.02994361004862,10.2065349390017],[-7.89958980959237,10.2973821069708],[-7.62275916180481,10.1472362329468],[-6.85050655763506,10.1389938419962],[-6.66646094402755,10.4308106551484],[-6.49396501303727,10.4113028019583],[-6.20522294760643,10.5240607772191],[-6.05045203289227,10.0963607853554],[-5.81692623536529,10.2225546330122],[-5.40434159994697,10.3707368026091],[-4.9546532861431,10.1527139347697],[-4.77988359213197,9.82198476810174],[-4.33024695476038,9.61083486575714],[-3.98044918457668,9.8623440617217],[-3.51189897298627,9.90032623945622],[-2.82749630371271,9.64246084231978],[-2.56218950032624,8.21962779381148],[-2.98358496745033,7.37970490155551],[-3.24437008301126,6.2504715031135],[-2.81070146321784,5.38905121502411],[-2.8561250472024,4.99447581625951]]]}},{"type":"Feature","properties":{"admin":"Cameroon","name":"Cameroon","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[13.0758223812468,2.26709707275901],[12.9513338558556,2.32161570882694],[12.3593803239522,2.19281220133945],[11.7516654801998,2.32675751383999],[11.2764490088437,2.26105093018087],[9.64915815597263,2.28386607503774],[9.79519575362946,3.07340444580912],[9.404366896206,3.7345268823352],[8.94811567550107,3.90412893311714],[8.74492394372942,4.35221527751996],[8.48881554529089,4.49561737712992],[8.50028771325969,4.77198293702685],[8.75753299320863,5.47966583904791],[9.23316287602304,6.44449066815333],[9.5227059261544,6.45348236737212],[10.1182768083183,7.03876963950988],[10.4973751156114,7.05535777427556],[11.0587878760304,6.64442678469059],[11.7457743669185,6.98138296144975],[11.8393087093668,7.39704234458943],[12.0639461605396,7.7998084578723],[12.2188721045506,8.30582408287432],[12.7536715023392,8.71776276288899],[12.955467970439,9.4177717147147],[13.1675997249971,9.64062632897341],[13.3086763851539,10.1603620467489],[13.5729496598946,10.7985659855536],[14.4153788591167,11.5723688826921],[14.468192172919,11.9047516951934],[14.5771777686225,12.0853608260535],[14.1813362972668,12.4836569279431],[14.2135307145846,12.8020354272933],[14.4957873877628,12.8593962671373],[14.8933858578165,12.2190477563926],[14.9601518083376,11.5555740421972],[14.923564894275,10.8913251815175],[15.4678727556053,9.98233673750343],[14.9093538753947,9.99212942142273],[14.6272005550811,9.92091929772454],[14.171466098699,10.0213782820999],[13.954218377344,9.54949494062669],[14.5444665869818,8.96586131432227],[14.9799955583377,8.79610423424347],[15.1208655127653,8.38215017336942],[15.4360917497458,7.69281240481197],[15.2794604834691,7.42192454673797],[14.7765454444046,6.40849803306204],[14.5365600928411,6.22695872642069],[14.4594071794293,5.4517605656103],[14.5589359880235,5.03059764243153],[14.4783724300805,4.73260549562045],[14.9509534033897,4.21038930909492],[15.0362195166712,3.85136729574712],[15.4053959489644,3.33530060466434],[15.8627323747475,3.01353729899898],[15.9073808122476,2.55738943115861],[16.0128524105554,2.26763967529808],[15.9409188168051,1.7276726342803],[15.1463419938852,1.96401479736718],[14.3378125342466,2.22787466064949],[13.0758223812468,2.26709707275901]]]}},{"type":"Feature","properties":{"admin":"Democratic Republic of the Congo","name":"Dem. Rep. Congo","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[30.8338598975938,3.50916596111034],[30.77334679538,2.33988332764213],[31.1741492042358,2.20446523682126],[30.852670118948,1.84939647054381],[30.4685075212903,1.58380544677972],[30.0861535987627,1.06231273030629],[29.8757788429025,0.597379868976304],[29.8195032081366,-0.205310153813372],[29.5878377621722,-0.58740569417948],[29.5794661801409,-1.34131316488563],[29.2918868344366,-1.62005584066799],[29.2548348324833,-2.21510995850891],[29.1174788754515,-2.29221119548838],[29.0249263852168,-2.83925790773016],[29.276383904749,-3.29390715903406],[29.3399975929003,-4.49998341229409],[29.5199866065729,-5.41997893638631],[29.4199927100882,-5.93999887453943],[29.62003217949,-6.52001515058342],[30.1999967791017,-7.07998097089816],[30.7400154965518,-8.34000741947091],[30.3460860531908,-8.23825652428822],[29.0029122250605,-8.40703175215347],[28.7348665707625,-8.52655934004458],[28.4498710466728,-9.16491830814608],[28.6736816749289,-9.60592498132493],[28.4960697771418,-10.789883721564],[28.3722530453704,-11.7936467424014],[28.6424174333923,-11.9715686987823],[29.3415478858691,-12.3607439103724],[29.6160014177712,-12.1788945451373],[29.6996138852195,-13.2572266577718],[28.9342859229768,-13.2489584286051],[28.523561639121,-12.6986044246967],[28.15510867688,-12.2724805640179],[27.3887988624238,-12.1327474911007],[27.1644197934125,-11.6087484676611],[26.5530875993996,-11.9244397925321],[25.7523096046047,-11.7849651017764],[25.4181181169732,-11.33093596766],[24.7831697934029,-11.238693536019],[24.3145162289479,-11.2628264298993],[24.257155389104,-10.9519926896637],[23.9122152035557,-10.9268262671375],[23.4567908057674,-10.8678634578925],[22.8373454118847,-11.0176217586743],[22.4027982927424,-10.9930754533357],[22.1552681820643,-11.0848011206538],[22.2087532894864,-9.89479623783651],[21.8751819190423,-9.52370777754856],[21.8018013851879,-8.90870655684298],[21.949130893652,-8.30590097415828],[21.7464559262033,-7.92008473066715],[21.7281107927397,-7.2908724910813],[20.5147481625265,-7.29960580813863],[20.6018229509383,-6.93931772219968],[20.0916215349206,-6.94309010175699],[20.0377230160402,-7.11636117923164],[19.4175024756732,-7.1554285620443],[19.1666133968961,-7.73818368899975],[19.0167517432497,-7.98824594486013],[18.4641756527527,-7.84701425540644],[18.134221632569,-7.98767750410492],[17.4729700049622,-8.0685511206417],[17.0899959652472,-7.54568897871253],[16.8601908708452,-7.22229786542998],[16.5731799658961,-6.62264454511509],[16.326528354567,-5.87747039146627],[13.3755973649719,-5.86424122479955],[13.024869419007,-5.98438892987816],[12.7351713395787,-5.9656820613885],[12.3224316748635,-6.10009246177966],[12.1823368669202,-5.78993051516384],[12.4366882666609,-5.68430388755925],[12.4680041846297,-5.248361504745],[12.6316117692658,-4.99127125409294],[12.9955172054652,-4.78110320396188],[13.258240187237,-4.88295745200917],[13.6002348161447,-4.50013844159097],[14.1449560889333,-4.51000864015872],[14.2090348649752,-4.7930921362536],[14.5826037940132,-4.97023894615014],[15.1709916520884,-4.3435071753143],[15.7535400733147,-3.8551648901561],[16.0062895036543,-3.53513274497253],[15.9728031755292,-2.71239226645361],[16.4070919125101,-1.74092701579868],[16.8653068376421,-1.22581633871329],[17.5237162614729,-0.743830254726987],[17.63864464689,-0.424831638189246],[17.6635526872547,-0.058083998213817],[17.8265401547032,0.288923244626105],[17.7741919287916,0.855658677571085],[17.8988354834796,1.74183197672828],[18.0942757504074,2.36572154378806],[18.3937923519711,2.90044342692822],[18.4530652198099,3.50438589112335],[18.5429822119978,4.20178518311832],[18.9323124528848,4.70950613038597],[19.4677836442931,5.03152781821278],[20.2906791521089,4.69167776124529],[20.9275911801063,4.32278554932974],[21.65912275563,4.22434194581372],[22.4051237321955,4.02916006104732],[22.7041235694363,4.63305084881016],[22.8414795264681,4.71012624757348],[23.2972139828501,4.60969310141422],[24.4105310401463,5.10878408448913],[24.8050289242624,4.89724660890235],[25.1288334490033,4.92724477784779],[25.2787984555143,5.17040822999719],[25.6504553565575,5.25608775473712],[26.4027608578625,5.15087453859087],[27.0440653826047,5.12785268800484],[27.3742261085175,5.23394440350006],[27.9799772478428,4.40841339763737],[28.4289937680269,4.28715464926449],[28.6966776872988,4.45507721599694],[29.1590784034465,4.38926727947323],[29.715995314256,4.60080475506002],[29.9535001970695,4.17369904216768],[30.8338598975938,3.50916596111034]]]}},{"type":"Feature","properties":{"admin":"Republic of Congo","name":"Congo","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[12.9955172054652,-4.78110320396188],[12.6207597184845,-4.43802336997614],[12.3186076188739,-4.60623015708619],[11.9149630062421,-5.03798674888479],[11.0937728206919,-3.97882659263055],[11.8551216976481,-3.42687061932105],[11.4780387712143,-2.76561899171424],[11.8209635759032,-2.51416147218198],[12.4957027523382,-2.39168832765024],[12.5752844580676,-1.94851124431513],[13.1096187679656,-2.42874032960351],[13.9924072608077,-2.4708049454891],[14.2992102393246,-1.99827564861221],[14.4254557634136,-1.33340667074497],[14.3164184912777,-0.552627455247048],[13.8433207536457,0.038757635901149],[14.276265903387,1.19692983642662],[14.0266687354172,1.39567739502115],[13.2826314632788,1.31418366129688],[13.0031136410121,1.83089630778332],[13.0758223812468,2.26709707275901],[14.3378125342466,2.22787466064949],[15.1463419938852,1.96401479736718],[15.9409188168051,1.7276726342803],[16.0128524105554,2.26763967529808],[16.5370581397241,3.19825470622628],[17.1330424333463,3.72819651937945],[17.8099003435053,3.56019643799857],[18.4530652198099,3.50438589112335],[18.3937923519711,2.90044342692822],[18.0942757504074,2.36572154378806],[17.8988354834796,1.74183197672828],[17.7741919287916,0.855658677571085],[17.8265401547032,0.288923244626105],[17.6635526872547,-0.058083998213817],[17.63864464689,-0.424831638189246],[17.5237162614729,-0.743830254726987],[16.8653068376421,-1.22581633871329],[16.4070919125101,-1.74092701579868],[15.9728031755292,-2.71239226645361],[16.0062895036543,-3.53513274497253],[15.7535400733147,-3.8551648901561],[15.1709916520884,-4.3435071753143],[14.5826037940132,-4.97023894615014],[14.2090348649752,-4.7930921362536],[14.1449560889333,-4.51000864015872],[13.6002348161447,-4.50013844159097],[13.258240187237,-4.88295745200917],[12.9955172054652,-4.78110320396188]]]}},{"type":"Feature","properties":{"admin":"Colombia","name":"Colombia","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-75.3732232327138,-0.15203175212045],[-75.8014658271166,0.084801337073202],[-76.2923144192409,0.416047268064119],[-76.5763797675494,0.256935533037435],[-77.4249843004304,0.395686753741117],[-77.6686128404704,0.825893052570961],[-77.8550614081795,0.809925034992773],[-78.8552587551887,1.38092377360182],[-78.990935228171,1.69136994059525],[-78.6178313870237,1.76640412028306],[-78.6621180894978,2.26735545492048],[-78.4276104397573,2.62955556885422],[-77.9315425279715,2.69660573975293],[-77.510431281225,3.32501699463825],[-77.1276897854553,3.84963613526536],[-77.496271938777,4.08760610596943],[-77.3076012844794,4.66798411703945],[-77.5332205878657,5.5828119979025],[-77.3188150702867,5.84535411216136],[-77.4766607327223,6.6911164412663],[-77.8815714179452,7.22377126711478],[-77.7534138658614,7.70983978925214],[-77.431107957657,7.63806122479873],[-77.2425664944401,7.93527822512544],[-77.4747228665113,8.52428620038822],[-77.3533607652739,8.67050466555807],[-76.8366739570035,8.63874949791472],[-76.0863838365578,9.33682058352949],[-75.67460018584,9.4432481958346],[-75.6647041490562,9.77400320071874],[-75.4804259915033,10.6189903833393],[-74.906895107712,11.0830447453203],[-74.2767526923449,11.1020358341876],[-74.1972226630477,11.3104727238369],[-73.4147639635003,11.2270152856855],[-72.6278352525596,11.7319715438255],[-72.2381949530789,11.9555496281363],[-71.7540901353686,12.4373031681773],[-71.3998223537917,12.3760407576953],[-71.1374611070459,12.1129818791135],[-71.3315836249503,11.7762840845158],[-71.9739216783383,11.6086715763771],[-72.2275754462429,11.1087020939532],[-72.6146577623252,10.8219754093818],[-72.9052860175347,10.4503443465548],[-73.0276041327696,9.73677033125244],[-73.30495154488,9.1519998234376],[-72.7887298245004,9.08502716718733],[-72.6604947577681,8.62528778730268],[-72.4398622300979,8.40527537682003],[-72.360900641556,8.00263845461789],[-72.4796789211788,7.63250600832735],[-72.4444872707881,7.42378489830048],[-72.1983524237819,7.34043081301368],[-71.9601757473486,6.99161489504354],[-70.6742335679815,7.08778473553872],[-70.0933129543724,6.96037649172311],[-69.3894799465571,6.09986054119884],[-68.9853185696023,6.20680491782686],[-68.2650524563182,6.15326813397247],[-67.695087246355,6.26731802004065],[-67.3414395819656,6.09546804445402],[-67.5215319485027,5.55687042889197],[-67.7446966213552,5.22112864829167],[-67.8230122544935,4.5039372827289],[-67.6218359035813,3.83948171631999],[-67.3375638495437,3.54234223064172],[-67.3031731838534,3.31845408773718],[-67.8099381171237,2.82065501546957],[-67.4470920477863,2.60028086996087],[-67.181294318293,2.25063812907406],[-66.8763258531226,1.25336050048934],[-67.0650481838525,1.13011220947323],[-67.2599975246736,1.71999868408496],[-67.5378100246747,2.03716278727633],[-67.8685650295588,1.69245514567339],[-69.8169732326916,1.71480520263962],[-69.8045967271577,1.08908112223347],[-69.2186376614002,0.985676581217433],[-69.252434048119,0.602650865070075],[-69.4523960028725,0.706158758950693],[-70.0155657619893,0.541414292804205],[-70.02065589057,-0.185156345219539],[-69.5770653957766,-0.549991957200163],[-69.4204858059322,-1.12261850342641],[-69.4441019354896,-1.55628712321982],[-69.8936352199966,-4.29818694419433],[-70.394043952095,-3.76659148520783],[-70.6926820543097,-3.74287200278586],[-70.0477085028748,-2.7251563452297],[-70.813475714792,-2.25686451580074],[-71.4136457994298,-2.34280242270213],[-71.7747607082854,-2.16978972738894],[-72.3257865058136,-2.43421803142645],[-73.0703922187072,-2.30895435955095],[-73.6595035468346,-1.26049122478113],[-74.1223951890891,-1.00283253337385],[-74.441600511356,-0.530820000819887],[-75.1066245185201,-0.05720549886486],[-75.3732232327138,-0.15203175212045]]]}},{"type":"Feature","properties":{"admin":"Costa Rica","name":"Costa Rica","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-82.9657830471974,8.22502798098598],[-83.5084372626943,8.44692658124728],[-83.7114739651691,8.65683624921686],[-83.5963130358066,8.83044322350142],[-83.6326415677078,9.05138580976532],[-83.9098856269537,9.29080272057358],[-84.3034016588563,9.48735403079571],[-84.6476442125687,9.61553742109571],[-84.7133507962277,9.90805186608385],[-84.9756603665413,10.086723130733],[-84.9113748847702,9.79599152265892],[-85.1109234280653,9.55703969974131],[-85.3394882880923,9.83454214114866],[-85.660786505867,9.93334747969072],[-85.7974448310628,10.134885565629],[-85.7917087470784,10.4393372664766],[-85.6593137275467,10.7543309595117],[-85.9417254300218,10.8952784285878],[-85.7125404528073,11.0884449324948],[-85.5618519762442,11.2171192489016],[-84.9030033027389,10.9523033716219],[-84.6730690172562,11.0826571720781],[-84.355930752281,10.9992255721429],[-84.1901785957048,10.7934500187567],[-83.8950544908859,10.7268390975324],[-83.6556117418616,10.9387641463614],[-83.4023197089829,10.3954381372447],[-83.0156766425752,9.99298208255555],[-82.5461962552035,9.56613475182467],[-82.9328909980436,9.47681203860817],[-82.9271549140591,9.07433014570291],[-82.7191831123005,8.92570872643149],[-82.8686571927048,8.80726634361852],[-82.8297706774052,8.62629547773237],[-82.9131764391242,8.42351715741907],[-82.9657830471974,8.22502798098598]]]}},{"type":"Feature","properties":{"admin":"Cuba","name":"Cuba","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-82.268151211257,23.1886107447177],[-81.4044571601468,23.1172714299388],[-80.6187686835812,23.105980129483],[-79.6795236884602,22.7653032495988],[-79.2814859687321,22.3992015650271],[-78.3474344550565,22.5121662460171],[-77.9932958645603,22.2771935083859],[-77.146422492161,21.6578514673678],[-76.5238248359085,21.2068195663244],[-76.1946201239932,21.220565497314],[-75.5982224189127,21.0166244572741],[-75.671060350228,20.735091254148],[-74.9338960435845,20.6939051376114],[-74.1780248684513,20.2846277938597],[-74.2966481187772,20.0503785262807],[-74.9615946112929,19.9234353703557],[-75.6346801418946,19.8737743189232],[-76.323656175426,19.9528909367621],[-77.755480923153,19.8554808618919],[-77.0851084052467,20.4133537866988],[-77.4926545885166,20.6731053736139],[-78.1372922431416,20.7399488387834],[-78.4828267076612,21.0286133895658],[-78.719866502584,21.5981135116384],[-79.2849999661279,21.5591753199065],[-80.2174753486186,21.827324327069],[-80.5175345527214,22.0370789657418],[-81.8209433662032,22.1920565861851],[-82.1699918281186,22.3871092798707],[-81.7950017971926,22.636964830002],[-82.7758979967408,22.6881503361871],[-83.4944587877593,22.1685179712761],[-83.9088004218756,22.1545653345573],[-84.0521508450533,21.9105750594913],[-84.5470301988964,21.8012277287616],[-84.9749110582731,21.8960281438011],[-84.4470621406278,22.2049498560419],[-84.2303570218118,22.5657547063038],[-83.7782399156902,22.7881183944557],[-83.2675475735657,22.9830418970606],[-82.5104361640575,23.0787466496652],[-82.268151211257,23.1886107447177]]]}},{"type":"Feature","properties":{"admin":"Northern Cyprus","name":"N. Cyprus","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[32.7317802263774,35.1400259465884],[32.8024735857527,35.1455036484114],[32.9469608904408,35.3867033961337],[33.6672270037249,35.3732158473055],[34.5764738299005,35.6715955673588],[33.9008044776842,35.2457559270576],[33.9736165707835,35.058506374648],[33.8664396502101,35.0935946721742],[33.6753918800271,35.0178628606504],[33.5256852556775,35.0386884628641],[33.4758174985158,35.0003445501035],[33.4559220720835,35.1014236516664],[33.3838334490363,35.1627119003646],[33.190977003723,35.1731247014714],[32.9195723813261,35.0878327499736],[32.7317802263774,35.1400259465884]]]}},{"type":"Feature","properties":{"admin":"Cyprus","name":"Cyprus","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[33.9736165707835,35.058506374648],[34.00488081232,34.9780978460019],[32.9798271013784,34.5718694117554],[32.4902962582775,34.7016547714565],[32.256667107886,35.1032323267966],[32.7317802263774,35.1400259465884],[32.9195723813261,35.0878327499736],[33.190977003723,35.1731247014714],[33.3838334490363,35.1627119003646],[33.4559220720835,35.1014236516664],[33.4758174985158,35.0003445501035],[33.5256852556775,35.0386884628641],[33.6753918800271,35.0178628606504],[33.8664396502101,35.0935946721742],[33.9736165707835,35.058506374648]]]}},{"type":"Feature","properties":{"admin":"Czech Republic","name":"Czech Rep.","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[16.9602881201946,48.5969823268506],[16.4992826677188,48.7858080104451],[16.0296472510502,48.7338990342079],[15.253415561594,49.0390742051076],[14.9014473812541,48.9644017604458],[14.3388977393247,48.5553052842072],[13.5959456722644,48.8771719427371],[13.0313289730434,49.3070681829732],[12.5210242041612,49.5474152695627],[12.4151908708274,49.9691207952806],[12.2401111182226,50.2663377956073],[12.9668367855432,50.4840764430691],[13.3381319515603,50.7332343613643],[14.0562276546882,50.9269176295943],[14.3070133806006,51.1172677679414],[14.5707182145861,51.0023393825243],[15.0169958838587,51.1066740993216],[15.4909721208397,50.7847299261432],[16.2386267432386,50.6977326523798],[16.1762532894623,50.4226073268579],[16.7194759457144,50.2157465683935],[16.8687691586057,50.473973700556],[17.5545670915511,50.3621459010764],[17.649445021239,50.0490383978199],[18.3929138526222,49.9886286484707],[18.8531441586136,49.4962297633776],[18.5549711442895,49.4950153672188],[18.3999935238462,49.31500051533],[18.170498488038,49.2715147975564],[18.1049727718919,49.0439834661753],[17.9135115902505,48.9964928248991],[17.8864848161618,48.9034752467737],[17.5450069515771,48.8000190293254],[17.1019848975389,48.8169688991171],[16.9602881201946,48.5969823268506]]]}},{"type":"Feature","properties":{"admin":"Germany","name":"Germany","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[9.92190636560923,54.983104153048],[9.9395797054529,54.5966419541532],[10.9501123389205,54.3636070827332],[10.9394669938684,54.0086933457526],[11.9562524756433,54.1964855007011],[12.5184403825467,54.470370591848],[13.6474670752595,54.0755109727059],[14.1196863135426,53.757029120491],[14.3533154639342,53.2481712917131],[14.0745211117194,52.9812625189253],[14.4375997250022,52.6248501654083],[14.6850264828157,52.0899474147552],[14.6070984229196,51.74518809672],[15.0169958838588,51.1066740993217],[14.5707182145861,51.0023393825244],[14.3070133806007,51.1172677679414],[14.0562276546883,50.9269176295944],[13.3381319515604,50.7332343613643],[12.9668367855432,50.4840764430692],[12.2401111182227,50.2663377956072],[12.4151908708275,49.9691207952806],[12.5210242041613,49.5474152695627],[13.0313289730435,49.3070681829732],[13.5959456722646,48.8771719427372],[13.2433573747371,48.416114813829],[12.8841028174439,48.2891458196878],[13.0258512712205,47.6375835231359],[12.9326269873661,47.467645575544],[12.6207597184845,47.6723876002844],[12.1413574561129,47.7030834010658],[11.4264140153548,47.523766181013],[10.5445040218616,47.5663992376538],[10.4020837744653,47.3024876979392],[9.89606814946319,47.5801968450757],[9.59422610844638,47.5250580918202],[8.52261193200979,47.8308275416913],[8.31730146651409,47.6135798203363],[7.46675906742229,47.6205819769119],[7.59367638513106,48.3330191107037],[8.09927859867486,49.0177835150034],[6.65822960778371,49.2019583196916],[6.18632042809418,49.4638028021145],[6.24275109215699,49.9022256536787],[6.04307335778111,50.1280516627942],[6.15665815595878,50.8037210150106],[5.98865807457781,51.851615709025],[6.58939659997083,51.8520291204834],[6.84286950036238,52.2284402532975],[7.0920532568739,53.1440432806449],[6.90513960127413,53.4821621771306],[7.10042483890527,53.6939321966627],[7.93623945479396,53.7482958034338],[8.12170617028948,53.5277924668443],[8.80073449060467,54.0207856309089],[8.57211795414537,54.395646470754],[8.52622928227021,54.9627436387251],[9.28204878097114,54.8308653835163],[9.92190636560923,54.983104153048]]]}},{"type":"Feature","properties":{"admin":"Djibouti","name":"Djibouti","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[43.0812260272002,12.6996385767071],[43.3178524106647,12.390148423711],[43.2863814633989,11.9749282902459],[42.7158736508965,11.7356405705183],[43.1453048032421,11.4620396997489],[42.776851841001,10.9268785669344],[42.5549300000001,11.1051100000002],[42.3141400000001,11.0342],[41.7555700000002,11.05091],[41.7395900000002,11.3551100000001],[41.6617600000001,11.6312],[42.0000000000001,12.1000000000001],[42.3515600000001,12.5422300000001],[42.7796423683447,12.4554157576957],[43.0812260272002,12.6996385767071]]]}},{"type":"Feature","properties":{"admin":"Denmark","name":"Denmark","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[12.6900061377556,55.6099909531808],[12.0899910824147,54.8000145534379],[11.0435433285042,55.3648637966042],[10.9039136084516,55.7799547389887],[12.3709041683533,56.1114073757088],[12.6900061377556,55.6099909531808]]],[[[10.9121818376184,56.4586213242779],[10.66780398931,56.0813833685472],[10.369992710012,56.1900072292247],[9.64998497888931,55.469999498102],[9.92190636560917,54.983104153048],[9.28204878097114,54.8308653835162],[8.52622928227024,54.962743638725],[8.12031090661759,55.5177226833236],[8.08997684086225,56.5400117051376],[8.25658165857126,56.8099693874303],[8.54343753422339,57.1100027533169],[9.42446902836761,57.1720661484995],[9.77555870935856,57.4479407822897],[10.5800057308462,57.7300165879548],[10.5461059912627,57.2157327337861],[10.2500000342302,56.8900161810505],[10.369992710012,56.6099815944608],[10.9121818376184,56.4586213242779]]]]}},{"type":"Feature","properties":{"admin":"Dominican Republic","name":"Dominican Rep.","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-71.712361416293,19.7144558781674],[-71.5873044501466,19.8849105900821],[-70.8067061021617,19.880285549392],[-70.2143649970161,19.6228852401462],[-69.9508151923276,19.64799998624],[-69.7692500474701,19.2932671167724],[-69.2221258205799,19.3132142196371],[-69.2543460761138,19.0151962346099],[-68.8094119940808,18.9790744084378],[-68.317943284769,18.6121975773817],[-68.6893159654345,18.2051423202186],[-69.1649458482489,18.4226484237351],[-69.6239875962976,18.3807129989302],[-69.9529339260515,18.4283069930711],[-70.1332329983179,18.2459150252969],[-70.5171372138142,18.1842908797888],[-70.6692984686976,18.426885891183],[-70.9999501207172,18.2833287622762],[-71.4002099270339,17.5985643579766],[-71.657661912712,17.7575727401387],[-71.708304816358,18.0449970565461],[-71.6877375963059,18.3166600611045],[-71.9451120673355,18.6169001327203],[-71.7013026597825,18.7854169784241],[-71.6248732164228,19.1698379582433],[-71.712361416293,19.7144558781674]]]}},{"type":"Feature","properties":{"admin":"Algeria","name":"Algeria","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[11.9995056494716,23.4716684025964],[8.57289310062978,21.5656607121591],[5.67756595218068,19.6012069767997],[4.26741946780004,19.155265204337],[3.1581331722227,19.05736420336],[3.1466610042539,19.6935785995214],[2.68358849448643,19.8562301701601],[2.06099083823392,20.1422333846795],[1.82322757325903,20.610809434486],[-1.55005489745761,22.7926659204974],[-4.92333736817423,24.974574082941],[-8.68439978680905,27.395744126896],[-8.66512447756419,27.5894790715582],[-8.66558956545481,27.6564258895924],[-8.67411617678297,28.8412889673966],[-7.05922766766193,29.5792284205245],[-6.06063229005377,29.7316997340017],[-5.24212927898279,30.0004430201356],[-4.85964616537447,30.5011876490438],[-3.6904410465547,30.8969516057512],[-3.64749793132015,31.6372940129807],[-3.06898027181265,31.7244979924732],[-2.61660478352957,32.0943462183861],[-1.30789913573787,32.2628889023061],[-1.12455115396631,32.6515215113571],[-1.38804928222257,32.8640150009413],[-1.73345455566147,33.919712836232],[-1.79298580566169,34.5279186060912],[-2.16991370279862,35.1683963079167],[-1.20860287108906,35.7148487411871],[-0.127454392894606,35.8886624212008],[0.503876580415209,36.3012728948353],[1.46691857260655,36.6056470810344],[3.16169884605082,36.7839049342252],[4.81575809084913,36.8650369329235],[5.32012007001779,36.7165188665166],[6.26181969567261,37.1106550156067],[7.33038496260397,37.1183806422344],[7.737078484741,36.8857075058402],[8.42096438969167,36.9464273137832],[8.21782433435231,36.4331769882603],[8.37636762862377,35.4798760035559],[8.1409814795343,34.6551459823938],[7.52448164229224,34.0973764104515],[7.61264163578218,33.344114895149],[8.43047285323337,32.7483373072559],[8.43910281742612,32.5062848984008],[9.05560265466815,32.1026919622013],[9.48213992680527,30.3075560572462],[9.80563439295241,29.4246383733234],[9.85999799972344,28.959989732371],[9.68388471847277,28.1441738957792],[9.75612837081678,27.6882585718841],[9.62905602381107,27.1409534774809],[9.71628584151975,26.5122063257857],[9.31941084151816,26.0943248560574],[9.91069257980177,25.3654546167967],[9.94826134607797,24.9369536402325],[10.3038468766784,24.3793132593709],[10.7713635596229,24.5625320500617],[11.560669386449,24.0979092473255],[11.9995056494716,23.4716684025964]]]}},{"type":"Feature","properties":{"admin":"Ecuador","name":"Ecuador","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-80.3025605943872,-3.40485645916471],[-79.7702933417809,-2.65751189535964],[-79.9865592109224,-2.22079436606101],[-80.3687839423692,-2.68515878663579],[-80.9677654690643,-2.2469426408007],[-80.764806281238,-1.96504770264853],[-80.9336590237517,-1.05745452230636],[-80.5833703274612,-0.906662692878683],[-80.3993247138537,-0.283703301600141],[-80.0208982001804,0.360340074053468],[-80.0906097073421,0.768428859862396],[-79.5427620103998,0.982937730305963],[-78.8552587551887,1.38092377360182],[-77.8550614081795,0.809925034992773],[-77.6686128404704,0.825893052570961],[-77.4249843004304,0.395686753741117],[-76.5763797675494,0.256935533037435],[-76.2923144192409,0.416047268064119],[-75.8014658271166,0.084801337073202],[-75.3732232327138,-0.15203175212045],[-75.2337227037419,-0.911416924649529],[-75.544995693652,-1.56160979574588],[-76.6353942532267,-2.60867766684382],[-77.8379048326586,-3.0030205216631],[-78.4506839667756,-3.87309661216138],[-78.6398972236123,-4.54778411216407],[-79.2052890693177,-4.95912851320739],[-79.6249792141762,-4.45419809328349],[-80.0289080471856,-4.34609099692889],[-80.4422419908721,-4.42572437909067],[-80.4692946031769,-4.059286797709],[-80.1840148587097,-3.82116179770804],[-80.3025605943872,-3.40485645916471]]]}},{"type":"Feature","properties":{"admin":"Egypt","name":"Egypt","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[34.9226,29.50133],[34.64174,29.09942],[34.42655,28.34399],[34.15451,27.8233],[33.92136,27.6487],[33.58811,27.97136],[33.13676,28.41765],[32.42323,29.85108],[32.32046,29.76043],[32.73482,28.70523],[33.34876,27.69989],[34.10455,26.14227],[34.47387,25.59856],[34.79507,25.03375],[35.69241,23.92671],[35.49372,23.75237],[35.52598,23.10244],[36.69069,22.20485],[36.86623,22],[32.9,22],[29.02,22],[25,22],[25,25.682499996361],[25,29.2386545295335],[24.70007,30.04419],[24.95762,30.6616],[24.80287,31.08929],[25.16482,31.56915],[26.49533,31.58568],[27.45762,31.32126],[28.45048,31.02577],[28.91353,30.87005],[29.68342,31.18686],[30.09503,31.4734],[30.97693,31.55586],[31.68796,31.4296],[31.96041,30.9336],[32.19247,31.26034],[32.99392,31.02407],[33.7734,30.96746],[34.26544,31.21936],[34.9226,29.50133]]]}},{"type":"Feature","properties":{"admin":"Eritrea","name":"Eritrea","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[42.3515600000001,12.5422300000001],[42.00975,12.86582],[41.59856,13.4520900000001],[41.1551937192498,13.7733198104352],[40.8966,14.1186400000001],[40.0262187029692,14.5195791691623],[39.34061,14.53155],[39.0994,14.74064],[38.51295,14.50547],[37.90607,14.9594300000002],[37.59377,14.2131],[36.42951,14.42211],[36.3231889177981,14.8224805770411],[36.7538603045186,16.2918740910443],[36.8525300000001,16.95655],[37.16747,17.2631400000001],[37.9040000000001,17.42754],[38.4100899594732,17.9983073999703],[38.99062299984,16.8406261255517],[39.266110060388,15.9227234969672],[39.8142936541402,15.4356472844003],[41.1792749366976,14.4910796167532],[41.7349516131323,13.9210368921416],[42.2768306821449,13.3439920109544],[42.5895764503753,13.0004212508619],[43.0812260272002,12.6996385767071],[42.7796423683447,12.4554157576957],[42.3515600000001,12.5422300000001]]]}},{"type":"Feature","properties":{"admin":"Spain","name":"Spain","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-9.03481767418024,41.8805705836597],[-8.98443315269567,42.5927751735063],[-9.39288367353064,43.0266246608127],[-7.97818966310831,43.748337714201],[-6.75449174643675,43.5679094508539],[-5.4118863590616,43.5742398138097],[-4.34784277995578,43.403449205085],[-3.51753170410609,43.4559007838613],[-1.90135128417776,43.4228020289783],[-1.50277096191053,43.0340143906304],[0.338046909190581,42.5795460068395],[0.701590610363894,42.7957343613326],[1.82679324708715,42.3433847112657],[2.98599897625846,42.4730150416699],[3.03948408368055,41.8921202662769],[2.09184166831218,41.2260885686831],[0.810524529635188,41.0147319606093],[0.721331007499401,40.6783183863892],[0.106691521819869,40.123933620762],[-0.278711310212941,39.3099781357327],[0.111290724293838,38.738514309233],[-0.467123582349103,38.2923658310411],[-0.683389451490598,37.6423538274578],[-1.43838212727485,37.4430636663242],[-2.14645260253812,36.6741441920373],[-3.41578080892339,36.6588996445112],[-4.36890092611472,36.6778390569461],[-4.99521928549221,36.3247081568796],[-5.37715979656146,35.9468500839615],[-5.8664322575009,36.0298165960061],[-6.23669389487217,36.3676771103303],[-6.5201908024254,36.9429133163873],[-7.45372555177809,37.0977875839661],[-7.53710547528102,37.4289043238762],[-7.16650794109986,37.8038943548022],[-7.02928117514879,38.0757640650898],[-7.37409216961632,38.3730585800649],[-7.09803666831313,39.0300727402238],[-7.49863237143972,39.6295710312418],[-7.06659155926353,39.7118915878828],[-7.02641313315659,40.1845242376242],[-6.86401994467938,40.3308718938748],[-6.85112667482255,41.1110826686175],[-6.38908769370091,41.3818154973946],[-6.66860551596766,41.8833869492196],[-7.25130896649082,41.918346055665],[-7.42251298667379,41.7920746933598],[-8.01317460776991,41.7908861354171],[-8.26385698081779,42.2804686549503],[-8.67194576662672,42.134689439455],[-9.03481767418024,41.8805705836597]]]}},{"type":"Feature","properties":{"admin":"Estonia","name":"Estonia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[24.3128625831146,57.793423570377],[24.4289278500422,58.3834133978533],[24.0611983578532,58.2573745794934],[23.4265600928767,58.6127534043646],[23.3397953630586,59.1872403021534],[24.6042143083762,59.465853786855],[25.8641890805166,59.6110903998113],[26.9491357764845,59.4458033311258],[27.9811141293532,59.4753880886129],[28.1316992530517,59.3008251003309],[27.4201664568249,58.7245812038442],[27.7166858253157,57.7918991156244],[27.2881848487515,57.4745283067038],[26.4635323422378,57.4763886582663],[25.6028096859844,57.8475287949866],[25.1645935401493,57.9701569688152],[24.3128625831146,57.793423570377]]]}},{"type":"Feature","properties":{"admin":"Ethiopia","name":"Ethiopia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[37.90607,14.9594300000002],[38.51295,14.50547],[39.0994,14.74064],[39.34061,14.53155],[40.0262500000001,14.51959],[40.8966,14.1186400000001],[41.1552,13.77333],[41.59856,13.4520900000001],[42.00975,12.86582],[42.3515600000001,12.5422300000001],[42.0000000000001,12.1000000000001],[41.6617600000001,11.6312],[41.7395900000002,11.3551100000001],[41.7555700000002,11.05091],[42.3141400000001,11.0342],[42.5549300000001,11.1051100000002],[42.776851841001,10.9268785669344],[42.55876,10.5725800000001],[42.92812,10.0219400000001],[43.29699,9.54048000000017],[43.67875,9.18358000000012],[46.94834,7.99688],[47.78942,8.003],[44.9636,5.00162000000012],[43.66087,4.95755],[42.7696700000001,4.25259000000022],[42.12861,4.23413000000016],[41.8550830926441,3.91891192048376],[41.1718000000001,3.91909],[40.7684800000001,4.25702000000012],[39.8549400000001,3.83879000000013],[39.5593842587659,3.42206000000022],[38.89251,3.50074],[38.67114,3.61607],[38.4369700000001,3.58851],[38.1209150000001,3.598605],[36.8550932380082,4.44786412767286],[36.1590786328556,4.44786412767286],[35.8174476623536,4.77696566346202],[35.8174476623536,5.33823208279085],[35.2980071182331,5.506],[34.70702,6.59422000000012],[34.25032,6.82607],[34.0751000000002,7.22595],[33.56829,7.71334],[32.9541800000002,7.7849700000001],[33.2948000000001,8.35458],[33.8255000000001,8.37916],[33.97498,8.68456000000015],[33.96162,9.58358],[34.25745,10.63009],[34.7311500000001,10.9101700000001],[34.8316300000001,11.3189600000001],[35.26049,12.08286],[35.8636300000002,12.57828],[36.27022,13.5633300000001],[36.42951,14.42211],[37.59377,14.2131],[37.90607,14.9594300000002]]]}},{"type":"Feature","properties":{"admin":"Finland","name":"Finland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[28.5919295590432,69.0647769232866],[28.4459436378187,68.364612942164],[29.9774263852206,67.6982970241926],[29.0545886573523,66.9442862006219],[30.21765,65.80598],[29.544429559047,64.9486715765905],[30.4446846860037,64.2044534369391],[30.0358724301427,63.5528136257385],[31.5160921567111,62.8676874864129],[31.1399910824909,62.3576927761244],[30.2111072120444,61.7800277777497],[28.0699975928953,60.5035165472758],[26.255172967237,60.4239606797625],[24.4966239763445,60.0573163926516],[22.8696948584995,59.8463731960362],[22.2907637875336,60.3919212917415],[21.3222440935193,60.7201699896595],[21.5448661638327,61.7053294948718],[21.0592110531537,62.6073932969587],[21.5360294939108,63.1897350124559],[22.442744174904,63.8178103705313],[24.7305115088975,64.9023436550408],[25.3980676612439,65.1114265000937],[25.2940430030404,65.5343464219704],[23.9033785336338,66.0069273952796],[23.5658797543356,66.3960509304374],[23.5394730974344,67.9360086127352],[21.9785347836261,68.6168456081807],[20.6455928890895,69.1062472602009],[21.2449361508107,69.3704430202931],[22.3562378272474,68.8417414415149],[23.6620495948308,68.8912474636505],[24.7356791521267,68.6495567898215],[25.6892126807764,69.092113755969],[26.1796220232262,69.8252989773261],[27.7322921078679,70.1641930202962],[29.015572950972,69.766491197378],[28.5919295590432,69.0647769232866]]]}},{"type":"Feature","properties":{"admin":"Fiji","name":"Fiji","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[178.3736,-17.33992],[178.71806,-17.62846],[178.55271,-18.15059],[177.93266,-18.28799],[177.38146,-18.16432],[177.28504,-17.72465],[177.67087,-17.38114],[178.12557,-17.50481],[178.3736,-17.33992]]],[[[179.364142661964,-16.8013540769468],[178.725059362997,-17.012041674368],[178.596838595117,-16.63915],[179.096609362997,-16.4339842775474],[179.413509362997,-16.3790542775474],[180,-16.0671326636424],[180,-16.5552165666392],[179.364142661964,-16.8013540769468]]],[[[-179.917369384765,-16.5017831356494],[-180,-16.5552165666392],[-180,-16.0671326636424],[-179.793320109049,-16.0208822567412],[-179.917369384765,-16.5017831356494]]]]}},{"type":"Feature","properties":{"admin":"Falkland Islands","name":"Falkland Is.","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-61.2,-51.85],[-60,-51.25],[-59.15,-51.5],[-58.55,-51.1],[-57.75,-51.55],[-58.05,-51.9],[-59.4,-52.2],[-59.85,-51.85],[-60.7,-52.3],[-61.2,-51.85]]]}},{"type":"Feature","properties":{"admin":"France","name":"France","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-52.5564247300184,2.50470530843705],[-52.939657151895,2.12485769287562],[-53.4184651352953,2.05338918701604],[-53.5548392401135,2.33489655192596],[-53.7785206772889,2.37670278565005],[-54.0880625067173,2.10555654541463],[-54.5247541977997,2.31184886312379],[-54.2712296209758,2.73874787028694],[-54.1842840236447,3.19417226807523],[-54.0115038722768,3.62256989177486],[-54.3995422023565,4.21261139568348],[-54.4786329819792,4.89675568279564],[-53.9580446030709,5.75654816326781],[-53.6184529282648,5.6465290389184],[-52.8821412827541,5.4098509790216],[-51.8233428615259,4.56576813396614],[-51.6577974106789,4.15623240805303],[-52.249337531124,3.24109446859629],[-52.5564247300184,2.50470530843705]]],[[[9.56001631026913,42.1524919703796],[9.22975223149177,41.3800068222644],[8.77572309737536,41.5836119654944],[8.54421268070783,42.2565166285831],[8.74600914880759,42.6281218531939],[9.3900008480289,43.0099848496147],[9.56001631026913,42.1524919703796]]],[[[3.58818444175571,50.3789924180036],[4.28602298342514,49.9074966497725],[4.79922163251575,49.9853730332363],[5.67405195478489,49.5294835475574],[5.89775923017638,49.4426671413072],[6.1863204280942,49.4638028021144],[6.65822960778354,49.2019583196916],[8.09927859867477,49.0177835150034],[7.59367638513106,48.3330191107037],[7.46675906742223,47.6205819769119],[7.19220218265553,47.449765529971],[6.73657107913809,47.5418012558829],[6.76871382002363,47.2877082383037],[6.03738895022897,46.7257787135619],[6.02260949059357,46.2729898138205],[6.50009972497045,46.4296727565294],[6.84359297041456,45.9911465521007],[6.80235517744566,45.7085798203287],[7.09665245934784,45.3330988632959],[6.74995527510171,45.0285179713676],[7.00756229007666,44.2547667506614],[7.54959638838616,44.1279011093848],[7.43518476729184,43.6938449163492],[6.52924523278307,43.1288923203184],[4.5569625179314,43.3996509873116],[3.10041059735272,43.0752005071671],[2.98599897625849,42.4730150416699],[1.82679324708718,42.3433847112657],[0.701590610363922,42.7957343613326],[0.338046909190581,42.5795460068396],[-1.50277096191047,43.0340143906305],[-1.90135128417774,43.4228020289783],[-1.38422522623296,44.0226103785902],[-1.19379757323736,46.0149177109549],[-2.22572424967379,47.0643626979382],[-2.96327612955957,47.570326646508],[-4.49155493815948,47.9549543320564],[-4.59234981934475,48.6841604681269],[-3.29581397135775,48.9016924098596],[-1.61651078938493,48.6444212916946],[-1.93349402506325,49.7763418646158],[-0.98946895995536,49.3473758001609],[1.33876102052275,50.1271731634453],[1.6390010921385,50.9466063502975],[2.51357303224617,51.1485061712619],[2.65842207196033,50.7968480495156],[3.12325158042572,50.7803632676145],[3.58818444175571,50.3789924180036]]]]}},{"type":"Feature","properties":{"admin":"Gabon","name":"Gabon","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[11.0937728206919,-3.97882659263055],[10.0661352881357,-2.96948251710568],[9.40524539555497,-2.14431324626904],[8.79799563969317,-1.1113013647545],[8.83008670414642,-0.779073581550037],[9.04841963057959,-0.459351494960217],[9.29135053878369,0.268666083167687],[9.49288862472198,1.01011953369149],[9.83028405115564,1.0678937849938],[11.2850789730365,1.05766185140001],[11.2764490088437,2.26105093018087],[11.7516654801998,2.32675751383999],[12.3593803239522,2.19281220133945],[12.9513338558556,2.32161570882694],[13.0758223812468,2.26709707275901],[13.0031136410121,1.83089630778332],[13.2826314632788,1.31418366129688],[14.0266687354172,1.39567739502115],[14.276265903387,1.19692983642662],[13.8433207536457,0.038757635901149],[14.3164184912777,-0.552627455247048],[14.4254557634136,-1.33340667074497],[14.2992102393246,-1.99827564861221],[13.9924072608077,-2.4708049454891],[13.1096187679656,-2.42874032960351],[12.5752844580676,-1.94851124431513],[12.4957027523382,-2.39168832765024],[11.8209635759032,-2.51416147218198],[11.4780387712143,-2.76561899171424],[11.8551216976481,-3.42687061932105],[11.0937728206919,-3.97882659263055]]]}},{"type":"Feature","properties":{"admin":"United Kingdom","name":"United Kingdom","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-5.6619486149219,54.5546031764838],[-6.19788489422098,53.8675650091633],[-6.95373023113799,54.0737022975756],[-7.57216793459108,54.059956366586],[-7.36603064617879,54.5958409694527],[-7.57216793459108,55.1316222194549],[-6.73384701173614,55.1728600124238],[-5.6619486149219,54.5546031764838]]],[[[-3.00500484863528,58.6350001084663],[-4.07382849772802,57.5530248073553],[-3.05500179687766,57.6900190293609],[-1.95928056477692,57.6847997096995],[-2.2199881656893,56.8700174017535],[-3.11900305827112,55.9737930365155],[-2.08500932454302,55.9099984808513],[-2.00567567967386,55.8049028503502],[-1.11499101399221,54.6249864772654],[-0.4304849918542,54.4643761257021],[0.184981316742039,53.325014146531],[0.469976840831777,52.929999498092],[1.68153079591474,52.739520168664],[1.55998782716438,52.099998480836],[1.05056155763091,51.8067605657957],[1.4498653499503,51.289427802122],[0.550333693045502,50.7657388372759],[-0.787517462558639,50.7749889186562],[-2.48999752441438,50.5000186224312],[-2.95627397298404,50.696879991247],[-3.61744808594233,50.2283556178727],[-4.54250790039924,50.3418370631857],[-5.24502315919113,49.9599999049811],[-5.7765669417453,50.1596776393568],[-4.30998979330184,51.2100011256891],[-3.41485063314212,51.4260086126692],[-3.42271946710832,51.4268481674061],[-4.98436723471087,51.593466091511],[-5.26729570150889,51.9914004583746],[-4.22234656413485,52.3013556992614],[-4.77001339356411,52.8400049912556],[-4.57999915202691,53.4950037705552],[-3.09383067378866,53.4045474006697],[-3.09207963704711,53.4044408229635],[-2.94500851074434,53.9849997015467],[-3.61470082543303,54.6009367732926],[-3.63000545898933,54.615012925833],[-4.844169073903,54.7909711777868],[-5.08252661784922,55.0616006536994],[-4.71911210775664,55.5084726019435],[-5.04798092286211,55.7839855007075],[-5.58639767091114,55.3111461452368],[-5.64499874513018,56.2750149603448],[-6.14998084148635,56.7850096706335],[-5.78682471355529,57.8188483750646],[-5.00999874512757,58.63001333275],[-4.21149451335356,58.5508450384792],[-3.00500484863528,58.6350001084663]]]]}},{"type":"Feature","properties":{"admin":"Georgia","name":"Georgia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[41.5540841001107,41.5356562363276],[41.7031706072727,41.9629428167329],[41.4534700864384,42.6451233994179],[40.8754691912538,43.0136280380913],[40.3213944842203,43.1286339381568],[39.9550085792709,43.4349976669992],[40.0769649594798,43.5531041530023],[40.9221846860456,43.3821585149808],[42.3943945656088,43.2203079290426],[43.7560168800674,42.7408281520225],[43.9311999855368,42.5549738632848],[44.537622918482,42.7119927028036],[45.4702791684857,42.50278066667],[45.7764103533828,42.0924439560564],[46.4049507993488,41.8606751572273],[46.145431756379,41.7228024358726],[46.6379081561206,41.1816726751282],[46.5016374041669,41.0644446884741],[45.9626005389304,41.1238725856098],[45.2174263852816,41.411451931314],[44.9724800962181,41.2481285670556],[43.5827458025927,41.0921432561826],[42.6195487811045,41.5831727158199],[41.5540841001107,41.5356562363276]]]}},{"type":"Feature","properties":{"admin":"Ghana","name":"Ghana","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[1.06012169760493,5.92883738852888],[-0.507637905265938,5.34347260174268],[-1.06362464029419,5.00054779705381],[-1.96470659016759,4.71046214438337],[-2.8561250472024,4.99447581625951],[-2.81070146321784,5.38905121502411],[-3.24437008301126,6.2504715031135],[-2.98358496745033,7.37970490155551],[-2.56218950032624,8.21962779381148],[-2.82749630371271,9.64246084231978],[-2.96389624674711,10.3953347843801],[-2.94040930827046,10.9626903345126],[-1.20335771321143,11.0098192407627],[-0.761575893548183,10.9369296330151],[-0.438701544588582,11.0983409692787],[0.023802524423701,11.0186817489008],[-0.049784715159944,10.7069178328839],[0.367579990245389,10.1912128768272],[0.365900506195885,9.46500397382948],[0.461191847342121,8.67722260175601],[0.712029249686878,8.31246450442383],[0.490957472342245,7.41174428957647],[0.570384148774849,6.91435862876719],[0.836931186536333,6.27997874595215],[1.06012169760493,5.92883738852888]]]}},{"type":"Feature","properties":{"admin":"Guinea","name":"Guinea","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-8.4392984684487,7.68604279218174],[-8.72212358238212,7.71167430259851],[-8.926064622422,7.30903738039638],[-9.20878638349084,7.31392080324795],[-9.40334815106975,7.52690521893891],[-9.33727983238458,7.92853445071135],[-9.75534216962583,8.54105520266692],[-10.0165665348613,8.42850393313523],[-10.2300935530913,8.40620555260129],[-10.5054772607747,8.3488963891896],[-10.4943151513996,8.71554067630043],[-10.6547704736659,8.97717845299419],[-10.622395188835,9.26791006106828],[-10.8391519840833,9.68824616133037],[-11.1174812484073,10.0458729110063],[-11.9172773909887,10.0469839543006],[-12.150338100625,9.85857168216438],[-12.4259285140376,9.83583405195595],[-12.5967191227622,9.62018830000197],[-12.7119575667731,9.34271169681077],[-13.2465502588325,8.90304861087151],[-13.6851539779098,9.49474376061346],[-14.0740449691223,9.88616689700825],[-14.3300758529124,10.015719712764],[-14.5796988590983,10.2144672713585],[-14.6932319808435,10.656300767454],[-14.8395537988779,10.8765715600981],[-15.1303112451682,11.0404116886795],[-14.6856872217289,11.5278237980565],[-14.3821915348787,11.5092719588637],[-14.1214064193178,11.6771170109477],[-13.9007997298638,11.6787189803487],[-13.7431607731574,11.8112690291774],[-13.8282718571421,12.142644151249],[-13.7187436588995,12.2471855737755],[-13.7004760400843,12.5861829696102],[-13.2178181624782,12.575873521368],[-12.4990506657306,12.3320899520311],[-12.2785990055734,12.3544400089973],[-12.2035648258856,12.4656476912894],[-11.6583009505579,12.3865827498828],[-11.5139428369506,12.4429875757294],[-11.4561685856483,12.0768342147253],[-11.2975736149445,12.0779710962358],[-11.0365559554383,12.2112446151165],[-10.8708296370782,12.1778874780721],[-10.5932238428063,11.923975328006],[-10.1652137923488,11.8440835636827],[-9.89099280439201,12.060478623905],[-9.56791174970321,12.1942430688925],[-9.32761633954601,12.3342862004035],[-9.12747351727958,12.3080604110153],[-8.90526485842453,12.0883580591264],[-8.78609900555946,11.8125609399847],[-8.37630489748491,11.3936459416106],[-8.58130530438677,11.1362456323648],[-8.62032101076713,10.8108908146552],[-8.40731075686003,10.9092569035228],[-8.28235714357828,10.7925973576238],[-8.33537716310974,10.4948119165419],[-8.02994361004862,10.2065349390017],[-8.22933712404682,10.1290202905639],[-8.30961646161225,9.78953196862244],[-8.07911373537435,9.37622386315203],[-7.83210038901919,8.57570425051863],[-8.20349890790088,8.45545319257545],[-8.29904863120856,8.3164435897103],[-8.2217923649322,8.12332876223557],[-8.28070349774494,7.68717967369216],[-8.4392984684487,7.68604279218174]]]}},{"type":"Feature","properties":{"admin":"Gambia","name":"Gambia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-16.8415246240813,13.1513939478026],[-16.7137288070235,13.5949586043799],[-15.6245963200399,13.6235873478696],[-15.3987703109245,13.8603687606309],[-15.0817353988138,13.876491807506],[-14.6870308089685,13.6303569604998],[-14.3767138330558,13.6256802433774],[-14.0469923568175,13.7940678980004],[-13.8449633447724,13.505041612192],[-14.2777017887846,13.2805850285322],[-14.7121972314946,13.2982066919438],[-15.1411632959495,13.5095116235852],[-15.5118125065629,13.2785696476729],[-15.691000535535,13.2703530949385],[-15.9312959456922,13.1302841252113],[-16.8415246240813,13.1513939478026]]]}},{"type":"Feature","properties":{"admin":"Guinea Bissau","name":"Guinea-Bissau","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-15.1303112451682,11.0404116886795],[-15.6641804671755,11.4584740259208],[-16.0852141992736,11.5245940210382],[-16.3147867497302,11.8065147974065],[-16.3089473128812,11.9587018905061],[-16.6138382634033,12.1709111597127],[-16.6774519515546,12.3848515894011],[-16.1477168441306,12.5477615422012],[-15.8165742660043,12.5155671248833],[-15.548476935274,12.6281700708473],[-13.7004760400843,12.5861829696102],[-13.7187436588995,12.2471855737755],[-13.8282718571421,12.142644151249],[-13.7431607731574,11.8112690291774],[-13.9007997298638,11.6787189803487],[-14.1214064193178,11.6771170109477],[-14.3821915348787,11.5092719588637],[-14.6856872217289,11.5278237980565],[-15.1303112451682,11.0404116886795]]]}},{"type":"Feature","properties":{"admin":"Equatorial Guinea","name":"Eq. Guinea","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[9.49288862472198,1.01011953369149],[9.30561323409626,1.16091136311918],[9.64915815597263,2.28386607503774],[11.2764490088437,2.26105093018087],[11.2850789730365,1.05766185140001],[9.83028405115564,1.0678937849938],[9.49288862472198,1.01011953369149]]]}},{"type":"Feature","properties":{"admin":"Greece","name":"Greece","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[23.699980096133,35.7050043808355],[24.2466650733487,35.3680223658602],[25.0250154965289,35.424995632462],[25.7692077979642,35.3540180527091],[25.7450232276516,35.1799976669662],[26.2900028826017,35.2999903427479],[26.1649975928877,35.0049954290098],[24.7249821306423,34.9199876978896],[24.7350073585069,35.0849905461976],[23.5149784685281,35.279991563451],[23.699980096133,35.7050043808355]]],[[[26.6041955909363,41.5621145696611],[26.2946020850758,40.9362612981742],[26.0569421729655,40.8241234401008],[25.4476770362442,40.8525454778615],[24.9258484229609,40.9470616725232],[23.7148112322008,40.6871292180951],[24.4079988949641,40.1249929876241],[23.8999678891026,39.9620055201756],[23.3429993018608,39.9609978297458],[22.813987664489,40.4760051539666],[22.6262988624048,40.2565611842392],[22.8497477556348,39.6593108180258],[23.3500272966526,39.1900112981673],[22.9730993995155,38.9709032252497],[23.530016310325,38.5100011256385],[24.0250248552489,38.2199929876164],[24.0400110206136,37.6550145533694],[23.1150028825891,37.9200112981622],[23.4099719581111,37.4099907496574],[22.7749719581086,37.3050100774566],[23.1542252946986,36.422505804992],[22.4900281104511,36.4100001083774],[21.6700264828437,36.8449864771942],[21.2950106137016,37.6449893255047],[21.1200342139613,38.3103233912627],[20.7300321794546,38.7699852564988],[20.2177120297129,39.3402346868396],[20.1500159034105,39.624997666984],[20.6150004411728,40.1100068222594],[20.6749967790636,40.4349999049431],[20.9999898617473,40.580003973954],[21.0200403174764,40.8427269557259],[21.674160597427,40.931274522458],[22.0553776384443,41.1498658310527],[22.597308383889,41.1304871689432],[22.76177,41.3048],[22.9523771501666,41.3379938828112],[23.6920736019925,41.3090809189439],[24.492644891058,41.583896185872],[25.1972013689255,41.2344859889307],[26.1061381365072,41.3288988307278],[26.1170418637209,41.8269046087247],[26.6041955909363,41.5621145696611]]]]}},{"type":"Feature","properties":{"admin":"Greenland","name":"Greenland","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-46.76379,82.62796],[-43.40644,83.22516],[-39.89753,83.18018],[-38.62214,83.54905],[-35.08787,83.64513],[-27.10046,83.51966],[-20.84539,82.72669],[-22.69182,82.34165],[-26.51753,82.29765],[-31.9,82.2],[-31.39646,82.02154],[-27.85666,82.13178],[-24.84448,81.78697],[-22.90328,82.09317],[-22.07175,81.73449],[-23.16961,81.15271],[-20.62363,81.52462],[-15.76818,81.91245],[-12.77018,81.71885],[-12.20855,81.29154],[-16.28533,80.58004],[-16.85,80.35],[-20.04624,80.17708],[-17.73035,80.12912],[-18.9,79.4],[-19.70499,78.75128],[-19.67353,77.63859],[-18.47285,76.98565],[-20.03503,76.94434],[-21.67944,76.62795],[-19.83407,76.09808],[-19.59896,75.24838],[-20.66818,75.15585],[-19.37281,74.29561],[-21.59422,74.22382],[-20.43454,73.81713],[-20.76234,73.46436],[-22.17221,73.30955],[-23.56593,73.30663],[-22.31311,72.62928],[-22.29954,72.18409],[-24.27834,72.59788],[-24.79296,72.3302],[-23.44296,72.08016],[-22.13281,71.46898],[-21.75356,70.66369],[-23.53603,70.471],[-24.30702,70.85649],[-25.54341,71.43094],[-25.20135,70.75226],[-26.36276,70.22646],[-23.72742,70.18401],[-22.34902,70.12946],[-25.02927,69.2588],[-27.74737,68.47046],[-30.67371,68.12503],[-31.77665,68.12078],[-32.81105,67.73547],[-34.20196,66.67974],[-36.35284,65.9789],[-37.04378,65.93768],[-38.37505,65.69213],[-39.81222,65.45848],[-40.66899,64.83997],[-40.68281,64.13902],[-41.1887,63.48246],[-42.81938,62.68233],[-42.41666,61.90093],[-42.86619,61.07404],[-43.3784,60.09772],[-44.7875,60.03676],[-46.26364,60.85328],[-48.26294,60.85843],[-49.23308,61.40681],[-49.90039,62.38336],[-51.63325,63.62691],[-52.14014,64.27842],[-52.27659,65.1767],[-53.66166,66.09957],[-53.30161,66.8365],[-53.96911,67.18899],[-52.9804,68.35759],[-51.47536,68.72958],[-51.08041,69.14781],[-50.87122,69.9291],[-52.013585,69.574925],[-52.55792,69.42616],[-53.45629,69.283625],[-54.68336,69.61003],[-54.75001,70.28932],[-54.35884,70.821315],[-53.431315,70.835755],[-51.39014,70.56978],[-53.10937,71.20485],[-54.00422,71.54719],[-55,71.4065369672726],[-55.83468,71.65444],[-54.71819,72.58625],[-55.32634,72.95861],[-56.12003,73.64977],[-57.32363,74.71026],[-58.59679,75.09861],[-58.58516,75.51727],[-61.26861,76.10238],[-63.39165,76.1752],[-66.06427,76.13486],[-68.50438,76.06141],[-69.66485,76.37975],[-71.40257,77.00857],[-68.77671,77.32312],[-66.76397,77.37595],[-71.04293,77.63595],[-73.297,78.04419],[-73.15938,78.43271],[-69.37345,78.91388],[-65.7107,79.39436],[-65.3239,79.75814],[-68.02298,80.11721],[-67.15129,80.51582],[-63.68925,81.21396],[-62.23444,81.3211],[-62.65116,81.77042],[-60.28249,82.03363],[-57.20744,82.19074],[-54.13442,82.19962],[-53.04328,81.88833],[-50.39061,82.43883],[-48.00386,82.06481],[-46.59984,81.985945],[-44.523,81.6607],[-46.9007,82.19979],[-46.76379,82.62796]]]}},{"type":"Feature","properties":{"admin":"Guatemala","name":"Guatemala","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-90.095554572291,13.7353376327007],[-90.6086240303008,13.9097714299019],[-91.232410244496,13.927832342988],[-91.6897466702791,14.1262181665565],[-92.2277500068698,14.5388286401909],[-92.2032295397473,14.8301028508041],[-92.087215949252,15.0645846623284],[-92.2292486234063,15.2514466414959],[-91.7479601712559,16.0665648462517],[-90.4644726224227,16.0695620793247],[-90.438866950222,16.4101097681281],[-90.6008467272409,16.4707778996388],[-90.7118218655877,16.6874830184547],[-91.0816700915006,16.9184766707994],[-91.4539212715151,17.2521772323242],[-91.0022692532842,17.2546577010742],[-91.0015199450159,17.8175949162457],[-90.067933519231,17.8193260767275],[-89.1430804105033,17.8083189966493],[-89.1508060371309,17.0155766870758],[-89.2291216702693,15.8869375676052],[-88.9306127591352,15.8872734644151],[-88.6045861478058,15.7063801131774],[-88.5183640205269,15.855389105691],[-88.225022752622,15.7277224797139],[-88.6806796943556,15.3462470565353],[-89.1548109606335,15.0664191756748],[-89.2252200996312,14.8742862004136],[-89.1455350410372,14.6780191105691],[-89.3533259752828,14.4241327987191],[-89.5873426989165,14.3625861678595],[-89.5342193265205,14.2448155786663],[-89.7219339668207,14.1342280135617],[-90.0646779039966,13.8819695093289],[-90.095554572291,13.7353376327007]]]}},{"type":"Feature","properties":{"admin":"Guyana","name":"Guyana","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-59.7582848781592,8.36703481692405],[-59.1016841294586,7.99920197187049],[-58.482962205628,7.3476913517507],[-58.4548760646774,6.83278738039446],[-58.0781031968374,6.80909373618864],[-57.5422185939706,6.32126821535336],[-57.1474364894769,5.97314992921916],[-57.3072458563395,5.07356659588223],[-57.9142889064721,4.81262645102441],[-57.8602095200787,4.57680105226045],[-58.0446943833607,4.06086355225838],[-57.6015689764579,3.33465464926068],[-57.2814334784097,3.33349192953412],[-57.1500978257399,2.76892690674541],[-56.5393857489145,1.89952260986692],[-56.7827042303608,1.86371084228865],[-57.3358229233969,1.94853770589576],[-57.6609710353774,1.68258494710564],[-58.113449876525,1.50719513590703],[-58.429477098206,1.46394196207872],[-58.5400129868783,1.26808828369252],[-59.0308615790026,1.31769765869272],[-59.6460436672212,1.78689382568679],[-59.7185457017267,2.24963043864436],[-59.9745249090845,2.75523265218806],[-59.8154131740579,3.60649852133209],[-59.5380399237312,3.95880259848194],[-59.7674057684587,4.42350291586661],[-60.1110023667674,4.57496653891408],[-59.9809586249049,5.01406118409814],[-60.2136834377313,5.2444863956876],[-60.7335741848037,5.2002772078619],[-61.4103029038819,5.95906810141962],[-61.1394150458079,6.23429677980614],[-61.1593363104565,6.69607737876632],[-60.543999192941,6.85658437746488],[-60.2956680975624,7.04391144452292],[-60.6379727850638,7.41499990481085],[-60.5505879380582,7.77960297284618],[-59.7582848781592,8.36703481692405]]]}},{"type":"Feature","properties":{"admin":"Honduras","name":"Honduras","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-87.3166544257955,12.984685777229],[-87.4894087389471,13.2975348983239],[-87.7931111315265,13.3844804956552],[-87.7235029772293,13.7850503605656],[-87.8595153470216,13.8933124862171],[-88.0653425768401,13.9646259627798],[-88.5039979723496,13.8454859481309],[-88.5412308418159,13.9801547306835],[-88.8430728828327,14.1405067000852],[-89.0585119290576,14.3400294051642],[-89.3533259752828,14.4241327987191],[-89.1455350410372,14.6780191105692],[-89.2252200996312,14.8742862004137],[-89.1548109606335,15.0664191756749],[-88.6806796943556,15.3462470565354],[-88.2250227526219,15.727722479714],[-88.1211531237154,15.6886550969014],[-87.9018125068524,15.8644583195582],[-87.6156801012523,15.8787985295192],[-87.5229209052884,15.7972789575788],[-87.3677624173321,15.8469400090113],[-86.9031912910282,15.7567129582296],[-86.4409456041774,15.7828353947532],[-86.1192339749443,15.893448798074],[-86.0019543118578,16.0054057886344],[-85.6833174303463,15.9536518416939],[-85.4440038724026,15.8857490096624],[-85.1824436103572,15.9091584334906],[-84.9837218899788,15.9959231633087],[-84.5269797431671,15.8572236190374],[-84.3682555813826,15.8351577824487],[-84.0630545722668,15.6482441268491],[-83.7739766100261,15.4240717635669],[-83.4103812324204,15.2709028182538],[-83.1472190009741,14.9958291691642],[-83.489988776366,15.0162671981357],[-83.6285849677729,14.8800739608304],[-83.9757214016936,14.7494359399965],[-84.2283416409524,14.7487641463766],[-84.4493359036486,14.6216142847225],[-84.6495820787796,14.6668053247619],[-84.8200367906943,14.8195866968326],[-84.9245006985723,14.7904928654523],[-85.0527874417369,14.5515410425347],[-85.1487505765029,14.5601968449436],[-85.1653645494848,14.354369615125],[-85.5144130114003,14.0790117456579],[-85.6986653307369,13.960078436738],[-85.8012947252685,13.8360549992376],[-86.0962638007906,14.0381873641472],[-86.3121420966898,13.7713561060082],[-86.5207081774199,13.7784874536645],[-86.7550866360796,13.7548454858909],[-86.7338217841915,13.2630925562014],[-86.8805570136844,13.2542042098472],[-87.0057690091274,13.0257943791173],[-87.3166544257955,12.984685777229]]]}},{"type":"Feature","properties":{"admin":"Croatia","name":"Croatia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[18.82983808765,45.9088776718918],[19.0727689958542,45.5215111354321],[19.3904757015846,45.2365156113424],[19.0054862810101,44.8602336696091],[18.5532141455916,45.0815896673315],[17.8617834815264,45.0677403834771],[17.002146030351,45.2337767604309],[16.5349394060002,45.2116075709777],[16.3181567725359,45.0041266953259],[15.9593673031334,45.2337767604309],[15.750026075919,44.8187116562626],[16.2396602718845,44.3511432968857],[16.4564429053489,44.0412397324313],[16.9161564470173,43.6677224798257],[17.2973734880345,43.4463406438874],[17.674921502359,43.0285625270236],[18.56,42.65],[18.4500163103048,42.4799913600293],[17.5099703304833,42.8499946152391],[16.9300057308716,43.2099984808004],[16.0153845557377,43.5072154811272],[15.1744539730521,44.2431912298279],[15.3762504411518,44.3179153509221],[14.9203092790405,44.7384839951295],[14.9016024105509,45.0760602890761],[14.25874759284,45.2337767604309],[13.952254672917,44.8021235214969],[13.6569755388012,45.136935126316],[13.6794031104158,45.484149074885],[13.7150598486972,45.5003237981924],[14.4119682145855,45.4661656764474],[14.5951094906279,45.6349409043128],[14.935243767973,45.4716950547028],[15.3276745947974,45.4523163925933],[15.3239538916724,45.7317825384277],[15.6715295752676,45.8341535507979],[15.7687329444086,46.2381082220235],[16.5648083838649,46.5037509222198],[16.8825150895954,46.3806318222844],[17.6300663591296,45.9517691106941],[18.4560624528829,45.7594811061361],[18.82983808765,45.9088776718918]]]}},{"type":"Feature","properties":{"admin":"Haiti","name":"Haiti","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-73.1897906155176,19.9156839055119],[-72.5796728176636,19.8715005559024],[-71.712361416293,19.7144558781674],[-71.6248732164228,19.1698379582433],[-71.7013026597825,18.7854169784241],[-71.9451120673355,18.6169001327203],[-71.6877375963059,18.3166600611045],[-71.708304816358,18.0449970565461],[-72.3724761623893,18.2149608423541],[-72.8444111802949,18.1456110702184],[-73.454554816365,18.2179063989947],[-73.9224332343356,18.030992743395],[-74.4580336168248,18.3425499536827],[-74.3699252997671,18.6649075383194],[-73.4495422024327,18.5260529647511],[-72.6949370998906,18.4457994654019],[-72.334881557897,18.6684215357153],[-72.7916495429249,19.101625067618],[-72.7841047838103,19.4835914169034],[-73.4150223456617,19.6395508895603],[-73.1897906155176,19.9156839055119]]]}},{"type":"Feature","properties":{"admin":"Hungary","name":"Hungary","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[16.2022982113374,46.852385972677],[16.5342676123804,47.4961709661691],[16.3405843441504,47.7129019232012],[16.9037541032673,47.7148656276283],[16.979666782304,48.1234970159763],[17.4884729346498,47.8674661321862],[17.85713260262,47.7584288600504],[18.6965128923369,47.8809536810144],[18.7770247738477,48.0817682969006],[19.1743648617399,48.1113788926039],[19.6613635596585,48.2666148952087],[19.7694706560131,48.2026911484636],[20.2390543962493,48.3275672470969],[20.4735620459899,48.5628500433218],[20.8012939795849,48.6238540716424],[21.8722363624017,48.31997081155],[22.0856083513348,48.4222643092718],[22.6408199398787,48.1502395696874],[22.7105314470405,47.8821939153894],[22.0997676937828,47.6724392767167],[21.6265149268539,46.9942377793182],[21.0219523454712,46.3160879583519],[20.2201924984628,46.1274689804866],[19.5960445492416,46.1717298447445],[18.82983808765,45.9088776718919],[18.4560624528829,45.7594811061361],[17.6300663591296,45.9517691106942],[16.8825150895953,46.3806318222844],[16.5648083838649,46.5037509222198],[16.3705049984474,46.8413272161665],[16.2022982113374,46.852385972677]]]}},{"type":"Feature","properties":{"admin":"Indonesia","name":"Indonesia","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[120.71560875863,-10.2395813940879],[120.295014276207,-10.2586499976035],[118.967808465655,-9.55796925215803],[119.900309686362,-9.36134042728751],[120.425755649905,-9.6659213192158],[120.775501743657,-9.96967538822746],[120.71560875863,-10.2395813940879]]],[[[124.435950148619,-10.1400009090614],[123.579981724137,-10.359987481328],[123.459989048355,-10.2399948055462],[123.550009393407,-9.90001555749798],[123.980008986508,-9.29002695072469],[124.968682489116,-8.89279021569705],[125.070019972841,-9.08998748132284],[125.088520135601,-9.39317310957932],[124.435950148619,-10.1400009090614]]],[[[117.900018345208,-8.09568124759492],[118.26061648974,-8.36238331465333],[118.878459914222,-8.28068287519983],[119.126506789223,-8.70582488366507],[117.970401645989,-8.90663949955126],[117.277730747549,-9.04089487064556],[116.740140822417,-9.03293670007264],[117.083737420725,-8.45715789147654],[117.632024367342,-8.44930307376819],[117.900018345208,-8.09568124759492]]],[[[122.903537225436,-8.09423430749074],[122.756982863456,-8.64980763106064],[121.25449059457,-8.93366627363994],[119.92439090381,-8.81041798262387],[119.920928582846,-8.44485890059107],[120.715091994308,-8.23696461348086],[121.341668735847,-8.53673959720602],[122.00736453663,-8.46062021244016],[122.903537225436,-8.09423430749074]]],[[[108.623478631629,-6.77767384199068],[110.539227329553,-6.87735767988168],[110.759575636846,-6.46518645592175],[112.614811232556,-6.94603565839759],[112.978768345188,-7.59421314863458],[114.478935174621,-7.77652760176028],[115.705526971501,-8.37080657311686],[114.564511346496,-8.75181690840483],[113.464733514461,-8.34894744225742],[112.559672479301,-8.37618092207516],[111.522061395312,-8.30212859460096],[110.586149530074,-8.12260466881902],[109.427667270955,-7.74066415774976],[108.693655226681,-7.64160043704622],[108.277763299596,-7.76665740319258],[106.454102004016,-7.35489959069095],[106.280624220812,-6.9248999975902],[105.365486281356,-6.85141611087117],[106.051645949327,-5.8959188777945],[107.26500857954,-5.95498503990406],[108.072091099075,-6.34576222089524],[108.486846144649,-6.42198495852577],[108.623478631629,-6.77767384199068]]],[[[134.724624465067,-6.21440073000929],[134.210133905169,-6.8952377254547],[134.112775506731,-6.14246713625901],[134.290335728086,-5.78305754966904],[134.499625278868,-5.4450420060479],[134.727001580952,-5.73758228925216],[134.724624465067,-6.21440073000929]]],[[[127.249215122589,-3.45906503663889],[126.874922723499,-3.79098276124958],[126.183802118027,-3.60737639731656],[125.989033644719,-3.17727345135133],[127.000651483265,-3.12931772218441],[127.249215122589,-3.45906503663889]]],[[[130.471344028852,-3.09376433676762],[130.834836053593,-3.85847218182276],[129.990546502808,-3.44630095786282],[129.155248651242,-3.36263681398225],[128.590683628454,-3.42867929445126],[127.898891229362,-3.39343596762819],[128.135879347853,-2.84365040447491],[129.370997756061,-2.80215422934455],[130.471344028852,-3.09376433676762]]],[[[134.143367954648,-1.15186736410359],[134.422627394753,-2.76918466554238],[135.457602980695,-3.36775278077911],[136.293314243719,-2.30704233155609],[137.440737746328,-1.70351327881937],[138.329727411045,-1.70268645590265],[139.184920689043,-2.05129566814364],[139.92668419816,-2.40905160890028],[141.000210402592,-2.60015105551562],[141.017056919519,-5.85902190513802],[141.033851760014,-9.11789275476042],[140.143415155193,-8.29716765710096],[139.127766554928,-8.09604298262094],[138.881476678625,-8.38093515384609],[137.614473911693,-8.41168263105976],[138.039099155835,-7.59788217532735],[138.668621454015,-7.32022470462307],[138.407913853102,-6.23284921633748],[137.927839797111,-5.393365573756],[135.989250116113,-4.54654387778905],[135.1645976096,-4.46293141034077],[133.662880487198,-3.53885344809753],[133.367704705947,-4.02481861737031],[132.983955519747,-4.11297861086028],[132.756940952689,-3.74628264731713],[132.753788690319,-3.31178720460707],[131.989804315316,-2.82055103924046],[133.066844517143,-2.46041798259844],[133.780030959204,-2.47984832114021],[133.696211786026,-2.21454151775369],[132.232373488494,-2.21252613689433],[131.836221958545,-1.6171619604596],[130.942839797083,-1.4325220678808],[130.51955814018,-0.937720228686075],[131.867537876514,-0.695461114101818],[132.380116408417,-0.369537855636977],[133.985548130428,-0.780210463060442],[134.143367954648,-1.15186736410359]]],[[[125.240500522972,1.41983612711761],[124.437035353697,0.427881171058971],[123.685504998877,0.235593166500877],[122.723083123873,0.431136786293337],[121.056724888189,0.381217352699451],[120.183083123863,0.23724681233422],[120.040869582195,-0.519657891444851],[120.935905389491,-1.40890593832337],[121.475820754076,-0.955962009285116],[123.340564813328,-0.615672702643081],[123.258399285984,-1.07621306722834],[122.822715285332,-0.930950616055881],[122.388529901215,-1.51685800538112],[121.508273553555,-1.90448292400242],[122.454572381684,-3.18605844484088],[122.271896193533,-3.5295000138527],[123.170962762547,-4.68369312909171],[123.162332798354,-5.34060393638596],[122.628515252779,-5.63459115969449],[122.236394484548,-5.28293303794828],[122.719569126477,-4.46417164471579],[121.738233677254,-4.8513314754465],[121.489463332201,-4.57455250409122],[121.619171177254,-4.18847787843867],[120.898181593918,-3.60210540122283],[120.972388950689,-2.62764291749491],[120.30545291553,-2.93160369223573],[120.390047235192,-4.09757903403722],[120.430716587405,-5.52824106203778],[119.796543410319,-5.67340016034565],[119.366905552245,-5.3798780249278],[119.6536063986,-4.45941741294496],[119.498835483886,-3.49441171632651],[119.078344354327,-3.48702198650876],[118.767768996253,-2.80199920004769],[119.180973748859,-2.1471037736128],[119.323393996255,-1.35314706788047],[119.825998976726,0.154254462073496],[120.035701938966,0.566477362465804],[120.885779250168,1.30922272379684],[121.666816847827,1.01394358968108],[122.927566766452,0.875192368977465],[124.077522414243,0.917101955566139],[125.065989211122,1.64325918213156],[125.240500522972,1.41983612711761]]],[[[128.688248732621,1.13238597249411],[128.635952183141,0.258485826006179],[128.120169712436,0.356412665199286],[127.968034295769,-0.252077325037533],[128.379998814,-0.780003757331286],[128.100015903842,-0.899996433112974],[127.696474644075,-0.266598402511505],[127.399490187694,1.01172150309257],[127.600511509309,1.81069082275718],[127.932377557487,2.17459625895656],[128.004156121941,1.62853139892833],[128.594559360875,1.54081065511286],[128.688248732621,1.13238597249411]]],[[[117.875627069166,1.82764069254891],[118.996747267738,0.902219143066048],[117.811858351718,0.784241848143722],[117.478338657706,0.102474676917026],[117.521643507967,-0.803723239753211],[116.56004845588,-1.48766082113623],[116.533796828275,-2.4835173478329],[116.148083937649,-4.01272633221401],[116.000857782049,-3.65703744874901],[114.864803094545,-4.10698414471442],[114.468651564595,-3.49570362713382],[113.755671828264,-3.43916961020652],[113.256994256648,-3.11877572999685],[112.068126255341,-3.47839202231607],[111.70329064336,-2.99444223390263],[111.048240187628,-3.04942595786119],[110.223846063276,-2.93403248455348],[110.070935500124,-1.59287403728241],[109.571947869914,-1.31490650798449],[109.091873813923,-0.459506524257051],[108.952657505328,0.415375474444346],[109.069136183714,1.34193390543764],[109.663260125774,2.00646698649498],[109.830226678509,1.33813568766419],[110.514060907027,0.773131415200993],[111.159137811327,0.976478176269509],[111.79754845586,0.904441229654651],[112.380251906384,1.41012095784676],[112.859809198052,1.49779002522995],[113.80584964402,1.21754873291104],[114.621355422017,1.43068817789889],[115.134037306785,2.82148183838622],[115.519078403792,3.1692383894944],[115.865517205877,4.30655914959016],[117.015214471506,4.30609406169947],[117.88203494677,4.13755137777949],[117.313232456534,3.23442820883058],[118.048329705885,2.28769013102736],[117.875627069166,1.82764069254891]]],[[[105.817655063909,-5.85235564537241],[104.710384149192,-5.87328460045064],[103.868213332131,-5.03731495526497],[102.584260695407,-4.2202588842982],[102.156173130301,-3.61414600994677],[101.399113397225,-2.79977711345917],[100.9025028829,-2.05026213949786],[100.141980828861,-0.650347588710957],[99.2637398620602,0.183141587724663],[98.9700110209133,1.04288239176454],[98.6013513529431,1.82350657796562],[97.6995976094499,2.45318390544212],[97.1769421732499,3.30879059489861],[96.4240165547573,3.86885976807791],[95.3808760925135,4.97078217205367],[95.2930261576173,5.47982086834482],[95.9368628275417,5.43951325115711],[97.4848820332771,5.24632090903401],[98.3691691426557,4.26837026612637],[99.1425586283358,3.59034963624092],[99.6939978373224,3.17432851807516],[100.641433546962,2.0993812117558],[101.658012323007,2.08369741455519],[102.498271112073,1.39870046631022],[103.076840448013,0.561361395668854],[103.838396030698,0.104541734208666],[103.437645298275,-0.711945896002845],[104.010788608824,-1.05921152100423],[104.369991489685,-1.08484303142102],[104.539490187602,-1.78237151449672],[104.887892694114,-2.34042530681666],[105.622111444117,-2.42884368246807],[106.108593377713,-3.06177662517895],[105.857445916774,-4.30552499757972],[105.817655063909,-5.85235564537241]]]]}},{"type":"Feature","properties":{"admin":"India","name":"India","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[77.8374507994746,35.4940095077878],[78.9122689147132,34.3219363469758],[78.8110864602857,33.5061980250324],[79.2088916360686,32.9943946396137],[79.1761287779955,32.4837798121377],[78.458446486326,32.6181643743127],[78.738894484374,31.5159060735271],[79.7213668151071,30.8827147486547],[81.1112561380293,30.1834809433134],[80.4767212259174,29.7298652206553],[80.0884245136763,28.7944701197401],[81.057202589852,28.416095282499],[81.999987420585,27.92547923432],[83.3042488951995,27.3645057235756],[84.6750179381738,27.2349012313875],[85.2517785989834,26.7261984319063],[86.0243929381792,26.6309846054086],[87.2274719583663,26.3978980575561],[88.0602376647498,26.4146153834025],[88.1748043151409,26.8104051783259],[88.0431327656612,27.4458185897868],[88.1204407083698,27.8765416529396],[88.7303259622785,28.0868647323675],[88.8142484883205,27.2993159042394],[88.8356425312894,27.0989663762438],[89.7445276224388,26.71940298106],[90.3732747741341,26.8757241887429],[91.2175126484864,26.808648179628],[92.0334835143751,26.8383104517636],[92.1037117858597,27.4526140406332],[91.6966565286967,27.7717418482517],[92.5031189310436,27.8968763290464],[93.4133476094327,28.6406293808072],[94.5659904317029,29.27743805594],[95.4048022806646,29.0317166203921],[96.117678664131,29.4528020289225],[96.5865906107475,28.8309795191543],[96.2488334492878,28.4110309921344],[97.32711388549,28.2615827499463],[97.4025614766361,27.8825361190854],[97.0519885599681,27.6990589462331],[97.1339990580153,27.08377350515],[96.4193656758509,27.2645893417392],[95.1247676940749,26.5735720891323],[95.1551534362626,26.0013072779321],[94.6032491393854,25.1624954289704],[94.5526579121716,24.6752383488903],[94.1067419779251,23.8507408716735],[93.3251876159428,24.0785564234322],[93.2863269388593,23.043658352139],[93.0602942240146,22.7031106633356],[93.1661275573484,22.2784595809771],[92.6727209818256,22.0412389185412],[92.1460347839068,23.6274986841726],[91.8699276061713,23.6243464218028],[91.7064750508321,22.9852639836492],[91.1589632506997,23.5035269231044],[91.4677299336437,24.0726394719348],[91.9150928079944,24.1304137232371],[92.3762016133348,24.976692816665],[91.7995959818221,25.1474317489573],[90.8722107279121,25.1326006128895],[89.9206925801218,25.2697498641922],[89.8324809101996,25.9650820988955],[89.3550940286873,26.0144072535181],[88.5630493509497,26.4465255803427],[88.2097892598025,25.7680657007827],[88.9315539896231,25.2386923283848],[88.306372511756,24.8660794133442],[88.0844222350624,24.5016572128219],[88.6999402200909,24.2337149113886],[88.5297697285538,23.6311418726492],[88.8763118835031,22.8791464299378],[89.0319612975662,22.055708319583],[88.8887659036854,21.6905884872247],[88.2084973489952,21.7031716984878],[86.9757043802403,21.4955616317552],[87.0331685729489,20.7433078068824],[86.4993510273738,20.1516384953566],[85.0602657409097,19.4785788029711],[83.9410058939,18.3020097925497],[83.1892171569178,17.671221421779],[82.1927921894659,17.0166360539378],[82.1912418964972,16.5566641301078],[81.6927193541775,16.3102192245079],[80.7919991393301,15.9519723576445],[80.3248958678439,15.8991848820583],[80.0250692076864,15.1364149032141],[80.2332735533904,13.83577077886],[80.2862935729219,13.0062606877108],[79.8625468281285,12.0562153182409],[79.8579993020868,10.3572750919971],[79.340511509116,10.3088542749396],[78.8853454934892,9.54613597252772],[79.1897196796883,9.21654368737015],[78.2779407083305,8.93304677981693],[77.9411653990843,8.25295909263974],[77.5398979023379,7.96553477623233],[76.5929789570217,8.89927623131419],[76.1300614765511,10.2996300317755],[75.7464673196485,11.3082506372483],[75.3961011087096,11.7812450220158],[74.8648157083168,12.7419357365379],[74.6167171568835,13.9925829126497],[74.4438594908672,14.6172217879777],[73.5341992532334,15.990652167215],[73.1199092955494,17.9285700545925],[72.8209094583086,19.2082335474362],[72.8244751321368,20.4195032821415],[72.6305334817454,21.356009426351],[71.1752734719739,20.7574413111142],[70.4704586119451,20.8773306340314],[69.1641300800388,22.0892980005727],[69.6449276060824,22.4507746444543],[69.3495967955343,22.8431796330627],[68.1766451353734,23.6919650334567],[68.8425993183188,24.3591336125609],[71.0432401874682,24.3565239527302],[70.8446993346028,25.2151020370435],[70.2828731627256,25.7222287053398],[70.168926629522,26.4918716496788],[69.5143929381131,26.9409656845114],[70.6164962096019,27.9891962753359],[71.7776656432003,27.9131802434345],[72.8237516620847,28.961591701772],[73.4506384622174,29.9764134791199],[74.4213802428203,30.9798147649312],[74.405928989565,31.6926394719653],[75.2586417988132,32.2711054550405],[74.4515592792787,32.7648996038055],[74.1042936542773,33.4414732935868],[73.749948358052,34.3176988795278],[74.240202671205,34.7488870305713],[75.7570609882683,34.5049225937213],[76.871721632804,34.6535440129927],[77.8374507994746,35.4940095077878]]]}},{"type":"Feature","properties":{"admin":"Ireland","name":"Ireland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-6.19788489422099,53.8675650091634],[-6.03298539877761,53.1531641709443],[-6.78885657391085,52.2601179062923],[-8.56161658368356,51.6693012558994],[-9.97708574059027,51.8204548203531],[-9.16628251793078,52.8646288112427],[-9.68852454267245,53.8813626165853],[-8.32798743329201,54.6645189479686],[-7.57216793459106,55.1316222194549],[-7.36603064617879,54.5958409694527],[-7.57216793459106,54.059956366586],[-6.95373023113807,54.0737022975756],[-6.19788489422099,53.8675650091634]]]}},{"type":"Feature","properties":{"admin":"Iran","name":"Iran","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[53.9215979347955,37.1989183619613],[54.8003039894866,37.3924207626782],[55.5115784035519,37.9641171331232],[56.1803747902733,37.9351266546074],[56.6193660825928,38.1213943548035],[57.330433790929,38.0292294378109],[58.4361544126782,37.5223094752438],[59.2347619973168,37.4129879827303],[60.3776379738839,36.5273831243284],[61.1230705096941,36.4915971949662],[61.2108170917257,35.6500723333092],[60.8031933938074,34.4041018743199],[60.5284298033116,33.676446031218],[60.963700392506,33.5288323023763],[60.5360779152908,32.9812688258116],[60.863654819589,32.1829196233344],[60.9419446145111,31.5480746526287],[61.6993144061808,31.3795061304927],[61.7812215513634,30.7358503280812],[60.8742484882088,29.8292389999526],[61.3693087095649,29.3032762720859],[61.7718681171186,28.6993338078908],[62.727830438086,28.2596448837354],[62.7554256529299,27.378923448185],[63.2338977395203,27.2170470240307],[63.3166317076196,26.7565324976617],[61.8741874530565,26.2399748804721],[61.4973629087842,25.0782370061185],[59.6161340676308,25.3801565617838],[58.5257613462723,25.6099616561857],[57.3972514178824,25.7399020451836],[56.9707658221775,26.9661062688214],[56.4921387062902,27.1433047551502],[55.7237101581101,26.964633490501],[54.7150895526373,26.4806578638715],[53.4930969582313,26.812368882753],[52.4835978534096,27.5808491073655],[51.5207625669474,27.8656896021583],[50.8529480324395,28.8145205754694],[50.1150085793116,30.1477725285997],[49.576850213424,29.9857152369324],[48.9413334490985,30.317090359004],[48.5679712257898,29.9267782659035],[48.0145683123761,30.4524567733926],[48.0046981138083,30.9851374374572],[47.6852860858123,30.9848532170796],[47.8492037290421,31.7091759302987],[47.3346614927119,32.4691553817991],[46.1093616066393,33.017287299119],[45.416690708199,33.9677977564796],[45.6484595070281,34.748137722303],[46.1517879575509,35.0932587753643],[46.0763403664048,35.6773833277755],[45.4206181170532,35.9775458847428],[44.77267,37.17045],[44.2257556496005,37.9715843775893],[44.4214026222575,38.2812812363145],[44.1092252947823,39.4281362981681],[44.7939896990819,39.713002631177],[44.9526880226503,39.3357646754464],[45.4577217954388,38.8741391057831],[46.1436230812488,38.7412014837122],[46.505719842318,38.7706053736863],[47.6850793800831,39.5083639593012],[48.0600952492252,39.5822354192625],[48.3555294126379,39.2887649602769],[48.0107442563865,38.7940147975145],[48.6343754412848,38.270377509101],[48.8832491392025,38.3202452662626],[49.1996122576933,37.5828742538899],[50.1477714373846,37.3745665553213],[50.8423543638197,36.8728142359834],[52.2640246926014,36.7004216578577],[53.8257898293264,36.9650308294082],[53.9215979347955,37.1989183619613]]]}},{"type":"Feature","properties":{"admin":"Iraq","name":"Iraq","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[45.4206181170532,35.9775458847428],[46.0763403664048,35.6773833277755],[46.1517879575509,35.0932587753643],[45.6484595070281,34.748137722303],[45.416690708199,33.9677977564796],[46.1093616066393,33.017287299119],[47.3346614927119,32.4691553817991],[47.8492037290421,31.7091759302987],[47.6852860858123,30.9848532170796],[48.0046981138083,30.9851374374572],[48.0145683123761,30.4524567733926],[48.5679712257898,29.9267782659035],[47.9745190773499,29.9758192001485],[47.302622104691,30.0590699325707],[46.5687134132817,29.0990251734523],[44.7094987322847,29.1788910995594],[41.8899809100078,31.1900086532784],[40.3999943377362,31.8899917668879],[39.195468377445,32.1610088160427],[38.7923405291361,33.3786864283522],[41.0061588885199,34.4193722600621],[41.3839652850058,35.6283165553144],[41.2897074725055,36.3588146021923],[41.837064243341,36.6058537867636],[42.3495910988118,37.2298725449041],[42.7791256040218,37.3852635768057],[43.9422587420473,37.2562275253729],[44.2934517759029,37.0015143906063],[44.7726990089777,37.1704446477684],[45.4206181170532,35.9775458847428]]]}},{"type":"Feature","properties":{"admin":"Iceland","name":"Iceland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-14.5086954411292,66.4558922390314],[-14.7396374170416,65.8087482774403],[-13.6097322249798,65.1266710476199],[-14.9098337467949,64.3640819362887],[-17.7944380355434,63.6787490912338],[-18.656245896875,63.4963829616758],[-19.9727546859428,63.6436349554915],[-22.7629719711102,63.9601789414954],[-21.7784842595177,64.4021157904555],[-23.9550439112191,64.8911298692335],[-22.1844026351704,65.0849681667603],[-22.2274232650533,65.3785936550427],[-24.3261840479393,65.6111892767885],[-23.6505146957231,66.2625190293952],[-22.1349224512509,66.4104686550469],[-20.5762837386795,65.7321121283514],[-19.0568416000016,66.2766008571948],[-17.798623826559,65.9938532579098],[-16.1678189762921,66.5267923041359],[-14.5086954411292,66.4558922390314]]]}},{"type":"Feature","properties":{"admin":"Israel","name":"Israel","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.7199182472227,32.7091924097949],[35.5456653175345,32.3939920110306],[35.1839302914914,32.5325106877889],[34.9746407407093,31.8665823430597],[35.2258915545124,31.7543411321218],[34.970506626126,31.6167784693608],[34.9274084815946,31.3534353704014],[35.397560662586,31.4890860051676],[35.420918409982,31.1000658228744],[34.9226025733914,29.5013261988445],[34.2654333839357,31.2193608668201],[34.5563716977389,31.548823960897],[34.4881071306814,31.6055388453373],[34.7525871111512,32.0729263372012],[34.9554171078968,32.8273764104464],[35.0984574724807,33.0805392522443],[35.1260526873245,33.0909003769188],[35.4607092628467,33.0890400253563],[35.5527966651908,33.264274807258],[35.8211007016502,33.2774264592763],[35.8363969256086,32.8681232773085],[35.7007979672747,32.7160136988574],[35.7199182472227,32.7091924097949]]]}},{"type":"Feature","properties":{"admin":"Italy","name":"Italy","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[15.5203760108138,38.2311550969915],[15.1602429541717,37.4440455185378],[15.309897902089,37.1342194687318],[15.0999882341194,36.6199872909954],[14.335228712632,36.9966309677548],[13.8267326188799,37.1045313583802],[12.4310038591088,37.6129499374838],[12.5709436377551,38.1263811305197],[13.7411564470046,38.0349655217954],[14.7612492204462,38.1438736028505],[15.5203760108138,38.2311550969915]]],[[[9.21001183435626,41.2099913600242],[9.80997521326497,40.5000088567661],[9.66951867029567,39.1773764104718],[9.21481774255949,39.2404733343001],[8.80693566247973,38.9066177434785],[8.42830244307711,39.1718470322166],[8.38825320805094,40.3783108587188],[8.15999840661766,40.9500072291638],[8.70999067550011,40.8999844427052],[9.21001183435626,41.2099913600242]]],[[[12.3764852230408,46.7675591090699],[13.8064754574216,46.5093061386912],[13.6981099789055,46.0167780625174],[13.9376302425783,45.5910159368647],[13.1416064795543,45.7366917994954],[12.3285811703063,45.3817780625148],[12.3838749528586,44.8853742539191],[12.2614534847592,44.600482082694],[12.5892370947865,44.0913658717545],[13.5269059587225,43.5877273626379],[14.029820997787,42.7610077988325],[15.142569614328,41.9551396754569],[15.9261910336019,41.9613150091157],[16.1698970882904,41.7402949082034],[15.8893457373778,41.5410822617182],[16.7850016618606,41.1796056178366],[17.5191687354312,40.8771434596322],[18.3766874528826,40.3556249049427],[18.4802470231954,40.1688662786398],[18.2933850440281,39.8107744410732],[17.7383801612133,40.2776710068303],[16.8695959815223,40.4422346054638],[16.4487431169373,39.7954007024665],[17.1714896989715,39.4246998154207],[17.0528406104293,38.9028712021373],[16.6350883317818,38.8435724960824],[16.1009607276131,37.9858987493342],[15.6840869483145,37.908849188787],[15.6879626807363,38.2145928004419],[15.8919812354247,38.7509424911992],[16.1093323096443,38.9645470240777],[15.7188135108146,39.5440723740149],[15.4136125016988,40.0483568385352],[14.9984957210982,40.1729487167909],[14.7032682634148,40.6045502792926],[14.0606718278653,40.7863479680954],[13.6279850602854,41.1882872584617],[12.8880819027304,41.2530895045556],[12.1066825700449,41.7045348170574],[11.1919063656142,42.3554253199897],[10.5119478695178,42.9314625107472],[10.200028924204,43.9200068222746],[9.70248823409781,44.0362787949313],[8.88894616052687,44.3663361679795],[8.42856082523858,44.2312281357524],[7.8507666357832,43.7671479355552],[7.43518476729184,43.6938449163492],[7.54959638838616,44.1279011093848],[7.00756229007666,44.2547667506614],[6.74995527510171,45.0285179713676],[7.09665245934784,45.3330988632959],[6.80235517744566,45.7085798203287],[6.84359297041456,45.9911465521007],[7.27385094567668,45.7769477402508],[7.75599205895983,45.8244900579593],[8.31662967289438,46.1636424830908],[8.48995242680129,46.0051508652517],[8.96630577966783,46.0369318711112],[9.18288170740311,46.440214748717],[9.92283654139035,46.3148994004092],[10.3633781266787,46.4835712754098],[10.4427014502466,46.8935462509974],[11.0485559424365,46.7513585475464],[11.1648279150933,46.9415794948127],[12.1530880062431,47.1153931748264],[12.3764852230408,46.7675591090699]]]]}},{"type":"Feature","properties":{"admin":"Jamaica","name":"Jamaica","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-77.5696007961992,18.4905254175505],[-76.8966186184621,18.4008668075241],[-76.3653590562855,18.1607005884476],[-76.1996585761416,17.886867173733],[-76.9025614081757,17.8682378198917],[-77.2063413154035,17.7011162378598],[-77.7660229153406,17.8615973983422],[-78.3377192857856,18.2259679224322],[-78.2177266100039,18.4545327824592],[-77.7973646715256,18.5242184514048],[-77.5696007961992,18.4905254175505]]]}},{"type":"Feature","properties":{"admin":"Jordan","name":"Jordan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.5456653175345,32.3939920110306],[35.7199182472227,32.7091924097949],[36.8340621274355,32.3129375269808],[38.7923405291361,33.3786864283522],[39.195468377445,32.1610088160427],[39.0048856951525,32.010216986615],[37.002165561681,31.5084129908447],[37.9988489112944,30.5084998642131],[37.6681197446264,30.3386652694859],[37.503581984209,30.0037761500184],[36.7405277849872,29.8652833114762],[36.5012142270436,29.5052536076987],[36.0689408709221,29.1974946151845],[34.9560372250843,29.3565546737788],[34.9226025733914,29.5013261988445],[35.420918409982,31.1000658228744],[35.397560662586,31.4890860051676],[35.5452519060762,31.7825047877208],[35.5456653175345,32.3939920110306]]]}},{"type":"Feature","properties":{"admin":"Japan","name":"Japan","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[134.638428176004,34.1492337102564],[134.766379022358,33.8063347437837],[134.203415968971,33.2011778834296],[133.792950067276,33.5219851750976],[133.280268182509,33.2895704208649],[133.014858026258,32.7045673691048],[132.363114862193,32.9893820256814],[132.37117638563,33.4636424830401],[132.924372593315,34.060298570282],[133.492968377822,33.9446208765967],[133.904106073136,34.3649311386426],[134.638428176004,34.1492337102564]]],[[[140.976387567305,37.1420742864402],[140.599769728762,36.3439834661245],[140.774074334883,35.8428771021902],[140.253279250245,35.1381139185937],[138.975527785396,34.6676000025761],[137.217598911691,34.6062859156618],[135.792983026269,33.4648052027666],[135.120982700745,33.8490711532891],[135.079434849183,34.5965449081748],[133.340316196832,34.3759382187208],[132.156770868051,33.9049333765965],[130.986144647343,33.8857614202163],[132.00003624891,33.1499923772446],[131.332790155157,31.4503545191648],[130.686317987186,31.0295791692282],[130.202419875205,31.4182376164954],[130.447676222862,32.3194745956657],[129.814691603719,32.6103095566044],[129.408463169473,33.2960558131176],[130.353935174685,33.6041507024417],[130.878450962447,34.23274282484],[131.884229364144,34.7497138534879],[132.617672967663,35.4333930527094],[134.608300815978,35.7316177434658],[135.677537876529,35.5271341008868],[136.723830601142,37.3049842392404],[137.390611607004,36.8273906519988],[138.857602166906,37.8274846461435],[139.426404657143,38.2159622258976],[140.054790073812,39.4388074814364],[139.8833793479,40.5633124863237],[140.305782505454,41.1950051946596],[141.368973423427,41.3785598821603],[141.91426313697,39.9916161158787],[141.884600864835,39.1808645696515],[140.959489373946,38.1740009628766],[140.976387567305,37.1420742864402]]],[[[143.910161981379,44.1740998398537],[144.61342654844,43.9608828802175],[145.320825230083,44.3847329778754],[145.543137241803,43.2620883245506],[144.0596619,42.9883582627006],[143.183849725517,41.9952147486992],[141.611490920172,42.6787905950561],[141.067286411707,41.584593817708],[139.955106235921,41.569555975911],[139.81754357316,42.5637588567744],[140.312087030193,43.3332726100326],[141.38054894426,43.3888247747465],[141.671952345954,44.7721253525515],[141.967644891528,45.5514834661613],[143.14287031471,44.510358384777],[143.910161981379,44.1740998398537]]]]}},{"type":"Feature","properties":{"admin":"Kazakhstan","name":"Kazakhstan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[70.9623148944993,42.2661542832055],[70.3889648782208,42.0813076848975],[69.0700272968352,41.3842442897123],[68.63248294462,40.6686807317669],[68.2598958677956,40.6623245305949],[67.9858557473518,41.1359907089822],[66.7140470722166,41.1684435084616],[66.5106486347157,41.9876441513686],[66.0233915546356,41.994646307944],[66.0980123228652,42.9976600205131],[64.9008244159593,43.7280805527427],[63.1857869810566,43.650074978198],[62.0133004087863,43.5044766302157],[61.0583199400325,44.4058169622506],[60.2399719582585,44.7840367701947],[58.6899890480958,45.5000137395987],[58.5031270689284,45.586804307633],[55.9289172707412,44.9958584661592],[55.968191359283,41.3086416692694],[55.4552510923538,41.2598591171858],[54.7553454933927,42.0439714625666],[54.079417759015,42.3241094020208],[52.9442932472917,42.1160342473976],[52.5024597511963,41.7833155380865],[52.4463391457272,42.0271507838556],[52.6921122577073,42.4438953720734],[52.5014262225503,42.7922978785852],[51.3424271991082,43.1329747584693],[50.8912919452002,44.0310336370538],[50.3391292661614,44.2840156113385],[50.3056429380363,44.6098355169389],[51.2785034523632,44.5148542343865],[51.316899041556,45.2459982366679],[52.1673897642157,45.4083914251451],[53.0408764992452,45.2590465358218],[53.2208655129177,46.2346459010599],[53.0427368508078,46.8530060898645],[52.0420227394756,46.8046369492392],[51.1919454282743,47.0487047389539],[50.0340832863425,46.6089899765822],[49.10116,46.3993300000001],[48.5932410011805,46.5610342474155],[48.6947335142017,47.0756281601779],[48.0572530454493,47.7437527532795],[47.3152311541702,47.715847479842],[46.4664457537763,48.3941523301049],[47.0436715024765,49.1520388860976],[46.7515963071627,49.3560057643538],[47.5494804217493,50.4546983913111],[48.5778414243575,49.8747596299157],[48.702381626181,50.6051284857128],[50.7666483905121,51.6927623561599],[52.328723585831,51.7186522487381],[54.5328784523762,51.0262397324593],[55.7169405454798,50.6217166204785],[56.7779610532966,51.043551337277],[58.3632906431467,51.0636534694386],[59.6422823423706,50.5454422064157],[59.9328072447155,50.8421941188519],[61.3374243508409,50.7990701361043],[61.5880033710242,51.2726587998432],[59.9675338072155,51.9604204372157],[60.9272685077403,52.447548326215],[60.7399931171146,52.7199864772577],[61.6999861998006,52.9799964463343],[60.9780664406832,53.6649933945791],[61.4365914244091,54.0062645534348],[65.1785335630959,54.3542278102721],[65.666875848254,54.6012669948435],[68.1691003762588,54.9703917507043],[69.0681669452729,55.3852501491435],[70.8652665546551,55.1697335882701],[71.1801310566094,54.1332852240083],[72.2241500182022,54.3766553818867],[73.5085160663844,54.0356167669766],[73.4256787454204,53.4898102891097],[74.38484500519,53.5468610703601],[76.8911002949134,54.4905244004419],[76.5251794778547,54.1770034857271],[77.8009155618442,53.4044149847476],[80.0355595234417,50.8647508815472],[80.5684468932355,51.3883364935285],[81.9459855488399,50.8121959499064],[83.3830037780124,51.0691828476939],[83.9351147806188,50.8892455104536],[84.4163773945531,50.3113996445658],[85.115559523462,50.1173029648776],[85.5412699726825,49.6928585882482],[86.8293567239896,49.8266747096682],[87.3599703307627,49.2149807806292],[86.5987764831034,48.5491816269806],[85.7682328633083,48.455750637397],[85.7204838398707,47.4529694687731],[85.1642903991134,47.0009557155161],[83.1804838398604,47.3300312363509],[82.4589258157691,45.5396495631665],[81.9470707539181,45.3170274928532],[79.9661063984414,44.9175169948046],[80.8662064961014,43.180362046881],[80.1801501809943,42.9200678574269],[80.2599902688853,42.3499992945991],[79.6436454609401,42.4966828476597],[79.1421773619798,42.8560924342496],[77.6583919615832,42.9606855332083],[76.0003536314986,42.9880223658906],[75.6369649596221,42.8778998886768],[74.2128658385226,43.2983393418035],[73.6453035826609,43.0912718776099],[73.4897575214623,42.5008944768913],[71.8446382994506,42.8453954127652],[71.1862805520523,42.7042929143922],[70.9623148944993,42.2661542832055]]]}},{"type":"Feature","properties":{"admin":"Kenya","name":"Kenya","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[40.993,-0.85829],[41.58513,-1.68325],[40.88477,-2.08255],[40.63785,-2.49979],[40.26304,-2.57309],[40.12119,-3.27768],[39.80006,-3.68116],[39.60489,-4.34653],[39.20222,-4.67677],[37.7669,-3.67712],[37.69869,-3.09699],[34.07262,-1.05982],[33.9037111971045,-0.95],[33.8935689696669,0.109813537861896],[34.18,0.515],[34.6721,1.17694],[35.03599,1.90584],[34.59607,3.05374],[34.47913,3.5556],[34.005,4.24988494736205],[34.6201962678539,4.84712274208199],[35.298007118233,5.506],[35.8174476623535,5.3382320827908],[35.8174476623535,4.77696566346189],[36.1590786328556,4.44786412767277],[36.8550932380081,4.44786412767277],[38.120915,3.598605],[38.43697,3.58851],[38.67114,3.61607],[38.89251,3.50074],[39.5593842587658,3.42206],[39.85494,3.83879],[40.76848,4.25702],[41.1718,3.91909],[41.855083092644,3.91891192048373],[40.98105,2.78452],[40.993,-0.85829]]]}},{"type":"Feature","properties":{"admin":"Kyrgyzstan","name":"Kyrgyzstan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[70.9623148944991,42.2661542832055],[71.1862805520521,42.7042929143921],[71.8446382994506,42.8453954127651],[73.4897575214623,42.5008944768913],[73.6453035826609,43.0912718776098],[74.2128658385226,43.2983393418034],[75.636964959622,42.8778998886767],[76.0003536314984,42.9880223658907],[77.6583919615832,42.9606855332083],[79.1421773619798,42.8560924342495],[79.6436454609401,42.4966828476595],[80.2599902688853,42.349999294599],[80.1194303730514,42.1239407415382],[78.5436609231753,41.5822425400387],[78.187196893226,41.1853158636048],[76.9044844908771,41.0664859075496],[76.5263680357974,40.4279460719351],[75.4678279967307,40.5620722519487],[74.776862420556,40.3664252792916],[73.8222436868283,39.8939734970632],[73.9600130553184,39.6600084498617],[73.6753792662548,39.4312368841056],[71.784693637992,39.2794632024644],[70.5491618183256,39.6041979029865],[69.4648869159775,39.5266832545487],[69.5596098163685,40.103211371413],[70.6480188333,39.9357538925712],[71.0141980325202,40.2443655462182],[71.7748751158566,40.1458444280538],[73.0554171080492,40.8660330266895],[71.8701147805705,41.3929000921213],[71.1578585142916,41.1435871445291],[70.4200224140282,41.5199982773431],[71.2592476744482,42.1677106796895],[70.9623148944991,42.2661542832055]]]}},{"type":"Feature","properties":{"admin":"Cambodia","name":"Cambodia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[103.49727990114,10.6325554468159],[103.090689731867,11.1536605900472],[102.584932489027,12.1865949569133],[102.348099399833,13.3942473413582],[102.988422072362,14.2257211369345],[104.281418084737,14.4167430689014],[105.218776890079,14.2732117782107],[106.043946160916,13.88109100998],[106.496373325631,14.5705838078343],[107.382727492301,14.202440904187],[107.614547967562,13.5355307072442],[107.491403029411,12.3372059188279],[105.810523716253,11.5676146509212],[106.249670037869,10.9618118351636],[105.199914992292,10.8893098006581],[104.334334751403,10.4865436873752],[103.49727990114,10.6325554468159]]]}},{"type":"Feature","properties":{"admin":"South Korea","name":"Korea","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[128.349716424677,38.6122429469278],[129.21291954968,37.4323924830559],[129.460449660358,36.7841891546028],[129.468304478066,35.6321406113039],[129.09137658093,35.0824842392314],[128.185850457879,34.8903771021864],[127.386519403188,34.4756737330441],[126.485747511909,34.3900458847365],[126.373919712429,34.9345604517959],[126.559231398628,35.6845405136479],[126.117397902532,36.7254847275193],[126.860143263863,36.8939240585746],[126.174758742376,37.749685777328],[126.237338901882,37.8403779160003],[126.683719924019,37.8047728541512],[127.073308547067,38.2561148137884],[127.780035435091,38.3045356308459],[128.205745884311,38.3703972438019],[128.349716424677,38.6122429469278]]]}},{"type":"Feature","properties":{"admin":"Kosovo","name":"Kosovo","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.76216,42.05186],[20.7173100000001,41.84711],[20.59023,41.85541],[20.52295,42.21787],[20.28374,42.32025],[20.0707,42.58863],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.0686850000001],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.5766359894021,42.2452243970619],[21.3527000000001,42.2068],[20.76216,42.05186]]]}},{"type":"Feature","properties":{"admin":"Kuwait","name":"Kuwait","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[47.9745190773499,29.9758192001485],[48.1831885109445,29.5344766301598],[48.0939433123764,29.306299343375],[48.4160941912839,28.5520042994267],[47.7088505389374,28.5260627304161],[47.4598218117228,29.0025194361472],[46.5687134132817,29.0990251734523],[47.302622104691,30.0590699325707],[47.9745190773499,29.9758192001485]]]}},{"type":"Feature","properties":{"admin":"Laos","name":"Lao PDR","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[105.218776890079,14.2732117782107],[105.544338413518,14.7239336206604],[105.58903852745,15.5703160669529],[104.779320509869,16.4418649357714],[104.716947056092,17.4288589543301],[103.956476678485,18.2409540877969],[103.200192091894,18.3096320663128],[102.998705682388,17.9616946476916],[102.413004998792,17.9327816838243],[102.113591750092,18.1091016708042],[101.059547560635,17.5124972599945],[101.035931431078,18.4089283309616],[101.282014601652,19.4625849471768],[100.606293573003,19.5083444279712],[100.548881056727,20.1092379826611],[100.115987583418,20.4178496363082],[100.32910119019,20.7861217310362],[101.180005324308,21.436572984294],[101.27002566936,21.2016519230952],[101.803119744883,21.1743667668451],[101.652017856861,22.3181987574095],[102.170435825614,22.4647531193893],[102.754896274835,21.6751372339695],[103.203861118586,20.7665622014137],[104.435000441508,20.7587332219215],[104.822573683697,19.8866417505639],[104.183387892679,19.6246680770602],[103.896532017027,19.2651809758218],[105.094598423282,18.6669745956111],[105.925762160264,17.485315456609],[106.556007928496,16.6042839624648],[107.312705926546,15.9085383163032],[107.564525181104,15.2021731633056],[107.382727492301,14.202440904187],[106.496373325631,14.5705838078343],[106.043946160916,13.88109100998],[105.218776890079,14.2732117782107]]]}},{"type":"Feature","properties":{"admin":"Lebanon","name":"Lebanon","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.8211007016502,33.2774264592763],[35.5527966651908,33.264274807258],[35.4607092628467,33.0890400253563],[35.1260526873245,33.0909003769188],[35.4822066586801,33.9054501409194],[35.9795923194894,34.6100582952191],[35.9984025408436,34.6449140488],[36.4481942075121,34.5939352483441],[36.6117501157159,34.2017886418972],[36.0664604021721,33.8249124211925],[35.8211007016502,33.2774264592763]]]}},{"type":"Feature","properties":{"admin":"Liberia","name":"Liberia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-7.71215938966975,4.36456594483772],[-7.97410722495725,4.35575511313196],[-9.00479366701867,4.8324185245922],[-9.91342037600668,5.59356069581921],[-10.7653838769866,6.14071076092556],[-11.4387794661821,6.78591685630575],[-11.1998018050483,7.10584564862474],[-11.1467042708684,7.39670644777953],[-10.6955948551765,7.93946401614109],[-10.2300935530913,8.40620555260129],[-10.0165665348613,8.42850393313523],[-9.75534216962583,8.54105520266692],[-9.33727983238458,7.92853445071135],[-9.40334815106975,7.52690521893891],[-9.20878638349084,7.31392080324795],[-8.926064622422,7.30903738039638],[-8.72212358238212,7.71167430259851],[-8.4392984684487,7.68604279218174],[-8.48544552248535,7.39520783124307],[-8.38545162600057,6.91180064536874],[-8.60288021486862,6.46756419517166],[-8.31134762209402,6.19303314862108],[-7.99369259279588,6.12618968345154],[-7.57015255373169,5.7073521997259],[-7.53971513511176,5.31334524171652],[-7.63536821128403,5.18815908448946],[-7.71215938966975,4.36456594483772]]]}},{"type":"Feature","properties":{"admin":"Libya","name":"Libya","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[14.8513,22.8629500000001],[14.1438708838552,22.4912889673711],[13.5814245947905,23.0405060897693],[11.9995056494717,23.4716684025964],[11.560669386449,24.0979092473256],[10.771363559623,24.5625320500617],[10.3038468766784,24.379313259371],[9.94826134607802,24.9369536402326],[9.91069257980177,25.3654546167968],[9.31941084151822,26.0943248560575],[9.71628584151966,26.5122063257857],[9.62905602381107,27.140953477481],[9.75612837081678,27.6882585718842],[9.68388471847288,28.1441738957793],[9.85999799972347,28.9599897323711],[9.80563439295235,29.4246383733234],[9.48213992680542,30.3075560572462],[9.97001712407297,30.5393248560754],[10.0565751481617,30.9618313664935],[9.95022505050519,31.3760696477453],[10.6369014827995,31.7614208033457],[10.9447896663945,32.0818146835554],[11.4322534522038,32.3689031031528],[11.488787469131,33.1369957545232],[12.66331,32.79278],[13.08326,32.87882],[13.91868,32.71196],[15.24563,32.26508],[15.71394,31.37626],[16.61162,31.18218],[18.02109,30.76357],[19.08641,30.26639],[19.57404,30.52582],[20.05335,30.98576],[19.82033,31.7517900000001],[20.13397,32.2382],[20.85452,32.7068],[21.54298,32.8432],[22.89576,32.63858],[23.2368,32.19149],[23.6091300000001,32.18726],[23.9275,32.01667],[24.92114,31.89936],[25.16482,31.56915],[24.80287,31.08929],[24.95762,30.6616],[24.70007,30.04419],[25.0000000000001,29.2386545295336],[25.0000000000001,25.682499996361],[25.0000000000001,22],[25.0000000000001,20.00304],[23.8500000000001,20],[23.8376600000001,19.5804700000001],[19.84926,21.49509],[15.86085,23.40972],[14.8513,22.8629500000001]]]}},{"type":"Feature","properties":{"admin":"Sri Lanka","name":"Sri Lanka","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[81.7879590188914,7.52305532473316],[81.6373222187606,6.48177521405192],[81.2180196471443,6.19714142498829],[80.3483569681044,5.96836985923215],[79.8724687031285,6.76346344647493],[79.6951668639351,8.20084341067338],[80.1478007343796,9.82407766360955],[80.8388179869865,9.26842682539119],[81.3043192890718,8.56420624433369],[81.7879590188914,7.52305532473316]]]}},{"type":"Feature","properties":{"admin":"Lesotho","name":"Lesotho","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[28.9782625668572,-28.9555966122617],[29.3251664568326,-29.2573869768462],[29.018415154748,-29.7437655575774],[28.8483996925077,-30.0700505510682],[28.2910693702399,-30.2262167294543],[28.1072046241454,-30.5457321103149],[27.7493970069565,-30.6451058896122],[26.9992619158076,-29.87595387138],[27.5325110206275,-29.2427108700754],[28.0743384132078,-28.8514686011936],[28.5417000668555,-28.6475017229376],[28.9782625668572,-28.9555966122617]]]}},{"type":"Feature","properties":{"admin":"Lithuania","name":"Lithuania","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.7310986670927,54.3275369329933],[22.6510518734725,54.5827409938667],[22.7577637061553,54.8565744085814],[22.3157235043306,55.0152985703659],[21.2684489275035,55.1904816758353],[21.0558004086224,56.0310763617111],[22.2011568539395,56.3378018255795],[23.87826378754,56.2736713731053],[24.8606844418408,56.3725283880796],[25.0009342790809,56.1645307481048],[25.5330465023903,56.100296942766],[26.4943314958838,55.6151069199776],[26.5882792497904,55.1671756048717],[25.7684326514798,54.8469625921751],[25.536353794057,54.2824234076025],[24.450683628037,53.9057022161948],[23.4841276384498,53.9124976670411],[23.2439872575895,54.2205667181491],[22.7310986670927,54.3275369329933]]]}},{"type":"Feature","properties":{"admin":"Luxembourg","name":"Luxembourg","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[6.04307335778111,50.1280516627942],[6.24275109215699,49.9022256536787],[6.18632042809418,49.4638028021145],[5.8977592301764,49.442667141307],[5.67405195478483,49.5294835475575],[5.78241743330091,50.0903278672212],[6.04307335778111,50.1280516627942]]]}},{"type":"Feature","properties":{"admin":"Latvia","name":"Latvia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[21.0558004086224,56.0310763617111],[21.090423618258,56.7838727891229],[21.5818664893537,57.4118706325499],[22.5243412614929,57.7533743353508],[23.3184529965221,57.0062364772749],[24.1207296078534,57.0256926540328],[24.3128625831146,57.793423570377],[25.1645935401493,57.9701569688152],[25.6028096859844,57.8475287949866],[26.4635323422378,57.4763886582663],[27.2881848487515,57.4745283067038],[27.7700159034409,57.2442581244112],[27.8552820167225,56.7593264837843],[28.176709425578,56.1691299505788],[27.1024597510945,55.7833137070877],[26.4943314958838,55.6151069199776],[25.5330465023903,56.100296942766],[25.0009342790809,56.1645307481048],[24.8606844418408,56.3725283880796],[23.87826378754,56.2736713731053],[22.2011568539395,56.3378018255795],[21.0558004086224,56.0310763617111]]]}},{"type":"Feature","properties":{"admin":"Morocco","name":"Morocco","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-5.19386349122203,35.7551821965908],[-4.59100623210514,35.3307119817456],[-3.64005652507001,35.399855048152],[-2.60430579264411,35.1790933294011],[-2.16991370279862,35.1683963079167],[-1.79298580566166,34.5279186060913],[-1.73345455566141,33.9197128362321],[-1.3880492822226,32.8640150009414],[-1.1245511539662,32.6515215113572],[-1.30789913573787,32.262888902306],[-2.61660478352957,32.0943462183862],[-3.06898027181265,31.7244979924733],[-3.64749793132015,31.6372940129808],[-3.69044104655467,30.8969516057512],[-4.85964616537444,30.5011876490439],[-5.24212927898279,30.0004430201356],[-6.06063229005375,29.7316997340018],[-7.0592276676619,29.5792284205247],[-8.67411617678283,28.8412889673966],[-8.66558956545484,27.6564258895925],[-8.81780900794052,27.6564258895925],[-8.81782833498664,27.6564258895925],[-8.79488399904903,27.1206963160226],[-9.41303748212451,27.0884760604885],[-9.73534339032875,26.8609447291074],[-10.1894242008775,26.8609447291074],[-10.5512625797853,26.9908076034569],[-11.3925548974969,26.8834239771544],[-11.7182197738003,26.1040917017608],[-12.0307588363017,26.0308661972031],[-12.5009626937254,24.7701162785781],[-13.891110398809,23.6910090194594],[-14.2211677718572,22.3101630721883],[-14.6308326888509,21.8609398462749],[-14.7509545557134,21.5006000839038],[-17.0029617985611,21.4207341577967],[-17.0204284326758,21.4223102889816],[-16.9732478499932,21.885744533775],[-16.5891369287676,22.1582343612501],[-16.2619217594957,22.6793395044813],[-16.3264139469959,23.0177684595609],[-15.9826106429581,23.7233584660741],[-15.4260037907422,24.359133612561],[-15.0893318343607,24.520260728447],[-14.8246451481617,25.1035326197253],[-14.8009256657397,25.6362649602223],[-14.4399399479648,26.2544184432976],[-13.7738048975065,26.6188923202523],[-13.1399417790143,27.6401478134205],[-13.1216133699147,27.6541476717198],[-12.6188366357831,28.0381855331487],[-11.6889192366908,28.1486439071726],[-10.9009569971044,28.8321422388809],[-10.3995922510086,29.0985859237778],[-9.56481116376562,29.9335737167499],[-9.81471839032917,31.1777355006091],[-9.43479326011936,32.0380964218365],[-9.30069291832183,32.5646792668906],[-8.65747636558504,33.2402452662424],[-7.65417843263822,33.6970649277025],[-6.91254411460136,34.1104763860374],[-6.24434200685141,35.1458653834375],[-5.92999426921983,35.759988104794],[-5.19386349122203,35.7551821965908]]]}},{"type":"Feature","properties":{"admin":"Moldova","name":"Moldova","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[26.6193367855978,48.2207262233335],[26.8578235206248,48.3682107610945],[27.5225374691952,48.4671194525011],[28.2595467465418,48.1555622422134],[28.6708911475852,48.1181485052341],[29.122698195113,47.8490951605065],[29.0508679542273,47.5102269557525],[29.4151351254527,47.3466452093326],[29.5596741065731,46.9285828720913],[29.9088517595693,46.6743606634315],[29.8382100766263,46.5253258327017],[30.0246586443354,46.423936672545],[29.7599719581364,46.3499876979354],[29.1706539242799,46.3792623968287],[29.0721069678993,46.5176777207225],[28.8629724464141,46.4378893092638],[28.9337174822216,46.2588304713725],[28.6599874203716,45.9399868841316],[28.4852694027928,45.5969070501459],[28.233553501099,45.4882831894684],[28.0544429867754,45.9445860866056],[28.1600179379477,46.3715626084172],[28.128030226359,46.8104763860882],[27.5511662126848,47.4051170924708],[27.2338729184127,47.8267709417564],[26.9241760596876,48.123264472031],[26.6193367855978,48.2207262233335]]]}},{"type":"Feature","properties":{"admin":"Madagascar","name":"Madagascar","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[49.5435189145957,-12.4698328589406],[49.8089807472791,-12.8952849259996],[50.0565108579572,-13.555761407122],[50.2174312681141,-14.7587887508768],[50.4765368996255,-15.2265121395505],[50.3771114438959,-15.7060694312191],[50.2002746925932,-16.0002633602568],[49.8606055031387,-15.4142526180669],[49.6726066424609,-15.7102035458025],[49.8633443540501,-16.4510368791388],[49.7745642433727,-16.8750420060936],[49.4986120949341,-17.1060356584383],[49.4356185239703,-17.9530640601344],[49.0417924334739,-19.1187810197744],[48.548540887248,-20.4968881161341],[47.9307491391987,-22.3915011532511],[47.5477234230513,-23.7819589169285],[47.0957613462266,-24.9416297339904],[46.2824776548171,-25.1784628231841],[45.4095076841104,-25.6014344214931],[44.8335738462176,-25.3461011695389],[44.0397204933498,-24.9883452287823],[43.7637683449112,-24.46067717865],[43.6977775408744,-23.5741163062506],[43.3456543312376,-22.7769039852839],[43.254187046081,-22.0574130184841],[43.4332975604046,-21.3364751115802],[43.8936828956929,-21.1633073869701],[43.8963700701721,-20.8304594865782],[44.3743253924396,-20.0723662248564],[44.4643974139244,-19.435454196859],[44.2324219093662,-18.9619947242009],[44.0429761085842,-18.3313872209432],[43.9630843442609,-17.4099447567468],[44.3124687029863,-16.850495700755],[44.4465173683514,-16.2162191708045],[44.9449365578065,-16.1793738745804],[45.502731967965,-15.9743734676785],[45.8729936053363,-15.7934542782247],[46.3122432798172,-15.7800184058288],[46.8821826515643,-15.2101823869463],[47.7051298358124,-14.5943026668918],[48.0052148781312,-14.0912325985304],[47.8690474790422,-13.6638685034766],[48.2938277524814,-13.7840678849875],[48.8450602557388,-13.0891748999587],[48.863508742067,-12.4878679338104],[49.1946513201933,-12.040556735892],[49.5435189145957,-12.4698328589406]]]}},{"type":"Feature","properties":{"admin":"Mexico","name":"Mexico","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-97.1400083076707,25.8699974634784],[-97.5280724759665,24.9921440699203],[-97.7029455228422,24.2723430445267],[-97.776041836319,22.9325798609277],[-97.8723667061111,22.4442117375534],[-97.6990439522042,21.8986894800643],[-97.3889595202367,21.4110189885258],[-97.1893334622933,20.6354332544731],[-96.5255755277203,19.8909308944441],[-96.2921272448417,19.3203714055095],[-95.9008849759599,18.8280241968487],[-94.8390634834427,18.5627173934622],[-94.4257295397562,18.1443708358433],[-93.5486512926824,18.4238369816779],[-92.7861138577835,18.5248385685923],[-92.0373481920904,18.7045692001034],[-91.4079034085592,18.8760832788802],[-90.7718698799109,19.2841203882568],[-90.533589850613,19.8674181177513],[-90.4514759997012,20.7075218775204],[-90.2786183336849,20.9998554549955],[-89.6013211738515,21.2617257756345],[-88.5438663398628,21.4936754419766],[-87.6584165107577,21.458845526612],[-87.0518902249481,21.5435431991383],[-86.8119823880329,21.3315147974447],[-86.8459079658326,20.8498646102683],[-87.3832911852359,20.2554047713987],[-87.6210544502107,19.6465530461359],[-87.4367504544418,19.4724034693123],[-87.5865604316559,19.0401301131907],[-87.8371911282715,18.2598159855834],[-88.0906640286632,18.516647854074],[-88.3000310940936,18.49998220466],[-88.4901228502793,18.4868305526417],[-88.8483438789266,17.8831981470403],[-89.0298573473517,18.0015113387726],[-89.1509093899955,17.9554676376004],[-89.1430804105033,17.8083189966494],[-90.0679335192309,17.8193260767275],[-91.0015199450159,17.8175949162457],[-91.0022692532842,17.2546577010743],[-91.4539212715151,17.2521772323242],[-91.0816700915006,16.9184766707995],[-90.7118218655876,16.6874830184548],[-90.6008467272409,16.4707778996388],[-90.438866950222,16.4101097681281],[-90.4644726224226,16.0695620793247],[-91.7479601712559,16.0665648462518],[-92.2292486234063,15.2514466414959],[-92.087215949252,15.0645846623285],[-92.2032295397473,14.8301028508041],[-92.2277500068698,14.538828640191],[-93.3594638740618,15.6154295923437],[-93.8751688301185,15.9401642928659],[-94.6916564603301,16.2009752466429],[-95.250227016973,16.1283181828406],[-96.0533821276533,15.7520879175396],[-96.5574340482283,15.6535151229428],[-97.2635924954966,15.9170649276313],[-98.0130299548096,16.1073117131139],[-98.9476757474565,16.5660434025688],[-99.697397427147,16.7061640487282],[-100.829498867581,17.171071071842],[-101.666088629954,17.6490263941096],[-101.9185280017,17.916090196194],[-102.478132086989,17.9757506372751],[-103.500989549558,18.2922946232788],[-103.917527432047,18.7485716822],[-104.992009650475,19.3161339380617],[-105.493038499761,19.9467672795354],[-105.731396043708,20.4341018742641],[-105.397772996831,20.5317186548634],[-105.500660773524,20.8168950464661],[-105.270752326258,21.0762848983551],[-105.265817226974,21.4221035832523],[-105.603160976975,21.8711459416526],[-105.693413865973,22.2690803085162],[-106.028716396899,22.7737523462786],[-106.909980434988,23.7677743596289],[-107.915448778091,24.5489153101529],[-108.401904873471,25.1723139511059],[-109.260198737407,25.5806094426441],[-109.444089321717,25.8248839380877],[-109.291643846456,26.4429340682984],[-109.801457689232,26.6761756454479],[-110.391731737086,27.1621149765045],[-110.641018846462,27.8598760035255],[-111.178918830188,27.9412405461691],[-111.759606899852,28.4679525823039],[-112.22823462609,28.9544086776835],[-112.271823696729,29.2668443873201],[-112.809594489374,30.0211135930523],[-113.163810594519,30.7868808049694],[-113.148669399857,31.1709658879789],[-113.871881069782,31.5676083440352],[-114.205736660604,31.5240451116131],[-114.776451178835,31.7995321721611],[-114.936699795372,31.3934846054276],[-114.771231859173,30.9136172551653],[-114.673899298952,30.162681179316],[-114.330974494263,29.7504324407074],[-113.588875088335,29.061611436473],[-113.424053107541,28.8261736109512],[-113.271969367306,28.7547826197399],[-113.140039435664,28.411289374296],[-112.962298346796,28.4251903345825],[-112.761587083775,27.7802167831475],[-112.457910529412,27.5258137069748],[-112.244951951937,27.1717267929108],[-111.616489020619,26.6628172877005],[-111.284674648873,25.7325898300144],[-110.987819383572,25.2946062281246],[-110.710006883571,24.8260043401019],[-110.655048997829,24.2985946721311],[-110.172856208113,24.2655475936804],[-109.771847093529,23.8111825627542],[-109.409104377056,23.3646723495362],[-109.433392300233,23.1855876734287],[-109.854219326602,22.8182715926981],[-110.031391974714,22.8230775009012],[-110.295070970484,23.4309732121667],[-110.949501309028,24.000964260346],[-111.670568407013,24.4844231226525],[-112.182035895621,24.7384127873672],[-112.148988817171,25.470125230404],[-112.30071082238,26.0120042994166],[-112.777296719192,26.3219595403032],[-113.464670783322,26.7681855331434],[-113.596729906044,26.6394595403045],[-113.848936733844,26.9000637883524],[-114.46574662968,27.1420903589914],[-115.055142178185,27.7227267522229],[-114.982252570437,27.7982001815851],[-114.570365566855,27.7414852971449],[-114.199328782999,28.1150025497506],[-114.162018398885,28.5661119654423],[-114.931842210737,29.2794792750155],[-115.518653937627,29.5563615992354],[-115.88736528203,30.1807937688342],[-116.258350389453,30.8364643417536],[-116.721526252085,31.635743720012],[-117.12776,32.53534],[-115.99135,32.6123900000001],[-114.72139,32.72083],[-114.815,32.52528],[-113.30498,32.03914],[-111.02361,31.33472],[-109.035,31.3419400000001],[-108.24194,31.34222],[-108.24,31.7548537181664],[-106.50759,31.75452],[-106.1429,31.39995],[-105.63159,31.08383],[-105.03737,30.64402],[-104.70575,30.12173],[-104.45697,29.57196],[-103.94,29.27],[-103.11,28.97],[-102.48,29.76],[-101.6624,29.7793],[-100.9576,29.3807100000001],[-100.45584,28.6961200000001],[-100.11,28.1100000000001],[-99.52,27.54],[-99.3,26.84],[-99.0199999999999,26.37],[-98.24,26.06],[-97.5299999999999,25.84],[-97.1400083076707,25.8699974634784]]]}},{"type":"Feature","properties":{"admin":"Macedonia","name":"Macedonia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.59023,41.85541],[20.7173100000001,41.84711],[20.76216,42.05186],[21.3527000000001,42.2068],[21.5766359894021,42.2452243970619],[21.9170800000001,42.30364],[22.3805257504247,42.3202595078151],[22.8813737321973,41.9992971868504],[22.9523771501665,41.3379938828112],[22.76177,41.3048],[22.597308383889,41.1304871689432],[22.0553776384443,41.1498658310527],[21.674160597427,40.9312745224579],[21.0200403174764,40.8427269557259],[20.60518,41.08622],[20.46315,41.51509],[20.59023,41.85541]]]}},{"type":"Feature","properties":{"admin":"Mali","name":"Mali","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-12.1707502913803,14.6168342147355],[-11.8342075260795,14.7990969914289],[-11.6660782536179,15.3882083195563],[-11.3490950179395,15.4112560083585],[-10.6507913883794,15.1327458765214],[-10.0868464827782,15.3304857446863],[-9.7002550928027,15.2641073674074],[-9.55023840985939,15.4864968937754],[-5.53774430990845,15.5016897648693],[-5.31527726889193,16.2018537459918],[-5.48852250815044,16.325102037008],[-5.97112870932425,20.6408334416476],[-6.45378658693033,24.9565906845034],[-4.92333736817423,24.974574082941],[-1.55005489745761,22.7926659204974],[1.82322757325903,20.610809434486],[2.06099083823392,20.1422333846795],[2.68358849448643,19.8562301701601],[3.1466610042539,19.6935785995214],[3.1581331722227,19.05736420336],[4.26741946780004,19.155265204337],[4.2702099951438,16.8522274846012],[3.72342166506348,16.1842837590126],[3.63825890464648,15.5681198185805],[2.74999270998148,15.4095248478767],[1.38552819174686,15.3235611027592],[1.01578331869851,14.9681822778879],[0.374892205414682,14.9289081893461],[-0.26625729003058,14.9243089868721],[-0.515854458000348,15.1161577417557],[-1.06636349120566,14.9738150090078],[-2.00103512206877,14.5590082870009],[-2.19182451009038,14.2464175480674],[-2.96769446452058,13.7981503361515],[-3.10370683431276,13.5412667912286],[-3.52280270019986,13.3376616479986],[-4.00639075358723,13.4724854598481],[-4.28040503581488,13.2284435083497],[-4.4271661035238,12.5426455754043],[-5.22094194174312,11.7138589543072],[-5.19784257650865,11.3751457788501],[-5.470564947929,10.951269842976],[-5.40434159994697,10.3707368026091],[-5.81692623536529,10.2225546330122],[-6.05045203289227,10.0963607853554],[-6.20522294760643,10.5240607772191],[-6.49396501303727,10.4113028019583],[-6.66646094402755,10.4308106551484],[-6.85050655763506,10.1389938419962],[-7.62275916180481,10.1472362329468],[-7.89958980959237,10.2973821069708],[-8.02994361004862,10.2065349390017],[-8.33537716310974,10.4948119165419],[-8.28235714357828,10.7925973576238],[-8.40731075686003,10.9092569035228],[-8.62032101076713,10.8108908146552],[-8.58130530438677,11.1362456323648],[-8.37630489748491,11.3936459416106],[-8.78609900555946,11.8125609399847],[-8.90526485842453,12.0883580591264],[-9.12747351727958,12.3080604110153],[-9.32761633954601,12.3342862004035],[-9.56791174970321,12.1942430688925],[-9.89099280439201,12.060478623905],[-10.1652137923488,11.8440835636827],[-10.5932238428063,11.923975328006],[-10.8708296370782,12.1778874780721],[-11.0365559554383,12.2112446151165],[-11.2975736149445,12.0779710962358],[-11.4561685856483,12.0768342147253],[-11.5139428369506,12.4429875757294],[-11.4678991357785,12.754518947801],[-11.5533977930054,13.1412136906411],[-11.9277160303116,13.4220751001474],[-12.1248874577213,13.9947274845898],[-12.1707502913803,14.6168342147355]]]}},{"type":"Feature","properties":{"admin":"Myanmar","name":"Myanmar","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[99.5433093607593,20.1865976018021],[98.9596757344549,19.7529806584409],[98.2537239929156,19.70820302986],[97.7977828308044,18.6270803898818],[97.3758964375735,18.4454377303758],[97.8591227559349,17.5679460718437],[98.4937610209113,16.8378355982079],[98.9033484232567,16.1778242049761],[98.5373759297657,15.3084974227461],[98.1920740091914,15.1237025008704],[98.4308191263799,14.6220276961808],[99.0977551615387,13.8275025496933],[99.2120117533361,13.2692937280765],[99.1963537943516,12.8047484399887],[99.5872860046397,11.8927627629017],[99.038120558674,10.9605457625724],[98.553550653073,9.93295990644854],[98.4571741068487,10.6752660181051],[98.7645455261208,11.4412916121837],[98.4283386576298,12.0329867619257],[98.5095740091927,13.1223776310707],[98.1036039571077,13.6404597030129],[97.7777323750752,14.8372858748926],[97.5970715677828,16.1005679386998],[97.1645398294998,16.9287344426093],[96.505768670643,16.4272405054328],[95.3693522481124,15.7143899601826],[94.8084045755841,15.8034542912376],[94.1888041524045,16.037936102762],[94.5334859557913,17.2772403019857],[94.3248165221967,18.2135139022499],[93.5409883971936,19.36649262133],[93.6632548359962,19.726961574782],[93.0782776224522,19.855144965082],[92.3685535013556,20.6708832870253],[92.3032344909387,21.4754853378098],[92.652257114638,21.3240475529785],[92.6727209818256,22.0412389185412],[93.1661275573484,22.2784595809771],[93.0602942240146,22.7031106633356],[93.2863269388593,23.043658352139],[93.3251876159428,24.0785564234322],[94.1067419779251,23.8507408716735],[94.5526579121716,24.6752383488903],[94.6032491393854,25.1624954289704],[95.1551534362626,26.0013072779321],[95.1247676940749,26.5735720891323],[96.4193656758509,27.2645893417392],[97.1339990580153,27.08377350515],[97.0519885599681,27.6990589462331],[97.4025614766361,27.8825361190854],[97.32711388549,28.2615827499463],[97.9119877461694,28.3359451360143],[98.2462309102333,27.7472213811292],[98.6826900573705,27.5088121607506],[98.7120939473445,26.7435358749403],[98.6718380065891,25.9187025009135],[97.7246090026791,25.083637193293],[97.604719679762,23.897404690033],[98.6602624857557,24.06328603769],[98.8987492207828,23.1427220728425],[99.5319922220874,22.9490388046126],[99.2408988789872,22.1183143173046],[99.9834892110215,21.7429367131364],[100.416537713627,21.5588394230966],[101.150032993578,21.849984442629],[101.180005324308,21.436572984294],[100.32910119019,20.7861217310362],[100.115987583418,20.4178496363082],[99.5433093607593,20.1865976018021]]]}},{"type":"Feature","properties":{"admin":"Montenegro","name":"Montenegro","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[19.8016133968987,42.5000934921908],[19.7380513851796,42.6882473821656],[19.30449,42.19574],[19.3717700000001,41.87755],[19.16246,41.95502],[18.88214,42.28151],[18.45,42.48],[18.56,42.65],[18.70648,43.20011],[19.03165,43.43253],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.2137799702705],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.0707,42.58863],[19.8016133968987,42.5000934921908]]]}},{"type":"Feature","properties":{"admin":"Mongolia","name":"Mongolia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[87.7512642760767,49.2971979844055],[88.8055668476955,49.4705207383124],[90.7136674336407,50.3318118353211],[92.2347115417197,50.8021707220417],[93.1042191914627,50.4952902288764],[94.1475663594356,50.4805366074571],[94.8159493346987,50.0134333359708],[95.814027947984,49.9774665390957],[97.2597278177814,49.7260606959957],[98.2317615091915,50.4224006211287],[97.8257397806743,51.0109951849332],[98.8614905131003,52.0473660345467],[99.9817322123235,51.634006252644],[100.889480421963,51.5168557806383],[102.065222609467,51.2599205592831],[102.255908644624,50.5105606146187],[103.67654544476,50.0899661321951],[104.621552362082,50.2753294948261],[105.886591424587,50.4060191920922],[106.888804152455,50.2742959661802],[107.868175897251,49.7937051458658],[108.475167270951,49.2825477158507],[109.402449171997,49.2929605169575],[110.662010532679,49.1301280788059],[111.581230910287,49.3779682480777],[112.897739699354,49.543565375357],[114.362456496235,50.2483027207374],[114.96210981655,50.1402473008151],[115.485695428531,49.8051773138346],[116.678800897286,49.8885313991214],[116.191802199368,49.1345980901991],[115.485282017073,48.1353825954034],[115.742837355616,47.7265445013263],[116.308952671373,47.8534101426028],[117.295507440257,47.6977090521074],[118.064142694167,48.0667304551037],[118.866574334795,47.7470600449462],[119.772823927897,47.0480587835501],[119.663269891439,46.6926799586789],[118.874325799639,46.8054120957236],[117.421701287914,46.6727328558143],[116.717868280099,46.3882024196152],[115.9850964702,45.727235012386],[114.460331658996,45.3398167994938],[113.463906691544,44.8088931341271],[112.436062453259,45.0116456162243],[111.8733061056,45.1020793727351],[111.348376906379,44.4574417181101],[111.667737257943,44.0731757675877],[111.829587843881,43.7431183945395],[111.12968224492,43.4068340114001],[110.412103306115,42.871233628911],[109.243595819131,42.5194463160841],[107.744772576938,42.4815158147819],[106.129315627062,42.1343277044289],[104.964993931093,41.5974095729163],[104.522281935649,41.9083466660165],[103.312278273535,41.9074681666676],[101.83304039918,42.5148729518263],[100.845865513108,42.6638044296914],[99.51581749878,42.5246914739617],[97.451757440178,42.74888967546],[96.3493957865278,42.7256352809287],[95.7624548685567,43.3194491643946],[95.3068754414715,44.2413308782655],[94.6889286641253,44.3523318548284],[93.4807336771413,44.97547211362],[92.1338908223182,45.1150759954564],[90.9455395853343,45.2860733099103],[90.5857682637183,45.7197160914875],[90.970809360725,46.8881460638229],[90.2808256367639,47.6935490993079],[88.8542977233467,48.069081732773],[88.0138322285517,48.5994627956006],[87.7512642760767,49.2971979844055]]]}},{"type":"Feature","properties":{"admin":"Mozambique","name":"Mozambique","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[34.5599890479993,-11.5200200334159],[35.312397902169,-11.4391464168791],[36.5140816586843,-11.7209380021667],[36.7751509946228,-11.5945374487808],[37.4712842140266,-11.5687509090672],[37.8276448911114,-11.2687692196128],[38.4275565935877,-11.2852023250817],[39.5210299008838,-10.8968539364082],[40.3165885760172,-10.3170960425257],[40.478387485523,-10.76544076909],[40.4372530454187,-11.761710707245],[40.5608113950286,-12.639176527561],[40.5996203956797,-14.2019751929319],[40.775475294769,-14.6917644181942],[40.4772506040126,-15.406294447494],[40.0892639503652,-16.1007740210645],[39.452558628097,-16.7208912085669],[38.5383508644215,-17.101023044506],[37.4111328468389,-17.5863680965912],[36.2812793312094,-18.6596875952934],[35.8964966163641,-18.8422604305806],[35.1983996925331,-19.5528113745939],[34.78638349787,-19.7840117326677],[34.7018925310728,-20.497043145431],[35.1761271502154,-21.2543612606684],[35.3734277687057,-21.8408370907489],[35.3858482537054,-22.14],[35.5625455363691,-22.09],[35.5339347674043,-23.0707878557278],[35.3717741228724,-23.5353589820317],[35.6074703305556,-23.7065630022147],[35.4587455584196,-24.1226099585965],[35.0407348976107,-24.4783505184938],[34.2158240089355,-24.8163143856827],[33.013210076639,-25.3575733375077],[32.5746321957779,-25.7273182105561],[32.6603633969501,-26.1485844865994],[32.9159550310657,-26.2158672014435],[32.8301204770289,-26.7421916643362],[32.0716654802811,-26.7338200823049],[31.985779249812,-26.2917798804802],[31.8377779477281,-25.8433318010513],[31.7524084815819,-25.4842839494874],[31.9305888201242,-24.3694165992225],[31.6703979835346,-23.6589690080739],[31.1914091326213,-22.2515096981724],[32.244988234188,-21.1164885393137],[32.5086930681734,-20.3952922502483],[32.6597432797626,-20.3042900529823],[32.7727079607526,-19.7155921363133],[32.6119942563249,-19.4193828264163],[32.6548856951271,-18.6720899390435],[32.8498608741644,-17.9790573055772],[32.8476387875758,-16.7133981258846],[32.3282389666102,-16.3920740698938],[31.8520406430406,-16.3194170060914],[31.6364982439512,-16.0719902482779],[31.1730639991577,-15.8609436987979],[30.3389547055345,-15.8808391252302],[30.2742558123051,-15.5077869605152],[30.1794812354818,-14.7960991349915],[33.2140246925252,-13.9718600399362],[33.7897001482567,-14.4518307430631],[34.0648254737786,-14.3599500464481],[34.4596334164885,-14.6130095353814],[34.5176660499523,-15.0137085913726],[34.3072912940921,-15.4786414527026],[34.381291945134,-16.183559665596],[35.0338102556835,-16.8012997372131],[35.3390629412316,-16.1074402808301],[35.7719047381084,-15.8968588192407],[35.6868453305559,-14.6110458309543],[35.267956170398,-13.8878341610296],[34.9071513201362,-13.5654248999606],[34.5599890479993,-13.5799976538669],[34.280006137842,-12.2800253231325],[34.5599890479993,-11.5200200334159]]]}},{"type":"Feature","properties":{"admin":"Mauritania","name":"Mauritania","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-12.1707502913803,14.6168342147355],[-12.8306583317475,15.3036915145429],[-13.4357376774531,16.0393830428662],[-14.0995214502422,16.3043022730105],[-14.577347581429,16.5982636581028],[-15.1357372705588,16.5872824162408],[-15.6236661442587,16.3693370630498],[-16.1206900700419,16.4556625431934],[-16.4630981104079,16.1350361190385],[-16.5497078109291,16.673892116762],[-16.2705517236884,17.1669627954749],[-16.1463474186748,18.1084815536167],[-16.2568833073472,19.0967158065503],[-16.3776511296133,19.593817246982],[-16.2778381006415,20.0925206568147],[-16.5363236149655,20.5678663192515],[-17.0634232243426,20.9997521021308],[-16.845193650774,21.3333234725749],[-12.9291019352635,21.3270706242676],[-13.1187544417747,22.7712202010963],[-12.8742215641696,23.2848322616452],[-11.9372244938533,23.3745942245362],[-11.9694189111712,25.9333527694683],[-8.6872936670174,25.8810562199889],[-8.68439978680905,27.395744126896],[-4.92333736817423,24.974574082941],[-6.45378658693033,24.9565906845034],[-5.97112870932425,20.6408334416476],[-5.48852250815044,16.325102037008],[-5.31527726889193,16.2018537459918],[-5.53774430990845,15.5016897648693],[-9.55023840985939,15.4864968937754],[-9.7002550928027,15.2641073674074],[-10.0868464827782,15.3304857446863],[-10.6507913883794,15.1327458765214],[-11.3490950179395,15.4112560083585],[-11.6660782536179,15.3882083195563],[-11.8342075260795,14.7990969914289],[-12.1707502913803,14.6168342147355]]]}},{"type":"Feature","properties":{"admin":"Malawi","name":"Malawi","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[34.5599890479993,-11.5200200334159],[34.280006137842,-12.2800253231325],[34.5599890479993,-13.5799976538669],[34.9071513201362,-13.5654248999606],[35.267956170398,-13.8878341610296],[35.6868453305559,-14.6110458309543],[35.7719047381084,-15.8968588192407],[35.3390629412316,-16.1074402808301],[35.0338102556835,-16.8012997372131],[34.381291945134,-16.183559665596],[34.3072912940921,-15.4786414527026],[34.5176660499523,-15.0137085913726],[34.4596334164885,-14.6130095353814],[34.0648254737786,-14.3599500464481],[33.7897001482567,-14.4518307430631],[33.2140246925252,-13.9718600399362],[32.6881653175231,-13.7128577612893],[32.9917643572379,-12.7838705379783],[33.3064221534631,-12.4357780900602],[33.1142891782019,-11.6071981746923],[33.3153104998173,-10.7965499813297],[33.4856876970836,-10.5255587703911],[33.2313879737753,-9.6767216935648],[32.7593754412213,-9.23059905358906],[33.7397290382304,-9.41715097416272],[33.9408377240965,-9.69367384198029],[34.280006137842,-10.1599996883584],[34.5599890479993,-11.5200200334159]]]}},{"type":"Feature","properties":{"admin":"Malaysia","name":"Malaysia","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[101.075515578213,6.20486705161589],[101.154218784594,5.69138418214771],[101.814281854258,5.81080841717423],[102.141186964936,6.22163605389466],[102.371147088635,6.12820506431096],[102.961705356867,5.52449514406108],[103.381214634212,4.85500112550375],[103.438575474056,4.18160553630838],[103.332122023535,3.72669790284297],[103.429428745541,3.38286876058902],[103.502447544369,2.7910185815502],[103.85467410687,2.51545400635376],[104.247931756611,1.63114105875906],[104.228811476664,1.29304800048953],[103.519707472754,1.22633372640068],[102.573615350355,1.96711538330474],[101.390638462329,2.76081370687562],[101.273539666756,3.27029165284118],[100.695435418707,3.93913971599487],[100.557407668055,4.76728038168828],[100.196706170658,5.31249258058368],[100.306260207117,6.04056183514388],[100.085756870527,6.46448944745029],[100.259596388757,6.64282481528957],[101.075515578213,6.20486705161589]]],[[[118.618320754065,4.47820241944754],[117.88203494677,4.13755137777949],[117.015214471506,4.30609406169947],[115.865517205877,4.30655914959016],[115.519078403792,3.1692383894944],[115.134037306785,2.82148183838622],[114.621355422017,1.43068817789889],[113.80584964402,1.21754873291104],[112.859809198052,1.49779002522995],[112.380251906384,1.41012095784676],[111.79754845586,0.904441229654651],[111.159137811327,0.976478176269509],[110.514060907027,0.773131415200993],[109.830226678509,1.33813568766419],[109.663260125774,2.00646698649498],[110.396135288537,1.6637747257514],[111.168852980597,1.85063670491878],[111.370081007942,2.69730337158887],[111.796928338673,2.88589651123807],[112.995614862115,3.10239492432487],[113.712935418759,3.89350942628113],[114.204016554828,4.52587392823682],[114.659595981914,4.00763682699781],[114.869557326315,4.34831370688195],[115.347460972151,4.31663605388701],[115.405700311344,4.95522756593382],[115.45071048387,5.44772980389156],[116.220741001451,6.14319122967562],[116.72510298062,6.924771429874],[117.1296260926,6.92805288332457],[117.643393182446,6.42216644940331],[117.689075148592,5.98749013918018],[118.347691278152,5.70869578696546],[119.18190392464,5.40783559816225],[119.110693800942,5.01612824138986],[118.439727004064,4.96651886638962],[118.618320754065,4.47820241944754]]]]}},{"type":"Feature","properties":{"admin":"Namibia","name":"Namibia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[16.3449768408952,-28.5767050106977],[15.6018180681058,-27.8212472470228],[15.2104724463595,-27.090955905874],[14.9897107276085,-26.1173719214952],[14.7432141455763,-25.3929200171954],[14.4081441585958,-23.8530140113298],[14.3857165869811,-22.6566529273407],[14.2577140641942,-22.1112081845],[13.8686422054687,-21.69903696054],[13.3524979997374,-20.8728341610575],[12.8268453304645,-19.6731657854017],[12.6085640804636,-19.0453488094877],[11.7949186540281,-18.0691293270619],[11.7341988460851,-17.3018893368245],[12.2154614600194,-17.1116683895581],[12.8140812516884,-16.9413428687241],[13.46236209479,-16.9712118465888],[14.058501417709,-17.4233806291427],[14.209706658595,-17.3531006812257],[18.2633093604342,-17.309950860262],[18.9561869646036,-17.7890947404723],[21.3771761410456,-17.9306364885197],[23.2150484555061,-17.523116143466],[24.0338615251708,-17.2958431942463],[24.6823490740015,-17.3534107398195],[25.0769503109823,-17.5788233374766],[25.0844433936646,-17.6618156877374],[24.5207051937925,-17.8871249325299],[24.2173645362392,-17.8893470191185],[23.5790055681377,-18.2812610816201],[23.1968583513393,-17.8690381812278],[21.655040317479,-18.2191460100052],[20.9106413103145,-18.252218926672],[20.8811340674759,-21.8143270809831],[19.8954577979407,-21.8491569963479],[19.8957678565344,-24.7677902157606],[19.8947343278886,-28.4611048316608],[19.0021273129111,-28.9724431291889],[18.4648991228047,-29.0454619280173],[17.8361519711095,-28.8563778622613],[17.3874971859515,-28.7835140927298],[17.2189286638154,-28.3559432919468],[16.8240173682409,-28.0821615536645],[16.3449768408952,-28.5767050106977]]]}},{"type":"Feature","properties":{"admin":"New Caledonia","name":"New Caledonia","continent":"Australia"},"geometry":{"type":"Polygon","coordinates":[[[165.779989862326,-21.0800049781156],[166.599991489934,-21.7000188127535],[167.120011428087,-22.1599907365835],[166.740034621445,-22.3999760881469],[166.189732293969,-22.1297083472604],[165.474375441752,-21.6796066219982],[164.829815301776,-21.1498198381419],[164.167995233414,-20.4447465959516],[164.029605747736,-20.1056458472523],[164.459967075863,-20.1200118954295],[165.020036249042,-20.4599911434777],[165.460009393575,-20.8000220679583],[165.779989862326,-21.0800049781156]]]}},{"type":"Feature","properties":{"admin":"Niger","name":"Niger","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[2.15447350424995,11.9401500513134],[2.17710778159392,12.6250178084775],[1.02410322429762,12.8518256698066],[0.993045688490156,13.3357496200039],[0.429927605805517,13.9887330184439],[0.295646396495215,14.4442349308807],[0.374892205414767,14.9289081893461],[1.01578331869848,14.968182277888],[1.38552819174697,15.3235611027592],[2.74999270998154,15.4095248478768],[3.63825890464659,15.5681198185804],[3.7234216650636,16.1842837590127],[4.27020999514389,16.8522274846013],[4.2674194678001,19.1552652043371],[5.67756595218071,19.6012069767998],[8.57289310062987,21.5656607121592],[11.9995056494717,23.4716684025964],[13.5814245947905,23.0405060897693],[14.1438708838552,22.4912889673711],[14.8513,22.8629500000001],[15.0968876481818,21.3085187850749],[15.4710766944073,21.048457139566],[15.4871480648501,20.7304145370256],[15.9032466976643,20.3876189234175],[15.6857405941478,19.9571800806424],[15.3004411149797,17.927949937405],[15.2477311540418,16.6273058130508],[13.9722017757817,15.6843659530211],[13.5403935075508,14.3671336939012],[13.9566988460941,13.9966911890169],[13.9544767595056,13.3534487980638],[14.5957812842476,13.3304269474779],[14.4957873877629,12.8593962671374],[14.2135307145847,12.8020354272933],[14.1813362972669,12.4836569279432],[13.9953528174483,12.4615652531383],[13.3187016130186,13.556356309458],[13.0839872575488,13.5961471623225],[12.3020711605405,13.0371890324375],[11.5278031755115,13.3289800073736],[10.9895931331915,13.3873226994312],[10.7010319352738,13.246917832894],[10.1148144873547,13.2772518986495],[9.52492801274309,12.8511021997546],[9.01493330245444,12.8266592472804],[7.80467125817887,13.3435269230637],[7.33074669763005,13.0980380314612],[6.82044192874781,13.1150912541176],[6.44542605960572,13.4927684595227],[5.44305830244014,13.8659239771022],[4.36834354006601,13.7474815942894],[4.10794599774738,13.5312157251479],[3.96728274904893,12.9561087101716],[3.68063357912592,12.5529033472142],[3.61118045412559,11.660167141156],[2.84864301922659,12.2356358911582],[2.49016360841802,12.2330520695436],[2.15447350424995,11.9401500513134]]]}},{"type":"Feature","properties":{"admin":"Nigeria","name":"Nigeria","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[8.50028771325969,4.77198293702685],[7.46210818851594,4.41210826254624],[7.08259646976444,4.46468903240323],[6.6980721370806,4.24059418376952],[5.89817264163469,4.26245331462898],[5.36280480309088,4.88797068930596],[5.03357425295937,5.61180247641823],[4.32560713056068,6.27065114992347],[3.57418012860455,6.25830048260572],[2.69170169435625,6.25881724692863],[2.74906253420022,7.87073436119289],[2.72379275880951,8.50684540448971],[2.91230838381026,9.13760793704432],[3.2203515967021,9.4441525333997],[3.70543826662592,10.0632103540402],[3.6000700211828,10.3321861841194],[3.79711225751171,10.7347455916731],[3.57221642417747,11.3279393579515],[3.61118045412556,11.660167141156],[3.68063357912581,12.5529033472142],[3.96728274904885,12.9561087101716],[4.10794599774732,13.5312157251478],[4.36834354006606,13.7474815942893],[5.44305830244016,13.8659239771023],[6.44542605960564,13.4927684595227],[6.82044192874775,13.1150912541175],[7.33074669763002,13.0980380314612],[7.80467125817878,13.3435269230637],[9.01493330245446,12.8266592472804],[9.52492801274295,12.8511021997545],[10.1148144873547,13.2772518986494],[10.7010319352737,13.2469178328941],[10.9895931331915,13.3873226994311],[11.5278031755114,13.3289800073736],[12.3020711605405,13.0371890324375],[13.0839872575489,13.5961471623226],[13.3187016130186,13.5563563094578],[13.9953528174483,12.4615652531383],[14.1813362972668,12.4836569279431],[14.5771777686225,12.0853608260535],[14.468192172919,11.9047516951934],[14.4153788591167,11.5723688826921],[13.5729496598946,10.7985659855536],[13.3086763851539,10.1603620467489],[13.1675997249971,9.64062632897341],[12.955467970439,9.4177717147147],[12.7536715023392,8.71776276288899],[12.2188721045506,8.30582408287432],[12.0639461605396,7.7998084578723],[11.8393087093668,7.39704234458943],[11.7457743669185,6.98138296144975],[11.0587878760304,6.64442678469059],[10.4973751156114,7.05535777427556],[10.1182768083183,7.03876963950988],[9.5227059261544,6.45348236737212],[9.23316287602304,6.44449066815333],[8.75753299320863,5.47966583904791],[8.50028771325969,4.77198293702685]]]}},{"type":"Feature","properties":{"admin":"Nicaragua","name":"Nicaragua","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-85.7125404528073,11.0884449324948],[-86.0584883287852,11.4034386255299],[-86.5258499824329,11.8068765324326],[-86.7459915839963,12.1439619002725],[-87.1675162422011,12.4582579614717],[-87.6684934150547,12.9099099797026],[-87.5574666002756,13.0645517033361],[-87.3923862373192,12.9140182560698],[-87.3166544257955,12.984685777229],[-87.0057690091276,13.0257943791172],[-86.8805570136843,13.2542042098472],[-86.7338217841916,13.2630925562014],[-86.7550866360797,13.7548454858909],[-86.5207081774199,13.7784874536644],[-86.3121420966899,13.7713561060082],[-86.0962638007906,14.0381873641472],[-85.8012947252686,13.8360549992376],[-85.6986653307369,13.9600784367381],[-85.5144130114002,14.0790117456578],[-85.1653645494848,14.3543696151251],[-85.148750576503,14.5601968449436],[-85.0527874417369,14.5515410425347],[-84.9245006985724,14.7904928654523],[-84.8200367906944,14.8195866968327],[-84.6495820787796,14.6668053247618],[-84.4493359036486,14.6216142847225],[-84.2283416409524,14.7487641463767],[-83.9757214016936,14.7494359399965],[-83.6285849677729,14.8800739608303],[-83.4899887763661,15.0162671981355],[-83.1472190009741,14.9958291691641],[-83.2332344225239,14.8998660343981],[-83.2841615465476,14.6766238468972],[-83.1821264309873,14.3107030298384],[-83.4124999661444,13.9700778263866],[-83.5198319160147,13.5676992863459],[-83.5522072008455,13.1270543481931],[-83.4985153876943,12.8692923039212],[-83.473323126952,12.4190872257944],[-83.6261044990229,12.3208503280076],[-83.719613003255,11.8931244979277],[-83.6508575100907,11.6290320907001],[-83.8554703437504,11.3733112655038],[-83.8089357164715,11.1030435246173],[-83.6556117418616,10.9387641463614],[-83.8950544908859,10.7268390975324],[-84.1901785957048,10.7934500187567],[-84.355930752281,10.9992255721429],[-84.6730690172562,11.0826571720781],[-84.9030033027389,10.9523033716219],[-85.5618519762442,11.2171192489016],[-85.7125404528073,11.0884449324948]]]}},{"type":"Feature","properties":{"admin":"Netherlands","name":"Netherlands","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[6.07418257002092,53.5104033473781],[6.90513960127413,53.4821621771306],[7.0920532568739,53.1440432806449],[6.84286950036238,52.2284402532975],[6.58939659997083,51.8520291204834],[5.98865807457781,51.851615709025],[6.15665815595878,50.8037210150106],[5.60697594567,51.0372984889698],[4.97399132652691,51.4750237086981],[4.04707116050753,51.2672586126686],[3.31497114422854,51.3457551133199],[3.83028852704314,51.6205445420319],[4.70599734866118,53.0917984075978],[6.07418257002092,53.5104033473781]]]}},{"type":"Feature","properties":{"admin":"Norway","name":"Norway","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[28.1655473162029,71.1854743516805],[31.2934184099655,70.4537877468599],[30.0054350115228,70.1862588568849],[31.1010787289751,69.5580801459449],[29.3995805193329,69.1569160020631],[28.5919295590432,69.0647769232867],[29.015572950972,69.766491197378],[27.7322921078679,70.1641930202963],[26.1796220232263,69.8252989773261],[25.6892126807764,69.092113755969],[24.7356791521267,68.6495567898214],[23.6620495948308,68.8912474636505],[22.3562378272474,68.8417414415149],[21.2449361508107,69.3704430202931],[20.6455928890896,69.1062472602009],[20.0252689958579,69.0651386583127],[19.8785596045813,68.4071943223726],[17.9938684424644,68.5673912624773],[17.7291817562653,68.0105518663162],[16.7688786149855,68.0139366726314],[16.1087121924568,67.3024555528369],[15.1084114925831,66.1938668890954],[13.5556897315091,64.7870276963815],[13.9199052263022,64.4454206407161],[13.5719161312488,64.0491140814697],[12.5799353369739,64.0662189805583],[11.9305692887942,63.128317572677],[11.9920642432215,61.8003624538566],[12.6311466813752,61.2935716823701],[12.3003658382749,60.11793284773],[11.4682719255112,59.432393296946],[11.0273686051969,58.8561494004594],[10.3565568376161,59.4698070339254],[8.38200035974364,58.3132884792333],[7.0487484066133,58.0788841823573],[5.66583540205042,58.5881554225937],[5.30823449059073,59.6632319199938],[4.99207807782901,61.9709980332843],[5.91290042483789,62.6144729681827],[8.55341108565577,63.4540082871965],[10.5277091813668,64.4860383164975],[12.3583467953064,65.8797258571932],[14.7611458675816,67.8106415879951],[16.435927361729,68.5632054714617],[19.1840283545785,69.8174441596178],[21.3784163754206,70.255169379346],[23.0237423031616,70.2020718451663],[24.5465434099385,71.0304967312372],[26.3700496762218,70.9862617051954],[28.1655473162029,71.1854743516805]]],[[[24.72412,77.85385],[22.49032,77.44493],[20.72601,77.67704],[21.41611,77.93504],[20.8119,78.25463],[22.88426,78.45494],[23.28134,78.07954],[24.72412,77.85385]]],[[[18.25183,79.70175],[21.54383,78.95611],[19.02737,78.5626],[18.47172,77.82669],[17.59441,77.63796],[17.1182,76.80941],[15.91315,76.77045],[13.76259,77.38035],[14.66956,77.73565],[13.1706,78.02493],[11.22231,78.8693],[10.44453,79.65239],[13.17077,80.01046],[13.71852,79.66039],[15.14282,79.67431],[15.52255,80.01608],[16.99085,80.05086],[18.25183,79.70175]]],[[[25.4476253598119,80.4073403998945],[27.4075057309135,80.0564057482005],[25.9246505062982,79.5178339708545],[23.0244657732136,79.4000117052291],[20.0751884294519,79.5668232286672],[19.8972664730709,79.8423619656475],[18.4622636247579,79.8598802761944],[17.3680151709775,80.318896186027],[20.4559920590107,80.5981556261322],[21.9079447771154,80.3576793484621],[22.9192525570674,80.6571442735935],[25.4476253598119,80.4073403998945]]]]}},{"type":"Feature","properties":{"admin":"Nepal","name":"Nepal","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[88.1204407083698,27.8765416529396],[88.0431327656612,27.4458185897868],[88.1748043151409,26.8104051783259],[88.0602376647498,26.4146153834025],[87.2274719583663,26.3978980575561],[86.0243929381792,26.6309846054086],[85.2517785989834,26.7261984319063],[84.6750179381738,27.2349012313875],[83.3042488951995,27.3645057235756],[81.999987420585,27.92547923432],[81.057202589852,28.416095282499],[80.0884245136763,28.7944701197401],[80.4767212259174,29.7298652206553],[81.1112561380293,30.1834809433134],[81.5258044778747,30.4227169866086],[82.3275126484509,30.1152680526881],[83.3371151061372,29.4637315943522],[83.8989929544467,29.3202261418777],[84.2345797057501,28.8398937037247],[85.011638218123,28.6427739527473],[85.8233199401315,28.2035759546987],[86.9545170430006,27.9742617864035],[88.1204407083698,27.8765416529396]]]}},{"type":"Feature","properties":{"admin":"New Zealand","name":"New Zealand","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[173.020374790741,-40.9190524228564],[173.247234328502,-41.3319987933008],[173.958405389703,-40.9267005348356],[174.247586704808,-41.3491553688217],[174.248516880589,-41.7700082334068],[173.876446568088,-42.2331840960388],[173.222739699596,-42.9700383440886],[172.711246372771,-43.3722876930485],[173.08011274647,-43.8533436012536],[172.308583612352,-43.8656942685713],[171.452925246464,-44.2425188128437],[171.185137974327,-44.8971041806849],[170.616697219117,-45.9089287249597],[169.831422154009,-46.3557748349876],[169.332331170934,-46.6412354469679],[168.411353794629,-46.6199447568636],[167.763744745147,-46.2901974424092],[166.676886021184,-46.2199174944922],[166.509144321965,-45.8527047666262],[167.046424188503,-45.1109412575087],[168.303763462597,-44.1239730771661],[168.949408807652,-43.9358191871914],[169.667814569373,-43.5553256162263],[170.524919875366,-43.0316883278128],[171.125089960004,-42.5127535947378],[171.569713983443,-41.7674244117921],[171.948708937872,-41.5144165992911],[172.097227004279,-40.9561044248097],[172.798579543344,-40.4939620908235],[173.020374790741,-40.9190524228564]]],[[[174.612008905331,-36.1563973935405],[175.336615838927,-37.2090979957583],[175.357596470438,-36.5261939430211],[175.808886753642,-36.7989421526577],[175.958490025127,-37.5553817685461],[176.763195428777,-37.8812533505787],[177.438813104561,-37.9612484677665],[178.010354445709,-37.5798247210201],[178.517093540763,-37.6953732236248],[178.274731073314,-38.5828125953731],[177.970460239979,-39.166342868813],[177.206992629299,-39.1457756487608],[176.939980503647,-39.4497364235016],[177.03294640534,-39.8799427223315],[176.885823602605,-40.0659778785822],[176.508017206119,-40.6048080380896],[176.01244022044,-41.2896241188215],[175.239567499083,-41.6883077939532],[175.067898391009,-41.4258948707751],[174.650972935278,-41.2818209775454],[175.227630243224,-40.4592355283234],[174.90015669179,-39.9089332008472],[173.824046665744,-39.5088542620435],[173.852261997775,-39.1466024716775],[174.57480187408,-38.7976832008428],[174.743473749081,-38.0278077125584],[174.697016636451,-37.381128838858],[174.292028436579,-36.7110922177614],[174.319003534236,-36.5348239072139],[173.840996535536,-36.1219808896341],[173.05417117746,-35.2371253395003],[172.636005487354,-34.5291065406694],[173.007042271209,-34.4506617164503],[173.551298456107,-35.006183363588],[174.329390497126,-35.2654957008286],[174.612008905331,-36.1563973935405]]]]}},{"type":"Feature","properties":{"admin":"Oman","name":"Oman","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[58.8611413918466,21.1140345321443],[58.487985874267,20.4289859074671],[58.0343184751766,20.4814374862433],[57.8263725116341,20.2430024276486],[57.6657621600709,19.7360049504331],[57.7887003924934,19.0675702987376],[57.6943909035607,18.9447095809638],[57.2342639504338,18.9479910344143],[56.609650913322,18.5742670760795],[56.5121891620195,18.0871133488639],[56.283520949128,17.8760667993839],[55.6614917336307,17.8841283228215],[55.2699394061552,17.6323090682632],[55.2749003436551,17.2283543970377],[54.7910022316741,16.9506969263334],[54.2392529640938,17.04498057705],[53.5705082538046,16.7076626652647],[53.1085726255475,16.651051133689],[52.7821842791921,17.3497423364912],[52.0000098000222,19.0000033635161],[54.9999817238624,19.9999940047961],[55.6666593768599,22.0000011255723],[55.2083410988632,22.708329982997],[55.2344893736029,23.1109927434154],[55.5258410988645,23.5248692896409],[55.5286316262083,23.9336040308535],[55.9812138202205,24.1305429143179],[55.8041186867562,24.2696041936153],[55.8862325376681,24.9208305933575],[56.396847365144,24.9247321639955],[56.8451404152761,24.2416730819615],[57.4034525897574,23.8785944686788],[58.1369478697083,23.7479306096288],[58.7292114602054,23.5656678329354],[59.1805017434103,22.9923953313055],[59.450097690677,22.6602709009656],[59.8080603371629,22.5336119654182],[59.8061483091681,22.3105248072142],[59.4421911965364,21.7145405135921],[59.2824076678899,21.4338858098149],[58.8611413918466,21.1140345321443]]],[[[56.3914213397534,25.8959907089213],[56.2610417010809,25.7146064315767],[56.0708207538145,26.0554641789739],[56.3620174497793,26.3959343531289],[56.4856791522538,26.3091179468787],[56.3914213397534,25.8959907089213]]]]}},{"type":"Feature","properties":{"admin":"Pakistan","name":"Pakistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[75.1580277851409,37.1330309107891],[75.8968974140501,36.6668061386518],[76.1928483417857,35.8984034286878],[77.8374507994746,35.4940095077878],[76.871721632804,34.6535440129927],[75.7570609882683,34.5049225937213],[74.240202671205,34.7488870305713],[73.749948358052,34.3176988795278],[74.1042936542773,33.4414732935868],[74.4515592792787,32.7648996038055],[75.2586417988132,32.2711054550405],[74.405928989565,31.6926394719653],[74.4213802428203,30.9798147649312],[73.4506384622174,29.9764134791199],[72.8237516620847,28.961591701772],[71.7776656432003,27.9131802434345],[70.6164962096019,27.9891962753359],[69.5143929381131,26.9409656845114],[70.168926629522,26.4918716496788],[70.2828731627256,25.7222287053398],[70.8446993346028,25.2151020370435],[71.0432401874682,24.3565239527302],[68.8425993183188,24.3591336125609],[68.1766451353734,23.6919650334567],[67.4436666197455,23.944843654877],[67.1454419289891,24.6636111516246],[66.3728275897933,25.4251408960938],[64.5304077492911,25.2370386825514],[62.9057007180346,25.2184093287102],[61.4973629087842,25.0782370061185],[61.8741874530565,26.2399748804721],[63.3166317076196,26.7565324976617],[63.2338977395203,27.2170470240307],[62.7554256529299,27.378923448185],[62.727830438086,28.2596448837354],[61.7718681171186,28.6993338078908],[61.3693087095649,29.3032762720859],[60.8742484882088,29.8292389999526],[62.5498568052728,29.3185724960443],[63.5502608580112,29.4683307968262],[64.1480021503312,29.340819200146],[64.3504187356185,29.5600306259281],[65.0468620136161,29.4721806910319],[66.3464726093244,29.8879434270362],[66.381457553986,30.7388992375865],[66.9388912291185,31.3049112004793],[67.6833935891475,31.3031542017814],[67.7926892434448,31.5829304062096],[68.5569320006093,31.713310044882],[68.9266768736577,31.6201891138921],[69.3177641132426,31.9014122584244],[69.2625220071225,32.5019440780883],[69.6871472512649,33.1054989690412],[70.3235941913716,33.3585326197584],[69.9305432473596,34.0201201441751],[70.8818030129884,33.9888559026385],[71.1567733092135,34.3489114446321],[71.1150187519216,34.7331257187222],[71.6130762063507,35.1532034368229],[71.4987679381211,35.650563259416],[71.2623482603857,36.0743875188578],[71.8462919452839,36.5099423284299],[72.9200248554445,36.7200070256963],[74.0675517109178,36.8361756454884],[74.575892775373,37.0208413762835],[75.1580277851409,37.1330309107891]]]}},{"type":"Feature","properties":{"admin":"Panama","name":"Panama","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-77.8815714179452,7.22377126711478],[-78.2149360826601,7.51225495038416],[-78.4291607327261,8.05204112388893],[-78.1820957099386,8.31918244062177],[-78.4354652574657,8.38770538984079],[-78.6221205309039,8.71812449791503],[-79.1203071764137,8.99609202721302],[-79.5578773668452,8.93237498619715],[-79.76057817251,8.5845150822244],[-80.1644811673033,8.33331594485359],[-80.3826590644396,8.29840851484043],[-80.4806892564973,8.09030752200107],[-80.0036899482272,7.54752411542337],[-80.276670701809,7.41975413658171],[-80.4211580064971,7.27157196698476],[-80.8864009264208,7.22054149009654],[-81.0595428128147,7.8179210473906],[-81.1897157457579,7.64790558515034],[-81.5195147366447,7.70661001223391],[-81.7213112047445,8.10896271405843],[-82.1314412096289,8.17539276776964],[-82.3909344143825,8.29236237226229],[-82.8200813463504,8.29086375572582],[-82.8509580146448,8.07382274009995],[-82.9657830471974,8.22502798098598],[-82.9131764391242,8.42351715741907],[-82.8297706774052,8.62629547773237],[-82.8686571927048,8.80726634361852],[-82.7191831123005,8.92570872643149],[-82.9271549140591,9.07433014570291],[-82.9328909980436,9.47681203860817],[-82.5461962552035,9.56613475182467],[-82.1871225654234,9.20744863528678],[-82.207586432611,8.9955752628901],[-81.8085668606693,8.95061676679617],[-81.714154018872,9.03195547122358],[-81.4392870755115,8.78623403567572],[-80.9473016018768,8.85850352623591],[-80.5219012112501,9.11107208906243],[-79.914599778956,9.31276520429762],[-79.5733027818843,9.61161001224153],[-79.0211917792779,9.5529314233741],[-79.0584504869604,9.45456533450652],[-78.5008876207472,9.42045888919388],[-78.055927700498,9.2477304142583],[-77.7295135159264,8.94684438723887],[-77.3533607652739,8.67050466555807],[-77.4747228665113,8.52428620038822],[-77.2425664944401,7.93527822512544],[-77.431107957657,7.63806122479873],[-77.7534138658614,7.70983978925214],[-77.8815714179452,7.22377126711478]]]}},{"type":"Feature","properties":{"admin":"Peru","name":"Peru","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-69.590423753524,-17.5800118954193],[-69.8584435696058,-18.092693780187],[-70.3725723944777,-18.3479753557089],[-71.3752502102369,-17.7737985165139],[-71.4620407782711,-17.3634876441164],[-73.4445295885004,-16.359362888253],[-75.2378826565414,-15.2656828752278],[-76.0092050849299,-14.6492863908503],[-76.4234692043977,-13.8231869442324],[-76.2592415025742,-13.5350391577729],[-77.1061923896218,-12.2227161597208],[-78.0921528795346,-10.3777124976041],[-79.0369530911269,-8.38656788496589],[-79.4459203762848,-7.93083342858386],[-79.76057817251,-7.19434091556008],[-80.5374816555861,-6.54166757571372],[-81.2499963040264,-6.13683440513918],[-80.9263468085824,-5.69055673586656],[-81.4109425523994,-4.73676482505546],[-81.0996695624894,-4.0363941382037],[-80.3025605943872,-3.40485645916471],[-80.1840148587097,-3.82116179770804],[-80.4692946031769,-4.059286797709],[-80.4422419908721,-4.42572437909067],[-80.0289080471856,-4.34609099692889],[-79.6249792141762,-4.45419809328349],[-79.2052890693177,-4.95912851320739],[-78.6398972236123,-4.54778411216407],[-78.4506839667756,-3.87309661216138],[-77.8379048326586,-3.0030205216631],[-76.6353942532267,-2.60867766684382],[-75.544995693652,-1.56160979574588],[-75.2337227037419,-0.911416924649529],[-75.3732232327138,-0.15203175212045],[-75.1066245185201,-0.05720549886486],[-74.441600511356,-0.530820000819887],[-74.1223951890891,-1.00283253337385],[-73.6595035468346,-1.26049122478113],[-73.0703922187072,-2.30895435955095],[-72.3257865058136,-2.43421803142645],[-71.7747607082854,-2.16978972738894],[-71.4136457994298,-2.34280242270213],[-70.813475714792,-2.25686451580074],[-70.0477085028748,-2.7251563452297],[-70.6926820543097,-3.74287200278586],[-70.394043952095,-3.76659148520783],[-69.8936352199966,-4.29818694419433],[-70.7947688463023,-4.2512647436733],[-70.9288433498836,-4.40159148521037],[-71.7484057278165,-4.59398284263301],[-72.8919276597872,-5.27456145591698],[-72.9645072089412,-5.74125131594489],[-73.2197112698146,-6.08918873456608],[-73.1200274319236,-6.62993092206824],[-73.7244866604416,-6.91859547285064],[-73.7234014553635,-7.34099863040441],[-73.9872354804297,-7.52382984785306],[-73.5710593329671,-8.42444670983583],[-73.0153826565325,-9.03283334720806],[-73.2267134263902,-9.46221282312123],[-72.5630330064656,-9.52019378015272],[-72.1848907131698,-10.0535979142694],[-71.3024122789215,-10.0794361304154],[-70.4818938869912,-9.49011809655884],[-70.5486856757284,-11.0091468237785],[-70.0937522040469,-11.123971856331],[-69.5296781073649,-10.9517343075022],[-68.6650797186896,-12.5613001440972],[-68.88007951524,-12.8997290991767],[-68.9292238023495,-13.602683607643],[-68.9488866848366,-14.4536394181933],[-69.339534674747,-14.9531954891588],[-69.1603466457749,-15.323973890853],[-69.3897641669347,-15.6601290829117],[-68.9596353827533,-16.5006979305713],[-69.590423753524,-17.5800118954193]]]}},{"type":"Feature","properties":{"admin":"Philippines","name":"Philippines","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[126.376813592637,8.41470632571335],[126.478512811388,7.75035411216898],[126.537423944201,7.18938060142457],[126.196772902533,6.27429433840004],[125.831420526229,7.29371531822186],[125.363852166852,6.78648529706099],[125.683160841984,6.04965688722726],[125.396511672061,5.58100332277229],[124.219787632342,6.16135549562618],[123.938719517107,6.88513560630612],[124.243662144061,7.36061045982366],[123.610212437028,7.83352732994275],[123.296071405125,7.41887563723279],[122.825505812675,7.45737457929022],[122.085499302256,6.89942413983485],[121.919928013193,7.19211945233607],[122.312358840017,8.03496206301651],[122.94239790252,8.31623688398117],[123.487687616064,8.69300975182119],[123.84115441294,8.24032420494438],[124.60146976125,8.51415761965902],[124.764612257996,8.96040945071546],[125.471390822452,8.98699697512964],[125.412117954613,9.76033478437755],[126.222714471543,9.28607432701885],[126.306636997585,8.78248749433457],[126.376813592637,8.41470632571335]]],[[[123.982437778826,10.2787785913458],[123.623183221533,9.9500906437533],[123.309920688979,9.31826874433668],[122.995883009942,9.0221886255204],[122.380054966319,9.7133609074242],[122.586088901867,9.9810448266961],[122.837081333509,10.2611569279342],[122.947410516452,10.881868394408],[123.498849725438,10.9406244979239],[123.337774285985,10.2673839380254],[124.077935825701,11.2327255314537],[123.982437778826,10.2787785913458]]],[[[118.50458092659,9.31638255455809],[117.174274530101,8.36749990481466],[117.664477166821,9.06688873945293],[118.386913690262,9.68449961998922],[118.987342157061,10.3762920190805],[119.511496209798,11.3696680770272],[119.68967654834,10.5542914901099],[119.029458449379,10.0036532658239],[118.50458092659,9.31638255455809]]],[[[121.883547804859,11.891755072472],[122.483821242361,11.5821874048275],[123.120216506036,11.5836601831479],[123.100837843926,11.1659337427165],[122.637713657727,10.7413084985742],[122.00261030486,10.4410167505261],[121.967366978037,10.9056912296946],[122.038370396006,11.41584096928],[121.883547804859,11.891755072472]]],[[[125.502551711123,12.1626946069783],[125.783464797062,11.0461219344478],[125.011883986512,11.3114545760504],[125.032761265158,10.9758161483147],[125.27744917206,10.3587220321013],[124.801819289246,10.1346788598999],[124.760168084818,10.8379951033923],[124.459101190286,10.8899299178456],[124.302521600442,11.4953709985772],[124.891012811382,11.4155825871186],[124.877990350444,11.794189968305],[124.266761509296,12.5577609318497],[125.227116327008,12.5357209334772],[125.502551711123,12.1626946069783]]],[[[121.527393833503,13.0695901554845],[121.262190382982,12.2055602075644],[120.833896112147,12.7044961613424],[120.323436313967,13.4664134790539],[121.180128208502,13.4296973739104],[121.527393833503,13.0695901554845]]],[[[121.321308221524,18.504064642811],[121.937601353036,18.2185523543984],[122.246006300954,18.4789498967171],[122.336956821788,18.2248827173542],[122.174279412933,17.8102827010764],[122.515653924653,17.093504746972],[122.252310825694,16.2624443628541],[121.662786086108,15.9310175643501],[121.505069614753,15.1248135441646],[121.728828566577,14.3283763696822],[122.258925409027,14.218202216036],[122.701275669446,14.3365412459844],[123.95029503794,13.7821306421411],[123.855107049659,13.2377711043785],[124.181288690285,12.9975273706535],[124.077419061378,12.5366769474746],[123.298035109552,13.027525539599],[122.92865197153,13.5529198267104],[122.671355015149,13.1858362899251],[122.034649692881,13.7844819198103],[121.126384718919,13.6366873234556],[120.628637323083,13.8576557479356],[120.679383579594,14.2710155298383],[120.991819289231,14.5253927677951],[120.693336216313,14.7566706405173],[120.564145135583,14.3962792017138],[120.070428501466,14.9708694523671],[119.920928582846,15.4063467472907],[119.883773228028,16.36370433193],[120.286487664879,16.0346288110953],[120.390047235192,17.5990811222995],[120.715867140792,18.5052273625375],[121.321308221524,18.504064642811]]]]}},{"type":"Feature","properties":{"admin":"Papua New Guinea","name":"Papua New Guinea","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[155.880025669578,-6.81999684003776],[155.599991082989,-6.91999073652249],[155.166994256815,-6.5359314917293],[154.729191522438,-5.90082813886221],[154.51411421124,-5.13911752688001],[154.652503696917,-5.04243092206184],[154.759990676084,-5.33998381919849],[155.062917922179,-5.56679168052749],[155.547746209942,-6.20065479901966],[156.019965448225,-6.54001392988039],[155.880025669578,-6.81999684003776]]],[[[151.982795851854,-5.47806324628234],[151.459106887009,-5.56028045005874],[151.301390415654,-5.8407284481067],[150.754447056277,-6.08376270917539],[150.241196730754,-6.31775359459298],[149.709963006793,-6.31651336021805],[148.89006473205,-6.02604013430543],[148.318936802361,-5.74714242922613],[148.401825799757,-5.43775562909472],[149.298411900021,-5.58374155031922],[149.845561965127,-5.50550343182934],[149.99625044169,-5.02610116945767],[150.139755894165,-5.00134815838979],[150.236907586873,-5.53222014732428],[150.807467075808,-5.45584238039689],[151.089672072554,-5.11369272219237],[151.647880894171,-4.75707366294617],[151.537861769822,-4.16780730552189],[152.136791620084,-4.14879037843852],[152.338743117481,-4.31296640382976],[152.318692661752,-4.86766122805075],[151.982795851854,-5.47806324628234]]],[[[147.191873814075,-7.38802418378998],[148.084635858349,-8.04410816816761],[148.734105259394,-9.10466358809376],[149.306835158484,-9.07143564213007],[149.266630894161,-9.51440601973603],[150.038728469034,-9.6843181291117],[149.738798456012,-9.872937106977],[150.801627638959,-10.2936866186974],[150.690574985964,-10.5827129045059],[150.028393182576,-10.6524760880999],[149.782310012002,-10.3932671037239],[148.923137648717,-10.2809225399214],[147.913018426708,-10.1304407690875],[147.135443150012,-9.49244353601202],[146.567880894151,-8.94255461999415],[146.048481073185,-8.06741423913131],[144.744167922138,-7.63012826907747],[143.89708784401,-7.91533049889628],[143.286375767184,-8.24549122480906],[143.413913202081,-8.98306894291095],[142.628431431244,-9.3268205705165],[142.0682589052,-9.15959563562003],[141.033851760014,-9.11789275476042],[141.017056919519,-5.85902190513802],[141.000210402592,-2.60015105551562],[142.735246616791,-3.28915292726322],[144.583970982033,-3.8614177384634],[145.27317955951,-4.37373788820503],[145.829786411726,-4.87649789797268],[145.981921828393,-5.46560922610001],[147.648073358348,-6.0836593563108],[147.891107619416,-6.61401458092232],[146.970905389595,-6.72165658938626],[147.191873814075,-7.38802418378998]]],[[[153.140037876599,-4.49998341229411],[152.827292108368,-4.766427097191],[152.638673130503,-4.17612721112093],[152.406025832325,-3.78974252687456],[151.953236932584,-3.46206226971182],[151.38427941305,-3.03542164471011],[150.662049595339,-2.74148609783396],[150.939965448205,-2.50000212973403],[151.479984165655,-2.77998503989139],[151.820015090135,-2.99997161215791],[152.239989455371,-3.24000864015366],[152.640016717743,-3.65998300538965],[153.019993524385,-3.98001515057329],[153.140037876599,-4.49998341229411]]]]}},{"type":"Feature","properties":{"admin":"Poland","name":"Poland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[15.0169958838587,51.1066740993216],[14.6070984229195,51.74518809672],[14.6850264828157,52.0899474147552],[14.4375997250022,52.6248501654084],[14.0745211117195,52.9812625189254],[14.3533154639341,53.248171291713],[14.1196863135426,53.757029120491],[14.8029004248735,54.0507062852057],[16.3634770036557,54.5131586777857],[17.6228316586087,54.8515359564329],[18.6208585954616,54.6826056992708],[18.6962545101755,54.4387187770693],[19.6606400896064,54.4260838893739],[20.8922445004186,54.3125249294125],[22.7310986670927,54.3275369329933],[23.2439872575895,54.2205667181491],[23.4841276384498,53.9124976670411],[23.527535841575,53.4701215684065],[23.8049349301178,53.0897313503061],[23.7991988461334,52.6910993516066],[23.1994938493862,52.4869774440537],[23.5080021501687,52.0236465521247],[23.5270707536844,51.5784540879302],[24.0299857927489,50.7054066025752],[23.9227571957433,50.4248810898787],[23.4265084164444,50.3085057643575],[22.5184501482116,49.4767735866197],[22.7764188982126,49.0273953314096],[22.5581376482118,49.0857380234671],[21.6078080583642,49.4701073268541],[20.8879553565384,49.3287722845358],[20.4158394711199,49.4314533554998],[19.8250228207269,49.2171253525692],[19.3207125179905,49.5715740016592],[18.9095748226763,49.4358458522446],[18.8531441586136,49.4962297633776],[18.3929138526222,49.9886286484707],[17.649445021239,50.0490383978199],[17.5545670915511,50.3621459010764],[16.8687691586057,50.473973700556],[16.7194759457144,50.2157465683935],[16.1762532894623,50.4226073268579],[16.2386267432386,50.6977326523798],[15.4909721208397,50.7847299261432],[15.0169958838587,51.1066740993216]]]}},{"type":"Feature","properties":{"admin":"Puerto Rico","name":"Puerto Rico","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-66.2824344550082,18.5147616642954],[-65.7713028632093,18.4266791854539],[-65.5910037909429,18.2280349797239],[-65.8471638658138,17.9759056665719],[-66.5999344550095,17.9818226180693],[-67.1841623602853,17.9465534530301],[-67.2424275376943,18.3744601506229],[-67.1006790839177,18.5206011011443],[-66.2824344550082,18.5147616642954]]]}},{"type":"Feature","properties":{"admin":"North Korea","name":"Dem. Rep. Korea","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[130.640015903852,42.3950094671253],[130.780007358931,42.2200072291688],[130.400030552289,42.2800035670597],[129.965948521037,41.9413679062511],[129.667362095255,41.6011044378252],[129.705189243692,40.8828278671843],[129.18811486218,40.661807766272],[129.010399611528,40.4854361028598],[128.633368361527,40.1898469101503],[127.967414178581,40.0254125025976],[127.533435500194,39.7568500839767],[127.502119582225,39.3239307724515],[127.38543419811,39.2134723984277],[127.783342726758,39.0508983424374],[128.349716424677,38.6122429469278],[128.205745884311,38.3703972438019],[127.780035435091,38.3045356308459],[127.073308547067,38.2561148137884],[126.683719924019,37.8047728541512],[126.237338901882,37.8403779160003],[126.174758742376,37.749685777328],[125.689103631697,37.940010077459],[125.568439162296,37.7520887314296],[125.275330438336,37.6690705429527],[125.240087111513,37.8572244329274],[124.981033156434,37.9488209091648],[124.712160679219,38.1083460556498],[124.985994093934,38.5484742294797],[125.221948683779,38.6658572454307],[125.132858514507,38.8485592717986],[125.386589797061,39.3879578720612],[125.321115757347,39.5513845891842],[124.737482131042,39.6603443466716],[124.265624627785,39.9284933538342],[125.079941847841,40.5698237167924],[126.182045119329,41.1073361272764],[126.86908328665,41.8165693222662],[127.343782993683,41.503151760416],[128.208433058791,41.4667715520825],[128.052215203972,41.9942845729179],[129.59666873588,42.4249817978545],[129.994267205933,42.9853868678438],[130.640015903852,42.3950094671253]]]}},{"type":"Feature","properties":{"admin":"Portugal","name":"Portugal","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-9.03481767418024,41.8805705836597],[-8.67194576662672,42.134689439455],[-8.26385698081779,42.2804686549503],[-8.01317460776991,41.7908861354171],[-7.42251298667379,41.7920746933598],[-7.25130896649082,41.918346055665],[-6.66860551596766,41.8833869492196],[-6.38908769370091,41.3818154973946],[-6.85112667482255,41.1110826686175],[-6.86401994467938,40.3308718938748],[-7.02641313315659,40.1845242376242],[-7.06659155926353,39.7118915878828],[-7.49863237143972,39.6295710312418],[-7.09803666831313,39.0300727402238],[-7.37409216961632,38.3730585800649],[-7.02928117514879,38.0757640650898],[-7.16650794109986,37.8038943548022],[-7.53710547528102,37.4289043238762],[-7.45372555177809,37.0977875839661],[-7.85561316571199,36.8382685409963],[-8.38281612795369,36.9788801132625],[-8.89885698082033,36.8688093124808],[-8.74610144696555,37.6513455266766],[-8.83999752443988,38.2662433945176],[-9.28746375165522,38.3584858261586],[-9.52657060386971,38.7374291041549],[-9.44698889814023,39.3920661484284],[-9.04830522300843,39.7550930852788],[-8.97735348147168,40.1593061386658],[-8.7686840478771,40.7606389430302],[-8.79085323733031,41.1843340113913],[-8.99078935386757,41.5434593776036],[-9.03481767418024,41.8805705836597]]]}},{"type":"Feature","properties":{"admin":"Paraguay","name":"Paraguay","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-62.6850571356579,-22.2490292294224],[-62.2911793687292,-21.0516346167874],[-62.2659612697708,-20.5137346330613],[-61.7863264634538,-19.633736667563],[-60.0435646226265,-19.3427466773274],[-59.1150424872061,-19.3569060197754],[-58.1834714422805,-19.8683993466004],[-58.166392381408,-20.1767009416537],[-57.8706739976178,-20.7326876766819],[-57.9371557277613,-22.0901758765572],[-56.8815095689029,-22.2821538225215],[-56.4733174302294,-22.0863001441353],[-55.7979581366069,-22.3569296200478],[-55.6106827459811,-22.6556193986948],[-55.5176393296396,-23.5719975725266],[-55.4007472397954,-23.9569353166688],[-55.0279017808095,-24.0012736955752],[-54.6528342352351,-23.839578138934],[-54.2929595607545,-24.0210140927107],[-54.2934763250774,-24.570799655864],[-54.4289460923306,-25.1621847470122],[-54.6252906968236,-25.7392554664155],[-54.788794928595,-26.6217855770961],[-55.6958455063981,-27.3878370093909],[-56.486701626193,-27.5484990373863],[-57.6097596909761,-27.3958985328284],[-58.6181735907197,-27.1237187639471],[-57.6336600409111,-25.6036565080816],[-57.7772171698179,-25.162339776309],[-58.807128465395,-24.7714592424533],[-60.028966030504,-24.0327963192733],[-60.8465647040099,-23.8807125790383],[-62.6850571356579,-22.2490292294224]]]}},{"type":"Feature","properties":{"admin":"Palestine","name":"Palestine","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.5456653175345,32.3939920110306],[35.5452519060762,31.7825047877208],[35.397560662586,31.4890860051676],[34.9274084815946,31.3534353704014],[34.970506626126,31.6167784693608],[35.2258915545124,31.7543411321218],[34.9746407407093,31.8665823430597],[35.1839302914914,32.5325106877889],[35.5456653175345,32.3939920110306]]]}},{"type":"Feature","properties":{"admin":"Qatar","name":"Qatar","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[50.8101082700696,24.7547425399714],[50.7439107603037,25.4824242212894],[51.0133516782735,26.0069916854842],[51.286461622936,26.1145820175159],[51.5890788104372,25.8011127792334],[51.6067004738488,25.2156704777987],[51.3896077817906,24.6273859725881],[51.112415398977,24.5563308781867],[50.8101082700696,24.7547425399714]]]}},{"type":"Feature","properties":{"admin":"Romania","name":"Romania","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.7105314470405,47.8821939153894],[23.1422363624068,48.0963410508069],[23.7609582862374,47.9855984564055],[24.4020561052504,47.9818777532804],[24.8663171729606,47.7375257431883],[25.207743361113,47.8910564235275],[25.9459411964024,47.9871487493742],[26.1974503923669,48.2208812526303],[26.6193367855978,48.2207262233335],[26.9241760596876,48.123264472031],[27.2338729184127,47.8267709417564],[27.5511662126848,47.4051170924708],[28.128030226359,46.8104763860882],[28.1600179379477,46.3715626084172],[28.0544429867754,45.9445860866056],[28.233553501099,45.4882831894684],[28.6797794939394,45.3040308701317],[29.1497249692016,45.4649254420724],[29.6032890154274,45.2933080104311],[29.6265434099588,45.0353909368624],[29.1416117693318,44.820210272799],[28.8378577003202,44.913873806328],[28.558081495892,43.7074616562581],[27.9701070492751,43.8124681666752],[27.2423995297409,44.1759860296324],[26.0651587256997,43.9434937607513],[25.5692716814269,43.6884447291747],[24.1006791521242,43.7410513372478],[23.3323022803763,43.8970108099047],[22.9448323910518,43.8237853053471],[22.657149692483,44.2349230006613],[22.4740084164406,44.4092276067818],[22.7057255388374,44.578002834647],[22.4590222510759,44.7025171982543],[22.1450879249028,44.4784223496206],[21.5620227393536,44.7689472519655],[21.4835262387022,45.1811701523578],[20.8743127784134,45.4163754339342],[20.76217492034,45.7345730657714],[20.2201924984628,46.1274689804866],[21.0219523454712,46.3160879583519],[21.6265149268539,46.9942377793182],[22.0997676937828,47.6724392767167],[22.7105314470405,47.8821939153894]]]}},{"type":"Feature","properties":{"admin":"Russia","name":"Russia","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[143.648007440363,50.7476004095415],[144.654147577086,48.9763906927376],[143.173927850517,49.3065514186504],[142.55866824765,47.8615750189049],[143.533492466404,46.8367280136925],[143.505277134373,46.1379076198095],[142.747700636974,46.7407648789266],[142.092030064054,45.9667552760588],[141.906925083585,46.8059288600465],[142.018442824471,47.7801329616129],[141.904444614835,48.8591885442996],[142.135800002206,49.6151630722975],[142.179983351815,50.9523424342819],[141.59407596249,51.9354348822025],[141.682546014574,53.3019664577288],[142.606934035411,53.7621450872879],[142.209748976815,54.2254759792169],[142.654786411713,54.3658808457539],[142.914615513277,53.7045775417147],[143.260847609632,52.740760403039],[143.235267775648,51.7566602646887],[143.648007440363,50.7476004095415]]],[[[22.7310986670927,54.3275369329933],[20.8922445004187,54.3125249294126],[19.6606400896064,54.426083889374],[19.8884814795813,54.8661603867715],[21.2684489275035,55.1904816758353],[22.3157235043306,55.0152985703659],[22.7577637061553,54.8565744085814],[22.6510518734726,54.5827409938667],[22.7310986670927,54.3275369329933]]],[[[180,70.8321992085467],[178.903425,70.78114],[178.7253,71.0988],[180,71.5157143364283],[180,70.8321992085467]]],[[[143.60385,73.21244],[142.08763,73.20544],[140.038155,73.31692],[139.86312,73.36983],[140.81171,73.76506],[142.06207,73.85758],[143.48283,73.47525],[143.60385,73.21244]]],[[[150.73167,75.08406],[149.575925,74.68892],[147.977465,74.778355],[146.11919,75.17298],[146.358485,75.49682],[148.22223,75.345845],[150.73167,75.08406]]],[[[145.086285,75.562625],[144.3,74.82],[140.61381,74.84768],[138.95544,74.61148],[136.97439,75.26167],[137.51176,75.94917],[138.831075,76.13676],[141.471615,76.09289],[145.086285,75.562625]]],[[[57.5356925799924,70.7204639757022],[56.9449792824639,70.6327432318867],[53.6773751157842,70.7626577826685],[53.4120166359654,71.2066616889202],[51.6018945656457,71.4747590196505],[51.4557536151242,72.0148810899651],[52.4782751808836,72.229441636841],[52.4441687355708,72.7747313503848],[54.4276135597977,73.6275475124976],[53.5082898293251,73.7498139513001],[55.9024589374076,74.6274864773453],[55.6319328143597,75.0814122585972],[57.8686438332488,75.6093903673232],[61.1700443866475,76.2518834500081],[64.4983683612702,76.4390554877693],[66.2109770038551,76.8097822130312],[68.1570597675348,76.9396967638129],[68.8522111347251,76.5448113064546],[68.1805725442276,76.2336416694091],[64.637326287703,75.7377546251362],[61.5835075214148,75.2608845079468],[58.4770821470534,74.3090563015628],[56.986785516188,73.3330435248662],[55.4193359719109,72.371267605266],[55.6228377622763,71.5405947943903],[57.5356925799924,70.7204639757022]]],[[[106.97013,76.97419],[107.24,76.48],[108.1538,76.7233500000001],[111.07726,76.71],[113.33151,76.22224],[114.13417,75.84764],[113.88539,75.3277900000001],[112.77918,75.03186],[110.15125,74.47673],[109.4,74.18],[110.64,74.04],[112.11919,73.7877400000001],[113.01954,73.9769300000001],[113.52958,73.33505],[113.96881,73.59488],[115.56782,73.75285],[118.77633,73.58772],[119.02,73.12],[123.20066,72.97122],[123.25777,73.73503],[125.38,73.56],[126.97644,73.56549],[128.59126,73.03871],[129.05157,72.39872],[128.46,71.98],[129.71599,71.19304],[131.28858,70.7869900000001],[132.2535,71.8363],[133.85766,71.3864200000001],[135.56193,71.6552500000001],[137.49755,71.34763],[138.23409,71.62803],[139.86983,71.4878300000001],[139.14791,72.4161900000001],[140.46817,72.8494100000001],[149.5,72.2],[150.35118,71.60643],[152.9689,70.84222],[157.00688,71.03141],[158.99779,70.86672],[159.83031,70.45324],[159.70866,69.72198],[160.94053,69.43728],[162.27907,69.64204],[164.05248,69.66823],[165.94037,69.47199],[167.83567,69.58269],[169.57763,68.6938],[170.81688,69.01363],[170.0082,69.65276],[170.45345,70.09703],[173.64391,69.81743],[175.72403,69.8772500000002],[178.6,69.4],[180,68.9636363636366],[180,64.9797087021985],[179.99281,64.97433],[178.7072,64.53493],[177.41128,64.60821],[178.313,64.07593],[178.90825,63.2519700000001],[179.37034,62.98262],[179.48636,62.56894],[179.22825,62.3041000000001],[177.3643,62.5219],[174.56929,61.76915],[173.68013,61.65261],[172.15,60.95],[170.6985,60.33618],[170.33085,59.88177],[168.90046,60.57355],[166.29498,59.7885500000002],[165.84,60.16],[164.87674,59.7316],[163.53929,59.86871],[163.21711,59.21101],[162.01733,58.24328],[162.05297,57.83912],[163.19191,57.61503],[163.05794,56.1592400000001],[162.12958,56.12219],[161.70146,55.2856800000002],[162.11749,54.85514],[160.36877,54.34433],[160.02173,53.20257],[158.53094,52.9586800000002],[158.23118,51.94269],[156.78979,51.01105],[156.42,51.7],[155.99182,53.15895],[155.43366,55.3810300000001],[155.91442,56.7679200000001],[156.75815,57.3647],[156.81035,57.83204],[158.36433,58.05575],[160.15064,59.3147700000001],[161.87204,60.3430000000001],[163.66969,61.1409],[164.47355,62.55061],[163.25842,62.46627],[162.65791,61.6425],[160.12148,60.54423],[159.30232,61.77396],[156.72068,61.43442],[154.21806,59.7581800000001],[155.04375,59.14495],[152.81185,58.88385],[151.26573,58.78089],[151.33815,59.50396],[149.78371,59.6557300000001],[148.54481,59.16448],[145.48722,59.33637],[142.19782,59.03998],[138.95848,57.08805],[135.12619,54.72959],[136.70171,54.6035500000001],[137.19342,53.97732],[138.1647,53.7550100000003],[138.80463,54.25455],[139.90151,54.1896800000002],[141.34531,53.0895700000001],[141.37923,52.23877],[140.59742,51.23967],[140.51308,50.0455300000001],[140.06193,48.4467100000002],[138.55472,46.99965],[138.21971,46.30795],[136.86232,45.1435000000002],[135.51535,43.989],[134.86939,43.39821],[133.53687,42.81147],[132.90627,42.79849],[132.27807,43.2845600000001],[130.93587,42.55274],[130.78,42.2200000000002],[130.64,42.395],[130.63386640841,42.9030146347705],[131.144687941615,42.9299897324269],[131.288555129116,44.1115196803483],[131.02519,44.96796],[131.88345421766,45.3211616074365],[133.09712,45.14409],[133.769643996313,46.1169269882992],[134.11235,47.2124800000001],[134.50081,47.5784500000001],[135.026311476787,48.4782298854439],[133.373595819228,48.1834416774348],[132.50669,47.78896],[130.98726,47.79013],[130.582293328983,48.7296874049762],[129.39781782442,49.4406000840156],[127.6574,49.76027],[127.287455682485,50.7397972682654],[126.939156528838,51.3538941514059],[126.564399041857,51.7842554795327],[125.946348911646,52.7927985703569],[125.06821129771,53.1610448268689],[123.57147,53.4588],[122.245747918793,53.4317259792137],[121.00308475147,53.2514010687312],[120.177088657717,52.7538862168412],[120.725789015792,52.5162263047309],[120.7382,51.96411],[120.18208,51.64355],[119.27939,50.58292],[119.288460728026,50.142882798862],[117.879244419426,49.510983384797],[116.678800897286,49.8885313991214],[115.485695428531,49.8051773138347],[114.96210981655,50.1402473008151],[114.362456496235,50.2483027207375],[112.897739699354,49.543565375357],[111.581230910287,49.3779682480777],[110.662010532679,49.1301280788058],[109.402449171997,49.2929605169577],[108.475167270951,49.2825477158507],[107.868175897251,49.7937051458659],[106.888804152455,50.2742959661803],[105.886591424587,50.4060191920922],[104.62158,50.2753200000002],[103.67654544476,50.0899661321951],[102.25589,50.5105600000001],[102.06521,51.25991],[100.889480421963,51.5168557806384],[99.9817322123236,51.634006252644],[98.8614905131005,52.0473660345467],[97.8257397806745,51.0109951849332],[98.2317615091917,50.4224006211287],[97.2597600000002,49.72605],[95.8140200000002,49.9774600000001],[94.8159493346988,50.0134333359709],[94.1475663594356,50.4805366074572],[93.10421,50.49529],[92.2347115417197,50.8021707220417],[90.7136674336408,50.3318118353211],[88.8055668476956,49.4705207383125],[87.7512642760768,49.2971979844055],[87.3599703307627,49.2149807806292],[86.8293567239897,49.8266747096681],[85.5412699726825,49.6928585882482],[85.1155595234621,50.1173029648776],[84.416377394553,50.3113996445658],[83.9351147806189,50.8892455104536],[83.3830037780125,51.0691828476939],[81.9459855488399,50.8121959499063],[80.5684468932355,51.3883364935284],[80.0355595234417,50.8647508815472],[77.8009155618443,53.4044149847475],[76.5251794778548,54.1770034857271],[76.8911002949134,54.4905244004419],[74.3848200000001,53.5468500000001],[73.4256787454205,53.4898102891097],[73.5085160663844,54.0356167669766],[72.2241500182022,54.3766553818868],[71.1801310566095,54.1332852240083],[70.8652665546552,55.1697335882701],[69.0681669452729,55.3852501491435],[68.1691003762589,54.9703917507044],[65.66687,54.6012500000002],[65.1785335630959,54.3542278102721],[61.4366000000001,54.00625],[60.9780664406832,53.6649933945791],[61.6999861998006,52.9799964463343],[60.7399931171145,52.7199864772577],[60.9272685077402,52.447548326215],[59.9675338072156,51.9604204372157],[61.5880033710241,51.2726587998432],[61.337424350841,50.7990701361043],[59.9328072447156,50.8421941188518],[59.6422823423706,50.5454422064157],[58.3633200000001,51.06364],[56.77798,51.04355],[55.71694,50.6217100000001],[54.5328784523762,51.0262397324594],[52.328723585831,51.7186522487381],[50.7666483905122,51.6927623561599],[48.702381626181,50.6051284857128],[48.5778414243576,49.8747596299156],[47.5494804217494,50.4546983913111],[46.7515963071628,49.3560057643537],[47.0436715024766,49.1520388860976],[46.4664457537763,48.3941523301049],[47.3152400000002,47.71585],[48.05725,47.74377],[48.6947335142019,47.0756281601779],[48.5932500000001,46.56104],[49.1011600000001,46.39933],[48.6454100000001,45.80629],[47.67591,45.6414900000001],[46.68201,44.6092],[47.59094,43.6601600000001],[47.49252,42.98658],[48.5843700000002,41.80888],[47.987283156126,41.4058192001944],[47.8156657244847,41.1514161240213],[47.3733154640664,41.2197323675111],[46.6860705910167,41.8271371526699],[46.4049507993489,41.8606751572274],[45.7764,42.0924400000002],[45.4702791684859,42.50278066667],[44.5376229184821,42.7119927028037],[43.93121,42.5549600000001],[43.7559900000002,42.74083],[42.3944000000002,43.2203],[40.9221900000001,43.3821500000001],[40.0769649594798,43.5531041530025],[39.9550085792711,43.4349976669993],[38.68,44.28],[37.5391200000001,44.65721],[36.6754600000001,45.24469],[37.40317,45.40451],[38.23295,46.24087],[37.67372,46.63657],[39.14767,47.0447500000001],[39.1212000000001,47.26336],[38.2235380388995,47.102189846376],[38.2551123390298,47.546400458357],[38.77057,47.8256200000002],[39.738277622239,47.8989370794521],[39.8956200000001,48.23241],[39.67465,48.7838200000001],[40.0807890154695,49.3074299179994],[40.0690400000001,49.60105],[38.5949882342136,49.9264619004237],[38.0106311378571,49.9156615260747],[37.3934595069952,50.3839533555037],[36.6261678403254,50.2255909287451],[35.3561161638881,50.5771973740591],[35.37791,50.77394],[35.0221830584179,51.2075723333715],[34.2248157081544,51.2559931504289],[34.1419783871906,51.5664134792062],[34.3917305844572,51.7688817409259],[33.7526998227359,52.3350745713316],[32.7157605323672,52.2384654811622],[32.4120581397878,52.2886949733498],[32.1594400000002,52.0612500000001],[31.78597,52.10168],[31.5400183448623,52.7420523138464],[31.305200636528,53.0739958766733],[31.49764,53.1674300000001],[32.3045194841884,53.1327261419728],[32.6936430193461,53.3514208034321],[32.4055985857512,53.618045355842],[31.7312728207746,53.794029446012],[31.7914241879624,53.9746385768722],[31.3844722836638,54.1570563828624],[30.7575338070988,54.8117709417844],[30.9718359718132,55.0815477565641],[30.8739091326201,55.5509764675035],[29.8962943865224,55.7894632025305],[29.3715718930308,55.6700906439363],[29.2295133806604,55.9183442246664],[28.1767094255779,56.1691299505788],[27.8552820167225,56.7593264837844],[27.770015903441,57.2442581244112],[27.2881848487516,57.4745283067039],[27.7166858253158,57.7918991156244],[27.4201500000002,58.7245700000001],[28.1316992530519,59.300825100331],[27.98112,59.47537],[29.1177,60.0280500000001],[28.07,60.5035200000001],[30.2111072120446,61.7800277777497],[31.139991082491,62.3576927761244],[31.5160921567113,62.8676874864129],[30.0358724301428,63.5528136257386],[30.4446846860037,64.2044534369391],[29.544429559047,64.9486715765905],[30.21765,65.80598],[29.0545886573524,66.944286200622],[29.9774263852207,67.6982970241927],[28.4459436378188,68.364612942164],[28.5919295590434,69.0647769232867],[29.39955,69.1569200000002],[31.1010800000001,69.55811],[32.1327200000003,69.9059500000002],[33.77547,69.3014200000001],[36.51396,69.06342],[40.2923400000002,67.9324],[41.0598700000001,67.4571300000001],[41.1259500000002,66.7915800000001],[40.01583,66.2661800000001],[38.38295,65.99953],[33.9187100000002,66.75961],[33.18444,66.63253],[34.81477,65.9001500000001],[34.8785742530788,65.4362128770482],[34.9439100000002,64.4143700000002],[36.23129,64.10945],[37.0127300000001,63.84983],[37.1419700000001,64.33471],[36.5395790350898,64.76446],[37.1760400000001,65.1432200000001],[39.59345,64.5207900000002],[40.4356,64.76446],[39.7626000000002,65.49682],[42.09309,66.47623],[43.0160400000001,66.41858],[43.9497500000001,66.06908],[44.53226,66.7563400000001],[43.69839,67.35245],[44.1879500000001,67.95051],[43.45282,68.57079],[46.2500000000001,68.25],[46.8213400000002,67.68997],[45.55517,67.56652],[45.56202,67.0100500000002],[46.3491500000001,66.66767],[47.8941600000003,66.8845500000002],[48.13876,67.52238],[50.2276600000001,67.9986700000001],[53.7174300000002,68.85738],[54.47171,68.80815],[53.4858200000001,68.20131],[54.72628,68.09702],[55.4426800000001,68.43866],[57.3170200000002,68.46628],[58.8020000000002,68.88082],[59.9414200000002,68.27844],[61.0778400000002,68.94069],[60.03,69.52],[60.55,69.85],[63.5040000000002,69.54739],[64.888115,69.2348350000001],[68.5121600000001,68.0923300000002],[69.18068,68.6156300000001],[68.16444,69.14436],[68.13522,69.35649],[66.9300800000001,69.4546100000001],[67.25976,69.92873],[66.7249200000001,70.7088900000001],[66.69466,71.0289700000002],[68.5400600000001,71.9345000000002],[69.19636,72.8433600000002],[69.94,73.0400000000001],[72.58754,72.77629],[72.79603,72.22006],[71.84811,71.40898],[72.47011,71.09019],[72.79188,70.39114],[72.5647000000002,69.02085],[73.66787,68.4079],[73.2387,67.7404],[71.2800000000001,66.3200000000002],[72.4230100000002,66.1726700000002],[72.82077,66.53267],[73.9209900000001,66.7894600000001],[74.1865100000002,67.28429],[75.052,67.7604700000002],[74.4692600000002,68.32899],[74.93584,68.98918],[73.84236,69.07146],[73.6018700000002,69.62763],[74.3998,70.63175],[73.1011,71.4471700000002],[74.8908200000002,72.12119],[74.65926,72.83227],[75.1580100000002,72.8549700000001],[75.68351,72.3005600000001],[75.2889800000001,71.33556],[76.35911,71.1528700000001],[75.9031300000002,71.87401],[77.5766500000001,72.26717],[79.6520200000001,72.32011],[81.5,71.75],[80.61071,72.5828500000001],[80.51109,73.6482],[82.25,73.85],[84.65526,73.8059100000002],[86.8223000000002,73.93688],[86.00956,74.4596700000001],[87.1668200000001,75.11643],[88.31571,75.14393],[90.26,75.64],[92.90058,75.77333],[93.2342100000001,76.0472],[95.8600000000001,76.14],[96.67821,75.91548],[98.9225400000002,76.44689],[100.75967,76.43028],[101.03532,76.86189],[101.99084,77.2875400000002],[104.3516,77.69792],[106.06664,77.37389],[104.705,77.1274],[106.97013,76.97419]]],[[[105.07547,78.30689],[99.43814,77.921],[101.2649,79.23399],[102.08635,79.34641],[102.837815,79.28129],[105.37243,78.71334],[105.07547,78.30689]]],[[[51.1361865578313,80.5472801785409],[49.7936845233207,80.4154277615482],[48.8944112485775,80.3395667589437],[48.7549365578218,80.1754682482008],[47.5861190122442,80.0101811795153],[46.5028259621097,80.2472468126543],[47.0724552752629,80.5594241401295],[44.8469580421811,80.5898098823172],[46.7991386248712,80.7719176297136],[48.3184774106847,80.7840099148699],[48.5228060239667,80.5145689969001],[49.0971895688909,80.7539859077084],[50.0397676938946,80.9188854031518],[51.5229329771037,80.6997256538019],[51.1361865578313,80.5472801785409]]],[[[99.93976,78.88094],[97.75794,78.7562],[94.97259,79.044745],[93.31288,79.4265],[92.5454,80.14379],[91.18107,80.34146],[93.77766,81.0246],[95.940895,81.2504],[97.88385,80.746975],[100.186655,79.780135],[99.93976,78.88094]]]]}},{"type":"Feature","properties":{"admin":"Rwanda","name":"Rwanda","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[30.4191048520192,-1.13465911215042],[30.8161348813177,-1.69891407634539],[30.7583089535831,-2.28725025798837],[30.469696079233,-2.41385751710346],[29.9383590024079,-2.34848683025424],[29.6321761410786,-2.9178577612461],[29.0249263852168,-2.83925790773016],[29.1174788754515,-2.29221119548838],[29.2548348324833,-2.21510995850891],[29.2918868344366,-1.62005584066799],[29.5794661801409,-1.34131316488563],[29.821518588996,-1.44332244222979],[30.4191048520192,-1.13465911215042]]]}},{"type":"Feature","properties":{"admin":"Western Sahara","name":"W. Sahara","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-8.79488399904908,27.1206963160225],[-8.81782833498667,27.6564258895924],[-8.66558956545481,27.6564258895924],[-8.66512447756419,27.5894790715582],[-8.68439978680905,27.395744126896],[-8.6872936670174,25.8810562199889],[-11.9694189111712,25.9333527694683],[-11.9372244938533,23.3745942245362],[-12.8742215641696,23.2848322616452],[-13.1187544417747,22.7712202010963],[-12.9291019352635,21.3270706242676],[-16.845193650774,21.3333234725749],[-17.0634232243426,20.9997521021308],[-17.0204284326757,21.4223102889815],[-17.0029617985611,21.4207341577966],[-14.7509545557135,21.5006000839037],[-14.6308326888511,21.8609398462749],[-14.2211677718573,22.3101630721882],[-13.891110398809,23.6910090194593],[-12.5009626937254,24.7701162785782],[-12.0307588363016,26.030866197203],[-11.7182197738004,26.1040917017606],[-11.392554897497,26.8834239771544],[-10.5512625797853,26.9908076034569],[-10.1894242008776,26.8609447291074],[-9.73534339032888,26.8609447291074],[-9.41303748212446,27.0884760604885],[-8.79488399904908,27.1206963160225]]]}},{"type":"Feature","properties":{"admin":"Saudi Arabia","name":"Saudi Arabia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[42.779332309751,16.3478913436487],[42.6495727882661,16.774635321515],[42.3479891294107,17.075805568912],[42.2708878924312,17.4747217879891],[41.754381951674,17.833046169501],[41.2213912290156,18.6715996363012],[40.9393412615665,19.4864852971118],[40.2476522153398,20.1746345077265],[39.8016846046609,20.3388622095501],[39.1393994484083,21.2919048120929],[39.0236959165068,21.9868753117702],[39.0663289731476,22.5796556665903],[38.4927722511401,23.6884510360609],[38.0238603045236,24.0786856145129],[37.4836348813444,24.285494696545],[37.1548177426712,24.8584829777973],[37.209491408036,25.0845415308581],[36.9316272316026,25.6029594996102],[36.6396037127212,25.8262275253272],[36.2491365903238,26.5701356063849],[35.6401815121964,27.3765204940834],[35.1301868019079,28.0633519556747],[34.632336053208,28.0585460474716],[34.7877787615419,28.6074272730597],[34.8322204933129,28.9574834254048],[34.9560372250843,29.3565546737788],[36.0689408709221,29.1974946151845],[36.5012142270436,29.5052536076987],[36.7405277849872,29.8652833114762],[37.503581984209,30.0037761500184],[37.6681197446264,30.3386652694859],[37.9988489112944,30.5084998642131],[37.002165561681,31.5084129908447],[39.0048856951525,32.010216986615],[39.195468377445,32.1610088160427],[40.3999943377362,31.8899917668879],[41.8899809100078,31.1900086532784],[44.7094987322847,29.1788910995594],[46.5687134132817,29.0990251734523],[47.4598218117228,29.0025194361472],[47.7088505389374,28.5260627304161],[48.4160941912839,28.5520042994267],[48.8075948423272,27.6896279973399],[49.2995544777458,27.4612181666098],[49.4709135272257,27.1099992945381],[50.1524223162909,26.689663194276],[50.2129354185047,26.2770268824254],[50.1133032570459,25.9439722763042],[50.2398588397287,25.6080496281909],[50.5273865090007,25.3278083358721],[50.6605566750169,24.999895534764],[50.8101082700696,24.7547425399714],[51.112415398977,24.5563308781867],[51.3896077817906,24.6273859725881],[51.5795186704633,24.2454971379511],[51.617707553927,24.0142192652288],[52.0007332700743,23.0011544865789],[55.0068030129249,22.4969475367071],[55.2083410988632,22.708329982997],[55.6666593768598,22.0000011255723],[54.9999817238624,19.9999940047961],[52.0000098000222,19.0000033635161],[49.1166715838649,18.6166675887749],[48.1833435402413,18.1666692163773],[47.4666947772176,17.1166816268549],[47.0000049171898,16.9499992944974],[46.7499943377616,17.2833381209962],[46.3666585630205,17.2333153345376],[45.3999992205688,17.3333350692386],[45.2166512387972,17.4333289657233],[44.0626131528551,17.4103587915696],[43.7915185890519,17.3199767114911],[43.3807943051961,17.5799866805677],[43.1157975604034,17.0884404566074],[43.2183752785027,16.6668899601864],[42.779332309751,16.3478913436487]]]}},{"type":"Feature","properties":{"admin":"Sudan","name":"Sudan","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[33.9633927949712,9.46428522942062],[33.8249634809075,9.48406084571536],[33.8421308530281,9.98191463721599],[33.7219592481831,10.3252620796302],[33.2069380845618,10.7201116384066],[33.0867664797167,11.4411412674765],[33.2069380845618,12.1793382686671],[32.7434190373025,12.24800775715],[32.6747495488196,12.0248319195807],[32.0738915245948,11.9733298032185],[32.3142347342847,11.6814844771665],[32.4000715948883,11.0806264529415],[31.8507156870255,10.5312705450788],[31.3528618955249,9.81024091600869],[30.8378407319034,9.70723668328452],[29.9966394979885,10.2909273353887],[29.6189573113328,10.0849188699402],[29.5159530786086,9.79307354388805],[29.0009319149872,9.60423245056029],[28.9665971707458,9.39822398511165],[27.9708895877443,9.39822398511165],[27.8335506107788,9.60423245056029],[27.1125209817089,9.63856719480162],[26.7520061671738,9.46689347359449],[26.4773282132425,9.55273033419809],[25.962307049621,10.1364209863024],[25.7906333284139,10.4110989402337],[25.069603699344,10.273759963268],[24.7949257454127,9.81024091600869],[24.537415163602,8.91753756573172],[24.1940677211876,8.7286964724039],[23.8869795808607,8.61972971293306],[23.8058134294667,8.66631887454252],[23.459012892356,8.95428579348902],[23.3947790870173,9.26506785729225],[23.5572497901429,9.68121816653877],[23.5543042335022,10.0892552759153],[22.9775435726928,10.7144625919985],[22.8641654802442,11.1423951278076],[22.87622,11.3846100000001],[22.50869,11.67936],[22.49762,12.26024],[22.28801,12.64605],[21.93681,12.5881800000001],[22.03759,12.95546],[22.29658,13.37232],[22.18329,13.78648],[22.51202,14.09318],[22.30351,14.32682],[22.5679500000001,14.9442900000001],[23.02459,15.68072],[23.8868900000001,15.61084],[23.8376600000001,19.5804700000001],[23.8500000000001,20],[25.0000000000001,20.00304],[25.0000000000001,22],[29.02,22],[32.9,22],[36.86623,22],[37.18872,21.01885],[36.96941,20.8374400000001],[37.1147000000001,19.80796],[37.48179,18.61409],[37.86276,18.36786],[38.4100899594732,17.9983073999703],[37.9040000000001,17.42754],[37.16747,17.2631400000001],[36.8525300000001,16.95655],[36.75389,16.29186],[36.32322,14.82249],[36.42951,14.42211],[36.27022,13.5633300000001],[35.86363,12.57828],[35.26049,12.08286],[34.8316300000001,11.3189600000001],[34.7311500000001,10.9101700000001],[34.25745,10.63009],[33.96162,9.58358],[33.9633927949712,9.46428522942062]]]}},{"type":"Feature","properties":{"admin":"South Sudan","name":"S. Sudan","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[33.9633927949712,9.46428522942062],[33.97498,8.68456],[33.8255000000001,8.37916],[33.2948000000001,8.35458],[32.95418,7.7849700000001],[33.56829,7.71334],[34.0751,7.22595],[34.25032,6.82607],[34.70702,6.59422000000012],[35.2980071182331,5.506],[34.6201962678539,4.84712274208203],[34.005,4.24988494736215],[33.39,3.79],[32.68642,3.79232],[31.8814500000001,3.55827],[31.24556,3.7819],[30.83385,3.50917],[29.95349,4.1737],[29.715995314256,4.60080475506015],[29.1590784034466,4.38926727947324],[28.6966776872988,4.45507721599699],[28.428993768027,4.28715464926461],[27.9799772478429,4.40841339763739],[27.3742261085176,5.23394440350017],[27.2134090512253,5.55095347739461],[26.4659094581233,5.94671743410186],[26.2134184099451,6.54660329836213],[25.7966479835113,6.97931590415817],[25.1241308936648,7.50008515057942],[25.1149324887169,7.82510407147924],[24.5673690121522,8.22918793378545],[23.8869795808607,8.61972971293306],[24.1940677211876,8.7286964724039],[24.537415163602,8.91753756573172],[24.7949257454127,9.81024091600869],[25.069603699344,10.273759963268],[25.7906333284139,10.4110989402337],[25.962307049621,10.1364209863024],[26.4773282132425,9.55273033419809],[26.7520061671738,9.46689347359449],[27.1125209817089,9.63856719480162],[27.8335506107788,9.60423245056029],[27.9708895877443,9.39822398511165],[28.9665971707458,9.39822398511165],[29.0009319149872,9.60423245056029],[29.5159530786086,9.79307354388805],[29.6189573113328,10.0849188699402],[29.9966394979885,10.2909273353887],[30.8378407319034,9.70723668328452],[31.3528618955249,9.81024091600869],[31.8507156870255,10.5312705450788],[32.4000715948883,11.0806264529415],[32.3142347342847,11.6814844771665],[32.0738915245948,11.9733298032185],[32.6747495488196,12.0248319195807],[32.7434190373025,12.24800775715],[33.2069380845618,12.1793382686671],[33.0867664797167,11.4411412674765],[33.2069380845618,10.7201116384066],[33.7219592481831,10.3252620796302],[33.8421308530281,9.98191463721599],[33.8249634809075,9.48406084571536],[33.9633927949712,9.46428522942062]]]}},{"type":"Feature","properties":{"admin":"Senegal","name":"Senegal","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-16.7137288070235,13.5949586043799],[-17.1261067367126,14.3735157332892],[-17.6250426904907,14.7295405135641],[-17.1851728988222,14.9194772404529],[-16.7007063460859,15.6215274113541],[-16.4630981104079,16.1350361190385],[-16.1206900700419,16.4556625431934],[-15.6236661442587,16.3693370630498],[-15.1357372705588,16.5872824162408],[-14.577347581429,16.5982636581028],[-14.0995214502422,16.3043022730105],[-13.4357376774531,16.0393830428662],[-12.8306583317475,15.3036915145429],[-12.1707502913803,14.6168342147355],[-12.1248874577213,13.9947274845898],[-11.9277160303116,13.4220751001474],[-11.5533977930054,13.1412136906411],[-11.4678991357785,12.754518947801],[-11.5139428369506,12.4429875757294],[-11.6583009505579,12.3865827498828],[-12.2035648258856,12.4656476912894],[-12.2785990055734,12.3544400089973],[-12.4990506657306,12.3320899520311],[-13.2178181624782,12.575873521368],[-13.7004760400843,12.5861829696102],[-15.548476935274,12.6281700708473],[-15.8165742660043,12.5155671248833],[-16.1477168441306,12.5477615422012],[-16.6774519515546,12.3848515894011],[-16.8415246240813,13.1513939478026],[-15.9312959456922,13.1302841252113],[-15.691000535535,13.2703530949385],[-15.5118125065629,13.2785696476729],[-15.1411632959495,13.5095116235852],[-14.7121972314946,13.2982066919438],[-14.2777017887846,13.2805850285322],[-13.8449633447724,13.505041612192],[-14.0469923568175,13.7940678980004],[-14.3767138330558,13.6256802433774],[-14.6870308089685,13.6303569604998],[-15.0817353988138,13.876491807506],[-15.3987703109245,13.8603687606309],[-15.6245963200399,13.6235873478696],[-16.7137288070235,13.5949586043799]]]}},{"type":"Feature","properties":{"admin":"Solomon Islands","name":"Solomon Is.","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[162.119024693041,-10.4827190080211],[162.398645868172,-10.8263672827621],[161.700032180018,-10.8200110815902],[161.319796991215,-10.2047514787231],[161.917383254238,-10.4467005347137],[162.119024693041,-10.4827190080211]]],[[[160.852228631838,-9.872937106977],[160.462588332357,-9.89520964929484],[159.849447463214,-9.79402719486737],[159.640002883135,-9.63997975020527],[159.702944777667,-9.24294972090678],[160.362956170898,-9.40030445723553],[160.688517694337,-9.61016244877281],[160.852228631838,-9.872937106977]]],[[[161.679981724289,-9.59998219161137],[161.529396600591,-9.78431202559643],[160.788253208661,-8.91754322676492],[160.579997186524,-8.32000864017397],[160.920028111005,-8.32000864017397],[161.28000613835,-9.12001148848445],[161.679981724289,-9.59998219161137]]],[[[159.875027297199,-8.33732024499171],[159.917401971678,-8.53828989017486],[159.133677199539,-8.1141814103554],[158.586113722975,-7.75482350019771],[158.211149530265,-7.42187224694115],[158.359977655265,-7.32001799889392],[158.820001255528,-7.56000335045739],[159.640002883135,-8.02002695071957],[159.875027297199,-8.33732024499171]]],[[[157.538425734689,-7.34781991946693],[157.339419793933,-7.40476734785255],[156.902030471015,-7.17687428144539],[156.491357863591,-6.76594329186039],[156.542827590154,-6.59933847415148],[157.140000441719,-7.02163827884065],[157.538425734689,-7.34781991946693]]]]}},{"type":"Feature","properties":{"admin":"Sierra Leone","name":"Sierra Leone","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-11.4387794661821,6.78591685630575],[-11.7081945459357,6.86009837486072],[-12.4280989241938,7.26294200279203],[-12.9490490381282,7.79864573814574],[-13.1240254378685,8.16394643801698],[-13.2465502588325,8.90304861087151],[-12.7119575667731,9.34271169681077],[-12.5967191227622,9.62018830000197],[-12.4259285140376,9.83583405195595],[-12.150338100625,9.85857168216438],[-11.9172773909887,10.0469839543006],[-11.1174812484073,10.0458729110063],[-10.8391519840833,9.68824616133037],[-10.622395188835,9.26791006106828],[-10.6547704736659,8.97717845299419],[-10.4943151513996,8.71554067630043],[-10.5054772607747,8.3488963891896],[-10.2300935530913,8.40620555260129],[-10.6955948551765,7.93946401614109],[-11.1467042708684,7.39670644777953],[-11.1998018050483,7.10584564862474],[-11.4387794661821,6.78591685630575]]]}},{"type":"Feature","properties":{"admin":"El Salvador","name":"El Salvador","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-87.7931111315266,13.3844804956551],[-87.9041121080895,13.1490168319171],[-88.4833015612168,13.1639513208495],[-88.8432279121297,13.2597335881025],[-89.2567427233293,13.4585328231293],[-89.8123935615476,13.520622056528],[-90.095554572291,13.7353376327007],[-90.0646779039966,13.8819695093289],[-89.7219339668207,14.1342280135617],[-89.5342193265205,14.2448155786663],[-89.5873426989165,14.3625861678595],[-89.3533259752828,14.4241327987191],[-89.0585119290576,14.3400294051641],[-88.8430728828328,14.1405067000852],[-88.541230841816,13.9801547306835],[-88.5039979723497,13.8454859481309],[-88.0653425768401,13.9646259627798],[-87.8595153470216,13.893312486217],[-87.7235029772294,13.7850503605655],[-87.7931111315266,13.3844804956551]]]}},{"type":"Feature","properties":{"admin":"Somaliland","name":"Somaliland","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[48.9381295102965,9.45174896894667],[48.486735874227,8.83762624758998],[47.78942,8.003],[46.9483284848979,7.99687653241739],[43.67875,9.18358000000012],[43.2969751320187,9.54047740319174],[42.92812,10.0219400000001],[42.55876,10.5725800000001],[42.776851841001,10.9268785669344],[43.1453048032421,11.4620396997489],[43.4706596209517,11.2777098657639],[43.6666683286348,10.8641692163482],[44.1178035825428,10.4455384383516],[44.6142590675709,10.4422053084689],[45.5569405454391,10.6980294865298],[46.645401238803,10.8165493839912],[47.5256575864628,11.12722809493],[48.0215963071678,11.1930638696697],[48.3787838071693,11.3754816756601],[48.9482064145935,11.4106216496185],[48.9420052427184,11.3942660587982],[48.9384912453226,10.9823273787835],[48.9382328631611,9.97350006758148],[48.9381295102965,9.45174896894667]]]}},{"type":"Feature","properties":{"admin":"Somalia","name":"Somalia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[49.72862,11.5789],[50.25878,11.67957],[50.73202,12.0219],[51.1112,12.02464],[51.13387,11.74815],[51.04153,11.16651],[51.04531,10.6409],[50.83418,10.27972],[50.55239,9.19874],[50.07092,8.08173],[49.4527,6.80466],[48.59455,5.33911],[47.74079,4.2194],[46.56476,2.85529],[45.56399,2.04576],[44.06815,1.05283],[43.13597,0.2922],[42.04157,-0.91916],[41.81095,-1.44647],[41.58513,-1.68325],[40.993,-0.85829],[40.98105,2.78452],[41.855083092644,3.91891192048373],[42.12861,4.23413],[42.76967,4.25259],[43.66087,4.95755],[44.9636,5.00162],[47.78942,8.003],[48.4867358742269,8.83762624758999],[48.9381295102964,9.45174896894662],[48.938232863161,9.97350006758151],[48.9384912453225,10.9823273787835],[48.9420052427183,11.3942660587981],[48.9482047585097,11.410617281698],[49.26776,11.43033],[49.72862,11.5789]]]}},{"type":"Feature","properties":{"admin":"Republic of Serbia","name":"Serbia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.8743127784134,45.4163754339343],[21.4835262387022,45.1811701523579],[21.5620227393537,44.7689472519656],[22.1450879249029,44.4784223496206],[22.459022251076,44.7025171982544],[22.7057255388374,44.578002834647],[22.4740084164407,44.4092276067818],[22.6571496924831,44.2349230006614],[22.4104464047216,44.0080634629001],[22.5001566911802,43.642814439461],[22.9860185075885,43.2111612005271],[22.6048014665714,42.8985187851611],[22.4365946794614,42.5803211533239],[22.5450118344096,42.461362006188],[22.3805257504247,42.3202595078151],[21.9170800000001,42.30364],[21.5766359894021,42.2452243970619],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.0686850000001],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.2137799702705],[19.48389,43.35229],[19.21852,43.52384],[19.454,43.5681000000001],[19.59976,44.03847],[19.11761,44.42307],[19.36803,44.863],[19.00548,44.86023],[19.3904757015846,45.2365156113424],[19.0727689958542,45.5215111354321],[18.82982,45.90888],[19.5960445492416,46.1717298447446],[20.2201924984629,46.1274689804866],[20.76217492034,45.7345730657715],[20.8743127784134,45.4163754339343]]]}},{"type":"Feature","properties":{"admin":"Suriname","name":"Suriname","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-57.1474364894769,5.97314992921916],[-55.9493184067898,5.772877915872],[-55.8417797511904,5.95312531170606],[-55.0332502915518,6.02529144940166],[-53.9580446030709,5.75654816326776],[-54.4786329819792,4.89675568279559],[-54.3995422023565,4.21261139568347],[-54.006930508019,3.62003774659256],[-54.1817260402463,3.18977977133042],[-54.2697051662232,2.73239166911505],[-54.5247541977997,2.31184886312379],[-55.0975874497551,2.52374807373661],[-55.569755011606,2.42150625244713],[-55.9733221095894,2.51036387777302],[-56.0733418442903,2.2207949894255],[-55.9056001450709,2.02199575439866],[-55.9956980047717,1.8176671411166],[-56.5393857489145,1.89952260986692],[-57.1500978257399,2.76892690674541],[-57.2814334784097,3.33349192953412],[-57.6015689764579,3.33465464926068],[-58.0446943833607,4.06086355225838],[-57.8602095200787,4.57680105226045],[-57.9142889064721,4.81262645102441],[-57.3072458563395,5.07356659588223],[-57.1474364894769,5.97314992921916]]]}},{"type":"Feature","properties":{"admin":"Slovakia","name":"Slovakia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[18.8531441586136,49.4962297633776],[18.9095748226763,49.4358458522446],[19.3207125179905,49.5715740016592],[19.8250228207269,49.2171253525692],[20.4158394711199,49.4314533554998],[20.8879553565384,49.3287722845358],[21.6078080583642,49.4701073268541],[22.5581376482118,49.0857380234671],[22.2808419125336,48.8253921575807],[22.0856083513348,48.4222643092718],[21.8722363624017,48.31997081155],[20.8012939795849,48.6238540716424],[20.4735620459899,48.5628500433218],[20.2390543962493,48.3275672470969],[19.7694706560131,48.2026911484636],[19.6613635596585,48.2666148952087],[19.1743648617399,48.1113788926039],[18.7770247738477,48.0817682969006],[18.6965128923369,47.8809536810144],[17.85713260262,47.7584288600504],[17.4884729346498,47.8674661321862],[16.979666782304,48.1234970159763],[16.879982944413,48.4700133327095],[16.9602881201946,48.5969823268506],[17.1019848975389,48.8169688991171],[17.5450069515771,48.8000190293254],[17.8864848161618,48.9034752467737],[17.9135115902505,48.9964928248991],[18.1049727718919,49.0439834661753],[18.170498488038,49.2715147975564],[18.3999935238462,49.31500051533],[18.5549711442895,49.4950153672188],[18.8531441586136,49.4962297633776]]]}},{"type":"Feature","properties":{"admin":"Slovenia","name":"Slovenia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[13.8064754574215,46.5093061386912],[14.6324715511748,46.4318173284695],[15.137091912505,46.658702704447],[16.0116638526127,46.6836107448117],[16.2022982113374,46.852385972677],[16.3705049984474,46.8413272161665],[16.5648083838649,46.5037509222198],[15.7687329444085,46.2381082220234],[15.6715295752676,45.8341535507979],[15.3239538916724,45.7317825384277],[15.3276745947974,45.4523163925932],[14.9352437679729,45.4716950547027],[14.5951094906278,45.6349409043127],[14.4119682145854,45.4661656764474],[13.7150598486972,45.5003237981924],[13.9376302425783,45.5910159368646],[13.6981099789055,46.0167780625173],[13.8064754574215,46.5093061386912]]]}},{"type":"Feature","properties":{"admin":"Sweden","name":"Sweden","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.1831734555019,65.7237405463202],[21.2135168799772,65.0260053575153],[21.369631381931,64.4135879584243],[19.7788757666902,63.609554348395],[17.8477791683752,62.7494001328968],[17.1195548845181,61.341165676511],[17.8313460629064,60.6365833604274],[18.7877217953321,60.0819143744226],[17.8692248877763,58.9537661810587],[16.8291850114701,58.7198269720734],[16.4477095882915,57.0411180690719],[15.8797855974038,56.1043018662687],[14.6666813493521,56.2008851182222],[14.1007210628915,55.4077810736226],[12.9429105973921,55.3617373724506],[12.625100538797,56.307080186582],[11.7879423356687,57.4418171250631],[11.0273686051969,58.8561494004593],[11.4682719255111,59.432393296946],[12.3003658382749,60.11793284773],[12.6311466813752,61.2935716823701],[11.9920642432216,61.8003624538565],[11.9305692887942,63.128317572677],[12.5799353369739,64.0662189805583],[13.5719161312487,64.0491140814697],[13.9199052263022,64.4454206407161],[13.5556897315091,64.7870276963815],[15.108411492583,66.1938668890955],[16.1087121924568,67.3024555528369],[16.7688786149855,68.0139366726314],[17.7291817562653,68.0105518663163],[17.9938684424643,68.5673912624773],[19.8785596045813,68.4071943223726],[20.0252689958579,69.0651386583127],[20.6455928890895,69.1062472602009],[21.9785347836261,68.6168456081807],[23.5394730974344,67.9360086127352],[23.5658797543356,66.3960509304374],[23.9033785336338,66.0069273952796],[22.1831734555019,65.7237405463202]]]}},{"type":"Feature","properties":{"admin":"Swaziland","name":"Swaziland","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[32.0716654802811,-26.7338200823049],[31.8680603370511,-27.1779273414213],[31.2827730649133,-27.285879408479],[30.6859619483745,-26.7438453101695],[30.6766085141296,-26.3980783017046],[30.9496667823599,-26.0226490211041],[31.0440796241571,-25.7314523251394],[31.3331575863979,-25.6601905250089],[31.8377779477281,-25.8433318010513],[31.985779249812,-26.2917798804802],[32.0716654802811,-26.7338200823049]]]}},{"type":"Feature","properties":{"admin":"Syria","name":"Syria","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[38.7923405291361,33.3786864283522],[36.8340621274355,32.3129375269808],[35.7199182472227,32.7091924097949],[35.7007979672747,32.7160136988574],[35.8363969256086,32.8681232773085],[35.8211007016502,33.2774264592763],[36.0664604021721,33.8249124211925],[36.6117501157159,34.2017886418972],[36.4481942075121,34.5939352483441],[35.9984025408436,34.6449140488],[35.9050232276922,35.4100094670973],[36.1497628110265,35.8215347356537],[36.417550083163,36.0406169703551],[36.6853890317318,36.2596992050565],[36.7394942563414,36.8175204534311],[37.0667611020458,36.6230362005006],[38.1677274920242,36.9012104355278],[38.6998913917659,36.7129273544723],[39.5225801938525,36.716053778626],[40.6732593116957,37.0912763534973],[41.212089471203,37.0743523219217],[42.3495910988118,37.2298725449041],[41.837064243341,36.6058537867636],[41.2897074725055,36.3588146021923],[41.3839652850058,35.6283165553144],[41.0061588885199,34.4193722600621],[38.7923405291361,33.3786864283522]]]}},{"type":"Feature","properties":{"admin":"Chad","name":"Chad","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[14.4957873877629,12.8593962671374],[14.5957812842476,13.3304269474779],[13.9544767595056,13.3534487980638],[13.9566988460941,13.9966911890169],[13.5403935075508,14.3671336939012],[13.97217,15.68437],[15.2477311540418,16.6273058130508],[15.3004411149797,17.927949937405],[15.6857405941478,19.9571800806424],[15.9032466976643,20.3876189234175],[15.4871480648501,20.7304145370256],[15.47106,21.04845],[15.0968876481818,21.3085187850749],[14.8513,22.8629500000001],[15.86085,23.40972],[19.84926,21.49509],[23.8376600000001,19.5804700000001],[23.8868900000001,15.61084],[23.02459,15.68072],[22.5679500000001,14.9442900000001],[22.30351,14.32682],[22.51202,14.09318],[22.18329,13.78648],[22.29658,13.37232],[22.03759,12.95546],[21.93681,12.5881800000001],[22.28801,12.64605],[22.49762,12.26024],[22.50869,11.67936],[22.87622,11.3846100000001],[22.8641654802442,11.1423951278076],[22.2311291846688,10.9718887394606],[21.7238216488595,10.567055568886],[21.0008683610963,9.47598521569148],[20.0596854997643,9.01270600019484],[19.0940080095261,9.07484691002577],[18.8120097185093,8.98291453697862],[18.9110217627806,8.63089468020644],[18.3895548845233,8.28130361575188],[17.9649296403809,7.89091400800299],[16.7059883968864,7.50832754152998],[16.4561845231874,7.73477366783294],[16.2905615576919,7.75430735923942],[16.1062317237067,7.49708791750646],[15.2794604834692,7.42192454673801],[15.4360917497457,7.69281240481189],[15.1208655127653,8.38215017336944],[14.9799955583377,8.79610423424344],[14.5444665869819,8.96586131432224],[13.9542183773441,9.54949494062669],[14.1714660986991,10.0213782821],[14.6272005550811,9.92091929772459],[14.9093538753948,9.99212942142276],[15.4678727556052,9.98233673750354],[14.923564894275,10.8913251815175],[14.9601518083377,11.5555740421972],[14.89336,12.21905],[14.4957873877629,12.8593962671374]]]}},{"type":"Feature","properties":{"admin":"Togo","name":"Togo","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[1.86524051271232,6.14215770102973],[1.06012169760493,5.92883738852888],[0.836931186536333,6.27997874595215],[0.570384148774849,6.91435862876719],[0.490957472342245,7.41174428957647],[0.712029249686878,8.31246450442383],[0.461191847342121,8.67722260175601],[0.365900506195885,9.46500397382948],[0.367579990245389,10.1912128768272],[-0.049784715159944,10.7069178328839],[0.023802524423701,11.0186817489008],[0.899563022474069,10.9973393823643],[0.772335646171484,10.4708082137424],[1.07779503744874,10.175606594275],[1.42506066245014,9.825395412633],[1.46304284018467,9.33462433515709],[1.66447757325838,9.12859039960938],[1.61895063640924,6.83203807212624],[1.86524051271232,6.14215770102973]]]}},{"type":"Feature","properties":{"admin":"Thailand","name":"Thailand","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[102.584932489027,12.1865949569133],[101.68715783082,12.6457400578266],[100.831809523525,12.6270848657692],[100.978467238369,13.4127216659026],[100.097797479251,13.4068563908374],[100.018732537845,12.3070010441534],[99.4789205261236,10.8463666854235],[99.1537724141431,9.96306142825855],[99.2223987162268,9.23925547936243],[99.8738318216981,9.20786204674512],[100.279646844486,8.29515289960605],[100.459274123133,7.42957265871718],[101.017327915453,6.85686859784248],[101.623079054778,6.74062246340192],[102.141186964936,6.22163605389463],[101.814281854258,5.81080841717424],[101.154218784594,5.69138418214771],[101.075515578213,6.20486705161592],[100.259596388757,6.64282481528954],[100.085756870527,6.46448944745029],[99.6906905456557,6.8482127954336],[99.5196415547696,7.34345388430276],[98.9882528015123,7.90799306887533],[98.503786248776,8.38230520266629],[98.339661899817,7.79451162356238],[98.1500093933058,8.35000743248388],[98.2591500183062,8.9739228377598],[98.553550653073,9.93295990644854],[99.038120558674,10.9605457625724],[99.5872860046397,11.8927627629017],[99.1963537943516,12.8047484399887],[99.2120117533361,13.2692937280765],[99.0977551615387,13.8275025496933],[98.4308191263799,14.6220276961808],[98.1920740091914,15.1237025008704],[98.5373759297657,15.3084974227461],[98.9033484232567,16.1778242049761],[98.4937610209113,16.8378355982079],[97.8591227559349,17.5679460718437],[97.3758964375735,18.4454377303758],[97.7977828308044,18.6270803898818],[98.2537239929156,19.70820302986],[98.9596757344549,19.7529806584409],[99.5433093607593,20.1865976018021],[100.115987583418,20.4178496363082],[100.548881056727,20.1092379826611],[100.606293573003,19.5083444279712],[101.282014601652,19.4625849471768],[101.035931431078,18.4089283309616],[101.059547560635,17.5124972599945],[102.113591750092,18.1091016708042],[102.413004998792,17.9327816838243],[102.998705682388,17.9616946476916],[103.200192091894,18.3096320663128],[103.956476678485,18.2409540877969],[104.716947056092,17.4288589543301],[104.779320509869,16.4418649357714],[105.58903852745,15.5703160669529],[105.544338413518,14.7239336206604],[105.218776890079,14.2732117782107],[104.281418084737,14.4167430689014],[102.988422072362,14.2257211369345],[102.348099399833,13.3942473413582],[102.584932489027,12.1865949569133]]]}},{"type":"Feature","properties":{"admin":"Tajikistan","name":"Tajikistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[71.0141980325202,40.2443655462182],[70.6480188333,39.9357538925712],[69.5596098163685,40.103211371413],[69.4648869159775,39.5266832545487],[70.5491618183256,39.6041979029865],[71.784693637992,39.2794632024644],[73.6753792662548,39.4312368841056],[73.9288521666464,38.5058153346227],[74.2575142760227,38.6065068629434],[74.8648157083168,38.3788463404816],[74.8299857929521,37.9900070257014],[74.9800024758954,37.4199901393059],[73.9486959166465,37.4215662704908],[73.260055779925,37.495256862939],[72.6368896829173,37.0475580917784],[72.1930408059624,36.9482876653457],[71.8446382994506,36.7381712916469],[71.4486934752302,37.0656448430805],[71.5419177590848,37.9057744410656],[71.2394039244482,37.9532650823419],[71.3481311379903,38.2589053411322],[70.8068205097329,38.4862816432164],[70.3763041523093,38.1383959010275],[70.2705741718401,37.735164699854],[70.1165784036103,37.5882227646321],[69.518785434858,37.6089966904134],[69.1962728209244,37.1511435003074],[68.8594458352459,37.3443358424306],[68.1355623717014,37.0231151393043],[67.8299996275595,37.1449940048647],[68.3920325051659,38.1570252548687],[68.1760250181859,38.9015534531139],[67.4422196796413,39.1401435410055],[67.7014286640173,39.5804784205645],[68.5364164569894,39.5334528671789],[69.0116329283455,40.0861581487567],[69.3294946633728,40.7278244085248],[70.666622348925,40.9602133245414],[70.4581596210596,40.4964948593703],[70.6014066913727,40.2185273300723],[71.0141980325202,40.2443655462182]]]}},{"type":"Feature","properties":{"admin":"Turkmenistan","name":"Turkmenistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[61.2108170917257,35.6500723333092],[61.1230705096941,36.4915971949662],[60.3776379738839,36.5273831243284],[59.2347619973168,37.4129879827303],[58.4361544126782,37.5223094752438],[57.330433790929,38.0292294378109],[56.6193660825928,38.1213943548035],[56.1803747902733,37.9351266546074],[55.5115784035519,37.9641171331232],[54.8003039894866,37.3924207626782],[53.9215979347955,37.1989183619613],[53.7355111021125,37.9061361760917],[53.8809285825818,38.9520930038954],[53.1010278664329,39.2905736354071],[53.3578080584912,39.9752863632744],[52.6939726092698,40.033629055332],[52.9152510923436,40.8765233424447],[53.8581392759411,40.6310344508422],[54.7368453306321,40.9510149195935],[54.0083109881813,41.5512108424474],[53.7217134946906,42.12319143327],[52.9167497088801,41.8681165634773],[52.8146887551036,41.1353705917947],[52.5024597511961,41.7833155380864],[52.9442932472916,42.1160342473976],[54.0794177590149,42.3241094020208],[54.7553454933926,42.0439714625666],[55.4552510923538,41.2598591171858],[55.9681913592829,41.3086416692694],[57.0963912290791,41.3223100856106],[56.9322152036878,41.8260261093756],[57.7865299823371,42.1705528834655],[58.6290108579915,42.751551011723],[59.9764221535698,42.2230819768902],[60.0833406919817,41.4251461858714],[60.4659529966707,41.2203266464825],[61.5471789895136,41.2663703476546],[61.8827140643847,41.0848568792294],[62.374260288345,40.0538862167904],[63.518014764261,39.3632565374256],[64.1702230162168,38.8924067245982],[65.2159989765074,38.4026950139843],[66.5461503437002,37.9746849635269],[66.5186068052887,37.3627843287588],[66.2173848814593,37.3937901881339],[65.7456307310668,37.6611640488121],[65.5889477883578,37.3052167831856],[64.7461051776774,37.1118177353333],[64.5464791197339,36.3120732691843],[63.9828959491587,36.0079574651466],[63.1935384459003,35.8571656357189],[62.9846623065766,35.4040408391676],[62.2306514830059,35.2706639674223],[61.2108170917257,35.6500723333092]]]}},{"type":"Feature","properties":{"admin":"East Timor","name":"Timor-Leste","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[124.968682489116,-8.89279021569708],[125.08624637258,-8.65688730228468],[125.947072381698,-8.43209482181503],[126.644704217639,-8.39824675866385],[126.95724328014,-8.2733448218144],[127.335928175975,-8.3973165828826],[126.967991978057,-8.66825611738889],[125.925885044459,-9.10600717533335],[125.088520135601,-9.39317310957929],[125.070019972841,-9.08998748132287],[124.968682489116,-8.89279021569708]]]}},{"type":"Feature","properties":{"admin":"Trinidad and Tobago","name":"Trinidad and Tobago","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-61.68,10.76],[-61.105,10.89],[-60.895,10.855],[-60.935,10.11],[-61.77,10],[-61.95,10.09],[-61.66,10.365],[-61.68,10.76]]]}},{"type":"Feature","properties":{"admin":"Tunisia","name":"Tunisia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[9.48213992680527,30.3075560572462],[9.05560265466815,32.1026919622013],[8.43910281742612,32.5062848984008],[8.43047285323337,32.7483373072559],[7.61264163578218,33.344114895149],[7.52448164229224,34.0973764104515],[8.1409814795343,34.6551459823938],[8.37636762862377,35.4798760035559],[8.21782433435231,36.4331769882603],[8.42096438969167,36.9464273137832],[9.50999352381061,37.3499944117665],[10.2100024756363,37.2300017359848],[10.1806502620945,36.7240377874151],[11.0288672217333,37.092103176414],[11.1000256689993,36.8999960393689],[10.6000045101431,36.4100001083774],[10.5932865739451,35.9474443629328],[10.9395186703007,35.6989840764735],[10.807847120821,34.8335071884492],[10.1495927262871,34.3307730168977],[10.3396586442566,33.7857416855153],[10.8568363786337,33.7687401392913],[11.1085006038951,33.2933428004222],[11.488787469131,33.1369957545231],[11.4322534522037,32.3689031031529],[10.9447896663945,32.0818146835554],[10.6369014827995,31.7614208033457],[9.95022505050508,31.3760696477453],[10.0565751481618,30.9618313664936],[9.97001712407285,30.5393248560752],[9.48213992680527,30.3075560572462]]]}},{"type":"Feature","properties":{"admin":"Turkey","name":"Turkey","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[36.9131270688422,41.3353583847643],[38.3476648292645,40.9485861272757],[39.5126066424202,41.1027627630186],[40.3734326515382,41.0136725937473],[41.5540841001107,41.5356562363276],[42.6195487811046,41.5831727158199],[43.5827458025927,41.0921432561826],[43.7526579119685,40.7402009140588],[43.656436395041,40.2535639511662],[44.4000085792888,40.0050003118423],[44.793989699082,39.713002631177],[44.1092252947824,39.4281362981681],[44.4214026222576,38.2812812363145],[44.2257556496005,37.9715843775893],[44.7726990089777,37.1704446477684],[44.2934517759029,37.0015143906064],[43.9422587420473,37.2562275253729],[42.7791256040219,37.3852635768058],[42.3495910988118,37.2298725449041],[41.212089471203,37.0743523219217],[40.6732593116957,37.0912763534974],[39.5225801938525,36.716053778626],[38.6998913917659,36.7129273544723],[38.1677274920242,36.9012104355278],[37.0667611020458,36.6230362005006],[36.7394942563414,36.8175204534311],[36.6853890317318,36.2596992050565],[36.4175500831631,36.0406169703551],[36.1497628110266,35.8215347356537],[35.7820849952699,36.2749954290149],[36.1608215675371,36.6506055771284],[35.5509363136283,36.5654428167113],[34.7145532569844,36.7955321314909],[34.0268949724765,36.219960028624],[32.5091581560641,36.1075637883892],[31.6995951677796,36.6442752141726],[30.6216247901711,36.6778648951623],[30.3910962257171,36.262980658507],[29.6999756202456,36.144357408181],[28.7329028663354,36.6768313665164],[27.6411865577374,36.6588221298628],[27.0487679379433,37.653360907536],[26.318218214633,38.2081332464054],[26.8047001482287,38.9857601995336],[26.1707853533044,39.4636121689365],[27.2800199724494,40.4200137395783],[28.8199776547472,40.4600112981722],[29.2400036964156,41.2199907496727],[31.1459338722044,41.0876215683571],[32.3479793637458,41.7362641464846],[33.5132829119275,42.0189600693373],[35.1677038917519,42.0402249212254],[36.9131270688422,41.3353583847643]]],[[[27.1923767432824,40.6905657008425],[26.3580090674978,40.1519939234965],[26.0433512712725,40.6177536077432],[26.0569421729653,40.8241234401007],[26.2946020850757,40.9362612981742],[26.6041955909363,41.562114569661],[26.1170418637208,41.8269046087246],[27.1357393734905,42.1414848903013],[27.9967204119054,42.0073587102878],[28.1155245297444,41.6228860540363],[28.9884428240188,41.2999341904282],[28.8064384294867,41.0549620631485],[27.6190173682841,40.9998233098931],[27.1923767432824,40.6905657008425]]]]}},{"type":"Feature","properties":{"admin":"Taiwan","name":"Taiwan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[121.77781782439,24.3942735865194],[121.175632358893,22.7908572453672],[120.747079705896,21.9705713973821],[120.220083449384,22.8148609481667],[120.106188592612,23.5562627222582],[120.694679803552,24.5384508326137],[121.495044386889,25.2954588892574],[121.951243931161,24.997595933527],[121.77781782439,24.3942735865194]]]}},{"type":"Feature","properties":{"admin":"United Republic of Tanzania","name":"Tanzania","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[33.9037111971046,-0.95],[34.07262,-1.05982],[37.69869,-3.09699],[37.7669,-3.67712],[39.20222,-4.67677],[38.74054,-5.90895],[38.79977,-6.47566],[39.44,-6.84],[39.4700000000001,-7.1],[39.19469,-7.7039],[39.25203,-8.00781],[39.18652,-8.48551],[39.53574,-9.11236999999988],[39.9496,-10.0984],[40.31659,-10.3170999999999],[39.521,-10.89688],[38.4275565935878,-11.2852023250816],[37.82764,-11.26879],[37.47129,-11.56876],[36.7751509946229,-11.5945374487808],[36.5140816586844,-11.7209380021667],[35.3123979021691,-11.4391464168792],[34.5599890479995,-11.5200200334158],[34.28,-10.16],[33.9408377240965,-9.69367384198028],[33.73972,-9.41715],[32.7593754412214,-9.230599053589],[32.1918648617919,-8.93035898197326],[31.5563480974666,-8.76204884199865],[31.1577513369501,-8.59457874731731],[30.74,-8.34],[30.2,-7.08],[29.62,-6.52],[29.4199927100883,-5.9399988745393],[29.5199866065731,-5.41997893638626],[29.3399975929004,-4.49998341229411],[29.7535124040999,-4.4523894181533],[30.11632,-4.09012],[30.50554,-3.56858],[30.75224,-3.35931],[30.74301,-3.03431],[30.52766,-2.80762],[30.46967,-2.41383],[30.7583089535831,-2.28725025798838],[30.8161348813178,-1.69891407634537],[30.4191048520193,-1.13465911215042],[30.7698600000001,-1.01455],[31.86617,-1.02736],[33.9037111971046,-0.95]]]}},{"type":"Feature","properties":{"admin":"Uganda","name":"Uganda","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[31.86617,-1.02736],[30.7698600000001,-1.01455],[30.4191048520193,-1.13465911215042],[29.8215185889961,-1.44332244222977],[29.579466180141,-1.34131316488561],[29.5878377621722,-0.587405694179381],[29.8195,-0.2053],[29.8757788429024,0.597379868976361],[30.0861535987628,1.06231273030642],[30.4685075212903,1.58380544677971],[30.8526701189481,1.84939647054375],[31.174149204236,2.20446523682131],[30.77332,2.33989000000014],[30.83385,3.50917],[31.24556,3.7819],[31.88145,3.55827],[32.68642,3.79232],[33.39,3.79],[34.005,4.24988494736215],[34.47913,3.5556],[34.59607,3.05374000000012],[35.03599,1.90584],[34.6721,1.17694],[34.18,0.515],[33.893568969667,0.109813537861839],[33.9037111971046,-0.95],[31.86617,-1.02736]]]}},{"type":"Feature","properties":{"admin":"Ukraine","name":"Ukraine","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[31.7859981625716,52.1016779648854],[32.1594120623127,52.0612669948332],[32.4120581397876,52.2886949733497],[32.715760532367,52.238465481162],[33.7526998227357,52.3350745713317],[34.391730584457,51.7688817409258],[34.1419783871904,51.5664134792062],[34.2248157081543,51.2559931504289],[35.0221830584179,51.2075723333714],[35.3779236183151,50.7739553900103],[35.3561161638879,50.5771973740591],[36.6261678403253,50.2255909287451],[37.3934595069951,50.3839533555036],[38.0106311378569,49.9156615260746],[38.5949882342134,49.9264619004236],[40.0690584653391,49.6010554062817],[40.0807890154693,49.3074299179993],[39.6746639340875,48.7838184678019],[39.8956323585676,48.2324050970314],[39.7382776222388,47.898937079452],[38.7705847511412,47.8256082220298],[38.2551123390297,47.5464004583568],[38.2235380388994,47.1021898463759],[37.42513715999,47.0222205674042],[36.7598547706644,46.6987002630409],[35.8236845232648,46.6459644638871],[34.9623417498239,46.2731965195496],[35.020787794746,45.6512189804847],[35.5100085792532,45.4099933945462],[36.5299979998302,45.4699897324371],[36.3347127621991,45.113215643894],[35.2399992205281,44.9399962428516],[33.8825110206529,44.3614785833441],[33.32642093276,44.5648770208449],[33.5469242693495,45.0347708196749],[32.4541744321055,45.3274661321761],[32.6308044776791,45.5191856959789],[33.5881620623184,45.8515685084802],[33.2985673357547,46.0805984563978],[31.7441402524152,46.3333478867374],[31.6753072446024,46.7062450221555],[30.7487488136091,46.583100084004],[30.3776086768889,46.0324101832857],[29.6032890154274,45.2933080104311],[29.1497249692016,45.4649254420724],[28.6797794939394,45.3040308701317],[28.233553501099,45.4882831894684],[28.4852694027928,45.5969070501459],[28.6599874203716,45.9399868841316],[28.9337174822216,46.2588304713725],[28.8629724464141,46.4378893092638],[29.0721069678993,46.5176777207225],[29.1706539242799,46.3792623968287],[29.7599719581364,46.3499876979354],[30.0246586443354,46.423936672545],[29.8382100766263,46.5253258327017],[29.9088517595693,46.6743606634315],[29.5596741065731,46.9285828720913],[29.4151351254527,47.3466452093326],[29.0508679542273,47.5102269557525],[29.122698195113,47.8490951605065],[28.6708911475852,48.1181485052341],[28.2595467465418,48.1555622422134],[27.5225374691952,48.4671194525011],[26.8578235206248,48.3682107610945],[26.6193367855978,48.2207262233335],[26.1974503923669,48.2208812526303],[25.9459411964024,47.9871487493742],[25.207743361113,47.8910564235275],[24.8663171729606,47.7375257431883],[24.4020561052504,47.9818777532804],[23.7609582862374,47.9855984564055],[23.1422363624068,48.0963410508069],[22.7105314470405,47.8821939153894],[22.6408199398787,48.1502395696874],[22.0856083513348,48.4222643092718],[22.2808419125336,48.8253921575807],[22.5581376482118,49.0857380234671],[22.7764188982126,49.0273953314096],[22.5184501482116,49.4767735866197],[23.4265084164444,50.3085057643575],[23.9227571957433,50.4248810898787],[24.0299857927489,50.7054066025752],[23.5270707536844,51.5784540879302],[24.0050777523842,51.6174439560945],[24.5531063168395,51.8884610052492],[25.327787713327,51.9106560329185],[26.3379586117686,51.8322887233479],[27.4540661964084,51.5923033717845],[28.2416150245366,51.5722270778391],[28.6176127458922,51.4277139349348],[28.9928353207635,51.6020443792715],[29.2549381853479,51.3682343613669],[30.1573637224609,51.4161384141015],[30.5551172218115,51.3195034857156],[30.6194543800148,51.8228060980224],[30.927549269339,52.0423534206144],[31.7859981625716,52.1016779648854]]]}},{"type":"Feature","properties":{"admin":"Uruguay","name":"Uruguay","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-57.6251334295829,-30.2162948544543],[-56.9760257635647,-30.1096863746361],[-55.9732445949409,-30.8830758603163],[-55.6015101792493,-30.8538786760714],[-54.5724515448051,-31.4945114071937],[-53.7879516261822,-32.0472425269876],[-53.2095889959715,-32.7276661109747],[-53.6505439927181,-33.2020040829818],[-53.3736616684982,-33.7683777809008],[-53.8064259507265,-34.3968148740022],[-54.9358660548977,-34.9526465797336],[-55.6740897284033,-34.7526587867641],[-56.2152970037961,-34.8598357073374],[-57.1396850246331,-34.4304562314242],[-57.8178606838155,-34.4625472958775],[-58.4270741441044,-33.9094544410576],[-58.3496111720989,-33.2631889788154],[-58.1326476711214,-33.040566908502],[-58.1424403550408,-32.0445036760762],[-57.8749373032819,-31.0165560849262],[-57.6251334295829,-30.2162948544543]]]}},{"type":"Feature","properties":{"admin":"United States of America","name":"United States","continent":"North America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-155.54211,19.08348],[-155.68817,18.91619],[-155.93665,19.05939],[-155.90806,19.33888],[-156.07347,19.70294],[-156.02368,19.81422],[-155.85008,19.97729],[-155.91907,20.17395],[-155.86108,20.26721],[-155.78505,20.2487],[-155.40214,20.07975],[-155.22452,19.99302],[-155.06226,19.8591],[-154.80741,19.50871],[-154.83147,19.45328],[-155.22217,19.23972],[-155.54211,19.08348]]],[[[-156.07926,20.64397],[-156.41445,20.57241],[-156.58673,20.783],[-156.70167,20.8643],[-156.71055,20.92676],[-156.61258,21.01249],[-156.25711,20.91745],[-155.99566,20.76404],[-156.07926,20.64397]]],[[[-156.75824,21.17684],[-156.78933,21.06873],[-157.32521,21.09777],[-157.25027,21.21958],[-156.75824,21.17684]]],[[[-157.65283,21.32217],[-157.70703,21.26442],[-157.7786,21.27729],[-158.12667,21.31244],[-158.2538,21.53919],[-158.29265,21.57912],[-158.0252,21.71696],[-157.94161,21.65272],[-157.65283,21.32217]]],[[[-159.34512,21.982],[-159.46372,21.88299],[-159.80051,22.06533],[-159.74877,22.1382],[-159.5962,22.23618],[-159.36569,22.21494],[-159.34512,21.982]]],[[[-94.81758,49.38905],[-94.6399999999999,48.8400000000001],[-94.32914,48.67074],[-93.63087,48.60926],[-92.61,48.45],[-91.64,48.14],[-90.8299999999999,48.27],[-89.6,48.01],[-89.2729174466367,48.0198082545828],[-88.3781141832865,48.3029175888938],[-87.4397926233002,47.94],[-86.4619908312281,47.553338019392],[-85.6523632474032,47.2202188177305],[-84.8760798815149,46.9000833196824],[-84.7792382473998,46.6371019557491],[-84.5437487454456,46.5386841904492],[-84.6049,46.4396],[-84.3367,46.4087700000001],[-84.1421195136733,46.5122258571157],[-84.0918512641615,46.2754186061383],[-83.8907653470057,46.1169269882992],[-83.6161309475905,46.1169269882992],[-83.4695507473946,45.9946863877126],[-83.5928507148431,45.8168936224125],[-82.5509246487582,45.3475165879054],[-82.3377631254311,44.44],[-82.137642381504,43.57108755144],[-82.43,42.98],[-82.8999999999999,42.4300000000001],[-83.1199999999999,42.08],[-83.1419996813126,41.975681057293],[-83.0298101468069,41.832795722006],[-82.6900892809202,41.6751050888673],[-82.4392777167916,41.6751050888673],[-81.2777465481671,42.2090259873068],[-80.2474476793478,42.3661998561227],[-78.9393621487437,42.8636113551481],[-78.92,42.965],[-79.0099999999999,43.27],[-79.1716735501119,43.4663394231843],[-78.7202799140424,43.625089423185],[-77.7378850979576,43.6290555893634],[-76.8200341458056,43.6287842880938],[-76.5,44.0184588937586],[-76.375,44.09631],[-75.31821,44.8164500000002],[-74.867,45.0004800000001],[-73.3478299999999,45.00738],[-71.5050599999999,45.0082],[-71.405,45.2550000000001],[-71.08482,45.3052400000002],[-70.6599999999998,45.46],[-70.305,45.915],[-69.99997,46.69307],[-69.237216,47.447781],[-68.905,47.185],[-68.23444,47.35486],[-67.79046,47.06636],[-67.79134,45.7028100000001],[-67.13741,45.13753],[-66.96466,44.8097000000002],[-68.03252,44.3252],[-69.0599999999999,43.98],[-70.1161699999999,43.6840500000001],[-70.645475633411,43.090238348964],[-70.81489,42.8653],[-70.825,42.335],[-70.4949999999999,41.805],[-70.08,41.78],[-70.185,42.145],[-69.88497,41.9228300000001],[-69.96503,41.6371700000002],[-70.64,41.475],[-71.12039,41.4944500000002],[-71.8599999999998,41.32],[-72.295,41.27],[-72.87643,41.22065],[-73.71,40.9311023516545],[-72.24126,41.1194800000001],[-71.9449999999998,40.93],[-73.345,40.63],[-73.982,40.628],[-73.952325,40.75075],[-74.25671,40.47351],[-73.96244,40.42763],[-74.17838,39.70926],[-74.90604,38.93954],[-74.98041,39.1964],[-75.20002,39.24845],[-75.52805,39.4985],[-75.32,38.96],[-75.0718347647898,38.7820322301793],[-75.05673,38.4041200000001],[-75.37747,38.01551],[-75.94023,37.21689],[-76.03127,37.2566],[-75.7220499999998,37.9370500000001],[-76.23287,38.319215],[-76.35,39.15],[-76.542725,38.717615],[-76.32933,38.08326],[-76.9899979316135,38.2399917669134],[-76.3016199999999,37.917945],[-76.25874,36.9664000000001],[-75.9718,36.89726],[-75.8680399999998,36.55125],[-75.72749,35.5507400000001],[-76.36318,34.8085400000001],[-77.3976349999999,34.51201],[-78.05496,33.92547],[-78.5543499999998,33.8613300000001],[-79.06067,33.49395],[-79.20357,33.15839],[-80.301325,32.509355],[-80.86498,32.0333],[-81.33629,31.44049],[-81.49042,30.7299900000001],[-81.31371,30.03552],[-80.98,29.1800000000001],[-80.5355849999999,28.47213],[-80.5299999999998,28.04],[-80.0565392849775,26.8800000000001],[-80.088015,26.205765],[-80.1315599999998,25.816775],[-80.38103,25.20616],[-80.6799999999999,25.08],[-81.17213,25.2012600000001],[-81.33,25.64],[-81.7099999999998,25.87],[-82.2399999999999,26.7300000000001],[-82.70515,27.49504],[-82.85526,27.88624],[-82.65,28.5500000000001],[-82.9299999999999,29.1000000000001],[-83.70959,29.93656],[-84.1,30.0900000000001],[-85.10882,29.63615],[-85.28784,29.6861200000001],[-85.7731,30.1526100000001],[-86.3999999999999,30.4000000000001],[-87.5303599999998,30.27433],[-88.41782,30.3849],[-89.1804899999998,30.31598],[-89.5938311784198,30.1599940048368],[-89.413735,29.89419],[-89.43,29.48864],[-89.21767,29.29108],[-89.40823,29.15961],[-89.77928,29.3071400000001],[-90.15463,29.11743],[-90.8802249999999,29.1485350000001],[-91.6267849999998,29.6770000000001],[-92.49906,29.5523],[-93.22637,29.78375],[-93.84842,29.71363],[-94.69,29.4800000000001],[-95.60026,28.73863],[-96.59404,28.30748],[-97.1399999999998,27.83],[-97.37,27.38],[-97.3799999999999,26.69],[-97.33,26.2100000000001],[-97.1399999999998,25.87],[-97.5299999999999,25.84],[-98.2399999999999,26.0600000000001],[-99.0199999999999,26.37],[-99.3,26.84],[-99.52,27.54],[-100.11,28.1100000000001],[-100.45584,28.6961200000001],[-100.9576,29.3807100000001],[-101.6624,29.7793000000001],[-102.48,29.76],[-103.11,28.97],[-103.94,29.27],[-104.45697,29.57196],[-104.70575,30.12173],[-105.03737,30.64402],[-105.63159,31.0838300000001],[-106.1429,31.39995],[-106.50759,31.75452],[-108.24,31.7548537181664],[-108.24194,31.34222],[-109.035,31.3419400000002],[-111.02361,31.33472],[-113.30498,32.03914],[-114.815,32.52528],[-114.72139,32.72083],[-115.99135,32.6123900000001],[-117.12776,32.53534],[-117.295937691274,33.0462246152039],[-117.944,33.6212364312014],[-118.410602275897,33.7409092231245],[-118.5198948228,34.0277815775757],[-119.081,34.078],[-119.438840642017,34.3484771782843],[-120.36778,34.44711],[-120.62286,34.60855],[-120.74433,35.1568600000001],[-121.71457,36.16153],[-122.54747,37.5517600000001],[-122.51201,37.7833900000001],[-122.95319,38.1137100000001],[-123.7272,38.9516600000001],[-123.86517,39.7669900000001],[-124.39807,40.3132],[-124.17886,41.1420200000001],[-124.2137,41.9996400000001],[-124.53284,42.76599],[-124.14214,43.70838],[-124.020535,44.615895],[-123.89893,45.52341],[-124.079635,46.86475],[-124.39567,47.72017],[-124.687210083008,48.1844329833985],[-124.566101074219,48.3797149658204],[-123.12,48.04],[-122.58736,47.096],[-122.34,47.36],[-122.5,48.18],[-122.84,49],[-120,49],[-117.03121,49],[-116.04818,49],[-113,49],[-110.05,49],[-107.05,49],[-104.04826,48.99986],[-100.65,49],[-97.2287200000047,49.0007],[-95.1590695091719,49],[-95.15609,49.38425],[-94.81758,49.38905]]],[[[-153.006314053337,57.1158421901659],[-154.005090298458,56.7346768255811],[-154.51640275777,56.9927489284467],[-154.670992804971,57.4611957871725],[-153.762779507441,57.8165746120438],[-153.228729417921,57.9689684108724],[-152.564790615835,57.901427313867],[-152.141147223906,57.591058661522],[-153.006314053337,57.1158421901659]]],[[[-165.579164191734,59.9099868841875],[-166.192770148767,59.754440822989],[-166.848337368822,59.9414061550209],[-167.45527706609,60.2130691595794],[-166.467792121425,60.3841698268978],[-165.674429694664,60.2936068793062],[-165.579164191734,59.9099868841875]]],[[[-171.731656867539,63.7825153672759],[-171.114433560245,63.592191067145],[-170.491112433941,63.6949754909735],[-169.682505459654,63.4311156276911],[-168.689439460301,63.2975062120006],[-168.771940884455,63.1885981309454],[-169.529439867205,62.9769314642779],[-170.290556200216,63.1944375677945],[-170.671385667991,63.375821845139],[-171.553063117539,63.3177892116751],[-171.791110602891,63.4058458523005],[-171.731656867539,63.7825153672759]]],[[[-155.067790290324,71.1477763943237],[-154.344165208941,70.6964085964702],[-153.900006273393,70.8899885118357],[-152.210006069935,70.8299921739448],[-152.270002407826,70.6000062120298],[-150.739992438745,70.4300165880057],[-149.720003018168,70.5300104844904],[-147.613361579357,70.2140349392418],[-145.689989800225,70.1200096706867],[-144.920010959076,69.9899917670405],[-143.589446180425,70.1525141465983],[-142.072510348713,69.8519381781726],[-140.985987521561,69.7119983995264],[-140.985988329005,69.7119983995264],[-140.992498752029,66.0000285915687],[-140.997769748123,60.3063967962986],[-140.012997816153,60.2768378770276],[-139.039000420316,60.00000722924],[-138.34089,59.5621100000001],[-137.4525,58.9050000000001],[-136.47972,59.46389],[-135.47583,59.78778],[-134.945,59.2705600000001],[-134.27111,58.86111],[-133.355548882207,58.4102851426452],[-132.73042,57.6928900000001],[-131.70781,56.55212],[-130.00778,55.91583],[-129.979994263358,55.2849978704972],[-130.536110189467,54.8027534043494],[-131.085818237972,55.178906155002],[-131.967211467142,55.4977755804591],[-132.250010742859,56.3699962428974],[-133.539181084356,57.1788874375621],[-134.078062920296,58.1230675319669],[-135.038211032279,58.1877147487639],[-136.628062309955,58.2122093776705],[-137.800006279686,58.4999954291038],[-139.867787041413,59.5377615423891],[-140.825273817133,59.7275174017651],[-142.574443535564,60.084446519605],[-143.95888099488,59.9991804063234],[-145.925556816828,60.4586097276143],[-147.114373949147,60.8846560736446],[-148.224306200128,60.6729894069772],[-148.018065558851,59.9783289658936],[-148.570822516861,59.9141726752033],[-149.727857835876,59.7056582709055],[-150.608243374616,59.3682111680395],[-151.716392788683,59.15582103132],[-151.859433153267,59.7449840358796],[-151.409719001247,60.7258027207794],[-150.346941494733,61.0335875515099],[-150.621110806257,61.2844249538545],[-151.895839199817,60.7271979844513],[-152.578329841096,60.0616572129643],[-154.019172126258,59.3502794460343],[-153.287511359653,58.8647276882198],[-154.232492438758,58.1463736029305],[-155.30749142151,57.7277945013663],[-156.308334723923,57.4227743597636],[-156.556097378546,56.9799848496706],[-158.117216559868,56.4636080999942],[-158.433321296197,55.9941535508385],[-159.603327399717,55.5666861029201],[-160.289719611634,55.6435806341706],[-161.223047655258,55.3647346055235],[-162.237766079741,55.0241869167201],[-163.069446581046,54.6897370469272],[-164.785569221027,54.4041730820822],[-164.94222632552,54.5722248398953],[-163.848339606766,55.0394314642461],[-162.870001390616,55.3480431178932],[-161.804174974596,55.8949864772704],[-160.563604702781,56.008054511125],[-160.070559862284,56.4180553249287],[-158.684442918919,57.0166751165979],[-158.461097378554,57.2169212917289],[-157.722770352184,57.5700005153631],[-157.550274421194,58.3283263210302],[-157.041674974577,58.9188845892617],[-158.194731208305,58.6158023138698],[-158.517217984023,58.7877814805373],[-159.058606126929,58.4241861029317],[-159.711667040017,58.9313902858763],[-159.9812888255,58.5725491400416],[-160.355271165997,59.0711233587936],[-161.355003425115,58.6708377142607],[-161.968893602526,58.6716645371774],[-162.054986538725,59.2669253607474],[-161.874170702135,59.6336213242906],[-162.518059048492,59.9897236192139],[-163.81834143782,59.7980557318434],[-164.662217577146,60.2674844427826],[-165.346387702475,60.5074956325624],[-165.350831875652,61.0738951686975],[-166.121379157556,61.5000190293762],[-165.73445187077,62.0749968532718],[-164.919178636718,62.6330764838079],[-164.562507901039,63.146378485763],[-163.753332485997,63.2194489610238],[-163.067224494458,63.059458726648],[-162.260555386382,63.5419357367412],[-161.534449836249,63.4558169623268],[-160.772506680321,63.7661081000233],[-160.958335130843,64.2227985704028],[-161.518068407212,64.4027875840753],[-160.777777676415,64.7886038275664],[-161.391926235988,64.7772350124623],[-162.453050096669,64.5594446885682],[-162.757786017894,64.3386054551688],[-163.546394212884,64.5591604681905],[-164.960829841145,64.4469450954689],[-166.425288255864,64.6866720648707],[-166.845004238939,65.0888955756145],[-168.110560065767,65.6699970567367],[-166.705271166022,66.0883177761394],[-164.474709642575,66.5766600612975],[-163.652511766596,66.5766600612975],[-163.788601651036,66.0772073431967],[-161.67777442121,66.1161196967124],[-162.48971452538,66.7355650905951],[-163.719716966791,67.1163945583701],[-164.430991380857,67.6163382025778],[-165.390286831707,68.0427721218502],[-166.764440680996,68.3588768581797],[-166.204707404627,68.8830309109162],[-164.430810513343,68.9155353868277],[-163.168613654615,69.3711148139129],[-162.930566169262,69.8580618353993],[-161.908897264636,70.3333299831876],[-160.934796515934,70.4476899278496],[-159.039175788387,70.8916421576689],[-158.119722866834,70.824721177851],[-156.580824551398,71.3577635769417],[-155.067790290324,71.1477763943237]]]]}},{"type":"Feature","properties":{"admin":"Uzbekistan","name":"Uzbekistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[66.5186068052887,37.3627843287588],[66.5461503437002,37.9746849635269],[65.2159989765074,38.4026950139843],[64.1702230162168,38.8924067245982],[63.518014764261,39.3632565374256],[62.374260288345,40.0538862167904],[61.8827140643847,41.0848568792294],[61.5471789895136,41.2663703476546],[60.4659529966707,41.2203266464825],[60.0833406919817,41.4251461858714],[59.9764221535698,42.2230819768902],[58.6290108579915,42.751551011723],[57.7865299823371,42.1705528834655],[56.9322152036878,41.8260261093756],[57.0963912290791,41.3223100856106],[55.9681913592829,41.3086416692694],[55.9289172707411,44.9958584661591],[58.5031270689285,45.5868043076328],[58.6899890480959,45.5000137395986],[60.2399719582583,44.7840367701947],[61.0583199400324,44.4058169622505],[62.0133004087862,43.5044766302156],[63.1857869810566,43.650074978198],[64.9008244159593,43.7280805527426],[66.0980123228651,42.9976600205131],[66.0233915546356,41.994646307944],[66.5106486347157,41.9876441513684],[66.7140470722165,41.1684435084615],[67.9858557473518,41.1359907089822],[68.2598958677956,40.6623245305949],[68.63248294462,40.6686807317668],[69.0700272968353,41.3842442897124],[70.3889648782208,42.0813076848974],[70.9623148944991,42.2661542832055],[71.2592476744482,42.1677106796895],[70.4200224140282,41.5199982773431],[71.1578585142916,41.1435871445291],[71.8701147805705,41.3929000921213],[73.0554171080492,40.8660330266895],[71.7748751158566,40.1458444280538],[71.0141980325202,40.2443655462182],[70.6014066913727,40.2185273300723],[70.4581596210596,40.4964948593703],[70.666622348925,40.9602133245414],[69.3294946633728,40.7278244085248],[69.0116329283455,40.0861581487567],[68.5364164569894,39.5334528671789],[67.7014286640173,39.5804784205645],[67.4422196796413,39.1401435410055],[68.1760250181859,38.9015534531139],[68.3920325051659,38.1570252548687],[67.8299996275595,37.1449940048647],[67.0757820982596,37.3561439072093],[66.5186068052887,37.3627843287588]]]}},{"type":"Feature","properties":{"admin":"Venezuela","name":"Venezuela","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-71.3315836249503,11.7762840845158],[-71.3600056627108,11.5399935978612],[-71.9470499335465,11.42328237553],[-71.6208682929202,10.9694599471428],[-71.6330639309411,10.446494452349],[-72.0741739569845,9.86565135338837],[-71.6956440904465,9.07226308841125],[-71.2645592922677,9.13719452558598],[-71.0399993557434,9.85999278405241],[-71.3500837877108,10.2119351261762],[-71.4006233384922,10.968969021036],[-70.1552988349065,11.37548167566],[-70.293843349881,11.8468224145942],[-69.9432445949968,12.1623070337361],[-69.5843000962975,11.4596109074312],[-68.8829992336644,11.4433845076916],[-68.2332714504587,10.8857441268299],[-68.1941265529976,10.5546532251359],[-67.2962485419263,10.5458682316463],[-66.227864142508,10.6486268172587],[-65.6552375962817,10.2007988550173],[-64.8904522365782,10.0772146671913],[-64.3294787258337,10.3895987003957],[-64.3180065578649,10.641417954954],[-63.0793224758287,10.7017243514386],[-61.8809460109802,10.7156253117251],[-62.7301189846164,10.4202686629609],[-62.388511928951,9.94820445397464],[-61.5887674628019,9.87306692142226],[-60.8305966864317,9.38133982994894],[-60.6712524074597,8.58017426191188],[-60.1500955877962,8.60275686282343],[-59.7582848781592,8.36703481692405],[-60.5505879380582,7.77960297284618],[-60.6379727850638,7.41499990481085],[-60.2956680975624,7.04391144452292],[-60.543999192941,6.85658437746488],[-61.1593363104565,6.69607737876632],[-61.1394150458079,6.23429677980614],[-61.4103029038819,5.95906810141962],[-60.7335741848037,5.2002772078619],[-60.6011791652719,4.91809804933213],[-60.9668932766015,4.53646759685664],[-62.0854296535591,4.16212352133431],[-62.8045330471167,4.00696503337795],[-63.0931975978991,3.77057119385878],[-63.8883428615741,4.02053009685457],[-64.6286594305875,4.14848094320925],[-64.816064012294,4.05644521729742],[-64.3684944322141,3.79721039470525],[-64.4088278876179,3.12678620036662],[-64.2699991522658,2.49700552002557],[-63.4228673977051,2.41106761312417],[-63.3687880113116,2.20089956299313],[-64.0830854966661,1.91636912679408],[-64.1993057928905,1.49285492594602],[-64.6110119289599,1.32873057698704],[-65.3547133042884,1.0952822941085],[-65.5482673814376,0.78925446207603],[-66.3257651434849,0.724452215982012],[-66.8763258531226,1.25336050048934],[-67.181294318293,2.25063812907406],[-67.4470920477863,2.60028086996087],[-67.8099381171237,2.82065501546957],[-67.3031731838534,3.31845408773718],[-67.3375638495437,3.54234223064172],[-67.6218359035813,3.83948171631999],[-67.8230122544935,4.5039372827289],[-67.7446966213552,5.22112864829167],[-67.5215319485027,5.55687042889197],[-67.3414395819656,6.09546804445402],[-67.695087246355,6.26731802004065],[-68.2650524563182,6.15326813397247],[-68.9853185696023,6.20680491782686],[-69.3894799465571,6.09986054119884],[-70.0933129543724,6.96037649172311],[-70.6742335679815,7.08778473553872],[-71.9601757473486,6.99161489504354],[-72.1983524237819,7.34043081301368],[-72.4444872707881,7.42378489830048],[-72.4796789211788,7.63250600832735],[-72.360900641556,8.00263845461789],[-72.4398622300979,8.40527537682003],[-72.6604947577681,8.62528778730268],[-72.7887298245004,9.08502716718733],[-73.30495154488,9.1519998234376],[-73.0276041327696,9.73677033125244],[-72.9052860175347,10.4503443465548],[-72.6146577623252,10.8219754093818],[-72.2275754462429,11.1087020939532],[-71.9739216783383,11.6086715763771],[-71.3315836249503,11.7762840845158]]]}},{"type":"Feature","properties":{"admin":"Vietnam","name":"Vietnam","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[108.050180291783,21.5523798690601],[106.71506798709,20.696850694252],[105.881682163519,19.7520504826597],[105.662005649846,19.0581651880606],[106.426816847766,18.0041209986032],[107.36195356652,16.6974565698871],[108.26949507043,16.0797423364861],[108.877106561317,15.2766905786704],[109.335269810017,13.4260283472177],[109.200135939574,11.6668592391378],[108.366129998815,11.0083206242263],[107.220928582795,10.3644839543018],[106.405112746203,9.53083974856932],[105.158263787865,8.59975962975049],[104.795185174582,9.2410383162765],[105.076201613386,9.91849050540681],[104.334334751403,10.4865436873752],[105.199914992292,10.8893098006581],[106.249670037869,10.9618118351636],[105.810523716253,11.5676146509212],[107.491403029411,12.3372059188279],[107.614547967562,13.5355307072442],[107.382727492301,14.202440904187],[107.564525181104,15.2021731633056],[107.312705926546,15.9085383163032],[106.556007928496,16.6042839624648],[105.925762160264,17.485315456609],[105.094598423282,18.6669745956111],[103.896532017027,19.2651809758218],[104.183387892679,19.6246680770602],[104.822573683697,19.8866417505639],[104.435000441508,20.7587332219215],[103.203861118586,20.7665622014137],[102.754896274835,21.6751372339695],[102.170435825614,22.4647531193893],[102.7069922221,22.7087950708877],[103.504514601661,22.7037566187392],[104.476858351664,22.819150092047],[105.329209425887,23.3520633000569],[105.811247186305,22.9768924016179],[106.725403273548,22.7942678898984],[106.567273390735,22.2182048609248],[107.043420037873,21.8118989120299],[108.050180291783,21.5523798690601]]]}},{"type":"Feature","properties":{"admin":"Vanuatu","name":"Vanuatu","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[167.844876743845,-16.4663331030972],[167.515181105823,-16.59784962328],[167.180007765978,-16.159995212471],[167.21680138577,-15.8918462053084],[167.844876743845,-16.4663331030972]]],[[[167.107712437201,-14.933920179914],[167.27002811103,-15.7400208472349],[167.001207310248,-15.6146021460625],[166.793157993841,-15.6688107235367],[166.649859247096,-15.3927035458012],[166.629136997746,-14.6264970842096],[167.107712437201,-14.933920179914]]]]}},{"type":"Feature","properties":{"admin":"Yemen","name":"Yemen","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[53.1085726255475,16.651051133689],[52.3852059263259,16.3824112004197],[52.1917293638251,15.938433132384],[52.1681649107,15.5974203556899],[51.1725150897325,15.1752497420815],[49.5745764504031,14.7087665877827],[48.6792305845142,14.0032024194857],[48.2389473813874,13.9480895044464],[47.9389140155008,14.0072331812044],[47.3544535662797,13.5922197534684],[46.7170764503917,13.399699204965],[45.8775928078103,13.3477643905117],[45.6250500831999,13.2909461532068],[45.4064587746052,13.0269054224114],[45.1443559100209,12.9539383000153],[44.9895333188744,12.6995869002747],[44.4945764503828,12.7216527368633],[44.1751127459545,12.5859504256649],[43.4829586118371,12.6368000350401],[43.2228711281121,13.2209504256674],[43.2514481951695,13.7675837264508],[43.0879439633981,14.0626303166213],[42.8922453143087,14.8022492537987],[42.6048726743336,15.2133352726806],[42.8050154966,15.2619627954673],[42.7024377785007,15.718885809792],[42.8236706886574,15.9117422551053],[42.779332309751,16.3478913436487],[43.2183752785027,16.6668899601864],[43.1157975604034,17.0884404566074],[43.3807943051961,17.5799866805677],[43.7915185890519,17.3199767114911],[44.0626131528551,17.4103587915696],[45.2166512387972,17.4333289657233],[45.3999992205688,17.3333350692386],[46.3666585630205,17.2333153345376],[46.7499943377616,17.2833381209962],[47.0000049171898,16.9499992944974],[47.4666947772176,17.1166816268549],[48.1833435402413,18.1666692163773],[49.1166715838649,18.6166675887749],[52.0000098000222,19.0000033635161],[52.782184279192,17.3497423364912],[53.1085726255475,16.651051133689]]]}},{"type":"Feature","properties":{"admin":"South Africa","name":"South Africa","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[31.5210014177789,-29.2573869768462],[31.325561150851,-29.4019776343989],[30.9017627296253,-29.909956963828],[30.6228133481138,-30.4237757301061],[30.0557161801428,-31.140269463833],[28.9255526059195,-32.1720411109725],[28.2197558936771,-32.7719528134489],[27.464608188596,-33.2269637997788],[26.4194523454928,-33.6149504534262],[25.9096643409335,-33.6670402971764],[25.7806282895007,-33.9446460914483],[25.172861769316,-33.7968514950936],[24.6778532243921,-33.9871757952245],[23.5940434099346,-33.7944743792082],[22.9881889177447,-33.916430759417],[22.5741573422222,-33.8640825335053],[21.542799106541,-34.2588387997829],[20.689052768647,-34.4171753883252],[20.0712610205976,-34.795136814108],[19.6164050635646,-34.8191663551237],[19.1932784359587,-34.4625989723098],[18.8553145687699,-34.4443055152785],[18.4246431820494,-33.997872816709],[18.3774109229346,-34.1365206845481],[18.2444991390799,-33.867751560198],[18.2500801937674,-33.2814307594144],[17.9251904639484,-32.6112907854534],[18.2479097836112,-32.4291313616246],[18.2217615088715,-31.6616329892257],[17.5669177588689,-30.7257211239875],[17.0644161312627,-29.8786410458592],[17.0629175147262,-29.87595387138],[16.3449768408952,-28.5767050106977],[16.8240173682409,-28.0821615536645],[17.2189286638154,-28.3559432919468],[17.3874971859515,-28.7835140927298],[17.8361519711095,-28.8563778622613],[18.4648991228047,-29.0454619280173],[19.0021273129111,-28.9724431291889],[19.8947343278886,-28.4611048316608],[19.8957678565344,-24.7677902157606],[20.1657255388272,-24.9179619280008],[20.7586092465118,-25.8681364885514],[20.6664701677354,-26.4774533017049],[20.8896090023717,-26.8285429826959],[21.6058960303694,-26.7265337053518],[22.1059688656579,-26.2802560360791],[22.5795316911806,-25.9794475237081],[22.8242712745149,-25.5004586727948],[23.3120967953502,-25.2686898739657],[23.7335697771227,-25.3901294898516],[24.2112667172288,-25.6702157528736],[25.0251705258258,-25.7196700985769],[25.6646663754377,-25.4868160946697],[25.7658488298652,-25.1748454729237],[25.9416520525222,-24.6963733863332],[26.4857532081233,-24.6163265927131],[26.7864066911974,-24.2406906063835],[27.1194096208862,-23.5743230119798],[28.0172359555252,-22.8277535946591],[29.432188348109,-22.0913127580676],[29.839036899543,-22.1022164852812],[30.3228833350918,-22.2716118303339],[30.6598653500671,-22.1515674781199],[31.1914091326213,-22.2515096981724],[31.6703979835346,-23.6589690080739],[31.9305888201242,-24.3694165992225],[31.7524084815819,-25.4842839494874],[31.8377779477281,-25.8433318010513],[31.3331575863979,-25.6601905250089],[31.0440796241571,-25.7314523251394],[30.9496667823599,-26.0226490211041],[30.6766085141296,-26.3980783017046],[30.6859619483745,-26.7438453101695],[31.2827730649133,-27.285879408479],[31.8680603370511,-27.1779273414213],[32.0716654802811,-26.7338200823049],[32.8301204770289,-26.7421916643362],[32.5802649268977,-27.4701575660318],[32.4621326026784,-28.3010112444206],[32.203388706193,-28.7524048804901],[31.5210014177789,-29.2573869768462]],[[28.9782625668572,-28.9555966122617],[28.5417000668555,-28.6475017229376],[28.0743384132078,-28.8514686011936],[27.5325110206275,-29.2427108700754],[26.9992619158076,-29.87595387138],[27.7493970069565,-30.6451058896122],[28.1072046241454,-30.5457321103149],[28.2910693702399,-30.2262167294543],[28.8483996925077,-30.0700505510682],[29.018415154748,-29.7437655575774],[29.3251664568326,-29.2573869768462],[28.9782625668572,-28.9555966122617]]]}},{"type":"Feature","properties":{"admin":"Zambia","name":"Zambia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[32.7593754412213,-9.23059905358906],[33.2313879737753,-9.6767216935648],[33.4856876970836,-10.5255587703911],[33.3153104998173,-10.7965499813297],[33.1142891782019,-11.6071981746923],[33.3064221534631,-12.4357780900602],[32.9917643572379,-12.7838705379783],[32.6881653175231,-13.7128577612893],[33.2140246925252,-13.9718600399362],[30.1794812354818,-14.7960991349915],[30.2742558123051,-15.5077869605152],[29.5168343442031,-15.6446778296564],[28.9474634132113,-16.0430514461944],[28.8258687680285,-16.3897486304406],[28.4679061215427,-16.4684001603888],[27.5982434425028,-17.290830580314],[27.0444271176307,-17.9380262183374],[26.7067733090356,-17.9612289364365],[26.3819352556489,-17.8460421688579],[25.264225701608,-17.7365398088314],[25.0844433936646,-17.6618156877374],[25.0769503109823,-17.5788233374766],[24.6823490740015,-17.3534107398195],[24.0338615251708,-17.2958431942463],[23.2150484555061,-17.523116143466],[22.5624784685243,-16.8984514299218],[21.8878426449539,-16.0803101538769],[21.9338863461259,-12.8984371883694],[24.0161365088947,-12.9110462378486],[23.9309220720454,-12.5658476701389],[24.0799052263428,-12.1912968888874],[23.9041536801182,-11.7222815894063],[24.0178935075926,-11.2372982723471],[23.9122152035557,-10.9268262671375],[24.257155389104,-10.9519926896637],[24.3145162289479,-11.2628264298993],[24.7831697934029,-11.238693536019],[25.4181181169732,-11.33093596766],[25.7523096046047,-11.7849651017764],[26.5530875993996,-11.9244397925321],[27.1644197934125,-11.6087484676611],[27.3887988624238,-12.1327474911007],[28.15510867688,-12.2724805640179],[28.523561639121,-12.6986044246967],[28.9342859229768,-13.2489584286051],[29.6996138852195,-13.2572266577718],[29.6160014177712,-12.1788945451373],[29.3415478858691,-12.3607439103724],[28.6424174333923,-11.9715686987823],[28.3722530453704,-11.7936467424014],[28.4960697771418,-10.789883721564],[28.6736816749289,-9.60592498132493],[28.4498710466728,-9.16491830814608],[28.7348665707625,-8.52655934004458],[29.0029122250605,-8.40703175215347],[30.3460860531908,-8.23825652428822],[30.7400154965518,-8.34000741947091],[31.15775133695,-8.59457874731736],[31.5563480974665,-8.76204884199864],[32.191864861792,-8.93035898197328],[32.7593754412213,-9.23059905358906]]]}},{"type":"Feature","properties":{"admin":"Zimbabwe","name":"Zimbabwe","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[31.1914091326213,-22.2515096981724],[30.6598653500671,-22.1515674781199],[30.3228833350918,-22.2716118303339],[29.839036899543,-22.1022164852812],[29.432188348109,-22.0913127580676],[28.7946562029242,-21.6394540341074],[28.0213700701086,-21.4859750302006],[27.7272278175033,-20.8518018531147],[27.7247473487532,-20.4990585262904],[27.2965047543505,-20.391519870691],[26.1647908871585,-19.2930856258949],[25.8503914730947,-18.7144129370905],[25.6491634457502,-18.536025892819],[25.264225701608,-17.7365398088314],[26.3819352556489,-17.8460421688579],[26.7067733090356,-17.9612289364365],[27.0444271176307,-17.9380262183374],[27.5982434425028,-17.290830580314],[28.4679061215427,-16.4684001603888],[28.8258687680285,-16.3897486304406],[28.9474634132113,-16.0430514461944],[29.5168343442031,-15.6446778296564],[30.2742558123051,-15.5077869605152],[30.3389547055345,-15.8808391252302],[31.1730639991577,-15.8609436987979],[31.6364982439512,-16.0719902482779],[31.8520406430406,-16.3194170060914],[32.3282389666102,-16.3920740698938],[32.8476387875758,-16.7133981258846],[32.8498608741644,-17.9790573055772],[32.6548856951271,-18.6720899390435],[32.6119942563249,-19.4193828264163],[32.7727079607526,-19.7155921363133],[32.6597432797626,-20.3042900529823],[32.5086930681734,-20.3952922502483],[32.244988234188,-21.1164885393137],[31.1914091326213,-22.2515096981724]]]}}]`),S3e={features:b3e};zO({ThreeGlobe:wO});const T3e=3,M3e=1.2,TC=300;function E3e({globeConfig:i,data:e}){const t=yn.useRef(null),n=yn.useRef(null),[r,s]=yn.useState(!1),a={pointSize:1,atmosphereColor:"#ffffff",showAtmosphere:!0,atmosphereAltitude:.1,polygonColor:"rgba(255,255,255,0.7)",arcTime:2e3,arcLength:.9,rings:1,maxRings:3,...i};return yn.useEffect(()=>{!t.current&&n.current&&(t.current=new wO,n.current.add(t.current),s(!0))},[]),yn.useEffect(()=>{if(!t.current||!r)return;const o=t.current.globeMaterial();o.color=new Dt(i.globeColor),o.emissive=new Dt(i.emissive),o.emissiveIntensity=i.emissiveIntensity||.1,o.shininess=i.shininess||.9},[r,i.globeColor,i.emissive,i.emissiveIntensity,i.shininess]),yn.useEffect(()=>{if(!t.current||!r||!e)return;const o=e;let l=[];for(let c=0;c<o.length;c++){const p=o[c];l.push({size:a.pointSize,order:p.order,color:p.color,lat:p.startLat,lng:p.startLng}),l.push({size:a.pointSize,order:p.order,color:p.color,lat:p.endLat,lng:p.endLng})}const u=l.filter((c,p,y)=>y.findIndex(_=>["lat","lng"].every(b=>_[b]===c[b]))===p);t.current.hexPolygonsData(S3e.features).hexPolygonResolution(3).hexPolygonMargin(.7).showAtmosphere(a.showAtmosphere).atmosphereColor(a.atmosphereColor).atmosphereAltitude(a.atmosphereAltitude).hexPolygonColor(()=>a.polygonColor),t.current.arcsData(e).arcStartLat(c=>c.startLat*1).arcStartLng(c=>c.startLng*1).arcEndLat(c=>c.endLat*1).arcEndLng(c=>c.endLng*1).arcColor(c=>c.color).arcAltitude(c=>c.arcAlt*1).arcStroke(()=>[.32,.28,.3][Math.round(Math.random()*2)]).arcDashLength(a.arcLength).arcDashInitialGap(c=>c.order*1).arcDashGap(15).arcDashAnimateTime(()=>a.arcTime),t.current.pointsData(u).pointColor(c=>c.color).pointsMerge(!0).pointAltitude(0).pointRadius(2),t.current.ringsData([]).ringColor(()=>a.polygonColor).ringMaxRadius(a.maxRings).ringPropagationSpeed(T3e).ringRepeatPeriod(a.arcTime*a.arcLength/a.rings)},[r,e,a.pointSize,a.showAtmosphere,a.atmosphereColor,a.atmosphereAltitude,a.polygonColor,a.arcLength,a.arcTime,a.rings,a.maxRings]),yn.useEffect(()=>{if(!t.current||!r||!e)return;const o=setInterval(()=>{if(!t.current)return;const l=R3e(0,e.length,Math.floor(e.length*4/5)),u=e.filter((c,p)=>l.includes(p)).map(c=>({lat:c.startLat,lng:c.startLng,color:c.color}));t.current.ringsData(u)},2e3);return()=>{clearInterval(o)}},[r,e]),Ir.jsx("group",{ref:n})}function w3e({isVisible:i}){const{gl:e,size:t,invalidate:n}=p1();return yn.useEffect(()=>{e&&(e.setPixelRatio(window.devicePixelRatio),e.setSize(t.width,t.height),e.setClearColor(16755455,0),i&&n())},[i,e,t,n]),null}function V3e(i){console.log(i.isVisible);const{globeConfig:e}=i,t=new h3;return t.fog=new s7(16777215,400,2e3),i.isVisible?Ir.jsxs(f3e,{scene:t,camera:new ar(50,M3e,180,1800),frameloop:i.isVisible?"always":"never",children:[Ir.jsx(w3e,{isVisible:i.isVisible}),Ir.jsx("ambientLight",{color:e.ambientLight,intensity:.6}),Ir.jsx("directionalLight",{color:e.directionalLeftLight,position:new te(-400,100,400)}),Ir.jsx("directionalLight",{color:e.directionalTopLight,position:new te(-200,500,200)}),Ir.jsx("pointLight",{color:e.pointLight,position:new te(-200,500,200),intensity:.8}),Ir.jsx(E3e,{...i}),Ir.jsx(x3e,{enablePan:!1,enableZoom:!1,minDistance:TC,maxDistance:TC,autoRotateSpeed:1,autoRotate:!0,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI-Math.PI/3})]}):null}function z3e(i){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(e,function(n,r,s,a){return r+r+s+s+a+a});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function R3e(i,e,t){const n=[];for(;n.length<t;){const r=Math.floor(Math.random()*(e-i))+i;n.indexOf(r)===-1&&n.push(r)}return n}export{E3e as Globe,w3e as WebGLRendererConfig,V3e as World,R3e as genRandomNumbers,z3e as hexToRgb};
